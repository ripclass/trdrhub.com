apps\api\.env.example:32:DR_OBJECT_BACKUP_BUCKET=trdrhub-dev-backups
apps\api\.env.production.template:24:DR_OBJECT_BACKUP_BUCKET=trdrhub-prod-backups
apps\api\.github\workflows\cdk-deploy.yml:122:      uses: actions/github-script@v7
apps\api\.github\workflows\terraform-plan-apply.yml:106:      uses: actions/github-script@v7
apps\api\alembic\versions\20250916_170000_add_billing_system.py:10:3. Usage records table for tracking billable actions
apps\api\alembic\versions\20250916_170000_add_billing_system.py:85:    # Create usage_records table
apps\api\alembic\versions\20250916_170000_add_billing_system.py:86:    usage_records_table = op.create_table(
apps\api\alembic\versions\20250916_170000_add_billing_system.py:87:        'usage_records',
apps\api\alembic\versions\20250916_170000_add_billing_system.py:107:    # Create indexes for usage_records
apps\api\alembic\versions\20250916_170000_add_billing_system.py:108:    op.create_index('ix_usage_records_company_id', 'usage_records', ['company_id'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:109:    op.create_index('ix_usage_records_session_id', 'usage_records', ['session_id'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:110:    op.create_index('ix_usage_records_action', 'usage_records', ['action'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:111:    op.create_index('ix_usage_records_user_id', 'usage_records', ['user_id'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:112:    op.create_index('ix_usage_records_invoice_id', 'usage_records', ['invoice_id'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:113:    op.create_index('ix_usage_records_timestamp', 'usage_records', ['timestamp'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:116:    op.create_index('ix_usage_company_timestamp', 'usage_records', ['company_id', 'timestamp'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:117:    op.create_index('ix_usage_company_action', 'usage_records', ['company_id', 'action'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:118:    op.create_index('ix_usage_billing_cycle', 'usage_records', ['company_id', 'billed', 'timestamp'])
apps\api\alembic\versions\20250916_170000_add_billing_system.py:143:    # Drop usage_records table and indexes
apps\api\alembic\versions\20250916_170000_add_billing_system.py:144:    op.drop_index('ix_usage_billing_cycle', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:145:    op.drop_index('ix_usage_company_action', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:146:    op.drop_index('ix_usage_company_timestamp', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:147:    op.drop_index('ix_usage_records_timestamp', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:148:    op.drop_index('ix_usage_records_invoice_id', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:149:    op.drop_index('ix_usage_records_user_id', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:150:    op.drop_index('ix_usage_records_action', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:151:    op.drop_index('ix_usage_records_session_id', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:152:    op.drop_index('ix_usage_records_company_id', 'usage_records')
apps\api\alembic\versions\20250916_170000_add_billing_system.py:153:    op.drop_table('usage_records')
apps\api\alembic\versions\20250916_170100_seed_default_companies.py:110:    # Delete all companies (this will cascade to invoices and usage records)
apps\api\alembic\versions\20250917_add_admin_console_tables.py:436:        sa.Column('usage_count', sa.Integer, default=0),
apps\api\alembic\versions\20250917_add_admin_console_tables.py:598:    # LLM budgets and usage
apps\api\alembic\versions\20250917_add_integration_models.py:92:        sa.Column('usage_count', sa.Integer, nullable=False, default=0),
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:1:"""Add tables for AI usage tracking and assist events.
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:3:Revision ID: 20251116_add_ai_usage_and_events
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:13:revision = "20251116_add_ai_usage_and_events"
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:21:        "ai_usage_records",
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:37:    op.create_index("ix_ai_usage_records_tenant_id", "ai_usage_records", ["tenant_id"])
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:38:    op.create_index("ix_ai_usage_records_user_id", "ai_usage_records", ["user_id"])
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:40:        "ix_ai_usage_records_validation_session_id",
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:41:        "ai_usage_records",
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:78:    op.drop_index("ix_ai_usage_records_validation_session_id", table_name="ai_usage_records")
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:79:    op.drop_index("ix_ai_usage_records_user_id", table_name="ai_usage_records")
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:80:    op.drop_index("ix_ai_usage_records_tenant_id", table_name="ai_usage_records")
apps\api\alembic\versions\20251116_add_ai_usage_and_events.py:81:    op.drop_table("ai_usage_records")
apps\api\alembic\versions\20251118_extend_ai_cost_precision.py:5:Revises: 20251116_add_ai_usage_and_events
apps\api\alembic\versions\20251118_extend_ai_cost_precision.py:15:down_revision = "20251116_add_ai_usage_and_events"
apps\api\alembic\versions\20251118_extend_ai_cost_precision.py:28:        "ai_usage_records",
apps\api\alembic\versions\20251118_extend_ai_cost_precision.py:52:        "ai_usage_records",
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:1:"""Hub Multi-Tool Foundation - Organizations, Plans, Subscriptions, Usage
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:7:- Creates hub_usage for monthly usage tracking
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:8:- Creates hub_usage_logs for detailed audit
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:113:    # 4. CREATE HUB_USAGE TABLE (Monthly aggregated usage)
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:117:        'hub_usage',
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:122:        # Usage counts per tool
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:145:    op.create_index('ix_hub_usage_company_period', 'hub_usage', ['company_id', 'period'], unique=True)
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:146:    op.create_index('ix_hub_usage_period', 'hub_usage', ['period'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:149:    # 5. CREATE HUB_USAGE_LOGS TABLE (Detailed audit trail)
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:153:        'hub_usage_logs',
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:178:    op.create_index('ix_hub_usage_logs_company', 'hub_usage_logs', ['company_id'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:179:    op.create_index('ix_hub_usage_logs_user', 'hub_usage_logs', ['user_id'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:180:    op.create_index('ix_hub_usage_logs_operation', 'hub_usage_logs', ['operation'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:181:    op.create_index('ix_hub_usage_logs_tool', 'hub_usage_logs', ['tool'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:182:    op.create_index('ix_hub_usage_logs_created', 'hub_usage_logs', ['created_at'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:183:    op.create_index('ix_hub_usage_logs_company_created', 'hub_usage_logs', ['company_id', 'created_at'])
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:363:    op.drop_table('hub_usage_logs')
apps\api\alembic\versions\20251201_hub_multi_tool_foundation.py:364:    op.drop_table('hub_usage')
apps\api\alembic\versions\20251205_add_lc_builder.py:73:        sa.Column('usage_count', sa.Integer, default=0),
apps\api\alembic\versions\20251205_add_lc_builder.py:199:        sa.Column('usage_count', sa.Integer, default=0),
apps\api\ANALYTICS_GUIDE.md:3:This document provides a comprehensive guide to LCopilot's analytics dashboard system, which delivers meaningful insights about job processing, rejection rates, discrepancy patterns, and system usage across all user roles.
apps\api\ANALYTICS_GUIDE.md:192:  "usage_by_role": {
apps\api\ANALYTICS_GUIDE.md:308:| **Usage by Role** | Job distribution across user roles |
apps\api\ANALYTICS_GUIDE.md:355:## Usage Examples
apps\api\ANALYTICS_GUIDE.md:445:  userActivity: systemMetrics.usage_by_role
apps\api\ANALYTICS_GUIDE.md:487:- Database index usage monitoring
apps\api\ANALYTICS_GUIDE.md:488:- Memory and CPU usage tracking
apps\api\ANALYTICS_GUIDE.md:530:- Verify user role with `/auth/me`
apps\api\app\constants\thresholds.py:7:Usage:
apps\api\app\core\auth.py:30:    Usage:
apps\api\app\core\pricing.py:249:    """Calculate cost for overage usage beyond subscription limits."""
apps\api\app\core\pricing.py:326:    expected_usage: Dict[str, int],
apps\api\app\core\pricing.py:330:    Estimate monthly cost based on expected usage patterns.
apps\api\app\core\pricing.py:333:        expected_usage: Dict mapping action types to expected monthly quantity
apps\api\app\core\pricing.py:344:        for action, quantity in expected_usage.items():
apps\api\app\core\pricing.py:357:            "usage_cost": total_cost,
apps\api\app\core\pricing.py:372:        for action, quantity in expected_usage.items():
apps\api\app\core\pricing.py:399:            "usage_cost": overage_cost,
apps\api\app\core\security.py:686:    Usage:
apps\api\app\core\security.py:1050:    Usage:
apps\api\app\middleware\billing_checkpoint.py:29:    Critical middleware that enforces billing for all integration usage.
apps\api\app\middleware\billing_checkpoint.py:116:                detail="Authentication required for integration usage"
apps\api\app\middleware\billing_checkpoint.py:119:        # Check company quotas for integration usage
apps\api\app\middleware\billing_checkpoint.py:204:        # Update usage counter
apps\api\app\middleware\billing_checkpoint.py:205:        company_integration.increment_usage()
apps\api\app\middleware\billing_checkpoint.py:267:            await billing_service.record_integration_usage(
apps\api\app\middleware\quota_middleware.py:29:    4. Records usage after successful operation
apps\api\app\middleware\quota_middleware.py:83:            # Record usage after successful operation (only for 2xx responses)
apps\api\app\middleware\quota_middleware.py:86:                    billing_service.record_usage(
apps\api\app\middleware\quota_middleware.py:93:                    # Log but don't fail the request for usage recording errors
apps\api\app\middleware\quota_middleware.py:94:                    print(f"Failed to record usage: {e}")
apps\api\app\middleware\quota_middleware.py:194:        Extract session ID from request path for usage recording.
apps\api\app\middleware\quota_middleware.py:266:                    "current_usage": exception.current_usage,
apps\api\app\middleware\quota_middleware.py:314:def record_usage_manually(
apps\api\app\middleware\quota_middleware.py:321:    Manual usage recording function for use in endpoints.
apps\api\app\middleware\quota_middleware.py:333:        billing_service.record_usage(
apps\api\app\middleware\quota_middleware.py:342:        # Log the error but don't raise (usage recording shouldn't break the request)
apps\api\app\middleware\quota_middleware.py:343:        print(f"Failed to record usage manually: {e}")
apps\api\app\middleware\quota_middleware.py:351:    Usage:
apps\api\app\middleware\quota_middleware.py:372:            # Record usage after successful execution
apps\api\app\middleware\quota_middleware.py:383:                record_usage_manually(
apps\api\app\models\admin.py:527:    usage_count = Column(Integer, default=0)
apps\api\app\models\admin.py:692:    """LLM usage budgets and cost control"""
apps\api\app\models\api_tokens_webhooks.py:65:    usage_count = Column(Integer, nullable=False, default=0)
apps\api\app\models\bulk_jobs.py:247:    # Usage tracking
apps\api\app\models\bulk_jobs.py:248:    usage_count = Column(Integer, default=0)
apps\api\app\models\bulk_jobs.py:261:        Index('ix_bulk_templates_usage', 'usage_count', 'last_used_at'),
apps\api\app\models\company.py:50:    Each company has users, billing plan, and usage quotas.
apps\api\app\models\company.py:95:    usage_records = relationship("UsageRecord", back_populates="company")
apps\api\app\models\hub.py:7:- HubUsage: Monthly aggregated usage per company
apps\api\app\models\hub.py:8:- HubUsageLog: Detailed audit trail of all operations
apps\api\app\models\hub.py:35:    """Operations that can be tracked for usage."""
apps\api\app\models\hub.py:52:# Mapping from operation to the field name in HubUsage
apps\api\app\models\hub.py:68:    - Included usage limits per tool
apps\api\app\models\hub.py:82:    # Usage limits: {"lc_validations": 10, "price_checks": 30, ...}
apps\api\app\models\hub.py:110:        """Get the usage limit for an operation. -1 = unlimited, 0 = pay as you go."""
apps\api\app\models\hub.py:125:        """Check if plan has unlimited usage (enterprise)."""
apps\api\app\models\hub.py:130:        """Check if plan is pay-as-you-go (no included usage)."""
apps\api\app\models\hub.py:204:class HubUsage(Base):
apps\api\app\models\hub.py:206:    Monthly aggregated usage per company.
apps\api\app\models\hub.py:209:    - Usage counts per tool
apps\api\app\models\hub.py:213:    __tablename__ = "hub_usage"
apps\api\app\models\hub.py:219:    # Usage counts per tool
apps\api\app\models\hub.py:241:    company = relationship("Company", backref="hub_usage")
apps\api\app\models\hub.py:245:        Index("ix_hub_usage_company_period", "company_id", "period", unique=True),
apps\api\app\models\hub.py:246:        Index("ix_hub_usage_period", "period"),
apps\api\app\models\hub.py:250:        return f"<HubUsage(company_id={self.company_id}, period='{self.period}')>"
apps\api\app\models\hub.py:252:    def get_usage(self, operation: str) -> int:
apps\api\app\models\hub.py:253:        """Get usage count for an operation."""
apps\api\app\models\hub.py:262:    def increment_usage(self, operation: str, quantity: int = 1, is_overage: bool = False):
apps\api\app\models\hub.py:263:        """Increment usage for an operation."""
apps\api\app\models\hub.py:305:class HubUsageLog(Base):
apps\api\app\models\hub.py:309:    Every usage event is logged with:
apps\api\app\models\hub.py:315:    __tablename__ = "hub_usage_logs"
apps\api\app\models\hub.py:338:    company = relationship("Company", backref="hub_usage_logs")
apps\api\app\models\hub.py:339:    user = relationship("User", backref="hub_usage_logs")
apps\api\app\models\hub.py:343:        Index("ix_hub_usage_logs_company", "company_id"),
apps\api\app\models\hub.py:344:        Index("ix_hub_usage_logs_user", "user_id"),
apps\api\app\models\hub.py:345:        Index("ix_hub_usage_logs_operation", "operation"),
apps\api\app\models\hub.py:346:        Index("ix_hub_usage_logs_tool", "tool"),
apps\api\app\models\hub.py:347:        Index("ix_hub_usage_logs_created", "created_at"),
apps\api\app\models\hub.py:348:        Index("ix_hub_usage_logs_company_created", "company_id", "created_at"),
apps\api\app\models\hub.py:352:        return f"<HubUsageLog(operation='{self.operation}', tool='{self.tool}', is_overage={self.is_overage})>"
apps\api\app\models\hub.py:366:    ) -> "HubUsageLog":
apps\api\app\models\hub.py:367:        """Factory method to create a usage log entry."""
apps\api\app\models\integrations.py:133:    # Usage Tracking
apps\api\app\models\integrations.py:134:    usage_count = Column(Integer, nullable=False, default=0)
apps\api\app\models\integrations.py:188:        return self.usage_count < self.monthly_quota
apps\api\app\models\integrations.py:190:    def increment_usage(self) -> None:
apps\api\app\models\integrations.py:191:        """Increment usage counter and update last used timestamp."""
apps\api\app\models\integrations.py:192:        self.usage_count += 1
apps\api\app\models\integrations.py:284:    Immutable billing events for partner API usage.
apps\api\app\models\lc_builder.py:229:    # Usage
apps\api\app\models\lc_builder.py:231:    usage_count = Column(Integer, default=0)
apps\api\app\models\lc_builder.py:265:    usage_count = Column(Integer, default=0)
apps\api\app\models\notifications.py:83:    # Usage tracking
apps\api\app\models\notifications.py:139:    # Usage tracking
apps\api\app\models\notifications.py:140:    usage_count = Column(Integer, default=0)
apps\api\app\models\notifications.py:194:    # Usage tracking
apps\api\app\models\rbac.py:32:    MEMBER = "member"    # Can use assigned tools, view own usage
apps\api\app\models\rbac.py:217:            "view_usage": True,
apps\api\app\models\rbac.py:218:            "view_org_usage": True,
apps\api\app\models\rbac.py:229:            "view_usage": True,
apps\api\app\models\rbac.py:230:            "view_org_usage": True,
apps\api\app\models\rbac.py:241:            "view_usage": True,  # Own usage only
apps\api\app\models\rbac.py:242:            "view_org_usage": False,
apps\api\app\models\rbac.py:253:            "view_usage": True,  # View reports only
apps\api\app\models\rbac.py:254:            "view_org_usage": False,
apps\api\app\models\sme_templates.py:56:    # Usage tracking
apps\api\app\models\sme_templates.py:57:    usage_count = Column(Integer, default=0, nullable=False)
apps\api\app\models\usage_record.py:12:class UsageAction(str, enum.Enum):
apps\api\app\models\usage_record.py:21:class UsageRecord(Base):
apps\api\app\models\usage_record.py:23:    Usage tracking model for billing calculations.
apps\api\app\models\usage_record.py:26:    __tablename__ = "usage_records"
apps\api\app\models\usage_record.py:32:    # Usage details
apps\api\app\models\usage_record.py:45:    billed = Column(String(50), nullable=False, default=False)  # Whether this usage was included in an invoice
apps\api\app\models\usage_record.py:53:    company = relationship("Company", back_populates="usage_records")
apps\api\app\models\usage_record.py:54:    session = relationship("ValidationSession", back_populates="usage_records")
apps\api\app\models\usage_record.py:60:        Index("ix_usage_company_timestamp", "company_id", "timestamp"),
apps\api\app\models\usage_record.py:61:        Index("ix_usage_company_action", "company_id", "action"),
apps\api\app\models\usage_record.py:62:        Index("ix_usage_billing_cycle", "company_id", "billed", "timestamp"),
apps\api\app\models\usage_record.py:66:        return f"<UsageRecord(id={self.id}, action={self.action}, cost={self.cost}, company_id={self.company_id})>"
apps\api\app\models\usage_record.py:75:        """Check if this usage record has been billed"""
apps\api\app\models\usage_record.py:81:        return self.action == UsageAction.VALIDATE.value
apps\api\app\models\usage_record.py:96:        """Mark this usage record as billed"""
apps\api\app\models\usage_record.py:101:    def create_usage_record(
apps\api\app\models\usage_record.py:110:    ) -> 'UsageRecord':
apps\api\app\models\usage_record.py:111:        """Factory method to create a usage record"""
apps\api\app\models\usage_record.py:112:        return UsageRecord(
apps\api\app\models\workflows.py:77:    # Usage tracking
apps\api\app\models\workflows.py:97:        Index('ix_bank_workflows_usage', 'last_used_at'),
apps\api\app\models\workflows.py:132:    # Usage tracking
apps\api\app\models\workflows.py:178:    # Usage tracking
apps\api\app\models\__init__.py:33:# Get UsageAction from legacy module (it's imported there from .models.usage_record)
apps\api\app\models\__init__.py:34:UsageAction = _legacy.UsageAction  # type: ignore[attr-defined]
apps\api\app\models\__init__.py:56:UsageRecord = _legacy.UsageRecord  # type: ignore[attr-defined]
apps\api\app\models\__init__.py:66:HubUsage = _legacy.HubUsage  # type: ignore[attr-defined]
apps\api\app\models\__init__.py:67:HubUsageLog = _legacy.HubUsageLog  # type: ignore[attr-defined]
apps\api\app\models\__init__.py:137:    "UsageRecord",
apps\api\app\models\__init__.py:138:    "UsageAction",
apps\api\app\models\__init__.py:147:    "HubUsage",
apps\api\app\models\__init__.py:148:    "HubUsageLog",
apps\api\app\models.py:24:from .models.usage_record import UsageRecord, UsageAction
apps\api\app\models.py:67:    HubPlan, HubSubscription, HubUsage, HubUsageLog,
apps\api\app\models.py:281:    usage_records = relationship("UsageRecord", back_populates="session")
apps\api\app\monitoring\alerting.py:92:            'quota_warning_threshold': 0.9,  # 90% quota usage
apps\api\app\monitoring\alerting.py:243:    async def check_quota_usage(self) -> List[Alert]:
apps\api\app\monitoring\alerting.py:254:                usage_ratio = company_integration.usage_count / company_integration.monthly_quota
apps\api\app\monitoring\alerting.py:256:                if usage_ratio >= 1.0:
apps\api\app\monitoring\alerting.py:265:                            'usage_count': company_integration.usage_count,
apps\api\app\monitoring\alerting.py:267:                            'usage_ratio': usage_ratio
apps\api\app\monitoring\alerting.py:274:                elif usage_ratio >= self.alert_thresholds['quota_warning_threshold']:
apps\api\app\monitoring\alerting.py:279:                        description=f"Company {company_integration.company.name} is at {usage_ratio:.1%} of quota for {company_integration.integration.name}",
apps\api\app\monitoring\alerting.py:283:                            'usage_count': company_integration.usage_count,
apps\api\app\monitoring\alerting.py:285:                            'usage_ratio': usage_ratio
apps\api\app\monitoring\alerting.py:293:            logger.error(f"Failed to check quota usage: {str(e)}")
apps\api\app\monitoring\alerting.py:358:                self.check_quota_usage(),
apps\api\app\monitoring\integration_metrics.py:3:Tracks API usage, performance, billing events, and system health.
apps\api\app\monitoring\integration_metrics.py:86:company_usage = Gauge(
apps\api\app\monitoring\integration_metrics.py:87:    'lcopilot_company_usage',
apps\api\app\monitoring\integration_metrics.py:88:    'Company usage statistics',
apps\api\app\monitoring\integration_metrics.py:278:    def update_company_usage_metrics(self) -> None:
apps\api\app\monitoring\integration_metrics.py:279:        """Update company usage metrics from database."""
apps\api\app\monitoring\integration_metrics.py:284:            # Get usage by company and integration type
apps\api\app\monitoring\integration_metrics.py:291:                # Usage count
apps\api\app\monitoring\integration_metrics.py:292:                company_usage.labels(
apps\api\app\monitoring\integration_metrics.py:295:                    metric_type='usage_count'
apps\api\app\monitoring\integration_metrics.py:296:                ).set(company_integration.usage_count)
apps\api\app\monitoring\integration_metrics.py:300:                    remaining = company_integration.monthly_quota - company_integration.usage_count
apps\api\app\monitoring\integration_metrics.py:301:                    company_usage.labels(
apps\api\app\monitoring\integration_metrics.py:308:            logger.error(f"Failed to update company usage metrics: {str(e)}")
apps\api\app\monitoring\integration_metrics.py:322:        self.update_company_usage_metrics()
apps\api\app\providers\payments\stripe.py:122:                setup_future_usage='off_session' if customer_id else None,
apps\api\app\reference_data\countries.py:4:Usage:
apps\api\app\reference_data\currencies.py:4:Usage:
apps\api\app\reference_data\ports.py:7:Usage:
apps\api\app\reports\generator.py:418:                    'generator': 'trdrhub-api'
apps\api\app\routers\admin\dr.py:136:            s3_location=f"s3://{os.getenv('DR_OBJECT_BACKUP_BUCKET', 'trdrhub-dr-objects')}/{backup_info['backup_id']}"
apps\api\app\routers\admin\ops.py:530:                    "memory_usage": "2.1GB"
apps\api\app\routers\auth.py:245:            logger.error(f"Authentication failed in /auth/me: {auth_error.detail}")
apps\api\app\routers\auth.py:258:                        logger.warning("Using /auth/me fallback profile from token claims")
apps\api\app\routers\auth.py:309:        logger.error(f"Error in /auth/me: {str(e)}\n{error_trace}")
apps\api\app\routers\bank.py:2015:                entitlements.enforce_quota(current_user.company, UsageAction.VALIDATE)
apps\api\app\routers\bank_ai.py:18:from ..services.ai_usage_tracker import AIUsageTracker, AIFeature
apps\api\app\routers\bank_ai.py:57:class AIUsageQuotaResponse(BaseModel):
apps\api\app\routers\bank_ai.py:69:    usage_remaining: Optional[int] = None
apps\api\app\routers\bank_ai.py:73:@router.get("/quota", response_model=AIUsageQuotaResponse)
apps\api\app\routers\bank_ai.py:79:    """Get remaining AI usage quota for a specific feature."""
apps\api\app\routers\bank_ai.py:81:        usage_tracker = AIUsageTracker(db)
apps\api\app\routers\bank_ai.py:94:        # Get quota info (mock for now, will be implemented in AIUsageTracker)
apps\api\app\routers\bank_ai.py:95:        quota_info = usage_tracker.get_quota_info(current_user, ai_feature, is_bank)
apps\api\app\routers\bank_ai.py:97:        return AIUsageQuotaResponse(
apps\api\app\routers\bank_ai.py:122:        usage_tracker = AIUsageTracker(db)
apps\api\app\routers\bank_ai.py:132:        allowed, error_msg, remaining_dict = usage_tracker.check_quota(
apps\api\app\routers\bank_ai.py:145:                    "detail": error_msg or "AI usage quota exceeded",
apps\api\app\routers\bank_ai.py:205:            usage_remaining=remaining,
apps\api\app\routers\bank_ai.py:228:        usage_tracker = AIUsageTracker(db)
apps\api\app\routers\bank_ai.py:232:        allowed, error_msg, remaining_dict = usage_tracker.check_quota(
apps\api\app\routers\bank_ai.py:245:                    "detail": error_msg or "AI usage quota exceeded",
apps\api\app\routers\bank_ai.py:315:            usage_remaining=remaining,
apps\api\app\routers\bank_ai.py:338:        usage_tracker = AIUsageTracker(db)
apps\api\app\routers\bank_ai.py:342:        allowed, error_msg, remaining_dict = usage_tracker.check_quota(
apps\api\app\routers\bank_ai.py:355:                    "detail": error_msg or "AI usage quota exceeded",
apps\api\app\routers\bank_ai.py:409:            usage_remaining=remaining,
apps\api\app\routers\bank_ai.py:432:        usage_tracker = AIUsageTracker(db)
apps\api\app\routers\bank_ai.py:436:        allowed, error_msg, remaining_dict = usage_tracker.check_quota(
apps\api\app\routers\bank_ai.py:449:                    "detail": error_msg or "AI usage quota exceeded",
apps\api\app\routers\bank_ai.py:507:            usage_remaining=remaining,
apps\api\app\routers\bank_bulk_jobs.py:103:    usage_count: int
apps\api\app\routers\bank_bulk_jobs.py:231:        template.usage_count += 1
apps\api\app\routers\bank_bulk_jobs.py:362:    templates = query.order_by(desc(BulkTemplate.usage_count)).all()
apps\api\app\routers\bank_policy.py:360:class PolicyUsageStats(BaseModel):
apps\api\app\routers\bank_policy.py:361:    """Policy usage statistics."""
apps\api\app\routers\bank_policy.py:388:    policy_usage_rate: float
apps\api\app\routers\bank_policy.py:400:    overlay_stats: List[PolicyUsageStats]
apps\api\app\routers\bank_policy.py:416:    Returns usage statistics, effectiveness metrics, and impact analysis.
apps\api\app\routers\bank_policy.py:438:    # Overlay usage statistics
apps\api\app\routers\bank_policy.py:458:        overlay_stats.append(PolicyUsageStats(
apps\api\app\routers\bank_policy.py:520:    policy_usage_rate = (validations_with_policy / max(total_validations, 1)) * 100 if total_validations > 0 else 0
apps\api\app\routers\bank_policy.py:567:        policy_usage_rate=round(policy_usage_rate, 2),
apps\api\app\routers\bank_policy.py:574:    # Top exceptions by usage
apps\api\app\routers\billing.py:6:- Usage tracking and reporting
apps\api\app\routers\billing.py:55:def _serialize_usage_record(stats: Dict[str, Any]) -> Dict[str, Any]:
apps\api\app\routers\billing.py:126:@router.get("/usage", response_model=schemas.UsageStats)
apps\api\app\routers\billing.py:127:async def get_usage_stats(
apps\api\app\routers\billing.py:131:    """Get company usage statistics."""
apps\api\app\routers\billing.py:133:        return billing_service.get_usage_stats(current_user.company_id)
apps\api\app\routers\billing.py:137:            detail=f"Failed to get usage stats: {str(e)}"
apps\api\app\routers\billing.py:141:@router.get("/usage/records", response_model=schemas.UsageRecordList)
apps\api\app\routers\billing.py:142:async def get_usage_records(
apps\api\app\routers\billing.py:151:    """Get paginated usage records for company."""
apps\api\app\routers\billing.py:153:        return billing_service.get_usage_records(
apps\api\app\routers\billing.py:164:            detail=f"Failed to get usage records: {str(e)}"
apps\api\app\routers\billing.py:235:                detail="No usage found for the specified period"
apps\api\app\routers\billing.py:489:                stats = billing_service.get_usage_stats(current_user.company_id)
apps\api\app\routers\billing.py:497:        stats = billing_service.get_usage_stats(current_user.company_id)
apps\api\app\routers\billing.py:621:@router.get("/admin/usage-report", response_model=schemas.AdminUsageReport)
apps\api\app\routers\billing.py:622:async def get_admin_usage_report(
apps\api\app\routers\billing.py:628:    """Get usage report for admin users."""
apps\api\app\routers\billing.py:636:        return billing_service.get_admin_usage_report(start_date, end_date)
apps\api\app\routers\billing.py:642:            detail=f"Failed to get usage report: {str(e)}"
apps\api\app\routers\billing.py:661:    total_usage = 0
apps\api\app\routers\billing.py:666:            stats = billing_service.get_usage_stats(tenant_uuid)
apps\api\app\routers\billing.py:669:        per_tenant.append(_serialize_usage_record(stats))
apps\api\app\routers\billing.py:670:        total_usage += stats.get("total_usage", 0) or 0
apps\api\app\routers\billing.py:679:        "total_usage": total_usage,
apps\api\app\routers\billing.py:691:    """Return per-tenant billing usage for the current bank."""
apps\api\app\routers\billing.py:697:            stats = billing_service.get_usage_stats(tenant_uuid)
apps\api\app\routers\billing.py:700:        tenants.append(_serialize_usage_record(stats))
apps\api\app\routers\doc_generator.py:28:from app.utils.usage_tracker import track_usage
apps\api\app\routers\doc_generator.py:223:@track_usage(operation="doc_generate", tool="doc_generator", description="Create document set")
apps\api\app\routers\doc_generator.py:479:@track_usage(operation="doc_generate", tool="doc_generator", description="Generate shipping documents")
apps\api\app\routers\lc_builder.py:1423:    ).order_by(ApplicantProfile.is_favorite.desc(), ApplicantProfile.usage_count.desc()).all()
apps\api\app\routers\lc_builder.py:1440:                "usage_count": p.usage_count,
apps\api\app\routers\lc_builder.py:1529:    ).order_by(BeneficiaryProfile.is_favorite.desc(), BeneficiaryProfile.usage_count.desc()).all()
apps\api\app\routers\lc_builder.py:1548:                "usage_count": p.usage_count,
apps\api\app\routers\lc_builder.py:2250:                "usage_count": t.usage_count,
apps\api\app\routers\lc_builder.py:2449:    ).order_by(LCTemplate.usage_count.desc()).all()
apps\api\app\routers\lc_builder.py:2459:                "usage_count": t.usage_count,
apps\api\app\routers\onboarding.py:111:    logger.info(f"ðŸ” GET /onboarding/status called for user {current_user.id} ({current_user.email})")
apps\api\app\routers\price_verify.py:36:from app.utils.usage_tracker import record_usage_manual
apps\api\app\routers\price_verify.py:510:        # Track usage for billing
apps\api\app\routers\price_verify.py:513:                await record_usage_manual(
apps\api\app\routers\price_verify.py:528:            except Exception as usage_err:
apps\api\app\routers\price_verify.py:529:                logger.warning(f"Failed to track usage: {usage_err}")
apps\api\app\routers\price_verify.py:591:        # Track usage for billing (each item counts as 1 price check)
apps\api\app\routers\price_verify.py:594:                await record_usage_manual(
apps\api\app\routers\price_verify.py:610:            except Exception as usage_err:
apps\api\app\routers\price_verify.py:611:                logger.warning(f"Failed to track usage: {usage_err}")
apps\api\app\routers\sanctions.py:806:@router.get("/api-keys/usage")
apps\api\app\routers\sanctions.py:807:async def get_api_usage(
apps\api\app\routers\sanctions.py:812:    Get API usage statistics.
apps\api\app\routers\sme_templates.py:329:    """Mark a template as used (increment usage count)."""
apps\api\app\routers\sme_templates.py:344:    template.usage_count += 1
apps\api\app\routers\tracking.py:35:from app.utils.usage_tracker import track_usage
apps\api\app\routers\tracking.py:597:@track_usage(operation="container_track", tool="tracking", description="Container tracking lookup")
apps\api\app\routers\tracking.py:609:@track_usage(operation="container_track", tool="tracking", description="Vessel tracking lookup")
apps\api\app\routers\tracking.py:622:@track_usage(operation="container_track", tool="tracking", description="Tracking search")
apps\api\app\routers\tracking.py:657:@track_usage(operation="sanctions_screen", tool="tracking", description="Vessel sanctions screening")
apps\api\app\routers\tracking.py:690:@track_usage(operation="sanctions_screen", tool="tracking", description="Vessel sanctions screening")
apps\api\app\routers\usage.py:2:Hub Usage API Router
apps\api\app\routers\usage.py:4:Endpoints for managing and viewing usage across all TRDR Hub tools.
apps\api\app\routers\usage.py:7:- GET /usage/current - Current month's usage
apps\api\app\routers\usage.py:8:- GET /usage/limits - Remaining limits for all operations
apps\api\app\routers\usage.py:9:- GET /usage/history - Historical usage data
apps\api\app\routers\usage.py:10:- GET /usage/logs - Detailed usage log entries
apps\api\app\routers\usage.py:11:- POST /usage/check - Check if operation is allowed (internal)
apps\api\app\routers\usage.py:25:from app.services.usage_service import get_usage_service
apps\api\app\routers\usage.py:29:router = APIRouter(prefix="/usage", tags=["Usage"])
apps\api\app\routers\usage.py:36:class UsageCheckRequest(BaseModel):
apps\api\app\routers\usage.py:42:class UsageCheckResponse(BaseModel):
apps\api\app\routers\usage.py:43:    """Response for usage check."""
apps\api\app\routers\usage.py:53:class RecordUsageRequest(BaseModel):
apps\api\app\routers\usage.py:54:    """Request to record usage (internal use)."""
apps\api\app\routers\usage.py:79:async def get_current_usage(
apps\api\app\routers\usage.py:84:    Get current month's usage summary.
apps\api\app\routers\usage.py:86:    Returns usage counts for all operations and any overage charges.
apps\api\app\routers\usage.py:93:        service = get_usage_service(db)
apps\api\app\routers\usage.py:94:        usage = await service.get_current_usage(company_id)
apps\api\app\routers\usage.py:96:        if "error" in usage:
apps\api\app\routers\usage.py:97:            raise HTTPException(status_code=500, detail=usage["error"])
apps\api\app\routers\usage.py:99:        return usage
apps\api\app\routers\usage.py:104:        logger.error(f"Failed to get current usage: {e}")
apps\api\app\routers\usage.py:116:    Shows plan limits, current usage, and remaining quota for each tool.
apps\api\app\routers\usage.py:123:        service = get_usage_service(db)
apps\api\app\routers\usage.py:139:async def get_usage_history(
apps\api\app\routers\usage.py:145:    Get usage history for past N months.
apps\api\app\routers\usage.py:147:    Returns monthly usage summaries and overage charges.
apps\api\app\routers\usage.py:154:        service = get_usage_service(db)
apps\api\app\routers\usage.py:155:        history = await service.get_usage_history(company_id, months)
apps\api\app\routers\usage.py:159:        logger.error(f"Failed to get usage history: {e}")
apps\api\app\routers\usage.py:164:async def get_usage_logs(
apps\api\app\routers\usage.py:173:    Get detailed usage log entries.
apps\api\app\routers\usage.py:182:        service = get_usage_service(db)
apps\api\app\routers\usage.py:183:        logs = await service.get_usage_logs(
apps\api\app\routers\usage.py:193:        logger.error(f"Failed to get usage logs: {e}")
apps\api\app\routers\usage.py:198:async def check_usage_limit(
apps\api\app\routers\usage.py:199:    request: UsageCheckRequest,
apps\api\app\routers\usage.py:204:    Check if an operation is allowed based on current usage and limits.
apps\api\app\routers\usage.py:216:        service = get_usage_service(db)
apps\api\app\routers\usage.py:223:        return UsageCheckResponse(
apps\api\app\routers\usage.py:234:        logger.error(f"Failed to check usage limit: {e}")
apps\api\app\routers\usage.py:239:async def record_usage(
apps\api\app\routers\usage.py:240:    request: RecordUsageRequest,
apps\api\app\routers\usage.py:245:    Record a usage event (internal endpoint).
apps\api\app\routers\usage.py:255:        service = get_usage_service(db)
apps\api\app\routers\usage.py:256:        success, message, overage_cost = await service.record_usage(
apps\api\app\routers\usage.py:278:        logger.error(f"Failed to record usage: {e}")
apps\api\app\routers\validate.py:22:from app.models import UsageAction, User, ValidationSession, SessionStatus, UserRole, Document
apps\api\app\routers\validate.py:95:from app.utils.usage_tracker import record_usage_manual
apps\api\app\routers\validate.py:1219:                    entitlements.enforce_quota(_quota_company, UsageAction.VALIDATE)
apps\api\app\routers\validate.py:1435:        # Record usage - link to session if created (skip for demo user)
apps\api\app\routers\validate.py:1456:                quota = entitlements.record_usage(
apps\api\app\routers\validate.py:1458:                    UsageAction.VALIDATE,
apps\api\app\routers\validate.py:1464:            except Exception as usage_record_err:
apps\api\app\routers\validate.py:1465:                logger.warning("record_usage failed (non-blocking): %s", usage_record_err)
apps\api\app\routers\validate.py:2039:        # Track usage for billing
apps\api\app\routers\validate.py:2043:                await record_usage_manual(
apps\api\app\routers\validate.py:2058:            except Exception as usage_err:
apps\api\app\routers\validate.py:2059:                logger.warning(f"Failed to track usage: {usage_err}")
apps\api\app\routers\validate_v1_backup.py:21:from app.models import UsageAction, User, ValidationSession, SessionStatus, UserRole
apps\api\app\routers\validate_v1_backup.py:334:                entitlements.enforce_quota(current_user.company, UsageAction.VALIDATE)
apps\api\app\routers\validate_v1_backup.py:463:        # Record usage - link to session if created (skip for demo user)
apps\api\app\routers\validate_v1_backup.py:478:            quota = entitlements.record_usage(
apps\api\app\routers\validate_v1_backup.py:480:                UsageAction.VALIDATE,
apps\api\app\routes\ai.py:153:    Usage Limits:
apps\api\app\routes\ai.py:235:@router.get("/usage")
apps\api\app\routes\ai.py:236:async def get_ai_usage(
apps\api\app\routes\ai.py:242:    Get AI usage statistics for current user or session.
apps\api\app\routes\ai.py:244:    Returns per-LC and tenant monthly usage stats.
apps\api\app\routes\ai.py:259:        stats = llm_service.usage_tracker.get_usage_stats(
apps\api\app\routes\ai.py:268:        logger.error(f"Failed to get AI usage: {str(e)}")
apps\api\app\routes\ai.py:271:            detail="Failed to retrieve usage statistics"
apps\api\app\routes\ai.py:288:        from ..services.ai_usage_tracker import AIFeature
apps\api\app\routes\ai.py:303:            allowed, error_msg, remaining = llm_service.usage_tracker.check_quota(
apps\api\app\routes\debug.py:319:        "usage_instructions": {
apps\api\app\routes\health.py:398:        "service": "trdrhub-api",
apps\api\app\rules\external\rule_executor.py:77:    Usage:
apps\api\app\rules\external\rule_loader.py:38:    Usage:
apps\api\app\schemas\admin.py:490:    usage_count: int
apps\api\app\schemas\analytics.py:123:    # Usage patterns
apps\api\app\schemas\analytics.py:124:    usage_by_role: Dict[str, int] = Field(..., description="Job count by user role")
apps\api\app\schemas\analytics.py:125:    peak_hours: List[Dict[str, Any]] = Field(..., description="Peak usage hours")
apps\api\app\schemas\analytics.py:126:    peak_days: List[Dict[str, Any]] = Field(..., description="Peak usage days")
apps\api\app\schemas\analytics.py:274:    # Resource usage
apps\api\app\schemas\analytics.py:275:    memory_usage_mb: Optional[float] = None
apps\api\app\schemas\analytics.py:276:    cpu_usage_percent: Optional[float] = None
apps\api\app\schemas\api_tokens_webhooks.py:34:    usage_count: int
apps\api\app\schemas\billing.py:5:including invoices, usage records, payments, and company billing settings.
apps\api\app\schemas\billing.py:50:class UsageStats(BaseModel):
apps\api\app\schemas\billing.py:51:    """Company usage statistics."""
apps\api\app\schemas\billing.py:56:    total_usage: int = 0
apps\api\app\schemas\billing.py:63:# Usage record schemas
apps\api\app\schemas\billing.py:64:class UsageRecordBase(BaseModel):
apps\api\app\schemas\billing.py:65:    """Base usage record schema."""
apps\api\app\schemas\billing.py:72:class UsageRecordCreate(UsageRecordBase):
apps\api\app\schemas\billing.py:73:    """Create usage record request."""
apps\api\app\schemas\billing.py:77:class UsageRecord(UsageRecordBase, TimestampMixin):
apps\api\app\schemas\billing.py:78:    """Usage record response."""
apps\api\app\schemas\billing.py:87:class UsageRecordList(BaseModel):
apps\api\app\schemas\billing.py:88:    """Paginated list of usage records."""
apps\api\app\schemas\billing.py:89:    records: List[UsageRecord]
apps\api\app\schemas\billing.py:292:    total_usage: int
apps\api\app\schemas\billing.py:300:class AdminUsageReport(BaseModel):
apps\api\app\schemas\billing.py:301:    """Admin usage report."""
apps\api\app\schemas\billing.py:305:    total_usage: int
apps\api\app\schemas\integrations.py:103:    usage_count: int
apps\api\app\schemas\sme_templates.py:44:    usage_count: int
apps\api\app\services\ai_crossdoc_engine.py:151:    """Retain only fields required for AI reasoning to reduce token usage."""
apps\api\app\services\ai_usage_tracker.py:2:AI Usage Tracking and Quota Enforcement Service.
apps\api\app\services\ai_usage_tracker.py:4:Tracks per-LC, per-user, and per-tenant AI usage with rate limiting and quota enforcement.
apps\api\app\services\ai_usage_tracker.py:44:class AIUsageRecord(Base):
apps\api\app\services\ai_usage_tracker.py:45:    """Tracks AI usage for quota enforcement."""
apps\api\app\services\ai_usage_tracker.py:46:    __tablename__ = "ai_usage_records"
apps\api\app\services\ai_usage_tracker.py:100:class AIUsageTracker:
apps\api\app\services\ai_usage_tracker.py:101:    """Tracks and enforces AI usage quotas."""
apps\api\app\services\ai_usage_tracker.py:199:            user_day_count = self.db.query(func.count(AIUsageRecord.id)).filter(
apps\api\app\services\ai_usage_tracker.py:201:                    AIUsageRecord.user_id == user.id,
apps\api\app\services\ai_usage_tracker.py:202:                    AIUsageRecord.created_at >= today_start,
apps\api\app\services\ai_usage_tracker.py:203:                    AIUsageRecord.feature == feature.value
apps\api\app\services\ai_usage_tracker.py:258:        # Get current usage
apps\api\app\services\ai_usage_tracker.py:262:        user_day_count = self.db.query(func.count(AIUsageRecord.id)).filter(
apps\api\app\services\ai_usage_tracker.py:264:                AIUsageRecord.user_id == user.id,
apps\api\app\services\ai_usage_tracker.py:265:                AIUsageRecord.created_at >= today_start,
apps\api\app\services\ai_usage_tracker.py:266:                AIUsageRecord.feature == feature.value
apps\api\app\services\ai_usage_tracker.py:274:            tenant_used = self.db.query(func.count(AIUsageRecord.id)).filter(
apps\api\app\services\ai_usage_tracker.py:276:                    AIUsageRecord.tenant_id == user.company_id,
apps\api\app\services\ai_usage_tracker.py:277:                    AIUsageRecord.created_at >= month_start,
apps\api\app\services\ai_usage_tracker.py:278:                    AIUsageRecord.feature == feature.value
apps\api\app\services\ai_usage_tracker.py:308:        used = self.db.query(func.count(AIUsageRecord.id)).filter(
apps\api\app\services\ai_usage_tracker.py:310:                AIUsageRecord.tenant_id == tenant_id,
apps\api\app\services\ai_usage_tracker.py:311:                AIUsageRecord.feature == feature.value,
apps\api\app\services\ai_usage_tracker.py:312:                AIUsageRecord.created_at >= month_start
apps\api\app\services\ai_usage_tracker.py:319:    def record_usage(
apps\api\app\services\ai_usage_tracker.py:328:        """Record AI usage for quota tracking."""
apps\api\app\services\ai_usage_tracker.py:334:        # Resolve tenant/company for usage record
apps\api\app\services\ai_usage_tracker.py:340:                "AI usage logging skipped: tenant_id missing (user_id=%s session_id=%s feature=%s)",
apps\api\app\services\ai_usage_tracker.py:347:        # Create usage record
apps\api\app\services\ai_usage_tracker.py:348:        record = AIUsageRecord(
apps\api\app\services\ai_usage_tracker.py:364:                "Failed to record AI usage (tenant_id=%s user_id=%s session_id=%s feature=%s): %s",
apps\api\app\services\ai_usage_tracker.py:372:    def get_usage_stats(
apps\api\app\services\ai_usage_tracker.py:378:        """Get current usage statistics."""
apps\api\app\services\analytics_service.py:578:        # Usage by role
apps\api\app\services\analytics_service.py:579:        usage_by_role_query = self.db.query(
apps\api\app\services\analytics_service.py:586:        usage_by_role = {role: count for role, count in usage_by_role_query}
apps\api\app\services\analytics_service.py:655:            usage_by_role=usage_by_role,
apps\api\app\services\bank_format_registry.py:293:    Usage:
apps\api\app\services\billing_service.py:5:- Usage tracking and cost calculation
apps\api\app\services\billing_service.py:9:- Usage analytics
apps\api\app\services\billing_service.py:21:    Company, User, ValidationSession, UsageRecord, Invoice,
apps\api\app\services\billing_service.py:34:    """Raised when a company exceeds its usage quota."""
apps\api\app\services\billing_service.py:35:    def __init__(self, message: str, current_usage: int, quota_limit: int):
apps\api\app\services\billing_service.py:37:        self.current_usage = current_usage
apps\api\app\services\billing_service.py:47:    """Core billing service for usage tracking, quota enforcement, and invoicing."""
apps\api\app\services\billing_service.py:52:    def record_usage(
apps\api\app\services\billing_service.py:61:    ) -> UsageRecord:
apps\api\app\services\billing_service.py:63:        Record a billable usage event and calculate cost.
apps\api\app\services\billing_service.py:75:            Created UsageRecord
apps\api\app\services\billing_service.py:89:                recheck_count = self.db.query(UsageRecord).filter(
apps\api\app\services\billing_service.py:91:                        UsageRecord.session_id == session_id,
apps\api\app\services\billing_service.py:92:                        UsageRecord.action == BillingAction.RECHECK
apps\api\app\services\billing_service.py:106:            # Create usage record
apps\api\app\services\billing_service.py:107:            usage_record = UsageRecord(
apps\api\app\services\billing_service.py:118:            self.db.add(usage_record)
apps\api\app\services\billing_service.py:120:            self.db.refresh(usage_record)
apps\api\app\services\billing_service.py:126:                resource_type="usage_record",
apps\api\app\services\billing_service.py:127:                resource_id=str(usage_record.id),
apps\api\app\services\billing_service.py:136:            return usage_record
apps\api\app\services\billing_service.py:140:            raise BillingServiceError(f"Failed to record usage: {str(e)}")
apps\api\app\services\billing_service.py:142:    def get_usage(
apps\api\app\services\billing_service.py:151:        Get usage statistics for a company within a date range.
apps\api\app\services\billing_service.py:161:            Dict with usage statistics and breakdown
apps\api\app\services\billing_service.py:174:            UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:175:            func.date(UsageRecord.timestamp) >= start_date,
apps\api\app\services\billing_service.py:176:            func.date(UsageRecord.timestamp) <= end_date
apps\api\app\services\billing_service.py:180:            filters.append(UsageRecord.action == action)
apps\api\app\services\billing_service.py:182:            filters.append(UsageRecord.billed == billed)
apps\api\app\services\billing_service.py:184:        # Get usage records
apps\api\app\services\billing_service.py:185:        usage_records = self.db.query(UsageRecord).filter(and_(*filters)).all()
apps\api\app\services\billing_service.py:188:        total_cost = sum(record.cost for record in usage_records)
apps\api\app\services\billing_service.py:189:        total_units = sum(record.units for record in usage_records)
apps\api\app\services\billing_service.py:193:        for record in usage_records:
apps\api\app\services\billing_service.py:220:                "records_count": len(usage_records),
apps\api\app\services\billing_service.py:244:                for record in usage_records
apps\api\app\services\billing_service.py:284:        # Count current usage in this billing cycle
apps\api\app\services\billing_service.py:285:        current_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:287:                UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:288:                UsageRecord.action == action,
apps\api\app\services\billing_service.py:289:                func.date(UsageRecord.timestamp) >= period_start,
apps\api\app\services\billing_service.py:290:                func.date(UsageRecord.timestamp) <= period_end
apps\api\app\services\billing_service.py:299:        if current_usage >= action_quota:
apps\api\app\services\billing_service.py:301:                f"Company {company.name} has exceeded {action} quota ({current_usage}/{action_quota})",
apps\api\app\services\billing_service.py:302:                current_usage=current_usage,
apps\api\app\services\billing_service.py:310:        Get current quota usage status for a company.
apps\api\app\services\billing_service.py:325:                "message": "Unlimited usage"
apps\api\app\services\billing_service.py:342:            current_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:344:                    UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:345:                    UsageRecord.action == action,
apps\api\app\services\billing_service.py:346:                    func.date(UsageRecord.timestamp) >= period_start,
apps\api\app\services\billing_service.py:347:                    func.date(UsageRecord.timestamp) <= period_end
apps\api\app\services\billing_service.py:352:                "used": current_usage,
apps\api\app\services\billing_service.py:354:                "remaining": max(0, quota_limit - current_usage),
apps\api\app\services\billing_service.py:355:                "percentage_used": (current_usage / quota_limit * 100) if quota_limit > 0 else 0,
apps\api\app\services\billing_service.py:356:                "is_exceeded": current_usage >= quota_limit
apps\api\app\services\billing_service.py:378:        Generate an invoice for a company's usage in a billing period.
apps\api\app\services\billing_service.py:397:            # Get unbilled usage records for this period
apps\api\app\services\billing_service.py:398:            unbilled_records = self.db.query(UsageRecord).filter(
apps\api\app\services\billing_service.py:400:                    UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:401:                    UsageRecord.billed == False,
apps\api\app\services\billing_service.py:402:                    func.date(UsageRecord.timestamp) >= period_start,
apps\api\app\services\billing_service.py:403:                    func.date(UsageRecord.timestamp) <= period_end
apps\api\app\services\billing_service.py:408:                raise BillingServiceError("No unbilled usage found for period")
apps\api\app\services\billing_service.py:411:            usage_amount = sum(record.cost for record in unbilled_records)
apps\api\app\services\billing_service.py:417:            total_amount = usage_amount + subscription_amount
apps\api\app\services\billing_service.py:443:            # Group usage by action type for line items
apps\api\app\services\billing_service.py:444:            usage_by_action = {}
apps\api\app\services\billing_service.py:446:                if record.action not in usage_by_action:
apps\api\app\services\billing_service.py:447:                    usage_by_action[record.action] = {
apps\api\app\services\billing_service.py:451:                usage_by_action[record.action]["units"] += record.units
apps\api\app\services\billing_service.py:452:                usage_by_action[record.action]["cost"] += record.cost
apps\api\app\services\billing_service.py:454:            for action, data in usage_by_action.items():
apps\api\app\services\billing_service.py:467:            # Mark usage records as billed
apps\api\app\services\billing_service.py:485:                    "usage_records_count": len(unbilled_records)
apps\api\app\services\billing_service.py:652:        usage_query = self.db.query(UsageRecord)
apps\api\app\services\billing_service.py:656:            usage_query = usage_query.filter(UsageRecord.company_id == company_id)
apps\api\app\services\billing_service.py:660:        usage_query = usage_query.filter(
apps\api\app\services\billing_service.py:661:            func.date(UsageRecord.timestamp).between(start_date, end_date)
apps\api\app\services\billing_service.py:667:        # Calculate usage metrics
apps\api\app\services\billing_service.py:668:        usage_records = usage_query.all()
apps\api\app\services\billing_service.py:669:        total_usage_cost = sum(record.cost for record in usage_records)
apps\api\app\services\billing_service.py:670:        total_usage_units = sum(record.units for record in usage_records)
apps\api\app\services\billing_service.py:678:        # Usage by action
apps\api\app\services\billing_service.py:679:        usage_by_action = {}
apps\api\app\services\billing_service.py:680:        for record in usage_records:
apps\api\app\services\billing_service.py:681:            if record.action not in usage_by_action:
apps\api\app\services\billing_service.py:682:                usage_by_action[record.action] = {"units": 0, "cost": Decimal("0.00")}
apps\api\app\services\billing_service.py:683:            usage_by_action[record.action]["units"] += record.units
apps\api\app\services\billing_service.py:684:            usage_by_action[record.action]["cost"] += record.cost
apps\api\app\services\billing_service.py:692:            "usage_metrics": {
apps\api\app\services\billing_service.py:693:                "total_records": len(usage_records),
apps\api\app\services\billing_service.py:694:                "total_units": total_usage_units,
apps\api\app\services\billing_service.py:695:                "total_cost": float(total_usage_cost),
apps\api\app\services\billing_service.py:701:                    for action, data in usage_by_action.items()
apps\api\app\services\billing_service.py:742:        total_usage = sum(q["used"] for q in quota_status.get("quotas", {}).values())
apps\api\app\services\billing_service.py:749:            "quota_used": total_usage,
apps\api\app\services\billing_service.py:750:            "quota_remaining": company.quota_limit - total_usage if company.quota_limit else None,
apps\api\app\services\billing_service.py:770:    def get_usage_stats(self, company_id: uuid.UUID) -> Dict[str, Any]:
apps\api\app\services\billing_service.py:771:        """Get usage statistics for company."""
apps\api\app\services\billing_service.py:780:        # Get current usage
apps\api\app\services\billing_service.py:781:        today_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:783:                UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:784:                func.date(UsageRecord.timestamp) == today
apps\api\app\services\billing_service.py:788:        week_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:790:                UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:791:                func.date(UsageRecord.timestamp) >= week_start
apps\api\app\services\billing_service.py:795:        month_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:797:                UsageRecord.company_id == company_id,
apps\api\app\services\billing_service.py:798:                func.date(UsageRecord.timestamp) >= month_start
apps\api\app\services\billing_service.py:802:        total_usage = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:803:            UsageRecord.company_id == company_id
apps\api\app\services\billing_service.py:806:        total_cost = self.db.query(func.sum(UsageRecord.cost)).filter(
apps\api\app\services\billing_service.py:807:            UsageRecord.company_id == company_id
apps\api\app\services\billing_service.py:812:            "current_month": month_usage,
apps\api\app\services\billing_service.py:813:            "current_week": week_usage,
apps\api\app\services\billing_service.py:814:            "today": today_usage,
apps\api\app\services\billing_service.py:815:            "total_usage": total_usage,
apps\api\app\services\billing_service.py:818:            "quota_used": month_usage,  # Using monthly usage for quota
apps\api\app\services\billing_service.py:819:            "quota_remaining": company.quota_limit - month_usage if company.quota_limit else None
apps\api\app\services\billing_service.py:822:    def get_usage_records(
apps\api\app\services\billing_service.py:831:        """Get paginated usage records."""
apps\api\app\services\billing_service.py:832:        query = self.db.query(UsageRecord).filter(UsageRecord.company_id == company_id)
apps\api\app\services\billing_service.py:835:            query = query.filter(func.date(UsageRecord.timestamp) >= start_date)
apps\api\app\services\billing_service.py:837:            query = query.filter(func.date(UsageRecord.timestamp) <= end_date)
apps\api\app\services\billing_service.py:839:            query = query.filter(UsageRecord.action == action)
apps\api\app\services\billing_service.py:842:        records = query.order_by(desc(UsageRecord.timestamp)).offset((page - 1) * per_page).limit(per_page).all()
apps\api\app\services\billing_service.py:914:            usage_stats = self.get_usage_stats(company.id)
apps\api\app\services\billing_service.py:917:            last_record = self.db.query(UsageRecord).filter(
apps\api\app\services\billing_service.py:918:                UsageRecord.company_id == company.id
apps\api\app\services\billing_service.py:919:            ).order_by(desc(UsageRecord.timestamp)).first()
apps\api\app\services\billing_service.py:925:                "total_usage": usage_stats["total_usage"],
apps\api\app\services\billing_service.py:926:                "total_cost": usage_stats["total_cost"],
apps\api\app\services\billing_service.py:928:                "quota_used": usage_stats["quota_used"],
apps\api\app\services\billing_service.py:935:    def get_admin_usage_report(self, start_date: date, end_date: date) -> Dict[str, Any]:
apps\api\app\services\billing_service.py:936:        """Get usage report for admin users."""
apps\api\app\services\billing_service.py:937:        # Get all companies with usage in period
apps\api\app\services\billing_service.py:938:        companies_query = self.db.query(Company).join(UsageRecord).filter(
apps\api\app\services\billing_service.py:939:            func.date(UsageRecord.timestamp).between(start_date, end_date)
apps\api\app\services\billing_service.py:943:        total_usage = 0
apps\api\app\services\billing_service.py:948:            usage_count = self.db.query(func.count(UsageRecord.id)).filter(
apps\api\app\services\billing_service.py:950:                    UsageRecord.company_id == company.id,
apps\api\app\services\billing_service.py:951:                    func.date(UsageRecord.timestamp).between(start_date, end_date)
apps\api\app\services\billing_service.py:955:            usage_cost = self.db.query(func.sum(UsageRecord.cost)).filter(
apps\api\app\services\billing_service.py:957:                    UsageRecord.company_id == company.id,
apps\api\app\services\billing_service.py:958:                    func.date(UsageRecord.timestamp).between(start_date, end_date)
apps\api\app\services\billing_service.py:962:            total_usage += usage_count
apps\api\app\services\billing_service.py:963:            total_revenue += usage_cost
apps\api\app\services\billing_service.py:965:            last_record = self.db.query(UsageRecord).filter(
apps\api\app\services\billing_service.py:967:                    UsageRecord.company_id == company.id,
apps\api\app\services\billing_service.py:968:                    func.date(UsageRecord.timestamp).between(start_date, end_date)
apps\api\app\services\billing_service.py:970:            ).order_by(desc(UsageRecord.timestamp)).first()
apps\api\app\services\billing_service.py:976:                "total_usage": usage_count,
apps\api\app\services\billing_service.py:977:                "total_cost": usage_cost,
apps\api\app\services\billing_service.py:979:                "quota_used": usage_count,
apps\api\app\services\billing_service.py:988:            "total_usage": total_usage,
apps\api\app\services\commodity_resolution.py:104:    Usage:
apps\api\app\services\entitlements.py:12:from app.models import Company, UsageRecord, UsageAction
apps\api\app\services\entitlements.py:17:    """Snapshot of a company's usage for a specific action."""
apps\api\app\services\entitlements.py:34:    """Raised when a company exceeds its entitled usage."""
apps\api\app\services\entitlements.py:44:    """Utility for checking and recording company usage quotas."""
apps\api\app\services\entitlements.py:62:    def _get_usage(self, company: Company, action: UsageAction) -> EntitlementResult:
apps\api\app\services\entitlements.py:65:            self.db.query(func.coalesce(func.sum(UsageRecord.units), 0))
apps\api\app\services\entitlements.py:67:                UsageRecord.company_id == company.id,
apps\api\app\services\entitlements.py:68:                UsageRecord.action == action.value,
apps\api\app\services\entitlements.py:69:                UsageRecord.timestamp >= period_start,
apps\api\app\services\entitlements.py:82:    def enforce_quota(self, company: Company, action: UsageAction) -> EntitlementResult:
apps\api\app\services\entitlements.py:88:                result=self._get_usage(company, action),
apps\api\app\services\entitlements.py:92:        result = self._get_usage(company, action)
apps\api\app\services\entitlements.py:100:    def record_usage(
apps\api\app\services\entitlements.py:103:        action: UsageAction,
apps\api\app\services\entitlements.py:111:        """Record usage and return updated quota snapshot."""
apps\api\app\services\entitlements.py:113:        record = UsageRecord(
apps\api\app\services\entitlements.py:120:            description=description or "Usage recorded by entitlement service",
apps\api\app\services\entitlements.py:124:        return self._get_usage(company, action)
apps\api\app\services\extraction\ebl_parser.py:29:Usage:
apps\api\app\services\extraction\ensemble_extractor.py:165:    Usage:
apps\api\app\services\extraction\iso20022_parser.py:12:Usage:
apps\api\app\services\extraction\lc_extractor_v2.py:10:Usage:
apps\api\app\services\extraction\smart_bl_extractor.py:8:Usage:
apps\api\app\services\extraction\smart_lc_extractor.py:9:Usage:
apps\api\app\services\llm_assist.py:25:from .ai_usage_tracker import AIUsageTracker, AIFeature
apps\api\app\services\llm_assist.py:154:        self.usage_tracker = AIUsageTracker(db)
apps\api\app\services\llm_assist.py:185:        allowed, error_msg, remaining = self.usage_tracker.check_quota(
apps\api\app\services\llm_assist.py:243:                # Record usage
apps\api\app\services\llm_assist.py:244:                self.usage_tracker.record_usage(
apps\api\app\services\llm_assist.py:339:        allowed, error_msg, remaining = self.usage_tracker.check_quota(
apps\api\app\services\llm_assist.py:386:                # Record usage
apps\api\app\services\llm_assist.py:387:                self.usage_tracker.record_usage(
apps\api\app\services\llm_assist.py:462:        allowed, error_msg, remaining = self.usage_tracker.check_quota(
apps\api\app\services\llm_assist.py:508:                # Record usage
apps\api\app\services\llm_assist.py:509:                self.usage_tracker.record_usage(
apps\api\app\services\llm_assist.py:584:        allowed, error_msg, remaining = self.usage_tracker.check_quota(
apps\api\app\services\llm_assist.py:632:                # Record usage
apps\api\app\services\llm_assist.py:633:                self.usage_tracker.record_usage(
apps\api\app\services\llm_assist.py:954:    async def get_ai_usage_stats(
apps\api\app\services\llm_assist.py:959:        """Get AI usage statistics for billing/analytics."""
apps\api\app\services\llm_assist.py:964:        # Query usage stats
apps\api\app\services\llm_provider.py:99:            tokens_in = response.usage.prompt_tokens
apps\api\app\services\llm_provider.py:100:            tokens_out = response.usage.completion_tokens
apps\api\app\services\llm_provider.py:164:            # Estimate tokens (Anthropic doesn't always return usage)
apps\api\app\services\llm_provider.py:239:            # Get token counts from usage metadata if available
apps\api\app\services\llm_provider.py:242:            if hasattr(response, 'usage_metadata') and response.usage_metadata:
apps\api\app\services\llm_provider.py:243:                tokens_in = getattr(response.usage_metadata, 'prompt_token_count', 0) or 0
apps\api\app\services\llm_provider.py:244:                tokens_out = getattr(response.usage_metadata, 'candidates_token_count', 0) or 0
apps\api\app\services\llm_provider.py:246:            # Fallback to estimation if usage not available
apps\api\app\services\token_service.py:106:    def record_token_usage(self, token: APIToken, ip_address: Optional[str] = None) -> None:
apps\api\app\services\token_service.py:107:        """Record token usage (update last_used_at and usage_count)"""
apps\api\app\services\token_service.py:110:        token.usage_count += 1
apps\api\app\services\usage_service.py:2:Hub Usage Tracking Service
apps\api\app\services\usage_service.py:6:- Recording usage events (LC validations, price checks, etc.)
apps\api\app\services\usage_service.py:9:- Providing usage statistics
apps\api\app\services\usage_service.py:11:Usage:
apps\api\app\services\usage_service.py:12:    from app.services.usage_service import UsageService
apps\api\app\services\usage_service.py:15:    can_proceed, message = await usage_service.check_limit(company_id, "lc_validation")
apps\api\app\services\usage_service.py:17:    # Record usage after operation completes
apps\api\app\services\usage_service.py:18:    await usage_service.record_usage(company_id, user_id, "lc_validation", quantity=1)
apps\api\app\services\usage_service.py:31:    HubPlan, HubSubscription, HubUsage, HubUsageLog,
apps\api\app\services\usage_service.py:39:class UsageService:
apps\api\app\services\usage_service.py:40:    """Service for tracking and managing usage across all tools."""
apps\api\app\services\usage_service.py:46:    # USAGE RECORDING
apps\api\app\services\usage_service.py:49:    async def record_usage(
apps\api\app\services\usage_service.py:60:        Record a usage event and update monthly counters.
apps\api\app\services\usage_service.py:83:            # Get or create monthly usage record
apps\api\app\services\usage_service.py:84:            usage = await self._get_or_create_monthly_usage(company_id, subscription)
apps\api\app\services\usage_service.py:88:                usage, plan, operation, quantity
apps\api\app\services\usage_service.py:91:            # Update usage counters
apps\api\app\services\usage_service.py:95:                current = getattr(usage, field_name, 0) or 0
apps\api\app\services\usage_service.py:96:                setattr(usage, field_name, current + quantity)
apps\api\app\services\usage_service.py:101:                    if hasattr(usage, overage_field):
apps\api\app\services\usage_service.py:102:                        current_overage = getattr(usage, overage_field, 0) or 0
apps\api\app\services\usage_service.py:103:                        setattr(usage, overage_field, current_overage + quantity)
apps\api\app\services\usage_service.py:104:                    usage.overage_charges = (usage.overage_charges or Decimal("0")) + overage_cost
apps\api\app\services\usage_service.py:107:            log_entry = HubUsageLog(
apps\api\app\services\usage_service.py:126:            logger.info(f"Usage recorded: company={company_id}, op={operation}, qty={quantity}, overage={is_overage}")
apps\api\app\services\usage_service.py:131:            logger.error(f"Failed to record usage: {e}")
apps\api\app\services\usage_service.py:151:            Tuple of (can_proceed, message, usage_info)
apps\api\app\services\usage_service.py:166:            usage = await self._get_or_create_monthly_usage(company_id, subscription)
apps\api\app\services\usage_service.py:168:            # Get limit and current usage
apps\api\app\services\usage_service.py:170:            current = self._get_current_usage(usage, operation)
apps\api\app\services\usage_service.py:229:            usage = await self._get_or_create_monthly_usage(company_id, subscription)
apps\api\app\services\usage_service.py:235:                "period_start": usage.period_start.isoformat() if usage.period_start else None,
apps\api\app\services\usage_service.py:236:                "period_end": usage.period_end.isoformat() if usage.period_end else None,
apps\api\app\services\usage_service.py:243:                used = getattr(usage, field, 0) or 0
apps\api\app\services\usage_service.py:265:    # USAGE STATISTICS
apps\api\app\services\usage_service.py:268:    async def get_current_usage(self, company_id: UUID) -> Dict[str, Any]:
apps\api\app\services\usage_service.py:269:        """Get current month's usage summary."""
apps\api\app\services\usage_service.py:272:            usage = await self._get_or_create_monthly_usage(
apps\api\app\services\usage_service.py:278:                    "start": usage.period_start.isoformat() if usage.period_start else None,
apps\api\app\services\usage_service.py:279:                    "end": usage.period_end.isoformat() if usage.period_end else None,
apps\api\app\services\usage_service.py:281:                "usage": {
apps\api\app\services\usage_service.py:282:                    "lc_validations": usage.lc_validations_used or 0,
apps\api\app\services\usage_service.py:283:                    "price_checks": usage.price_checks_used or 0,
apps\api\app\services\usage_service.py:284:                    "hs_lookups": usage.hs_lookups_used or 0,
apps\api\app\services\usage_service.py:285:                    "sanctions_screens": usage.sanctions_screens_used or 0,
apps\api\app\services\usage_service.py:286:                    "container_tracks": usage.container_tracks_used or 0,
apps\api\app\services\usage_service.py:289:                    "lc_validations": usage.lc_validations_overage or 0,
apps\api\app\services\usage_service.py:290:                    "price_checks": usage.price_checks_overage or 0,
apps\api\app\services\usage_service.py:291:                    "hs_lookups": usage.hs_lookups_overage or 0,
apps\api\app\services\usage_service.py:292:                    "sanctions_screens": usage.sanctions_screens_overage or 0,
apps\api\app\services\usage_service.py:293:                    "container_tracks": usage.container_tracks_overage or 0,
apps\api\app\services\usage_service.py:294:                    "total_charges": float(usage.overage_charges or 0)
apps\api\app\services\usage_service.py:299:            logger.error(f"Failed to get current usage: {e}")
apps\api\app\services\usage_service.py:302:    async def get_usage_history(
apps\api\app\services\usage_service.py:307:        """Get usage history for past N months."""
apps\api\app\services\usage_service.py:309:            query = select(HubUsage).where(
apps\api\app\services\usage_service.py:310:                HubUsage.company_id == company_id
apps\api\app\services\usage_service.py:311:            ).order_by(HubUsage.period_start.desc()).limit(months)
apps\api\app\services\usage_service.py:320:                    "usage": {
apps\api\app\services\usage_service.py:333:            logger.error(f"Failed to get usage history: {e}")
apps\api\app\services\usage_service.py:336:    async def get_usage_logs(
apps\api\app\services\usage_service.py:344:        """Get detailed usage log entries."""
apps\api\app\services\usage_service.py:346:            query = select(HubUsageLog).where(
apps\api\app\services\usage_service.py:347:                HubUsageLog.company_id == company_id
apps\api\app\services\usage_service.py:351:                query = query.where(HubUsageLog.tool == tool)
apps\api\app\services\usage_service.py:353:                query = query.where(HubUsageLog.operation == operation)
apps\api\app\services\usage_service.py:355:            query = query.order_by(HubUsageLog.created_at.desc()).offset(offset).limit(limit)
apps\api\app\services\usage_service.py:375:            logger.error(f"Failed to get usage logs: {e}")
apps\api\app\services\usage_service.py:399:    async def _get_or_create_monthly_usage(
apps\api\app\services\usage_service.py:403:    ) -> HubUsage:
apps\api\app\services\usage_service.py:404:        """Get or create usage record for current month."""
apps\api\app\services\usage_service.py:416:        query = select(HubUsage).where(
apps\api\app\services\usage_service.py:418:                HubUsage.company_id == company_id,
apps\api\app\services\usage_service.py:419:                HubUsage.period_start == period_start
apps\api\app\services\usage_service.py:423:        usage = result.scalar_one_or_none()
apps\api\app\services\usage_service.py:425:        if not usage:
apps\api\app\services\usage_service.py:426:            usage = HubUsage(
apps\api\app\services\usage_service.py:432:            self.db.add(usage)
apps\api\app\services\usage_service.py:435:        return usage
apps\api\app\services\usage_service.py:439:        usage: HubUsage,
apps\api\app\services\usage_service.py:446:        current = self._get_current_usage(usage, operation)
apps\api\app\services\usage_service.py:481:    def _get_current_usage(self, usage: HubUsage, operation: str) -> int:
apps\api\app\services\usage_service.py:482:        """Get current usage count for an operation."""
apps\api\app\services\usage_service.py:492:            return getattr(usage, field, 0) or 0
apps\api\app\services\usage_service.py:524:def get_usage_service(db: Session) -> UsageService:
apps\api\app\services\usage_service.py:525:    """Factory function to get UsageService instance."""
apps\api\app\services\usage_service.py:526:    return UsageService(db)
apps\api\app\services\validation\amendment_generator.py:6:Usage:
apps\api\app\services\validation\audit_logger.py:609:# Global instance for simple usage
apps\api\app\services\validation\bank_profiles.py:15:Usage:
apps\api\app\services\validation\response_contract_validator.py:359:# Convenience function for single-call usage
apps\api\app\services\workflow_service.py:401:            # Update usage tracking
apps\api\app\services\workflow_service.py:523:            # Update workflow usage
apps\api\app\utils\logger.py:47:        self.service_name = "trdrhub-api"
apps\api\app\utils\usage_tracker.py:2:Usage Tracking Decorator
apps\api\app\utils\usage_tracker.py:4:Decorator and utilities for automatic usage tracking on billable endpoints.
apps\api\app\utils\usage_tracker.py:6:Usage:
apps\api\app\utils\usage_tracker.py:7:    from app.utils.usage_tracker import track_usage
apps\api\app\utils\usage_tracker.py:10:    @track_usage(operation="lc_validation", tool="lcopilot")
apps\api\app\utils\usage_tracker.py:26:def track_usage(
apps\api\app\utils\usage_tracker.py:35:    Decorator to automatically track usage for billable endpoints.
apps\api\app\utils\usage_tracker.py:46:        @track_usage(operation="lc_validation", tool="lcopilot")
apps\api\app\utils\usage_tracker.py:50:        @track_usage(
apps\api\app\utils\usage_tracker.py:68:                logger.debug(f"Skipping usage tracking: no company_id for user")
apps\api\app\utils\usage_tracker.py:72:                logger.warning(f"Skipping usage tracking: no db session")
apps\api\app\utils\usage_tracker.py:76:            from app.services.usage_service import get_usage_service
apps\api\app\utils\usage_tracker.py:78:            service = get_usage_service(db)
apps\api\app\utils\usage_tracker.py:108:                            detail=f"Usage limit exceeded: {message}"
apps\api\app\utils\usage_tracker.py:119:                # Don't record usage if operation failed
apps\api\app\utils\usage_tracker.py:122:            # Record usage after successful execution
apps\api\app\utils\usage_tracker.py:130:                success, msg, overage = await service.record_usage(
apps\api\app\utils\usage_tracker.py:141:                    logger.warning(f"Failed to record usage: {msg}")
apps\api\app\utils\usage_tracker.py:144:                # Don't fail the request if usage recording fails
apps\api\app\utils\usage_tracker.py:145:                logger.error(f"Error recording usage: {e}")
apps\api\app\utils\usage_tracker.py:153:async def record_usage_manual(
apps\api\app\utils\usage_tracker.py:164:    Manually record usage when decorator approach isn't suitable.
apps\api\app\utils\usage_tracker.py:175:        from app.services.usage_service import get_usage_service
apps\api\app\utils\usage_tracker.py:177:        service = get_usage_service(db)
apps\api\app\utils\usage_tracker.py:178:        success, message, _ = await service.record_usage(
apps\api\app\utils\usage_tracker.py:190:        logger.error(f"Failed to record manual usage: {e}")
apps\api\app\utils\usage_tracker.py:194:async def check_usage_limit(
apps\api\app\utils\usage_tracker.py:206:        Tuple of (allowed, message, usage_info)
apps\api\app\utils\usage_tracker.py:209:        from app.services.usage_service import get_usage_service
apps\api\app\utils\usage_tracker.py:211:        service = get_usage_service(db)
apps\api\app\utils\usage_tracker.py:215:        logger.error(f"Failed to check usage limit: {e}")
apps\api\async_tasks\api_integration.py:297:    """Get rate limits and usage for a user"""
apps\api\async_tasks\lambda_worker.py:306:                # Log Textract usage
apps\api\async_tasks\rate_limiter.py:233:        Get current usage and limits for a user
apps\api\async_tasks\rate_limiter.py:240:            Dict with current usage and limits
apps\api\async_tasks\rate_limiter.py:245:            # Get current usage
apps\api\async_tasks\rate_limiter.py:257:                'usage': {
apps\api\audit_exporter_db.py:166:        "usage_records": "Usage tracking",
apps\api\audit_integration_guide.md:246:## ðŸŽ¯ Usage Examples
apps\api\auth_smoke.py:6:Tests the core auth flow: login â†’ /auth/me â†’ /onboarding/status â†’ /usage/*
apps\api\auth_smoke.py:8:Usage:
apps\api\auth_smoke.py:9:    python auth_smoke.py [BASE_URL] [EMAIL] [PASSWORD]
apps\api\auth_smoke.py:12:    python auth_smoke.py http://localhost:8000 exporter@example.com TestPass123!
apps\api\auth_smoke.py:13:    python auth_smoke.py https://trdrhub-api.onrender.com test@trdr.io mypass
apps\api\auth_smoke.py:101:# 2. Unauthenticated /auth/me must be 401
apps\api\auth_smoke.py:104:    status, body, err = http("GET", "/auth/me")
apps\api\auth_smoke.py:108:    return check("GET /auth/me (no token) â†’ 401", status == 401, f"got {status}")
apps\api\auth_smoke.py:111:test("Unauthenticated /auth/me â†’ 401", test_unauth_me)
apps\api\auth_smoke.py:157:# 5. /auth/me authenticated
apps\api\auth_smoke.py:165:    status, body, err = http("GET", "/auth/me", token=token)
apps\api\auth_smoke.py:169:        check("/auth/me reachable", False, err)
apps\api\auth_smoke.py:172:    ok = check("GET /auth/me â†’ 200", status == 200, f"got {status}")
apps\api\auth_smoke.py:196:test("/auth/me (authenticated)", test_me)
apps\api\auth_smoke.py:207:    status, body, err = http("GET", "/onboarding/status", token=token)
apps\api\auth_smoke.py:209:        check("/onboarding/status reachable", False, err)
apps\api\auth_smoke.py:212:    ok = check("GET /onboarding/status â†’ 200", status == 200, f"got {status}")
apps\api\auth_smoke.py:223:        print(f"    {WARN}  company_id is null â€” /usage/* endpoints will return 400. "
apps\api\auth_smoke.py:231:        # Note: /auth/me role and /onboarding role may differ (infer_effective_role vs raw)
apps\api\auth_smoke.py:234:            print(f"    {WARN}  role differs: /auth/me={user_data['role']} "
apps\api\auth_smoke.py:235:                  f"vs /onboarding/status={body['role']} â€” check infer_effective_role()")
apps\api\auth_smoke.py:244:# 7. Usage endpoints
apps\api\auth_smoke.py:246:def test_usage() -> bool:
apps\api\auth_smoke.py:253:        ("/usage/limits", None),
apps\api\auth_smoke.py:254:        ("/usage/subscription", "has_subscription"),
apps\api\auth_smoke.py:255:        ("/usage/logs?limit=5", "logs"),
apps\api\auth_smoke.py:256:        ("/usage/current", None),
apps\api\auth_smoke.py:280:test("Usage endpoints", test_usage)
apps\api\canaries\golden_path_canary.py:17:Usage:
apps\api\cdk\enterprise_monitoring_stack.py:12:Usage:
apps\api\cdk\lcopilot_monitoring_stack.py:11:Usage:
apps\api\chaos\chaos_controller.py:19:Usage:
apps\api\check_all_imports.py:129:    # Read file content to check usage
apps\api\check_all_imports.py:133:    # Check for logging usage
apps\api\check_all_imports.py:138:    # Check for datetime usage
apps\api\check_all_imports.py:143:    # Check for uuid usage
apps\api\check_missing_imports.py:45:        # Also check for standalone usage: Optional, List (without brackets)
apps\api\cloudwatch_alert_test.py:15:Usage:
apps\api\comprehensive_check.py:145:        # Check for logging usage without import
apps\api\comprehensive_check.py:154:        # Check for UUID usage without import
apps\api\docs\BANK_PROFILES_GUIDE.md:177:#### Basic Usage
apps\api\docs\BILLING_GUIDE.md:5:LCopilot's billing system provides comprehensive usage tracking, quota enforcement, and payment processing for Letter of Credit validation services. The system supports multiple payment gateways, flexible pricing models, and detailed analytics.
apps\api\docs\BILLING_GUIDE.md:43:- **Quota Middleware**: Automatic usage enforcement
apps\api\docs\BILLING_GUIDE.md:78:### Usage Record Model
apps\api\docs\BILLING_GUIDE.md:80:class UsageRecord(Base):
apps\api\docs\BILLING_GUIDE.md:131:Get company billing information including plan, quota usage, and payment details.
apps\api\docs\BILLING_GUIDE.md:159:### Usage Tracking
apps\api\docs\BILLING_GUIDE.md:161:#### GET `/billing/usage`
apps\api\docs\BILLING_GUIDE.md:162:Get usage statistics for the current company.
apps\api\docs\BILLING_GUIDE.md:171:  "total_usage": 150,
apps\api\docs\BILLING_GUIDE.md:179:#### GET `/billing/usage/records`
apps\api\docs\BILLING_GUIDE.md:180:Get paginated usage records with optional filtering.
apps\api\docs\BILLING_GUIDE.md:325:The quota enforcement middleware automatically checks usage limits before processing validation requests.
apps\api\docs\BILLING_GUIDE.md:334:2. Check current quota usage
apps\api\docs\BILLING_GUIDE.md:336:4. Record usage after successful operation
apps\api\docs\BILLING_GUIDE.md:426:List all companies with usage statistics.
apps\api\docs\BILLING_GUIDE.md:428:#### GET `/billing/admin/usage-report`
apps\api\docs\BILLING_GUIDE.md:429:Generate usage reports for specified periods.
apps\api\docs\BILLING_GUIDE.md:435:- Top customers by usage
apps\api\docs\BILLING_GUIDE.md:474:- âœ… Usage tracking and statistics
apps\api\docs\BILLING_GUIDE.md:574:- Ensure usage records exist for period
apps\api\docs\COMPLIANCE_GUIDE.md:79:- **Impact**: Critical - prevents LC usage
apps\api\docs\COMPLIANCE_GUIDE.md:226:### Python SDK Usage
apps\api\docs\pilot_targets.md:141:- **Adoption**: Daily active usage by key staff
apps\api\docs\RULE_AUTHORING_WORKFLOW.md:173:# Example usage
apps\api\docs\RULE_AUTHORING_WORKFLOW.md:185:# Example usage
apps\api\docs\RULE_AUTHORING_WORKFLOW.md:209:# Example usage
apps\api\docs\RULE_AUTHORING_WORKFLOW.md:241:## ðŸ“š Usage Examples
apps\api\ENTERPRISE_MONITORING_PLAYBOOK.md:461:#### Usage Examples
apps\api\ENTERPRISE_MONITORING_PLAYBOOK.md:866:aws ce get-cost-and-usage --time-period Start=2024-01-01,End=2024-02-01 --granularity MONTHLY --metrics BlendedCost --group-by Type=DIMENSION,Key=SERVICE
apps\api\lambda\escalation_router.py:22:Usage:
apps\api\main.py:58:from app.routers import auth, sessions, fake_s3, documents, lc_versions, audit, admin, analytics, billing, bank, bank_workflow, bank_users, bank_policy, bank_queue, bank_auth, bank_compliance, bank_sla, bank_evidence, bank_bulk_jobs, bank_ai, bank_duplicates, bank_saved_views, bank_tokens, bank_webhooks, bank_orgs, validate, rules_admin, onboarding, sme, sme_templates, workspace_sharing, company_profile, support, importer, exporter, jobs_public, price_verify, price_verify_admin, usage, members, admin_banks, tracking, doc_generator, doc_generator_catalog, doc_generator_advanced, lc_builder, hs_code, sanctions
apps\api\main.py:263:app.include_router(usage.router)  # Hub usage tracking (limits, billing, history)
apps\api\main.py:608:            "memory_usage_mb": round(memory_info.rss / 1024 / 1024, 2),
apps\api\make_evidence_pack.py:6:Usage:
apps\api\middleware\performance_monitoring.py:4:This middleware tracks cold starts, execution times, memory usage,
apps\api\middleware\performance_monitoring.py:49:            # Get initial memory usage
apps\api\middleware\performance_monitoring.py:50:            initial_memory = self._get_memory_usage()
apps\api\middleware\performance_monitoring.py:58:                final_memory = self._get_memory_usage()
apps\api\middleware\performance_monitoring.py:85:                final_memory = self._get_memory_usage()
apps\api\middleware\performance_monitoring.py:112:    def _get_memory_usage(self) -> float:
apps\api\middleware\performance_monitoring.py:113:        """Get current memory usage in MB."""
apps\api\migrations\versions\20250126_add_api_tokens_webhooks.py:38:        sa.Column('usage_count', sa.Integer(), nullable=False, server_default='0'),
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:1:"""Add tables for AI usage tracking and assist events.
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:3:Revision ID: 20251116_add_ai_usage_and_events
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:13:revision = "20251116_add_ai_usage_and_events"
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:21:        "ai_usage_records",
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:37:    op.create_index("ix_ai_usage_records_tenant_id", "ai_usage_records", ["tenant_id"])
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:38:    op.create_index("ix_ai_usage_records_user_id", "ai_usage_records", ["user_id"])
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:40:        "ix_ai_usage_records_validation_session_id",
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:41:        "ai_usage_records",
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:78:    op.drop_index("ix_ai_usage_records_validation_session_id", table_name="ai_usage_records")
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:79:    op.drop_index("ix_ai_usage_records_user_id", table_name="ai_usage_records")
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:80:    op.drop_index("ix_ai_usage_records_tenant_id", table_name="ai_usage_records")
apps\api\migrations\versions\20251116_add_ai_usage_and_events.py:81:    op.drop_table("ai_usage_records")
apps\api\migrations\versions\20251118_extend_ai_cost_precision.py:4:Revises: 20251116_add_ai_usage_and_events
apps\api\migrations\versions\20251118_extend_ai_cost_precision.py:14:down_revision = "20251116_add_ai_usage_and_events"
apps\api\migrations\versions\20251118_extend_ai_cost_precision.py:21:        "ai_usage_records",
apps\api\migrations\versions\20251118_extend_ai_cost_precision.py:45:        "ai_usage_records",
apps\api\MULTI_ENV_ALARM_GUIDE.md:298:## Advanced Usage Examples
apps\api\ocr\textract_fallback.py:74:        self.usage_tracker = TextractUsageTracker()
apps\api\ocr\textract_fallback.py:154:            # Track usage
apps\api\ocr\textract_fallback.py:155:            self.usage_tracker.record_usage(result.pages, result.cost_estimate)
apps\api\ocr\textract_fallback.py:186:        daily_usage = self.usage_tracker.get_daily_usage()
apps\api\ocr\textract_fallback.py:188:        if daily_usage['pages'] >= self.config.max_pages_per_day:
apps\api\ocr\textract_fallback.py:190:                f"Daily page limit exceeded: {daily_usage['pages']}/{self.config.max_pages_per_day}"
apps\api\ocr\textract_fallback.py:193:        if daily_usage['cost'] >= 100.0:  # $100 daily limit
apps\api\ocr\textract_fallback.py:195:                f"Daily cost limit exceeded: ${daily_usage['cost']:.2f}"
apps\api\ocr\textract_fallback.py:440:    def get_usage_stats(self) -> Dict[str, Any]:
apps\api\ocr\textract_fallback.py:441:        """Get current usage statistics"""
apps\api\ocr\textract_fallback.py:443:            'daily_usage': self.usage_tracker.get_daily_usage(),
apps\api\ocr\textract_fallback.py:444:            'monthly_usage': self.usage_tracker.get_monthly_usage(),
apps\api\ocr\textract_fallback.py:451:class TextractUsageTracker:
apps\api\ocr\textract_fallback.py:452:    """Track Textract usage for cost management"""
apps\api\ocr\textract_fallback.py:455:        self.usage_file = Path(__file__).parent / "textract_usage.json"
apps\api\ocr\textract_fallback.py:457:    def record_usage(self, pages: int, cost: float) -> None:
apps\api\ocr\textract_fallback.py:458:        """Record usage for cost tracking"""
apps\api\ocr\textract_fallback.py:459:        usage_data = self._load_usage_data()
apps\api\ocr\textract_fallback.py:462:        if today not in usage_data:
apps\api\ocr\textract_fallback.py:463:            usage_data[today] = {'pages': 0, 'cost': 0.0}
apps\api\ocr\textract_fallback.py:465:        usage_data[today]['pages'] += pages
apps\api\ocr\textract_fallback.py:466:        usage_data[today]['cost'] += cost
apps\api\ocr\textract_fallback.py:470:        usage_data = {date: data for date, data in usage_data.items()
apps\api\ocr\textract_fallback.py:473:        self._save_usage_data(usage_data)
apps\api\ocr\textract_fallback.py:475:    def get_daily_usage(self) -> Dict[str, Any]:
apps\api\ocr\textract_fallback.py:476:        """Get today's usage"""
apps\api\ocr\textract_fallback.py:477:        usage_data = self._load_usage_data()
apps\api\ocr\textract_fallback.py:479:        return usage_data.get(today, {'pages': 0, 'cost': 0.0})
apps\api\ocr\textract_fallback.py:481:    def get_monthly_usage(self) -> Dict[str, Any]:
apps\api\ocr\textract_fallback.py:482:        """Get current month's usage"""
apps\api\ocr\textract_fallback.py:483:        usage_data = self._load_usage_data()
apps\api\ocr\textract_fallback.py:489:        for date, data in usage_data.items():
apps\api\ocr\textract_fallback.py:496:    def _load_usage_data(self) -> Dict[str, Any]:
apps\api\ocr\textract_fallback.py:497:        """Load usage data from file"""
apps\api\ocr\textract_fallback.py:498:        if not self.usage_file.exists():
apps\api\ocr\textract_fallback.py:502:            with open(self.usage_file, 'r') as f:
apps\api\ocr\textract_fallback.py:507:    def _save_usage_data(self, data: Dict[str, Any]) -> None:
apps\api\ocr\textract_fallback.py:508:        """Save usage data to file"""
apps\api\ocr\textract_fallback.py:510:            self.usage_file.parent.mkdir(exist_ok=True)
apps\api\ocr\textract_fallback.py:511:            with open(self.usage_file, 'w') as f:
apps\api\ocr\textract_fallback.py:514:            logging.getLogger(__name__).warning(f"Could not save usage data: {e}")
apps\api\ocr\textract_fallback.py:580:        stats = textract.get_usage_stats()
apps\api\ocr\textract_fallback.py:582:        print(f"ðŸ“Š Usage Stats:")
apps\api\ocr\textract_fallback.py:583:        print(f"  â€¢ Daily: {stats['daily_usage']['pages']} pages, ${stats['daily_usage']['cost']:.2f}")
apps\api\RBAC_INTEGRATION.md:87:GET  /auth/me          # Get current user profile
apps\api\RBAC_INTEGRATION.md:193:## Usage Examples
apps\api\reliability\apis\integration_api_manager.py:14:Usage:
apps\api\reliability\infrastructure\cdk\app.py:10:Usage:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:117:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:143:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:170:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:203:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:229:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:256:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:291:**Usage**:
apps\api\reliability\RELIABILITY_AS_A_SERVICE.md:934:- Review customer usage patterns
apps\api\reliability\sla_reporting\sla_dashboard_manager.py:13:Usage:
apps\api\reliability\status_page\status_page_generator.py:13:Usage:
apps\api\reliability\trust_portal\trust_portal_manager.py:13:Usage:
apps\api\scripts\audit_rules_integrity.py:6:Usage (from apps/api directory):
apps\api\scripts\bootstrap_test_db.py:5:Usage:
apps\api\scripts\check_browser_compatibility.py:140:    # Check API usage
apps\api\scripts\check_browser_compatibility.py:141:    print("\nChecking: Browser API Usage")
apps\api\scripts\cleanup_demo_data.py:4:Usage:
apps\api\scripts\create_test_user.py:4:Usage: python scripts/create_test_user.py
apps\api\scripts\fix_migration_and_create_ai_tables.py:3:Fix broken Alembic migration chain and create AI usage tables directly.
apps\api\scripts\fix_migration_and_create_ai_tables.py:7:2. Creates AI usage tables if they don't exist
apps\api\scripts\fix_migration_and_create_ai_tables.py:42:            AND table_name IN ('ai_usage_records', 'ai_assist_events')
apps\api\scripts\fix_migration_and_create_ai_tables.py:45:        return 'ai_usage_records' in existing, 'ai_assist_events' in existing
apps\api\scripts\fix_migration_and_create_ai_tables.py:48:    """Create AI usage tables directly."""
apps\api\scripts\fix_migration_and_create_ai_tables.py:50:    -- Create ai_usage_records table
apps\api\scripts\fix_migration_and_create_ai_tables.py:51:    CREATE TABLE IF NOT EXISTS ai_usage_records (
apps\api\scripts\fix_migration_and_create_ai_tables.py:63:    -- Create indexes for ai_usage_records
apps\api\scripts\fix_migration_and_create_ai_tables.py:64:    CREATE INDEX IF NOT EXISTS ix_ai_usage_records_tenant_id ON ai_usage_records(tenant_id);
apps\api\scripts\fix_migration_and_create_ai_tables.py:65:    CREATE INDEX IF NOT EXISTS ix_ai_usage_records_user_id ON ai_usage_records(user_id);
apps\api\scripts\fix_migration_and_create_ai_tables.py:66:    CREATE INDEX IF NOT EXISTS ix_ai_usage_records_validation_session_id ON ai_usage_records(validation_session_id);
apps\api\scripts\fix_migration_and_create_ai_tables.py:99:        print("âœ… AI usage tables created successfully")
apps\api\scripts\fix_migration_and_create_ai_tables.py:138:    print("ðŸ”§ Fixing migration chain and creating AI usage tables...")
apps\api\scripts\fix_migration_and_create_ai_tables.py:152:    usage_exists, events_exists = check_tables_exist(engine)
apps\api\scripts\fix_migration_and_create_ai_tables.py:154:    print(f"   - ai_usage_records: {'âœ… exists' if usage_exists else 'âŒ missing'}")
apps\api\scripts\fix_migration_and_create_ai_tables.py:158:    if usage_exists and events_exists:
apps\api\scripts\fix_migration_and_create_ai_tables.py:161:        stamp_alembic_version(engine, "20251116_add_ai_usage_and_events")
apps\api\scripts\fix_migration_and_create_ai_tables.py:166:    print("ðŸ”¨ Creating AI usage tables...")
apps\api\scripts\fix_migration_and_create_ai_tables.py:172:    stamp_alembic_version(engine, "20251116_add_ai_usage_and_events")
apps\api\scripts\fix_migration_and_create_ai_tables.py:175:    print("âœ… Done! AI usage tables created and migration version stamped.")
apps\api\scripts\import_hts_data.py:7:Usage:
apps\api\scripts\import_rules.py:5:Usage:
apps\api\scripts\README.md:9:### Usage
apps\api\scripts\README.md:106:curl -X GET "https://trdrhub-api.onrender.com/admin/users/{user_id}/verify-data" \
apps\api\scripts\README.md:179:2. The `/onboarding/status` endpoint should auto-restore data from company record
apps\api\scripts\README_RULESET_AUDIT.md:18:**Usage:**
apps\api\scripts\README_RULESET_AUDIT.md:31:**Usage:**
apps\api\scripts\recheck_rules.py:7:Usage:
apps\api\scripts\reset_admin_password.py:5:Usage:
apps\api\scripts\reset_admin_password.py:80:            print("Usage: python reset_admin_password.py <email> <password>")
apps\api\scripts\seed_admin_data.py:13:- LLM usage data
apps\api\scripts\seed_admin_data.py:15:Usage:
apps\api\scripts\setup_org_isolation_test.py:9:Usage:
apps\api\scripts\verify_org_isolation.py:6:Usage:
apps\api\scripts\verify_org_isolation.py:138:        print("Usage: python verify_org_isolation.py <org1_id> <org2_id> <user1_token> <user2_token>")
apps\api\scripts\verify_user_data.py:5:Usage:
apps\api\scripts\verify_user_data.py:184:        print("Usage: python verify_user_data.py <email>")
apps\api\security\security_monitor.py:16:Usage:
apps\api\SECURITY_FIXES.md:174:- Tests explicit credential usage
apps\api\SECURITY_FIXES.md:245:   - Track KMS key usage
apps\api\SECURITY_FIXES.md:255:   - Monitor Textract usage against limits
apps\api\setup_alarm.py:8:Usage:
apps\api\slo_reporting\sla_report_generator.py:22:Usage:
apps\api\sme_portal\app.py:387:    """API endpoint for customer usage summary"""
apps\api\sme_portal\resilient_app.py:209:            'usage_this_month': 0,
apps\api\sme_portal\templates\dashboard.html:21:            <div class="stat-number">{{ customer_summary.usage.checks_today }}</div>
apps\api\sme_portal\templates\dashboard.html:31:            <div class="stat-number">{{ customer_summary.usage.checks_this_month }}</div>
apps\api\sme_portal\templates\dashboard.html:41:            <div class="stat-number">{{ customer_summary.usage.total_lifetime }}</div>
apps\api\sme_portal\templates\dashboard.html:47:            <div class="stat-number">{{ customer_summary.usage.monthly_usage_percent }}%</div>
apps\api\sme_portal\templates\dashboard.html:48:            <div class="stat-label">Monthly Usage</div>
apps\api\sme_portal\templates\dashboard.html:130:// Auto-refresh usage stats every 30 seconds
apps\api\sme_portal\templates\dashboard.html:135:            // Update usage numbers
apps\api\sme_portal\templates\dashboard.html:140:            if (checksTodayEl) checksTodayEl.textContent = data.usage.checks_today;
apps\api\sme_portal\templates\dashboard.html:141:            if (checksMonthEl) checksMonthEl.textContent = data.usage.checks_this_month;
apps\api\sme_portal\templates\dashboard.html:142:            if (totalEl) totalEl.textContent = data.usage.total_lifetime;
apps\api\sme_portal\templates\validation_blocked.html:3:{% block title %}Usage Limit Reached - LCopilot{% endblock %}
apps\api\sme_portal\templates\validation_blocked.html:8:    <h1 style="color: #dc2626; margin-bottom: 1rem;">Usage Limit Reached</h1>
apps\api\sme_portal\templates\validation_blocked.html:10:        Your {{ tier.title() }} plan has reached its usage limit.
apps\api\sme_portal\tests\regression\conftest.py:226:        def create_key(self, Description, Usage='ENCRYPT_DECRYPT'):
apps\api\sme_portal\tests\regression\conftest.py:231:                'Usage': Usage,
apps\api\sme_portal\tests\regression\conftest.py:310:                'usage': {
apps\api\static\fonts\NotoSansBengali-Bold.ttf:25:  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
apps\api\static\fonts\NotoSansBengali-Bold.ttf:50:    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-f7128b22e253.css" />
apps\api\static\fonts\NotoSansBengali-Bold.ttf:55:  <script type="application/json" id="client-env">{"locale":"en","featureFlags":["alternate_user_config_repo","api_insights_show_missing_data_banner","attestations_filtering","attestations_sorting","client_version_header","code_frequency_cls","codespaces_prebuild_region_target_update","contact_requests_implicit_opt_in","contentful_lp_enterprise","contentful_lp_footnotes","copilot_agent_task_caching","copilot_api_agentic_issue_marshal_yaml","copilot_api_draft_issue_code_search","copilot_chat_attach_multiple_images","copilot_chat_file_redirect","copilot_chat_group_notifications","copilot_chat_reduce_quota_checks","copilot_chat_search_bar_redirect","copilot_chat_vision_in_claude","copilot_chat_vision_skip_thread_create","copilot_coding_agent_diff_stats","copilot_custom_copilots_feature_preview","copilot_custom_copilots_images","copilot_disable_generated_commit_description","copilot_duplicate_thread","copilot_features_raycast_logo","copilot_free_to_paid_telem","copilot_ftp_hyperspace_upgrade_prompt","copilot_ftp_settings_upgrade","copilot_ftp_upgrade_to_pro_from_models","copilot_ftp_your_copilot_settings","copilot_global_overlay_v2","copilot_immersive_agent_branch_selection","copilot_immersive_structured_model_picker","copilot_loops_share_button","copilot_no_floating_button","copilot_read_shared_conversation","copilot_spaces_input_menu_select","copilot_spark_allow_empty_commit","copilot_spark_progressive_error_handling","copilot_spark_single_user_iteration","copilot_spark_use_billing_headers","copilot_spark_write_iteration_history_to_git","copilot_stable_conversation_view","copilot_task_oriented_assistive_prompts","copilot_workbench_agent_seed_tool","copilot_workbench_cache","copilot_workbench_connection_reload_banner","copilot_workbench_preview_analytics","copilot_workbench_ratelimit_fallback","copilot_workbench_refresh_on_wsod","copilot_workbench_synthetic_generation","custom_copilots_capi_mode","dashboard_public_preview","direct_to_salesforce","dotcom_chat_client_side_skills","failbot_report_error_react_apps_on_page","ghost_pilot_confidence_truncation_25","ghost_pilot_confidence_truncation_40","global_search_multi_orgs","hpc_improve_dom_insertion_observer","hyperspace_diff_view","insert_before_patch","issue_fields_report_usage","issues_preserve_tokens_in_urls","issues_react_blur_item_picker_on_close","issues_react_bots_timeline_pagination","issues_react_prohibit_title_fallback","issues_react_remove_placeholders","issues_sticky_sidebar","lifecycle_label_name_updates","link_contact_sales_swp_marketo","marketing_pages_search_explore_provider","mcp_registry_all_featured_cards","memex_mwl_filter_field_delimiter","migrate_toasts_to_banners_web_notifications","new_insights_rulesets_filter","new_traffic_page_banner","override_pulse_legacy_url","primer_react_segmented_control_tooltip","primer_react_select_panel_remove_active_descendant","primer_react_unified_portal_root","record_sso_banner_metrics","releases_update_ref_selector","remove_child_patch","repos_insights_remove_new_url","sample_network_conn_type","scheduled_reminders_updated_limits","show_edit_on_default_option","site_homepage_contentful","site_msbuild_webgl_hero","spark_commit_on_default_branch","spark_sync_repository_after_iteration","viewscreen_sandbox","webp_support","workbench_default_sonnet4","workbench_store_readonly"],"copilotApiOverrideUrl":"https://api.githubcopilot.com"}</script>
apps\api\static\fonts\NotoSansBengali-Bold.ttf:70:<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-39310fffdcee.js" defer="defer"></script>
apps\api\static\fonts\NotoSansBengali-Bold.ttf:106:  <meta name="github-keyboard-shortcuts" content="copilot" data-turbo-transient="true" />
apps\api\static\fonts\NotoSansBengali-Bold.ttf:143:  <meta property="og:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
apps\api\static\fonts\NotoSansBengali-Bold.ttf:147:  <meta property="og:image" content="https://github.githubassets.com/assets/github-mark-57519b92ca4e.png">
apps\api\static\fonts\NotoSansBengali-Bold.ttf:151:  <meta property="og:image" content="https://github.githubassets.com/assets/github-octocat-13c86b8b336d.png">
apps\api\static\fonts\NotoSansBengali-Bold.ttf:163:  <meta property="twitter:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
apps\api\static\fonts\NotoSansBengali-Bold.ttf:1365:            <a target="_blank" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax" data-view-component="true" class="Link color-fg-accent text-normal ml-2">Search syntax tips</a>            <div class="d-flex flex-1"></div>
apps\api\static\fonts\NotoSansBengali-Bold.ttf:1448:                placeholder="github-ruby"
apps\api\static\fonts\NotoSansBengali-Bold.ttf:1470:            To see all available qualifiers, see our <a class="Link--inTextBlock" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax">documentation</a>.
apps\api\static\fonts\NotoSansBengali-Bold.ttf:1877:            <a class="Link--secondary" data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;terms&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;terms_link_subfooter_footer&quot;}" href="https://docs.github.com/site-policy/github-terms/github-terms-of-service">Terms</a>
apps\api\static\fonts\NotoSansBengali-Bold.ttf:1881:            <a class="Link--secondary" data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;privacy&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;privacy_link_subfooter_footer&quot;}" href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement">Privacy</a>
apps\api\static\fonts\NotoSansBengali-Regular.ttf:25:  <link rel="dns-prefetch" href="https://github-cloud.s3.amazonaws.com">
apps\api\static\fonts\NotoSansBengali-Regular.ttf:50:    <link crossorigin="anonymous" media="all" rel="stylesheet" href="https://github.githubassets.com/assets/github-f7128b22e253.css" />
apps\api\static\fonts\NotoSansBengali-Regular.ttf:55:  <script type="application/json" id="client-env">{"locale":"en","featureFlags":["alternate_user_config_repo","api_insights_show_missing_data_banner","attestations_filtering","attestations_sorting","client_version_header","code_frequency_cls","codespaces_prebuild_region_target_update","contact_requests_implicit_opt_in","contentful_lp_enterprise","contentful_lp_footnotes","copilot_agent_task_caching","copilot_api_agentic_issue_marshal_yaml","copilot_api_draft_issue_code_search","copilot_chat_attach_multiple_images","copilot_chat_file_redirect","copilot_chat_group_notifications","copilot_chat_reduce_quota_checks","copilot_chat_search_bar_redirect","copilot_chat_vision_in_claude","copilot_chat_vision_skip_thread_create","copilot_coding_agent_diff_stats","copilot_custom_copilots_feature_preview","copilot_custom_copilots_images","copilot_duplicate_thread","copilot_features_raycast_logo","copilot_free_to_paid_telem","copilot_ftp_hyperspace_upgrade_prompt","copilot_ftp_settings_upgrade","copilot_ftp_upgrade_to_pro_from_models","copilot_ftp_your_copilot_settings","copilot_global_overlay_v2","copilot_immersive_agent_branch_selection","copilot_immersive_structured_model_picker","copilot_loops_share_button","copilot_no_floating_button","copilot_read_shared_conversation","copilot_spaces_input_menu_select","copilot_spark_allow_empty_commit","copilot_spark_progressive_error_handling","copilot_spark_single_user_iteration","copilot_spark_use_billing_headers","copilot_spark_write_iteration_history_to_git","copilot_stable_conversation_view","copilot_task_oriented_assistive_prompts","copilot_workbench_agent_seed_tool","copilot_workbench_cache","copilot_workbench_connection_reload_banner","copilot_workbench_preview_analytics","copilot_workbench_ratelimit_fallback","copilot_workbench_refresh_on_wsod","copilot_workbench_synthetic_generation","custom_copilots_capi_mode","dashboard_public_preview","direct_to_salesforce","dotcom_chat_client_side_skills","failbot_report_error_react_apps_on_page","ghost_pilot_confidence_truncation_25","ghost_pilot_confidence_truncation_40","global_search_multi_orgs","hpc_improve_dom_insertion_observer","hyperspace_diff_view","insert_before_patch","issue_fields_report_usage","issues_preserve_tokens_in_urls","issues_react_blur_item_picker_on_close","issues_react_bots_timeline_pagination","issues_react_prohibit_title_fallback","issues_react_remove_placeholders","issues_sticky_sidebar","lifecycle_label_name_updates","link_contact_sales_swp_marketo","marketing_pages_search_explore_provider","mcp_registry_all_featured_cards","memex_mwl_filter_field_delimiter","migrate_toasts_to_banners_web_notifications","new_insights_rulesets_filter","new_traffic_page_banner","override_pulse_legacy_url","primer_react_segmented_control_tooltip","primer_react_select_panel_remove_active_descendant","primer_react_unified_portal_root","record_sso_banner_metrics","releases_update_ref_selector","remove_child_patch","repos_insights_remove_new_url","sample_network_conn_type","scheduled_reminders_updated_limits","show_edit_on_default_option","site_homepage_contentful","site_msbuild_webgl_hero","spark_commit_on_default_branch","spark_sync_repository_after_iteration","viewscreen_sandbox","webp_support","workbench_default_sonnet4","workbench_store_readonly"],"copilotApiOverrideUrl":"https://api.githubcopilot.com"}</script>
apps\api\static\fonts\NotoSansBengali-Regular.ttf:70:<script crossorigin="anonymous" type="application/javascript" src="https://github.githubassets.com/assets/github-elements-39310fffdcee.js" defer="defer"></script>
apps\api\static\fonts\NotoSansBengali-Regular.ttf:106:  <meta name="github-keyboard-shortcuts" content="copilot" data-turbo-transient="true" />
apps\api\static\fonts\NotoSansBengali-Regular.ttf:143:  <meta property="og:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
apps\api\static\fonts\NotoSansBengali-Regular.ttf:147:  <meta property="og:image" content="https://github.githubassets.com/assets/github-mark-57519b92ca4e.png">
apps\api\static\fonts\NotoSansBengali-Regular.ttf:151:  <meta property="og:image" content="https://github.githubassets.com/assets/github-octocat-13c86b8b336d.png">
apps\api\static\fonts\NotoSansBengali-Regular.ttf:163:  <meta property="twitter:image" content="https://github.githubassets.com/assets/github-logo-55c5b9a1fe52.png">
apps\api\static\fonts\NotoSansBengali-Regular.ttf:1365:            <a target="_blank" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax" data-view-component="true" class="Link color-fg-accent text-normal ml-2">Search syntax tips</a>            <div class="d-flex flex-1"></div>
apps\api\static\fonts\NotoSansBengali-Regular.ttf:1448:                placeholder="github-ruby"
apps\api\static\fonts\NotoSansBengali-Regular.ttf:1470:            To see all available qualifiers, see our <a class="Link--inTextBlock" href="https://docs.github.com/search-github/github-code-search/understanding-github-code-search-syntax">documentation</a>.
apps\api\static\fonts\NotoSansBengali-Regular.ttf:1877:            <a class="Link--secondary" data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;terms&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;terms_link_subfooter_footer&quot;}" href="https://docs.github.com/site-policy/github-terms/github-terms-of-service">Terms</a>
apps\api\static\fonts\NotoSansBengali-Regular.ttf:1881:            <a class="Link--secondary" data-analytics-event="{&quot;location&quot;:&quot;footer&quot;,&quot;action&quot;:&quot;privacy&quot;,&quot;context&quot;:&quot;subfooter&quot;,&quot;tag&quot;:&quot;link&quot;,&quot;label&quot;:&quot;privacy_link_subfooter_footer&quot;}" href="https://docs.github.com/site-policy/privacy-policies/github-privacy-statement">Privacy</a>
apps\api\terraform\cloudwatch.tf:4:# Usage:
apps\api\terraform\enterprise_cloudwatch.tf:4:# Usage:
apps\api\tests\gold_corpus\README.md:33:## Usage
apps\api\tests\gold_corpus\run_corpus.py:7:Usage:
apps\api\tests\gold_corpus\__init__.py:16:Usage:
apps\api\tier_admin.py:4:Manage customer tiers, usage, and quotas.
apps\api\tier_admin.py:6:Usage:
apps\api\tier_admin.py:7:    python tier_admin.py --customer-id customer123 --check-usage
apps\api\tier_admin.py:9:    python tier_admin.py --customer-id customer123 --record-usage --tier free
apps\api\tier_admin.py:23:def check_usage(args):
apps\api\tier_admin.py:24:    """Check customer usage allowance"""
apps\api\tier_admin.py:25:    print(f"ðŸ” Checking usage allowance for customer: {args.customer_id}")
apps\api\tier_admin.py:30:    usage_result = tier_manager.check_usage_allowance(args.customer_id, args.tier, args.lc_size)
apps\api\tier_admin.py:32:    print(f"ðŸ“Š Tier: {usage_result.tier_limits.name}")
apps\api\tier_admin.py:33:    print(f"âœ… Allowed: {'Yes' if usage_result.allowed else 'No'}")
apps\api\tier_admin.py:35:    if usage_result.allowed:
apps\api\tier_admin.py:36:        print(f"ðŸ“ˆ Remaining today: {'Unlimited' if usage_result.checks_remaining_today == -1 else usage_result.checks_remaining_today}")
apps\api\tier_admin.py:37:        print(f"ðŸ“… Remaining this month: {'Unlimited' if usage_result.checks_remaining_month == -1 else usage_result.checks_remaining_month}")
apps\api\tier_admin.py:39:        print(f"âŒ Usage blocked")
apps\api\tier_admin.py:41:    if usage_result.upsell_triggered:
apps\api\tier_admin.py:42:        print(f"ðŸ’¡ Upsell: {usage_result.upsell_message}")
apps\api\tier_admin.py:44:    # Show detailed usage summary
apps\api\tier_admin.py:46:    print(f"\nðŸ“‹ Detailed Usage Summary:")
apps\api\tier_admin.py:47:    print(f"   Today: {summary['usage']['checks_today']} checks ({summary['usage']['daily_usage_percent']}%)")
apps\api\tier_admin.py:48:    print(f"   This month: {summary['usage']['checks_this_month']} checks ({summary['usage']['monthly_usage_percent']}%)")
apps\api\tier_admin.py:49:    print(f"   Lifetime: {summary['usage']['total_lifetime']} checks")
apps\api\tier_admin.py:52:    return usage_result.allowed
apps\api\tier_admin.py:54:def record_usage(args):
apps\api\tier_admin.py:55:    """Record a usage event"""
apps\api\tier_admin.py:56:    print(f"ðŸ“ Recording usage for customer: {args.customer_id}")
apps\api\tier_admin.py:60:    # Record the usage
apps\api\tier_admin.py:61:    updated_usage = tier_manager.record_usage(args.customer_id, args.tier, success=not args.failed)
apps\api\tier_admin.py:63:    print(f"âœ… Usage recorded successfully")
apps\api\tier_admin.py:64:    print(f"ðŸ“ˆ New counts - Today: {updated_usage.checks_today}, Month: {updated_usage.checks_this_month}")
apps\api\tier_admin.py:65:    print(f"ðŸ† Lifetime total: {updated_usage.total_lifetime_checks}")
apps\api\tier_admin.py:132:def cleanup_usage_data(args):
apps\api\tier_admin.py:133:    """Clean up old usage data"""
apps\api\tier_admin.py:134:    print(f"ðŸ§¹ Cleaning up usage data older than {args.days} days")
apps\api\tier_admin.py:137:    result = tier_manager.cleanup_old_usage_data(args.days)
apps\api\tier_admin.py:152:    # Check usage allowance
apps\api\tier_admin.py:153:    python tier_admin.py --customer-id user123 --check-usage --tier free
apps\api\tier_admin.py:155:    # Record successful usage
apps\api\tier_admin.py:156:    python tier_admin.py --customer-id user123 --record-usage --tier pro
apps\api\tier_admin.py:177:    parser.add_argument("--check-usage", action="store_true", help="Check usage allowance")
apps\api\tier_admin.py:180:    parser.add_argument("--record-usage", action="store_true", help="Record usage")
apps\api\tier_admin.py:181:    parser.add_argument("--failed", action="store_true", help="Mark usage as failed")
apps\api\tier_admin.py:188:    parser.add_argument("--cleanup", action="store_true", help="Clean up old usage data")
apps\api\tier_admin.py:196:    if args.check_usage:
apps\api\tier_admin.py:198:            print("âŒ --customer-id required for usage check")
apps\api\tier_admin.py:200:        success = check_usage(args)
apps\api\tier_admin.py:202:    elif args.record_usage:
apps\api\tier_admin.py:204:            print("âŒ --customer-id required for recording usage")
apps\api\tier_admin.py:206:        success = record_usage(args)
apps\api\tier_admin.py:222:        success = cleanup_usage_data(args)
apps\api\trust_platform\compliance\ai_rule_suggester.py:231:                tokens_used = response.usage.total_tokens
apps\api\trust_platform\compliance\ai_rule_suggester.py:243:                tokens_used = message.usage.input_tokens + message.usage.output_tokens
apps\api\trust_platform\compliance\compliance_engine.py:104:        # Track usage for free tier limits
apps\api\trust_platform\compliance\compliance_engine.py:105:        self.usage_tracker = {}
apps\api\trust_platform\compliance\compliance_engine.py:390:            # Track usage for free tier (3 checks limit)
apps\api\trust_platform\compliance\compliance_engine.py:391:            current_usage = self.usage_tracker.get(customer_id, 0)
apps\api\trust_platform\compliance\compliance_engine.py:392:            remaining = max(0, 3 - current_usage)
apps\api\trust_platform\compliance\compliance_engine.py:396:                'checks_used': current_usage,
apps\api\trust_platform\compliance\compliance_engine.py:463:        # Update usage for free tier
apps\api\trust_platform\compliance\compliance_engine.py:465:            self.usage_tracker[customer_id] = quota_status['checks_used'] + 1
apps\api\trust_platform\compliance\compliance_integration.py:56:        usage_result = self.tier_manager.check_usage_allowance(customer_id, tier, lc_size_mb)
apps\api\trust_platform\compliance\compliance_integration.py:58:        if not usage_result.allowed:
apps\api\trust_platform\compliance\compliance_integration.py:67:                "upsell_message": usage_result.upsell_message,
apps\api\trust_platform\compliance\compliance_integration.py:68:                "checks_remaining": usage_result.checks_remaining_month,
apps\api\trust_platform\compliance\compliance_integration.py:70:                    "daily": usage_result.tier_limits.max_checks_per_day,
apps\api\trust_platform\compliance\compliance_integration.py:71:                    "monthly": usage_result.tier_limits.max_checks_per_month,
apps\api\trust_platform\compliance\compliance_integration.py:72:                    "max_file_size_mb": usage_result.tier_limits.max_lc_size_mb
apps\api\trust_platform\compliance\compliance_integration.py:74:                "error": "Usage limit exceeded"
apps\api\trust_platform\compliance\compliance_integration.py:87:            # Record successful usage
apps\api\trust_platform\compliance\compliance_integration.py:88:            self.tier_manager.record_usage(customer_id, tier, success=True)
apps\api\trust_platform\compliance\compliance_integration.py:91:            if usage_result.upsell_triggered:
apps\api\trust_platform\compliance\compliance_integration.py:93:                standard_result["upsell_message"] = usage_result.upsell_message
apps\api\trust_platform\compliance\compliance_integration.py:94:                standard_result["checks_remaining"] = usage_result.checks_remaining_month
apps\api\trust_platform\compliance\compliance_integration.py:112:                # Record successful usage even for fallback
apps\api\trust_platform\compliance\compliance_integration.py:113:                self.tier_manager.record_usage(customer_id, tier, success=True)
apps\api\trust_platform\compliance\icc_parser.py:417:    # Example usage (would require actual ICC PDF files)
apps\api\trust_platform\compliance\README.md:44:### 1. Basic Usage
apps\api\trust_platform\compliance\README.md:68:### 2. CLI Usage
apps\api\trust_platform\compliance\README.md:283:- Tier usage statistics
apps\api\trust_platform\config\trust_config.yaml:419:    impact: "Critical - prevents LC usage"
apps\api\trust_platform\logging\structured_logger.py:55:    memory_usage_mb: Optional[float] = None
apps\api\trust_platform\logging\structured_logger.py:56:    cpu_usage_percent: Optional[float] = None
apps\api\trust_platform\logging\structured_logger.py:402:        """Log user actions and feature usage"""
apps\api\trust_platform\sla_dashboards\trade_sla_manager.py:582:                        "title": "Enterprise API Usage",
apps\api\trust_platform\status_pages\trust_status_generator.py:358:                'checks_remaining': 3,  # Would track actual usage
apps\api\trust_platform\tiers\tier_manager.py:37:class CustomerUsage:
apps\api\trust_platform\tiers\tier_manager.py:38:    """Customer usage tracking"""
apps\api\trust_platform\tiers\tier_manager.py:51:class UsageResult:
apps\api\trust_platform\tiers\tier_manager.py:52:    """Result of usage check"""
apps\api\trust_platform\tiers\tier_manager.py:59:    current_usage: CustomerUsage
apps\api\trust_platform\tiers\tier_manager.py:62:    """Manages tier-based access control and usage tracking"""
apps\api\trust_platform\tiers\tier_manager.py:123:    def __init__(self, storage_path: str = "/Users/user/Desktop/Enso Intelligence/trdrhub.com/apps/api/data/usage"):
apps\api\trust_platform\tiers\tier_manager.py:127:    def check_usage_allowance(self, customer_id: str, tier: str, lc_size_mb: float = 0.0) -> UsageResult:
apps\api\trust_platform\tiers\tier_manager.py:129:        Check if customer can perform a compliance check based on their tier and usage
apps\api\trust_platform\tiers\tier_manager.py:138:        # Load current usage
apps\api\trust_platform\tiers\tier_manager.py:139:        current_usage = self._load_customer_usage(customer_id, tier_enum)
apps\api\trust_platform\tiers\tier_manager.py:143:            return UsageResult(
apps\api\trust_platform\tiers\tier_manager.py:150:                current_usage=current_usage
apps\api\trust_platform\tiers\tier_manager.py:155:            if current_usage.checks_today >= tier_limits.max_checks_per_day:
apps\api\trust_platform\tiers\tier_manager.py:156:                return UsageResult(
apps\api\trust_platform\tiers\tier_manager.py:159:                    checks_remaining_month=max(0, tier_limits.max_checks_per_month - current_usage.checks_this_month),
apps\api\trust_platform\tiers\tier_manager.py:163:                    current_usage=current_usage
apps\api\trust_platform\tiers\tier_manager.py:168:            if current_usage.checks_this_month >= tier_limits.max_checks_per_month:
apps\api\trust_platform\tiers\tier_manager.py:169:                return UsageResult(
apps\api\trust_platform\tiers\tier_manager.py:176:                    current_usage=current_usage
apps\api\trust_platform\tiers\tier_manager.py:180:        remaining_today = -1 if tier_limits.max_checks_per_day < 0 else (tier_limits.max_checks_per_day - current_usage.checks_today)
apps\api\trust_platform\tiers\tier_manager.py:181:        remaining_month = -1 if tier_limits.max_checks_per_month < 0 else (tier_limits.max_checks_per_month - current_usage.checks_this_month)
apps\api\trust_platform\tiers\tier_manager.py:195:        return UsageResult(
apps\api\trust_platform\tiers\tier_manager.py:202:            current_usage=current_usage
apps\api\trust_platform\tiers\tier_manager.py:205:    def record_usage(self, customer_id: str, tier: str, success: bool = True) -> CustomerUsage:
apps\api\trust_platform\tiers\tier_manager.py:207:        Record a compliance check usage
apps\api\trust_platform\tiers\tier_manager.py:214:        current_usage = self._load_customer_usage(customer_id, tier_enum)
apps\api\trust_platform\tiers\tier_manager.py:218:            current_usage.checks_today += 1
apps\api\trust_platform\tiers\tier_manager.py:219:            current_usage.checks_this_month += 1
apps\api\trust_platform\tiers\tier_manager.py:220:            current_usage.total_lifetime_checks += 1
apps\api\trust_platform\tiers\tier_manager.py:221:            current_usage.last_check_timestamp = datetime.now(timezone.utc).isoformat()
apps\api\trust_platform\tiers\tier_manager.py:223:        # Save updated usage
apps\api\trust_platform\tiers\tier_manager.py:224:        self._save_customer_usage(current_usage)
apps\api\trust_platform\tiers\tier_manager.py:226:        return current_usage
apps\api\trust_platform\tiers\tier_manager.py:238:        """Get comprehensive customer usage summary"""
apps\api\trust_platform\tiers\tier_manager.py:245:        current_usage = self._load_customer_usage(customer_id, tier_enum)
apps\api\trust_platform\tiers\tier_manager.py:247:        # Calculate usage percentages
apps\api\trust_platform\tiers\tier_manager.py:248:        daily_usage_pct = 0.0 if tier_limits.max_checks_per_day < 0 else (current_usage.checks_today / tier_limits.max_checks_per_day * 100)
apps\api\trust_platform\tiers\tier_manager.py:249:        monthly_usage_pct = 0.0 if tier_limits.max_checks_per_month < 0 else (current_usage.checks_this_month / tier_limits.max_checks_per_month * 100)
apps\api\trust_platform\tiers\tier_manager.py:260:            "usage": {
apps\api\trust_platform\tiers\tier_manager.py:261:                "checks_today": current_usage.checks_today,
apps\api\trust_platform\tiers\tier_manager.py:262:                "checks_this_month": current_usage.checks_this_month,
apps\api\trust_platform\tiers\tier_manager.py:263:                "total_lifetime": current_usage.total_lifetime_checks,
apps\api\trust_platform\tiers\tier_manager.py:264:                "daily_usage_percent": round(daily_usage_pct, 1),
apps\api\trust_platform\tiers\tier_manager.py:265:                "monthly_usage_percent": round(monthly_usage_pct, 1)
apps\api\trust_platform\tiers\tier_manager.py:273:                "today": -1 if tier_limits.max_checks_per_day < 0 else max(0, tier_limits.max_checks_per_day - current_usage.checks_today),
apps\api\trust_platform\tiers\tier_manager.py:274:                "this_month": -1 if tier_limits.max_checks_per_month < 0 else max(0, tier_limits.max_checks_per_month - current_usage.checks_this_month),
apps\api\trust_platform\tiers\tier_manager.py:277:            "last_check": current_usage.last_check_timestamp,
apps\api\trust_platform\tiers\tier_manager.py:278:            "member_since": current_usage.registration_date
apps\api\trust_platform\tiers\tier_manager.py:288:        # Load current usage with old tier
apps\api\trust_platform\tiers\tier_manager.py:289:        current_usage = self._load_customer_usage(customer_id, TierType.FREE)  # Load with current tier
apps\api\trust_platform\tiers\tier_manager.py:292:        current_usage.tier = new_tier_enum
apps\api\trust_platform\tiers\tier_manager.py:293:        current_usage.upgrade_date = datetime.now(timezone.utc).isoformat()
apps\api\trust_platform\tiers\tier_manager.py:295:        # Save updated usage
apps\api\trust_platform\tiers\tier_manager.py:296:        self._save_customer_usage(current_usage)
apps\api\trust_platform\tiers\tier_manager.py:304:            "upgrade_date": current_usage.upgrade_date,
apps\api\trust_platform\tiers\tier_manager.py:312:    def _load_customer_usage(self, customer_id: str, tier: TierType) -> CustomerUsage:
apps\api\trust_platform\tiers\tier_manager.py:313:        """Load customer usage data or create new record"""
apps\api\trust_platform\tiers\tier_manager.py:314:        usage_file = self.storage_path / f"{self._hash_customer_id(customer_id)}.json"
apps\api\trust_platform\tiers\tier_manager.py:320:        if usage_file.exists():
apps\api\trust_platform\tiers\tier_manager.py:322:                with open(usage_file, 'r') as f:
apps\api\trust_platform\tiers\tier_manager.py:325:                usage = CustomerUsage(**data)
apps\api\trust_platform\tiers\tier_manager.py:328:                if usage.current_month != current_month:
apps\api\trust_platform\tiers\tier_manager.py:329:                    usage.checks_this_month = 0
apps\api\trust_platform\tiers\tier_manager.py:330:                    usage.current_month = current_month
apps\api\trust_platform\tiers\tier_manager.py:332:                if usage.current_day != current_day:
apps\api\trust_platform\tiers\tier_manager.py:333:                    usage.checks_today = 0
apps\api\trust_platform\tiers\tier_manager.py:334:                    usage.current_day = current_day
apps\api\trust_platform\tiers\tier_manager.py:337:                usage.tier = tier
apps\api\trust_platform\tiers\tier_manager.py:339:                return usage
apps\api\trust_platform\tiers\tier_manager.py:344:        # Create new usage record
apps\api\trust_platform\tiers\tier_manager.py:345:        return CustomerUsage(
apps\api\trust_platform\tiers\tier_manager.py:357:    def _save_customer_usage(self, usage: CustomerUsage) -> None:
apps\api\trust_platform\tiers\tier_manager.py:358:        """Save customer usage data"""
apps\api\trust_platform\tiers\tier_manager.py:359:        usage_file = self.storage_path / f"{self._hash_customer_id(usage.customer_id)}.json"
apps\api\trust_platform\tiers\tier_manager.py:361:        with open(usage_file, 'w') as f:
apps\api\trust_platform\tiers\tier_manager.py:362:            json.dump(asdict(usage), f, indent=2, default=str)
apps\api\trust_platform\tiers\tier_manager.py:422:    def cleanup_old_usage_data(self, days_to_keep: int = 90) -> Dict[str, int]:
apps\api\trust_platform\tiers\tier_manager.py:423:        """Clean up old usage data files"""
apps\api\trust_platform\tiers\tier_manager.py:428:        for usage_file in self.storage_path.glob("*.json"):
apps\api\trust_platform\tiers\tier_manager.py:431:                file_modified = datetime.fromtimestamp(usage_file.stat().st_mtime, timezone.utc)
apps\api\trust_platform\tiers\tier_manager.py:435:                    with open(usage_file, 'r') as f:
apps\api\trust_platform\tiers\tier_manager.py:444:                            usage_file.unlink()
apps\api\trust_platform\tiers\tier_manager.py:450:                        usage_file.unlink()
apps\api\trust_platform\tiers\__init__.py:3:Manages free tier gating, usage quotas, and upsell mechanisms.
apps\api\trust_platform\tiers\__init__.py:6:from .tier_manager import TierManager, TierType, TierLimits, CustomerUsage, UsageResult
apps\api\trust_platform\tiers\__init__.py:8:__all__ = ["TierManager", "TierType", "TierLimits", "CustomerUsage", "UsageResult"]apps\api\utils\dashboard_manager.py:14:Usage:
apps\api\utils\log_insights_manager.py:14:Usage:
apps\api\verify_alarm.py:8:Usage:
apps\api\verify_cloudwatch_full.py:9:Usage:
apps\api\verify_multi_env_consistency.py:14:Usage:
apps\api\verify_observability_stack.py:16:Usage:
apps\web\dist\assets\index-Bz84JA8h.js:52:`+i):r.stack=i}catch{}}throw r}}_request(s,a){typeof s=="string"?(a=a||{},a.url=s):a=s||{},a=Lx(this.defaults,a);const{transitional:r,paramsSerializer:n,headers:i}=a;r!==void 0&&uw.assertOptions(r,{silentJSONParsing:id.transitional(id.boolean),forcedJSONParsing:id.transitional(id.boolean),clarifyTimeoutError:id.transitional(id.boolean)},!1),n!=null&&(tt.isFunction(n)?a.paramsSerializer={serialize:n}:uw.assertOptions(n,{encode:id.function,serialize:id.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),uw.assertOptions(a,{baseUrl:id.spelling("baseURL"),withXsrfToken:id.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let l=i&&tt.merge(i.common,i[a.method]);i&&tt.forEach(["delete","get","head","post","put","patch","common"],j=>{delete i[j]}),a.headers=kl.concat(l,i);const o=[];let d=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(a)===!1||(d=d&&y.synchronous,o.unshift(y.fulfilled,y.rejected))});const c=[];this.interceptors.response.forEach(function(y){c.push(y.fulfilled,y.rejected)});let u,h=0,x;if(!d){const j=[pL.bind(this),void 0];for(j.unshift(...o),j.push(...c),x=j.length,u=Promise.resolve(a);h<x;)u=u.then(j[h++],j[h++]);return u}x=o.length;let g=a;for(h=0;h<x;){const j=o[h++],y=o[h++];try{g=j(g)}catch(b){y.call(this,b);break}}try{u=pL.call(this,g)}catch(j){return Promise.reject(j)}for(h=0,x=c.length;h<x;)u=u.then(c[h++],c[h++]);return u}getUri(s){s=Lx(this.defaults,s);const a=Oq(s.baseURL,s.url,s.allowAbsoluteUrls);return Pq(a,s.params,s.paramsSerializer)}};tt.forEach(["delete","get","head","options"],function(s){Px.prototype[s]=function(a,r){return this.request(Lx(r||{},{method:s,url:a,data:(r||{}).data}))}});tt.forEach(["post","put","patch"],function(s){function a(r){return function(i,l,o){return this.request(Lx(o||{},{method:s,headers:r?{"Content-Type":"multipart/form-data"}:{},url:i,data:l}))}}Px.prototype[s]=a(),Px.prototype[s+"Form"]=a(!0)});let ide=class Uq{constructor(s){if(typeof s!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(i){a=i});const r=this;this.promise.then(n=>{if(!r._listeners)return;let i=r._listeners.length;for(;i-- >0;)r._listeners[i](n);r._listeners=null}),this.promise.then=n=>{let i;const l=new Promise(o=>{r.subscribe(o),i=o}).then(n);return l.cancel=function(){r.unsubscribe(i)},l},s(function(i,l,o){r.reason||(r.reason=new Ig(i,l,o),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(s){if(this.reason){s(this.reason);return}this._listeners?this._listeners.push(s):this._listeners=[s]}unsubscribe(s){if(!this._listeners)return;const a=this._listeners.indexOf(s);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const s=new AbortController,a=r=>{s.abort(r)};return this.subscribe(a),s.signal.unsubscribe=()=>this.unsubscribe(a),s.signal}static source(){let s;return{token:new Uq(function(n){s=n}),cancel:s}}};function lde(t){return function(a){return t.apply(null,a)}}function ode(t){return tt.isObject(t)&&t.isAxiosError===!0}const u5={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(u5).forEach(([t,s])=>{u5[s]=t});function zq(t){const s=new Px(t),a=vq(Px.prototype.request,s);return tt.extend(a,Px.prototype,s,{allOwnKeys:!0}),tt.extend(a,s,null,{allOwnKeys:!0}),a.create=function(n){return zq(Lx(t,n))},a}const tn=zq(Bj);tn.Axios=Px;tn.CanceledError=Ig;tn.CancelToken=ide;tn.isCancel=Fq;tn.VERSION=$q;tn.toFormData=k1;tn.AxiosError=ta;tn.Cancel=tn.CanceledError;tn.all=function(s){return Promise.all(s)};tn.spread=lde;tn.isAxiosError=ode;tn.mergeConfig=Lx;tn.AxiosHeaders=kl;tn.formToJSON=t=>Tq(tt.isHTMLForm(t)?new FormData(t):t);tn.getAdapter=Bq.getAdapter;tn.HttpStatusCode=u5;tn.default=tn;const{Axios:rJe,AxiosError:nJe,CanceledError:iJe,isCancel:lJe,CancelToken:oJe,VERSION:cJe,all:dJe,Cancel:uJe,isAxiosError:mJe,spread:hJe,toFormData:xJe,AxiosHeaders:pJe,HttpStatusCode:fJe,formToJSON:gJe,getAdapter:vJe,mergeConfig:jJe}=tn;function qq(){if(typeof document>"u")return null;const t=document.cookie.split(";");for(const s of t){const[a,r]=s.trim().split("=");if(a==="csrf_token")return decodeURIComponent(r)}return null}function _D(t){return["POST","PUT","DELETE","PATCH"].includes(t.toUpperCase())}async function cde(t){try{const s=await fetch(`${t}/auth/csrf-token`,{method:"GET",credentials:"include",headers:{"Content-Type":"application/json"}});return s.ok?(await s.json()).csrf_token||null:(console.warn("Failed to fetch CSRF token:",s.status),null)}catch(s){return console.error("Error fetching CSRF token:",s),null}}const CD=Object.freeze(Object.defineProperty({__proto__:null,fetchCsrfToken:cde,getCsrfToken:qq,requiresCsrfToken:_D},Symbol.toStringTag,{value:"Module"})),dde=()=>{if(typeof window<"u"){const{hostname:t,protocol:s}=window.location;if(t==="localhost"||t==="127.0.0.1")return"http://localhost:8000";if(t.endsWith("trdrhub.com")||t.endsWith(".vercel.app")||s==="https:")return"https://trdrhub-api.onrender.com"}return"https://trdrhub-api.onrender.com"},A1=dde(),ude="".toLowerCase()==="true",mde=["/auth/login","/auth/register"],hde=3e4,xde=3e5,pde=["/api/validate","/api/legacy_validate","/api/legacy-validate","/admin/rulesets/upload","/admin/rulesets"],Ae=tn.create({baseURL:A1,timeout:hde,withCredentials:!0});Ae.interceptors.request.use(async t=>{const s=(t.url||"").toLowerCase();if(t.headers?.Authorization||t.headers?.authorization||mde.some(n=>s.startsWith(n)))return t;pde.some(n=>s.startsWith(n))&&(t.timeout=xde);let r=null;if(typeof window<"u"){if(s.startsWith("/admin")){const i=localStorage.getItem("trdrhub_api_token");i?r=i:r=(await un.auth.getSession()).data.session?.access_token||null}else if(r=(await un.auth.getSession()).data.session?.access_token||null,!r){const l=localStorage.getItem("trdrhub_api_token");l&&(r=l)}}if(r){const n=t.headers??{};n.Authorization=`Bearer ${r}`,t.headers=n}else s.startsWith("/admin")&&(console.warn("Admin endpoint called without authentication token:",t.url),console.warn("Please log in via /login page to get backend JWT token"));if(s.startsWith("/bank")&&typeof window<"u"){const i=new URL(window.location.href).searchParams.get("org");i&&t.params?t.params={...t.params,org:i}:i&&(t.params={org:i})}if(typeof window<"u"){const n=localStorage.getItem("i18nextLng")||"en",i=t.headers??{};i["Accept-Language"]=n,t.headers=i}if(t.method&&_D(t.method)){let n=qq();if(!n)try{const{fetchCsrfToken:i}=await ll(async()=>{const{fetchCsrfToken:l}=await Promise.resolve().then(()=>CD);return{fetchCsrfToken:l}},void 0);n=await i(A1)}catch(i){console.warn("Failed to fetch CSRF token:",i)}if(n){const i=t.headers??{};i["X-CSRF-Token"]=n,t.headers=i}else console.warn("CSRF token not available for",t.method,t.url)}return t},t=>Promise.reject(t));Ae.interceptors.response.use(t=>t,async t=>{const s=(t?.config?.url||"").toLowerCase(),a=s.startsWith("/admin");if(t?.response?.status===401){const n=["/auth/me","/onboarding/status","/members/me/permissions"].some(i=>s.includes(i));if(!ude&&!n){const i=typeof window<"u"?window.location.pathname:"",l=i.startsWith("/admin");a||l?typeof window<"u"&&(localStorage.removeItem("trdrhub_api_token"),i.startsWith("/admin/login")||(window.location.href="/admin/login")):console.warn("[API] Non-admin 401 received; preserving Supabase session")}}else if(t?.response?.status===403){const r=t?.response?.data?.code||"",n=t?.response?.data?.detail||"";if(r.startsWith("csrf_")||n.includes("CSRF")){const{fetchCsrfToken:i}=await ll(async()=>{const{fetchCsrfToken:l}=await Promise.resolve().then(()=>CD);return{fetchCsrfToken:l}},void 0);try{const l=await i(A1),o=t.config;if(o&&l)return o.headers=o.headers||{},o.method&&_D(o.method)&&(o.headers["X-CSRF-Token"]=l),Ae.request(o)}catch(l){console.error("Failed to refresh CSRF token:",l)}}else n.includes("Not authenticated")||n.includes("Authentication failed")?typeof window<"u"&&!window.location.pathname.startsWith("/login")&&console.error("403 Forbidden: Not authenticated. Please log in."):console.error("403 Forbidden:",n||r)}return Promise.reject(t)});Ae.defaults.baseURL;const D0={prefix:"[TRDR]",enabledLevels:["warn","error"]};function wm(t,s=D0){return s.enabledLevels?.includes(t)??!1}function _m(t,s,a){const r=new Date().toISOString().split("T")[1].split(".")[0];return[`${t}[${s.toUpperCase()}][${r}]`,...a]}const P1={debug:(...t)=>{wm("debug")&&console.log(..._m(D0.prefix,"debug",t))},info:(...t)=>{wm("info")&&console.info(..._m(D0.prefix,"info",t))},warn:(...t)=>{wm("warn")&&console.warn(..._m(D0.prefix,"warn",t))},error:(...t)=>{wm("error")&&console.error(..._m(D0.prefix,"error",t))},createLogger:t=>({debug:(...s)=>{wm("debug")&&console.log(..._m(`[${t}]`,"debug",s))},info:(...s)=>{wm("info")&&console.info(..._m(`[${t}]`,"info",s))},warn:(...s)=>{wm("warn")&&console.warn(..._m(`[${t}]`,"warn",s))},error:(...s)=>{wm("error")&&console.error(..._m(`[${t}]`,"error",s))},createLogger:P1.createLogger})},fa=P1.createLogger("Auth"),Vq=m.createContext(null),Sk=t=>({exporter:"exporter",importer:"importer",tenant_admin:"exporter",bank_officer:"bank",bank_admin:"bank",system_admin:"admin",admin:"admin"})[t]||"exporter";function fde({children:t}){const[s,a]=m.useState(null),[r,n]=m.useState(null),[i,l]=m.useState(!0),o="".toLowerCase()==="true",d=m.useRef(!1),c=()=>{a({id:"guest",email:"guest@trdrhub.com",full_name:"Guest",username:"Guest",role:"exporter",isActive:!0})},u=1e4,h=2e4,x=async(k=2e4)=>new Promise(E=>{const D=Date.now();let R=!1,O=null,P=null;const T=()=>{if(O)try{O.unsubscribe()}catch{}P&&clearInterval(P)},B=(G,q)=>{R||(R=!0,fa.debug(`Session found via ${q}`),T(),E(G))};un.auth.getSession().then(({data:G})=>{const q=G.session?.access_token||null;q?B(q,"immediate check"):fa.debug("No session in immediate check")}).catch(G=>fa.warn("getSession error:",G));try{const{data:{subscription:G}}=un.auth.onAuthStateChange((q,z)=>{fa.debug("Auth state change:",q,!!z);const H=z?.access_token||null;H&&B(H,`auth state change (${q})`)});O=G}catch(G){fa.warn("onAuthStateChange setup error:",G)}P=setInterval(async()=>{const G=Date.now()-D;if(G>k){fa.error(`Session wait timed out after ${k}ms`),T(),R||E(null);return}try{const{data:q}=await un.auth.getSession(),z=q.session?.access_token||null;z&&B(z,`polling (${G}ms)`)}catch(q){fa.warn("Polling getSession error:",q)}},50)}),g=async(k,E,D=u)=>{let R;const O=new Promise((P,T)=>{R=setTimeout(()=>T(new Error(`${E} timed out. Please try again.`)),D)});try{return await Promise.race([k,O])}finally{clearTimeout(R)}},j=m.useCallback(async k=>{let E=k;try{if(fa.debug("fetchUserProfile starting",k?"with token":"will get token"),!E){fa.debug("Getting Supabase session...");try{const{data:P,error:T}=await Promise.race([un.auth.getSession(),new Promise((B,G)=>setTimeout(()=>G(new Error("Session check timeout")),5e3))]);if(T)throw fa.error("getSession error:",T),new Error(`Failed to get session: ${T.message}`);fa.debug("Session data:",{hasSession:!!P.session}),E=P.session?.access_token||null}catch(P){fa.warn("Failed to get Supabase session:",P?.message);const T=localStorage.getItem("sb-undefined-auth-token");if(T)try{E=JSON.parse(T)?.access_token||null,fa.debug("Using token from localStorage fallback")}catch{}if(!E)throw new Error("Session check timeout - please try logging in again")}}if(!E)throw fa.error("No Supabase token available"),new Error("No authentication token available");fa.debug("Calling /auth/me");const D={Authorization:`Bearer ${E}`},{data:R}=await g(Ae.get("/auth/me",{headers:D}),"Loading profile",h);fa.info("User profile loaded:",R.email);const O={id:R.id,email:R.email,full_name:R.full_name,username:R.full_name,role:Sk(R.role),isActive:R.is_active};a(O);try{const{fetchCsrfToken:P}=await ll(async()=>{const{fetchCsrfToken:B}=await Promise.resolve().then(()=>CD);return{fetchCsrfToken:B}},void 0);await P("http://localhost:8000")}catch(P){fa.warn("Failed to fetch CSRF token:",P)}return O}catch(D){if(fa.error("Failed to load user profile",D),E)try{const R=E.split(".");if(R.length>=2){const O=JSON.parse(atob(R[1].replace(/-/g,"+").replace(/_/g,"/"))),P=O?.role||O?.app_metadata?.role||O?.user_metadata?.role||"exporter",T=O?.email||"user@trdrhub.com",B=O?.sub||`sb-${Date.now()}`,G=O?.user_metadata?.full_name||O?.name||T,q={id:B,email:T,full_name:G,username:G,role:Sk(String(P)),isActive:!0};return fa.warn("Using JWT-decoded fallback profile due to profile fetch failure"),a(q),q}}catch(R){fa.warn("JWT decode fallback failed",R)}if(o)return c(),{id:"guest",email:"guest@trdrhub.com",full_name:"Guest",username:"Guest",role:"exporter",isActive:!0};throw a(null),D}},[]);m.useEffect(()=>{let k=!0,E=null;const{data:D}=un.auth.onAuthStateChange(async(O,P)=>{if(k)if(E&&(clearTimeout(E),E=null),n(P?{access_token:P.access_token,refresh_token:P.refresh_token,expires_at:P.expires_at,user:P.user}:null),P){if(d.current){k&&l(!1);return}d.current=!0,l(!0);try{await j(P.access_token)}finally{k&&l(!1)}}else d.current=!1,a(null),n(null),k&&(o&&c(),l(!1))});return(async()=>{l(!0);try{const{data:O}=await Promise.race([un.auth.getSession(),new Promise((P,T)=>setTimeout(()=>T(new Error("Session check timeout")),3e3))]);if(!k)return;if(O.session)if(d.current)k&&l(!1);else{d.current=!0;try{await j(O.session.access_token)}finally{k&&l(!1)}}else E=setTimeout(()=>{k&&!d.current&&(o&&c(),l(!1))},3e3)}catch(O){if(fa.warn("Auth init: Failed to get session:",O?.message),!k)return;E=setTimeout(()=>{k&&!d.current&&(o&&c(),l(!1))},3e3)}})(),()=>{k=!1,E&&(clearTimeout(E),E=null),D?.subscription.unsubscribe(),d.current=!1}},[j]);const A={user:s,session:r,isLoading:i,loginWithEmail:async(k,E)=>{fa.debug("Login started",{email:k}),l(!0);try{fa.debug("Attempting Supabase sign-in...");const D=un.auth.signInWithPassword({email:k,password:E});D.catch(P=>{fa.warn("Sign-in promise error (checking session anyway):",P)}),fa.debug("Waiting for Supabase session...");const R=await x(2e4);if(!R){fa.error("No token after waiting 20s");try{const P=await Promise.race([D,new Promise((B,G)=>setTimeout(()=>G(new Error("Timeout")),2e3))]),{error:T}=P||{};if(T)throw fa.error("Sign-in returned error:",T),T}catch(P){if(P.message!=="Timeout"&&P.message!=="Sign-in timeout")throw P}throw new Error("Signing in timed out. Please try again.")}fa.debug("Supabase session obtained"),d.current=!0;const O=await j(R);return fa.info("Login completed:",O?.email),O}catch(D){fa.error("Login failed:",D?.message);try{const{data:R}=await un.auth.getSession(),O=R?.session?.access_token;if(O){const P=O.split(".");if(P.length>=2){const T=JSON.parse(atob(P[1].replace(/-/g,"+").replace(/_/g,"/"))),B=T?.role||T?.app_metadata?.role||T?.user_metadata?.role||"exporter",G=T?.email||(R?.session?.user?.email??""),q=T?.sub||`sb-${Date.now()}`,z=T?.user_metadata?.full_name||T?.name||G,H={id:q,email:G,full_name:z,username:z,role:Sk(String(B)),isActive:!0};return fa.warn("Login fallback: continuing with existing Supabase session"),a(H),H}}}catch(R){fa.warn("Login fallback session check failed",R)}throw D}finally{l(!1)}},registerWithEmail:async(k,E,D,R,O)=>{l(!0);try{const{data:P,error:T}=await g(un.auth.signUp({email:k,password:E,options:{data:{full_name:D,role:R}}}),"Sign up");if(T)throw T.message?.includes("signup_disabled")||T.message?.includes("Signup is disabled")?new Error("User registration is currently disabled. Please contact support or enable signup in Supabase settings."):T;let B=(await un.auth.getSession()).data.session;if(!B){const{error:H}=await g(un.auth.signInWithPassword({email:k,password:E}),"Signing in");if(H)throw H;B=(await un.auth.getSession()).data.session}if(!B)throw new Error("Authentication session not established after sign up");const G="http://localhost:8000",q={email:k,password:E,full_name:D,role:R};O?.companyName&&(q.company_name=O.companyName,q.company_type=O.companyType,q.company_size=O.companySize,q.business_types=O.businessTypes,q.country=O.country,q.currency=O.currency,q.payment_gateway=O.paymentGateway,fa.debug("Registering with company info:",O.companyName));try{const H=await fetch(`${G}/auth/register`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(q)});if(H.ok){const le=await H.json().catch(()=>null);fa.info("Backend registration successful:",le?.id)}else{const le=await H.json().catch(()=>({detail:"Backend registration failed"})),Y=le.detail||`HTTP ${H.status}: Backend registration failed`;H.status===400&&le.detail?.includes("already registered")?fa.info("User already exists in backend, continuing..."):fa.error("Backend registration failed:",Y)}}catch(H){fa.error("Backend registration error:",H?.message)}return await j()}finally{l(!1)}},logout:async()=>{fa.info("Logging out - clearing all authentication state");try{await un.auth.signOut()}catch(k){fa.warn("Error signing out from Supabase:",k)}d.current=!1,a(null),typeof window<"u"&&(localStorage.removeItem("bank_token"),localStorage.removeItem("trdrhub_api_token"),localStorage.removeItem("exporter_token"),localStorage.removeItem("importer_token"),localStorage.removeItem("csrf_token"),localStorage.removeItem("demo_mode"),localStorage.removeItem("onboarding_completed"),sessionStorage.clear(),window.location.href="/login")},hasRole:k=>s?Array.isArray(k)?k.includes(s.role):s.role===k:!1,refreshUser:async()=>{l(!0);try{await j()}finally{l(!1)}}};return e.jsx(Vq.Provider,{value:A,children:t})}function Dt(){const t=m.useContext(Vq);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t}const SD=m.createContext(void 0),gde=new Set(["system_admin","tenant_admin"]),gL={system_admin:["*"],tenant_admin:["ops:read","ops:write","jobs:read","jobs:write","monitoring:read","feature_flags:read","feature_flags:write","billing:read","billing:write","users:read"]},vde="https://trdrhub-api.onrender.com";function jde({children:t}){const[s,a]=m.useState(null),[r,n]=m.useState([]),[i,l]=m.useState(!0),o=zt(),d=m.useCallback(y=>y?gL[y]?gL[y]:y==="system_admin"?["*"]:[]:[],[]),c=m.useCallback(async()=>{l(!0);try{const y=localStorage.getItem("trdrhub_api_token");if(!y)return a(null),n([]),null;const N=(await Ae.get("/auth/me",{headers:{Authorization:`Bearer ${y}`}})).data;if(!gde.has(N.role))throw localStorage.removeItem("trdrhub_api_token"),a(null),n([]),new Error("This account does not have admin permissions.");const C={id:N.id,name:N.full_name,email:N.email,role:N.role};return a(C),n(d(N.role)),C}catch(y){throw console.error("Admin auth check failed:",y),localStorage.removeItem("trdrhub_api_token"),a(null),n([]),y}finally{l(!1)}},[d]);m.useEffect(()=>{if(!localStorage.getItem("trdrhub_api_token")){l(!1);return}c().catch(()=>{})},[c]);const j={user:s,permissions:r,isLoading:i,isAuthenticated:!!s,login:async(y,b)=>{try{l(!0);const N=await Ae.post("/auth/login",{email:y,password:b},{baseURL:vde}),{access_token:C}=N.data||{};if(!C)throw new Error("Authentication failed. No access token returned.");localStorage.setItem("trdrhub_api_token",C),await c(),o("/admin")}catch(N){throw console.error("Login failed:",N),localStorage.removeItem("trdrhub_api_token"),N}finally{l(!1)}},logout:()=>{localStorage.removeItem("trdrhub_api_token"),a(null),n([]),o("/admin/login")},checkPermission:y=>r.includes("*")?!0:r.includes(y),hasAnyPermission:y=>r.includes("*")?!0:y.some(b=>r.includes(b))};return e.jsx(SD.Provider,{value:j,children:t})}function $j(){const t=m.useContext(SD);if(t===void 0)throw new Error("useAdminAuth must be used within an AdminAuthProvider");return t}const D1=async()=>(await Ae.get("/onboarding/status")).data,bde=async t=>(await Ae.put("/onboarding/progress",t)).data,Wq=m.createContext(void 0);function op(){const t=m.useContext(Wq);if(t===void 0)throw new Error("useOnboarding must be used within an OnboardingProvider");return t}function yde({children:t}){const{user:s}=Dt(),[a,r]=m.useState(null),[n,i]=m.useState(!0),l="".toLowerCase()==="true",o=async()=>{if(!s){r(l?{user_id:"guest",role:"exporter",company_id:null,completed:!0,step:null,status:"active",kyc_status:"none",required:{}}:null),i(!1);return}try{if(i(!0),l)r({user_id:s.id,role:s.role,company_id:null,completed:!0,step:null,status:"active",kyc_status:"none",required:{}});else{const x=await D1();r(x)}}catch(x){console.error("Failed to load onboarding status:",x),r(null)}finally{i(!1)}};m.useEffect(()=>{o()},[s]);const d=async x=>{try{if(l)return;const g=await bde(x);r(g)}catch(g){throw console.error("Failed to update onboarding progress:",g),g}},c=async()=>{await o()},u=lt.useMemo(()=>a?a.completed?(console.log("âœ… needsOnboarding: false (already completed)"),!1):a.company_id||a.details?.company?.name&&a.details?.company?.type?(console.log("âœ… needsOnboarding: false (has company info)",{company_id:a.company_id,company_name:a.details?.company?.name,company_type:a.details?.company?.type}),!1):(console.log("âš ï¸ needsOnboarding: true (no company info)",{completed:a.completed,company_id:a.company_id,details:a.details}),!a.completed):(console.log("ðŸš« needsOnboarding: false (no status)"),!1),[a]),h={status:a,isLoading:n,needsOnboarding:u,updateProgress:d,refreshStatus:c};return e.jsx(Wq.Provider,{value:h,children:t})}const Hq=m.createContext(void 0);function Nde({children:t}){const[s,a]=m.useState(()=>localStorage.getItem("lcopilot-theme")||"light"),[r,n]=m.useState("light");m.useEffect(()=>{const l=document.documentElement;let o;s==="system"?o=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":o=s,o==="dark"?l.classList.add("dark"):l.classList.remove("dark"),n(o)},[s]),m.useEffect(()=>{if(s!=="system")return;const l=window.matchMedia("(prefers-color-scheme: dark)"),o=d=>{const c=d.matches?"dark":"light";n(c),c==="dark"?document.documentElement.classList.add("dark"):document.documentElement.classList.remove("dark")};return l.addEventListener("change",o),()=>l.removeEventListener("change",o)},[s]);const i=l=>{a(l),localStorage.setItem("lcopilot-theme",l)};return e.jsx(Hq.Provider,{value:{theme:s,setTheme:i,resolvedTheme:r},children:t})}function Gq(){const t=m.useContext(Hq);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t}const wde=1,_de=1e6;let kk=0;function Cde(){return kk=(kk+1)%Number.MAX_SAFE_INTEGER,kk.toString()}const Ek=new Map,vL=t=>{if(Ek.has(t))return;const s=setTimeout(()=>{Ek.delete(t),V0({type:"REMOVE_TOAST",toastId:t})},_de);Ek.set(t,s)},Sde=(t,s)=>{switch(s.type){case"ADD_TOAST":return{...t,toasts:[s.toast,...t.toasts].slice(0,wde)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(a=>a.id===s.toast.id?{...a,...s.toast}:a)};case"DISMISS_TOAST":{const{toastId:a}=s;return a?vL(a):t.toasts.forEach(r=>{vL(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===a||a===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return s.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(a=>a.id!==s.toastId)}}},mw=[];let hw={toasts:[]};function V0(t){hw=Sde(hw,t),mw.forEach(s=>{s(hw)})}function kde({...t}){const s=Cde(),a=n=>V0({type:"UPDATE_TOAST",toast:{...n,id:s}}),r=()=>V0({type:"DISMISS_TOAST",toastId:s});return V0({type:"ADD_TOAST",toast:{...t,id:s,open:!0,onOpenChange:n=>{n||r()}}}),{id:s,dismiss:r,update:a}}function et(){const[t,s]=m.useState(hw);return m.useEffect(()=>(mw.push(s),()=>{const a=mw.indexOf(s);a>-1&&mw.splice(a,1)}),[t]),{...t,toast:kde,dismiss:a=>V0({type:"DISMISS_TOAST",toastId:a})}}var Ede={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Ade=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Se=(t,s)=>{const a=m.forwardRef(({color:r="currentColor",size:n=24,strokeWidth:i=2,absoluteStrokeWidth:l,children:o,...d},c)=>m.createElement("svg",{ref:c,...Ede,width:n,height:n,stroke:r,strokeWidth:l?Number(i)*24/Number(n):i,className:`lucide lucide-${Ade(t)}`,...d},[...s.map(([u,h])=>m.createElement(u,h)),...(Array.isArray(o)?o:[o])||[]]));return a.displayName=`${t}`,a},Wn=Se("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Pde=Se("AlarmClockOff",[["path",{d:"M6.87 6.87a8 8 0 1 0 11.26 11.26",key:"3on8tj"}],["path",{d:"M19.9 14.25a8 8 0 0 0-9.15-9.15",key:"15ghsc"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.26 18.67 4 21",key:"yzmioq"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4 4 2 6",key:"1ycko6"}]]),Dde=Se("AlarmClock",[["circle",{cx:"12",cy:"13",r:"8",key:"3y4lt7"}],["path",{d:"M12 9v4l2 2",key:"1c63tq"}],["path",{d:"M5 3 2 6",key:"18tl5t"}],["path",{d:"m22 6-3-3",key:"1opdir"}],["path",{d:"M6.38 18.7 4 21",key:"17xu3x"}],["path",{d:"M17.64 18.67 20 21",key:"kv2oe2"}]]),ks=Se("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),W0=Se("AlertOctagon",[["polygon",{points:"7.86 2 16.14 2 22 7.86 22 16.14 16.14 22 7.86 22 2 16.14 2 7.86 7.86 2",key:"h1p8hx"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ve=Se("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),bu=Se("Anchor",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["line",{x1:"12",x2:"12",y1:"22",y2:"8",key:"abakz7"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}]]),m5=Se("Archive",[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]]),kD=Se("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]),ma=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Jt=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Zm=Se("ArrowUpRight",[["path",{d:"M7 7h10v10",key:"1tivn9"}],["path",{d:"M7 17 17 7",key:"1vkiza"}]]),T1=Se("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]),ag=Se("Award",[["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}],["path",{d:"M15.477 12.89 17 22l-5-3-5 3 1.523-9.11",key:"em7aur"}]]),Tde=Se("BadgeCheck",[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),ED=Se("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]),Kq=Se("Banknote",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"2",key:"9lu3g6"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M6 12h.01M18 12h.01",key:"113zkx"}]]),Ws=Se("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),Yq=Se("BellOff",[["path",{d:"M8.7 3A6 6 0 0 1 18 8a21.3 21.3 0 0 0 .6 5",key:"o7mx20"}],["path",{d:"M17 17H3s3-2 3-9a4.67 4.67 0 0 1 .3-1.7",key:"16f1lm"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),$s=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]),yi=Se("BookOpen",[["path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z",key:"vv98re"}],["path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z",key:"1cyq3y"}]]),Fde=Se("Book",[["path",{d:"M4 19.5v-15A2.5 2.5 0 0 1 6.5 2H20v20H6.5a2.5 2.5 0 0 1 0-5H20",key:"t4utmx"}]]),Rde=Se("BookmarkCheck",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2Z",key:"169p4p"}],["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}]]),Zq=Se("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]),Ode=Se("Bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),Ide=Se("Box",[["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Lde=Se("BrainCircuit",[["path",{d:"M12 4.5a2.5 2.5 0 0 0-4.96-.46 2.5 2.5 0 0 0-1.98 3 2.5 2.5 0 0 0-1.32 4.24 3 3 0 0 0 .34 5.58 2.5 2.5 0 0 0 2.96 3.08 2.5 2.5 0 0 0 4.91.05L12 20V4.5Z",key:"ixwj2a"}],["path",{d:"M16 8V5c0-1.1.9-2 2-2",key:"13dx7u"}],["path",{d:"M12 13h4",key:"1ku699"}],["path",{d:"M12 18h6a2 2 0 0 1 2 2v1",key:"105ag5"}],["path",{d:"M12 8h8",key:"1lhi5i"}],["path",{d:"M20.5 8a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1s25gz"}],["path",{d:"M16.5 13a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"127460"}],["path",{d:"M20.5 21a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"fys062"}],["path",{d:"M18.5 3a.5.5 0 1 1-1 0 .5.5 0 0 1 1 0Z",key:"1vib61"}]]),bh=Se("Brain",[["path",{d:"M9.5 2A2.5 2.5 0 0 1 12 4.5v15a2.5 2.5 0 0 1-4.96.44 2.5 2.5 0 0 1-2.96-3.08 3 3 0 0 1-.34-5.58 2.5 2.5 0 0 1 1.32-4.24 2.5 2.5 0 0 1 1.98-3A2.5 2.5 0 0 1 9.5 2Z",key:"1mhkh5"}],["path",{d:"M14.5 2A2.5 2.5 0 0 0 12 4.5v15a2.5 2.5 0 0 0 4.96.44 2.5 2.5 0 0 0 2.96-3.08 3 3 0 0 0 .34-5.58 2.5 2.5 0 0 0-1.32-4.24 2.5 2.5 0 0 0-1.98-3A2.5 2.5 0 0 0 14.5 2Z",key:"1d6s00"}]]),Bs=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),cp=Se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),Mde=Se("Cable",[["path",{d:"M4 9a2 2 0 0 1-2-2V5h6v2a2 2 0 0 1-2 2Z",key:"1s6oa5"}],["path",{d:"M3 5V3",key:"1k5hjh"}],["path",{d:"M7 5V3",key:"1t1388"}],["path",{d:"M19 15V6.5a3.5 3.5 0 0 0-7 0v11a3.5 3.5 0 0 1-7 0V9",key:"1ytv72"}],["path",{d:"M17 21v-2",key:"ds4u3f"}],["path",{d:"M21 21v-2",key:"eo0ou"}],["path",{d:"M22 19h-6v-2a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2Z",key:"sdz6o8"}]]),kc=Se("Calculator",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]]),ya=Se("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Qs=Se("CheckCircle2",[["path",{d:"M12 22c5.523 0 10-4.477 10-10S17.523 2 12 2 2 6.477 2 12s4.477 10 10 10z",key:"14v8dr"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),Oe=Se("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Bde=Se("CheckSquare",[["polyline",{points:"9 11 12 14 22 4",key:"19ybtz"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]),Za=Se("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),ja=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Uj=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),xr=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),yh=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]),Jq=Se("ChevronsUpDown",[["path",{d:"m7 15 5 5 5-5",key:"1hf1tw"}],["path",{d:"m7 9 5-5 5 5",key:"sgt6xg"}]]),Qq=Se("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),h5=Se("ClipboardCheck",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"m9 14 2 2 4-4",key:"df797q"}]]),mt=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Xq=Se("Code2",[["path",{d:"m18 16 4-4-4-4",key:"1inbqp"}],["path",{d:"m6 8-4 4 4 4",key:"15zrgr"}],["path",{d:"m14.5 4-5 16",key:"e7oirm"}]]),$de=Se("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ude=Se("Coffee",[["path",{d:"M17 8h1a4 4 0 1 1 0 8h-1",key:"jx4kbh"}],["path",{d:"M3 8h14v9a4 4 0 0 1-4 4H7a4 4 0 0 1-4-4Z",key:"1bxrl0"}],["line",{x1:"6",x2:"6",y1:"2",y2:"4",key:"1cr9l3"}],["line",{x1:"10",x2:"10",y1:"2",y2:"4",key:"170wym"}],["line",{x1:"14",x2:"14",y1:"2",y2:"4",key:"1c5f70"}]]),zde=Se("Coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),li=Se("Container",[["path",{d:"M22 7.7c0-.6-.4-1.2-.8-1.5l-6.3-3.9a1.72 1.72 0 0 0-1.7 0l-10.3 6c-.5.2-.9.8-.9 1.4v6.6c0 .5.4 1.2.8 1.5l6.3 3.9a1.72 1.72 0 0 0 1.7 0l10.3-6c.5-.3.9-1 .9-1.5Z",key:"1t2lqe"}],["path",{d:"M10 21.9V14L2.1 9.1",key:"o7czzq"}],["path",{d:"m10 14 11.9-6.9",key:"zm5e20"}],["path",{d:"M14 19.8v-8.1",key:"159ecu"}],["path",{d:"M18 17.5V9.4",key:"11uown"}]]),qa=Se("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),zj=Se("Cpu",[["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"9",y:"9",width:"6",height:"6",key:"o3kz5p"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]]),pn=Se("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Jm=Se("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]),qde=Se("DatabaseZap",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 15 21.84",key:"14ibmq"}],["path",{d:"M21 5V8",key:"1marbg"}],["path",{d:"M21 12L18 17H22L19 22",key:"zafso"}],["path",{d:"M3 12A9 3 0 0 0 14.59 14.87",key:"1y4wr8"}]]),Qm=Se("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Na=Se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Gt=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vde=Se("Equal",[["line",{x1:"5",x2:"19",y1:"9",y2:"9",key:"1nwqeh"}],["line",{x1:"5",x2:"19",y1:"15",y2:"15",key:"g8yjpy"}]]),ir=Se("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),yd=Se("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Da=Se("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),AD=Se("Factory",[["path",{d:"M2 20a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V8l-7 5V8l-7 5V4a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2Z",key:"159hny"}],["path",{d:"M17 18h1",key:"uldtlt"}],["path",{d:"M12 18h1",key:"s9uhes"}],["path",{d:"M7 18h1",key:"1neino"}]]),Gs=Se("FileCheck",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),eV=Se("FileCode",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"m10 13-2 2 2 2",key:"17smn8"}],["path",{d:"m14 17 2-2-2-2",key:"14mezr"}]]),Wde=Se("FileDiff",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M12 13V7",key:"h0r20n"}],["path",{d:"M9 10h6",key:"9gxzsh"}],["path",{d:"M9 17h6",key:"r8uit2"}]]),Hde=Se("FileDown",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M12 18v-6",key:"17g6i2"}],["path",{d:"m9 15 3 3 3-3",key:"1npd3o"}]]),$w=Se("FileEdit",[["path",{d:"M4 13.5V4a2 2 0 0 1 2-2h8.5L20 7.5V20a2 2 0 0 1-2 2h-5.5",key:"1bg6eb"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M10.42 12.61a2.1 2.1 0 1 1 2.97 2.97L7.95 21 4 22l.99-3.95 5.43-5.44Z",key:"1rgxu8"}]]),Gde=Se("FileSignature",[["path",{d:"M20 19.5v.5a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8.5L18 5.5",key:"kd5d3"}],["path",{d:"M8 18h1",key:"13wk12"}],["path",{d:"M18.42 9.61a2.1 2.1 0 1 1 2.97 2.97L16.95 17 13 18l.99-3.95 4.43-4.44Z",key:"johvi5"}]]),zm=Se("FileSpreadsheet",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["path",{d:"M8 13h2",key:"yr2amv"}],["path",{d:"M8 17h2",key:"2yhykz"}],["path",{d:"M14 13h2",key:"un5t4a"}],["path",{d:"M14 17h2",key:"10kma7"}]]),Be=Se("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),tV=Se("FileWarning",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),F1=Se("FileX",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"9.5",x2:"14.5",y1:"12.5",y2:"17.5",key:"izs6du"}],["line",{x1:"14.5",x2:"9.5",y1:"12.5",y2:"17.5",key:"1lehlj"}]]),Kde=Se("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Yde=Se("Files",[["path",{d:"M15.5 2H8.6c-.4 0-.8.2-1.1.5-.3.3-.5.7-.5 1.1v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8c.4 0 .8-.2 1.1-.5.3-.3.5-.7.5-1.1V6.5L15.5 2z",key:"cennsq"}],["path",{d:"M3 7.6v12.8c0 .4.2.8.5 1.1.3.3.7.5 1.1.5h9.8",key:"ms809a"}],["path",{d:"M15 2v5h5",key:"qq6kwv"}]]),Nd=Se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Zde=Se("Fish",[["path",{d:"M6.5 12c.94-3.46 4.94-6 8.5-6 3.56 0 6.06 2.54 7 6-.94 3.47-3.44 6-7 6s-7.56-2.53-8.5-6Z",key:"15baut"}],["path",{d:"M18 12v.5",key:"18hhni"}],["path",{d:"M16 17.93a9.77 9.77 0 0 1 0-11.86",key:"16dt7o"}],["path",{d:"M7 10.67C7 8 5.58 5.97 2.73 5.5c-1 1.5-1 5 .23 6.5-1.24 1.5-1.24 5-.23 6.5C5.58 18.03 7 16 7 13.33",key:"l9di03"}],["path",{d:"M10.46 7.26C10.2 5.88 9.17 4.24 8 3h5.8a2 2 0 0 1 1.98 1.67l.23 1.4",key:"1kjonw"}],["path",{d:"m16.01 17.93-.23 1.4A2 2 0 0 1 13.8 21H9.5a5.96 5.96 0 0 0 1.49-3.98",key:"1zlm23"}]]),rg=Se("Flag",[["path",{d:"M4 15s1-1 4-1 5 2 8 2 4-1 4-1V3s-1 1-4 1-5-2-8-2-4 1-4 1z",key:"i9b6wo"}],["line",{x1:"4",x2:"4",y1:"22",y2:"15",key:"1cm3nv"}]]),sV=Se("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Jde=Se("FolderGit2",[["path",{d:"M9 20H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h3.9a2 2 0 0 1 1.69.9l.81 1.2a2 2 0 0 0 1.67.9H20a2 2 0 0 1 2 2v5",key:"1w6njk"}],["circle",{cx:"13",cy:"12",r:"2",key:"1j92g6"}],["path",{d:"M18 19c-2.8 0-5-2.2-5-5v8",key:"pkpw2h"}],["circle",{cx:"20",cy:"19",r:"2",key:"1obnsp"}]]),R1=Se("FolderKanban",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M12 10v2",key:"hh53o1"}],["path",{d:"M16 10v6",key:"1d6xys"}]]),aV=Se("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Qde=Se("Folder",[["path",{d:"M4 20h16a2 2 0 0 0 2-2V8a2 2 0 0 0-2-2h-7.93a2 2 0 0 1-1.66-.9l-.82-1.2A2 2 0 0 0 7.93 3H4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2Z",key:"1fr9dc"}]]),Xde=Se("Fuel",[["line",{x1:"3",x2:"15",y1:"22",y2:"22",key:"xegly4"}],["line",{x1:"4",x2:"14",y1:"9",y2:"9",key:"xcnuvu"}],["path",{d:"M14 22V4a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v18",key:"16j0yd"}],["path",{d:"M14 13h2a2 2 0 0 1 2 2v2a2 2 0 0 0 2 2h0a2 2 0 0 0 2-2V9.83a2 2 0 0 0-.59-1.42L18 5",key:"8ur5zv"}]]),rV=Se("Gauge",[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]]),eue=Se("Gavel",[["path",{d:"m14 13-7.5 7.5c-.83.83-2.17.83-3 0 0 0 0 0 0 0a2.12 2.12 0 0 1 0-3L11 10",key:"c9cbz0"}],["path",{d:"m16 16 6-6",key:"vzrcl6"}],["path",{d:"m8 8 6-6",key:"18bi4p"}],["path",{d:"m9 7 8 8",key:"5jnvq1"}],["path",{d:"m21 11-8-8",key:"z4y7zo"}]]),jL=Se("Gem",[["path",{d:"M6 3h12l4 6-10 13L2 9Z",key:"1pcd5k"}],["path",{d:"M11 3 8 9l4 13 4-13-3-6",key:"1fcu3u"}],["path",{d:"M2 9h20",key:"16fsjt"}]]),nV=Se("Gift",[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]]),qm=Se("GitBranch",[["line",{x1:"6",x2:"6",y1:"3",y2:"15",key:"17qcm7"}],["circle",{cx:"18",cy:"6",r:"3",key:"1h7g24"}],["circle",{cx:"6",cy:"18",r:"3",key:"fqmcym"}],["path",{d:"M18 9a9 9 0 0 1-9 9",key:"n2h4wq"}]]),tue=Se("GitCommit",[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]]),Uw=Se("GitCompare",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]]),sue=Se("GitMerge",[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M6 21V9a9 9 0 0 0 9 9",key:"7kw0sc"}]]),qj=Se("Globe2",[["path",{d:"M21.54 15H17a2 2 0 0 0-2 2v4.54",key:"1djwo0"}],["path",{d:"M7 3.34V5a3 3 0 0 0 3 3v0a2 2 0 0 1 2 2v0c0 1.1.9 2 2 2v0a2 2 0 0 0 2-2v0c0-1.1.9-2 2-2h3.17",key:"1fi5u6"}],["path",{d:"M11 21.95V18a2 2 0 0 0-2-2v0a2 2 0 0 1-2-2v-1a2 2 0 0 0-2-2H2.05",key:"xsiumc"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),ha=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"2",x2:"22",y1:"12",y2:"12",key:"1dnqot"}],["path",{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z",key:"nb9nel"}]]),aue=Se("Hash",[["line",{x1:"4",x2:"20",y1:"9",y2:"9",key:"4lhtct"}],["line",{x1:"4",x2:"20",y1:"15",y2:"15",key:"vyu0kd"}],["line",{x1:"10",x2:"8",y1:"3",y2:"21",key:"1ggp8o"}],["line",{x1:"16",x2:"14",y1:"3",y2:"21",key:"weycgp"}]]),rue=Se("HeartHandshake",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}],["path",{d:"M12 5 9.04 7.96a2.17 2.17 0 0 0 0 3.08v0c.82.82 2.13.85 3 .07l2.07-1.9a2.82 2.82 0 0 1 3.79 0l2.96 2.66",key:"12sd6o"}],["path",{d:"m18 15-2-2",key:"60u0ii"}],["path",{d:"m15 18-2-2",key:"6p76be"}]]),nue=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Pn=Se("HelpCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),xn=Se("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]),ej=Se("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]),PD=Se("Import",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m8 11 4 4 4-4",key:"1dohi6"}],["path",{d:"M8 5H4a2 2 0 0 0-2 2v10a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-4",key:"1ywtjm"}]]),Ja=Se("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),iV=Se("KeyRound",[["path",{d:"M2 18v3c0 .6.4 1 1 1h4v-3h3v-3h2l1.4-1.4a6.5 6.5 0 1 0-4-4Z",key:"167ctg"}],["circle",{cx:"16.5",cy:"7.5",r:".5",key:"1kog09"}]]),Sc=Se("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]),Pf=Se("Landmark",[["line",{x1:"3",x2:"21",y1:"22",y2:"22",key:"j8o0r"}],["line",{x1:"6",x2:"6",y1:"18",y2:"11",key:"10tf0k"}],["line",{x1:"10",x2:"10",y1:"18",y2:"11",key:"54lgf6"}],["line",{x1:"14",x2:"14",y1:"18",y2:"11",key:"380y"}],["line",{x1:"18",x2:"18",y1:"18",y2:"11",key:"1kevvc"}],["polygon",{points:"12 2 20 7 4 7",key:"jkujk7"}]]),zw=Se("Languages",[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]]),O1=Se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]),I1=Se("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),iue=Se("LayoutGrid",[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]]),lue=Se("LayoutTemplate",[["rect",{width:"18",height:"7",x:"3",y:"3",rx:"1",key:"f1a2em"}],["rect",{width:"9",height:"7",x:"3",y:"14",rx:"1",key:"jqznyg"}],["rect",{width:"5",height:"7",x:"16",y:"14",rx:"1",key:"q5h2i8"}]]),oue=Se("Layout",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"3",x2:"21",y1:"9",y2:"9",key:"1vqk6q"}],["line",{x1:"9",x2:"9",y1:"21",y2:"9",key:"wpwpyp"}]]),cue=Se("Leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),DD=Se("Library",[["path",{d:"m16 6 4 14",key:"ji33uf"}],["path",{d:"M12 6v14",key:"1n7gus"}],["path",{d:"M8 8v12",key:"1gg7y9"}],["path",{d:"M4 4v16",key:"6qkkli"}]]),Xm=Se("Lightbulb",[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]]),ng=Se("LineChart",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"m19 9-5 5-4-4-3 3",key:"2osh9i"}]]),due=Se("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]),uue=Se("ListChecks",[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]]),ct=Se("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),$o=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Yo=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Va=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),oi=Se("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),mue=Se("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),TD=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]),hue=Se("Merge",[["path",{d:"m8 6 4-4 4 4",key:"ybng9g"}],["path",{d:"M12 2v10.3a4 4 0 0 1-1.172 2.872L4 22",key:"1hyw0i"}],["path",{d:"m20 22-5-5",key:"1m27yz"}]]),eh=Se("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Lg=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]),Nh=Se("Minus",[["path",{d:"M5 12h14",key:"1ays0h"}]]),lV=Se("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),qw=Se("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Vj=Se("MoreHorizontal",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]]),dp=Se("MoreVertical",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"12",cy:"5",r:"1",key:"gxeob9"}],["circle",{cx:"12",cy:"19",r:"1",key:"lyex9k"}]]),tj=Se("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]),xue=Se("Network",[["rect",{x:"16",y:"16",width:"6",height:"6",rx:"1",key:"4q2zg0"}],["rect",{x:"2",y:"16",width:"6",height:"6",rx:"1",key:"8cvhb9"}],["rect",{x:"9",y:"2",width:"6",height:"6",rx:"1",key:"1egb70"}],["path",{d:"M5 16v-3a1 1 0 0 1 1-1h12a1 1 0 0 1 1 1v3",key:"1jsf9p"}],["path",{d:"M12 12V8",key:"2874zd"}]]),pue=Se("PackageOpen",[["path",{d:"M20.91 8.84 8.56 2.23a1.93 1.93 0 0 0-1.81 0L3.1 4.13a2.12 2.12 0 0 0-.05 3.69l12.22 6.93a2 2 0 0 0 1.94 0L21 12.51a2.12 2.12 0 0 0-.09-3.67Z",key:"1vy178"}],["path",{d:"m3.09 8.84 12.35-6.61a1.93 1.93 0 0 1 1.81 0l3.65 1.9a2.12 2.12 0 0 1 .1 3.69L8.73 14.75a2 2 0 0 1-1.94 0L3 12.51a2.12 2.12 0 0 1 .09-3.67Z",key:"s3bv25"}],["line",{x1:"12",x2:"12",y1:"22",y2:"13",key:"1o4xyi"}],["path",{d:"M20 13.5v3.37a2.06 2.06 0 0 1-1.11 1.83l-6 3.08a1.93 1.93 0 0 1-1.78 0l-6-3.08A2.06 2.06 0 0 1 4 16.87V13.5",key:"1na2nq"}]]),Ps=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]),Wj=Se("Palette",[["circle",{cx:"13.5",cy:"6.5",r:".5",key:"1xcu5"}],["circle",{cx:"17.5",cy:"10.5",r:".5",key:"736e4u"}],["circle",{cx:"8.5",cy:"7.5",r:".5",key:"clrty"}],["circle",{cx:"6.5",cy:"12.5",r:".5",key:"1s4xz9"}],["path",{d:"M12 2C6.5 2 2 6.5 2 12s4.5 10 10 10c.926 0 1.648-.746 1.648-1.688 0-.437-.18-.835-.437-1.125-.29-.289-.438-.652-.438-1.125a1.64 1.64 0 0 1 1.668-1.668h1.996c3.051 0 5.555-2.503 5.555-5.554C21.965 6.012 17.461 2 12 2z",key:"12rzf8"}]]),fue=Se("PanelLeft",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["line",{x1:"9",x2:"9",y1:"3",y2:"21",key:"13tij5"}]]),gue=Se("Pause",[["rect",{width:"4",height:"16",x:"6",y:"4",key:"iffhe4"}],["rect",{width:"4",height:"16",x:"14",y:"4",key:"sjin7j"}]]),th=Se("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),zn=Se("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),oV=Se("PenTool",[["path",{d:"m12 19 7-7 3 3-7 7-3-3z",key:"rklqx2"}],["path",{d:"m18 13-1.5-7.5L2 2l3.5 14.5L13 18l5-5z",key:"1et58u"}],["path",{d:"m2 2 7.586 7.586",key:"etlp93"}],["circle",{cx:"11",cy:"11",r:"2",key:"xmgehs"}]]),vue=Se("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]),Vw=Se("Percent",[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]]),L1=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]),io=Se("PieChart",[["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}],["path",{d:"M22 12A10 10 0 0 0 12 2v10z",key:"1rfc4y"}]]),jue=Se("PlayCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]]),Ww=Se("Play",[["polygon",{points:"5 3 19 12 5 21 5 3",key:"191637"}]]),bue=Se("Plug",[["path",{d:"M12 22v-5",key:"1ega77"}],["path",{d:"M9 8V2",key:"14iosj"}],["path",{d:"M15 8V2",key:"18g5xt"}],["path",{d:"M18 8v5a4 4 0 0 1-4 4h-4a4 4 0 0 1-4-4V8Z",key:"osxo6l"}]]),Yt=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),FD=Se("Printer",[["polyline",{points:"6 9 6 2 18 2 18 9",key:"1306q4"}],["path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2",key:"143wyd"}],["rect",{width:"12",height:"8",x:"6",y:"14",key:"5ipwut"}]]),Df=Se("Radio",[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]]),Fu=Se("Receipt",[["path",{d:"M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1-2-1Z",key:"wqdwcb"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 17V7",key:"pyj7ub"}]]),Lt=Se("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),yu=Se("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]),yue=Se("Ruler",[["path",{d:"M21.3 15.3a2.4 2.4 0 0 1 0 3.4l-2.6 2.6a2.4 2.4 0 0 1-3.4 0L2.7 8.7a2.41 2.41 0 0 1 0-3.4l2.6-2.6a2.41 2.41 0 0 1 3.4 0Z",key:"icamh8"}],["path",{d:"m14.5 12.5 2-2",key:"inckbg"}],["path",{d:"m11.5 9.5 2-2",key:"fmmyf7"}],["path",{d:"m8.5 6.5 2-2",key:"vc6u1g"}],["path",{d:"m17.5 15.5 2-2",key:"wo5hmg"}]]),Bi=Se("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]),El=Se("Scale",[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]]),Nue=Se("ScrollText",[["path",{d:"M8 21h12a2 2 0 0 0 2-2v-2H10v2a2 2 0 1 1-4 0V5a2 2 0 1 0-4 0v3h4",key:"13a6an"}],["path",{d:"M19 17V5a2 2 0 0 0-2-2H4",key:"zz82l3"}],["path",{d:"M15 8h-5",key:"1khuty"}],["path",{d:"M15 12h-5",key:"r7krc0"}]]),Bt=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),$i=Se("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),M1=Se("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),cV=Se("Settings2",[["path",{d:"M20 7h-9",key:"3s1dr2"}],["path",{d:"M14 17H5",key:"gfn3mx"}],["circle",{cx:"17",cy:"17",r:"3",key:"18b49y"}],["circle",{cx:"7",cy:"7",r:"3",key:"dfmy0x"}]]),sn=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),up=Se("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]),sj=Se("ShieldAlert",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]]),bi=Se("ShieldCheck",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]),wue=Se("ShieldHalf",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M12 22V2",key:"zs6s6o"}]]),_ue=Se("ShieldOff",[["path",{d:"M19.7 14a6.9 6.9 0 0 0 .3-2V5l-8-3-3.2 1.2",key:"342pvf"}],["path",{d:"m2 2 20 20",key:"1ooewy"}],["path",{d:"M4.7 4.7 4 5v7c0 6 8 10 8 10a20.3 20.3 0 0 0 5.62-4.38",key:"p0ycf4"}]]),Cue=Se("ShieldQuestion",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"M9.1 9a3 3 0 0 1 5.82 1c0 2-3 3-3 3",key:"mhlwft"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),x5=Se("ShieldX",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}],["path",{d:"m14.5 9-5 5",key:"1m49dw"}],["path",{d:"m9.5 9 5 5",key:"wyx7zg"}]]),Ot=Se("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]]),Us=Se("Ship",[["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1 .6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"iegodh"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-9-4-9 4c0 2.9.94 5.34 2.81 7.76",key:"fp8vka"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M12 10v4",key:"1kjpxc"}],["path",{d:"M12 2v3",key:"qbqxhf"}]]),RD=Se("Shirt",[["path",{d:"M20.38 3.46 16 2a4 4 0 0 1-8 0L3.62 3.46a2 2 0 0 0-1.34 2.23l.58 3.47a1 1 0 0 0 .99.84H6v10c0 1.1.9 2 2 2h8a2 2 0 0 0 2-2V10h2.15a1 1 0 0 0 .99-.84l.58-3.47a2 2 0 0 0-1.34-2.23z",key:"1wgbhj"}]]),Sue=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]),Hw=Se("Smartphone",[["rect",{width:"14",height:"20",x:"5",y:"2",rx:"2",ry:"2",key:"1yt0o3"}],["path",{d:"M12 18h.01",key:"mhygvu"}]]),ni=Se("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),dV=Se("Stamp",[["path",{d:"M5 22h14",key:"ehvnwv"}],["path",{d:"M19.27 13.73A2.5 2.5 0 0 0 17.5 13h-11A2.5 2.5 0 0 0 4 15.5V17a1 1 0 0 0 1 1h14a1 1 0 0 0 1-1v-1.5c0-.66-.26-1.3-.73-1.77Z",key:"1sy9ra"}],["path",{d:"M14 13V8.5C14 7 15 7 15 5a3 3 0 0 0-3-3c-1.66 0-3 1-3 3s1 2 1 3.5V13",key:"cnxgux"}]]),B1=Se("StarOff",[["path",{d:"M8.34 8.34 2 9.27l5 4.87L5.82 21 12 17.77 18.18 21l-.59-3.43",key:"16m0ql"}],["path",{d:"M18.42 12.76 22 9.27l-6.91-1L12 2l-1.44 2.91",key:"1vt8nq"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),nl=Se("Star",[["polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2",key:"8f66p6"}]]),uV=Se("StopCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["rect",{width:"6",height:"6",x:"9",y:"9",key:"1wrtvo"}]]),Gw=Se("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),kue=Se("Table2",[["path",{d:"M9 3H5a2 2 0 0 0-2 2v4m6-6h10a2 2 0 0 1 2 2v4M9 3v18m0 0h10a2 2 0 0 0 2-2V9M9 21H5a2 2 0 0 1-2-2V9m0 0h18",key:"gugj83"}]]),Eue=Se("Table",[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]]),Aue=Se("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]),aj=Se("Target",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]]),mV=Se("Terminal",[["polyline",{points:"4 17 10 11 4 5",key:"akl6gq"}],["line",{x1:"12",x2:"20",y1:"19",y2:"19",key:"q2wloq"}]]),OD=Se("TestTube",[["path",{d:"M14.5 2v17.5c0 1.4-1.1 2.5-2.5 2.5h0c-1.4 0-2.5-1.1-2.5-2.5V2",key:"187lwq"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M14.5 16h-5",key:"1ox875"}]]),hV=Se("Timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]),Pue=Se("ToggleLeft",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"8",cy:"12",r:"2",key:"1nvbw3"}]]),Due=Se("ToggleRight",[["rect",{width:"20",height:"12",x:"2",y:"6",rx:"6",ry:"6",key:"f2vt7d"}],["circle",{cx:"16",cy:"12",r:"2",key:"4ma0v8"}]]),ia=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),lr=Se("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),Vt=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),Mx=Se("Truck",[["path",{d:"M5 18H3c-.6 0-1-.4-1-1V7c0-.6.4-1 1-1h10c.6 0 1 .4 1 1v11",key:"hs4xqm"}],["path",{d:"M14 9h4l4 4v4c0 .6-.4 1-1 1h-2",key:"11fp61"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}]]),Tue=Se("Type",[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]]),ID=Se("Umbrella",[["path",{d:"M22 12a10.06 10.06 1 0 0-20 0Z",key:"1teyop"}],["path",{d:"M12 12v8a2 2 0 0 0 4 0",key:"ulpmoc"}],["path",{d:"M12 2v1",key:"11qlp1"}]]),Fue=Se("Unlock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]]),Hs=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Rue=Se("UserCog",[["circle",{cx:"18",cy:"15",r:"3",key:"gjjjvw"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M10 15H6a4 4 0 0 0-4 4v2",key:"1nfge6"}],["path",{d:"m21.7 16.4-.9-.3",key:"12j9ji"}],["path",{d:"m15.2 13.9-.9-.3",key:"1fdjdi"}],["path",{d:"m16.6 18.7.3-.9",key:"heedtr"}],["path",{d:"m19.1 12.2.3-.9",key:"1af3ki"}],["path",{d:"m19.6 18.7-.4-1",key:"1x9vze"}],["path",{d:"m16.8 12.3-.4-1",key:"vqeiwj"}],["path",{d:"m14.3 16.6 1-.4",key:"1qlj63"}],["path",{d:"m20.7 13.8 1-.4",key:"1v5t8k"}]]),xV=Se("UserMinus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),sh=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Ec=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),xs=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),Oue=Se("Waves",[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]]),LD=Se("Webhook",[["path",{d:"M18 16.98h-5.99c-1.1 0-1.95.94-2.48 1.9A4 4 0 0 1 2 17c.01-.7.2-1.4.57-2",key:"q3hayz"}],["path",{d:"m6 17 3.13-5.78c.53-.97.1-2.18-.5-3.1a4 4 0 1 1 6.89-4.06",key:"1go1hn"}],["path",{d:"m12 6 3.13 5.73C15.66 12.7 16.9 13 18 13a4 4 0 0 1 0 8",key:"qlwsc0"}]]),Iue=Se("Weight",[["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}],["path",{d:"M6.5 8a2 2 0 0 0-1.905 1.46L2.1 18.5A2 2 0 0 0 4 21h16a2 2 0 0 0 1.925-2.54L19.4 9.5A2 2 0 0 0 17.48 8Z",key:"56o5sh"}]]),pV=Se("Wheat",[["path",{d:"M2 22 16 8",key:"60hf96"}],["path",{d:"M3.47 12.53 5 11l1.53 1.53a3.5 3.5 0 0 1 0 4.94L5 19l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1rdhi6"}],["path",{d:"M7.47 8.53 9 7l1.53 1.53a3.5 3.5 0 0 1 0 4.94L9 15l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"1sdzmb"}],["path",{d:"M11.47 4.53 13 3l1.53 1.53a3.5 3.5 0 0 1 0 4.94L13 11l-1.53-1.53a3.5 3.5 0 0 1 0-4.94Z",key:"eoatbi"}],["path",{d:"M20 2h2v2a4 4 0 0 1-4 4h-2V6a4 4 0 0 1 4-4Z",key:"19rau1"}],["path",{d:"M11.47 17.47 13 19l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L5 19l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"tc8ph9"}],["path",{d:"M15.47 13.47 17 15l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L9 15l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"2m8kc5"}],["path",{d:"M19.47 9.47 21 11l-1.53 1.53a3.5 3.5 0 0 1-4.94 0L13 11l1.53-1.53a3.5 3.5 0 0 1 4.94 0Z",key:"vex3ng"}]]),Lue=Se("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),Mue=Se("Workflow",[["rect",{width:"8",height:"8",x:"3",y:"3",rx:"2",key:"by2w9f"}],["path",{d:"M7 11v4a2 2 0 0 0 2 2h4",key:"xkn7yn"}],["rect",{width:"8",height:"8",x:"13",y:"13",rx:"2",key:"1cgmvn"}]]),fV=Se("Wrench",[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]]),bs=Se("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),fn=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gn=Se("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),hr=t=>{if(typeof structuredClone=="function")try{return structuredClone(t)}catch(s){console.warn("structuredClone failed for admin mock data, falling back to manual clone",s)}if(Array.isArray(t))return t.map(s=>typeof s=="function"?s:hr(s));if(t&&typeof t=="object"){const s={};for(const[a,r]of Object.entries(t))s[a]=r&&typeof r=="object"?hr(r):r;return s}return t},Fi=()=>Math.random().toString(36).slice(2,10),La=()=>new Date().toISOString();function ps(t,s){return new Date(new Date(t).getTime()+s*6e4).toISOString()}const Bue={page:1,pageSize:10},Xv=[{id:"super_admin",name:"Super Admin",description:"Full platform access",permissions:["*"]},{id:"admin",name:"Administrator",description:"Manage operations and users",permissions:["admin:read","ops:read","jobs:read","alerts:read","alerts:write","users:read","users:write","api_keys:read","api_keys:write","sessions:read","sessions:write","feature_flags:read","feature_flags:write","settings:read","settings:write"]},{id:"auditor",name:"Auditor",description:"View-only compliance and audit data",permissions:["admin:read","audit:read","approvals:read","compliance:read","legal_holds:read","releases:read","settings:read"]},{id:"support",name:"Support",description:"Assist customers with limited write access",permissions:["admin:read","ops:read","jobs:read","jobs:write","alerts:read","alerts:write","sessions:read","sessions:write"],editable:!0},{id:"billing",name:"Billing",description:"Manage billing and disputes",permissions:["billing:read","billing:write","billing_adjustments:write","disputes:read","billing_disputes:write"],editable:!0},{id:"viewer",name:"Viewer",description:"Read-only access to overview and reports",permissions:["admin:read","ops:read","audit:read"],editable:!0}];class $ue{kpis;opsMetrics;jobs;alerts;auditLogs;approvals;compliance;users;apiKeys;sessions;billingPlans;billingAdjustments;billingDisputes;partners;connectors;webhooks;prompts;budgets;evaluations;residencyPolicies;retentionSchedules;legalHolds;featureFlags;releases;settings;adminAudit;rulesets;rules;rulesetAudit;constructor(){const s=La();this.kpis=[{id:"active-clients",label:"Active Clients",value:"128",change:12,changeLabel:"+12% vs last month",changeDirection:"up",icon:xs,href:"partners-registry"},{id:"uptime",label:"Platform Uptime",value:"99.97%",change:.01,changeLabel:"+0.01%",changeDirection:"up",icon:Wn,href:"ops-monitoring"},{id:"alerts",label:"Open Alerts",value:"6",change:-3,changeLabel:"3 resolved this week",changeDirection:"down",icon:Ve,href:"ops-alerts"},{id:"approvals",label:"Pending Approvals",value:"9",change:2,changeLabel:"+2 awaiting review",changeDirection:"up",icon:bi,href:"audit-approvals"},{id:"revenue",label:"MRR",value:"$482K",change:8,changeLabel:"+8% vs last month",changeDirection:"up",icon:Na,href:"billing-plans"},{id:"slo",label:"SLO Compliance",value:"98.3%",change:-.4,changeLabel:"Slightly below target",changeDirection:"down",icon:Qs,href:"ops-monitoring"}],this.opsMetrics=[{id:"uptime",name:"Uptime",value:99.97,unit:"%",change:.01,trend:"up",target:99.95},{id:"latency",name:"p95 Latency",value:245,unit:"ms",change:-12,trend:"down",target:300},{id:"errors",name:"Error Rate",value:.12,unit:"%",change:-.05,trend:"down",target:.5},{id:"queue-depth",name:"Queue Depth",value:34,change:5,trend:"up",target:50}],this.jobs=Array.from({length:32}).map((r,n)=>{const i=["queued","running","succeeded","failed","scheduled"],l=i[n%i.length],o=ps(s,-n*30),d=l==="queued"?void 0:ps(o,1),c=["succeeded","failed"].includes(l)?ps(o,5+n):void 0;return{id:`job-${n+1}`,name:["Daily Settlement","Fraud Sweep","Email Digest","Data Sync"][n%4],type:["cron","workflow","ingest"][n%3],status:l,queue:["critical","standard","bulk"][n%3],retries:n%3,maxRetries:5,createdAt:o,startedAt:d,completedAt:c,nextRunAt:l==="scheduled"?ps(s,n%16*15):void 0,durationMs:c&&d?new Date(c).getTime()-new Date(d).getTime():void 0,metadata:{shard:`cluster-${n%4+1}`}}}),this.alerts=Array.from({length:15}).map((r,n)=>{const i=["critical","high","medium","low","info"],l=ps(s,-n*20),o=n%3===0?ps(l,5):void 0,d=n%5===0?ps(l,15):void 0;return{id:`alert-${n+1}`,title:["Payment latency spike","High error rate in ingestion","New anomaly detected","Partner API degradation"][n%4],severity:i[n%i.length],source:["payments","ingest","llm","partners"][n%4],description:"Automated insight generated by platform monitoring.",createdAt:l,acknowledgedAt:o,resolvedAt:d,acknowledgedBy:o?"ops.oncall@trdrhub.com":void 0,tags:["ops","sla"].slice(0,n%2+1),link:"https://status.trdrhub.com/incidents/123"}}),this.auditLogs=Array.from({length:120}).map((r,n)=>({id:`audit-${n+1}`,actor:{id:`user-${n%6+1}`,name:["Alicia Chen","Marcus Bell","Samir Patel","Luis Romero","Evelyn Sparks","Nina Alvarez"][n%6],email:`admin${n%6+1}@trdrhub.com`,role:Xv[n%Xv.length].name},action:["created","updated","deleted","invited","revoked"][n%5],entity:["user","apikey","feature_flag","partner","plan"][n%5],entityId:Fi(),summary:"Mock audit log entry describing an administrative action.",createdAt:ps(s,-n*10),ip:`10.12.${n%255}.${n*3%255}`,userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 13.2)",metadata:{change:"before/after snapshot omitted in mock"}})),this.approvals=Array.from({length:9}).map((r,n)=>{const i=["pending","approved","rejected"],l=i[n%i.length];return{id:`approval-${n+1}`,type:["limit_increase","policy_change","sensitive_export"][n%3],status:l,submittedBy:`ops+${n}@trdrhub.com`,submittedAt:ps(s,-n*60),expiresAt:l==="pending"?ps(s,240):void 0,approvers:["Marcus Bell","Samir Patel","Evelyn Sparks"].slice(0,n%3+1),approvedAt:l==="approved"?ps(s,-n*45):void 0,rejectedAt:l==="rejected"?ps(s,-n*30):void 0,rejectionReason:l==="rejected"?"Insufficient guardrail justification":void 0,before:{limit:1e6},after:{limit:25e5},comments:[{id:Fi(),author:"Alicia Chen",body:"Please review the associated risk analysis before approving.",createdAt:ps(s,-n*58)}]}}),this.compliance=[{id:"policy-1",name:"SOX Access Reviews",category:"Security",status:"pass",lastRunAt:ps(s,-360),exceptions:0,owner:"compliance@trdrhub.com",reportUrl:"https://compliance.trdrhub.com/reports/sox"},{id:"policy-2",name:"Data Residency - EU",category:"Privacy",status:"warning",lastRunAt:ps(s,-120),exceptions:3,owner:"privacy@trdrhub.com",reportUrl:"https://compliance.trdrhub.com/reports/gdpr"},{id:"policy-3",name:"AML Transaction Screening",category:"Financial",status:"fail",lastRunAt:ps(s,-90),exceptions:5,owner:"aml@trdrhub.com"}],this.users=Array.from({length:18}).map((r,n)=>{const i=Xv[n%Xv.length].id,l=["active","invited","disabled"];return{id:`admin-${n+1}`,name:["Alicia Chen","Marcus Bell","Samir Patel","Luis Romero","Evelyn Sparks","Nina Alvarez"][n%6],email:`admin${n+1}@trdrhub.com`,role:i,status:l[n%l.length],invitedAt:ps(s,-n*120),lastActiveAt:l[n%l.length]==="active"?ps(s,-n*45):void 0,mfaEnabled:n%2===0,tenants:["global","emea","apac"].slice(0,n%3+1)}}),this.apiKeys=Array.from({length:6}).map((r,n)=>({id:`key-${n+1}`,name:["Production API","Webhook Signer","Partner Sandbox"][n%3],status:["active","rotating","revoked","expired"][n%4],createdAt:ps(s,-n*300),lastUsedAt:ps(s,-n*30),expiresAt:n%4===3?ps(s,-30):ps(s,2160*60),scopes:["ingest","read","write"].slice(0,n%3+1),environment:["production","staging","development"][n%3],hashedKey:`hash-${Fi()}`})),this.sessions=Array.from({length:20}).map((r,n)=>({id:`session-${n+1}`,userId:this.users[n%this.users.length].id,createdAt:ps(s,-n*240),lastSeenAt:ps(s,-n*35),ipAddress:`172.16.${n%255}.${n*7%255}`,location:["New York, USA","London, UK","Singapore","Sydney, AU"][n%4],userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14.0) AppleWebKit/605.1.15",device:["MacBook Pro","Windows Desktop","iPad","Pixel 7"][n%4],platform:["macOS","windows","ios","android"][n%4],riskLevel:["low","medium","high"][n%3]})),this.billingPlans=[{id:"plan-free",name:"Starter",tier:"free",pricePerMonth:0,currency:"USD",features:["Up to 100 LCs","Community support","Basic analytics"],limits:{teams:1,members:5},status:"active"},{id:"plan-growth",name:"Growth",tier:"growth",pricePerMonth:1999,currency:"USD",features:["5,000 LCs","Priority support","Advanced analytics","LLM risk checks"],limits:{teams:5,members:50},status:"active"},{id:"plan-enterprise",name:"Enterprise",tier:"enterprise",pricePerMonth:4999,currency:"USD",features:["Unlimited LCs","Dedicated CSM","On-prem connectors","Custom SLAs"],limits:{teams:"unlimited",members:"unlimited"},status:"active"}],this.billingAdjustments=Array.from({length:12}).map((r,n)=>({id:`adjustment-${n+1}`,customer:["Bank of Asia","GlobalTrade Inc.","LatAm Exports"][n%3],amount:n%2===0?25e3:-15e3,currency:"USD",reason:n%2===0?"Usage overage":"Service credit",createdAt:ps(s,-n*1440),createdBy:"billing@trdrhub.com",status:["pending","posted","void"][n%3]})),this.billingDisputes=Array.from({length:6}).map((r,n)=>({id:`dispute-${n+1}`,customer:["Regency Trade","Pacific Credit","Global Freight"][n%3],amount:42e3+n*3e3,currency:"USD",reason:["Duplicate charge","Service not rendered","Contract mismatch"][n%3],openedAt:ps(s,-n*720),status:["open","won","lost","under_review"][n%4],evidenceDueAt:ps(s,4320),notes:"Awaiting additional documentation from customer"})),this.partners=[{id:"partner-1",name:"FinStack",category:"Risk Data",status:"active",contactEmail:"partnerships@finstack.com",createdAt:ps(s,-1e4),updatedAt:ps(s,-1e3),markets:["US","UK","SG"]},{id:"partner-2",name:"TradeBridge",category:"Compliance",status:"inactive",contactEmail:"ops@tradebridge.io",createdAt:ps(s,-15e3),updatedAt:ps(s,-2e3),markets:["EU","MENA"]}],this.connectors=[{id:"connector-1",name:"SAP S/4HANA",provider:"SAP",status:"enabled",lastSyncAt:ps(s,-30),authType:"oauth",hasSecrets:!0,config:{region:"eu-central-1",clientId:"sap-oauth-client"}},{id:"connector-2",name:"Oracle EBS",provider:"Oracle",status:"disabled",lastSyncAt:ps(s,-1440),authType:"api_key",hasSecrets:!0,config:{endpoint:"https://oracle.example.com"}}],this.webhooks=Array.from({length:25}).map((r,n)=>({id:`wh-${n+1}`,endpoint:"https://hooks.partner.com/lc-events",status:["delivered","pending","failed"][n%3],event:["lc.validated","lc.discrepancy","lc.uploaded"][n%3],sentAt:ps(s,-n*5),responseCode:[200,200,500][n%3],retryCount:n%2,lastError:n%3===2?"Timeout":void 0}));const a={id:Fi(),version:3,createdAt:ps(s,-120),createdBy:"prompt.team@trdrhub.com",diffSummary:"Improved entity extraction for import LC",prompt:"You are LC CoPilot. Extract structured data from documents...",variables:["client_name","document_type"]};this.prompts=[{id:"prompt-import",name:"Import LC Validation",description:"Ensures import LC documents meet compliance standards",useCase:"import",latestVersion:a,versions:[{...a,version:1,createdAt:ps(s,-720)},{...a,version:2,createdAt:ps(s,-360)},a],status:"active"}],this.budgets=[{id:"budget-1",service:"LC CoPilot",provider:"OpenAI",monthlyLimit:2500,currency:"USD",spendingToDate:1420,forecast:2100,hardLimit:3500,emails:["llm-finance@trdrhub.com"]},{id:"budget-2",service:"Trade Risk Evaluator",provider:"Anthropic",monthlyLimit:1500,currency:"USD",spendingToDate:890,forecast:1300,hardLimit:2e3,emails:["llm-team@trdrhub.com","risk@trdrhub.com"]}],this.evaluations=Array.from({length:14}).map((r,n)=>({id:`eval-${n+1}`,name:`LC risk scoring eval ${n+1}`,model:["gpt-4.1","claude-3-opus","mixtral-8x7b"][n%3],dataset:["sanctioned-lcs","high-risk-imports","standard-trade"][n%3],status:["pending","running","completed","failed"][n%4],startedAt:ps(s,-n*180),completedAt:n%4===2?ps(s,-n*120):void 0,metrics:{accuracy:Number((.65+n%5*.05).toFixed(2)),latencyMs:1800-n*20,cost:Number((35+n*1.5).toFixed(2)),score:Number((.7+n%3*.08).toFixed(2))},regressions:n%4===3?["False positive rate increased"]:void 0})),this.residencyPolicies=[{id:"residency-eu",region:"EU",storageLocation:"Frankfurt, DE",status:"compliant",lastValidatedAt:ps(s,-240),owner:"privacy@trdrhub.com"},{id:"residency-gcc",region:"GCC",storageLocation:"Dubai, UAE",status:"waived",lastValidatedAt:ps(s,-720),owner:"privacy@trdrhub.com",notes:"Waiver approved until 2025-12-31"},{id:"residency-india",region:"India",storageLocation:"Mumbai, IN",status:"non_compliant",lastValidatedAt:ps(s,-90),owner:"privacy@trdrhub.com",notes:"Awaiting DC expansion"}],this.retentionSchedules=[{id:"retention-std",name:"Standard LC Records",policy:"Retain for 7 years",appliesTo:["lc_uploads","analysis_results"],retentionDays:2555,lastRunAt:ps(s,-1440),nextRunAt:ps(s,1440),dryRunSummary:"172 records eligible for deletion"},{id:"retention-logs",name:"Security Logs",policy:"Retain for 365 days",appliesTo:["auth_logs","admin_activity"],retentionDays:365,lastRunAt:ps(s,-60),nextRunAt:ps(s,360)}],this.legalHolds=[{id:"hold-1",name:"Regulatory Review Q3",status:"active",createdAt:ps(s,-14400),owner:"legal@trdrhub.com",affectedObjects:248,notes:"Covering all transactions with counterpart A."},{id:"hold-2",name:"Litigation Contingency",status:"released",createdAt:ps(s,-2880*60),releasedAt:ps(s,-336*60),owner:"legal@trdrhub.com",affectedObjects:120,notes:"Released after settlement."}],this.featureFlags=[{id:"flag-new-analytics",name:"New Analytics Dashboard",description:"Rollout of analytics v2",status:"enabled",createdAt:ps(s,-7200),updatedAt:ps(s,-1440),owner:"product@trdrhub.com",targeting:{environments:["production","staging"],percentageRollout:75},tags:["analytics","dashboard"]},{id:"flag-llm-guardrails",name:"LLM Guardrails",description:"Enable new guardrail checks",status:"scheduled",createdAt:ps(s,-4320),updatedAt:ps(s,-4320),owner:"llm@trdrhub.com",targeting:{environments:["staging"],tenants:["beta"]},tags:["llm","risk"]}],this.releases=Array.from({length:18}).map((r,n)=>({id:`rel-${n+1}`,version:`v2.${24-n}.0`,deployedAt:ps(s,-n*180),environment:["production","staging","sandbox"][n%3],author:["CI/CD","Sarah Jenkins","DevOps Bot"][n%3],summary:"Deployment summary placeholder for mock data.",commitSha:`abc${n}123`,pullRequestUrl:"https://github.com/ripclass/trdrhub.com/pull/123",status:["succeeded","failed","in_progress"][n%3],services:[{name:"web",previousVersion:`v2.${23-n}.0`},{name:"api",previousVersion:`v2.${23-n}.0`}]})),this.settings={branding:{primaryColor:"#1d4ed8",logoUrl:"https://trdrhub.com/assets/logo.svg",supportEmail:"support@trdrhub.com"},authentication:{passwordPolicy:"min 12 chars, 1 special, 1 number",mfaEnforced:!0,ssoEnabled:!0,sessionTimeoutMinutes:60},notifications:{dailySummary:!0,weeklyInsights:!0,criticalAlerts:!0,digestEmail:"executive@trdrhub.com"}},this.adminAudit=[],this.rulesets=[],this.rules=[{ruleId:"UCP600-14A",ruleVersion:"1.0.0",article:"14(a)",version:"UCP600:2007",domain:"icc",jurisdiction:"global",documentType:"lc",ruleType:"deterministic",severity:"warning",deterministic:!0,requiresLlm:!1,title:"Consistency of data across documents",reference:"UCP600",description:"All documents must contain consistent data across the LC.",conditions:[{field:"documents[].amount",operator:"equals",value_ref:"lc.amount"}],expectedOutcome:{valid:["All documents aligned"],invalid:["Mismatch detected"]},tags:["consistency","lc"],metadata:{source:"mock"},checksum:Fi(),rulesetId:void 0,rulesetVersion:"1.0.0",isActive:!0,archivedAt:null,createdAt:s,updatedAt:s},{ruleId:"LCINV-001",ruleVersion:"1.0.0",article:"XDOC-1",version:"LCOPILOT:2025",domain:"icc",jurisdiction:"global",documentType:"invoice",ruleType:"semantic",severity:"warning",deterministic:!1,requiresLlm:!0,title:"Invoice goods description matches LC",reference:"LCOPILOT",description:"Invoice description should align with LC terms.",conditions:[{field:"invoice.description",operator:"semantic_check",value_ref:"lc.description"}],expectedOutcome:{valid:["Descriptions align"],invalid:["Invoice deviated from LC"]},tags:["invoice","semantic"],metadata:{documents:["Invoice","LC"]},checksum:Fi(),rulesetId:void 0,rulesetVersion:"2025.01",isActive:!0,archivedAt:null,createdAt:s,updatedAt:s},{ruleId:"DOC-PRESENTATION-5",ruleVersion:"2.0.0",article:"5",version:"URDG758:2010",domain:"icc",jurisdiction:"global",documentType:"guarantee",ruleType:"deterministic",severity:"fail",deterministic:!0,requiresLlm:!1,title:"Presentation within expiry",reference:"URDG758",description:"Documents must be presented prior to expiry date.",conditions:[{field:"documents[].date",operator:"before",value_ref:"lc.expiry_date"}],expectedOutcome:{valid:["Presented before expiry"],invalid:["Presented after expiry"]},tags:["timing"],metadata:{thresholdDays:0},checksum:Fi(),rulesetId:void 0,rulesetVersion:"2.0.0",isActive:!0,archivedAt:null,createdAt:s,updatedAt:s}],this.rulesetAudit=[{id:"audit-1",rulesetId:"ruleset-1",action:"upload",actorId:"admin-1",createdAt:ps(s,-720*60),detail:{ruleCount:39}},{id:"audit-2",rulesetId:"ruleset-1",action:"validate",actorId:"admin-1",createdAt:ps(s,-720*60),detail:{valid:!0}},{id:"audit-3",rulesetId:"ruleset-1",action:"publish",actorId:"admin-1",createdAt:ps(s,-720*60)}]}paginate(s,a){const{page:r,pageSize:n}={...Bue,...a},i=(r-1)*n;return{items:s.slice(i,i+n),page:r,pageSize:n,total:s.length}}async getDashboardStats(s){return hr(this.kpis)}async getOpsMetrics(s){return hr(this.opsMetrics)}async listJobs(s){try{const{status:a,search:r}=s;let n=[...this.jobs];if(a?.length&&(n=n.filter(i=>a.includes(i.status))),r){const i=r.toLowerCase();n=n.filter(l=>l.name.toLowerCase().includes(i)||l.id.includes(i))}return this.paginate(n,s)}catch(a){return console.error("MockAdminService.listJobs failed, returning fallback data",a),this.paginate([...this.jobs],s)}}async retryJob(s){const a=this.jobs.find(r=>r.id===s);return a?(a.status="queued",a.retries=Math.max(0,a.retries-1),a.startedAt=void 0,a.completedAt=void 0,a.metadata={...a.metadata,retriedAt:La()},{success:!0,message:"Job re-queued"}):{success:!1,message:"Job not found"}}async cancelJob(s){const a=this.jobs.find(r=>r.id===s);return a?(a.status="cancelled",a.completedAt=La(),{success:!0,message:"Job cancelled"}):{success:!1,message:"Job not found"}}async listAlerts(s){try{const{severity:a,status:r}=s;let n=[...this.alerts];return a?.length&&(n=n.filter(i=>a.includes(i.severity))),r&&(n=n.filter(i=>r==="active"?!i.acknowledgedAt:r==="acknowledged"?!!i.acknowledgedAt&&!i.resolvedAt:r==="resolved"?!!i.resolvedAt:!0)),this.paginate(n,s)}catch(a){return console.error("MockAdminService.listAlerts failed, returning fallback data",a),this.paginate([...this.alerts],s)}}async acknowledgeAlert(s){const a=this.alerts.find(r=>r.id===s);return a?(a.acknowledgedAt=La(),a.acknowledgedBy="operations@trdrhub.com",{success:!0,message:"Alert acknowledged"}):{success:!1,message:"Alert not found"}}async snoozeAlert(s,a){return this.alerts.find(n=>n.id===s)?{success:!0,message:`Alert snoozed for ${a} minutes`}:{success:!1,message:"Alert not found"}}async listAuditLogs(s){let a=[...this.auditLogs];if(s.search){const r=s.search.toLowerCase();a=a.filter(n=>n.summary.toLowerCase().includes(r)||n.actor.name.toLowerCase().includes(r)||n.entity.toLowerCase().includes(r))}return s.actor&&(a=a.filter(r=>r.actor.email===s.actor||r.actor.name===s.actor)),s.action&&(a=a.filter(r=>r.action===s.action)),this.paginate(a,s)}async listApprovalRequests(s){const a=this.approvals.filter(r=>r.status===s.status);return this.paginate(a,s)}async resolveApproval(s,a,r){const n=this.approvals.find(i=>i.id===s);return n?(n.status=a==="approve"?"approved":"rejected",n.approvedAt=a==="approve"?La():void 0,n.rejectedAt=a==="reject"?La():void 0,n.rejectionReason=r,{success:!0,message:`Request ${a}d`}):{success:!1,message:"Approval not found"}}async getComplianceSummary(){return hr(this.compliance)}async listUsers(s){let a=[...this.users];if(s.role&&s.role!=="all"&&(a=a.filter(r=>r.role===s.role)),s.search){const r=s.search.toLowerCase();a=a.filter(n=>n.name.toLowerCase().includes(r)||n.email.toLowerCase().includes(r))}return this.paginate(a,s)}async inviteUser(s){if(this.users.some(n=>n.email===s.email))return{success:!1,message:"User already invited"};const r={id:`admin-${this.users.length+1}`,name:s.email.split("@")[0],email:s.email,role:s.role,status:"invited",invitedAt:La(),mfaEnabled:!1,tenants:["global"]};return this.users.unshift(r),{success:!0,message:"Invite sent"}}async disableUser(s){const a=this.users.find(r=>r.id===s);return a?(a.status="disabled",{success:!0,message:"User disabled"}):{success:!1,message:"User not found"}}async updateUserRole(s,a){const r=this.users.find(n=>n.id===s);return r?(r.role=a,{success:!0,data:hr(r)}):{success:!1,message:"User not found"}}async listRoles(){return hr(Xv)}async listApiKeys(s){let a=[...this.apiKeys];return s.environment&&(a=a.filter(r=>r.environment===s.environment)),this.paginate(a,s)}async createApiKey(s){const a=`trdr_${Fi()}${Fi()}`,r={id:`key-${this.apiKeys.length+1}`,name:s.name,status:"active",createdAt:La(),scopes:s.scopes,environment:s.environment,hashedKey:`hash-${Fi()}`};return this.apiKeys.unshift(r),{success:!0,data:{token:a},message:"API key created"}}async rotateApiKey(s){const a=this.apiKeys.find(n=>n.id===s);if(!a)return{success:!1,message:"API key not found"};const r=`trdr_${Fi()}${Fi()}`;return a.status="rotating",a.hashedKey=`hash-${Fi()}`,a.lastUsedAt=La(),{success:!0,data:{token:r},message:"Rotation started"}}async revokeApiKey(s){const a=this.apiKeys.find(r=>r.id===s);return a?(a.status="revoked",a.expiresAt=La(),{success:!0,message:"API key revoked"}):{success:!1,message:"API key not found"}}async listSessions(s){let a=[...this.sessions];return s.risk&&(a=a.filter(r=>r.riskLevel===s.risk)),this.paginate(a,s)}async revokeSession(s){return this.sessions.find(r=>r.id===s)?(this.sessions=this.sessions.filter(r=>r.id!==s),{success:!0,message:"Session revoked"}):{success:!1,message:"Session not found"}}async getBillingSummary(s,a){try{const{getBillingSummaryFromAggregator:j}=await ll(async()=>{const{getBillingSummaryFromAggregator:b}=await Promise.resolve().then(()=>iHe);return{getBillingSummaryFromAggregator:b}},void 0),y=await j(s,a);if(y)return y}catch(j){console.warn("Billing aggregator not available, using mock",j)}const r=this.billingPlans.filter(j=>j.status==="active").reduce((j,y)=>j+y.pricePerMonth,0),n=r*12,i=new Date;i.setDate(1),i.setHours(0,0,0,0);const l=this.billingAdjustments.filter(j=>j.status==="posted"&&new Date(j.createdAt)>=i).reduce((j,y)=>j+Math.max(0,y.amount),0),o=r*.85,d=l+o,c=Math.abs(this.billingAdjustments.filter(j=>j.status==="posted"&&new Date(j.createdAt)>=i&&j.amount<0).reduce((j,y)=>j+y.amount,0)),u=d-c,h=this.billingDisputes.filter(j=>j.status==="open"||j.status==="under_review").length,x=Math.floor(r/2e3),g=this.billingAdjustments.filter(j=>j.status==="pending").length;return{mrrCents:r,arrCents:n,monthToDateCents:Math.round(d),netRevenueCents:Math.round(u),refundsCents:Math.round(c),disputesOpen:h,invoicesThisMonth:x,adjustmentsPending:g}}async listBillingPlans(){return hr(this.billingPlans)}async updateBillingPlan(s,a){const r=this.billingPlans.findIndex(i=>i.id===s);if(r===-1)return{success:!1,message:"Plan not found"};const n={...this.billingPlans[r],...a,features:a.features??this.billingPlans[r].features,limits:a.limits??this.billingPlans[r].limits};return this.billingPlans[r]=n,{success:!0,data:hr(n),message:"Plan updated"}}async listBillingAdjustments(s){return this.paginate(this.billingAdjustments,s)}async addBillingAdjustment(s){return this.billingAdjustments.unshift({...s,id:`adjustment-${this.billingAdjustments.length+1}`}),{success:!0,message:"Adjustment recorded"}}async listBillingDisputes(s){let a=[...this.billingDisputes];return s.status?.length&&(a=a.filter(r=>s.status?.includes(r.status))),this.paginate(a,s)}async resolveDispute(s,a,r){const n=this.billingDisputes.find(i=>i.id===s);return n?(n.status=a==="write_off"?"lost":a,n.notes=r,{success:!0,message:`Dispute marked ${a}`}):{success:!1,message:"Dispute not found"}}async listPartners(){return hr(this.partners)}async setPartnerStatus(s,a){const r=this.partners.find(n=>n.id===s);return r?(r.status=a,r.updatedAt=La(),{success:!0,message:"Partner status updated"}):{success:!1,message:"Partner not found"}}async listConnectors(){return hr(this.connectors)}async updateConnector(s,a){return this.connectors.find(n=>n.id===s)?(this.connectors=this.connectors.map(n=>n.id===s?{...n,...a,config:{...n.config,...a.config}}:n),{success:!0,message:"Connector updated"}):{success:!1,message:"Connector not found"}}async listWebhookDeliveries(s){let a=[...this.webhooks];return s.status&&(a=a.filter(r=>r.status===s.status)),this.paginate(a,s)}async redeliverWebhook(s){const a=this.webhooks.find(r=>r.id===s);return a?(a.status="pending",a.retryCount+=1,a.lastError=void 0,{success:!0,message:"Redelivery triggered"}):{success:!1,message:"Delivery not found"}}async rotateWebhookSecret(s){const a=this.connectors.find(n=>n.id===s);if(!a)return{success:!1,message:"Webhook not found"};const r=`whsec_${Fi()}${Fi()}`;return a.config={...a.config,signingSecret:r},{success:!0,data:{secret:r},message:"Secret rotated"}}async listPrompts(){return hr(this.prompts)}async publishPromptVersion(s,a){const r=this.prompts.find(i=>i.id===s);if(!r)return{success:!1,message:"Prompt not found"};const n={id:Fi(),version:r.latestVersion.version+1,createdAt:La(),createdBy:a.createdBy??"prompt.team@trdrhub.com",diffSummary:a.diffSummary??"Minor improvements",prompt:a.prompt??r.latestVersion.prompt,variables:a.variables??r.latestVersion.variables};return r.versions.unshift(n),r.latestVersion=n,{success:!0,data:hr(r),message:"Prompt published"}}async listLLMBudgets(){return hr(this.budgets)}async updateLLMBudget(s,a){const r=this.budgets.find(n=>n.id===s);return r?(Object.assign(r,a),{success:!0,message:"Budget updated"}):{success:!1,message:"Budget not found"}}async listEvaluationRuns(s){let a=[...this.evaluations];return s.status?.length&&(a=a.filter(r=>s.status?.includes(r.status))),this.paginate(a,s)}async listResidencyPolicies(){return hr(this.residencyPolicies)}async listRetentionSchedules(){return hr(this.retentionSchedules)}async runRetentionSchedule(s,a=!1){const r=this.retentionSchedules.find(n=>n.id===s);return r?(r.lastRunAt=La(),r.dryRunSummary=a?"Dry run: 84 records would be removed.":void 0,{success:!0,data:{summary:r.dryRunSummary}}):{success:!1,message:"Schedule not found"}}async listLegalHolds(){return hr(this.legalHolds)}async createLegalHold(s){const a={id:`hold-${this.legalHolds.length+1}`,name:s.name??"New Legal Hold",status:"active",createdAt:La(),owner:s.owner??"legal@trdrhub.com",affectedObjects:s.affectedObjects??0,notes:s.notes};return this.legalHolds.unshift(a),{success:!0,data:hr(a)}}async releaseLegalHold(s){const a=this.legalHolds.find(r=>r.id===s);return a?(a.status="released",a.releasedAt=La(),{success:!0,message:"Legal hold released"}):{success:!1,message:"Legal hold not found"}}async listFeatureFlags(){return hr(this.featureFlags)}async setFeatureFlagStatus(s,a){const r=this.featureFlags.find(n=>n.id===s);return r?(r.status=a,r.updatedAt=La(),{success:!0,message:"Flag updated"}):{success:!1,message:"Feature flag not found"}}async updateFeatureFlagTargeting(s,a){const r=this.featureFlags.find(n=>n.id===s);return r?(r.targeting=a,r.updatedAt=La(),{success:!0,message:"Targeting updated"}):{success:!1,message:"Feature flag not found"}}async listReleases(s){let a=[...this.releases];return s.environment&&(a=a.filter(r=>r.environment===s.environment)),this.paginate(a,s)}async getSettings(){return hr(this.settings)}async updateSettings(s){return this.settings={branding:{...this.settings.branding,...s.branding},authentication:{...this.settings.authentication,...s.authentication},notifications:{...this.settings.notifications,...s.notifications}},{success:!0,data:hr(this.settings),message:"Settings saved"}}async listRules(s){let a=[...this.rules];if(s.domain&&(a=a.filter(i=>i.domain===s.domain)),s.documentType&&(a=a.filter(i=>i.documentType===s.documentType)),s.severity&&(a=a.filter(i=>i.severity===s.severity)),s.requiresLlm!==void 0&&(a=a.filter(i=>i.requiresLlm===s.requiresLlm)),s.isActive!==void 0&&(a=a.filter(i=>i.isActive===s.isActive)),s.search){const i=s.search.toLowerCase();a=a.filter(l=>l.ruleId.toLowerCase().includes(i)||l.title.toLowerCase().includes(i)||(l.description??"").toLowerCase().includes(i))}const r=(s.page-1)*s.pageSize;return{items:a.slice(r,r+s.pageSize).map(i=>hr(i)),total:a.length,page:s.page,pageSize:s.pageSize}}async getRule(s){const a=this.rules.find(r=>r.ruleId===s);if(!a)throw new Error("Rule not found");return hr(a)}async updateRule(s,a){const r=this.rules.findIndex(l=>l.ruleId===s);if(r===-1)throw new Error("Rule not found");const n=this.rules[r],i={...n,isActive:a.isActive??n.isActive,severity:a.severity??n.severity,tags:a.tags??n.tags,metadata:a.metadata??n.metadata,updatedAt:La()};return a.ruleJson&&(i.metadata={...i.metadata??{},editedFields:Object.keys(a.ruleJson),editedAt:La()}),this.rules[r]=i,hr(i)}async deleteRule(s,a=!1){const r=this.rules.findIndex(n=>n.ruleId===s);return r===-1?{success:!1,message:"Rule not found"}:a?(this.rules.splice(r,1),{success:!0,message:"Rule deleted"}):(this.rules[r]={...this.rules[r],isActive:!1,archivedAt:La(),updatedAt:La()},{success:!0,message:"Rule archived"})}async bulkSyncRules(s={}){return{items:(s.rulesetId!=null?this.rulesets.filter(n=>n.id===s.rulesetId):this.rulesets.slice(0,2)).map(n=>({rulesetId:n.id,status:n.status,domain:n.domain,jurisdiction:n.jurisdiction,summary:{total_rules:this.rules.length,synced_at:La()}}))}}async listRulesets(s){try{const{domain:a,jurisdiction:r,status:n}=s;let i=[...this.rulesets];return a&&(i=i.filter(l=>l.domain===a)),r&&(i=i.filter(l=>l.jurisdiction===r)),n&&(i=i.filter(l=>l.status===n)),this.paginate(i,s)}catch(a){return console.error("MockAdminService.listRulesets failed, returning fallback data",a),this.paginate([...this.rulesets],s)}}async uploadRuleset(s,a,r,n,i,l,o,d){const c=await s.text();let u;try{u=JSON.parse(c)}catch(g){return{success:!1,message:`Invalid JSON: ${g instanceof Error?g.message:String(g)}`}}const h={valid:!0,ruleCount:Array.isArray(u)?u.length:0,errors:[],warnings:[],metadata:{domains:[a],jurisdictions:[r]}};Array.isArray(u)||(h.valid=!1,h.errors.push("Ruleset must be an array of rules")),h.ruleCount===0&&h.warnings.push("No rules found in file");const x={id:`ruleset-${this.rulesets.length+1}`,domain:a,jurisdiction:r,rulesetVersion:n,rulebookVersion:i,filePath:`rules/${a}/${a}-${i.toLowerCase().replace(/:/g,"-")}-v${n}.json`,status:"draft",checksumMd5:"mock-checksum-"+Math.random().toString(36).slice(2,10),ruleCount:h.ruleCount,createdAt:La(),createdBy:"current-user",effectiveFrom:l,effectiveTo:o,notes:d};return this.rulesets.unshift(x),this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:x.id,action:"upload",actorId:"current-user",createdAt:La(),detail:{validation:h}}),h.valid&&this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:x.id,action:"validate",actorId:"current-user",createdAt:La(),detail:{validation:h}}),{success:!0,data:{ruleset:x,validation:h},message:h.valid?"Ruleset uploaded successfully":"Ruleset uploaded with validation warnings"}}async publishRuleset(s){const a=this.rulesets.find(n=>n.id===s);if(!a)return{success:!1,message:"Ruleset not found"};if(a.status==="active")return{success:!1,message:"Ruleset is already active"};const r=this.rulesets.find(n=>n.domain===a.domain&&n.jurisdiction===a.jurisdiction&&n.status==="active"&&n.id!==s);return r&&(r.status="archived",this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:r.id,action:"archive",actorId:"current-user",createdAt:La(),detail:{replacedBy:s}})),a.status="active",a.publishedAt=La(),a.publishedBy="current-user",this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:a.id,action:"publish",actorId:"current-user",createdAt:La(),detail:{replacedRulesetId:r?.id}}),{success:!0,data:hr(a),message:"Ruleset published successfully"}}async rollbackRuleset(s){const a=this.rulesets.find(n=>n.id===s);if(!a)return{success:!1,message:"Ruleset not found"};const r=this.rulesets.find(n=>n.domain===a.domain&&n.jurisdiction===a.jurisdiction&&n.status==="active");return r&&r.id===a.id?{success:!1,message:"Ruleset is already active"}:(r&&(r.status="archived",this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:r.id,action:"archive",actorId:"current-user",createdAt:La(),detail:{rolledBackTo:s}})),a.status="active",a.publishedAt=La(),a.publishedBy="current-user",this.rulesetAudit.unshift({id:`audit-${this.rulesetAudit.length+1}`,rulesetId:a.id,action:"rollback",actorId:"current-user",createdAt:La(),detail:{replacedRulesetId:r?.id}}),{success:!0,data:hr(a),message:"Ruleset rolled back successfully"})}async getActiveRuleset(s,a,r){const n=this.rulesets.find(i=>i.domain===s&&i.jurisdiction===a&&i.status==="active");if(!n)throw new Error(`No active ruleset found for ${s}/${a}`);return{ruleset:this.transformRuleset(n),signedUrl:`https://example.com/rulesets/${n.id}/download`,content:r?[{id:"mock-rule",text:"Mock rule content"}]:void 0}}async getAllActiveRulesets(s){return this.rulesets.filter(r=>r.status==="active").map(r=>({ruleset:this.transformRuleset(r),signedUrl:`https://example.com/rulesets/${r.id}/download`,content:s?[{id:"mock-rule",text:"Mock rule content"}]:void 0}))}async getRulesetAudit(s){return hr(this.rulesetAudit.filter(a=>a.rulesetId===s))}async recordAdminAudit(s){const a={id:`audit-${this.adminAudit.length+1}`,createdAt:La(),...s};return this.adminAudit.unshift(a),{success:!0}}async listAdminAuditLog(s){return this.paginate(this.adminAudit,s)}}const Uue={"lc-volume":Be,"lc-success":bi,"active-companies":xs,"active-rulesets":O1,"open-alerts":$s};class zue{async listRulesets(s){try{const a=new URLSearchParams({page:s.page.toString(),page_size:s.pageSize.toString()});s.domain&&a.append("domain",s.domain),s.jurisdiction&&a.append("jurisdiction",s.jurisdiction),s.status&&a.append("status",s.status);const n=(await Ae.get(`/admin/rulesets?${a.toString()}`)).data;return{items:n.items.map(this.transformRuleset),total:n.total,page:n.page,pageSize:n.page_size}}catch(a){throw console.error("Failed to list rulesets:",a),new Error(a?.response?.data?.detail||"Failed to load rulesets")}}async uploadRuleset(s,a,r,n,i,l,o,d){try{const c=new FormData;c.append("file",s);const u=new URLSearchParams({domain:a,jurisdiction:r,ruleset_version:n,rulebook_version:i});l&&u.append("effective_from",l),o&&u.append("effective_to",o),d&&u.append("notes",d);const x=(await Ae.post(`/admin/rulesets/upload?${u.toString()}`,c,{headers:{"Content-Type":"multipart/form-data"}})).data,g=x.import_summary?{totalRules:x.import_summary.total_rules,inserted:x.import_summary.inserted,updated:x.import_summary.updated,skipped:x.import_summary.skipped,errors:x.import_summary.errors??[],warnings:x.import_summary.warnings??[]}:void 0;return{success:!0,data:{ruleset:this.transformRuleset(x.ruleset),validation:x.validation,importSummary:g},message:"Ruleset uploaded successfully"}}catch(c){return console.error("Failed to upload ruleset:",c),{success:!1,message:c?.response?.data?.detail?.message||c?.response?.data?.detail||"Failed to upload ruleset"}}}async publishRuleset(s){try{const a=await Ae.post(`/admin/rulesets/${s}/publish`);return{success:!0,data:this.transformRuleset(a.data),message:"Ruleset published successfully"}}catch(a){return console.error("Failed to publish ruleset:",a),{success:!1,message:a?.response?.data?.detail||"Failed to publish ruleset"}}}async rollbackRuleset(s){try{const a=await Ae.post(`/admin/rulesets/${s}/rollback`);return{success:!0,data:this.transformRuleset(a.data),message:"Ruleset rolled back successfully"}}catch(a){return console.error("Failed to rollback ruleset:",a),{success:!1,message:a?.response?.data?.detail||"Failed to rollback ruleset"}}}async archiveRuleset(s){try{const a=await Ae.post(`/admin/rulesets/${s}/archive`);return{success:!0,data:this.transformRuleset(a.data),message:"Ruleset archived successfully"}}catch(a){return console.error("Failed to archive ruleset:",a),{success:!1,message:a?.response?.data?.detail||"Failed to archive ruleset"}}}async deleteRuleset(s,a=!1){try{return{success:!0,message:(await Ae.delete(`/admin/rulesets/${s}`,{params:{hard:a?"true":"false"}})).data?.message||(a?"Ruleset permanently deleted":"Ruleset archived")}}catch(r){return console.error("Failed to delete ruleset:",r),{success:!1,message:r?.response?.data?.detail||"Failed to delete ruleset"}}}async getActiveRuleset(s,a,r=!1){try{const n=new URLSearchParams({domain:s,jurisdiction:a,include_content:r.toString()}),l=(await Ae.get(`/admin/rulesets/active?${n.toString()}`)).data;return{ruleset:this.transformRuleset(l.ruleset),signedUrl:l.signed_url,content:l.content}}catch(n){throw n?.response?.status===404?new Error(`No active ruleset found for ${s}/${a}`):(console.error("Failed to get active ruleset:",n),new Error(n?.response?.data?.detail||"Failed to get active ruleset"))}}async getAllActiveRulesets(s=!1){try{const a=new URLSearchParams({include_content:s.toString()});return(await Ae.get(`/admin/rulesets/active/all?${a.toString()}`)).data.map(i=>({ruleset:this.transformRuleset(i.ruleset),signedUrl:i.signed_url,content:i.content}))}catch(a){throw console.error("Failed to get all active rulesets:",a),new Error(a?.response?.data?.detail||"Failed to get all active rulesets")}}async getRulesetAudit(s){try{return(await Ae.get(`/admin/rulesets/${s}/audit`)).data.map(r=>({id:r.id,rulesetId:r.ruleset_id,action:r.action,actorId:r.actor_id,detail:r.detail,createdAt:r.created_at}))}catch(a){throw console.error("Failed to get ruleset audit:",a),new Error(a?.response?.data?.detail||"Failed to get audit log")}}async listRules(s){try{const a=new URLSearchParams({page:s.page.toString(),page_size:s.pageSize.toString()});s.domain&&a.append("domain",s.domain),s.documentType&&a.append("document_type",s.documentType),s.severity&&a.append("severity",s.severity),s.requiresLlm!==void 0&&a.append("requires_llm",String(s.requiresLlm)),s.isActive!==void 0&&a.append("is_active",String(s.isActive)),s.search&&a.append("search",s.search);const n=(await Ae.get(`/admin/rules?${a.toString()}`)).data;return{items:n.items.map(i=>this.transformRuleRecord(i)),total:n.total,page:n.page,pageSize:n.page_size}}catch(a){throw console.error("Failed to list rules:",a),new Error(a?.response?.data?.detail||"Failed to load rules")}}async getRule(s){try{const a=await Ae.get(`/admin/rules/${s}`);return this.transformRuleRecord(a.data)}catch(a){throw console.error("Failed to fetch rule:",a),new Error(a?.response?.data?.detail||"Failed to retrieve rule")}}async updateRule(s,a){try{const r=await Ae.patch(`/admin/rules/${s}`,a);return this.transformRuleRecord(r.data)}catch(r){throw console.error("Failed to update rule:",r),new Error(r?.response?.data?.detail||"Failed to update rule")}}async deleteRule(s,a=!1){try{return await Ae.delete(`/admin/rules/${s}`,{params:{hard:a?"true":"false"}}),{success:!0,message:"Rule removed"}}catch(r){return console.error("Failed to delete rule:",r),{success:!1,message:r?.response?.data?.detail||"Failed to delete rule"}}}async bulkSyncRules(s={}){try{const a=s.rulesetId||s.includeInactive?{ruleset_id:s.rulesetId,include_inactive:s.includeInactive??!1}:void 0;return{items:(await Ae.post("/admin/rules/bulk-sync",a,{params:{ruleset_id:s.rulesetId,include_inactive:s.includeInactive}})).data.items.map(i=>({rulesetId:i.ruleset_id,status:i.status,domain:i.domain,jurisdiction:i.jurisdiction,summary:i.summary??{}}))}}catch(a){throw console.error("Failed to run rules bulk sync:",a),new Error(a?.response?.data?.detail||"Failed to sync rules")}}transformRuleRecord(s){return{ruleId:s.rule_id,ruleVersion:s.rule_version??void 0,article:s.article??void 0,version:s.version??void 0,domain:s.domain,jurisdiction:s.jurisdiction,documentType:s.document_type,ruleType:s.rule_type,severity:s.severity,deterministic:!!s.deterministic,requiresLlm:!!s.requires_llm,title:s.title,reference:s.reference??void 0,description:s.description??void 0,conditions:s.conditions??[],expectedOutcome:s.expected_outcome??{},tags:s.tags??[],metadata:s.metadata??null,checksum:s.checksum,rulesetId:s.ruleset_id??void 0,rulesetVersion:s.ruleset_version??void 0,isActive:!!s.is_active,archivedAt:s.archived_at??void 0,createdAt:s.created_at,updatedAt:s.updated_at}}transformRuleset(s){return{id:s.id,domain:s.domain,jurisdiction:s.jurisdiction,rulesetVersion:s.ruleset_version,rulebookVersion:s.rulebook_version,filePath:s.file_path,status:s.status,effectiveFrom:s.effective_from,effectiveTo:s.effective_to,checksumMd5:s.checksum_md5,ruleCount:s.rule_count,createdBy:s.created_by,createdAt:s.created_at,publishedBy:s.published_by,publishedAt:s.published_at,notes:s.notes}}async getDashboardStats(s){try{return((await Ae.get("/admin/dashboard/kpis",{params:{range:s}})).data?.stats??[]).map(n=>{const i=Uue[n.id]??Wn;return{id:n.id,label:n.label,value:n.value,change:n.change??0,changeLabel:n.changeLabel??"",changeDirection:n.changeDirection??"flat",icon:i,href:n.href,emphasis:!!n.emphasis}})}catch(a){throw console.error("Failed to fetch dashboard stats",a),new Error("Unable to load dashboard metrics")}}async getOpsMetrics(s){try{const a=s==="24h"?"24h":"7d",n=(await Ae.get("/admin/jobs/queue/stats",{params:{time_range:a}})).data??{};return[{id:"total-jobs",name:"Jobs processed",value:n.total_jobs??0,change:0,trend:"stable"},{id:"queue-depth",name:"Queue depth",value:n.queue_depth??0,change:0,trend:"stable"},{id:"avg-duration",name:"Avg. processing time (ms)",value:n.avg_processing_time_ms??0,change:0,trend:"stable"}]}catch(a){throw console.error("Failed to fetch ops metrics",a),new Error("Unable to load ops metrics")}}async listJobs(s){const a=(s.page-1)*s.pageSize;try{const n=(await Ae.get("/admin/jobs/queue",{params:{limit:s.pageSize,offset:a,status:s.status?.[0],search:s.search}})).data;return{items:n.items??[],total:n.total??0,page:n.page??s.page,pageSize:n.size??s.pageSize}}catch(r){throw console.error("Failed to list jobs",r),new Error("Unable to load jobs")}}async retryJob(s){try{return await Ae.post(`/admin/jobs/queue/${s}/retry`,null,{params:{reason:"Retry via admin console"}}),{success:!0,message:"Job re-queued"}}catch(a){return console.error("Failed to retry job",a),{success:!1,message:a?.response?.data?.detail??"Failed to retry job"}}}async cancelJob(s){try{return await Ae.post(`/admin/jobs/queue/${s}/cancel`,null,{params:{reason:"Cancelled via admin console"}}),{success:!0,message:"Job cancelled"}}catch(a){return console.error("Failed to cancel job",a),{success:!1,message:a?.response?.data?.detail??"Failed to cancel job"}}}async listAlerts(s){try{const r=(await Ae.get("/admin/ops/system-alerts",{params:{page:s.page,page_size:s.pageSize,severity:s.severity?.[0],status:s.status}})).data;return{items:r.items??[],total:r.total??0,page:r.page??s.page,pageSize:r.page_size??s.pageSize}}catch(a){throw console.error("Failed to fetch alerts",a),new Error("Unable to load alerts")}}async acknowledgeAlert(s){try{return await Ae.post(`/admin/ops/system-alerts/${s}/acknowledge`),{success:!0,message:"Alert acknowledged"}}catch(a){return console.error("Failed to acknowledge alert",a),{success:!1,message:a?.response?.data?.detail??"Unable to acknowledge alert"}}}async snoozeAlert(s,a){try{return await Ae.post(`/admin/ops/system-alerts/${s}/snooze`,null,{params:{minutes:a}}),{success:!0,message:`Alert snoozed for ${a} minutes`}}catch(r){return console.error("Failed to snooze alert",r),{success:!1,message:r?.response?.data?.detail??"Unable to snooze alert"}}}async listAuditLogs(){throw new Error("Not implemented")}async listApprovalRequests(){throw new Error("Not implemented")}async resolveApproval(){throw new Error("Not implemented")}async getComplianceSummary(){throw new Error("Not implemented")}async listUsers(){throw new Error("Not implemented")}async inviteUser(){throw new Error("Not implemented")}async disableUser(){throw new Error("Not implemented")}async updateUserRole(){throw new Error("Not implemented")}async listRoles(){throw new Error("Not implemented")}async listApiKeys(){throw new Error("Not implemented")}async createApiKey(){throw new Error("Not implemented")}async rotateApiKey(){throw new Error("Not implemented")}async revokeApiKey(){throw new Error("Not implemented")}async listSessions(){throw new Error("Not implemented")}async revokeSession(){throw new Error("Not implemented")}async getBillingSummary(){throw new Error("Not implemented")}async listBillingPlans(){throw new Error("Not implemented")}async updateBillingPlan(){throw new Error("Not implemented")}async listBillingAdjustments(){throw new Error("Not implemented")}async addBillingAdjustment(){throw new Error("Not implemented")}async listBillingDisputes(){throw new Error("Not implemented")}async resolveDispute(){throw new Error("Not implemented")}async listPartners(){throw new Error("Not implemented")}async setPartnerStatus(){throw new Error("Not implemented")}async listConnectors(){throw new Error("Not implemented")}async updateConnector(){throw new Error("Not implemented")}async listWebhookDeliveries(){throw new Error("Not implemented")}async redeliverWebhook(){throw new Error("Not implemented")}async rotateWebhookSecret(){throw new Error("Not implemented")}async listPrompts(){throw new Error("Not implemented")}async publishPromptVersion(){throw new Error("Not implemented")}async listLLMBudgets(){throw new Error("Not implemented")}async updateLLMBudget(){throw new Error("Not implemented")}async listEvaluationRuns(){throw new Error("Not implemented")}async listResidencyPolicies(){throw new Error("Not implemented")}async listRetentionSchedules(){throw new Error("Not implemented")}async runRetentionSchedule(){throw new Error("Not implemented")}async listLegalHolds(){throw new Error("Not implemented")}async createLegalHold(){throw new Error("Not implemented")}async releaseLegalHold(){throw new Error("Not implemented")}async listFeatureFlags(){throw new Error("Not implemented")}async setFeatureFlagStatus(){throw new Error("Not implemented")}async updateFeatureFlagTargeting(){throw new Error("Not implemented")}async listReleases(){throw new Error("Not implemented")}async getSettings(){return{branding:{primaryColor:"#3b82f6",supportEmail:"support@trdrhub.com"},authentication:{passwordPolicy:"Minimum 8 characters",mfaEnforced:!1,ssoEnabled:!1,sessionTimeoutMinutes:60},notifications:{dailySummary:!0,weeklyInsights:!0,criticalAlerts:!0,digestEmail:"admin@trdrhub.com"}}}async updateSettings(s){return{success:!0,data:s,message:"Settings updated (stub - backend not implemented)"}}async recordAdminAudit(s){try{return await Ae.post("/admin/audit/log-action",{section:s.section,action:s.action,actor:s.actor,actorRole:s.actorRole,entityId:s.entityId,metadata:s.metadata}),{success:!0,message:"Recorded"}}catch(a){return console.error("Failed to record admin audit",a),{success:!1,message:"Unable to record audit entry"}}}async listAdminAuditLog(s){try{const r=((await Ae.get("/admin/dashboard/activity",{params:{limit:s.pageSize}})).data?.items??[]).map(n=>({id:n.id,actor:n.actor,actorRole:"admin",action:n.action,section:"overview",createdAt:n.createdAt}));return{items:r,total:r.length,page:s.page,pageSize:s.pageSize}}catch(a){return console.error("Failed to load admin audit log",a),{items:[],total:0,page:s.page,pageSize:s.pageSize}}}}let Ak=null,Pk=null;const que="api";function Ra(t=que){if(t==="api")return Pk||(Pk=new zue),Pk;if(t==="mock")return Ak||(Ak=new $ue),Ak;throw new Error(`Unknown admin data source: ${t}`)}function gt(t,s,{checkForDefaultPrevented:a=!0}={}){return function(n){if(t?.(n),a===!1||!n.defaultPrevented)return s?.(n)}}function bL(t,s){if(typeof t=="function")return t(s);t!=null&&(t.current=s)}function Uo(...t){return s=>{let a=!1;const r=t.map(n=>{const i=bL(n,s);return!a&&typeof i=="function"&&(a=!0),i});if(a)return()=>{for(let n=0;n<r.length;n++){const i=r[n];typeof i=="function"?i():bL(t[n],null)}}}}function vs(...t){return m.useCallback(Uo(...t),t)}function Vue(t,s){const a=m.createContext(s),r=i=>{const{children:l,...o}=i,d=m.useMemo(()=>o,Object.values(o));return e.jsx(a.Provider,{value:d,children:l})};r.displayName=t+"Provider";function n(i){const l=m.useContext(a);if(l)return l;if(s!==void 0)return s;throw new Error(`\`${i}\` must be used within \`${t}\``)}return[r,n]}function Vr(t,s=[]){let a=[];function r(i,l){const o=m.createContext(l),d=a.length;a=[...a,l];const c=h=>{const{scope:x,children:g,...j}=h,y=x?.[t]?.[d]||o,b=m.useMemo(()=>j,Object.values(j));return e.jsx(y.Provider,{value:b,children:g})};c.displayName=i+"Provider";function u(h,x){const g=x?.[t]?.[d]||o,j=m.useContext(g);if(j)return j;if(l!==void 0)return l;throw new Error(`\`${h}\` must be used within \`${i}\``)}return[c,u]}const n=()=>{const i=a.map(l=>m.createContext(l));return function(o){const d=o?.[t]||i;return m.useMemo(()=>({[`__scope${t}`]:{...o,[t]:d}}),[o,d])}};return n.scopeName=t,[r,Wue(n,...s)]}function Wue(...t){const s=t[0];if(t.length===1)return s;const a=()=>{const r=t.map(n=>({useScope:n(),scopeName:n.scopeName}));return function(i){const l=r.reduce((o,{useScope:d,scopeName:c})=>{const h=d(i)[`__scope${c}`];return{...o,...h}},{});return m.useMemo(()=>({[`__scope${s.scopeName}`]:l}),[l])}};return a.scopeName=s.scopeName,a}var an=globalThis?.document?m.useLayoutEffect:()=>{},Hue=np[" useId ".trim().toString()]||(()=>{}),Gue=0;function En(t){const[s,a]=m.useState(Hue());return an(()=>{a(r=>r??String(Gue++))},[t]),t||(s?`radix-${s}`:"")}var Kue=np[" useInsertionEffect ".trim().toString()]||an;function Hn({prop:t,defaultProp:s,onChange:a=()=>{},caller:r}){const[n,i,l]=Yue({defaultProp:s,onChange:a}),o=t!==void 0,d=o?t:n;{const u=m.useRef(t!==void 0);m.useEffect(()=>{const h=u.current;h!==o&&console.warn(`${r} is changing from ${h?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),u.current=o},[o,r])}const c=m.useCallback(u=>{if(o){const h=Zue(u)?u(t):u;h!==t&&l.current?.(h)}else i(u)},[o,t,i,l]);return[d,c]}function Yue({defaultProp:t,onChange:s}){const[a,r]=m.useState(t),n=m.useRef(a),i=m.useRef(s);return Kue(()=>{i.current=s},[s]),m.useEffect(()=>{n.current!==a&&(i.current?.(a),n.current=a)},[a,n]),[a,r,i]}function Zue(t){return typeof t=="function"}function Bx(t){const s=Jue(t),a=m.forwardRef((r,n)=>{const{children:i,...l}=r,o=m.Children.toArray(i),d=o.find(Que);if(d){const c=d.props.children,u=o.map(h=>h===d?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:h);return e.jsx(s,{...l,ref:n,children:m.isValidElement(c)?m.cloneElement(c,void 0,u):null})}return e.jsx(s,{...l,ref:n,children:i})});return a.displayName=`${t}.Slot`,a}function Jue(t){const s=m.forwardRef((a,r)=>{const{children:n,...i}=a;if(m.isValidElement(n)){const l=eme(n),o=Xue(i,n.props);return n.type!==m.Fragment&&(o.ref=r?Uo(r,l):l),m.cloneElement(n,o)}return m.Children.count(n)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var gV=Symbol("radix.slottable");function vV(t){const s=({children:a})=>e.jsx(e.Fragment,{children:a});return s.displayName=`${t}.Slottable`,s.__radixId=gV,s}function Que(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===gV}function Xue(t,s){const a={...s};for(const r in s){const n=t[r],i=s[r];/^on[A-Z]/.test(r)?n&&i?a[r]=(...o)=>{const d=i(...o);return n(...o),d}:n&&(a[r]=n):r==="style"?a[r]={...n,...i}:r==="className"&&(a[r]=[n,i].filter(Boolean).join(" "))}return{...t,...a}}function eme(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var tme=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Pt=tme.reduce((t,s)=>{const a=Bx(`Primitive.${s}`),r=m.forwardRef((n,i)=>{const{asChild:l,...o}=n,d=l?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{});function MD(t,s){t&&Du.flushSync(()=>t.dispatchEvent(s))}function Zr(t){const s=m.useRef(t);return m.useEffect(()=>{s.current=t}),m.useMemo(()=>(...a)=>s.current?.(...a),[])}function sme(t,s=globalThis?.document){const a=Zr(t);m.useEffect(()=>{const r=n=>{n.key==="Escape"&&a(n)};return s.addEventListener("keydown",r,{capture:!0}),()=>s.removeEventListener("keydown",r,{capture:!0})},[a,s])}var ame="DismissableLayer",p5="dismissableLayer.update",rme="dismissableLayer.pointerDownOutside",nme="dismissableLayer.focusOutside",yL,jV=m.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),mp=m.forwardRef((t,s)=>{const{disableOutsidePointerEvents:a=!1,onEscapeKeyDown:r,onPointerDownOutside:n,onFocusOutside:i,onInteractOutside:l,onDismiss:o,...d}=t,c=m.useContext(jV),[u,h]=m.useState(null),x=u?.ownerDocument??globalThis?.document,[,g]=m.useState({}),j=vs(s,D=>h(D)),y=Array.from(c.layers),[b]=[...c.layersWithOutsidePointerEventsDisabled].slice(-1),N=y.indexOf(b),C=u?y.indexOf(u):-1,_=c.layersWithOutsidePointerEventsDisabled.size>0,A=C>=N,k=lme(D=>{const R=D.target,O=[...c.branches].some(P=>P.contains(R));!A||O||(n?.(D),l?.(D),D.defaultPrevented||o?.())},x),E=ome(D=>{const R=D.target;[...c.branches].some(P=>P.contains(R))||(i?.(D),l?.(D),D.defaultPrevented||o?.())},x);return sme(D=>{C===c.layers.size-1&&(r?.(D),!D.defaultPrevented&&o&&(D.preventDefault(),o()))},x),m.useEffect(()=>{if(u)return a&&(c.layersWithOutsidePointerEventsDisabled.size===0&&(yL=x.body.style.pointerEvents,x.body.style.pointerEvents="none"),c.layersWithOutsidePointerEventsDisabled.add(u)),c.layers.add(u),NL(),()=>{a&&c.layersWithOutsidePointerEventsDisabled.size===1&&(x.body.style.pointerEvents=yL)}},[u,x,a,c]),m.useEffect(()=>()=>{u&&(c.layers.delete(u),c.layersWithOutsidePointerEventsDisabled.delete(u),NL())},[u,c]),m.useEffect(()=>{const D=()=>g({});return document.addEventListener(p5,D),()=>document.removeEventListener(p5,D)},[]),e.jsx(Pt.div,{...d,ref:j,style:{pointerEvents:_?A?"auto":"none":void 0,...t.style},onFocusCapture:gt(t.onFocusCapture,E.onFocusCapture),onBlurCapture:gt(t.onBlurCapture,E.onBlurCapture),onPointerDownCapture:gt(t.onPointerDownCapture,k.onPointerDownCapture)})});mp.displayName=ame;var ime="DismissableLayerBranch",bV=m.forwardRef((t,s)=>{const a=m.useContext(jV),r=m.useRef(null),n=vs(s,r);return m.useEffect(()=>{const i=r.current;if(i)return a.branches.add(i),()=>{a.branches.delete(i)}},[a.branches]),e.jsx(Pt.div,{...t,ref:n})});bV.displayName=ime;function lme(t,s=globalThis?.document){const a=Zr(t),r=m.useRef(!1),n=m.useRef(()=>{});return m.useEffect(()=>{const i=o=>{if(o.target&&!r.current){let d=function(){yV(rme,a,c,{discrete:!0})};const c={originalEvent:o};o.pointerType==="touch"?(s.removeEventListener("click",n.current),n.current=d,s.addEventListener("click",n.current,{once:!0})):d()}else s.removeEventListener("click",n.current);r.current=!1},l=window.setTimeout(()=>{s.addEventListener("pointerdown",i)},0);return()=>{window.clearTimeout(l),s.removeEventListener("pointerdown",i),s.removeEventListener("click",n.current)}},[s,a]),{onPointerDownCapture:()=>r.current=!0}}function ome(t,s=globalThis?.document){const a=Zr(t),r=m.useRef(!1);return m.useEffect(()=>{const n=i=>{i.target&&!r.current&&yV(nme,a,{originalEvent:i},{discrete:!1})};return s.addEventListener("focusin",n),()=>s.removeEventListener("focusin",n)},[s,a]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function NL(){const t=new CustomEvent(p5);document.dispatchEvent(t)}function yV(t,s,a,{discrete:r}){const n=a.originalEvent.target,i=new CustomEvent(t,{bubbles:!1,cancelable:!0,detail:a});s&&n.addEventListener(t,s,{once:!0}),r?MD(n,i):n.dispatchEvent(i)}var cme=mp,dme=bV,Dk="focusScope.autoFocusOnMount",Tk="focusScope.autoFocusOnUnmount",wL={bubbles:!1,cancelable:!0},ume="FocusScope",Hj=m.forwardRef((t,s)=>{const{loop:a=!1,trapped:r=!1,onMountAutoFocus:n,onUnmountAutoFocus:i,...l}=t,[o,d]=m.useState(null),c=Zr(n),u=Zr(i),h=m.useRef(null),x=vs(s,y=>d(y)),g=m.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;m.useEffect(()=>{if(r){let y=function(_){if(g.paused||!o)return;const A=_.target;o.contains(A)?h.current=A:Am(h.current,{select:!0})},b=function(_){if(g.paused||!o)return;const A=_.relatedTarget;A!==null&&(o.contains(A)||Am(h.current,{select:!0}))},N=function(_){if(document.activeElement===document.body)for(const k of _)k.removedNodes.length>0&&Am(o)};document.addEventListener("focusin",y),document.addEventListener("focusout",b);const C=new MutationObserver(N);return o&&C.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",y),document.removeEventListener("focusout",b),C.disconnect()}}},[r,o,g.paused]),m.useEffect(()=>{if(o){CL.add(g);const y=document.activeElement;if(!o.contains(y)){const N=new CustomEvent(Dk,wL);o.addEventListener(Dk,c),o.dispatchEvent(N),N.defaultPrevented||(mme(gme(NV(o)),{select:!0}),document.activeElement===y&&Am(o))}return()=>{o.removeEventListener(Dk,c),setTimeout(()=>{const N=new CustomEvent(Tk,wL);o.addEventListener(Tk,u),o.dispatchEvent(N),N.defaultPrevented||Am(y??document.body,{select:!0}),o.removeEventListener(Tk,u),CL.remove(g)},0)}}},[o,c,u,g]);const j=m.useCallback(y=>{if(!a&&!r||g.paused)return;const b=y.key==="Tab"&&!y.altKey&&!y.ctrlKey&&!y.metaKey,N=document.activeElement;if(b&&N){const C=y.currentTarget,[_,A]=hme(C);_&&A?!y.shiftKey&&N===A?(y.preventDefault(),a&&Am(_,{select:!0})):y.shiftKey&&N===_&&(y.preventDefault(),a&&Am(A,{select:!0})):N===C&&y.preventDefault()}},[a,r,g.paused]);return e.jsx(Pt.div,{tabIndex:-1,...l,ref:x,onKeyDown:j})});Hj.displayName=ume;function mme(t,{select:s=!1}={}){const a=document.activeElement;for(const r of t)if(Am(r,{select:s}),document.activeElement!==a)return}function hme(t){const s=NV(t),a=_L(s,t),r=_L(s.reverse(),t);return[a,r]}function NV(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function _L(t,s){for(const a of t)if(!xme(a,{upTo:s}))return a}function xme(t,{upTo:s}){if(getComputedStyle(t).visibility==="hidden")return!0;for(;t;){if(s!==void 0&&t===s)return!1;if(getComputedStyle(t).display==="none")return!0;t=t.parentElement}return!1}function pme(t){return t instanceof HTMLInputElement&&"select"in t}function Am(t,{select:s=!1}={}){if(t&&t.focus){const a=document.activeElement;t.focus({preventScroll:!0}),t!==a&&pme(t)&&s&&t.select()}}var CL=fme();function fme(){let t=[];return{add(s){const a=t[0];s!==a&&a?.pause(),t=SL(t,s),t.unshift(s)},remove(s){t=SL(t,s),t[0]?.resume()}}}function SL(t,s){const a=[...t],r=a.indexOf(s);return r!==-1&&a.splice(r,1),a}function gme(t){return t.filter(s=>s.tagName!=="A")}var vme="Portal",hp=m.forwardRef((t,s)=>{const{container:a,...r}=t,[n,i]=m.useState(!1);an(()=>i(!0),[]);const l=a||n&&globalThis?.document?.body;return l?ene.createPortal(e.jsx(Pt.div,{...r,ref:s}),l):null});hp.displayName=vme;function jme(t,s){return m.useReducer((a,r)=>s[a][r]??a,t)}var jn=t=>{const{present:s,children:a}=t,r=bme(s),n=typeof a=="function"?a({present:r.isPresent}):m.Children.only(a),i=vs(r.ref,yme(n));return typeof a=="function"||r.isPresent?m.cloneElement(n,{ref:i}):null};jn.displayName="Presence";function bme(t){const[s,a]=m.useState(),r=m.useRef(null),n=m.useRef(t),i=m.useRef("none"),l=t?"mounted":"unmounted",[o,d]=jme(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return m.useEffect(()=>{const c=Qy(r.current);i.current=o==="mounted"?c:"none"},[o]),an(()=>{const c=r.current,u=n.current;if(u!==t){const x=i.current,g=Qy(c);t?d("MOUNT"):g==="none"||c?.display==="none"?d("UNMOUNT"):d(u&&x!==g?"ANIMATION_OUT":"UNMOUNT"),n.current=t}},[t,d]),an(()=>{if(s){let c;const u=s.ownerDocument.defaultView??window,h=g=>{const y=Qy(r.current).includes(CSS.escape(g.animationName));if(g.target===s&&y&&(d("ANIMATION_END"),!n.current)){const b=s.style.animationFillMode;s.style.animationFillMode="forwards",c=u.setTimeout(()=>{s.style.animationFillMode==="forwards"&&(s.style.animationFillMode=b)})}},x=g=>{g.target===s&&(i.current=Qy(r.current))};return s.addEventListener("animationstart",x),s.addEventListener("animationcancel",h),s.addEventListener("animationend",h),()=>{u.clearTimeout(c),s.removeEventListener("animationstart",x),s.removeEventListener("animationcancel",h),s.removeEventListener("animationend",h)}}else d("ANIMATION_END")},[s,d]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:m.useCallback(c=>{r.current=c?getComputedStyle(c):null,a(c)},[])}}function Qy(t){return t?.animationName||"none"}function yme(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var Fk=0;function $1(){m.useEffect(()=>{const t=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",t[0]??kL()),document.body.insertAdjacentElement("beforeend",t[1]??kL()),Fk++,()=>{Fk===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(s=>s.remove()),Fk--}},[])}function kL(){const t=document.createElement("span");return t.setAttribute("data-radix-focus-guard",""),t.tabIndex=0,t.style.outline="none",t.style.opacity="0",t.style.position="fixed",t.style.pointerEvents="none",t}var xw="right-scroll-bar-position",pw="width-before-scroll-bar",Nme="with-scroll-bars-hidden",wme="--removed-body-scroll-bar-size";function Rk(t,s){return typeof t=="function"?t(s):t&&(t.current=s),t}function _me(t,s){var a=m.useState(function(){return{value:t,callback:s,facade:{get current(){return a.value},set current(r){var n=a.value;n!==r&&(a.value=r,a.callback(r,n))}}}})[0];return a.callback=s,a.facade}var Cme=typeof window<"u"?m.useLayoutEffect:m.useEffect,EL=new WeakMap;function Sme(t,s){var a=_me(null,function(r){return t.forEach(function(n){return Rk(n,r)})});return Cme(function(){var r=EL.get(a);if(r){var n=new Set(r),i=new Set(t),l=a.current;n.forEach(function(o){i.has(o)||Rk(o,null)}),i.forEach(function(o){n.has(o)||Rk(o,l)})}EL.set(a,t)},[t]),a}function kme(t){return t}function Eme(t,s){s===void 0&&(s=kme);var a=[],r=!1,n={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return a.length?a[a.length-1]:t},useMedium:function(i){var l=s(i,r);return a.push(l),function(){a=a.filter(function(o){return o!==l})}},assignSyncMedium:function(i){for(r=!0;a.length;){var l=a;a=[],l.forEach(i)}a={push:function(o){return i(o)},filter:function(){return a}}},assignMedium:function(i){r=!0;var l=[];if(a.length){var o=a;a=[],o.forEach(i),l=a}var d=function(){var u=l;l=[],u.forEach(i)},c=function(){return Promise.resolve().then(d)};c(),a={push:function(u){l.push(u),c()},filter:function(u){return l=l.filter(u),a}}}};return n}function Ame(t){t===void 0&&(t={});var s=Eme(null);return s.options=Io({async:!0,ssr:!1},t),s}var wV=function(t){var s=t.sideCar,a=jh(t,["sideCar"]);if(!s)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=s.read();if(!r)throw new Error("Sidecar medium not found");return m.createElement(r,Io({},a))};wV.isSideCarExport=!0;function Pme(t,s){return t.useMedium(s),wV}var _V=Ame(),Ok=function(){},U1=m.forwardRef(function(t,s){var a=m.useRef(null),r=m.useState({onScrollCapture:Ok,onWheelCapture:Ok,onTouchMoveCapture:Ok}),n=r[0],i=r[1],l=t.forwardProps,o=t.children,d=t.className,c=t.removeScrollBar,u=t.enabled,h=t.shards,x=t.sideCar,g=t.noRelative,j=t.noIsolation,y=t.inert,b=t.allowPinchZoom,N=t.as,C=N===void 0?"div":N,_=t.gapMode,A=jh(t,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),k=x,E=Sme([a,s]),D=Io(Io({},A),n);return m.createElement(m.Fragment,null,u&&m.createElement(k,{sideCar:_V,removeScrollBar:c,shards:h,noRelative:g,noIsolation:j,inert:y,setCallbacks:i,allowPinchZoom:!!b,lockRef:a,gapMode:_}),l?m.cloneElement(m.Children.only(o),Io(Io({},D),{ref:E})):m.createElement(C,Io({},D,{className:d,ref:E}),o))});U1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};U1.classNames={fullWidth:pw,zeroRight:xw};var Dme=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Tme(){if(!document)return null;var t=document.createElement("style");t.type="text/css";var s=Dme();return s&&t.setAttribute("nonce",s),t}function Fme(t,s){t.styleSheet?t.styleSheet.cssText=s:t.appendChild(document.createTextNode(s))}function Rme(t){var s=document.head||document.getElementsByTagName("head")[0];s.appendChild(t)}var Ome=function(){var t=0,s=null;return{add:function(a){t==0&&(s=Tme())&&(Fme(s,a),Rme(s)),t++},remove:function(){t--,!t&&s&&(s.parentNode&&s.parentNode.removeChild(s),s=null)}}},Ime=function(){var t=Ome();return function(s,a){m.useEffect(function(){return t.add(s),function(){t.remove()}},[s&&a])}},CV=function(){var t=Ime(),s=function(a){var r=a.styles,n=a.dynamic;return t(r,n),null};return s},Lme={left:0,top:0,right:0,gap:0},Ik=function(t){return parseInt(t||"",10)||0},Mme=function(t){var s=window.getComputedStyle(document.body),a=s[t==="padding"?"paddingLeft":"marginLeft"],r=s[t==="padding"?"paddingTop":"marginTop"],n=s[t==="padding"?"paddingRight":"marginRight"];return[Ik(a),Ik(r),Ik(n)]},Bme=function(t){if(t===void 0&&(t="margin"),typeof window>"u")return Lme;var s=Mme(t),a=document.documentElement.clientWidth,r=window.innerWidth;return{left:s[0],top:s[1],right:s[2],gap:Math.max(0,r-a+s[2]-s[0])}},$me=CV(),$f="data-scroll-locked",Ume=function(t,s,a,r){var n=t.left,i=t.top,l=t.right,o=t.gap;return a===void 0&&(a="margin"),`
apps\web\dist\assets\index-Bz84JA8h.js:116:                  `,children:r.method}),e.jsx("span",{className:"font-mono text-[#EDF5F2]/80 text-sm flex-1",children:r.path}),e.jsx("span",{className:"text-[#EDF5F2]/40 text-sm",children:r.desc}),e.jsx(Jt,{className:"w-4 h-4 text-[#EDF5F2]/20 group-hover:text-[#B2F273] transition-colors"})]},n))})]})]})]}),e.jsx(er,{})]})},Fpe=[{id:"1-5",title:"General Provisions (Articles 1-5)",desc:"Application, definitions, and interpretations."},{id:"6-13",title:"Liabilities and Responsibilities (Articles 6-13)",desc:"Issuing bank and confirming bank undertakings."},{id:"14-17",title:"Examination of Documents (Articles 14-17)",desc:"Standard for examination of documents."},{id:"18-28",title:"Documents (Articles 18-28)",desc:"Commercial invoice, transport documents, insurance."},{id:"29-33",title:"Miscellaneous Provisions (Articles 29-33)",desc:"Extension of expiry dates, tolerance in amount."},{id:"34-37",title:"Disclaimers (Articles 34-37)",desc:"Effectiveness of documents, transmission and translation."},{id:"38-39",title:"Transferable Credits (Articles 38-39)",desc:"Transferability and assignment of proceeds."}],Rpe=()=>e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"max-w-4xl mx-auto mb-16 text-center",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 mb-6",children:[e.jsx(yi,{className:"w-5 h-5 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] font-mono text-xs tracking-widest uppercase",children:"Digital Guide"})]}),e.jsxs("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 font-display",children:["The Definitive Guide to",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"UCP 600."})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 leading-relaxed",children:"Uniform Customs and Practice for Documentary Credits (UCP 600) is the set of rules that govern Letters of Credit worldwide. TRDR Hub's engine is built on these 39 articles."})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-12 max-w-6xl mx-auto",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:Fpe.map((t,s)=>e.jsx("div",{className:"group p-6 rounded-2xl bg-[#00382E]/30 border border-[#EDF5F2]/10 hover:border-[#B2F273]/30 transition-all cursor-pointer",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 group-hover:text-[#B2F273] transition-colors",children:t.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:t.desc})]}),e.jsx(xr,{className:"w-5 h-5 text-[#EDF5F2]/20 group-hover:text-[#B2F273] transition-colors mt-1"})]})},s))}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"p-6 rounded-2xl bg-[#B2F273]/10 border border-[#B2F273]/20",children:[e.jsxs("h3",{className:"text-lg font-bold text-[#B2F273] mb-4 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-5 h-5"}),"Why it matters"]}),e.jsx("p",{className:"text-[#EDF5F2]/80 text-sm mb-4",children:"70% of documents are rejected on first presentation because of discrepancies against UCP 600 rules."}),e.jsxs("ul",{className:"space-y-2 text-sm text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-[#B2F273] shrink-0 mt-0.5"}),"Avoid discrepancy fees"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-[#B2F273] shrink-0 mt-0.5"}),"Speed up payments"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Qs,{className:"w-4 h-4 text-[#B2F273] shrink-0 mt-0.5"}),"Reduce operational risk"]})]})]}),e.jsxs("div",{className:"p-6 rounded-2xl bg-[#00261C] border border-[#EDF5F2]/10 text-center",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:"Automate UCP 600"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-6",children:"Don't memorize the rules. Let our AI validate your documents against them instantly."}),e.jsx(M,{className:"w-full bg-[#B2F273] text-[#00261C] hover:bg-[#a3e662] font-bold",children:"Try LCopilot Free"})]})]})]})]})]}),e.jsx(er,{})]}),of={title:"The End of Paper: How Digital LCs are Finally Happening",excerpt:"After decades of false starts, the adoption of MLETR and digital trade standards is reaching a tipping point. Here's what it means for your business.",date:"Jan 15, 2026",category:"Industry Trends",image:"https://images.unsplash.com/photo-1611974765270-ca12586343bb?q=80&w=2070&auto=format&fit=crop"},Ope=[{title:"5 Common Discrepancies in Bills of Lading (and How to Fix Them)",excerpt:"A deep dive into Article 20 of UCP 600 and the most frequent errors we see in transport documents.",author:"Mike Ross",date:"Jan 10, 2026",category:"Compliance",readTime:"5 min read"},{title:"Understanding Sanctions Screening for Dual-Use Goods",excerpt:"Navigating the complex landscape of export controls and ensuring your goods aren't flagged.",author:"Elena Rodriguez",date:"Jan 05, 2026",category:"Risk Management",readTime:"8 min read"},{title:"API-First Trade Finance: Integrating Validation into Your ERP",excerpt:"A technical guide for developers looking to automate document checks within SAP or Oracle.",author:"David Kim",date:"Dec 28, 2025",category:"Engineering",readTime:"12 min read"}],Ipe=()=>e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h1",{className:"text-4xl md:text-6xl font-bold text-white mb-6 font-display",children:"Trade Insights"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 max-w-2xl mx-auto font-light",children:"Expert analysis, technical guides, and industry updates from the TRDR Hub team."})]}),e.jsx("div",{className:"max-w-6xl mx-auto mb-20",children:e.jsxs(pe,{to:"#",className:"group relative block rounded-3xl overflow-hidden aspect-[21/9] border border-[#EDF5F2]/10",children:[e.jsx("img",{src:of.image,alt:of.title,className:"absolute inset-0 w-full h-full object-cover transition-transform duration-700 group-hover:scale-105"}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-[#00261C] via-[#00261C]/50 to-transparent"}),e.jsxs("div",{className:"absolute bottom-0 left-0 p-8 md:p-12 max-w-3xl",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-sm font-mono",children:[e.jsx("span",{className:"bg-[#B2F273] text-[#00261C] px-3 py-1 rounded-full font-bold uppercase tracking-wider",children:of.category}),e.jsxs("span",{className:"text-[#EDF5F2]/80 flex items-center gap-2",children:[e.jsx(ya,{className:"w-4 h-4"})," ",of.date]})]}),e.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-4 font-display leading-tight group-hover:text-[#B2F273] transition-colors",children:of.title}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/80 line-clamp-2 mb-6",children:of.excerpt}),e.jsxs("div",{className:"flex items-center gap-2 text-[#B2F273] font-bold",children:["Read Article ",e.jsx(Jt,{className:"w-4 h-4 group-hover:translate-x-1 transition-transform"})]})]})]})}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-6xl mx-auto",children:Ope.map((t,s)=>e.jsxs(pe,{to:"#",className:"group bg-[#00382E]/30 border border-[#EDF5F2]/10 rounded-2xl p-8 hover:border-[#B2F273]/30 transition-all hover:-translate-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("span",{className:"text-[#B2F273] font-mono text-xs uppercase tracking-wider",children:t.category}),e.jsx("span",{className:"text-[#EDF5F2]/40 text-xs font-mono",children:t.readTime})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 font-display group-hover:text-[#B2F273] transition-colors",children:t.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed mb-6",children:t.excerpt}),e.jsxs("div",{className:"flex items-center gap-3 pt-6 border-t border-[#EDF5F2]/5",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-[#00261C] flex items-center justify-center border border-[#EDF5F2]/10",children:e.jsx(Ec,{className:"w-4 h-4 text-[#EDF5F2]/60"})}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"text-white font-medium",children:t.author}),e.jsx("div",{className:"text-[#EDF5F2]/40",children:t.date})]})]})]},s))})]})]}),e.jsx(er,{})]}),Uk=[{code:"USD",flag:"ðŸ‡ºðŸ‡¸",label:"USD ($)"},{code:"BDT",flag:"ðŸ‡§ðŸ‡©",label:"Bangladesh (à§³)"},{code:"INR",flag:"ðŸ‡®ðŸ‡³",label:"India (â‚¹)"},{code:"PKR",flag:"ðŸ‡µðŸ‡°",label:"Pakistan (Rs)"},{code:"EUR",flag:"ðŸ‡ªðŸ‡º",label:"Euro (â‚¬)"},{code:"GBP",flag:"ðŸ‡¬ðŸ‡§",label:"UK (Â£)"},{code:"AED",flag:"ðŸ‡¦ðŸ‡ª",label:"UAE (Ø¯.Ø¥)"},{code:"SGD",flag:"ðŸ‡¸ðŸ‡¬",label:"Singapore (S$)"}],Lpe=[{question:"Can I switch plans later?",answer:"Yes, you can upgrade or downgrade your plan at any time. Prorated charges will be applied automatically."},{question:"What payment methods do you accept?",answer:"We accept all major credit cards (Visa, Mastercard, Amex). For Bangladesh, India, and Pakistan, we also support local payment methods via SSLCommerz and Razorpay."},{question:"Is there a free trial?",answer:"Yes, all paid plans come with a 14-day free trial. No credit card is required to start testing the platform."},{question:"What happens if I exceed my limits?",answer:"We'll notify you when you're close to your limit. You can either upgrade your plan or pay for overages at our standard pay-per-use rates."}],Mpe=()=>{const[t,s]=m.useState("USD"),[a,r]=m.useState(!1),[n,i]=m.useState("monthly");m.useEffect(()=>{async function u(){try{const h=await fetch("/api/geo");if(h.ok){const x=await h.json();if(x.country&&x.detected){s(rj(x.country));return}}}catch{try{const h=Intl.DateTimeFormat().resolvedOptions().timeZone;h.includes("Dhaka")?s("BDT"):h.includes("Kolkata")||h.includes("Mumbai")?s("INR"):h.includes("Karachi")?s("PKR"):h.includes("Dubai")?s("AED"):h.includes("Singapore")?s("SGD"):h.includes("London")?s("GBP"):h.includes("Europe/")&&s("EUR")}catch{}}}u()},[]);const l=Uk.find(u=>u.code===t)||Uk[0],o=qx[t],d=_x.filter(u=>u.id!=="enterprise"),c=_x.find(u=>u.id==="enterprise");return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("div",{className:"inline-flex items-center justify-center px-4 py-1.5 rounded-full border border-[#B2F273]/20 bg-[#B2F273]/5 backdrop-blur-sm mb-6",children:e.jsx("span",{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Transparent Pricing"})}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-6 leading-tight font-display",children:["Plans that scale",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"with your trade volume."})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 max-w-2xl mx-auto font-light leading-relaxed mb-10",children:"Private beta access is currently rolling out in stages. Request access and we will onboard qualified teams."}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsxs("button",{onClick:()=>r(!a),className:"flex items-center gap-2 bg-[#00382E] border border-[#EDF5F2]/10 hover:border-[#B2F273]/50 rounded-full px-4 py-2.5 text-sm transition-all text-white min-w-[160px] justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-lg",children:l.flag}),e.jsx("span",{children:l.label})]}),e.jsx(ja,{className:Le("w-4 h-4 text-[#EDF5F2]/40 transition-transform",a&&"rotate-180")})]}),a&&e.jsx("div",{className:"absolute top-full left-0 mt-2 bg-[#00382E] border border-[#EDF5F2]/10 rounded-xl shadow-xl z-50 min-w-[180px] overflow-hidden py-1",children:Uk.map(u=>e.jsxs("button",{onClick:()=>{s(u.code),r(!1)},className:Le("w-full flex items-center gap-3 px-4 py-2.5 text-sm hover:bg-[#B2F273]/10 transition-colors text-left",t===u.code?"text-[#B2F273]":"text-[#EDF5F2]/80"),children:[e.jsx("span",{className:"text-lg",children:u.flag}),e.jsx("span",{children:u.label})]},u.code))})]}),e.jsxs("div",{className:"flex items-center gap-3 bg-[#00382E] border border-[#EDF5F2]/10 rounded-full px-1.5 py-1.5",children:[e.jsx("button",{onClick:()=>i("monthly"),className:Le("px-4 py-1.5 rounded-full text-sm font-medium transition-all",n==="monthly"?"bg-[#B2F273] text-[#00261C]":"text-[#EDF5F2]/60 hover:text-white"),children:"Monthly"}),e.jsxs("button",{onClick:()=>i("yearly"),className:Le("px-4 py-1.5 rounded-full text-sm font-medium transition-all flex items-center gap-2",n==="yearly"?"bg-[#B2F273] text-[#00261C]":"text-[#EDF5F2]/60 hover:text-white"),children:["Yearly",e.jsx("span",{className:Le("text-[10px] px-1.5 py-0.5 rounded-full font-bold uppercase tracking-wide",n==="yearly"?"bg-[#00261C]/20 text-[#00261C]":"bg-[#B2F273] text-[#00261C]"),children:"-16%"})]})]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-6xl mx-auto mb-12",children:d.map(u=>{const h=e2(u,t,n),x=Vm(u,t,n),g=Vm(u,t,"yearly")*12;return e.jsxs("div",{className:Le("relative bg-[#00261C] border rounded-3xl p-8 flex flex-col transition-all duration-300 group",u.popular?"border-[#B2F273] shadow-[0_0_40px_-10px_rgba(178,242,115,0.2)] scale-105 z-10":"border-[#EDF5F2]/10 hover:border-[#EDF5F2]/20 hover:bg-[#00382E]/30"),children:[u.popular&&e.jsx("div",{className:"absolute -top-4 left-1/2 -translate-x-1/2",children:e.jsx("span",{className:"bg-[#B2F273] text-[#00261C] px-4 py-1 rounded-full text-xs font-bold uppercase tracking-wider",children:"Most Popular"})}),e.jsxs("div",{className:"mb-8",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-display",children:u.name}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm h-10",children:u.description})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-baseline gap-1",children:[e.jsx("span",{className:"text-4xl md:text-5xl font-bold text-white font-display tracking-tight",children:h}),e.jsx("span",{className:"text-[#EDF5F2]/40",children:"/mo"})]}),n==="yearly"&&x>0&&e.jsxs("p",{className:"text-xs text-[#B2F273] mt-2 font-mono",children:["Billed ",o?.symbol,g.toLocaleString()," yearly"]})]}),e.jsx("div",{className:"flex-1 mb-8",children:e.jsx("ul",{className:"space-y-4",children:u.features.map((j,y)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Le("w-5 h-5 rounded-full flex items-center justify-center shrink-0 mt-0.5",u.popular?"bg-[#B2F273]":"bg-[#00382E] border border-[#EDF5F2]/10"),children:e.jsx(Za,{className:Le("w-3 h-3",u.popular?"text-[#00261C]":"text-[#EDF5F2]/60")})}),e.jsx("span",{className:"text-[#EDF5F2]/80 text-sm leading-relaxed",children:j})]},y))})}),e.jsx(M,{size:"lg",className:Le("w-full font-bold h-12 border-none transition-all duration-300",u.popular?"bg-[#B2F273] text-[#00261C] hover:bg-[#a3e662]":"bg-[#EDF5F2]/5 text-white hover:bg-[#EDF5F2]/10"),asChild:!0,children:e.jsxs(pe,{to:"/register",children:["Start Free Trial",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})]},u.id)})}),c&&e.jsx("div",{className:"max-w-6xl mx-auto mb-24",children:e.jsxs("div",{className:"bg-[#00382E]/30 border border-[#EDF5F2]/10 rounded-3xl p-8 md:p-12 relative overflow-hidden group hover:border-[#B2F273]/30 transition-colors",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#B2F273]/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-12 items-center relative z-10",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-10 h-10 bg-[#B2F273]/10 rounded-xl flex items-center justify-center",children:e.jsx(Bs,{className:"w-5 h-5 text-[#B2F273]"})}),e.jsx("h3",{className:"text-2xl font-bold text-white font-display",children:"Enterprise"})]}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-lg mb-8 max-w-xl",children:"For banks and large organizations requiring custom integrations, SLA guarantees, and dedicated support."}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:c.features.map((u,h)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Za,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#EDF5F2]/80 text-sm",children:u})]},h))})]}),e.jsxs("div",{className:"w-full md:w-auto flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"text-center mb-2",children:[e.jsx("span",{className:"text-3xl font-bold text-white font-display",children:"Custom"}),e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Volume-based pricing"})]}),e.jsx(M,{size:"lg",className:"bg-white text-[#00261C] hover:bg-[#EDF5F2] px-8 font-bold border-none min-w-[200px]",asChild:!0,children:e.jsx(pe,{to:"/contact",children:"Contact Sales"})})]})]})]})}),e.jsxs("div",{className:"max-w-3xl mx-auto mb-24",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4 font-display",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Everything you need to know about our pricing."})]}),e.jsx("div",{className:"space-y-4",children:Lpe.map((u,h)=>e.jsxs("div",{className:"bg-[#00382E]/20 border border-[#EDF5F2]/10 rounded-2xl p-6 hover:bg-[#00382E]/40 transition-colors",children:[e.jsxs("h3",{className:"text-lg font-bold text-white mb-2 flex items-start gap-3",children:[e.jsx(Pn,{className:"w-5 h-5 text-[#B2F273] shrink-0 mt-1"}),u.question]}),e.jsx("p",{className:"text-[#EDF5F2]/60 pl-8 leading-relaxed",children:u.answer})]},h))})]}),e.jsxs("div",{className:"text-center border-t border-[#EDF5F2]/10 pt-16",children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm font-mono uppercase tracking-widest mb-2",children:"Private Beta"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto text-sm",children:"We are onboarding selected exporters, importers, and trade operators in controlled batches while hardening reliability."})]})]})]}),e.jsx(er,{})]})},Bpe=[{label:"Trade Volume Secured",value:"$32T",sub:"Global Market Gap"},{label:"Documents Validated",value:"2M+",sub:"Training Dataset"},{label:"Countries Covered",value:"60+",sub:"Regulatory Frameworks"},{label:"Accuracy Rate",value:"99.9%",sub:"Discrepancy Detection"}],$pe=[{icon:Ot,title:"Zero Tolerance for Error",description:"In trade finance, a single typo can cost millions. We build systems that treat every character as critical infrastructure."},{icon:xs,title:"Democratizing Access",description:"Sophisticated compliance tools shouldn't be reserved for Tier 1 banks. We bring enterprise-grade tech to every exporter."},{icon:Xm,title:"Deterministic AI",description:"We don't believe in 'hallucinations' when money is on the line. Our AI is grounded in hard rules and verifiable facts."},{icon:rue,title:"Partner, Not Vendor",description:"We succeed only when our users ship faster, get paid sooner, and sleep better. Your growth is our north star."}],Upe=()=>e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-24",children:[e.jsx("div",{className:"inline-flex items-center justify-center px-4 py-1.5 rounded-full border border-[#B2F273]/20 bg-[#B2F273]/5 backdrop-blur-sm mb-6",children:e.jsx("span",{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Our Mission"})}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-8 leading-tight font-display",children:["Rewriting the Operating System",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"of Global Trade."})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 max-w-3xl mx-auto font-light leading-relaxed",children:"Global trade is a $32 trillion industry running on paper, PDFs, and email. We're building the digital infrastructure to make it instant, error-free, and accessible to everyone."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 mb-32 border-y border-[#EDF5F2]/10 py-12",children:Bpe.map((t,s)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl md:text-5xl font-bold text-white mb-2 font-display",children:t.value}),e.jsx("div",{className:"text-[#B2F273] font-bold mb-1",children:t.label}),e.jsx("div",{className:"text-[#EDF5F2]/40 text-xs font-mono uppercase tracking-wider",children:t.sub})]},s))}),e.jsx("div",{className:"max-w-4xl mx-auto mb-32",children:e.jsxs("div",{className:"bg-[#00382E]/30 border border-[#EDF5F2]/10 rounded-3xl p-8 md:p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#B2F273]/5 rounded-full blur-3xl"}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 font-display",children:"Why We Built TRDR Hub"}),e.jsxs("div",{className:"space-y-6 text-[#EDF5F2]/80 leading-relaxed text-lg",children:[e.jsxs("p",{children:["Every year, ",e.jsx("strong",{children:"4 billion"})," trade documents circulate the globe.",e.jsx("strong",{children:" 70%"})," of them contain errors on the first presentation."]}),e.jsx("p",{children:"For a small exporter in Bangladesh or Vietnam, a single discrepancy in a Letter of Credit isn't just an annoyanceâ€”it's an existential threat. It means delayed payments, stranded cargo, and expensive penalties."}),e.jsx("p",{children:"We saw brilliant businesses being held back not by their products, but by paperwork. The existing tools were either too expensive (enterprise ERPs) or too simple (basic PDF editors)."}),e.jsxs("p",{children:["So we built ",e.jsx("strong",{children:"TRDR Hub"}),": A platform that combines the precision of a bank's compliance department with the speed of modern software. We're not just validating documents; we're validating the trust that powers the global economy."]})]})]})}),e.jsxs("div",{className:"mb-32",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6 font-display",children:"Our DNA"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"The principles that guide every line of code we write and every decision we make."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 max-w-5xl mx-auto",children:$pe.map((t,s)=>e.jsxs("div",{className:"bg-[#00261C] border border-[#EDF5F2]/10 rounded-2xl p-8 hover:border-[#B2F273]/30 transition-all duration-300 group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#00382E] rounded-lg flex items-center justify-center mb-6 group-hover:bg-[#B2F273]/20 transition-colors",children:e.jsx(t.icon,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 font-display",children:t.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 leading-relaxed",children:t.description})]},s))})]}),e.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-8 font-display",children:"Join the revolution."}),e.jsx("p",{className:"text-[#EDF5F2]/60 mb-10 text-lg",children:"Whether you're an exporter looking to grow, or a developer looking to build, there's a place for you at TRDR Hub."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] text-[#00261C] hover:bg-[#a3e662] px-8 font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/lcopilot",children:["Start Using TRDR",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})}),e.jsx(M,{variant:"outline",size:"lg",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 hover:border-[#EDF5F2]/40 bg-transparent",asChild:!0,children:e.jsx(pe,{to:"/contact",children:"Contact Us"})})]})]})]})]}),e.jsx(er,{})]});function zpe(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Zt=m.forwardRef(({className:t,...s},a)=>e.jsx("textarea",{className:zpe("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:a,...s}));Zt.displayName="Textarea";const qpe=()=>{const[t,s]=m.useState({name:"",email:"",subject:"",message:""}),a=n=>{n.preventDefault(),console.log("Contact form submitted:",t),alert("Thank you for your message! We'll get back to you soon."),s({name:"",email:"",subject:"",message:""})},r=n=>{s({...t,[n.target.name]:n.target.value})};return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-24",children:[e.jsx("div",{className:"inline-flex items-center justify-center px-4 py-1.5 rounded-full border border-[#B2F273]/20 bg-[#B2F273]/5 backdrop-blur-sm mb-6",children:e.jsx("span",{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Contact Us"})}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-8 leading-tight font-display",children:["Let's Talk",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Trade."})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 max-w-2xl mx-auto font-light leading-relaxed",children:"Whether you're an enterprise looking for a custom solution or a developer with a technical question, we're here to help."})]}),e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-12",children:[e.jsxs($,{className:"bg-[#00382E]/30 border border-[#EDF5F2]/10 backdrop-blur-sm",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-2xl font-bold text-white font-display",children:"Send us a message"})}),e.jsx(U,{children:e.jsxs("form",{onSubmit:a,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",className:"text-[#EDF5F2]/80",children:"Full Name"}),e.jsx(oe,{id:"name",name:"name",value:t.name,onChange:r,required:!0,className:"bg-[#00261C] border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/20 focus:border-[#B2F273]/50",placeholder:"John Doe"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-[#EDF5F2]/80",children:"Email Address"}),e.jsx(oe,{id:"email",name:"email",type:"email",value:t.email,onChange:r,required:!0,className:"bg-[#00261C] border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/20 focus:border-[#B2F273]/50",placeholder:"john@company.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"subject",className:"text-[#EDF5F2]/80",children:"Subject"}),e.jsx(oe,{id:"subject",name:"subject",value:t.subject,onChange:r,required:!0,className:"bg-[#00261C] border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/20 focus:border-[#B2F273]/50",placeholder:"How can we help?"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"message",className:"text-[#EDF5F2]/80",children:"Message"}),e.jsx(Zt,{id:"message",name:"message",value:t.message,onChange:r,required:!0,className:"min-h-[150px] bg-[#00261C] border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/20 focus:border-[#B2F273]/50",placeholder:"Tell us about your project..."})]}),e.jsxs(M,{type:"submit",size:"lg",className:"w-full bg-[#B2F273] text-[#00261C] hover:bg-[#a3e662] font-bold",children:[e.jsx($i,{className:"w-4 h-4 mr-2"}),"Send Message"]})]})})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"grid gap-6",children:[e.jsx("div",{className:"group bg-[#00261C] border border-[#EDF5F2]/10 rounded-2xl p-6 hover:border-[#B2F273]/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#00382E] rounded-xl flex items-center justify-center shrink-0 group-hover:bg-[#B2F273]/20 transition-colors",children:e.jsx(Lg,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg mb-1 font-display",children:"Sales Inquiry"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-3",children:"Interested in Enterprise plans or custom integrations?"}),e.jsx("a",{href:"mailto:sales@trdrhub.com",className:"text-[#B2F273] hover:underline font-medium",children:"sales@trdrhub.com"})]})]})}),e.jsx("div",{className:"group bg-[#00261C] border border-[#EDF5F2]/10 rounded-2xl p-6 hover:border-[#B2F273]/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#00382E] rounded-xl flex items-center justify-center shrink-0 group-hover:bg-[#B2F273]/20 transition-colors",children:e.jsx(Pn,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg mb-1 font-display",children:"Technical Support"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-3",children:"Need help with the API or platform features?"}),e.jsx("a",{href:"mailto:support@trdrhub.com",className:"text-[#B2F273] hover:underline font-medium",children:"support@trdrhub.com"})]})]})}),e.jsx("div",{className:"group bg-[#00261C] border border-[#EDF5F2]/10 rounded-2xl p-6 hover:border-[#B2F273]/30 transition-all duration-300",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-[#00382E] rounded-xl flex items-center justify-center shrink-0 group-hover:bg-[#B2F273]/20 transition-colors",children:e.jsx(Bs,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-white text-lg mb-1 font-display",children:"Global HQ"}),e.jsxs("p",{className:"text-[#EDF5F2]/60 text-sm mb-3",children:["71 Ayer Rajah Crescent, #05-14",e.jsx("br",{}),"Singapore 139951"]}),e.jsx("div",{className:"flex gap-4 text-sm",children:e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Reg: 202312345K"})})]})]})})]}),e.jsxs("div",{className:"relative h-48 bg-[#00382E]/30 rounded-2xl border border-[#EDF5F2]/10 overflow-hidden flex items-center justify-center",children:[e.jsx("div",{className:"absolute inset-0 opacity-20 bg-[url('https://upload.wikimedia.org/wikipedia/commons/e/ec/World_map_blank_without_borders.svg')] bg-cover bg-center"}),e.jsxs("div",{className:"relative z-10 flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-[#B2F273] rounded-full animate-ping"}),e.jsx("span",{className:"text-[#B2F273] font-mono text-sm tracking-widest uppercase",children:"Operating Globally"})]})]})]})]})})]})]}),e.jsx(er,{})]})};function ZD({title:t,lastUpdated:s,children:a}){return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"pt-48 md:pt-48 pb-24 relative min-h-screen",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none fixed"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"mb-16 text-center",children:[e.jsx("h1",{className:"text-4xl md:text-5xl font-bold text-white mb-6 font-display",children:t}),e.jsxs("p",{className:"text-[#EDF5F2]/40 font-mono text-sm uppercase tracking-widest",children:["Last Updated: ",s]})]}),e.jsxs("div",{className:"bg-[#00382E]/30 border border-[#EDF5F2]/10 rounded-3xl p-8 md:p-12 relative overflow-hidden backdrop-blur-sm",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"relative z-10 prose prose-invert prose-lg max-w-none prose-headings:font-display prose-headings:text-white prose-p:text-[#EDF5F2]/80 prose-strong:text-white prose-a:text-[#B2F273] prose-li:text-[#EDF5F2]/80 hover:prose-a:text-[#a3e662]",children:a})]})]})})]}),e.jsx(er,{})]})}const Vpe=()=>e.jsxs(ZD,{title:"Privacy Policy",lastUpdated:"January 15, 2026",children:[e.jsx("p",{children:'At TRDR Hub ("we", "us", or "our"), we take the privacy and security of your trade data seriously. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our website and services.'}),e.jsx("h3",{children:"1. Information We Collect"}),e.jsx("p",{children:"We collect information that you provide directly to us, including:"}),e.jsxs("ul",{children:[e.jsxs("li",{children:[e.jsx("strong",{children:"Account Information:"})," Name, email address, company name, and role."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Trade Documents:"})," Letters of Credit, Bills of Lading, Invoices, and other trade-related documents you upload for validation."]}),e.jsxs("li",{children:[e.jsx("strong",{children:"Payment Information:"})," Billing address and payment method details (processed by our third-party payment processors)."]})]}),e.jsx("h3",{children:"2. How We Use Your Information"}),e.jsx("p",{children:"We use the information we collect to:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"Provide, maintain, and improve our services, including our AI validation models."}),e.jsx("li",{children:"Process transactions and send related information, including confirmations and invoices."}),e.jsx("li",{children:"Send you technical notices, updates, security alerts, and support messages."}),e.jsx("li",{children:"Respond to your comments, questions, and requests."})]}),e.jsx("h3",{children:"3. Data Sovereignty & AI Training"}),e.jsxs("p",{children:[e.jsx("strong",{children:"Your Data is Yours."})," We do not sell your trade data to third parties."]}),e.jsx("p",{children:"We may use anonymized and aggregated data to improve our machine learning models. You can opt-out of this data usage for model training by contacting our support team or adjusting your organization settings (Enterprise plans only)."}),e.jsx("h3",{children:"4. Data Security"}),e.jsx("p",{children:"We implement bank-grade security measures designed to protect your information, including:"}),e.jsxs("ul",{children:[e.jsx("li",{children:"AES-256 encryption for data at rest."}),e.jsx("li",{children:"TLS 1.3 encryption for data in transit."}),e.jsx("li",{children:"Strict access controls and audit logging."})]}),e.jsx("h3",{children:"5. Your Rights"}),e.jsx("p",{children:"Depending on your location, you may have rights under GDPR, CCPA, or other privacy laws, including the right to access, correct, or delete your personal data."}),e.jsx("h3",{children:"6. Contact Us"}),e.jsxs("p",{children:["If you have any questions about this Privacy Policy, please contact us at ",e.jsx("a",{href:"mailto:privacy@trdrhub.com",children:"privacy@trdrhub.com"}),"."]})]}),Wpe=()=>e.jsxs(ZD,{title:"Terms of Service",lastUpdated:"January 15, 2026",children:[e.jsx("p",{children:'Please read these Terms of Service ("Terms") carefully before using the TRDR Hub platform operated by Enso Intelligence ("us", "we", or "our").'}),e.jsx("h3",{children:"1. Acceptance of Terms"}),e.jsx("p",{children:"By accessing or using our Service, you agree to be bound by these Terms. If you disagree with any part of the terms, then you may not access the Service."}),e.jsx("h3",{children:"2. Description of Service"}),e.jsxs("p",{children:["TRDR Hub provides AI-powered tools for trade document validation, sanctions screening, and compliance management.",e.jsx("strong",{children:"We are a technology provider, not a bank or legal advisor."})," Our validation results are for informational purposes only and should not be considered as legal or financial advice."]}),e.jsx("h3",{children:"3. User Accounts"}),e.jsx("p",{children:"When you create an account with us, you must provide information that is accurate, complete, and current at all times. Failure to do so constitutes a breach of the Terms, which may result in immediate termination of your account."}),e.jsx("h3",{children:"4. Intellectual Property"}),e.jsx("p",{children:"The Service and its original content (excluding Content provided by users), features, and functionality are and will remain the exclusive property of Enso Intelligence and its licensors."}),e.jsx("h3",{children:"5. Limitation of Liability"}),e.jsx("p",{children:"In no event shall Enso Intelligence, nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from your access to or use of or inability to access or use the Service."}),e.jsx("h3",{children:"6. Discrepancy Fee Guarantee"}),e.jsx("p",{children:"For eligible Pro and Enterprise users, we offer a limited reimbursement for bank discrepancy fees incurred due to errors missed by our platform, subject to the specific terms outlined in your Service Level Agreement (SLA)."}),e.jsx("h3",{children:"7. Governing Law"}),e.jsx("p",{children:"These Terms shall be governed and construed in accordance with the laws of Singapore, without regard to its conflict of law provisions."}),e.jsx("h3",{children:"8. Changes"}),e.jsx("p",{children:"We reserve the right, at our sole discretion, to modify or replace these Terms at any time. If a revision is material we will try to provide at least 30 days notice prior to any new terms taking effect."}),e.jsx("h3",{children:"9. Contact Us"}),e.jsxs("p",{children:["If you have any questions about these Terms, please contact us at ",e.jsx("a",{href:"mailto:legal@trdrhub.com",children:"legal@trdrhub.com"}),"."]})]}),Hpe=()=>e.jsxs(ZD,{title:"Security & Compliance",lastUpdated:"January 15, 2026",children:[e.jsx("p",{className:"lead text-xl",children:"Trust is the currency of trade. We've built TRDR Hub with a security-first architecture to ensure your sensitive financial data never falls into the wrong hands."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 my-12 not-prose",children:[e.jsxs("div",{className:"bg-[#00261C] border border-[#EDF5F2]/10 p-6 rounded-xl",children:[e.jsx(Ot,{className:"w-8 h-8 text-[#B2F273] mb-4"}),e.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"Security Program"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Our security controls are actively hardened during private beta, with formal audit roadmap aligned to scale."})]}),e.jsxs("div",{className:"bg-[#00261C] border border-[#EDF5F2]/10 p-6 rounded-xl",children:[e.jsx($o,{className:"w-8 h-8 text-[#B2F273] mb-4"}),e.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"End-to-End Encryption"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Data is encrypted in transit via TLS 1.3 and at rest using AES-256 with AWS KMS managed keys."})]}),e.jsxs("div",{className:"bg-[#00261C] border border-[#EDF5F2]/10 p-6 rounded-xl",children:[e.jsx(M1,{className:"w-8 h-8 text-[#B2F273] mb-4"}),e.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"Data Residency"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Enterprise customers can choose to host their data in specific regions (US, EU, SG) to meet compliance needs."})]}),e.jsxs("div",{className:"bg-[#00261C] border border-[#EDF5F2]/10 p-6 rounded-xl",children:[e.jsx(Gs,{className:"w-8 h-8 text-[#B2F273] mb-4"}),e.jsx("h4",{className:"text-white font-bold text-lg mb-2",children:"Security Testing"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Infrastructure and API security testing are performed as part of our staged hardening process."})]})]}),e.jsx("h3",{children:"Infrastructure Security"}),e.jsx("p",{children:"Our platform runs on Amazon Web Services (AWS), utilizing their world-class data center security. We employ a zero-trust network architecture where every service-to-service call is authenticated and authorized."}),e.jsx("h3",{children:"Data Privacy"}),e.jsx("p",{children:"We strictly separate customer data. Your trade documents are stored in dedicated S3 buckets with unique encryption keys. We enforce strict role-based access control (RBAC) internally; no engineer has standing access to customer production data."}),e.jsx("h3",{children:"Vulnerability Disclosure"}),e.jsxs("p",{children:["We value the contributions of the security research community. If you believe you've found a vulnerability in TRDR Hub, please report it to ",e.jsx("a",{href:"mailto:security@trdrhub.com",children:"security@trdrhub.com"}),". We offer a bug bounty program for valid disclosures."]})]}),Gpe=[{id:"party",title:"Screen a Party",description:"Check buyers, sellers, banks, and agents against sanctions lists",to:"/sanctions/dashboard/screen/party",icon:xs,accent:"from-red-500 to-red-600"},{id:"vessel",title:"Screen a Vessel",description:"Verify vessels against sanctioned flags, owners, and dark activity patterns",to:"/sanctions/dashboard/screen/vessel",icon:Us,accent:"from-orange-500 to-orange-600"},{id:"goods",title:"Screen Goods",description:"Check HS codes against dual-use and export control lists",to:"/sanctions/dashboard/screen/goods",icon:Ve,accent:"from-yellow-500 to-yellow-600"}],Kpe=[{icon:Qm,title:"50+ Global Sanctions Lists",description:"Screen against OFAC SDN, EU Consolidated, UN Security Council, UK OFSI, and dozens more.",bullets:["OFAC SDN & Sectoral Lists","EU 14 Russia packages","UN 1718 DPRK sanctions","UK OFSI & Magnitsky"]},{icon:Lt,title:"Updated Within Hours",description:"Lists are synced within hours of official publication. Never screen against stale data.",bullets:["Daily list synchronization","Alert on list changes","Historical screening available","Timestamp on every result"]},{icon:Us,title:"Vessel & Port Screening",description:"Screen vessels against sanctioned flags, ownership chains, and AIS dark activity patterns.",bullets:["IMO number lookup","Flag state verification","Ownership chain analysis","Dark activity detection"]},{icon:xs,title:"Intelligent Name Matching",description:"Fuzzy matching catches spelling variations, transliterations, and aliases that exact matching misses.",bullets:["Multi-language support","Alias database included","Phonetic matching","OFAC 50% rule applied"]},{icon:Ve,title:"Dual-Use Goods Check",description:"Screen goods descriptions against export control lists including EAR, EU 2021/821, and Wassenaar.",bullets:["HS code classification","ECCN lookup","End-use screening","License determination"]},{icon:gn,title:"Results in Under 2 Seconds",description:"Instant screening for single queries. Batch upload for bulk operations. API for integration.",bullets:["Single & batch modes","API access available","PDF certificate download","Audit trail included"]}],Ype=[{step:"1",title:"Enter Details",description:"Type a party name, paste an IMO number, or describe your goods"},{step:"2",title:"Select Lists",description:"Choose which sanctions lists to screen against (we recommend all)"},{step:"3",title:"Get Results",description:"Instant clear/match status with downloadable compliance certificate"}],Zpe=[{value:"50+",label:"Sanctions Lists"},{value:"<2s",label:"Screening Time"},{value:"99.9%",label:"Uptime"},{value:"Daily",label:"List Updates"}],Jpe=[{tier:"Free",screens:"10",price:"$0",description:"Try before you commit"},{tier:"Starter",screens:"100",price:"$29/mo",description:"For occasional traders"},{tier:"Professional",screens:"500",price:"$99/mo",description:"For active exporters",popular:!0},{tier:"Enterprise",screens:"Unlimited",price:"$299/mo",description:"For banks & freight"}],Qpe=[{q:"Which sanctions lists do you cover?",a:"We cover 50+ lists including OFAC SDN, EU Consolidated, UN Security Council, UK OFSI, Australia DFAT, Canada SEMA, and more. We also include sectoral sanctions (SSI, CAPTA) and entity-based lists (BIS Entity List, EAR)."},{q:"How quickly are lists updated?",a:"Lists are synchronized within hours of official publication. OFAC typically updates daily, EU weekly, and UN as published. Every screening result includes a timestamp showing when the lists were last updated."},{q:"Can I integrate with my ERP or compliance system?",a:"Yes, our Professional and Enterprise plans include API access for real-time screening from your existing systems. We provide REST API documentation and sample code."},{q:"What happens when there's a potential match?",a:"We show you the match details including the list source, match confidence score, and the specific entry that triggered the match. You can download a PDF report for your compliance records."},{q:"Is this a replacement for legal advice?",a:"No. TRDR Sanctions Screener is a screening aid, not legal advice. Results should be verified with your compliance team. We update lists regularly but cannot guarantee real-time accuracy."}],Xpe=()=>{const[t,s]=m.useState(null);return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative pt-24 pb-20 lg:pt-32 lg:pb-32 overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-16",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#B2F273]/10 border border-[#B2F273]/20 mb-6",children:[e.jsx(Ot,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] text-sm font-medium",children:"Compliance Tool"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Screen Parties & Goods in"," ",e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Seconds"})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8 leading-relaxed max-w-2xl mx-auto",children:"Enterprise sanctions screening without the enterprise price tag. Check parties, vessels, and goods against OFAC, EU, UN, and 50+ global sanctions lists."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60 mb-12",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"OFAC SDN + Sectoral"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"EU 14 Russia Packages"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Vessel Dark Activity"]})]})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-5xl mx-auto",children:Gpe.map(a=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-all group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(a.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.description}),e.jsx(M,{className:"w-full bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:a.to,children:["Start Screening ",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})]},a.id))})]})]}),e.jsxs("section",{className:"relative py-12 bg-[#00261C] border-y border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto",children:Zpe.map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 font-display",children:a.value}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:a.label})]},r))})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:["Enterprise Tools at Enterprise Prices?"," ",e.jsx("span",{className:"text-[#B2F273]",children:"Not Anymore."})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"Without TRDR"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Dow Jones/World-Check costs $10K+/year"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Manual Google searches miss aliases"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Vessel screening requires separate tools"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"No audit trail for compliance"]})]})]}),e.jsxs("div",{className:"bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"With TRDR"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Starting at $29/month (not $10K)"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Fuzzy matching catches 98% of variations"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Party + vessel + goods in one tool"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Downloadable compliance certificates"]})]})]})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Screen in Three Steps"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"No training required. No complex setup. Just type and screen."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:Ype.map((a,r)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors duration-300",children:e.jsx("span",{className:"text-[#B2F273] font-bold font-display group-hover:text-[#00261C] transition-colors",children:a.step})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:a.description})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Comprehensive Sanctions Coverage"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"More lists, better matching, faster results than tools costing 10x more."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:Kpe.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-colors group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(a.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.bullets.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273] shrink-0"}),n]},i))})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Simple, Transparent Pricing"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Start free. Upgrade when you need more."})]}),e.jsx("div",{className:"grid md:grid-cols-4 gap-6 max-w-5xl mx-auto",children:Jpe.map((a,r)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 text-center backdrop-blur-sm",a.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[a.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:a.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:a.price}),e.jsxs("p",{className:"text-[#EDF5F2]/60 text-sm mb-2",children:[a.screens," screens/mo"]}),e.jsx("p",{className:"text-[#EDF5F2]/40 text-xs",children:a.description})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:Qpe.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===r?null:r),children:[e.jsx("span",{className:"text-white font-medium font-display",children:a.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===r&&"rotate-180")})]}),t===r&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:a.a})})]},r))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Don't Risk Sanctions Violations"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Screen every party, every vessel, every transaction. Start free today."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard",children:["Start Free Screening ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})}),e.jsx(M,{variant:"outline",size:"lg",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",asChild:!0,children:e.jsx(pe,{to:"/contact",children:"Request Demo"})})]})]})})]})]}),e.jsx(er,{})]})},efe=[{icon:bh,title:"AI-Powered Classification",description:"Describe your product in plain language. Our AI finds the correct HS code with duty rates and restrictions.",bullets:["Natural language input","Multi-language support","98% classification accuracy","Confidence scoring"]},{icon:ha,title:"100+ Country Schedules",description:"Get the right code for your destination. US HTS, EU TARIC, UK Tariff, Singapore, and more.",bullets:["US HTS 10-digit codes","EU TARIC codes","UK Trade Tariff","Country-specific duties"]},{icon:Na,title:"Instant Duty Calculator",description:"Know your landed cost before you ship. MFN rates, preferential rates, and FTA savings.",bullets:["MFN rates by country","FTA preference finder","Landed cost estimate","Anti-dumping duties"]},{icon:Ot,title:"FTA Eligibility Check",description:"Check if your product qualifies for preferential treatment under RCEP, CPTPP, USMCA, and 50+ FTAs.",bullets:["Rules of origin check","Cumulation rules","Required documentation","Savings calculator"]},{icon:Be,title:"Restrictions & Controls",description:"Know if your product needs licenses, permits, or faces quotas before you ship.",bullets:["Import licenses required","Quota status check","Restrictions alerts","Export controls"]},{icon:xn,title:"Classification History",description:"Save and track your classifications. Export for customs brokers and compliance audits.",bullets:["Classification archive","PDF export","Share with team","Audit trail included"]}],tfe=[{step:"1",title:"Describe Your Product",description:"Type a description like 'cotton t-shirts for men' or paste your existing HS code to verify"},{step:"2",title:"Select Countries",description:"Choose your import destination and export origin for accurate duty rates and FTA eligibility"},{step:"3",title:"Get Full Details",description:"HS code, duty rates, FTA eligibility, restrictions, and required documents - all in one view"}],sfe=[{value:"98%",label:"Accuracy"},{value:"100+",label:"Countries"},{value:"<5s",label:"Classification"},{value:"Free",label:"To Start"}],afe=["Cotton t-shirts","Electronics","Machinery parts","Food products","Chemicals","Auto parts"],rfe=[{tier:"Free",lookups:"Unlimited basic",price:"$0",description:"HS codes + MFN rates",features:["Basic HS lookup","MFN duty rates","Single country"]},{tier:"Pro",lookups:"Unlimited",price:"$49/mo",description:"Full classification",features:["AI classification","100+ countries","FTA calculator","PDF export"],popular:!0},{tier:"Team",lookups:"Unlimited",price:"$149/mo",description:"For trade teams",features:["Everything in Pro","5 users","Classification history","API access"]}],nfe=[{q:"How accurate is the AI classification?",a:"Our AI achieves 98% accuracy on first suggestion. For complex products, we provide multiple candidate codes ranked by confidence. We recommend reviewing the classification with your customs broker for high-value or novel products."},{q:"Which countries' tariff schedules do you support?",a:"We support 100+ countries including US (HTS), EU (TARIC), UK, China, Japan, India, Australia, Singapore, and more. Each country schedule is updated when the WCO releases amendments."},{q:"Can I check FTA eligibility?",a:"Yes! Select your origin and destination countries, and we'll show you which FTAs apply, the preferential duty rate, rules of origin requirements, and required documentation (Form A, EUR.1, etc.)."},{q:"Is this free to use?",a:"Yes, basic search is 100% free - no sign-up required. Free tier includes HS code lookup and MFN duty rates for any single country. Paid plans add AI classification, multi-country comparison, FTA calculator, and classification history."},{q:"How often are duty rates updated?",a:"We sync duty rates monthly with official sources (US ITC, EU TARIC, etc.). FTA rates and preferential programs are updated as changes are published. Anti-dumping and countervailing duties are updated within 48 hours of publication."},{q:"Can I use this for customs declarations?",a:"TRDR HS Code Finder provides classification suggestions and duty rate estimates. Final classification for customs declarations should be verified with your licensed customs broker or through official binding ruling processes."}],ife=()=>{const[t,s]=m.useState(null),[a,r]=m.useState("");return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative pt-24 pb-20 lg:pt-32 lg:pb-32 overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#B2F273]/10 border border-[#B2F273]/20 mb-6",children:[e.jsx(nl,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] text-sm font-medium",children:"100% Free Tool"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Find the Right"," ",e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"HS Code"})," ","in Seconds"]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8 leading-relaxed max-w-2xl mx-auto",children:"Stop guessing tariff codes. Our AI classifies your products with duty rates, FTA eligibility, and import restrictions for 100+ countries. Free, instant, accurate."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60 mb-12",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"100% Free"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"No Sign-Up Required"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Instant Results"]})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-[#00382E]/80 border border-[#EDF5F2]/10 rounded-2xl p-6 backdrop-blur-md shadow-xl",children:[e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:"Describe your product in plain language:"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"e.g., Cotton t-shirts for men, made in Bangladesh",value:a,onChange:n=>r(n.target.value),className:"flex-1 bg-[#00261C] border border-[#EDF5F2]/10 rounded-lg px-4 py-3 text-white placeholder-[#EDF5F2]/30 focus:outline-none focus:border-[#B2F273]/50 transition-colors"}),e.jsx(M,{className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] px-6 font-bold",asChild:!0,children:e.jsx(pe,{to:`/hs-code/search?q=${encodeURIComponent(a)}`,children:e.jsx(Bt,{className:"w-5 h-5"})})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-xs text-[#EDF5F2]/40",children:"Popular:"}),afe.map((n,i)=>e.jsx("button",{onClick:()=>r(n),className:"text-xs text-[#B2F273] hover:text-[#a3e662] hover:underline transition-colors",children:n},i))]})]})})]})]}),e.jsxs("section",{className:"relative py-12 bg-[#00261C] border-y border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-3xl mx-auto",children:sfe.map((n,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 font-display",children:n.value}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:n.label})]},i))})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:["HS Code Classification is"," ",e.jsx("span",{className:"text-[#B2F273]",children:"Confusing"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8 mb-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-red-400 mt-1",children:"âœ—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"5,000+ codes to choose from"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Complex hierarchy, overlapping categories, endless notes"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-red-400 mt-1",children:"âœ—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Wrong code = wrong duties"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Overpay or face penalties and delays for underpayment"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-red-400 mt-1",children:"âœ—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Codes differ by country"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"6-digit WCO â†’ 8/10-digit national codes with different rules"})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:"text-red-400 mt-1",children:"âœ—"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"FTA savings left on the table"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Most traders don't know which FTAs apply or how to qualify"})]})]})]}),e.jsxs("div",{className:"bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"TRDR HS Code Finder solves this"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Describe products in plain language"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"AI suggests best matches with confidence scores"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"See duty rates for any country instantly"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Check FTA eligibility and save thousands"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Know restrictions before you ship"]})]})]})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Classification in Three Steps"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"No training required. No customs expertise needed. Just type and get results."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:tfe.map((n,i)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors duration-300",children:e.jsx("span",{className:"text-[#B2F273] font-bold font-display group-hover:text-[#00261C] transition-colors",children:n.step})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:n.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:n.description})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"More Than Just HS Codes"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Get duty rates, FTA eligibility, and import restrictions - everything for customs clearance."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:efe.map((n,i)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-colors group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(n.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:n.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:n.description}),e.jsx("ul",{className:"space-y-2",children:n.bullets.map((l,o)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273] shrink-0"}),l]},o))})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Free Forever, Upgrade for More"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Basic HS code lookup is always free. Pay only for advanced features."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:rfe.map((n,i)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 backdrop-blur-sm",n.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[n.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:n.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:n.price}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:n.description}),e.jsx("ul",{className:"space-y-2 mb-6",children:n.features.map((l,o)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),l]},o))}),e.jsx(M,{className:Le("w-full font-bold border-none",n.popular?"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C]":"bg-[#EDF5F2]/10 hover:bg-[#EDF5F2]/20 text-white"),asChild:!0,children:e.jsx(pe,{to:"/hs-code/dashboard",children:"Get Started"})})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:nfe.map((n,i)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===i?null:i),children:[e.jsx("span",{className:"text-white font-medium font-display",children:n.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===i&&"rotate-180")})]}),t===i&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:n.a})})]},i))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Stop Guessing HS Codes"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Free, instant, accurate. The way tariff classification should be."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard",children:["Start Classifying Free ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})})]})})]})]}),e.jsx(er,{})]})},zk=768;function lfe(){const[t,s]=m.useState(void 0);return m.useEffect(()=>{const a=window.matchMedia(`(max-width: ${zk-1}px)`),r=()=>{s(window.innerWidth<zk)};return a.addEventListener("change",r),s(window.innerWidth<zk),()=>a.removeEventListener("change",r)},[]),!!t}var ofe=Symbol.for("react.lazy"),t2=np[" use ".trim().toString()];function cfe(t){return typeof t=="object"&&t!==null&&"then"in t}function OW(t){return t!=null&&typeof t=="object"&&"$$typeof"in t&&t.$$typeof===ofe&&"_payload"in t&&cfe(t._payload)}function dfe(t){const s=ufe(t),a=m.forwardRef((r,n)=>{let{children:i,...l}=r;OW(i)&&typeof t2=="function"&&(i=t2(i._payload));const o=m.Children.toArray(i),d=o.find(hfe);if(d){const c=d.props.children,u=o.map(h=>h===d?m.Children.count(c)>1?m.Children.only(null):m.isValidElement(c)?c.props.children:null:h);return e.jsx(s,{...l,ref:n,children:m.isValidElement(c)?m.cloneElement(c,void 0,u):null})}return e.jsx(s,{...l,ref:n,children:i})});return a.displayName=`${t}.Slot`,a}function ufe(t){const s=m.forwardRef((a,r)=>{let{children:n,...i}=a;if(OW(n)&&typeof t2=="function"&&(n=t2(n._payload)),m.isValidElement(n)){const l=pfe(n),o=xfe(i,n.props);return n.type!==m.Fragment&&(o.ref=r?Uo(r,l):l),m.cloneElement(n,o)}return m.Children.count(n)>1?m.Children.only(null):null});return s.displayName=`${t}.SlotClone`,s}var mfe=Symbol("radix.slottable");function hfe(t){return m.isValidElement(t)&&typeof t.type=="function"&&"__radixId"in t.type&&t.type.__radixId===mfe}function xfe(t,s){const a={...s};for(const r in s){const n=t[r],i=s[r];/^on[A-Z]/.test(r)?n&&i?a[r]=(...o)=>{const d=i(...o);return n(...o),d}:n&&(a[r]=n):r==="style"?a[r]={...n,...i}:r==="className"&&(a[r]=[n,i].filter(Boolean).join(" "))}return{...t,...a}}function pfe(t){let s=Object.getOwnPropertyDescriptor(t.props,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning;return a?t.ref:(s=Object.getOwnPropertyDescriptor(t,"ref")?.get,a=s&&"isReactWarning"in s&&s.isReactWarning,a?t.props.ref:t.props.ref||t.ref)}var ffe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],gfe=ffe.reduce((t,s)=>{const a=dfe(`Primitive.${s}`),r=m.forwardRef((n,i)=>{const{asChild:l,...o}=n,d=l?a:s;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(d,{...o,ref:i})});return r.displayName=`Primitive.${s}`,{...t,[s]:r}},{}),vfe="Separator",WL="horizontal",jfe=["horizontal","vertical"],IW=m.forwardRef((t,s)=>{const{decorative:a,orientation:r=WL,...n}=t,i=bfe(r)?r:WL,o=a?{role:"none"}:{"aria-orientation":i==="vertical"?i:void 0,role:"separator"};return e.jsx(gfe.div,{"data-orientation":i,...o,...n,ref:s})});IW.displayName=vfe;function bfe(t){return jfe.includes(t)}var LW=IW;const As=m.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...r},n)=>e.jsx(LW,{ref:n,decorative:a,orientation:s,className:Le("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));As.displayName=LW.displayName;const MW=V1,yfe=W1,BW=m.forwardRef(({className:t,...s},a)=>e.jsx(Mg,{className:Le("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));BW.displayName=Mg.displayName;const Nfe=wh("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),JD=m.forwardRef(({side:t="right",className:s,children:a,...r},n)=>e.jsxs(yfe,{children:[e.jsx(BW,{}),e.jsxs(Bg,{ref:n,className:Le(Nfe({side:t}),s),...r,children:[e.jsxs(H1,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(fn,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),a]})]}));JD.displayName=Bg.displayName;const QD=({className:t,...s})=>e.jsx("div",{className:Le("flex flex-col space-y-2 text-center sm:text-left",t),...s});QD.displayName="SheetHeader";const XD=m.forwardRef(({className:t,...s},a)=>e.jsx(Kj,{ref:a,className:Le("text-lg font-semibold text-foreground",t),...s}));XD.displayName=Kj.displayName;const eT=m.forwardRef(({className:t,...s},a)=>e.jsx(Yj,{ref:a,className:Le("text-sm text-muted-foreground",t),...s}));eT.displayName=Yj.displayName;function pt({className:t,...s}){return e.jsx("div",{className:Le("animate-pulse rounded-md bg-primary/10",t),...s})}const wfe=["top","right","bottom","left"],ah=Math.min,Ql=Math.max,s2=Math.round,iN=Math.floor,gd=t=>({x:t,y:t}),_fe={left:"right",right:"left",bottom:"top",top:"bottom"},Cfe={start:"end",end:"start"};function v5(t,s,a){return Ql(t,ah(s,a))}function Nu(t,s){return typeof t=="function"?t(s):t}function wu(t){return t.split("-")[0]}function Wg(t){return t.split("-")[1]}function tT(t){return t==="x"?"y":"x"}function sT(t){return t==="y"?"height":"width"}const Sfe=new Set(["top","bottom"]);function hd(t){return Sfe.has(wu(t))?"y":"x"}function aT(t){return tT(hd(t))}function kfe(t,s,a){a===void 0&&(a=!1);const r=Wg(t),n=aT(t),i=sT(n);let l=n==="x"?r===(a?"end":"start")?"right":"left":r==="start"?"bottom":"top";return s.reference[i]>s.floating[i]&&(l=a2(l)),[l,a2(l)]}function Efe(t){const s=a2(t);return[j5(t),s,j5(s)]}function j5(t){return t.replace(/start|end/g,s=>Cfe[s])}const HL=["left","right"],GL=["right","left"],Afe=["top","bottom"],Pfe=["bottom","top"];function Dfe(t,s,a){switch(t){case"top":case"bottom":return a?s?GL:HL:s?HL:GL;case"left":case"right":return s?Afe:Pfe;default:return[]}}function Tfe(t,s,a,r){const n=Wg(t);let i=Dfe(wu(t),a==="start",r);return n&&(i=i.map(l=>l+"-"+n),s&&(i=i.concat(i.map(j5)))),i}function a2(t){return t.replace(/left|right|bottom|top/g,s=>_fe[s])}function Ffe(t){return{top:0,right:0,bottom:0,left:0,...t}}function $W(t){return typeof t!="number"?Ffe(t):{top:t,right:t,bottom:t,left:t}}function r2(t){const{x:s,y:a,width:r,height:n}=t;return{width:r,height:n,top:a,left:s,right:s+r,bottom:a+n,x:s,y:a}}function KL(t,s,a){let{reference:r,floating:n}=t;const i=hd(s),l=aT(s),o=sT(l),d=wu(s),c=i==="y",u=r.x+r.width/2-n.width/2,h=r.y+r.height/2-n.height/2,x=r[o]/2-n[o]/2;let g;switch(d){case"top":g={x:u,y:r.y-n.height};break;case"bottom":g={x:u,y:r.y+r.height};break;case"right":g={x:r.x+r.width,y:h};break;case"left":g={x:r.x-n.width,y:h};break;default:g={x:r.x,y:r.y}}switch(Wg(s)){case"start":g[l]-=x*(a&&c?-1:1);break;case"end":g[l]+=x*(a&&c?-1:1);break}return g}const Rfe=async(t,s,a)=>{const{placement:r="bottom",strategy:n="absolute",middleware:i=[],platform:l}=a,o=i.filter(Boolean),d=await(l.isRTL==null?void 0:l.isRTL(s));let c=await l.getElementRects({reference:t,floating:s,strategy:n}),{x:u,y:h}=KL(c,r,d),x=r,g={},j=0;for(let y=0;y<o.length;y++){const{name:b,fn:N}=o[y],{x:C,y:_,data:A,reset:k}=await N({x:u,y:h,initialPlacement:r,placement:x,strategy:n,middlewareData:g,rects:c,platform:l,elements:{reference:t,floating:s}});u=C??u,h=_??h,g={...g,[b]:{...g[b],...A}},k&&j<=50&&(j++,typeof k=="object"&&(k.placement&&(x=k.placement),k.rects&&(c=k.rects===!0?await l.getElementRects({reference:t,floating:s,strategy:n}):k.rects),{x:u,y:h}=KL(c,x,d)),y=-1)}return{x:u,y:h,placement:x,strategy:n,middlewareData:g}};async function nj(t,s){var a;s===void 0&&(s={});const{x:r,y:n,platform:i,rects:l,elements:o,strategy:d}=t,{boundary:c="clippingAncestors",rootBoundary:u="viewport",elementContext:h="floating",altBoundary:x=!1,padding:g=0}=Nu(s,t),j=$W(g),b=o[x?h==="floating"?"reference":"floating":h],N=r2(await i.getClippingRect({element:(a=await(i.isElement==null?void 0:i.isElement(b)))==null||a?b:b.contextElement||await(i.getDocumentElement==null?void 0:i.getDocumentElement(o.floating)),boundary:c,rootBoundary:u,strategy:d})),C=h==="floating"?{x:r,y:n,width:l.floating.width,height:l.floating.height}:l.reference,_=await(i.getOffsetParent==null?void 0:i.getOffsetParent(o.floating)),A=await(i.isElement==null?void 0:i.isElement(_))?await(i.getScale==null?void 0:i.getScale(_))||{x:1,y:1}:{x:1,y:1},k=r2(i.convertOffsetParentRelativeRectToViewportRelativeRect?await i.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:C,offsetParent:_,strategy:d}):C);return{top:(N.top-k.top+j.top)/A.y,bottom:(k.bottom-N.bottom+j.bottom)/A.y,left:(N.left-k.left+j.left)/A.x,right:(k.right-N.right+j.right)/A.x}}const Ofe=t=>({name:"arrow",options:t,async fn(s){const{x:a,y:r,placement:n,rects:i,platform:l,elements:o,middlewareData:d}=s,{element:c,padding:u=0}=Nu(t,s)||{};if(c==null)return{};const h=$W(u),x={x:a,y:r},g=aT(n),j=sT(g),y=await l.getDimensions(c),b=g==="y",N=b?"top":"left",C=b?"bottom":"right",_=b?"clientHeight":"clientWidth",A=i.reference[j]+i.reference[g]-x[g]-i.floating[j],k=x[g]-i.reference[g],E=await(l.getOffsetParent==null?void 0:l.getOffsetParent(c));let D=E?E[_]:0;(!D||!await(l.isElement==null?void 0:l.isElement(E)))&&(D=o.floating[_]||i.floating[j]);const R=A/2-k/2,O=D/2-y[j]/2-1,P=ah(h[N],O),T=ah(h[C],O),B=P,G=D-y[j]-T,q=D/2-y[j]/2+R,z=v5(B,q,G),H=!d.arrow&&Wg(n)!=null&&q!==z&&i.reference[j]/2-(q<B?P:T)-y[j]/2<0,le=H?q<B?q-B:q-G:0;return{[g]:x[g]+le,data:{[g]:z,centerOffset:q-z-le,...H&&{alignmentOffset:le}},reset:H}}}),Ife=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(s){var a,r;const{placement:n,middlewareData:i,rects:l,initialPlacement:o,platform:d,elements:c}=s,{mainAxis:u=!0,crossAxis:h=!0,fallbackPlacements:x,fallbackStrategy:g="bestFit",fallbackAxisSideDirection:j="none",flipAlignment:y=!0,...b}=Nu(t,s);if((a=i.arrow)!=null&&a.alignmentOffset)return{};const N=wu(n),C=hd(o),_=wu(o)===o,A=await(d.isRTL==null?void 0:d.isRTL(c.floating)),k=x||(_||!y?[a2(o)]:Efe(o)),E=j!=="none";!x&&E&&k.push(...Tfe(o,y,j,A));const D=[o,...k],R=await nj(s,b),O=[];let P=((r=i.flip)==null?void 0:r.overflows)||[];if(u&&O.push(R[N]),h){const q=kfe(n,l,A);O.push(R[q[0]],R[q[1]])}if(P=[...P,{placement:n,overflows:O}],!O.every(q=>q<=0)){var T,B;const q=(((T=i.flip)==null?void 0:T.index)||0)+1,z=D[q];if(z&&(!(h==="alignment"?C!==hd(z):!1)||P.every(Y=>hd(Y.placement)===C?Y.overflows[0]>0:!0)))return{data:{index:q,overflows:P},reset:{placement:z}};let H=(B=P.filter(le=>le.overflows[0]<=0).sort((le,Y)=>le.overflows[1]-Y.overflows[1])[0])==null?void 0:B.placement;if(!H)switch(g){case"bestFit":{var G;const le=(G=P.filter(Y=>{if(E){const te=hd(Y.placement);return te===C||te==="y"}return!0}).map(Y=>[Y.placement,Y.overflows.filter(te=>te>0).reduce((te,ne)=>te+ne,0)]).sort((Y,te)=>Y[1]-te[1])[0])==null?void 0:G[0];le&&(H=le);break}case"initialPlacement":H=o;break}if(n!==H)return{reset:{placement:H}}}return{}}}};function YL(t,s){return{top:t.top-s.height,right:t.right-s.width,bottom:t.bottom-s.height,left:t.left-s.width}}function ZL(t){return wfe.some(s=>t[s]>=0)}const Lfe=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(s){const{rects:a}=s,{strategy:r="referenceHidden",...n}=Nu(t,s);switch(r){case"referenceHidden":{const i=await nj(s,{...n,elementContext:"reference"}),l=YL(i,a.reference);return{data:{referenceHiddenOffsets:l,referenceHidden:ZL(l)}}}case"escaped":{const i=await nj(s,{...n,altBoundary:!0}),l=YL(i,a.floating);return{data:{escapedOffsets:l,escaped:ZL(l)}}}default:return{}}}}},UW=new Set(["left","top"]);async function Mfe(t,s){const{placement:a,platform:r,elements:n}=t,i=await(r.isRTL==null?void 0:r.isRTL(n.floating)),l=wu(a),o=Wg(a),d=hd(a)==="y",c=UW.has(l)?-1:1,u=i&&d?-1:1,h=Nu(s,t);let{mainAxis:x,crossAxis:g,alignmentAxis:j}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return o&&typeof j=="number"&&(g=o==="end"?j*-1:j),d?{x:g*u,y:x*c}:{x:x*c,y:g*u}}const Bfe=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(s){var a,r;const{x:n,y:i,placement:l,middlewareData:o}=s,d=await Mfe(s,t);return l===((a=o.offset)==null?void 0:a.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:n+d.x,y:i+d.y,data:{...d,placement:l}}}}},$fe=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(s){const{x:a,y:r,placement:n}=s,{mainAxis:i=!0,crossAxis:l=!1,limiter:o={fn:b=>{let{x:N,y:C}=b;return{x:N,y:C}}},...d}=Nu(t,s),c={x:a,y:r},u=await nj(s,d),h=hd(wu(n)),x=tT(h);let g=c[x],j=c[h];if(i){const b=x==="y"?"top":"left",N=x==="y"?"bottom":"right",C=g+u[b],_=g-u[N];g=v5(C,g,_)}if(l){const b=h==="y"?"top":"left",N=h==="y"?"bottom":"right",C=j+u[b],_=j-u[N];j=v5(C,j,_)}const y=o.fn({...s,[x]:g,[h]:j});return{...y,data:{x:y.x-a,y:y.y-r,enabled:{[x]:i,[h]:l}}}}}},Ufe=function(t){return t===void 0&&(t={}),{options:t,fn(s){const{x:a,y:r,placement:n,rects:i,middlewareData:l}=s,{offset:o=0,mainAxis:d=!0,crossAxis:c=!0}=Nu(t,s),u={x:a,y:r},h=hd(n),x=tT(h);let g=u[x],j=u[h];const y=Nu(o,s),b=typeof y=="number"?{mainAxis:y,crossAxis:0}:{mainAxis:0,crossAxis:0,...y};if(d){const _=x==="y"?"height":"width",A=i.reference[x]-i.floating[_]+b.mainAxis,k=i.reference[x]+i.reference[_]-b.mainAxis;g<A?g=A:g>k&&(g=k)}if(c){var N,C;const _=x==="y"?"width":"height",A=UW.has(wu(n)),k=i.reference[h]-i.floating[_]+(A&&((N=l.offset)==null?void 0:N[h])||0)+(A?0:b.crossAxis),E=i.reference[h]+i.reference[_]+(A?0:((C=l.offset)==null?void 0:C[h])||0)-(A?b.crossAxis:0);j<k?j=k:j>E&&(j=E)}return{[x]:g,[h]:j}}}},zfe=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(s){var a,r;const{placement:n,rects:i,platform:l,elements:o}=s,{apply:d=()=>{},...c}=Nu(t,s),u=await nj(s,c),h=wu(n),x=Wg(n),g=hd(n)==="y",{width:j,height:y}=i.floating;let b,N;h==="top"||h==="bottom"?(b=h,N=x===(await(l.isRTL==null?void 0:l.isRTL(o.floating))?"start":"end")?"left":"right"):(N=h,b=x==="end"?"top":"bottom");const C=y-u.top-u.bottom,_=j-u.left-u.right,A=ah(y-u[b],C),k=ah(j-u[N],_),E=!s.middlewareData.shift;let D=A,R=k;if((a=s.middlewareData.shift)!=null&&a.enabled.x&&(R=_),(r=s.middlewareData.shift)!=null&&r.enabled.y&&(D=C),E&&!x){const P=Ql(u.left,0),T=Ql(u.right,0),B=Ql(u.top,0),G=Ql(u.bottom,0);g?R=j-2*(P!==0||T!==0?P+T:Ql(u.left,u.right)):D=y-2*(B!==0||G!==0?B+G:Ql(u.top,u.bottom))}await d({...s,availableWidth:R,availableHeight:D});const O=await l.getDimensions(o.floating);return j!==O.width||y!==O.height?{reset:{rects:!0}}:{}}}};function G1(){return typeof window<"u"}function Hg(t){return zW(t)?(t.nodeName||"").toLowerCase():"#document"}function ao(t){var s;return(t==null||(s=t.ownerDocument)==null?void 0:s.defaultView)||window}function Pd(t){var s;return(s=(zW(t)?t.ownerDocument:t.document)||window.document)==null?void 0:s.documentElement}function zW(t){return G1()?t instanceof Node||t instanceof ao(t).Node:!1}function Ac(t){return G1()?t instanceof Element||t instanceof ao(t).Element:!1}function wd(t){return G1()?t instanceof HTMLElement||t instanceof ao(t).HTMLElement:!1}function JL(t){return!G1()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof ao(t).ShadowRoot}const qfe=new Set(["inline","contents"]);function Zj(t){const{overflow:s,overflowX:a,overflowY:r,display:n}=Pc(t);return/auto|scroll|overlay|hidden|clip/.test(s+r+a)&&!qfe.has(n)}const Vfe=new Set(["table","td","th"]);function Wfe(t){return Vfe.has(Hg(t))}const Hfe=[":popover-open",":modal"];function K1(t){return Hfe.some(s=>{try{return t.matches(s)}catch{return!1}})}const Gfe=["transform","translate","scale","rotate","perspective"],Kfe=["transform","translate","scale","rotate","perspective","filter"],Yfe=["paint","layout","strict","content"];function rT(t){const s=nT(),a=Ac(t)?Pc(t):t;return Gfe.some(r=>a[r]?a[r]!=="none":!1)||(a.containerType?a.containerType!=="normal":!1)||!s&&(a.backdropFilter?a.backdropFilter!=="none":!1)||!s&&(a.filter?a.filter!=="none":!1)||Kfe.some(r=>(a.willChange||"").includes(r))||Yfe.some(r=>(a.contain||"").includes(r))}function Zfe(t){let s=rh(t);for(;wd(s)&&!lg(s);){if(rT(s))return s;if(K1(s))return null;s=rh(s)}return null}function nT(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Jfe=new Set(["html","body","#document"]);function lg(t){return Jfe.has(Hg(t))}function Pc(t){return ao(t).getComputedStyle(t)}function Y1(t){return Ac(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function rh(t){if(Hg(t)==="html")return t;const s=t.assignedSlot||t.parentNode||JL(t)&&t.host||Pd(t);return JL(s)?s.host:s}function qW(t){const s=rh(t);return lg(s)?t.ownerDocument?t.ownerDocument.body:t.body:wd(s)&&Zj(s)?s:qW(s)}function ij(t,s,a){var r;s===void 0&&(s=[]),a===void 0&&(a=!0);const n=qW(t),i=n===((r=t.ownerDocument)==null?void 0:r.body),l=ao(n);if(i){const o=b5(l);return s.concat(l,l.visualViewport||[],Zj(n)?n:[],o&&a?ij(o):[])}return s.concat(n,ij(n,[],a))}function b5(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function VW(t){const s=Pc(t);let a=parseFloat(s.width)||0,r=parseFloat(s.height)||0;const n=wd(t),i=n?t.offsetWidth:a,l=n?t.offsetHeight:r,o=s2(a)!==i||s2(r)!==l;return o&&(a=i,r=l),{width:a,height:r,$:o}}function iT(t){return Ac(t)?t:t.contextElement}function Uf(t){const s=iT(t);if(!wd(s))return gd(1);const a=s.getBoundingClientRect(),{width:r,height:n,$:i}=VW(s);let l=(i?s2(a.width):a.width)/r,o=(i?s2(a.height):a.height)/n;return(!l||!Number.isFinite(l))&&(l=1),(!o||!Number.isFinite(o))&&(o=1),{x:l,y:o}}const Qfe=gd(0);function WW(t){const s=ao(t);return!nT()||!s.visualViewport?Qfe:{x:s.visualViewport.offsetLeft,y:s.visualViewport.offsetTop}}function Xfe(t,s,a){return s===void 0&&(s=!1),!a||s&&a!==ao(t)?!1:s}function Vx(t,s,a,r){s===void 0&&(s=!1),a===void 0&&(a=!1);const n=t.getBoundingClientRect(),i=iT(t);let l=gd(1);s&&(r?Ac(r)&&(l=Uf(r)):l=Uf(t));const o=Xfe(i,a,r)?WW(i):gd(0);let d=(n.left+o.x)/l.x,c=(n.top+o.y)/l.y,u=n.width/l.x,h=n.height/l.y;if(i){const x=ao(i),g=r&&Ac(r)?ao(r):r;let j=x,y=b5(j);for(;y&&r&&g!==j;){const b=Uf(y),N=y.getBoundingClientRect(),C=Pc(y),_=N.left+(y.clientLeft+parseFloat(C.paddingLeft))*b.x,A=N.top+(y.clientTop+parseFloat(C.paddingTop))*b.y;d*=b.x,c*=b.y,u*=b.x,h*=b.y,d+=_,c+=A,j=ao(y),y=b5(j)}}return r2({width:u,height:h,x:d,y:c})}function Z1(t,s){const a=Y1(t).scrollLeft;return s?s.left+a:Vx(Pd(t)).left+a}function HW(t,s){const a=t.getBoundingClientRect(),r=a.left+s.scrollLeft-Z1(t,a),n=a.top+s.scrollTop;return{x:r,y:n}}function ege(t){let{elements:s,rect:a,offsetParent:r,strategy:n}=t;const i=n==="fixed",l=Pd(r),o=s?K1(s.floating):!1;if(r===l||o&&i)return a;let d={scrollLeft:0,scrollTop:0},c=gd(1);const u=gd(0),h=wd(r);if((h||!h&&!i)&&((Hg(r)!=="body"||Zj(l))&&(d=Y1(r)),wd(r))){const g=Vx(r);c=Uf(r),u.x=g.x+r.clientLeft,u.y=g.y+r.clientTop}const x=l&&!h&&!i?HW(l,d):gd(0);return{width:a.width*c.x,height:a.height*c.y,x:a.x*c.x-d.scrollLeft*c.x+u.x+x.x,y:a.y*c.y-d.scrollTop*c.y+u.y+x.y}}function tge(t){return Array.from(t.getClientRects())}function sge(t){const s=Pd(t),a=Y1(t),r=t.ownerDocument.body,n=Ql(s.scrollWidth,s.clientWidth,r.scrollWidth,r.clientWidth),i=Ql(s.scrollHeight,s.clientHeight,r.scrollHeight,r.clientHeight);let l=-a.scrollLeft+Z1(t);const o=-a.scrollTop;return Pc(r).direction==="rtl"&&(l+=Ql(s.clientWidth,r.clientWidth)-n),{width:n,height:i,x:l,y:o}}const QL=25;function age(t,s){const a=ao(t),r=Pd(t),n=a.visualViewport;let i=r.clientWidth,l=r.clientHeight,o=0,d=0;if(n){i=n.width,l=n.height;const u=nT();(!u||u&&s==="fixed")&&(o=n.offsetLeft,d=n.offsetTop)}const c=Z1(r);if(c<=0){const u=r.ownerDocument,h=u.body,x=getComputedStyle(h),g=u.compatMode==="CSS1Compat"&&parseFloat(x.marginLeft)+parseFloat(x.marginRight)||0,j=Math.abs(r.clientWidth-h.clientWidth-g);j<=QL&&(i-=j)}else c<=QL&&(i+=c);return{width:i,height:l,x:o,y:d}}const rge=new Set(["absolute","fixed"]);function nge(t,s){const a=Vx(t,!0,s==="fixed"),r=a.top+t.clientTop,n=a.left+t.clientLeft,i=wd(t)?Uf(t):gd(1),l=t.clientWidth*i.x,o=t.clientHeight*i.y,d=n*i.x,c=r*i.y;return{width:l,height:o,x:d,y:c}}function XL(t,s,a){let r;if(s==="viewport")r=age(t,a);else if(s==="document")r=sge(Pd(t));else if(Ac(s))r=nge(s,a);else{const n=WW(t);r={x:s.x-n.x,y:s.y-n.y,width:s.width,height:s.height}}return r2(r)}function GW(t,s){const a=rh(t);return a===s||!Ac(a)||lg(a)?!1:Pc(a).position==="fixed"||GW(a,s)}function ige(t,s){const a=s.get(t);if(a)return a;let r=ij(t,[],!1).filter(o=>Ac(o)&&Hg(o)!=="body"),n=null;const i=Pc(t).position==="fixed";let l=i?rh(t):t;for(;Ac(l)&&!lg(l);){const o=Pc(l),d=rT(l);!d&&o.position==="fixed"&&(n=null),(i?!d&&!n:!d&&o.position==="static"&&!!n&&rge.has(n.position)||Zj(l)&&!d&&GW(t,l))?r=r.filter(u=>u!==l):n=o,l=rh(l)}return s.set(t,r),r}function lge(t){let{element:s,boundary:a,rootBoundary:r,strategy:n}=t;const l=[...a==="clippingAncestors"?K1(s)?[]:ige(s,this._c):[].concat(a),r],o=l[0],d=l.reduce((c,u)=>{const h=XL(s,u,n);return c.top=Ql(h.top,c.top),c.right=ah(h.right,c.right),c.bottom=ah(h.bottom,c.bottom),c.left=Ql(h.left,c.left),c},XL(s,o,n));return{width:d.right-d.left,height:d.bottom-d.top,x:d.left,y:d.top}}function oge(t){const{width:s,height:a}=VW(t);return{width:s,height:a}}function cge(t,s,a){const r=wd(s),n=Pd(s),i=a==="fixed",l=Vx(t,!0,i,s);let o={scrollLeft:0,scrollTop:0};const d=gd(0);function c(){d.x=Z1(n)}if(r||!r&&!i)if((Hg(s)!=="body"||Zj(n))&&(o=Y1(s)),r){const g=Vx(s,!0,i,s);d.x=g.x+s.clientLeft,d.y=g.y+s.clientTop}else n&&c();i&&!r&&n&&c();const u=n&&!r&&!i?HW(n,o):gd(0),h=l.left+o.scrollLeft-d.x-u.x,x=l.top+o.scrollTop-d.y-u.y;return{x:h,y:x,width:l.width,height:l.height}}function qk(t){return Pc(t).position==="static"}function eM(t,s){if(!wd(t)||Pc(t).position==="fixed")return null;if(s)return s(t);let a=t.offsetParent;return Pd(t)===a&&(a=a.ownerDocument.body),a}function KW(t,s){const a=ao(t);if(K1(t))return a;if(!wd(t)){let n=rh(t);for(;n&&!lg(n);){if(Ac(n)&&!qk(n))return n;n=rh(n)}return a}let r=eM(t,s);for(;r&&Wfe(r)&&qk(r);)r=eM(r,s);return r&&lg(r)&&qk(r)&&!rT(r)?a:r||Zfe(t)||a}const dge=async function(t){const s=this.getOffsetParent||KW,a=this.getDimensions,r=await a(t.floating);return{reference:cge(t.reference,await s(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function uge(t){return Pc(t).direction==="rtl"}const mge={convertOffsetParentRelativeRectToViewportRelativeRect:ege,getDocumentElement:Pd,getClippingRect:lge,getOffsetParent:KW,getElementRects:dge,getClientRects:tge,getDimensions:oge,getScale:Uf,isElement:Ac,isRTL:uge};function YW(t,s){return t.x===s.x&&t.y===s.y&&t.width===s.width&&t.height===s.height}function hge(t,s){let a=null,r;const n=Pd(t);function i(){var o;clearTimeout(r),(o=a)==null||o.disconnect(),a=null}function l(o,d){o===void 0&&(o=!1),d===void 0&&(d=1),i();const c=t.getBoundingClientRect(),{left:u,top:h,width:x,height:g}=c;if(o||s(),!x||!g)return;const j=iN(h),y=iN(n.clientWidth-(u+x)),b=iN(n.clientHeight-(h+g)),N=iN(u),_={rootMargin:-j+"px "+-y+"px "+-b+"px "+-N+"px",threshold:Ql(0,ah(1,d))||1};let A=!0;function k(E){const D=E[0].intersectionRatio;if(D!==d){if(!A)return l();D?l(!1,D):r=setTimeout(()=>{l(!1,1e-7)},1e3)}D===1&&!YW(c,t.getBoundingClientRect())&&l(),A=!1}try{a=new IntersectionObserver(k,{..._,root:n.ownerDocument})}catch{a=new IntersectionObserver(k,_)}a.observe(t)}return l(!0),i}function xge(t,s,a,r){r===void 0&&(r={});const{ancestorScroll:n=!0,ancestorResize:i=!0,elementResize:l=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:d=!1}=r,c=iT(t),u=n||i?[...c?ij(c):[],...ij(s)]:[];u.forEach(N=>{n&&N.addEventListener("scroll",a,{passive:!0}),i&&N.addEventListener("resize",a)});const h=c&&o?hge(c,a):null;let x=-1,g=null;l&&(g=new ResizeObserver(N=>{let[C]=N;C&&C.target===c&&g&&(g.unobserve(s),cancelAnimationFrame(x),x=requestAnimationFrame(()=>{var _;(_=g)==null||_.observe(s)})),a()}),c&&!d&&g.observe(c),g.observe(s));let j,y=d?Vx(t):null;d&&b();function b(){const N=Vx(t);y&&!YW(y,N)&&a(),y=N,j=requestAnimationFrame(b)}return a(),()=>{var N;u.forEach(C=>{n&&C.removeEventListener("scroll",a),i&&C.removeEventListener("resize",a)}),h?.(),(N=g)==null||N.disconnect(),g=null,d&&cancelAnimationFrame(j)}}const pge=Bfe,fge=$fe,gge=Ife,vge=zfe,jge=Lfe,tM=Ofe,bge=Ufe,yge=(t,s,a)=>{const r=new Map,n={platform:mge,...a},i={...n.platform,_c:r};return Rfe(t,s,{...n,platform:i})};var Nge=typeof document<"u",wge=function(){},gw=Nge?m.useLayoutEffect:wge;function n2(t,s){if(t===s)return!0;if(typeof t!=typeof s)return!1;if(typeof t=="function"&&t.toString()===s.toString())return!0;let a,r,n;if(t&&s&&typeof t=="object"){if(Array.isArray(t)){if(a=t.length,a!==s.length)return!1;for(r=a;r--!==0;)if(!n2(t[r],s[r]))return!1;return!0}if(n=Object.keys(t),a=n.length,a!==Object.keys(s).length)return!1;for(r=a;r--!==0;)if(!{}.hasOwnProperty.call(s,n[r]))return!1;for(r=a;r--!==0;){const i=n[r];if(!(i==="_owner"&&t.$$typeof)&&!n2(t[i],s[i]))return!1}return!0}return t!==t&&s!==s}function ZW(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function sM(t,s){const a=ZW(t);return Math.round(s*a)/a}function Vk(t){const s=m.useRef(t);return gw(()=>{s.current=t}),s}function _ge(t){t===void 0&&(t={});const{placement:s="bottom",strategy:a="absolute",middleware:r=[],platform:n,elements:{reference:i,floating:l}={},transform:o=!0,whileElementsMounted:d,open:c}=t,[u,h]=m.useState({x:0,y:0,strategy:a,placement:s,middlewareData:{},isPositioned:!1}),[x,g]=m.useState(r);n2(x,r)||g(r);const[j,y]=m.useState(null),[b,N]=m.useState(null),C=m.useCallback(Y=>{Y!==E.current&&(E.current=Y,y(Y))},[]),_=m.useCallback(Y=>{Y!==D.current&&(D.current=Y,N(Y))},[]),A=i||j,k=l||b,E=m.useRef(null),D=m.useRef(null),R=m.useRef(u),O=d!=null,P=Vk(d),T=Vk(n),B=Vk(c),G=m.useCallback(()=>{if(!E.current||!D.current)return;const Y={placement:s,strategy:a,middleware:x};T.current&&(Y.platform=T.current),yge(E.current,D.current,Y).then(te=>{const ne={...te,isPositioned:B.current!==!1};q.current&&!n2(R.current,ne)&&(R.current=ne,Du.flushSync(()=>{h(ne)}))})},[x,s,a,T,B]);gw(()=>{c===!1&&R.current.isPositioned&&(R.current.isPositioned=!1,h(Y=>({...Y,isPositioned:!1})))},[c]);const q=m.useRef(!1);gw(()=>(q.current=!0,()=>{q.current=!1}),[]),gw(()=>{if(A&&(E.current=A),k&&(D.current=k),A&&k){if(P.current)return P.current(A,k,G);G()}},[A,k,G,P,O]);const z=m.useMemo(()=>({reference:E,floating:D,setReference:C,setFloating:_}),[C,_]),H=m.useMemo(()=>({reference:A,floating:k}),[A,k]),le=m.useMemo(()=>{const Y={position:a,left:0,top:0};if(!H.floating)return Y;const te=sM(H.floating,u.x),ne=sM(H.floating,u.y);return o?{...Y,transform:"translate("+te+"px, "+ne+"px)",...ZW(H.floating)>=1.5&&{willChange:"transform"}}:{position:a,left:te,top:ne}},[a,o,H.floating,u.x,u.y]);return m.useMemo(()=>({...u,update:G,refs:z,elements:H,floatingStyles:le}),[u,G,z,H,le])}const Cge=t=>{function s(a){return{}.hasOwnProperty.call(a,"current")}return{name:"arrow",options:t,fn(a){const{element:r,padding:n}=typeof t=="function"?t(a):t;return r&&s(r)?r.current!=null?tM({element:r.current,padding:n}).fn(a):{}:r?tM({element:r,padding:n}).fn(a):{}}}},Sge=(t,s)=>({...pge(t),options:[t,s]}),kge=(t,s)=>({...fge(t),options:[t,s]}),Ege=(t,s)=>({...bge(t),options:[t,s]}),Age=(t,s)=>({...gge(t),options:[t,s]}),Pge=(t,s)=>({...vge(t),options:[t,s]}),Dge=(t,s)=>({...jge(t),options:[t,s]}),Tge=(t,s)=>({...Cge(t),options:[t,s]});var Fge="Arrow",JW=m.forwardRef((t,s)=>{const{children:a,width:r=10,height:n=5,...i}=t;return e.jsx(Pt.svg,{...i,ref:s,width:r,height:n,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?a:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});JW.displayName=Fge;var Rge=JW;function Jj(t){const[s,a]=m.useState(void 0);return an(()=>{if(t){a({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(n=>{if(!Array.isArray(n)||!n.length)return;const i=n[0];let l,o;if("borderBoxSize"in i){const d=i.borderBoxSize,c=Array.isArray(d)?d[0]:d;l=c.inlineSize,o=c.blockSize}else l=t.offsetWidth,o=t.offsetHeight;a({width:l,height:o})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else a(void 0)},[t]),s}var lT="Popper",[QW,_h]=Vr(lT),[Oge,XW]=QW(lT),eH=t=>{const{__scopePopper:s,children:a}=t,[r,n]=m.useState(null);return e.jsx(Oge,{scope:s,anchor:r,onAnchorChange:n,children:a})};eH.displayName=lT;var tH="PopperAnchor",sH=m.forwardRef((t,s)=>{const{__scopePopper:a,virtualRef:r,...n}=t,i=XW(tH,a),l=m.useRef(null),o=vs(s,l),d=m.useRef(null);return m.useEffect(()=>{const c=d.current;d.current=r?.current||l.current,c!==d.current&&i.onAnchorChange(d.current)}),r?null:e.jsx(Pt.div,{...n,ref:o})});sH.displayName=tH;var oT="PopperContent",[Ige,Lge]=QW(oT),aH=m.forwardRef((t,s)=>{const{__scopePopper:a,side:r="bottom",sideOffset:n=0,align:i="center",alignOffset:l=0,arrowPadding:o=0,avoidCollisions:d=!0,collisionBoundary:c=[],collisionPadding:u=0,sticky:h="partial",hideWhenDetached:x=!1,updatePositionStrategy:g="optimized",onPlaced:j,...y}=t,b=XW(oT,a),[N,C]=m.useState(null),_=vs(s,ce=>C(ce)),[A,k]=m.useState(null),E=Jj(A),D=E?.width??0,R=E?.height??0,O=r+(i!=="center"?"-"+i:""),P=typeof u=="number"?u:{top:0,right:0,bottom:0,left:0,...u},T=Array.isArray(c)?c:[c],B=T.length>0,G={padding:P,boundary:T.filter(Bge),altBoundary:B},{refs:q,floatingStyles:z,placement:H,isPositioned:le,middlewareData:Y}=_ge({strategy:"fixed",placement:O,whileElementsMounted:(...ce)=>xge(...ce,{animationFrame:g==="always"}),elements:{reference:b.anchor},middleware:[Sge({mainAxis:n+R,alignmentAxis:l}),d&&kge({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Ege():void 0,...G}),d&&Age({...G}),Pge({...G,apply:({elements:ce,rects:Re,availableWidth:ie,availableHeight:Ne})=>{const{width:Ue,height:ge}=Re.reference,he=ce.floating.style;he.setProperty("--radix-popper-available-width",`${ie}px`),he.setProperty("--radix-popper-available-height",`${Ne}px`),he.setProperty("--radix-popper-anchor-width",`${Ue}px`),he.setProperty("--radix-popper-anchor-height",`${ge}px`)}}),A&&Tge({element:A,padding:o}),$ge({arrowWidth:D,arrowHeight:R}),x&&Dge({strategy:"referenceHidden",...G})]}),[te,ne]=iH(H),ae=Zr(j);an(()=>{le&&ae?.()},[le,ae]);const re=Y.arrow?.x,xe=Y.arrow?.y,ye=Y.arrow?.centerOffset!==0,[ke,ze]=m.useState();return an(()=>{N&&ze(window.getComputedStyle(N).zIndex)},[N]),e.jsx("div",{ref:q.setFloating,"data-radix-popper-content-wrapper":"",style:{...z,transform:le?z.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:ke,"--radix-popper-transform-origin":[Y.transformOrigin?.x,Y.transformOrigin?.y].join(" "),...Y.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:e.jsx(Ige,{scope:a,placedSide:te,onArrowChange:k,arrowX:re,arrowY:xe,shouldHideArrow:ye,children:e.jsx(Pt.div,{"data-side":te,"data-align":ne,...y,ref:_,style:{...y.style,animation:le?void 0:"none"}})})})});aH.displayName=oT;var rH="PopperArrow",Mge={top:"bottom",right:"left",bottom:"top",left:"right"},nH=m.forwardRef(function(s,a){const{__scopePopper:r,...n}=s,i=Lge(rH,r),l=Mge[i.placedSide];return e.jsx("span",{ref:i.onArrowChange,style:{position:"absolute",left:i.arrowX,top:i.arrowY,[l]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[i.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[i.placedSide],visibility:i.shouldHideArrow?"hidden":void 0},children:e.jsx(Rge,{...n,ref:a,style:{...n.style,display:"block"}})})});nH.displayName=rH;function Bge(t){return t!==null}var $ge=t=>({name:"transformOrigin",options:t,fn(s){const{placement:a,rects:r,middlewareData:n}=s,l=n.arrow?.centerOffset!==0,o=l?0:t.arrowWidth,d=l?0:t.arrowHeight,[c,u]=iH(a),h={start:"0%",center:"50%",end:"100%"}[u],x=(n.arrow?.x??0)+o/2,g=(n.arrow?.y??0)+d/2;let j="",y="";return c==="bottom"?(j=l?h:`${x}px`,y=`${-d}px`):c==="top"?(j=l?h:`${x}px`,y=`${r.floating.height+d}px`):c==="right"?(j=`${-d}px`,y=l?h:`${g}px`):c==="left"&&(j=`${r.floating.width+d}px`,y=l?h:`${g}px`),{data:{x:j,y}}}});function iH(t){const[s,a="center"]=t.split("-");return[s,a]}var J1=eH,Qj=sH,Q1=aH,X1=nH,lH=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Uge="VisuallyHidden",e_=m.forwardRef((t,s)=>e.jsx(Pt.span,{...t,ref:s,style:{...lH,...t.style}}));e_.displayName=Uge;var zge=e_,[t_,NJe]=Vr("Tooltip",[_h]),s_=_h(),oH="TooltipProvider",qge=700,y5="tooltip.open",[Vge,cT]=t_(oH),cH=t=>{const{__scopeTooltip:s,delayDuration:a=qge,skipDelayDuration:r=300,disableHoverableContent:n=!1,children:i}=t,l=m.useRef(!0),o=m.useRef(!1),d=m.useRef(0);return m.useEffect(()=>{const c=d.current;return()=>window.clearTimeout(c)},[]),e.jsx(Vge,{scope:s,isOpenDelayedRef:l,delayDuration:a,onOpen:m.useCallback(()=>{window.clearTimeout(d.current),l.current=!1},[]),onClose:m.useCallback(()=>{window.clearTimeout(d.current),d.current=window.setTimeout(()=>l.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:m.useCallback(c=>{o.current=c},[]),disableHoverableContent:n,children:i})};cH.displayName=oH;var lj="Tooltip",[Wge,Xj]=t_(lj),dH=t=>{const{__scopeTooltip:s,children:a,open:r,defaultOpen:n,onOpenChange:i,disableHoverableContent:l,delayDuration:o}=t,d=cT(lj,t.__scopeTooltip),c=s_(s),[u,h]=m.useState(null),x=En(),g=m.useRef(0),j=l??d.disableHoverableContent,y=o??d.delayDuration,b=m.useRef(!1),[N,C]=Hn({prop:r,defaultProp:n??!1,onChange:D=>{D?(d.onOpen(),document.dispatchEvent(new CustomEvent(y5))):d.onClose(),i?.(D)},caller:lj}),_=m.useMemo(()=>N?b.current?"delayed-open":"instant-open":"closed",[N]),A=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,b.current=!1,C(!0)},[C]),k=m.useCallback(()=>{window.clearTimeout(g.current),g.current=0,C(!1)},[C]),E=m.useCallback(()=>{window.clearTimeout(g.current),g.current=window.setTimeout(()=>{b.current=!0,C(!0),g.current=0},y)},[y,C]);return m.useEffect(()=>()=>{g.current&&(window.clearTimeout(g.current),g.current=0)},[]),e.jsx(J1,{...c,children:e.jsx(Wge,{scope:s,contentId:x,open:N,stateAttribute:_,trigger:u,onTriggerChange:h,onTriggerEnter:m.useCallback(()=>{d.isOpenDelayedRef.current?E():A()},[d.isOpenDelayedRef,E,A]),onTriggerLeave:m.useCallback(()=>{j?k():(window.clearTimeout(g.current),g.current=0)},[k,j]),onOpen:A,onClose:k,disableHoverableContent:j,children:a})})};dH.displayName=lj;var N5="TooltipTrigger",uH=m.forwardRef((t,s)=>{const{__scopeTooltip:a,...r}=t,n=Xj(N5,a),i=cT(N5,a),l=s_(a),o=m.useRef(null),d=vs(s,o,n.onTriggerChange),c=m.useRef(!1),u=m.useRef(!1),h=m.useCallback(()=>c.current=!1,[]);return m.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),e.jsx(Qj,{asChild:!0,...l,children:e.jsx(Pt.button,{"aria-describedby":n.open?n.contentId:void 0,"data-state":n.stateAttribute,...r,ref:d,onPointerMove:gt(t.onPointerMove,x=>{x.pointerType!=="touch"&&!u.current&&!i.isPointerInTransitRef.current&&(n.onTriggerEnter(),u.current=!0)}),onPointerLeave:gt(t.onPointerLeave,()=>{n.onTriggerLeave(),u.current=!1}),onPointerDown:gt(t.onPointerDown,()=>{n.open&&n.onClose(),c.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:gt(t.onFocus,()=>{c.current||n.onOpen()}),onBlur:gt(t.onBlur,n.onClose),onClick:gt(t.onClick,n.onClose)})})});uH.displayName=N5;var dT="TooltipPortal",[Hge,Gge]=t_(dT,{forceMount:void 0}),mH=t=>{const{__scopeTooltip:s,forceMount:a,children:r,container:n}=t,i=Xj(dT,s);return e.jsx(Hge,{scope:s,forceMount:a,children:e.jsx(jn,{present:a||i.open,children:e.jsx(hp,{asChild:!0,container:n,children:r})})})};mH.displayName=dT;var og="TooltipContent",hH=m.forwardRef((t,s)=>{const a=Gge(og,t.__scopeTooltip),{forceMount:r=a.forceMount,side:n="top",...i}=t,l=Xj(og,t.__scopeTooltip);return e.jsx(jn,{present:r||l.open,children:l.disableHoverableContent?e.jsx(xH,{side:n,...i,ref:s}):e.jsx(Kge,{side:n,...i,ref:s})})}),Kge=m.forwardRef((t,s)=>{const a=Xj(og,t.__scopeTooltip),r=cT(og,t.__scopeTooltip),n=m.useRef(null),i=vs(s,n),[l,o]=m.useState(null),{trigger:d,onClose:c}=a,u=n.current,{onPointerInTransitChange:h}=r,x=m.useCallback(()=>{o(null),h(!1)},[h]),g=m.useCallback((j,y)=>{const b=j.currentTarget,N={x:j.clientX,y:j.clientY},C=Xge(N,b.getBoundingClientRect()),_=eve(N,C),A=tve(y.getBoundingClientRect()),k=ave([..._,...A]);o(k),h(!0)},[h]);return m.useEffect(()=>()=>x(),[x]),m.useEffect(()=>{if(d&&u){const j=b=>g(b,u),y=b=>g(b,d);return d.addEventListener("pointerleave",j),u.addEventListener("pointerleave",y),()=>{d.removeEventListener("pointerleave",j),u.removeEventListener("pointerleave",y)}}},[d,u,g,x]),m.useEffect(()=>{if(l){const j=y=>{const b=y.target,N={x:y.clientX,y:y.clientY},C=d?.contains(b)||u?.contains(b),_=!sve(N,l);C?x():_&&(x(),c())};return document.addEventListener("pointermove",j),()=>document.removeEventListener("pointermove",j)}},[d,u,l,c,x]),e.jsx(xH,{...t,ref:i})}),[Yge,Zge]=t_(lj,{isInside:!1}),Jge=vV("TooltipContent"),xH=m.forwardRef((t,s)=>{const{__scopeTooltip:a,children:r,"aria-label":n,onEscapeKeyDown:i,onPointerDownOutside:l,...o}=t,d=Xj(og,a),c=s_(a),{onClose:u}=d;return m.useEffect(()=>(document.addEventListener(y5,u),()=>document.removeEventListener(y5,u)),[u]),m.useEffect(()=>{if(d.trigger){const h=x=>{x.target?.contains(d.trigger)&&u()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[d.trigger,u]),e.jsx(mp,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:h=>h.preventDefault(),onDismiss:u,children:e.jsxs(Q1,{"data-state":d.stateAttribute,...c,...o,ref:s,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[e.jsx(Jge,{children:r}),e.jsx(Yge,{scope:a,isInside:!0,children:e.jsx(zge,{id:d.contentId,role:"tooltip",children:n||r})})]})})});hH.displayName=og;var pH="TooltipArrow",Qge=m.forwardRef((t,s)=>{const{__scopeTooltip:a,...r}=t,n=s_(a);return Zge(pH,a).isInside?null:e.jsx(X1,{...n,...r,ref:s})});Qge.displayName=pH;function Xge(t,s){const a=Math.abs(s.top-t.y),r=Math.abs(s.bottom-t.y),n=Math.abs(s.right-t.x),i=Math.abs(s.left-t.x);switch(Math.min(a,r,n,i)){case i:return"left";case n:return"right";case a:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function eve(t,s,a=5){const r=[];switch(s){case"top":r.push({x:t.x-a,y:t.y+a},{x:t.x+a,y:t.y+a});break;case"bottom":r.push({x:t.x-a,y:t.y-a},{x:t.x+a,y:t.y-a});break;case"left":r.push({x:t.x+a,y:t.y-a},{x:t.x+a,y:t.y+a});break;case"right":r.push({x:t.x-a,y:t.y-a},{x:t.x-a,y:t.y+a});break}return r}function tve(t){const{top:s,right:a,bottom:r,left:n}=t;return[{x:n,y:s},{x:a,y:s},{x:a,y:r},{x:n,y:r}]}function sve(t,s){const{x:a,y:r}=t;let n=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],d=s[l],c=o.x,u=o.y,h=d.x,x=d.y;u>r!=x>r&&a<(h-c)*(r-u)/(x-u)+c&&(n=!n)}return n}function ave(t){const s=t.slice();return s.sort((a,r)=>a.x<r.x?-1:a.x>r.x?1:a.y<r.y?-1:a.y>r.y?1:0),rve(s)}function rve(t){if(t.length<=1)return t.slice();const s=[];for(let r=0;r<t.length;r++){const n=t[r];for(;s.length>=2;){const i=s[s.length-1],l=s[s.length-2];if((i.x-l.x)*(n.y-l.y)>=(i.y-l.y)*(n.x-l.x))s.pop();else break}s.push(n)}s.pop();const a=[];for(let r=t.length-1;r>=0;r--){const n=t[r];for(;a.length>=2;){const i=a[a.length-1],l=a[a.length-2];if((i.x-l.x)*(n.y-l.y)>=(i.y-l.y)*(n.x-l.x))a.pop();else break}a.push(n)}return a.pop(),s.length===1&&a.length===1&&s[0].x===a[0].x&&s[0].y===a[0].y?s:s.concat(a)}var nve=cH,ive=dH,lve=uH,ove=mH,fH=hH;const nh=nve,pu=ive,fu=lve,vd=m.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(ove,{children:e.jsx(fH,{ref:r,sideOffset:s,className:Le("z-50 overflow-hidden rounded-md bg-primary px-3 py-1.5 text-xs text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...a})}));vd.displayName=fH.displayName;const cve="sidebar_state",dve=3600*24*7,uve="16rem",mve="18rem",hve="3rem",xve="b",gH=m.createContext(null);function a_(){const t=m.useContext(gH);if(!t)throw new Error("useSidebar must be used within a SidebarProvider.");return t}const uT=m.forwardRef(({defaultOpen:t=!0,open:s,onOpenChange:a,className:r,style:n,children:i,...l},o)=>{const d=lfe(),[c,u]=m.useState(!1),[h,x]=m.useState(t),g=s??h,j=m.useCallback(C=>{const _=typeof C=="function"?C(g):C;a?a(_):x(_),document.cookie=`${cve}=${_}; path=/; max-age=${dve}`},[a,g]),y=m.useCallback(()=>d?u(C=>!C):j(C=>!C),[d,j,u]);m.useEffect(()=>{const C=_=>{_.key===xve&&(_.metaKey||_.ctrlKey)&&(_.preventDefault(),y())};return window.addEventListener("keydown",C),()=>window.removeEventListener("keydown",C)},[y]);const b=g?"expanded":"collapsed",N=m.useMemo(()=>({state:b,open:g,setOpen:j,isMobile:d,openMobile:c,setOpenMobile:u,toggleSidebar:y}),[b,g,j,d,c,u,y]);return e.jsx(gH.Provider,{value:N,children:e.jsx(nh,{delayDuration:0,children:e.jsx("div",{style:{"--sidebar-width":uve,"--sidebar-width-icon":hve,...n},className:Le("group/sidebar-wrapper flex min-h-svh w-full has-[[data-variant=inset]]:bg-sidebar",r),ref:o,...l,children:i})})})});uT.displayName="SidebarProvider";const Zo=m.forwardRef(({side:t="left",variant:s="sidebar",collapsible:a="offcanvas",className:r,children:n,...i},l)=>{const{isMobile:o,state:d,openMobile:c,setOpenMobile:u}=a_();return a==="none"?e.jsx("div",{className:Le("flex h-full w-[--sidebar-width] flex-col bg-sidebar text-sidebar-foreground",r),ref:l,...i,children:n}):o?e.jsx(MW,{open:c,onOpenChange:u,...i,children:e.jsxs(JD,{"data-sidebar":"sidebar","data-mobile":"true",className:"w-[--sidebar-width] bg-sidebar p-0 text-sidebar-foreground [&>button]:hidden",style:{"--sidebar-width":mve},side:t,children:[e.jsxs(QD,{className:"sr-only",children:[e.jsx(XD,{children:"Sidebar"}),e.jsx(eT,{children:"Displays the mobile sidebar."})]}),e.jsx("div",{className:"flex h-full w-full flex-col",children:n})]})}):e.jsxs("div",{ref:l,className:"group peer hidden text-sidebar-foreground md:block","data-state":d,"data-collapsible":d==="collapsed"?a:"","data-variant":s,"data-side":t,children:[e.jsx("div",{className:Le("relative w-[--sidebar-width] bg-transparent transition-[width] duration-200 ease-linear","group-data-[collapsible=offcanvas]:w-0","group-data-[side=right]:rotate-180",s==="floating"||s==="inset"?"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4))]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon]")}),e.jsx("div",{className:Le("fixed inset-y-0 z-10 hidden h-svh w-[--sidebar-width] transition-[left,right,width] duration-200 ease-linear md:flex",t==="left"?"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]":"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]",s==="floating"||s==="inset"?"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)_+_theme(spacing.4)_+2px)]":"group-data-[collapsible=icon]:w-[--sidebar-width-icon] group-data-[side=left]:border-r group-data-[side=right]:border-l",r),...i,children:e.jsx("div",{"data-sidebar":"sidebar",className:"flex h-full w-full flex-col bg-sidebar group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:border-sidebar-border group-data-[variant=floating]:shadow",children:n})})]})});Zo.displayName="Sidebar";const mT=m.forwardRef(({className:t,onClick:s,...a},r)=>{const{toggleSidebar:n}=a_();return e.jsxs(M,{ref:r,"data-sidebar":"trigger",variant:"ghost",size:"icon",className:Le("h-7 w-7",t),onClick:i=>{s?.(i),n()},...a,children:[e.jsx(fue,{}),e.jsx("span",{className:"sr-only",children:"Toggle Sidebar"})]})});mT.displayName="SidebarTrigger";const pve=m.forwardRef(({className:t,...s},a)=>{const{toggleSidebar:r}=a_();return e.jsx("button",{ref:a,"data-sidebar":"rail","aria-label":"Toggle Sidebar",tabIndex:-1,onClick:r,title:"Toggle Sidebar",className:Le("absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] hover:after:bg-sidebar-border group-data-[side=left]:-right-4 group-data-[side=right]:left-0 sm:flex","[[data-side=left]_&]:cursor-w-resize [[data-side=right]_&]:cursor-e-resize","[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize","group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full group-data-[collapsible=offcanvas]:hover:bg-sidebar","[[data-side=left][data-collapsible=offcanvas]_&]:-right-2","[[data-side=right][data-collapsible=offcanvas]_&]:-left-2",t),...s})});pve.displayName="SidebarRail";const vH=m.forwardRef(({className:t,...s},a)=>e.jsx("main",{ref:a,className:Le("relative flex w-full flex-1 flex-col bg-background","md:peer-data-[variant=inset]:m-2 md:peer-data-[state=collapsed]:peer-data-[variant=inset]:ml-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow",t),...s}));vH.displayName="SidebarInset";const fve=m.forwardRef(({className:t,...s},a)=>e.jsx(oe,{ref:a,"data-sidebar":"input",className:Le("h-8 w-full bg-background shadow-none focus-visible:ring-2 focus-visible:ring-sidebar-ring",t),...s}));fve.displayName="SidebarInput";const Jo=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"header",className:Le("flex flex-col gap-2 p-2",t),...s}));Jo.displayName="SidebarHeader";const Qo=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"footer",className:Le("flex flex-col gap-2 p-2",t),...s}));Qo.displayName="SidebarFooter";const gve=m.forwardRef(({className:t,...s},a)=>e.jsx(As,{ref:a,"data-sidebar":"separator",className:Le("mx-2 w-auto bg-sidebar-border",t),...s}));gve.displayName="SidebarSeparator";const Xo=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"content",className:Le("flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden",t),...s}));Xo.displayName="SidebarContent";const Zs=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"group",className:Le("relative flex w-full min-w-0 flex-col p-2",t),...s}));Zs.displayName="SidebarGroup";const Aa=m.forwardRef(({className:t,asChild:s=!1,...a},r)=>{const n=s?Ug:"div";return e.jsx(n,{ref:r,"data-sidebar":"group-label",className:Le("flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium text-sidebar-foreground/70 outline-none ring-sidebar-ring transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0",t),...a})});Aa.displayName="SidebarGroupLabel";const vve=m.forwardRef(({className:t,asChild:s=!1,...a},r)=>{const n=s?Ug:"button";return e.jsx(n,{ref:r,"data-sidebar":"group-action",className:Le("absolute right-3 top-3.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","group-data-[collapsible=icon]:hidden",t),...a})});vve.displayName="SidebarGroupAction";const Js=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"group-content",className:Le("w-full text-sm",t),...s}));Js.displayName="SidebarGroupContent";const ls=m.forwardRef(({className:t,...s},a)=>e.jsx("ul",{ref:a,"data-sidebar":"menu",className:Le("flex w-full min-w-0 flex-col gap-1",t),...s}));ls.displayName="SidebarMenu";const rt=m.forwardRef(({className:t,...s},a)=>e.jsx("li",{ref:a,"data-sidebar":"menu-item",className:Le("group/menu-item relative",t),...s}));rt.displayName="SidebarMenuItem";const jve=wh("peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-none ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-[[data-sidebar=menu-action]]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:!size-8 group-data-[collapsible=icon]:!p-2 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0",{variants:{variant:{default:"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground",outline:"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]"},size:{default:"h-8 text-sm",sm:"h-7 text-xs",lg:"h-12 text-sm group-data-[collapsible=icon]:!p-0"}},defaultVariants:{variant:"default",size:"default"}}),it=m.forwardRef(({asChild:t=!1,isActive:s=!1,variant:a="default",size:r="default",tooltip:n,className:i,...l},o)=>{const d=t?Ug:"button",{isMobile:c,state:u}=a_(),h=e.jsx(d,{ref:o,"data-sidebar":"menu-button","data-size":r,"data-active":s,className:Le(jve({variant:a,size:r}),i),...l});return n?(typeof n=="string"&&(n={children:n}),e.jsxs(pu,{children:[e.jsx(fu,{asChild:!0,children:h}),e.jsx(vd,{side:"right",align:"center",hidden:u!=="collapsed"||c,...n})]})):h});it.displayName="SidebarMenuButton";const bve=m.forwardRef(({className:t,asChild:s=!1,showOnHover:a=!1,...r},n)=>{const i=s?Ug:"button";return e.jsx(i,{ref:n,"data-sidebar":"menu-action",className:Le("absolute right-1 top-1.5 flex aspect-square w-5 items-center justify-center rounded-md p-0 text-sidebar-foreground outline-none ring-sidebar-ring transition-transform hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 peer-hover/menu-button:text-sidebar-accent-foreground [&>svg]:size-4 [&>svg]:shrink-0","after:absolute after:-inset-2 after:md:hidden","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",a&&"group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 peer-data-[active=true]/menu-button:text-sidebar-accent-foreground md:opacity-0",t),...r})});bve.displayName="SidebarMenuAction";const yve=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,"data-sidebar":"menu-badge",className:Le("pointer-events-none absolute right-1 flex h-5 min-w-5 select-none items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums text-sidebar-foreground","peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground","peer-data-[size=sm]/menu-button:top-1","peer-data-[size=default]/menu-button:top-1.5","peer-data-[size=lg]/menu-button:top-2.5","group-data-[collapsible=icon]:hidden",t),...s}));yve.displayName="SidebarMenuBadge";const Nve=m.forwardRef(({className:t,showIcon:s=!1,...a},r)=>{const n=m.useMemo(()=>`${Math.floor(Math.random()*40)+50}%`,[]);return e.jsxs("div",{ref:r,"data-sidebar":"menu-skeleton",className:Le("flex h-8 items-center gap-2 rounded-md px-2",t),...a,children:[s&&e.jsx(pt,{className:"size-4 rounded-md","data-sidebar":"menu-skeleton-icon"}),e.jsx(pt,{className:"h-4 max-w-[--skeleton-width] flex-1","data-sidebar":"menu-skeleton-text",style:{"--skeleton-width":n}})]})});Nve.displayName="SidebarMenuSkeleton";const wve=m.forwardRef(({className:t,...s},a)=>e.jsx("ul",{ref:a,"data-sidebar":"menu-sub",className:Le("mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l border-sidebar-border px-2.5 py-0.5","group-data-[collapsible=icon]:hidden",t),...s}));wve.displayName="SidebarMenuSub";const _ve=m.forwardRef(({...t},s)=>e.jsx("li",{ref:s,...t}));_ve.displayName="SidebarMenuSubItem";const Cve=m.forwardRef(({asChild:t=!1,size:s="md",isActive:a,className:r,...n},i)=>{const l=t?Ug:"a";return e.jsx(l,{ref:i,"data-sidebar":"menu-sub-button","data-size":s,"data-active":a,className:Le("flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 text-sidebar-foreground outline-none ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0 [&>svg]:text-sidebar-accent-foreground","data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground",s==="sm"&&"text-xs",s==="md"&&"text-sm","group-data-[collapsible=icon]:hidden",r),...n})});Cve.displayName="SidebarMenuSubButton";function Gg(t){const s=t+"CollectionProvider",[a,r]=Vr(s),[n,i]=a(s,{collectionRef:{current:null},itemMap:new Map}),l=y=>{const{scope:b,children:N}=y,C=lt.useRef(null),_=lt.useRef(new Map).current;return e.jsx(n,{scope:b,itemMap:_,collectionRef:C,children:N})};l.displayName=s;const o=t+"CollectionSlot",d=Bx(o),c=lt.forwardRef((y,b)=>{const{scope:N,children:C}=y,_=i(o,N),A=vs(b,_.collectionRef);return e.jsx(d,{ref:A,children:C})});c.displayName=o;const u=t+"CollectionItemSlot",h="data-radix-collection-item",x=Bx(u),g=lt.forwardRef((y,b)=>{const{scope:N,children:C,..._}=y,A=lt.useRef(null),k=vs(b,A),E=i(u,N);return lt.useEffect(()=>(E.itemMap.set(A,{ref:A,..._}),()=>void E.itemMap.delete(A))),e.jsx(x,{[h]:"",ref:k,children:C})});g.displayName=u;function j(y){const b=i(t+"CollectionConsumer",y);return lt.useCallback(()=>{const C=b.collectionRef.current;if(!C)return[];const _=Array.from(C.querySelectorAll(`[${h}]`));return Array.from(b.itemMap.values()).sort((E,D)=>_.indexOf(E.ref.current)-_.indexOf(D.ref.current))},[b.collectionRef,b.itemMap])}return[{Provider:l,Slot:c,ItemSlot:g},j,r]}var Sve=m.createContext(void 0);function Ru(t){const s=m.useContext(Sve);return t||s||"ltr"}var Wk="rovingFocusGroup.onEntryFocus",kve={bubbles:!1,cancelable:!0},eb="RovingFocusGroup",[w5,jH,Eve]=Gg(eb),[Ave,Ch]=Vr(eb,[Eve]),[Pve,Dve]=Ave(eb),bH=m.forwardRef((t,s)=>e.jsx(w5.Provider,{scope:t.__scopeRovingFocusGroup,children:e.jsx(w5.Slot,{scope:t.__scopeRovingFocusGroup,children:e.jsx(Tve,{...t,ref:s})})}));bH.displayName=eb;var Tve=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,orientation:r,loop:n=!1,dir:i,currentTabStopId:l,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:d,onEntryFocus:c,preventScrollOnEntryFocus:u=!1,...h}=t,x=m.useRef(null),g=vs(s,x),j=Ru(i),[y,b]=Hn({prop:l,defaultProp:o??null,onChange:d,caller:eb}),[N,C]=m.useState(!1),_=Zr(c),A=jH(a),k=m.useRef(!1),[E,D]=m.useState(0);return m.useEffect(()=>{const R=x.current;if(R)return R.addEventListener(Wk,_),()=>R.removeEventListener(Wk,_)},[_]),e.jsx(Pve,{scope:a,orientation:r,dir:j,loop:n,currentTabStopId:y,onItemFocus:m.useCallback(R=>b(R),[b]),onItemShiftTab:m.useCallback(()=>C(!0),[]),onFocusableItemAdd:m.useCallback(()=>D(R=>R+1),[]),onFocusableItemRemove:m.useCallback(()=>D(R=>R-1),[]),children:e.jsx(Pt.div,{tabIndex:N||E===0?-1:0,"data-orientation":r,...h,ref:g,style:{outline:"none",...t.style},onMouseDown:gt(t.onMouseDown,()=>{k.current=!0}),onFocus:gt(t.onFocus,R=>{const O=!k.current;if(R.target===R.currentTarget&&O&&!N){const P=new CustomEvent(Wk,kve);if(R.currentTarget.dispatchEvent(P),!P.defaultPrevented){const T=A().filter(H=>H.focusable),B=T.find(H=>H.active),G=T.find(H=>H.id===y),z=[B,G,...T].filter(Boolean).map(H=>H.ref.current);wH(z,u)}}k.current=!1}),onBlur:gt(t.onBlur,()=>C(!1))})})}),yH="RovingFocusGroupItem",NH=m.forwardRef((t,s)=>{const{__scopeRovingFocusGroup:a,focusable:r=!0,active:n=!1,tabStopId:i,children:l,...o}=t,d=En(),c=i||d,u=Dve(yH,a),h=u.currentTabStopId===c,x=jH(a),{onFocusableItemAdd:g,onFocusableItemRemove:j,currentTabStopId:y}=u;return m.useEffect(()=>{if(r)return g(),()=>j()},[r,g,j]),e.jsx(w5.ItemSlot,{scope:a,id:c,focusable:r,active:n,children:e.jsx(Pt.span,{tabIndex:h?0:-1,"data-orientation":u.orientation,...o,ref:s,onMouseDown:gt(t.onMouseDown,b=>{r?u.onItemFocus(c):b.preventDefault()}),onFocus:gt(t.onFocus,()=>u.onItemFocus(c)),onKeyDown:gt(t.onKeyDown,b=>{if(b.key==="Tab"&&b.shiftKey){u.onItemShiftTab();return}if(b.target!==b.currentTarget)return;const N=Ove(b,u.orientation,u.dir);if(N!==void 0){if(b.metaKey||b.ctrlKey||b.altKey||b.shiftKey)return;b.preventDefault();let _=x().filter(A=>A.focusable).map(A=>A.ref.current);if(N==="last")_.reverse();else if(N==="prev"||N==="next"){N==="prev"&&_.reverse();const A=_.indexOf(b.currentTarget);_=u.loop?Ive(_,A+1):_.slice(A+1)}setTimeout(()=>wH(_))}}),children:typeof l=="function"?l({isCurrentTabStop:h,hasTabStop:y!=null}):l})})});NH.displayName=yH;var Fve={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function Rve(t,s){return s!=="rtl"?t:t==="ArrowLeft"?"ArrowRight":t==="ArrowRight"?"ArrowLeft":t}function Ove(t,s,a){const r=Rve(t.key,a);if(!(s==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(s==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return Fve[r]}function wH(t,s=!1){const a=document.activeElement;for(const r of t)if(r===a||(r.focus({preventScroll:s}),document.activeElement!==a))return}function Ive(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var r_=bH,n_=NH,_5=["Enter"," "],Lve=["ArrowDown","PageUp","Home"],_H=["ArrowUp","PageDown","End"],Mve=[...Lve,..._H],Bve={ltr:[..._5,"ArrowRight"],rtl:[..._5,"ArrowLeft"]},$ve={ltr:["ArrowLeft"],rtl:["ArrowRight"]},tb="Menu",[oj,Uve,zve]=Gg(tb),[pp,CH]=Vr(tb,[zve,_h,Ch]),i_=_h(),SH=Ch(),[qve,fp]=pp(tb),[Vve,sb]=pp(tb),kH=t=>{const{__scopeMenu:s,open:a=!1,children:r,dir:n,onOpenChange:i,modal:l=!0}=t,o=i_(s),[d,c]=m.useState(null),u=m.useRef(!1),h=Zr(i),x=Ru(n);return m.useEffect(()=>{const g=()=>{u.current=!0,document.addEventListener("pointerdown",j,{capture:!0,once:!0}),document.addEventListener("pointermove",j,{capture:!0,once:!0})},j=()=>u.current=!1;return document.addEventListener("keydown",g,{capture:!0}),()=>{document.removeEventListener("keydown",g,{capture:!0}),document.removeEventListener("pointerdown",j,{capture:!0}),document.removeEventListener("pointermove",j,{capture:!0})}},[]),e.jsx(J1,{...o,children:e.jsx(qve,{scope:s,open:a,onOpenChange:h,content:d,onContentChange:c,children:e.jsx(Vve,{scope:s,onClose:m.useCallback(()=>h(!1),[h]),isUsingKeyboardRef:u,dir:x,modal:l,children:r})})})};kH.displayName=tb;var Wve="MenuAnchor",hT=m.forwardRef((t,s)=>{const{__scopeMenu:a,...r}=t,n=i_(a);return e.jsx(Qj,{...n,...r,ref:s})});hT.displayName=Wve;var xT="MenuPortal",[Hve,EH]=pp(xT,{forceMount:void 0}),AH=t=>{const{__scopeMenu:s,forceMount:a,children:r,container:n}=t,i=fp(xT,s);return e.jsx(Hve,{scope:s,forceMount:a,children:e.jsx(jn,{present:a||i.open,children:e.jsx(hp,{asChild:!0,container:n,children:r})})})};AH.displayName=xT;var Bo="MenuContent",[Gve,pT]=pp(Bo),PH=m.forwardRef((t,s)=>{const a=EH(Bo,t.__scopeMenu),{forceMount:r=a.forceMount,...n}=t,i=fp(Bo,t.__scopeMenu),l=sb(Bo,t.__scopeMenu);return e.jsx(oj.Provider,{scope:t.__scopeMenu,children:e.jsx(jn,{present:r||i.open,children:e.jsx(oj.Slot,{scope:t.__scopeMenu,children:l.modal?e.jsx(Kve,{...n,ref:s}):e.jsx(Yve,{...n,ref:s})})})})}),Kve=m.forwardRef((t,s)=>{const a=fp(Bo,t.__scopeMenu),r=m.useRef(null),n=vs(s,r);return m.useEffect(()=>{const i=r.current;if(i)return z1(i)},[]),e.jsx(fT,{...t,ref:n,trapFocus:a.open,disableOutsidePointerEvents:a.open,disableOutsideScroll:!0,onFocusOutside:gt(t.onFocusOutside,i=>i.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>a.onOpenChange(!1)})}),Yve=m.forwardRef((t,s)=>{const a=fp(Bo,t.__scopeMenu);return e.jsx(fT,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>a.onOpenChange(!1)})}),Zve=Bx("MenuContent.ScrollLock"),fT=m.forwardRef((t,s)=>{const{__scopeMenu:a,loop:r=!1,trapFocus:n,onOpenAutoFocus:i,onCloseAutoFocus:l,disableOutsidePointerEvents:o,onEntryFocus:d,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:x,onDismiss:g,disableOutsideScroll:j,...y}=t,b=fp(Bo,a),N=sb(Bo,a),C=i_(a),_=SH(a),A=Uve(a),[k,E]=m.useState(null),D=m.useRef(null),R=vs(s,D,b.onContentChange),O=m.useRef(0),P=m.useRef(""),T=m.useRef(0),B=m.useRef(null),G=m.useRef("right"),q=m.useRef(0),z=j?Gj:m.Fragment,H=j?{as:Zve,allowPinchZoom:!0}:void 0,le=te=>{const ne=P.current+te,ae=A().filter(ce=>!ce.disabled),re=document.activeElement,xe=ae.find(ce=>ce.ref.current===re)?.textValue,ye=ae.map(ce=>ce.textValue),ke=o0e(ye,ne,xe),ze=ae.find(ce=>ce.textValue===ke)?.ref.current;(function ce(Re){P.current=Re,window.clearTimeout(O.current),Re!==""&&(O.current=window.setTimeout(()=>ce(""),1e3))})(ne),ze&&setTimeout(()=>ze.focus())};m.useEffect(()=>()=>window.clearTimeout(O.current),[]),$1();const Y=m.useCallback(te=>G.current===B.current?.side&&d0e(te,B.current?.area),[]);return e.jsx(Gve,{scope:a,searchRef:P,onItemEnter:m.useCallback(te=>{Y(te)&&te.preventDefault()},[Y]),onItemLeave:m.useCallback(te=>{Y(te)||(D.current?.focus(),E(null))},[Y]),onTriggerLeave:m.useCallback(te=>{Y(te)&&te.preventDefault()},[Y]),pointerGraceTimerRef:T,onPointerGraceIntentChange:m.useCallback(te=>{B.current=te},[]),children:e.jsx(z,{...H,children:e.jsx(Hj,{asChild:!0,trapped:n,onMountAutoFocus:gt(i,te=>{te.preventDefault(),D.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:l,children:e.jsx(mp,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:c,onPointerDownOutside:u,onFocusOutside:h,onInteractOutside:x,onDismiss:g,children:e.jsx(r_,{asChild:!0,..._,dir:N.dir,orientation:"vertical",loop:r,currentTabStopId:k,onCurrentTabStopIdChange:E,onEntryFocus:gt(d,te=>{N.isUsingKeyboardRef.current||te.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(Q1,{role:"menu","aria-orientation":"vertical","data-state":HH(b.open),"data-radix-menu-content":"",dir:N.dir,...C,...y,ref:R,style:{outline:"none",...y.style},onKeyDown:gt(y.onKeyDown,te=>{const ae=te.target.closest("[data-radix-menu-content]")===te.currentTarget,re=te.ctrlKey||te.altKey||te.metaKey,xe=te.key.length===1;ae&&(te.key==="Tab"&&te.preventDefault(),!re&&xe&&le(te.key));const ye=D.current;if(te.target!==ye||!Mve.includes(te.key))return;te.preventDefault();const ze=A().filter(ce=>!ce.disabled).map(ce=>ce.ref.current);_H.includes(te.key)&&ze.reverse(),i0e(ze)}),onBlur:gt(t.onBlur,te=>{te.currentTarget.contains(te.target)||(window.clearTimeout(O.current),P.current="")}),onPointerMove:gt(t.onPointerMove,cj(te=>{const ne=te.target,ae=q.current!==te.clientX;if(te.currentTarget.contains(ne)&&ae){const re=te.clientX>q.current?"right":"left";G.current=re,q.current=te.clientX}}))})})})})})})});PH.displayName=Bo;var Jve="MenuGroup",gT=m.forwardRef((t,s)=>{const{__scopeMenu:a,...r}=t;return e.jsx(Pt.div,{role:"group",...r,ref:s})});gT.displayName=Jve;var Qve="MenuLabel",DH=m.forwardRef((t,s)=>{const{__scopeMenu:a,...r}=t;return e.jsx(Pt.div,{...r,ref:s})});DH.displayName=Qve;var i2="MenuItem",aM="menu.itemSelect",l_=m.forwardRef((t,s)=>{const{disabled:a=!1,onSelect:r,...n}=t,i=m.useRef(null),l=sb(i2,t.__scopeMenu),o=pT(i2,t.__scopeMenu),d=vs(s,i),c=m.useRef(!1),u=()=>{const h=i.current;if(!a&&h){const x=new CustomEvent(aM,{bubbles:!0,cancelable:!0});h.addEventListener(aM,g=>r?.(g),{once:!0}),MD(h,x),x.defaultPrevented?c.current=!1:l.onClose()}};return e.jsx(TH,{...n,ref:d,disabled:a,onClick:gt(t.onClick,u),onPointerDown:h=>{t.onPointerDown?.(h),c.current=!0},onPointerUp:gt(t.onPointerUp,h=>{c.current||h.currentTarget?.click()}),onKeyDown:gt(t.onKeyDown,h=>{const x=o.searchRef.current!=="";a||x&&h.key===" "||_5.includes(h.key)&&(h.currentTarget.click(),h.preventDefault())})})});l_.displayName=i2;var TH=m.forwardRef((t,s)=>{const{__scopeMenu:a,disabled:r=!1,textValue:n,...i}=t,l=pT(i2,a),o=SH(a),d=m.useRef(null),c=vs(s,d),[u,h]=m.useState(!1),[x,g]=m.useState("");return m.useEffect(()=>{const j=d.current;j&&g((j.textContent??"").trim())},[i.children]),e.jsx(oj.ItemSlot,{scope:a,disabled:r,textValue:n??x,children:e.jsx(n_,{asChild:!0,...o,focusable:!r,children:e.jsx(Pt.div,{role:"menuitem","data-highlighted":u?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...i,ref:c,onPointerMove:gt(t.onPointerMove,cj(j=>{r?l.onItemLeave(j):(l.onItemEnter(j),j.defaultPrevented||j.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:gt(t.onPointerLeave,cj(j=>l.onItemLeave(j))),onFocus:gt(t.onFocus,()=>h(!0)),onBlur:gt(t.onBlur,()=>h(!1))})})})}),Xve="MenuCheckboxItem",FH=m.forwardRef((t,s)=>{const{checked:a=!1,onCheckedChange:r,...n}=t;return e.jsx(MH,{scope:t.__scopeMenu,checked:a,children:e.jsx(l_,{role:"menuitemcheckbox","aria-checked":l2(a)?"mixed":a,...n,ref:s,"data-state":jT(a),onSelect:gt(n.onSelect,()=>r?.(l2(a)?!0:!a),{checkForDefaultPrevented:!1})})})});FH.displayName=Xve;var RH="MenuRadioGroup",[e0e,t0e]=pp(RH,{value:void 0,onValueChange:()=>{}}),OH=m.forwardRef((t,s)=>{const{value:a,onValueChange:r,...n}=t,i=Zr(r);return e.jsx(e0e,{scope:t.__scopeMenu,value:a,onValueChange:i,children:e.jsx(gT,{...n,ref:s})})});OH.displayName=RH;var IH="MenuRadioItem",LH=m.forwardRef((t,s)=>{const{value:a,...r}=t,n=t0e(IH,t.__scopeMenu),i=a===n.value;return e.jsx(MH,{scope:t.__scopeMenu,checked:i,children:e.jsx(l_,{role:"menuitemradio","aria-checked":i,...r,ref:s,"data-state":jT(i),onSelect:gt(r.onSelect,()=>n.onValueChange?.(a),{checkForDefaultPrevented:!1})})})});LH.displayName=IH;var vT="MenuItemIndicator",[MH,s0e]=pp(vT,{checked:!1}),BH=m.forwardRef((t,s)=>{const{__scopeMenu:a,forceMount:r,...n}=t,i=s0e(vT,a);return e.jsx(jn,{present:r||l2(i.checked)||i.checked===!0,children:e.jsx(Pt.span,{...n,ref:s,"data-state":jT(i.checked)})})});BH.displayName=vT;var a0e="MenuSeparator",$H=m.forwardRef((t,s)=>{const{__scopeMenu:a,...r}=t;return e.jsx(Pt.div,{role:"separator","aria-orientation":"horizontal",...r,ref:s})});$H.displayName=a0e;var r0e="MenuArrow",UH=m.forwardRef((t,s)=>{const{__scopeMenu:a,...r}=t,n=i_(a);return e.jsx(X1,{...n,...r,ref:s})});UH.displayName=r0e;var n0e="MenuSub",[wJe,zH]=pp(n0e),T0="MenuSubTrigger",qH=m.forwardRef((t,s)=>{const a=fp(T0,t.__scopeMenu),r=sb(T0,t.__scopeMenu),n=zH(T0,t.__scopeMenu),i=pT(T0,t.__scopeMenu),l=m.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:d}=i,c={__scopeMenu:t.__scopeMenu},u=m.useCallback(()=>{l.current&&window.clearTimeout(l.current),l.current=null},[]);return m.useEffect(()=>u,[u]),m.useEffect(()=>{const h=o.current;return()=>{window.clearTimeout(h),d(null)}},[o,d]),e.jsx(hT,{asChild:!0,...c,children:e.jsx(TH,{id:n.triggerId,"aria-haspopup":"menu","aria-expanded":a.open,"aria-controls":n.contentId,"data-state":HH(a.open),...t,ref:Uo(s,n.onTriggerChange),onClick:h=>{t.onClick?.(h),!(t.disabled||h.defaultPrevented)&&(h.currentTarget.focus(),a.open||a.onOpenChange(!0))},onPointerMove:gt(t.onPointerMove,cj(h=>{i.onItemEnter(h),!h.defaultPrevented&&!t.disabled&&!a.open&&!l.current&&(i.onPointerGraceIntentChange(null),l.current=window.setTimeout(()=>{a.onOpenChange(!0),u()},100))})),onPointerLeave:gt(t.onPointerLeave,cj(h=>{u();const x=a.content?.getBoundingClientRect();if(x){const g=a.content?.dataset.side,j=g==="right",y=j?-5:5,b=x[j?"left":"right"],N=x[j?"right":"left"];i.onPointerGraceIntentChange({area:[{x:h.clientX+y,y:h.clientY},{x:b,y:x.top},{x:N,y:x.top},{x:N,y:x.bottom},{x:b,y:x.bottom}],side:g}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>i.onPointerGraceIntentChange(null),300)}else{if(i.onTriggerLeave(h),h.defaultPrevented)return;i.onPointerGraceIntentChange(null)}})),onKeyDown:gt(t.onKeyDown,h=>{const x=i.searchRef.current!=="";t.disabled||x&&h.key===" "||Bve[r.dir].includes(h.key)&&(a.onOpenChange(!0),a.content?.focus(),h.preventDefault())})})})});qH.displayName=T0;var VH="MenuSubContent",WH=m.forwardRef((t,s)=>{const a=EH(Bo,t.__scopeMenu),{forceMount:r=a.forceMount,...n}=t,i=fp(Bo,t.__scopeMenu),l=sb(Bo,t.__scopeMenu),o=zH(VH,t.__scopeMenu),d=m.useRef(null),c=vs(s,d);return e.jsx(oj.Provider,{scope:t.__scopeMenu,children:e.jsx(jn,{present:r||i.open,children:e.jsx(oj.Slot,{scope:t.__scopeMenu,children:e.jsx(fT,{id:o.contentId,"aria-labelledby":o.triggerId,...n,ref:c,align:"start",side:l.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:u=>{l.isUsingKeyboardRef.current&&d.current?.focus(),u.preventDefault()},onCloseAutoFocus:u=>u.preventDefault(),onFocusOutside:gt(t.onFocusOutside,u=>{u.target!==o.trigger&&i.onOpenChange(!1)}),onEscapeKeyDown:gt(t.onEscapeKeyDown,u=>{l.onClose(),u.preventDefault()}),onKeyDown:gt(t.onKeyDown,u=>{const h=u.currentTarget.contains(u.target),x=$ve[l.dir].includes(u.key);h&&x&&(i.onOpenChange(!1),o.trigger?.focus(),u.preventDefault())})})})})})});WH.displayName=VH;function HH(t){return t?"open":"closed"}function l2(t){return t==="indeterminate"}function jT(t){return l2(t)?"indeterminate":t?"checked":"unchecked"}function i0e(t){const s=document.activeElement;for(const a of t)if(a===s||(a.focus(),document.activeElement!==s))return}function l0e(t,s){return t.map((a,r)=>t[(s+r)%t.length])}function o0e(t,s,a){const n=s.length>1&&Array.from(s).every(c=>c===s[0])?s[0]:s,i=a?t.indexOf(a):-1;let l=l0e(t,Math.max(i,0));n.length===1&&(l=l.filter(c=>c!==a));const d=l.find(c=>c.toLowerCase().startsWith(n.toLowerCase()));return d!==a?d:void 0}function c0e(t,s){const{x:a,y:r}=t;let n=!1;for(let i=0,l=s.length-1;i<s.length;l=i++){const o=s[i],d=s[l],c=o.x,u=o.y,h=d.x,x=d.y;u>r!=x>r&&a<(h-c)*(r-u)/(x-u)+c&&(n=!n)}return n}function d0e(t,s){if(!s)return!1;const a={x:t.clientX,y:t.clientY};return c0e(a,s)}function cj(t){return s=>s.pointerType==="mouse"?t(s):void 0}var u0e=kH,m0e=hT,h0e=AH,x0e=PH,p0e=gT,f0e=DH,g0e=l_,v0e=FH,j0e=OH,b0e=LH,y0e=BH,N0e=$H,w0e=UH,_0e=qH,C0e=WH,o_="DropdownMenu",[S0e,_Je]=Vr(o_,[CH]),ol=CH(),[k0e,GH]=S0e(o_),KH=t=>{const{__scopeDropdownMenu:s,children:a,dir:r,open:n,defaultOpen:i,onOpenChange:l,modal:o=!0}=t,d=ol(s),c=m.useRef(null),[u,h]=Hn({prop:n,defaultProp:i??!1,onChange:l,caller:o_});return e.jsx(k0e,{scope:s,triggerId:En(),triggerRef:c,contentId:En(),open:u,onOpenChange:h,onOpenToggle:m.useCallback(()=>h(x=>!x),[h]),modal:o,children:e.jsx(u0e,{...d,open:u,onOpenChange:h,dir:r,modal:o,children:a})})};KH.displayName=o_;var YH="DropdownMenuTrigger",ZH=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,disabled:r=!1,...n}=t,i=GH(YH,a),l=ol(a);return e.jsx(m0e,{asChild:!0,...l,children:e.jsx(Pt.button,{type:"button",id:i.triggerId,"aria-haspopup":"menu","aria-expanded":i.open,"aria-controls":i.open?i.contentId:void 0,"data-state":i.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...n,ref:Uo(s,i.triggerRef),onPointerDown:gt(t.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(i.onOpenToggle(),i.open||o.preventDefault())}),onKeyDown:gt(t.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&i.onOpenToggle(),o.key==="ArrowDown"&&i.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});ZH.displayName=YH;var E0e="DropdownMenuPortal",JH=t=>{const{__scopeDropdownMenu:s,...a}=t,r=ol(s);return e.jsx(h0e,{...r,...a})};JH.displayName=E0e;var QH="DropdownMenuContent",XH=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=GH(QH,a),i=ol(a),l=m.useRef(!1);return e.jsx(x0e,{id:n.contentId,"aria-labelledby":n.triggerId,...i,...r,ref:s,onCloseAutoFocus:gt(t.onCloseAutoFocus,o=>{l.current||n.triggerRef.current?.focus(),l.current=!1,o.preventDefault()}),onInteractOutside:gt(t.onInteractOutside,o=>{const d=o.detail.originalEvent,c=d.button===0&&d.ctrlKey===!0,u=d.button===2||c;(!n.modal||u)&&(l.current=!0)}),style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});XH.displayName=QH;var A0e="DropdownMenuGroup",P0e=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(p0e,{...n,...r,ref:s})});P0e.displayName=A0e;var D0e="DropdownMenuLabel",eG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(f0e,{...n,...r,ref:s})});eG.displayName=D0e;var T0e="DropdownMenuItem",tG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(g0e,{...n,...r,ref:s})});tG.displayName=T0e;var F0e="DropdownMenuCheckboxItem",sG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(v0e,{...n,...r,ref:s})});sG.displayName=F0e;var R0e="DropdownMenuRadioGroup",O0e=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(j0e,{...n,...r,ref:s})});O0e.displayName=R0e;var I0e="DropdownMenuRadioItem",aG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(b0e,{...n,...r,ref:s})});aG.displayName=I0e;var L0e="DropdownMenuItemIndicator",rG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(y0e,{...n,...r,ref:s})});rG.displayName=L0e;var M0e="DropdownMenuSeparator",nG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(N0e,{...n,...r,ref:s})});nG.displayName=M0e;var B0e="DropdownMenuArrow",$0e=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(w0e,{...n,...r,ref:s})});$0e.displayName=B0e;var U0e="DropdownMenuSubTrigger",iG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(_0e,{...n,...r,ref:s})});iG.displayName=U0e;var z0e="DropdownMenuSubContent",lG=m.forwardRef((t,s)=>{const{__scopeDropdownMenu:a,...r}=t,n=ol(a);return e.jsx(C0e,{...n,...r,ref:s,style:{...t.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lG.displayName=z0e;var q0e=KH,V0e=ZH,W0e=JH,oG=XH,cG=eG,dG=tG,uG=sG,mG=aG,hG=rG,xG=nG,pG=iG,fG=lG;const ci=q0e,di=V0e,H0e=m.forwardRef(({className:t,inset:s,children:a,...r},n)=>e.jsxs(pG,{ref:n,className:Le("flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",s&&"pl-8",t),...r,children:[a,e.jsx(xr,{className:"ml-auto"})]}));H0e.displayName=pG.displayName;const G0e=m.forwardRef(({className:t,...s},a)=>e.jsx(fG,{ref:a,className:Le("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...s}));G0e.displayName=fG.displayName;const Zn=m.forwardRef(({className:t,sideOffset:s=4,...a},r)=>e.jsx(W0e,{children:e.jsx(oG,{ref:r,sideOffset:s,className:Le("z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]",t),...a})}));Zn.displayName=oG.displayName;const is=m.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(dG,{ref:r,className:Le("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",s&&"pl-8",t),...a}));is.displayName=dG.displayName;const K0e=m.forwardRef(({className:t,children:s,checked:a,...r},n)=>e.jsxs(uG,{ref:n,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:a,...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hG,{children:e.jsx(Za,{className:"h-4 w-4"})})}),s]}));K0e.displayName=uG.displayName;const Y0e=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(mG,{ref:r,className:Le("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hG,{children:e.jsx(Qq,{className:"h-2 w-2 fill-current"})})}),s]}));Y0e.displayName=mG.displayName;const bT=m.forwardRef(({className:t,inset:s,...a},r)=>e.jsx(cG,{ref:r,className:Le("px-2 py-1.5 text-sm font-semibold",s&&"pl-8",t),...a}));bT.displayName=cG.displayName;const Dc=m.forwardRef(({className:t,...s},a)=>e.jsx(xG,{ref:a,className:Le("-mx-1 my-1 h-px bg-muted",t),...s}));Dc.displayName=xG.displayName;function gG(){const{theme:t,setTheme:s}=Gq();return e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsxs(M,{variant:"ghost",size:"icon",className:"h-9 w-9",children:[e.jsx(Gw,{className:"h-4 w-4 rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),e.jsx(qw,{className:"absolute h-4 w-4 rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),e.jsx("span",{className:"sr-only",children:"Toggle theme"})]})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>s("light"),className:"gap-2",children:[e.jsx(Gw,{className:"h-4 w-4"}),e.jsx("span",{children:"Light"}),t==="light"&&e.jsx("span",{className:"ml-auto",children:"âœ“"})]}),e.jsxs(is,{onClick:()=>s("dark"),className:"gap-2",children:[e.jsx(qw,{className:"h-4 w-4"}),e.jsx("span",{children:"Dark"}),t==="dark"&&e.jsx("span",{className:"ml-auto",children:"âœ“"})]}),e.jsxs(is,{onClick:()=>s("system"),className:"gap-2",children:[e.jsx(lV,{className:"h-4 w-4"}),e.jsx("span",{children:"System"}),t==="system"&&e.jsx("span",{className:"ml-auto",children:"âœ“"})]})]})]})}const mn={getNotificationPreferences:async()=>(await Ae.get("/bank/notification-preferences")).data,updateNotificationPreferences:async t=>(await Ae.put("/bank/notification-preferences",null,{params:t})).data,getJobs:async t=>(await Ae.get("/bank/jobs",{params:t})).data,getJobStatus:async t=>(await Ae.get(`/bank/jobs/${t}`)).data,getResults:async t=>(await Ae.get("/bank/results",{params:t})).data,getClients:async(t,s)=>(await Ae.get("/bank/clients",{params:{query:t,limit:s}})).data,exportResultsPDF:async t=>{const s=await Ae.post("/bank/results/export/pdf",null,{params:t,responseType:"blob"});return s.headers["content-type"]?.includes("application/json")?JSON.parse(await s.data.text()):s.data},exportResultsCSV:async t=>{const s=await Ae.post("/bank/results/export/csv",null,{params:t,responseType:"blob"});return s.headers["content-type"]?.includes("application/json")?JSON.parse(await s.data.text()):s.data},getExportJobStatus:async t=>(await Ae.get(`/bank/exports/${t}`)).data,getClientStats:async t=>{try{return(await Ae.get("/bank/clients/stats",{params:t})).data}catch(s){throw s}},checkDuplicate:async(t,s)=>(await Ae.get("/bank/duplicates/check",{params:{lc_number:t,client_name:s}})).data,getClientDashboard:async(t,s)=>{try{return(await Ae.get(`/bank/clients/${encodeURIComponent(t)}/dashboard`,{params:s})).data}catch(a){throw a}},extractZipFile:async t=>{const s=new FormData;return s.append("zip_file",t),(await Ae.post("/bank/bulk-upload/extract",s,{headers:{"Content-Type":"multipart/form-data"}})).data},submitBulkUpload:async t=>{const s=new FormData;return s.append("bulk_session_id",t.bulk_session_id),s.append("lc_sets_data",JSON.stringify(t.lc_sets)),(await Ae.post("/bank/bulk-upload/submit",s,{headers:{"Content-Type":"multipart/form-data"}})).data}};new Date(Date.now()-2160*60*60*1e3).toISOString(),new Date(Date.now()-1440*60*1e3).toISOString(),new Date(Date.now()-1440*60*60*1e3).toISOString(),new Date(Date.now()-2880*60*1e3).toISOString(),new Date(Date.now()-1080*60*60*1e3).toISOString(),new Date(Date.now()-4320*60*1e3).toISOString(),new Date(Date.now()-720*60*60*1e3).toISOString(),new Date(Date.now()-7200*60*1e3).toISOString(),new Date(Date.now()-2880*60*60*1e3).toISOString(),new Date(Date.now()-3600*1e3).toISOString();const cf={listUsers:async t=>{try{const s=new URLSearchParams;return t?.role&&s.append("role",t.role),t?.is_active!==void 0&&s.append("is_active",String(t.is_active)),t?.search&&s.append("search",t.search),t?.page&&s.append("page",String(t.page)),t?.per_page&&s.append("per_page",String(t.per_page)),t?.sort_by&&s.append("sort_by",t.sort_by),t?.sort_order&&s.append("sort_order",t.sort_order),(await Ae.get(`/bank/users?${s.toString()}`)).data}catch(s){throw s}},inviteUser:async t=>(await Ae.post("/bank/users/invite",t)).data,updateUserRole:async(t,s)=>(await Ae.put(`/bank/users/${t}/role`,s)).data,suspendUser:async t=>(await Ae.put(`/bank/users/${t}/suspend`)).data,reactivateUser:async t=>(await Ae.put(`/bank/users/${t}/reactivate`)).data,reset2FA:async t=>(await Ae.post(`/bank/users/${t}/reset-2fa`)).data},Dx={listOverlays:async()=>(await Ae.get("/bank/policy/overlays")).data,createOverlay:async t=>(await Ae.post("/bank/policy/overlays",t)).data,publishOverlay:async t=>(await Ae.post(`/bank/policy/overlays/publish?overlay_id=${t}`)).data,listExceptions:async t=>{const s=t?`?rule_code=${t}`:"";return(await Ae.get(`/bank/policy/overlays/exceptions${s}`)).data},createException:async(t,s)=>{const a=s?`?overlay_id=${s}`:"";return(await Ae.post(`/bank/policy/overlays/exceptions${a}`,t)).data},deleteException:async t=>(await Ae.delete(`/bank/policy/overlays/exceptions/${t}`)).data,getAnalytics:async(t="30d")=>(await Ae.get(`/bank/policy/analytics?time_range=${t}`)).data},vw={request2FA:async()=>(await Ae.post("/bank/auth/request-2fa")).data,verify2FA:async(t,s)=>(await Ae.post(`/bank/auth/verify-2fa?code=${t}&session_id=${s}`)).data,getSessionStatus:async()=>(await Ae.get("/bank/auth/session-status")).data},lN={getQueue:async t=>{try{const s=new URLSearchParams;return t?.status&&s.append("status",t.status),t?.job_type&&s.append("job_type",t.job_type),t?.search&&s.append("search",t.search),t?.limit&&s.append("limit",String(t.limit)),t?.offset&&s.append("offset",String(t.offset)),(await Ae.get(`/bank/queue?${s.toString()}`)).data}catch(s){return console.warn("Bank queue API unavailable, returning empty response:",s?.message),{items:[],total:0,page:1,size:t?.limit||20,pages:0}}},getQueueStats:async(t="24h")=>{try{return(await Ae.get(`/bank/queue/stats?time_range=${t}`)).data}catch(s){throw s}},retryJob:async(t,s)=>(await Ae.post(`/bank/queue/${t}/retry?reason=${encodeURIComponent(s)}`)).data,cancelJob:async(t,s)=>(await Ae.post(`/bank/queue/${t}/cancel?reason=${encodeURIComponent(s)}`)).data,requeueJob:async(t,s)=>{const a=s?`?reason=${encodeURIComponent(s)}`:"";return(await Ae.post(`/bank/queue/${t}/requeue${a}`)).data},bulkAction:async t=>(await Ae.post("/bank/queue/bulk-action",t)).data,getSLAMetrics:async(t="week")=>{try{return(await Ae.get("/bank/sla/metrics",{params:{time_range:t}})).data}catch(s){throw s}},getSLABreaches:async(t="week",s)=>{try{return(await Ae.get("/bank/sla/breaches",{params:{time_range:t,severity:s}})).data}catch(a){throw a}},exportSLAReport:async(t="week",s="pdf")=>{const a=await Ae.post("/bank/sla/export",null,{params:{time_range:t,format:s},responseType:"blob"}),r=window.URL.createObjectURL(new Blob([a.data])),n=document.createElement("a");n.href=r,n.setAttribute("download",`sla-report-${t}.${s}`),document.body.appendChild(n),n.click(),n.remove(),window.URL.revokeObjectURL(r)},listValidationSessions:async t=>{try{return(await Ae.get("/bank/evidence-packs/sessions",{params:t})).data}catch(s){throw s}},generateEvidencePack:async t=>(await Ae.post("/bank/evidence-packs/generate",t)).data},s0={getQuota:async t=>{try{return(await Ae.get("/bank/ai/quota",{params:{feature:t}})).data}catch(s){throw s}},explainDiscrepancy:async t=>{try{return(await Ae.post("/bank/ai/discrepancy-explain",t)).data}catch(s){throw s}},generateLetter:async t=>{try{return(await Ae.post("/bank/ai/generate-letter",t)).data}catch(s){throw s}},summarizeDocument:async t=>{try{return(await Ae.post("/bank/ai/summarize",t)).data}catch(s){throw s}},translateText:async t=>{try{return(await Ae.post("/bank/ai/translate",t)).data}catch(s){throw s}}},oN={create:async t=>(await Ae.post("/bank/saved-views",t)).data,list:async t=>(await Ae.get("/bank/saved-views",{params:t?{resource:t}:void 0})).data,getDefault:async t=>(await Ae.get("/bank/saved-views/default",{params:{resource:t}})).data,update:async(t,s)=>(await Ae.put(`/bank/saved-views/${t}`,s)).data,delete:async t=>{await Ae.delete(`/bank/saved-views/${t}`)}},yT={getCandidates:async(t,s,a)=>(await Ae.get(`/bank/duplicates/candidates/${t}`,{params:{threshold:s,limit:a}})).data,merge:async t=>(await Ae.post("/bank/duplicates/merge",t)).data,getMergeHistory:async t=>(await Ae.get(`/bank/duplicates/history/${t}`)).data},Hk={create:async t=>(await Ae.post("/bank/tokens",t)).data,list:async t=>(await Ae.get("/bank/tokens",{params:{include_revoked:t}})).data,get:async t=>(await Ae.get(`/bank/tokens/${t}`)).data,update:async(t,s)=>(await Ae.put(`/bank/tokens/${t}`,s)).data,revoke:async(t,s)=>(await Ae.post(`/bank/tokens/${t}/revoke`,{reason:s})).data},Tf={create:async t=>(await Ae.post("/bank/webhooks",t)).data,list:async()=>(await Ae.get("/bank/webhooks")).data,get:async t=>(await Ae.get(`/bank/webhooks/${t}`)).data,update:async(t,s)=>(await Ae.put(`/bank/webhooks/${t}`,s)).data,delete:async t=>{await Ae.delete(`/bank/webhooks/${t}`)},test:async(t,s)=>(await Ae.post(`/bank/webhooks/${t}/test`,s||{})).data,listDeliveries:async(t,s)=>(await Ae.get(`/bank/webhooks/${t}/deliveries`,{params:s})).data,replay:async t=>(await Ae.post(`/bank/webhooks/deliveries/${t}/replay`)).data},F0={listOrgs:async()=>({orgs:(await Ae.get("/bank/orgs")).data.results}),createOrg:async t=>(await Ae.post("/bank/orgs",t)).data,updateOrg:async(t,s)=>(await Ae.put(`/bank/orgs/${t}`,s)).data,deleteOrg:async t=>{await Ae.delete(`/bank/orgs/${t}`)}},NT=m.createContext(void 0),vG=[{id:"bank_user_1",name:"Sarah Johnson",email:"admin@bankone.com",role:"bank_admin",avatar:void 0,password:"admin123"},{id:"bank_user_2",name:"Michael Chen",email:"officer1@bankone.com",role:"bank_officer",avatar:void 0,password:"officer123"},{id:"bank_user_3",name:"Emily Rodriguez",email:"officer2@bankone.com",role:"bank_officer",avatar:void 0,password:"officer123"},{id:"bank_user_4",name:"David Kumar",email:"officer3@bankone.com",role:"bank_officer",avatar:void 0,password:"officer123"},{id:"bank_user_5",name:"Lisa Anderson",email:"manager@bankone.com",role:"bank_admin",avatar:void 0,password:"manager123"}],Z0e=async(t,s)=>{await new Promise(l=>setTimeout(l,1e3));const a=vG.find(l=>l.email===t&&l.password===s);if(!a)throw new Error("Invalid credentials");const{password:r,...n}=a,i=`bank_token_${a.id}_${Date.now()}`;return{user:n,token:i}},J0e=async t=>{await new Promise(l=>setTimeout(l,500));const s=t.match(/bank_token_(bank_user_\d+)_/);if(!s)throw new Error("Invalid token");const a=s[1],r=vG.find(l=>l.id===a);if(!r)throw new Error("User not found");const{password:n,...i}=r;return i};function Gk({children:t}){const[s,a]=m.useState(null),[r,n]=m.useState(!0),i=zt(),l=30,o=m.useRef(Date.now()),d=m.useRef(null),c=m.useRef(null),u=m.useCallback(()=>{o.current=Date.now()},[]),h=m.useCallback(()=>{if(!s)return;const y=(c.current?.idle_timeout_minutes||l)*60*1e3;Date.now()-o.current>=y&&(console.warn("Session expired due to inactivity"),localStorage.removeItem("bank_token"),a(null),o.current=Date.now(),d.current&&(clearInterval(d.current),d.current=null),i("/lcopilot/bank-dashboard/login"))},[s,i]);m.useEffect(()=>{if(!s){d.current&&(clearInterval(d.current),d.current=null);return}vw.getSessionStatus().then(N=>{c.current={idle_timeout_minutes:N.idle_timeout_minutes}}).catch(N=>{console.warn("Failed to fetch session status:",N)}),d.current=setInterval(()=>{h()},6e4);const y=["mousedown","mousemove","keypress","scroll","touchstart","click"],b=()=>{u()};return y.forEach(N=>{window.addEventListener(N,b,{passive:!0})}),()=>{d.current&&clearInterval(d.current),y.forEach(N=>{window.removeEventListener(N,b)})}},[s,h,u]),m.useEffect(()=>{(async()=>{try{const b=localStorage.getItem("bank_token");if(b)try{const N=await J0e(b);a(N),n(!1);return}catch{localStorage.removeItem("bank_token")}try{const{createClient:N}=await ll(async()=>{const{createClient:A}=await Promise.resolve().then(()=>Roe);return{createClient:A}},void 0),C=void 0,_=void 0}catch(N){console.warn("Supabase auth check failed:",N)}n(!1)}catch(b){console.error("Auth check failed:",b),n(!1)}})()},[]);const j={user:s,isLoading:r,isAuthenticated:!!s,login:async(y,b)=>{try{const{user:N,token:C}=await Z0e(y,b);localStorage.setItem("bank_token",C),a(N),i("/lcopilot/bank-dashboard")}catch(N){throw console.error("Login failed:",N),N}},logout:()=>{localStorage.removeItem("bank_token"),a(null),o.current=Date.now(),d.current&&(clearInterval(d.current),d.current=null),i("/lcopilot/bank-dashboard/login")},resetIdleTimer:u};return e.jsx(NT.Provider,{value:j,children:t})}function Al(){const t=m.useContext(NT);if(t===void 0)throw new Error("useBankAuth must be used within a BankAuthProvider");return t}const wT=m.createContext(void 0);function Kk({children:t}){const s=zt(),a=Dt(),r=m.useMemo(()=>{if(!a.user)return null;const o=a.user.role==="admin"||a.user.role==="tenant_admin"?"tenant_admin":"exporter";return{id:a.user.id,name:a.user.full_name||a.user.email.split("@")[0],email:a.user.email,role:o}},[a.user]),n=async(o,d)=>{await a.loginWithEmail(o,d),s("/lcopilot/exporter-dashboard")},i=async()=>{await a.logout()},l={user:r,isLoading:a.isLoading,isAuthenticated:!!r,login:n,logout:i};return e.jsx(wT.Provider,{value:l,children:t})}function jG(){const t=m.useContext(wT);if(t===void 0)throw new Error("useExporterAuth must be used within an ExporterAuthProvider");return t}const _T=m.createContext(void 0);function rM({children:t}){const s=zt(),a=Dt(),r=m.useMemo(()=>{if(!a.user)return null;const o=a.user.role==="tenant_admin"?"tenant_admin":"importer";return{id:a.user.id,name:a.user.full_name||a.user.email.split("@")[0],email:a.user.email,role:o}},[a.user]),n=async(o,d)=>{await a.loginWithEmail(o,d),s("/lcopilot/importer-dashboard")},i=async()=>{await a.logout()},l={user:r,isLoading:a.isLoading,isAuthenticated:!!r,login:n,logout:i};return e.jsx(_T.Provider,{value:l,children:t})}function CT(){const t=m.useContext(_T);if(t===void 0)throw new Error("useImporterAuth must be used within an ImporterAuthProvider");return t}function Q0e(t,s){const r=(t?.trim()||s?.split("@")[0]||"User").split(/\s+/).filter(Boolean);return r.length===1?r[0].slice(0,2).toUpperCase():r.map(n=>n[0]).join("").slice(0,2).toUpperCase()}function cN(t){return m.useContext(t)??null}function ST({variant:t="header"}){const s=zt(),a=rn(),r=a.pathname.startsWith("/admin"),n=a.pathname.includes("/bank-dashboard"),i=a.pathname.includes("/exporter-dashboard"),l=a.pathname.includes("/importer-dashboard"),o=Dt(),d=cN(SD),c=cN(NT),u=cN(wT),h=cN(_T),x=m.useMemo(()=>r?d||null:n?c||null:i||l?o?.user?{user:o.user,logout:o.logout,isLoading:o.isLoading}:i&&u?.user?u:l&&h?.user?h:null:o?.user?{user:o.user,logout:o.logout,isLoading:o.isLoading}:d?.user?d:c?.user?c:u?.user?u:h?.user?h:null,[r,n,i,l,o,d,c,u,h]),g=x?.user||null,j=x?.logout||null,y=x?.isLoading||!1,b=m.useMemo(()=>g?"full_name"in g?g.full_name||g.username||g.email?.split("@")[0]||"Guest":"name"in g?g.name||g.email?.split("@")[0]||"Guest":g.email?.split("@")[0]||"Guest":"Guest",[g]),N=m.useMemo(()=>g&&g.email||"guest@trdrhub.com",[g]),C=m.useMemo(()=>g&&g.role||"",[g]),_=Q0e(b,N),A=m.useMemo(()=>{const R=`
apps\web\dist\assets\index-Bz84JA8h.js:124:    `;return`data:image/svg+xml;utf8,${encodeURIComponent(R)}`},[_]),k=m.useCallback(D=>{if(a.pathname.includes("/admin"))if(D==="overview")s({pathname:"/admin"});else{const R=new URLSearchParams({section:D});s({pathname:"/admin",search:`?${R.toString()}`})}else a.pathname.includes("/bank-dashboard")?s(`/lcopilot/bank-dashboard?tab=${D}`):a.pathname.includes("/exporter-dashboard")?s(`/lcopilot/exporter-dashboard?section=${D}`):a.pathname.includes("/importer-dashboard")&&s(`/lcopilot/importer-dashboard?section=${D}`)},[s,a]),E=m.useCallback(async()=>{if(j)try{typeof j=="function"&&j()}catch(D){console.error("Failed to log out",D)}},[j]);if(y){const D=t==="sidebar"?"flex h-10 w-full animate-pulse items-center justify-start gap-2 rounded-lg bg-muted/50 px-3":"flex h-8 w-32 animate-pulse items-center justify-end gap-2 rounded-full bg-muted/50 px-3";return e.jsx("div",{className:D})}return g?e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsxs(M,{variant:t==="sidebar"?"outline":"ghost",className:t==="sidebar"?"w-full justify-start gap-3 rounded-lg px-3 py-2":"flex h-auto items-center gap-2 rounded-full px-2 py-1",children:[e.jsxs(Ux,{className:"h-8 w-8",children:[e.jsx(SW,{src:A,alt:b}),e.jsx(zx,{children:_})]}),e.jsxs("div",{className:t==="sidebar"?"flex flex-col text-left":"hidden text-left sm:flex sm:flex-col",children:[e.jsx("span",{className:"text-sm font-medium leading-none",children:b}),e.jsx("span",{className:"text-xs text-muted-foreground leading-none",children:N})]})]})}),e.jsxs(Zn,{align:t==="sidebar"?"start":"end",className:"w-56",forceMount:!0,children:[e.jsx(bT,{className:"font-normal",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"text-sm font-medium leading-none",children:b}),e.jsx("span",{className:"text-xs text-muted-foreground leading-none",children:N}),C&&e.jsx("span",{className:"text-xs text-muted-foreground capitalize mt-1",children:C})]})}),e.jsx(Dc,{}),e.jsxs(is,{onSelect:()=>k("settings"),children:[e.jsx(Ec,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Account"})]}),a.pathname.includes("/admin")&&e.jsxs(e.Fragment,{children:[e.jsxs(is,{onSelect:()=>k("billing-plans"),children:[e.jsx(pn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Billing"})]}),e.jsxs(is,{onSelect:()=>k("system-settings"),children:[e.jsx($s,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Notifications"})]})]}),(a.pathname.includes("/bank-dashboard")||a.pathname.includes("/exporter-dashboard")||a.pathname.includes("/importer-dashboard"))&&e.jsxs(is,{onSelect:()=>k("billing"),children:[e.jsx(pn,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Billing"})]}),e.jsx(Dc,{}),j&&e.jsxs(is,{onSelect:E,className:"text-destructive focus:text-destructive",children:[e.jsx(Yo,{className:"mr-2 h-4 w-4"}),e.jsx("span",{children:"Log out"})]})]})]}):null}function kT(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const X0e=wh("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),zo=m.forwardRef(({className:t,variant:s,...a},r)=>e.jsx("div",{ref:r,role:"alert",className:kT(X0e({variant:s}),t),...a}));zo.displayName="Alert";const Tc=m.forwardRef(({className:t,...s},a)=>e.jsx("h5",{ref:a,className:kT("mb-1 font-medium leading-none tracking-tight",t),...s}));Tc.displayName="AlertTitle";const qo=m.forwardRef(({className:t,...s},a)=>e.jsx("div",{ref:a,className:kT("text-sm [&_p]:leading-relaxed",t),...s}));qo.displayName="AlertDescription";function eje(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const tje=wh("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Q({className:t,variant:s,...a}){return e.jsx("div",{className:eje(tje({variant:s}),t),...a})}function sje(){const[t,s]=m.useState(null),[a,r]=m.useState(!0);if(m.useEffect(()=>{Ae.get("/api/support/environment").then(o=>{s(o.data),r(!o.data.is_production||o.data.sample_data_mode)}).catch(()=>{window.location.hostname==="localhost"||window.location.hostname==="127.0.0.1"?(s({environment:"development",is_production:!1,is_staging:!1,is_development:!0,use_stubs:!1,sample_data_mode:!1}),r(!0)):r(!1)})},[]),!a||!t)return null;const n=()=>t.is_production?"Production":t.is_staging?"Staging":"Development",i=()=>t.is_production&&!t.sample_data_mode?"bg-green-500/10 border-green-500/20 text-green-700 dark:text-green-400":t.is_staging?"bg-yellow-500/10 border-yellow-500/20 text-yellow-700 dark:text-yellow-400":"bg-blue-500/10 border-blue-500/20 text-blue-700 dark:text-blue-400",l=()=>t.sample_data_mode?e.jsx(Qm,{className:"h-4 w-4"}):t.is_staging?e.jsx(Ve,{className:"h-4 w-4"}):e.jsx(Ja,{className:"h-4 w-4"});return e.jsx(zo,{className:`${i()} border-t-2 rounded-none sticky top-0 z-50`,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[l(),e.jsxs(Tc,{className:"font-semibold",children:[n(),t.sample_data_mode&&e.jsx(Q,{variant:"outline",className:"ml-2 text-xs",children:"Sample Data Mode"})]})]}),e.jsxs(qo,{className:"text-sm",children:[t.sample_data_mode&&"You are viewing sample data. Real data is not available.",!t.sample_data_mode&&t.is_staging&&"This is a staging environment. Data may be reset periodically.",!t.sample_data_mode&&t.is_development&&"This is a development environment."]})]})})}function Lc({sidebar:t,title:s,breadcrumbs:a,actions:r,topbar:n,children:i}){return e.jsxs(uT,{style:{"--sidebar-width":"16rem","--header-height":"3.5rem"},children:[t,e.jsxs(vH,{children:[e.jsx("header",{className:"flex h-[var(--header-height)] shrink-0 items-center gap-2 border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/80 sticky top-0 z-50",children:e.jsxs("div",{className:"flex w-full items-center gap-2 px-4",children:[e.jsx(mT,{className:"-ml-1"}),e.jsx(As,{orientation:"vertical",className:"mr-2 h-4"}),a&&a.length>0&&e.jsx("div",{className:"flex items-center gap-2 text-sm",children:a.map((l,o)=>e.jsxs("div",{className:"flex items-center gap-2",children:[o>0&&e.jsx("span",{className:"text-muted-foreground",children:"/"}),l.href?e.jsx("a",{href:l.href,className:"text-muted-foreground hover:text-foreground transition-colors",children:l.label}):e.jsx("span",{className:"text-foreground font-medium",children:l.label})]},o))}),!a&&s&&e.jsx("h1",{className:"text-base font-medium",children:s}),n&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:n}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[r,e.jsx(ST,{}),e.jsx(gG,{})]})]})}),e.jsxs("main",{className:"flex flex-1 flex-col",children:[e.jsx(sje,{}),e.jsx("div",{className:"pt-6",children:i})]})]})]})}function aje({...t}){const s=rn(),{user:a,logout:r}=Dt(),n=l=>l==="/sanctions/dashboard"?s.pathname===l:s.pathname.startsWith(l),i=async l=>{l?.preventDefault(),l?.stopPropagation();try{await r()}catch(o){console.warn("Logout failed:",o),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-red-500/10 text-red-500",children:e.jsx(Ot,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"Sanctions Screener"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Compliance Tool"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Screening"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard")&&s.pathname==="/sanctions/dashboard",asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard",children:[e.jsx(I1,{}),e.jsx("span",{children:"Overview"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/screen/party"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/screen/party",children:[e.jsx(xs,{}),e.jsx("span",{children:"Screen Party"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/screen/vessel"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/screen/vessel",children:[e.jsx(Us,{}),e.jsx("span",{children:"Screen Vessel"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/screen/goods"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/screen/goods",children:[e.jsx(Ps,{}),e.jsx("span",{children:"Screen Goods"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Management"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/batch"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/batch",children:[e.jsx(Hs,{}),e.jsx("span",{children:"Batch Upload"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/history"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/history",children:[e.jsx(xn,{}),e.jsx("span",{children:"History"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/certificates"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/certificates",children:[e.jsx(Gs,{}),e.jsx("span",{children:"Certificates"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/watchlist"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/watchlist",children:[e.jsx($s,{}),e.jsx("span",{children:"Watchlist"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Integration"}),e.jsx(Js,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/api"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/api",children:[e.jsx(Sc,{}),e.jsx("span",{children:"API Access"})]})})})})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/settings"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/sanctions/dashboard/help"),asChild:!0,children:e.jsxs(pe,{to:"/sanctions/dashboard/help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help & FAQ"})]})})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.role||"User"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}function rje(){return e.jsx(Lc,{sidebar:e.jsx(aje,{}),breadcrumbs:[{label:"Hub",href:"/hub"},{label:"Sanctions Screener"}],title:"Sanctions Screener",children:e.jsx(ip,{})})}const nje=[{id:"party",title:"Screen a Party",description:"Check buyers, sellers, banks, and agents against sanctions lists",icon:xs,href:"/sanctions/dashboard/screen/party",color:"red"},{id:"vessel",title:"Screen a Vessel",description:"Verify vessels against sanctioned flags, owners, and dark activity",icon:Us,href:"/sanctions/dashboard/screen/vessel",color:"orange"},{id:"goods",title:"Screen Goods",description:"Check goods against dual-use and export control lists",icon:Ps,href:"/sanctions/dashboard/screen/goods",color:"yellow"}],ije=[{label:"Screenings Today",value:"0",icon:mt},{label:"Clear Results",value:"0",icon:Oe,color:"text-emerald-400"},{label:"Potential Matches",value:"0",icon:Ve,color:"text-amber-400"},{label:"Watchlist Items",value:"0",icon:Vt}],lje=[{name:"OFAC SDN",jurisdiction:"US",entries:"12,500+",updated:"Today"},{name:"EU Consolidated",jurisdiction:"EU",entries:"8,200+",updated:"3 days ago"},{name:"UN Security Council",jurisdiction:"UN",entries:"2,100+",updated:"Weekly"},{name:"UK OFSI",jurisdiction:"UK",entries:"4,800+",updated:"2 days ago"},{name:"BIS Entity List",jurisdiction:"US",entries:"600+",updated:"Monthly"}];function oje(){return e.jsxs("div",{className:"p-6 space-y-6 max-w-7xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Sanctions Screener"}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Screen parties, vessels, and goods against 50+ global sanctions lists"})]}),e.jsxs(Q,{variant:"outline",className:"border-emerald-500/50 text-emerald-400",children:[e.jsx(Lt,{className:"w-3 h-3 mr-1"}),"Lists Updated Today"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:ije.map(t=>e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wide",children:t.label}),e.jsx("p",{className:`text-2xl font-bold ${t.color||"text-white"}`,children:t.value})]}),e.jsx(t.icon,{className:`w-8 h-8 ${t.color||"text-slate-600"}`})]})})},t.label))}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:nje.map(t=>e.jsxs($,{className:"bg-slate-900/50 border-slate-800 hover:border-red-500/30 transition-all group",children:[e.jsxs(X,{children:[e.jsx("div",{className:`w-12 h-12 bg-${t.color}-500/20 rounded-lg flex items-center justify-center mb-2`,children:e.jsx(t.icon,{className:`w-6 h-6 text-${t.color}-400`})}),e.jsx(ee,{className:"text-white",children:t.title}),e.jsx(ue,{className:"text-slate-400",children:t.description})]}),e.jsx(U,{children:e.jsx(M,{asChild:!0,className:"w-full bg-slate-800 hover:bg-red-500/20 text-white group-hover:text-red-400 group-hover:border-red-500/30",children:e.jsxs(pe,{to:t.href,children:["Start Screening ",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})})]},t.id))}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Qm,{className:"w-5 h-5 text-red-400"}),"Sanctions Lists Coverage"]}),e.jsx(ue,{className:"text-slate-400",children:"We screen against 50+ global sanctions lists"})]}),e.jsx(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-400 hover:text-white",children:"View All Lists"})]})}),e.jsx(U,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-slate-500 uppercase",children:"List"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-slate-500 uppercase",children:"Jurisdiction"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-slate-500 uppercase",children:"Entries"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-medium text-slate-500 uppercase",children:"Last Updated"})]})}),e.jsx("tbody",{children:lje.map(t=>e.jsxs("tr",{className:"border-b border-slate-800/50 hover:bg-slate-800/30",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-4 h-4 text-red-400"}),e.jsx("span",{className:"text-white font-medium",children:t.name})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx(Q,{variant:"outline",className:"border-slate-700 text-slate-400",children:t.jurisdiction})}),e.jsx("td",{className:"py-3 px-4 text-slate-400",children:t.entries}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:"text-emerald-400 text-sm",children:t.updated})})]},t.name))})]})})})]}),e.jsx($,{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/20",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center flex-shrink-0",children:e.jsx(Ot,{className:"w-5 h-5 text-red-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white mb-2",children:"Compliance Best Practices"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[e.jsx("li",{children:"â€¢ Screen all parties before initiating any transaction"}),e.jsx("li",{children:"â€¢ Verify vessels against sanctioned flags and ownership chains"}),e.jsx("li",{children:"â€¢ Check goods for dual-use classification before export"}),e.jsx("li",{children:"â€¢ Keep screening certificates for compliance audit trail"}),e.jsx("li",{children:"â€¢ Set up watchlist monitoring for ongoing counterparties"})]})]})]})})})]})}function ab(t){const s=m.useRef({value:t,previous:t});return m.useMemo(()=>(s.current.value!==t&&(s.current.previous=s.current.value,s.current.value=t),s.current.previous),[t])}var c_="Checkbox",[cje,CJe]=Vr(c_),[dje,ET]=cje(c_);function uje(t){const{__scopeCheckbox:s,checked:a,children:r,defaultChecked:n,disabled:i,form:l,name:o,onCheckedChange:d,required:c,value:u="on",internal_do_not_use_render:h}=t,[x,g]=Hn({prop:a,defaultProp:n??!1,onChange:d,caller:c_}),[j,y]=m.useState(null),[b,N]=m.useState(null),C=m.useRef(!1),_=j?!!l||!!j.closest("form"):!0,A={checked:x,disabled:i,setChecked:g,control:j,setControl:y,name:o,form:l,value:u,hasConsumerStoppedPropagationRef:C,required:c,defaultChecked:Wm(n)?!1:n,isFormControl:_,bubbleInput:b,setBubbleInput:N};return e.jsx(dje,{scope:s,...A,children:mje(h)?h(A):r})}var bG="CheckboxTrigger",yG=m.forwardRef(({__scopeCheckbox:t,onKeyDown:s,onClick:a,...r},n)=>{const{control:i,value:l,disabled:o,checked:d,required:c,setControl:u,setChecked:h,hasConsumerStoppedPropagationRef:x,isFormControl:g,bubbleInput:j}=ET(bG,t),y=vs(n,u),b=m.useRef(d);return m.useEffect(()=>{const N=i?.form;if(N){const C=()=>h(b.current);return N.addEventListener("reset",C),()=>N.removeEventListener("reset",C)}},[i,h]),e.jsx(Pt.button,{type:"button",role:"checkbox","aria-checked":Wm(d)?"mixed":d,"aria-required":c,"data-state":SG(d),"data-disabled":o?"":void 0,disabled:o,value:l,...r,ref:y,onKeyDown:gt(s,N=>{N.key==="Enter"&&N.preventDefault()}),onClick:gt(a,N=>{h(C=>Wm(C)?!0:!C),j&&g&&(x.current=N.isPropagationStopped(),x.current||N.stopPropagation())})})});yG.displayName=bG;var AT=m.forwardRef((t,s)=>{const{__scopeCheckbox:a,name:r,checked:n,defaultChecked:i,required:l,disabled:o,value:d,onCheckedChange:c,form:u,...h}=t;return e.jsx(uje,{__scopeCheckbox:a,checked:n,defaultChecked:i,disabled:o,required:l,onCheckedChange:c,name:r,form:u,value:d,internal_do_not_use_render:({isFormControl:x})=>e.jsxs(e.Fragment,{children:[e.jsx(yG,{...h,ref:s,__scopeCheckbox:a}),x&&e.jsx(CG,{__scopeCheckbox:a})]})})});AT.displayName=c_;var NG="CheckboxIndicator",wG=m.forwardRef((t,s)=>{const{__scopeCheckbox:a,forceMount:r,...n}=t,i=ET(NG,a);return e.jsx(jn,{present:r||Wm(i.checked)||i.checked===!0,children:e.jsx(Pt.span,{"data-state":SG(i.checked),"data-disabled":i.disabled?"":void 0,...n,ref:s,style:{pointerEvents:"none",...t.style}})})});wG.displayName=NG;var _G="CheckboxBubbleInput",CG=m.forwardRef(({__scopeCheckbox:t,...s},a)=>{const{control:r,hasConsumerStoppedPropagationRef:n,checked:i,defaultChecked:l,required:o,disabled:d,name:c,value:u,form:h,bubbleInput:x,setBubbleInput:g}=ET(_G,t),j=vs(a,g),y=ab(i),b=Jj(r);m.useEffect(()=>{const C=x;if(!C)return;const _=window.HTMLInputElement.prototype,k=Object.getOwnPropertyDescriptor(_,"checked").set,E=!n.current;if(y!==i&&k){const D=new Event("click",{bubbles:E});C.indeterminate=Wm(i),k.call(C,Wm(i)?!1:i),C.dispatchEvent(D)}},[x,y,i,n]);const N=m.useRef(Wm(i)?!1:i);return e.jsx(Pt.input,{type:"checkbox","aria-hidden":!0,defaultChecked:l??N.current,required:o,disabled:d,name:c,value:u,form:h,...s,tabIndex:-1,ref:j,style:{...s.style,...b,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});CG.displayName=_G;function mje(t){return typeof t=="function"}function Wm(t){return t==="indeterminate"}function SG(t){return Wm(t)?"indeterminate":t?"checked":"unchecked"}function nM(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const rr=m.forwardRef(({className:t,...s},a)=>e.jsx(AT,{ref:a,className:nM("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",t),...s,children:e.jsx(wG,{className:nM("flex items-center justify-center text-current"),children:e.jsx(Za,{className:"h-4 w-4"})})}));rr.displayName=AT.displayName;function dj(t,[s,a]){return Math.min(a,Math.max(s,t))}var hje=[" ","Enter","ArrowUp","ArrowDown"],xje=[" ","Enter"],Wx="Select",[d_,u_,pje]=Gg(Wx),[Kg,SJe]=Vr(Wx,[pje,_h]),m_=_h(),[fje,Sh]=Kg(Wx),[gje,vje]=Kg(Wx),kG=t=>{const{__scopeSelect:s,children:a,open:r,defaultOpen:n,onOpenChange:i,value:l,defaultValue:o,onValueChange:d,dir:c,name:u,autoComplete:h,disabled:x,required:g,form:j}=t,y=m_(s),[b,N]=m.useState(null),[C,_]=m.useState(null),[A,k]=m.useState(!1),E=Ru(c),[D,R]=Hn({prop:r,defaultProp:n??!1,onChange:i,caller:Wx}),[O,P]=Hn({prop:l,defaultProp:o,onChange:d,caller:Wx}),T=m.useRef(null),B=b?j||!!b.closest("form"):!0,[G,q]=m.useState(new Set),z=Array.from(G).map(H=>H.props.value).join(";");return e.jsx(J1,{...y,children:e.jsxs(fje,{required:g,scope:s,trigger:b,onTriggerChange:N,valueNode:C,onValueNodeChange:_,valueNodeHasChildren:A,onValueNodeHasChildrenChange:k,contentId:En(),value:O,onValueChange:P,open:D,onOpenChange:R,dir:E,triggerPointerDownPosRef:T,disabled:x,children:[e.jsx(d_.Provider,{scope:s,children:e.jsx(gje,{scope:t.__scopeSelect,onNativeOptionAdd:m.useCallback(H=>{q(le=>new Set(le).add(H))},[]),onNativeOptionRemove:m.useCallback(H=>{q(le=>{const Y=new Set(le);return Y.delete(H),Y})},[]),children:a})}),B?e.jsxs(JG,{"aria-hidden":!0,required:g,tabIndex:-1,name:u,autoComplete:h,value:O,onChange:H=>P(H.target.value),disabled:x,form:j,children:[O===void 0?e.jsx("option",{value:""}):null,Array.from(G)]},z):null]})})};kG.displayName=Wx;var EG="SelectTrigger",AG=m.forwardRef((t,s)=>{const{__scopeSelect:a,disabled:r=!1,...n}=t,i=m_(a),l=Sh(EG,a),o=l.disabled||r,d=vs(s,l.onTriggerChange),c=u_(a),u=m.useRef("touch"),[h,x,g]=XG(y=>{const b=c().filter(_=>!_.disabled),N=b.find(_=>_.value===l.value),C=eK(b,y,N);C!==void 0&&l.onValueChange(C.value)}),j=y=>{o||(l.onOpenChange(!0),g()),y&&(l.triggerPointerDownPosRef.current={x:Math.round(y.pageX),y:Math.round(y.pageY)})};return e.jsx(Qj,{asChild:!0,...i,children:e.jsx(Pt.button,{type:"button",role:"combobox","aria-controls":l.contentId,"aria-expanded":l.open,"aria-required":l.required,"aria-autocomplete":"none",dir:l.dir,"data-state":l.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":QG(l.value)?"":void 0,...n,ref:d,onClick:gt(n.onClick,y=>{y.currentTarget.focus(),u.current!=="mouse"&&j(y)}),onPointerDown:gt(n.onPointerDown,y=>{u.current=y.pointerType;const b=y.target;b.hasPointerCapture(y.pointerId)&&b.releasePointerCapture(y.pointerId),y.button===0&&y.ctrlKey===!1&&y.pointerType==="mouse"&&(j(y),y.preventDefault())}),onKeyDown:gt(n.onKeyDown,y=>{const b=h.current!=="";!(y.ctrlKey||y.altKey||y.metaKey)&&y.key.length===1&&x(y.key),!(b&&y.key===" ")&&hje.includes(y.key)&&(j(),y.preventDefault())})})})});AG.displayName=EG;var PG="SelectValue",DG=m.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:n,children:i,placeholder:l="",...o}=t,d=Sh(PG,a),{onValueNodeHasChildrenChange:c}=d,u=i!==void 0,h=vs(s,d.onValueNodeChange);return an(()=>{c(u)},[c,u]),e.jsx(Pt.span,{...o,ref:h,style:{pointerEvents:"none"},children:QG(d.value)?e.jsx(e.Fragment,{children:l}):i})});DG.displayName=PG;var jje="SelectIcon",TG=m.forwardRef((t,s)=>{const{__scopeSelect:a,children:r,...n}=t;return e.jsx(Pt.span,{"aria-hidden":!0,...n,ref:s,children:r||"â–¼"})});TG.displayName=jje;var bje="SelectPortal",FG=t=>e.jsx(hp,{asChild:!0,...t});FG.displayName=bje;var Hx="SelectContent",RG=m.forwardRef((t,s)=>{const a=Sh(Hx,t.__scopeSelect),[r,n]=m.useState();if(an(()=>{n(new DocumentFragment)},[]),!a.open){const i=r;return i?Du.createPortal(e.jsx(OG,{scope:t.__scopeSelect,children:e.jsx(d_.Slot,{scope:t.__scopeSelect,children:e.jsx("div",{children:t.children})})}),i):null}return e.jsx(IG,{...t,ref:s})});RG.displayName=Hx;var jc=10,[OG,kh]=Kg(Hx),yje="SelectContentImpl",Nje=Bx("SelectContent.RemoveScroll"),IG=m.forwardRef((t,s)=>{const{__scopeSelect:a,position:r="item-aligned",onCloseAutoFocus:n,onEscapeKeyDown:i,onPointerDownOutside:l,side:o,sideOffset:d,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:x,collisionPadding:g,sticky:j,hideWhenDetached:y,avoidCollisions:b,...N}=t,C=Sh(Hx,a),[_,A]=m.useState(null),[k,E]=m.useState(null),D=vs(s,ce=>A(ce)),[R,O]=m.useState(null),[P,T]=m.useState(null),B=u_(a),[G,q]=m.useState(!1),z=m.useRef(!1);m.useEffect(()=>{if(_)return z1(_)},[_]),$1();const H=m.useCallback(ce=>{const[Re,...ie]=B().map(ge=>ge.ref.current),[Ne]=ie.slice(-1),Ue=document.activeElement;for(const ge of ce)if(ge===Ue||(ge?.scrollIntoView({block:"nearest"}),ge===Re&&k&&(k.scrollTop=0),ge===Ne&&k&&(k.scrollTop=k.scrollHeight),ge?.focus(),document.activeElement!==Ue))return},[B,k]),le=m.useCallback(()=>H([R,_]),[H,R,_]);m.useEffect(()=>{G&&le()},[G,le]);const{onOpenChange:Y,triggerPointerDownPosRef:te}=C;m.useEffect(()=>{if(_){let ce={x:0,y:0};const Re=Ne=>{ce={x:Math.abs(Math.round(Ne.pageX)-(te.current?.x??0)),y:Math.abs(Math.round(Ne.pageY)-(te.current?.y??0))}},ie=Ne=>{ce.x<=10&&ce.y<=10?Ne.preventDefault():_.contains(Ne.target)||Y(!1),document.removeEventListener("pointermove",Re),te.current=null};return te.current!==null&&(document.addEventListener("pointermove",Re),document.addEventListener("pointerup",ie,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Re),document.removeEventListener("pointerup",ie,{capture:!0})}}},[_,Y,te]),m.useEffect(()=>{const ce=()=>Y(!1);return window.addEventListener("blur",ce),window.addEventListener("resize",ce),()=>{window.removeEventListener("blur",ce),window.removeEventListener("resize",ce)}},[Y]);const[ne,ae]=XG(ce=>{const Re=B().filter(Ue=>!Ue.disabled),ie=Re.find(Ue=>Ue.ref.current===document.activeElement),Ne=eK(Re,ce,ie);Ne&&setTimeout(()=>Ne.ref.current.focus())}),re=m.useCallback((ce,Re,ie)=>{const Ne=!z.current&&!ie;(C.value!==void 0&&C.value===Re||Ne)&&(O(ce),Ne&&(z.current=!0))},[C.value]),xe=m.useCallback(()=>_?.focus(),[_]),ye=m.useCallback((ce,Re,ie)=>{const Ne=!z.current&&!ie;(C.value!==void 0&&C.value===Re||Ne)&&T(ce)},[C.value]),ke=r==="popper"?C5:LG,ze=ke===C5?{side:o,sideOffset:d,align:c,alignOffset:u,arrowPadding:h,collisionBoundary:x,collisionPadding:g,sticky:j,hideWhenDetached:y,avoidCollisions:b}:{};return e.jsx(OG,{scope:a,content:_,viewport:k,onViewportChange:E,itemRefCallback:re,selectedItem:R,onItemLeave:xe,itemTextRefCallback:ye,focusSelectedItem:le,selectedItemText:P,position:r,isPositioned:G,searchRef:ne,children:e.jsx(Gj,{as:Nje,allowPinchZoom:!0,children:e.jsx(Hj,{asChild:!0,trapped:C.open,onMountAutoFocus:ce=>{ce.preventDefault()},onUnmountAutoFocus:gt(n,ce=>{C.trigger?.focus({preventScroll:!0}),ce.preventDefault()}),children:e.jsx(mp,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:i,onPointerDownOutside:l,onFocusOutside:ce=>ce.preventDefault(),onDismiss:()=>C.onOpenChange(!1),children:e.jsx(ke,{role:"listbox",id:C.contentId,"data-state":C.open?"open":"closed",dir:C.dir,onContextMenu:ce=>ce.preventDefault(),...N,...ze,onPlaced:()=>q(!0),ref:D,style:{display:"flex",flexDirection:"column",outline:"none",...N.style},onKeyDown:gt(N.onKeyDown,ce=>{const Re=ce.ctrlKey||ce.altKey||ce.metaKey;if(ce.key==="Tab"&&ce.preventDefault(),!Re&&ce.key.length===1&&ae(ce.key),["ArrowUp","ArrowDown","Home","End"].includes(ce.key)){let Ne=B().filter(Ue=>!Ue.disabled).map(Ue=>Ue.ref.current);if(["ArrowUp","End"].includes(ce.key)&&(Ne=Ne.slice().reverse()),["ArrowUp","ArrowDown"].includes(ce.key)){const Ue=ce.target,ge=Ne.indexOf(Ue);Ne=Ne.slice(ge+1)}setTimeout(()=>H(Ne)),ce.preventDefault()}})})})})})})});IG.displayName=yje;var wje="SelectItemAlignedPosition",LG=m.forwardRef((t,s)=>{const{__scopeSelect:a,onPlaced:r,...n}=t,i=Sh(Hx,a),l=kh(Hx,a),[o,d]=m.useState(null),[c,u]=m.useState(null),h=vs(s,D=>u(D)),x=u_(a),g=m.useRef(!1),j=m.useRef(!0),{viewport:y,selectedItem:b,selectedItemText:N,focusSelectedItem:C}=l,_=m.useCallback(()=>{if(i.trigger&&i.valueNode&&o&&c&&y&&b&&N){const D=i.trigger.getBoundingClientRect(),R=c.getBoundingClientRect(),O=i.valueNode.getBoundingClientRect(),P=N.getBoundingClientRect();if(i.dir!=="rtl"){const Ue=P.left-R.left,ge=O.left-Ue,he=D.left-ge,_e=D.width+he,at=Math.max(_e,R.width),nt=window.innerWidth-jc,st=dj(ge,[jc,Math.max(jc,nt-at)]);o.style.minWidth=_e+"px",o.style.left=st+"px"}else{const Ue=R.right-P.right,ge=window.innerWidth-O.right-Ue,he=window.innerWidth-D.right-ge,_e=D.width+he,at=Math.max(_e,R.width),nt=window.innerWidth-jc,st=dj(ge,[jc,Math.max(jc,nt-at)]);o.style.minWidth=_e+"px",o.style.right=st+"px"}const T=x(),B=window.innerHeight-jc*2,G=y.scrollHeight,q=window.getComputedStyle(c),z=parseInt(q.borderTopWidth,10),H=parseInt(q.paddingTop,10),le=parseInt(q.borderBottomWidth,10),Y=parseInt(q.paddingBottom,10),te=z+H+G+Y+le,ne=Math.min(b.offsetHeight*5,te),ae=window.getComputedStyle(y),re=parseInt(ae.paddingTop,10),xe=parseInt(ae.paddingBottom,10),ye=D.top+D.height/2-jc,ke=B-ye,ze=b.offsetHeight/2,ce=b.offsetTop+ze,Re=z+H+ce,ie=te-Re;if(Re<=ye){const Ue=T.length>0&&b===T[T.length-1].ref.current;o.style.bottom="0px";const ge=c.clientHeight-y.offsetTop-y.offsetHeight,he=Math.max(ke,ze+(Ue?xe:0)+ge+le),_e=Re+he;o.style.height=_e+"px"}else{const Ue=T.length>0&&b===T[0].ref.current;o.style.top="0px";const he=Math.max(ye,z+y.offsetTop+(Ue?re:0)+ze)+ie;o.style.height=he+"px",y.scrollTop=Re-ye+y.offsetTop}o.style.margin=`${jc}px 0`,o.style.minHeight=ne+"px",o.style.maxHeight=B+"px",r?.(),requestAnimationFrame(()=>g.current=!0)}},[x,i.trigger,i.valueNode,o,c,y,b,N,i.dir,r]);an(()=>_(),[_]);const[A,k]=m.useState();an(()=>{c&&k(window.getComputedStyle(c).zIndex)},[c]);const E=m.useCallback(D=>{D&&j.current===!0&&(_(),C?.(),j.current=!1)},[_,C]);return e.jsx(Cje,{scope:a,contentWrapper:o,shouldExpandOnScrollRef:g,onScrollButtonChange:E,children:e.jsx("div",{ref:d,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:A},children:e.jsx(Pt.div,{...n,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...n.style}})})})});LG.displayName=wje;var _je="SelectPopperPosition",C5=m.forwardRef((t,s)=>{const{__scopeSelect:a,align:r="start",collisionPadding:n=jc,...i}=t,l=m_(a);return e.jsx(Q1,{...l,...i,ref:s,align:r,collisionPadding:n,style:{boxSizing:"border-box",...i.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});C5.displayName=_je;var[Cje,PT]=Kg(Hx,{}),S5="SelectViewport",MG=m.forwardRef((t,s)=>{const{__scopeSelect:a,nonce:r,...n}=t,i=kh(S5,a),l=PT(S5,a),o=vs(s,i.onViewportChange),d=m.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),e.jsx(d_.Slot,{scope:a,children:e.jsx(Pt.div,{"data-radix-select-viewport":"",role:"presentation",...n,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...n.style},onScroll:gt(n.onScroll,c=>{const u=c.currentTarget,{contentWrapper:h,shouldExpandOnScrollRef:x}=l;if(x?.current&&h){const g=Math.abs(d.current-u.scrollTop);if(g>0){const j=window.innerHeight-jc*2,y=parseFloat(h.style.minHeight),b=parseFloat(h.style.height),N=Math.max(y,b);if(N<j){const C=N+g,_=Math.min(j,C),A=C-_;h.style.height=_+"px",h.style.bottom==="0px"&&(u.scrollTop=A>0?A:0,h.style.justifyContent="flex-end")}}}d.current=u.scrollTop})})})]})});MG.displayName=S5;var BG="SelectGroup",[Sje,kje]=Kg(BG),Eje=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=En();return e.jsx(Sje,{scope:a,id:n,children:e.jsx(Pt.div,{role:"group","aria-labelledby":n,...r,ref:s})})});Eje.displayName=BG;var $G="SelectLabel",UG=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=kje($G,a);return e.jsx(Pt.div,{id:n.id,...r,ref:s})});UG.displayName=$G;var o2="SelectItem",[Aje,zG]=Kg(o2),qG=m.forwardRef((t,s)=>{const{__scopeSelect:a,value:r,disabled:n=!1,textValue:i,...l}=t,o=Sh(o2,a),d=kh(o2,a),c=o.value===r,[u,h]=m.useState(i??""),[x,g]=m.useState(!1),j=vs(s,C=>d.itemRefCallback?.(C,r,n)),y=En(),b=m.useRef("touch"),N=()=>{n||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(Aje,{scope:a,value:r,disabled:n,textId:y,isSelected:c,onItemTextChange:m.useCallback(C=>{h(_=>_||(C?.textContent??"").trim())},[]),children:e.jsx(d_.ItemSlot,{scope:a,value:r,disabled:n,textValue:u,children:e.jsx(Pt.div,{role:"option","aria-labelledby":y,"data-highlighted":x?"":void 0,"aria-selected":c&&x,"data-state":c?"checked":"unchecked","aria-disabled":n||void 0,"data-disabled":n?"":void 0,tabIndex:n?void 0:-1,...l,ref:j,onFocus:gt(l.onFocus,()=>g(!0)),onBlur:gt(l.onBlur,()=>g(!1)),onClick:gt(l.onClick,()=>{b.current!=="mouse"&&N()}),onPointerUp:gt(l.onPointerUp,()=>{b.current==="mouse"&&N()}),onPointerDown:gt(l.onPointerDown,C=>{b.current=C.pointerType}),onPointerMove:gt(l.onPointerMove,C=>{b.current=C.pointerType,n?d.onItemLeave?.():b.current==="mouse"&&C.currentTarget.focus({preventScroll:!0})}),onPointerLeave:gt(l.onPointerLeave,C=>{C.currentTarget===document.activeElement&&d.onItemLeave?.()}),onKeyDown:gt(l.onKeyDown,C=>{d.searchRef?.current!==""&&C.key===" "||(xje.includes(C.key)&&N(),C.key===" "&&C.preventDefault())})})})})});qG.displayName=o2;var R0="SelectItemText",VG=m.forwardRef((t,s)=>{const{__scopeSelect:a,className:r,style:n,...i}=t,l=Sh(R0,a),o=kh(R0,a),d=zG(R0,a),c=vje(R0,a),[u,h]=m.useState(null),x=vs(s,N=>h(N),d.onItemTextChange,N=>o.itemTextRefCallback?.(N,d.value,d.disabled)),g=u?.textContent,j=m.useMemo(()=>e.jsx("option",{value:d.value,disabled:d.disabled,children:g},d.value),[d.disabled,d.value,g]),{onNativeOptionAdd:y,onNativeOptionRemove:b}=c;return an(()=>(y(j),()=>b(j)),[y,b,j]),e.jsxs(e.Fragment,{children:[e.jsx(Pt.span,{id:d.textId,...i,ref:x}),d.isSelected&&l.valueNode&&!l.valueNodeHasChildren?Du.createPortal(i.children,l.valueNode):null]})});VG.displayName=R0;var WG="SelectItemIndicator",HG=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return zG(WG,a).isSelected?e.jsx(Pt.span,{"aria-hidden":!0,...r,ref:s}):null});HG.displayName=WG;var k5="SelectScrollUpButton",GG=m.forwardRef((t,s)=>{const a=kh(k5,t.__scopeSelect),r=PT(k5,t.__scopeSelect),[n,i]=m.useState(!1),l=vs(s,r.onScrollButtonChange);return an(()=>{if(a.viewport&&a.isPositioned){let o=function(){const c=d.scrollTop>0;i(c)};const d=a.viewport;return o(),d.addEventListener("scroll",o),()=>d.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(YG,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:d}=a;o&&d&&(o.scrollTop=o.scrollTop-d.offsetHeight)}}):null});GG.displayName=k5;var E5="SelectScrollDownButton",KG=m.forwardRef((t,s)=>{const a=kh(E5,t.__scopeSelect),r=PT(E5,t.__scopeSelect),[n,i]=m.useState(!1),l=vs(s,r.onScrollButtonChange);return an(()=>{if(a.viewport&&a.isPositioned){let o=function(){const c=d.scrollHeight-d.clientHeight,u=Math.ceil(d.scrollTop)<c;i(u)};const d=a.viewport;return o(),d.addEventListener("scroll",o),()=>d.removeEventListener("scroll",o)}},[a.viewport,a.isPositioned]),n?e.jsx(YG,{...t,ref:l,onAutoScroll:()=>{const{viewport:o,selectedItem:d}=a;o&&d&&(o.scrollTop=o.scrollTop+d.offsetHeight)}}):null});KG.displayName=E5;var YG=m.forwardRef((t,s)=>{const{__scopeSelect:a,onAutoScroll:r,...n}=t,i=kh("SelectScrollButton",a),l=m.useRef(null),o=u_(a),d=m.useCallback(()=>{l.current!==null&&(window.clearInterval(l.current),l.current=null)},[]);return m.useEffect(()=>()=>d(),[d]),an(()=>{o().find(u=>u.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),e.jsx(Pt.div,{"aria-hidden":!0,...n,ref:s,style:{flexShrink:0,...n.style},onPointerDown:gt(n.onPointerDown,()=>{l.current===null&&(l.current=window.setInterval(r,50))}),onPointerMove:gt(n.onPointerMove,()=>{i.onItemLeave?.(),l.current===null&&(l.current=window.setInterval(r,50))}),onPointerLeave:gt(n.onPointerLeave,()=>{d()})})}),Pje="SelectSeparator",ZG=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t;return e.jsx(Pt.div,{"aria-hidden":!0,...r,ref:s})});ZG.displayName=Pje;var A5="SelectArrow",Dje=m.forwardRef((t,s)=>{const{__scopeSelect:a,...r}=t,n=m_(a),i=Sh(A5,a),l=kh(A5,a);return i.open&&l.position==="popper"?e.jsx(X1,{...n,...r,ref:s}):null});Dje.displayName=A5;var Tje="SelectBubbleInput",JG=m.forwardRef(({__scopeSelect:t,value:s,...a},r)=>{const n=m.useRef(null),i=vs(r,n),l=ab(s);return m.useEffect(()=>{const o=n.current;if(!o)return;const d=window.HTMLSelectElement.prototype,u=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&u){const h=new Event("change",{bubbles:!0});u.call(o,s),o.dispatchEvent(h)}},[l,s]),e.jsx(Pt.select,{...a,style:{...lH,...a.style},ref:i,defaultValue:s})});JG.displayName=Tje;function QG(t){return t===""||t===void 0}function XG(t){const s=Zr(t),a=m.useRef(""),r=m.useRef(0),n=m.useCallback(l=>{const o=a.current+l;s(o),(function d(c){a.current=c,window.clearTimeout(r.current),c!==""&&(r.current=window.setTimeout(()=>d(""),1e3))})(o)},[s]),i=m.useCallback(()=>{a.current="",window.clearTimeout(r.current)},[]);return m.useEffect(()=>()=>window.clearTimeout(r.current),[]),[a,n,i]}function eK(t,s,a){const n=s.length>1&&Array.from(s).every(c=>c===s[0])?s[0]:s,i=a?t.indexOf(a):-1;let l=Fje(t,Math.max(i,0));n.length===1&&(l=l.filter(c=>c!==a));const d=l.find(c=>c.textValue.toLowerCase().startsWith(n.toLowerCase()));return d!==a?d:void 0}function Fje(t,s){return t.map((a,r)=>t[(s+r)%t.length])}var Rje=kG,tK=AG,Oje=DG,Ije=TG,Lje=FG,sK=RG,Mje=MG,aK=UG,rK=qG,Bje=VG,$je=HG,nK=GG,iK=KG,lK=ZG;function ih(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Te=Rje,Fe=Oje,Pe=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(tK,{ref:r,className:ih("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(Ije,{asChild:!0,children:e.jsx(ja,{className:"h-4 w-4 opacity-50"})})]}));Pe.displayName=tK.displayName;const oK=m.forwardRef(({className:t,...s},a)=>e.jsx(nK,{ref:a,className:ih("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(yh,{className:"h-4 w-4"})}));oK.displayName=nK.displayName;const cK=m.forwardRef(({className:t,...s},a)=>e.jsx(iK,{ref:a,className:ih("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(ja,{className:"h-4 w-4"})}));cK.displayName=iK.displayName;const De=m.forwardRef(({className:t,children:s,position:a="popper",...r},n)=>e.jsx(Lje,{children:e.jsxs(sK,{ref:n,className:ih("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx(oK,{}),e.jsx(Mje,{className:ih("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(cK,{})]})}));De.displayName=sK.displayName;const Uje=m.forwardRef(({className:t,...s},a)=>e.jsx(aK,{ref:a,className:ih("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Uje.displayName=aK.displayName;const K=m.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(rK,{ref:r,className:ih("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx($je,{children:e.jsx(Za,{className:"h-4 w-4"})})}),e.jsx(Bje,{children:s})]}));K.displayName=rK.displayName;const zje=m.forwardRef(({className:t,...s},a)=>e.jsx(lK,{ref:a,className:ih("-mx-1 my-1 h-px bg-muted",t),...s}));zje.displayName=lK.displayName;const Yk=[{code:"OFAC_SDN",name:"OFAC SDN",jurisdiction:"US"},{code:"OFAC_SSI",name:"OFAC Sectoral",jurisdiction:"US"},{code:"EU_CONS",name:"EU Consolidated",jurisdiction:"EU"},{code:"UN_SC",name:"UN Security Council",jurisdiction:"UN"},{code:"UK_OFSI",name:"UK OFSI",jurisdiction:"UK"},{code:"BIS_EL",name:"BIS Entity List",jurisdiction:"US"}],qje=[{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"CN",name:"China"},{code:"RU",name:"Russia"},{code:"IR",name:"Iran"},{code:"AE",name:"United Arab Emirates"},{code:"SG",name:"Singapore"},{code:"HK",name:"Hong Kong"}];function Vje(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState(""),[i,l]=m.useState(Yk.map(b=>b.code)),[o,d]=m.useState(!1),[c,u]=m.useState(null),h=b=>{l(N=>N.includes(b)?N.filter(C=>C!==b):[...N,b])},x=async()=>{if(!s.trim()){t({title:"Name required",description:"Please enter a party name to screen",variant:"destructive"});return}d(!0),u(null);try{const b=await fetch("/api/sanctions/screen/party",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,country:r||void 0,lists:i})});if(!b.ok)throw new Error("Screening failed");const N=await b.json();u(N),N.status==="clear"?t({title:"âœ… No Matches Found",description:`${s} is clear against ${i.length} lists`}):t({title:"âš ï¸ Review Required",description:`${N.total_matches} potential match(es) found`,variant:"destructive"})}catch{t({title:"Screening failed",description:"Please try again or contact support",variant:"destructive"})}finally{d(!1)}},g=()=>{a(""),n(""),l(Yk.map(b=>b.code)),u(null)},j=b=>{switch(b){case"clear":return"emerald";case"potential_match":return"amber";case"match":return"red";default:return"slate"}},y=b=>{switch(b){case"clear":return Oe;case"potential_match":return Ve;case"match":return bs;default:return Ot}};return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(xs,{className:"w-6 h-6 text-red-400"}),"Screen a Party"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Check buyers, sellers, banks, and agents against sanctions lists"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Party Details"}),e.jsx(ue,{className:"text-slate-400",children:"Enter the party name and select which lists to screen against"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"partyName",className:"text-white",children:"Party Name *"}),e.jsx(oe,{id:"partyName",value:s,onChange:b=>a(b.target.value),placeholder:"e.g., Acme Trading Company Limited",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",className:"text-white",children:"Country (optional)"}),e.jsxs(Te,{value:r,onValueChange:n,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Fe,{placeholder:"Select country"})}),e.jsxs(De,{className:"bg-slate-800 border-slate-700",children:[e.jsx(K,{value:"none",className:"text-slate-400",children:"Not specified"}),qje.map(b=>e.jsx(K,{value:b.code,className:"text-white",children:b.name},b.code))]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{className:"text-white",children:"Lists to Screen"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:Yk.map(b=>e.jsxs("div",{className:"flex items-center space-x-2 p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsx(rr,{id:b.code,checked:i.includes(b.code),onCheckedChange:()=>h(b.code),className:"border-slate-600"}),e.jsxs("label",{htmlFor:b.code,className:"flex-1 text-sm cursor-pointer",children:[e.jsx("span",{className:"text-white font-medium",children:b.name}),e.jsxs("span",{className:"text-slate-500 ml-2",children:["(",b.jurisdiction,")"]})]})]},b.code))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{onClick:x,disabled:o||!s.trim(),className:"flex-1 bg-red-500 hover:bg-red-600 text-white",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Screening..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Screen Now"]})}),e.jsxs(M,{variant:"outline",onClick:g,className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(yu,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]}),c&&e.jsxs($,{className:`border-${j(c.status)}-500/30 bg-${j(c.status)}-500/5`,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[(()=>{const b=y(c.status);return e.jsx("div",{className:`w-12 h-12 bg-${j(c.status)}-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(b,{className:`w-6 h-6 text-${j(c.status)}-400`})})})(),e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white",children:[c.status==="clear"&&"âœ… NO MATCHES FOUND",c.status==="potential_match"&&"âš ï¸ POTENTIAL MATCH - REVIEW REQUIRED",c.status==="match"&&"âŒ MATCH FOUND - DO NOT PROCEED"]}),e.jsxs(ue,{className:"text-slate-400",children:['Party: "',c.query,'" â€¢ Screened: ',new Date(c.screened_at).toLocaleString()]})]})]}),e.jsx(Q,{className:`bg-${j(c.status)}-500/20 text-${j(c.status)}-400 border-${j(c.status)}-500/30`,children:c.risk_level.toUpperCase()})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-3 gap-3",children:c.lists_screened.map(b=>{const N=c.matches.some(C=>C.list_code===b);return e.jsxs("div",{className:`p-3 rounded-lg border ${N?"bg-red-500/10 border-red-500/30":"bg-emerald-500/10 border-emerald-500/30"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[N?e.jsx(bs,{className:"w-4 h-4 text-red-400"}):e.jsx(Oe,{className:"w-4 h-4 text-emerald-400"}),e.jsx("span",{className:"text-sm font-medium text-white",children:b.replace("_"," ")})]}),e.jsx("span",{className:`text-xs ${N?"text-red-400":"text-emerald-400"}`,children:N?"Match":"Clear"})]},b)})}),c.matches.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Match Details"}),c.matches.map((b,N)=>e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-white",children:b.list_name}),e.jsxs(Q,{className:`${b.match_score>=95?"bg-red-500/20 text-red-400":b.match_score>=85?"bg-amber-500/20 text-amber-400":"bg-yellow-500/20 text-yellow-400"}`,children:[b.match_score,"% Match"]})]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"Listed Entity:"})," ",b.matched_name]}),b.source_id&&e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"ID:"})," ",b.source_id]}),b.programs.length>0&&e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"Programs:"})," ",b.programs.join(", ")]}),b.listed_date&&e.jsxs("p",{className:"text-sm text-slate-400",children:[e.jsx("strong",{className:"text-slate-300",children:"Listed:"})," ",b.listed_date]})]},N))]}),c.flags.length>0&&e.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-2",children:"âš ï¸ Flags"}),e.jsx("ul",{className:"text-sm text-slate-400 space-y-1",children:c.flags.map((b,N)=>e.jsxs("li",{children:["â€¢ ",b]},N))})]}),e.jsx("div",{className:`p-4 rounded-lg border ${c.status==="clear"?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsx("p",{className:`text-sm font-medium ${c.status==="clear"?"text-emerald-400":"text-red-400"}`,children:c.recommendation})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-4 h-4"}),c.processing_time_ms,"ms"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"w-4 h-4"}),c.certificate_id]})]}),e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download Certificate"]})]})]})]})]})}const Wje=[{code:"PA",name:"Panama"},{code:"LR",name:"Liberia"},{code:"MH",name:"Marshall Islands"},{code:"HK",name:"Hong Kong"},{code:"SG",name:"Singapore"},{code:"BS",name:"Bahamas"},{code:"MT",name:"Malta"},{code:"CY",name:"Cyprus"},{code:"GB",name:"United Kingdom"},{code:"NO",name:"Norway"},{code:"GR",name:"Greece"},{code:"JP",name:"Japan"},{code:"CN",name:"China"},{code:"RU",name:"Russia"},{code:"IR",name:"Iran"},{code:"KP",name:"North Korea"}];function Hje(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState(""),[i,l]=m.useState(""),[o,d]=m.useState(""),[c,u]=m.useState(!1),[h,x]=m.useState(null),g=async()=>{if(!s.trim()){t({title:"Vessel name required",description:"Please enter a vessel name to screen",variant:"destructive"});return}u(!0),x(null);try{const b=await fetch("/api/sanctions/screen/vessel",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:s,imo:r||void 0,mmsi:i||void 0,flag_code:o&&o!=="none"?o:void 0})});if(!b.ok)throw new Error("Screening failed");const N=await b.json();x(N),N.status==="clear"?t({title:"âœ… Vessel Clear",description:`${s} passed sanctions screening`}):t({title:"âš ï¸ Review Required",description:`${N.total_matches} issue(s) detected`,variant:"destructive"})}catch{t({title:"Screening failed",description:"Please try again or contact support",variant:"destructive"})}finally{u(!1)}},j=()=>{a(""),n(""),l(""),d(""),x(null)},y=b=>{switch(b){case"clear":return"emerald";case"potential_match":return"amber";case"match":return"red";default:return"slate"}};return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Us,{className:"w-6 h-6 text-orange-400"}),"Screen a Vessel"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Verify vessels against sanctioned flags, owners, and dark activity patterns"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Vessel Details"}),e.jsx(ue,{className:"text-slate-400",children:"Enter vessel information for comprehensive screening"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"vesselName",className:"text-white",children:"Vessel Name *"}),e.jsx(oe,{id:"vesselName",value:s,onChange:b=>a(b.target.value),placeholder:"e.g., M/V PACIFIC TRADER",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"imo",className:"text-white",children:"IMO Number"}),e.jsx(oe,{id:"imo",value:r,onChange:b=>n(b.target.value),placeholder:"e.g., 9123456",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"mmsi",className:"text-white",children:"MMSI"}),e.jsx(oe,{id:"mmsi",value:i,onChange:b=>l(b.target.value),placeholder:"e.g., 123456789",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"flagState",className:"text-white",children:"Flag State"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Fe,{placeholder:"Select flag state"})}),e.jsxs(De,{className:"bg-slate-800 border-slate-700 max-h-60",children:[e.jsx(K,{value:"none",className:"text-slate-400",children:"Unknown"}),Wje.map(b=>e.jsxs(K,{value:b.code,className:"text-white",children:[b.name," (",b.code,")"]},b.code))]})]})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-2 flex items-center gap-2",children:[e.jsx(bu,{className:"w-4 h-4 text-orange-400"}),"Vessel Screening Includes"]}),e.jsxs("ul",{className:"text-sm text-slate-400 grid grid-cols-2 gap-1",children:[e.jsx("li",{children:"â€¢ OFAC SDN vessel list"}),e.jsx("li",{children:"â€¢ EU sanctioned vessels"}),e.jsx("li",{children:"â€¢ Flag state risk assessment"}),e.jsx("li",{children:"â€¢ Paris MoU performance"}),e.jsx("li",{children:"â€¢ Ownership chain analysis"}),e.jsx("li",{children:"â€¢ Flags of convenience check"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{onClick:g,disabled:c||!s.trim(),className:"flex-1 bg-orange-500 hover:bg-orange-600 text-white",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Screening..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Screen Vessel"]})}),e.jsxs(M,{variant:"outline",onClick:j,className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(yu,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]}),h&&e.jsxs($,{className:`border-${y(h.status)}-500/30 bg-${y(h.status)}-500/5`,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 bg-${y(h.status)}-500/20 rounded-lg flex items-center justify-center`,children:h.status==="clear"?e.jsx(Oe,{className:"w-6 h-6 text-emerald-400"}):h.status==="potential_match"?e.jsx(Ve,{className:"w-6 h-6 text-amber-400"}):e.jsx(bs,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white",children:[h.status==="clear"&&"âœ… VESSEL CLEAR",h.status==="potential_match"&&"âš ï¸ REVIEW REQUIRED",h.status==="match"&&"âŒ VESSEL FLAGGED"]}),e.jsxs(ue,{className:"text-slate-400",children:['Vessel: "',h.query,'" â€¢ Screened: ',new Date(h.screened_at).toLocaleString()]})]})]}),e.jsx(Q,{className:`bg-${y(h.status)}-500/20 text-${y(h.status)}-400`,children:h.risk_level.toUpperCase()})]})}),e.jsxs(U,{className:"space-y-4",children:[h.matches.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Issues Detected"}),h.matches.map((b,N)=>e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium text-white flex items-center gap-2",children:[b.list_code==="FLAG_RISK"?e.jsx(rg,{className:"w-4 h-4 text-amber-400"}):e.jsx(Ve,{className:"w-4 h-4 text-red-400"}),b.list_name]}),e.jsx(Q,{className:`${b.match_score>=90?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400"}`,children:b.match_type==="risk_assessment"?b.remarks?.split(" - ")[0]:`${b.match_score}% Match`})]}),b.remarks&&e.jsx("p",{className:"text-sm text-slate-400",children:b.remarks})]},N))]}),e.jsx("div",{className:`p-4 rounded-lg border ${h.status==="clear"?"bg-emerald-500/10 border-emerald-500/30":"bg-red-500/10 border-red-500/30"}`,children:e.jsx("p",{className:`text-sm font-medium ${h.status==="clear"?"text-emerald-400":"text-red-400"}`,children:h.recommendation})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-4 h-4"}),h.processing_time_ms,"ms"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"w-4 h-4"}),h.certificate_id]})]}),e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download Certificate"]})]})]})]})]})}const Gje=[{code:"US",name:"United States"},{code:"GB",name:"United Kingdom"},{code:"DE",name:"Germany"},{code:"FR",name:"France"},{code:"CN",name:"China"},{code:"RU",name:"Russia"},{code:"IR",name:"Iran"},{code:"KP",name:"North Korea"},{code:"SY",name:"Syria"},{code:"CU",name:"Cuba"},{code:"AE",name:"United Arab Emirates"},{code:"SG",name:"Singapore"},{code:"IN",name:"India"},{code:"BR",name:"Brazil"}];function Kje(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState(""),[i,l]=m.useState(""),[o,d]=m.useState(!1),[c,u]=m.useState(null),h=async()=>{if(!s.trim()){t({title:"Description required",description:"Please enter a goods description to screen",variant:"destructive"});return}d(!0),u(null);try{const j=await fetch("/api/sanctions/screen/goods",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({description:s,hs_code:r||void 0,destination_country:i&&i!=="none"?i:void 0})});if(!j.ok)throw new Error("Screening failed");const y=await j.json();u(y),y.status==="clear"?t({title:"âœ… No Export Control Issues",description:"Goods passed screening"}):t({title:"âš ï¸ Export Control Flags",description:`${y.flags.length} issue(s) detected`,variant:"destructive"})}catch{t({title:"Screening failed",description:"Please try again or contact support",variant:"destructive"})}finally{d(!1)}},x=()=>{a(""),n(""),l(""),u(null)},g=j=>{switch(j){case"clear":return"emerald";case"potential_match":return"amber";case"match":return"red";default:return"slate"}};return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Ps,{className:"w-6 h-6 text-yellow-400"}),"Screen Goods"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Check goods against dual-use, export control, and sanctions lists"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Goods Details"}),e.jsx(ue,{className:"text-slate-400",children:"Enter goods description and destination for export control screening"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",className:"text-white",children:"Goods Description *"}),e.jsx(Zt,{id:"description",value:s,onChange:j=>a(j.target.value),placeholder:"e.g., Industrial centrifuge for pharmaceutical processing, model XYZ-500",rows:3,className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"hsCode",className:"text-white",children:"HS Code (optional)"}),e.jsx(oe,{id:"hsCode",value:r,onChange:j=>n(j.target.value),placeholder:"e.g., 8421.19.0000",className:"bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"destination",className:"text-white",children:"Destination Country"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Fe,{placeholder:"Select destination"})}),e.jsxs(De,{className:"bg-slate-800 border-slate-700 max-h-60",children:[e.jsx(K,{value:"none",className:"text-slate-400",children:"Not specified"}),Gje.map(j=>e.jsx(K,{value:j.code,className:"text-white",children:j.name},j.code))]})]})]})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("h4",{className:"text-sm font-medium text-white mb-2 flex items-center gap-2",children:[e.jsx(sj,{className:"w-4 h-4 text-yellow-400"}),"Export Control Screening Includes"]}),e.jsxs("ul",{className:"text-sm text-slate-400 grid grid-cols-2 gap-1",children:[e.jsx("li",{children:"â€¢ Destination country sanctions"}),e.jsx("li",{children:"â€¢ Dual-use indicators"}),e.jsx("li",{children:"â€¢ Nuclear/WMD keywords"}),e.jsx("li",{children:"â€¢ Military/defense items"}),e.jsx("li",{children:"â€¢ Encryption technology"}),e.jsx("li",{children:"â€¢ Missile technology"})]})]}),e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-400",children:[e.jsx("strong",{children:"Note:"})," This screening checks for common export control indicators. For definitive ECCN classification, consult a licensed trade compliance specialist."]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{onClick:h,disabled:o||!s.trim(),className:"flex-1 bg-yellow-500 hover:bg-yellow-600 text-black",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Screening..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Screen Goods"]})}),e.jsxs(M,{variant:"outline",onClick:x,className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(yu,{className:"w-4 h-4 mr-2"}),"Reset"]})]})]})]}),c&&e.jsxs($,{className:`border-${g(c.status)}-500/30 bg-${g(c.status)}-500/5`,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-12 h-12 bg-${g(c.status)}-500/20 rounded-lg flex items-center justify-center`,children:c.status==="clear"?e.jsx(Oe,{className:"w-6 h-6 text-emerald-400"}):c.status==="potential_match"?e.jsx(Ve,{className:"w-6 h-6 text-amber-400"}):e.jsx(bs,{className:"w-6 h-6 text-red-400"})}),e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white",children:[c.status==="clear"&&"âœ… NO EXPORT CONTROL FLAGS",c.status==="potential_match"&&"âš ï¸ EXPORT CONTROL REVIEW REQUIRED",c.status==="match"&&"âŒ EXPORT PROHIBITED"]}),e.jsxs(ue,{className:"text-slate-400",children:["Screened: ",new Date(c.screened_at).toLocaleString()]})]})]}),e.jsx(Q,{className:`bg-${g(c.status)}-500/20 text-${g(c.status)}-400`,children:c.risk_level.toUpperCase()})]})}),e.jsxs(U,{className:"space-y-4",children:[c.flags.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Export Control Flags"}),c.flags.map((j,y)=>e.jsxs("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-amber-400"}),e.jsx("span",{className:"text-sm text-amber-400",children:j})]},y))]}),c.matches.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium text-white",children:"Issues Detected"}),c.matches.map((j,y)=>e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-white",children:j.list_name}),e.jsx(Q,{className:"bg-amber-500/20 text-amber-400",children:j.match_type})]}),j.remarks&&e.jsx("p",{className:"text-sm text-slate-400",children:j.remarks})]},y))]}),e.jsx("div",{className:`p-4 rounded-lg border ${c.status==="clear"?"bg-emerald-500/10 border-emerald-500/30":"bg-amber-500/10 border-amber-500/30"}`,children:e.jsx("p",{className:`text-sm font-medium ${c.status==="clear"?"text-emerald-400":"text-amber-400"}`,children:c.recommendation})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-slate-800",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-4 h-4"}),c.processing_time_ms,"ms"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Gs,{className:"w-4 h-4"}),c.certificate_id]})]}),e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download Report"]})]})]})]})]})}const iM="https://trdrhub-api.onrender.com";function Yje(){const[t,s]=m.useState(""),[a,r]=m.useState("all"),[n,i]=m.useState("all"),[l,o]=m.useState([]),[d,c]=m.useState(!0),[u,h]=m.useState(null);m.useEffect(()=>{(async()=>{c(!0),h(null);try{const C=await fetch(`${iM}/sanctions/history`,{credentials:"include"});if(!C.ok)throw new Error("Failed to fetch screening history");const _=await C.json();o(_.history||_||[])}catch(C){console.error("Failed to fetch sanctions history:",C),h("Failed to load screening history. Please try again."),o([])}finally{c(!1)}})()},[]);const x=async()=>{c(!0);try{const N=await fetch(`${iM}/sanctions/history`,{credentials:"include"});if(N.ok){const C=await N.json();o(C.history||C||[])}}catch(N){console.error("Failed to refresh history:",N)}finally{c(!1)}},g=N=>{switch(N){case"clear":return Oe;case"potential_match":return Ve;case"match":return bs;default:return xn}},j=N=>{switch(N){case"clear":return"emerald";case"potential_match":return"amber";case"match":return"red";default:return"slate"}},y=N=>{switch(N){case"party":return xs;case"vessel":return Us;case"goods":return Ps;default:return Bt}},b=l.filter(N=>!(t&&!N.query.toLowerCase().includes(t.toLowerCase())||a!=="all"&&N.type!==a||n!=="all"&&N.status!==n));return e.jsxs("div",{className:"p-6 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(xn,{className:"w-6 h-6 text-red-400"}),"Screening History"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"View and download your past screening results"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",onClick:x,disabled:d,children:[e.jsx(Lt,{className:`w-4 h-4 mr-2 ${d?"animate-spin":""}`}),"Refresh"]}),e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Export All"]})]})]}),u&&e.jsx($,{className:"bg-red-900/20 border-red-800",children:e.jsx(U,{className:"p-4 text-red-400",children:u})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx(oe,{value:t,onChange:N=>s(N.target.value),placeholder:"Search by name or query...",className:"pl-10 bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]})}),e.jsxs(Te,{value:a,onValueChange:r,children:[e.jsxs(Pe,{className:"w-40 bg-slate-800 border-slate-700 text-white",children:[e.jsx(Nd,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{placeholder:"Type"})]}),e.jsxs(De,{className:"bg-slate-800 border-slate-700",children:[e.jsx(K,{value:"all",className:"text-white",children:"All Types"}),e.jsx(K,{value:"party",className:"text-white",children:"Party"}),e.jsx(K,{value:"vessel",className:"text-white",children:"Vessel"}),e.jsx(K,{value:"goods",className:"text-white",children:"Goods"})]})]}),e.jsxs(Te,{value:n,onValueChange:i,children:[e.jsxs(Pe,{className:"w-40 bg-slate-800 border-slate-700 text-white",children:[e.jsx(Nd,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{placeholder:"Status"})]}),e.jsxs(De,{className:"bg-slate-800 border-slate-700",children:[e.jsx(K,{value:"all",className:"text-white",children:"All Status"}),e.jsx(K,{value:"clear",className:"text-white",children:"Clear"}),e.jsx(K,{value:"potential_match",className:"text-white",children:"Potential Match"}),e.jsx(K,{value:"match",className:"text-white",children:"Match"})]})]})]})})}),e.jsx("div",{className:"space-y-3",children:b.length===0?e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx(xn,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No screening history"}),e.jsx("p",{className:"text-slate-400",children:t||a!=="all"||n!=="all"?"No results match your filters":"Your screening history will appear here"})]})}):b.map(N=>{const C=g(N.status),_=y(N.type),A=j(N.status);return e.jsx($,{className:"bg-slate-900/50 border-slate-800 hover:border-slate-700 transition-colors",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 bg-${A}-500/20 rounded-lg flex items-center justify-center`,children:e.jsx(C,{className:`w-5 h-5 text-${A}-400`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-4 h-4 text-slate-500"}),e.jsx("span",{className:"font-medium text-white",children:N.query}),e.jsx(Q,{variant:"outline",className:"border-slate-700 text-slate-400 text-xs",children:N.type})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"w-3 h-3"}),new Date(N.screened_at).toLocaleString()]}),e.jsxs("span",{children:[N.lists_screened.length," lists"]}),e.jsx("span",{className:"text-slate-600",children:N.certificate_id})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(Q,{className:`bg-${A}-500/20 text-${A}-400 border-${A}-500/30`,children:[N.status==="clear"&&"Clear",N.status==="potential_match"&&"Review",N.status==="match"&&"Match"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",children:[e.jsx(Da,{className:"w-4 h-4 mr-1"}),"View"]}),e.jsx(M,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",children:e.jsx(Gt,{className:"w-4 h-4"})})]})]})})},N.id)})})]})}const Zje="https://trdrhub-api.onrender.com";function Jje(){const[t,s]=m.useState(""),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null);m.useEffect(()=>{(async()=>{i(!0),o(null);try{const u=await fetch(`${Zje}/sanctions/history`,{credentials:"include"});if(!u.ok)throw new Error("Failed to fetch certificates");const h=await u.json(),g=(h.history||h||[]).filter(j=>j.certificate_id).map(j=>({id:j.certificate_id,query:j.query,type:j.type,status:j.status,issued_at:j.screened_at,valid_until:new Date(new Date(j.screened_at).getTime()+1440*60*1e3).toISOString(),lists_count:j.lists_screened?.length||0,expired:new Date(j.screened_at).getTime()+1440*60*1e3<Date.now()}));r(g)}catch(u){console.error("Failed to fetch certificates:",u),o("Failed to load certificates. Please try again."),r([])}finally{i(!1)}})()},[]);const d=a.filter(c=>c.id.toLowerCase().includes(t.toLowerCase())||c.query.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6 max-w-6xl mx-auto",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Gs,{className:"w-6 h-6 text-red-400"}),"Screening Certificates"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Download compliance certificates for your records"})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx(oe,{value:t,onChange:c=>s(c.target.value),placeholder:"Search by certificate ID or query...",className:"pl-10 bg-slate-800 border-slate-700 text-white placeholder:text-slate-500"})]})})}),e.jsx($,{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/20",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ot,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"About Screening Certificates"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Certificates are valid for 24 hours from the time of screening. They confirm that a screening was performed against the specified lists at a specific point in time. Always re-screen before finalizing transactions."})]})]})})}),e.jsx("div",{className:"space-y-3",children:d.length===0?e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx(Gs,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No certificates found"}),e.jsx("p",{className:"text-slate-400",children:t?"No certificates match your search":"Your certificates will appear here"})]})}):d.map(c=>e.jsx($,{className:`bg-slate-900/50 border-slate-800 ${c.expired?"opacity-60":""}`,children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 ${c.expired?"bg-slate-500/20":c.status==="clear"?"bg-emerald-500/20":"bg-amber-500/20"} rounded-lg flex items-center justify-center`,children:c.status==="clear"?e.jsx(Oe,{className:`w-6 h-6 ${c.expired?"text-slate-500":"text-emerald-400"}`}):e.jsx(Ve,{className:`w-6 h-6 ${c.expired?"text-slate-500":"text-amber-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm text-red-400",children:c.id}),c.expired&&e.jsx(Q,{variant:"outline",className:"border-slate-600 text-slate-500 text-xs",children:"Expired"})]}),e.jsx("p",{className:"text-white font-medium mt-1",children:c.query}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"w-3 h-3"}),"Issued: ",new Date(c.issued_at).toLocaleString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"w-3 h-3"}),"Valid until: ",new Date(c.valid_until).toLocaleString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"text-slate-400",children:[c.lists_count," lists screened"]}),e.jsx("p",{className:`font-medium ${c.status==="clear"?"text-emerald-400":"text-amber-400"}`,children:c.status==="clear"?"Clear":"Review Required"})]}),e.jsxs(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",disabled:c.expired,children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download PDF"]})]})]})})},c.id))})]})}var h_="Switch",[Qje,kJe]=Vr(h_),[Xje,ebe]=Qje(h_),dK=m.forwardRef((t,s)=>{const{__scopeSwitch:a,name:r,checked:n,defaultChecked:i,required:l,disabled:o,value:d="on",onCheckedChange:c,form:u,...h}=t,[x,g]=m.useState(null),j=vs(s,_=>g(_)),y=m.useRef(!1),b=x?u||!!x.closest("form"):!0,[N,C]=Hn({prop:n,defaultProp:i??!1,onChange:c,caller:h_});return e.jsxs(Xje,{scope:a,checked:N,disabled:o,children:[e.jsx(Pt.button,{type:"button",role:"switch","aria-checked":N,"aria-required":l,"data-state":xK(N),"data-disabled":o?"":void 0,disabled:o,value:d,...h,ref:j,onClick:gt(t.onClick,_=>{C(A=>!A),b&&(y.current=_.isPropagationStopped(),y.current||_.stopPropagation())})}),b&&e.jsx(hK,{control:x,bubbles:!y.current,name:r,value:d,checked:N,required:l,disabled:o,form:u,style:{transform:"translateX(-100%)"}})]})});dK.displayName=h_;var uK="SwitchThumb",mK=m.forwardRef((t,s)=>{const{__scopeSwitch:a,...r}=t,n=ebe(uK,a);return e.jsx(Pt.span,{"data-state":xK(n.checked),"data-disabled":n.disabled?"":void 0,...r,ref:s})});mK.displayName=uK;var tbe="SwitchBubbleInput",hK=m.forwardRef(({__scopeSwitch:t,control:s,checked:a,bubbles:r=!0,...n},i)=>{const l=m.useRef(null),o=vs(l,i),d=ab(a),c=Jj(s);return m.useEffect(()=>{const u=l.current;if(!u)return;const h=window.HTMLInputElement.prototype,g=Object.getOwnPropertyDescriptor(h,"checked").set;if(d!==a&&g){const j=new Event("click",{bubbles:r});g.call(u,a),u.dispatchEvent(j)}},[d,a,r]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:a,...n,tabIndex:-1,ref:o,style:{...n.style,...c,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});hK.displayName=tbe;function xK(t){return t?"checked":"unchecked"}var pK=dK,sbe=mK;function lM(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const js=m.forwardRef(({className:t,...s},a)=>e.jsx(pK,{className:lM("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",t),...s,ref:a,children:e.jsx(sbe,{className:lM("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));js.displayName=pK.displayName;const oM="https://trdrhub-api.onrender.com";function abe(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState({name:"",type:"party"}),[i,l]=m.useState([]),[o,d]=m.useState(!0),[c,u]=m.useState(!1),[h,x]=m.useState(null);m.useEffect(()=>{(async()=>{d(!0),x(null);try{const b=await fetch(`${oM}/sanctions/history?limit=100`,{credentials:"include"});if(!b.ok)throw new Error("Failed to fetch watchlist");const N=await b.json(),C=N.history||N||[],_={};C.forEach(k=>{const E=k.query.toLowerCase();_[E]||(_[E]={...k,count:0}),_[E].count++,new Date(k.screened_at)>new Date(_[E].screened_at)&&(_[E]={...k,count:_[E].count})});const A=Object.values(_).filter(k=>k.count>=1).map((k,E)=>({id:String(E+1),name:k.query,type:k.type||"party",last_screened:k.screened_at,last_status:k.status,alert_email:!0,alert_in_app:!0}));l(A)}catch(b){console.error("Failed to fetch watchlist:",b),x("Failed to load watchlist. Please try again."),l([])}finally{d(!1)}})()},[]);const g=async()=>{if(r.name.trim()){u(!0);try{const y=r.type==="vessel"?"screen/vessel":"screen/party",b=await fetch(`${oM}/sanctions/${y}`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({query:r.name,lists:["OFAC_SDN","EU_CONS","UN_SC"]})});if(b.ok){const N=await b.json();l(C=>[...C,{id:String(C.length+1),name:r.name,type:r.type,last_screened:new Date().toISOString(),last_status:N.status||"clear",alert_email:!0,alert_in_app:!0}]),a(!1),n({name:"",type:"party"}),t({title:"Added to watchlist",description:`${r.name} will be monitored for sanctions updates.`})}}catch(y){console.error("Failed to add to watchlist:",y),t({title:"Error",description:"Failed to add to watchlist. Please try again.",variant:"destructive"})}finally{u(!1)}}},j=y=>{l(b=>b.filter(N=>N.id!==y)),t({title:"Removed from watchlist",description:"Item will no longer be monitored."})};return e.jsxs("div",{className:"p-6 space-y-6 max-w-6xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx($s,{className:"w-6 h-6 text-red-400"}),"Watchlist Monitoring"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Get alerted when sanctions lists are updated for your monitored parties"})]}),e.jsxs(wt,{open:s,onOpenChange:a,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add to Watchlist"]})}),e.jsxs(yt,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:"Add to Watchlist"}),e.jsx(_t,{className:"text-slate-400",children:"Monitor a party or vessel for sanctions list changes"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-white",children:"Name"}),e.jsx(oe,{value:r.name,onChange:y=>n({...r,name:y.target.value}),placeholder:"Enter party or vessel name",className:"bg-slate-800 border-slate-700 text-white"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{className:"text-white",children:"Email Alerts"}),e.jsx(js,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{className:"text-white",children:"In-App Alerts"}),e.jsx(js,{defaultChecked:!0})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),className:"border-slate-700 text-slate-400",children:"Cancel"}),e.jsxs(M,{className:"bg-red-500 hover:bg-red-600",onClick:g,disabled:c||!r.name.trim(),children:[c&&e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Add to Watchlist"]})]})]})]})]}),e.jsx($,{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/20",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Lt,{className:"w-5 h-5 text-red-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-white",children:"Automatic Re-screening"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Watchlist entries are automatically re-screened when sanctions lists are updated (typically daily for OFAC, weekly for EU/UK). You'll receive an alert if any status changes."})]})]})})}),o&&e.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pt,{className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(pt,{className:"h-4 w-48"}),e.jsx(pt,{className:"h-3 w-32"})]})]})})},y))}),h&&e.jsx($,{className:"bg-red-900/20 border-red-800",children:e.jsx(U,{className:"p-4 text-red-400",children:h})}),!o&&e.jsx("div",{className:"space-y-3",children:i.length===0?e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx($s,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No watchlist entries"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Add parties or vessels to monitor for sanctions list changes"}),e.jsxs(M,{className:"bg-red-500 hover:bg-red-600 text-white",onClick:()=>a(!0),children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add First Entry"]})]})}):i.map(y=>e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`w-10 h-10 ${y.last_status==="clear"?"bg-emerald-500/20":"bg-amber-500/20"} rounded-lg flex items-center justify-center`,children:y.type==="party"?e.jsx(xs,{className:`w-5 h-5 ${y.last_status==="clear"?"text-emerald-400":"text-amber-400"}`}):e.jsx(Us,{className:`w-5 h-5 ${y.last_status==="clear"?"text-emerald-400":"text-amber-400"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:y.name}),e.jsx(Q,{variant:"outline",className:"border-slate-700 text-slate-400 text-xs",children:y.type}),y.country&&e.jsx(Q,{variant:"outline",className:"border-slate-700 text-slate-400 text-xs",children:y.country})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-sm text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"w-3 h-3"}),"Last screened: ",new Date(y.last_screened).toLocaleString()]}),y.alert_email&&e.jsx(Q,{variant:"outline",className:"text-xs",children:"Email"}),y.alert_in_app&&e.jsx(Q,{variant:"outline",className:"text-xs",children:"In-App"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:`${y.last_status==="clear"?"bg-emerald-500/20 text-emerald-400":"bg-amber-500/20 text-amber-400"}`,children:y.last_status==="clear"?e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"Clear"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ve,{className:"w-3 h-3 mr-1"}),"Review"]})}),e.jsx(M,{variant:"ghost",size:"icon",className:"text-slate-500 hover:text-white",children:e.jsx(sn,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"icon",className:"text-slate-500 hover:text-red-400",onClick:()=>j(y.id),children:e.jsx(ia,{className:"w-4 h-4"})})]})]})})},y.id))})]})}function rbe(){return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(sn,{className:"w-6 h-6 text-red-400"}),"Settings"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Configure your sanctions screening preferences"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5 text-yellow-400"}),"Your Plan"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white",children:"Free Tier"}),e.jsx("p",{className:"text-sm text-slate-400",children:"10 screenings per month"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:"7 / 10"}),e.jsx("p",{className:"text-sm text-slate-500",children:"screenings remaining"})]})]}),e.jsx(M,{className:"w-full bg-red-500 hover:bg-red-600 text-white",children:"Upgrade to Professional - $99/mo"})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Qm,{className:"w-5 h-5 text-red-400"}),"Default Screening Lists"]}),e.jsx(ue,{className:"text-slate-400",children:"Select which lists to include in screenings by default"})]}),e.jsx(U,{className:"space-y-4",children:[{code:"OFAC_SDN",name:"OFAC SDN",jurisdiction:"US",default:!0},{code:"EU_CONS",name:"EU Consolidated",jurisdiction:"EU",default:!0},{code:"UN_SC",name:"UN Security Council",jurisdiction:"UN",default:!0},{code:"UK_OFSI",name:"UK OFSI",jurisdiction:"UK",default:!0},{code:"BIS_EL",name:"BIS Entity List",jurisdiction:"US",default:!1},{code:"OFAC_SSI",name:"OFAC Sectoral",jurisdiction:"US",default:!1}].map(t=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ot,{className:"w-4 h-4 text-red-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"text-white font-medium",children:t.name}),e.jsx(Q,{variant:"outline",className:"ml-2 border-slate-600 text-slate-400 text-xs",children:t.jurisdiction})]})]}),e.jsx(js,{defaultChecked:t.default})]},t.code))})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5 text-red-400"}),"Notifications"]}),e.jsx(ue,{className:"text-slate-400",children:"Manage how you receive alerts"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Va,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"Email Alerts"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Receive alerts via email"})]})]}),e.jsx(js,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx($s,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"In-App Notifications"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Show notifications in dashboard"})]})]}),e.jsx(js,{defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Qm,{className:"w-4 h-4 text-slate-500"}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"List Update Alerts"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Alert when sanctions lists are updated"})]})]}),e.jsx(js,{})]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(ha,{className:"w-5 h-5 text-red-400"}),"Matching Preferences"]}),e.jsx(ue,{className:"text-slate-400",children:"Configure fuzzy matching sensitivity"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-white",children:"Match Threshold"}),e.jsxs(Te,{defaultValue:"85",children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Fe,{})}),e.jsxs(De,{className:"bg-slate-800 border-slate-700",children:[e.jsx(K,{value:"95",className:"text-white",children:"95% - Strict (fewer false positives)"}),e.jsx(K,{value:"85",className:"text-white",children:"85% - Balanced (recommended)"}),e.jsx(K,{value:"70",className:"text-white",children:"70% - Sensitive (more matches)"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Lower thresholds catch more potential matches but may include false positives"})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{className:"bg-red-500 hover:bg-red-600 text-white",children:"Save Settings"})})]})}const nbe=[{question:"Which sanctions lists do you screen against?",answer:"We screen against 50+ global sanctions lists including OFAC SDN (US Treasury), EU Consolidated Sanctions, UN Security Council, UK OFSI, BIS Entity List, and many more. Our lists are updated daily for OFAC and weekly for EU/UK sources."},{question:"How does fuzzy matching work?",answer:"Our matching algorithm uses multiple techniques including Jaro-Winkler similarity, token set matching, and phonetic algorithms to catch variations in spelling, transliterations, and name order differences. We also check known aliases from the sanctions lists."},{question:"What does a 'Potential Match' mean?",answer:"A potential match indicates that our algorithm found a similarity between your query and an entry on a sanctions list. The match score (e.g., 85%) indicates confidence. Scores above 95% are likely exact matches, while 70-85% may require manual review to confirm if it's the same entity."},{question:"How long are screening certificates valid?",answer:"Certificates are valid for 24 hours from the time of screening. Since sanctions lists are updated frequently (daily for OFAC), we recommend re-screening before finalizing any transaction to ensure compliance with the latest data."},{question:"What is the 50% Rule?",answer:"OFAC's 50% Rule means that any entity owned 50% or more (in aggregate) by one or more SDN-listed persons is treated as if it were on the SDN list, even if not explicitly listed. Our screening flags entities from comprehensively sanctioned countries that may be subject to this rule."},{question:"Can I screen vessels for dark activity?",answer:"Yes, vessel screening includes flag state risk assessment (based on Paris and Tokyo MoU performance lists), ownership chain analysis, and flags of convenience detection. We recommend combining this with AIS tracking for comprehensive vessel due diligence."},{question:"What's the difference between SDN and SSI lists?",answer:"SDN (Specially Designated Nationals) is a full block - no US person can transact with listed entities. SSI (Sectoral Sanctions Identifications) is more limited, restricting specific activities like new debt or equity with Russian entities. Trade in goods may still be permitted with SSI-listed parties."},{question:"How do I set up continuous monitoring?",answer:"Add parties or vessels to your Watchlist, and we'll automatically re-screen them when sanctions lists are updated. You'll receive email and/or in-app alerts if any status changes. This is essential for ongoing business relationships."}],ibe=[{title:"OFAC SDN Search",description:"Official US Treasury sanctions search",href:"https://sanctionssearch.ofac.treas.gov/",icon:Ot},{title:"EU Sanctions Map",description:"European Union sanctions database",href:"https://www.sanctionsmap.eu/",icon:Ot},{title:"UN Security Council",description:"United Nations sanctions lists",href:"https://www.un.org/securitycouncil/sanctions/information",icon:Ot},{title:"UK OFSI",description:"UK Office of Financial Sanctions",href:"https://www.gov.uk/government/organisations/office-of-financial-sanctions-implementation",icon:Ot}];function lbe(){const[t,s]=m.useState(0);return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Pn,{className:"w-6 h-6 text-red-400"}),"Help & FAQ"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Learn how to use the Sanctions Screener effectively"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Quick Start Guide"}),e.jsx(ue,{className:"text-slate-400",children:"Three ways to use the Sanctions Screener"})]}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsx(xs,{className:"w-8 h-8 text-red-400 mb-3"}),e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Screen Parties"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Enter a company or individual name to check against OFAC, EU, and UN sanctions lists."})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsx(Us,{className:"w-8 h-8 text-orange-400 mb-3"}),e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Screen Vessels"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Enter vessel name or IMO number to check ownership, flag state, and sanctions status."})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsx(Ps,{className:"w-8 h-8 text-yellow-400 mb-3"}),e.jsx("h4",{className:"font-semibold text-white mb-2",children:"Screen Goods"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Describe your goods to check for dual-use indicators and export control flags."})]})]})})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Frequently Asked Questions"})}),e.jsx(U,{className:"space-y-2",children:nbe.map((a,r)=>e.jsxs("div",{className:"border border-slate-800 rounded-lg overflow-hidden",children:[e.jsxs("button",{className:"w-full px-4 py-3 text-left flex items-center justify-between hover:bg-slate-800/50 transition-colors",onClick:()=>s(t===r?null:r),children:[e.jsx("span",{className:"text-white font-medium",children:a.question}),e.jsx(ja,{className:Le("w-5 h-5 text-slate-500 transition-transform",t===r&&"rotate-180")})]}),t===r&&e.jsx("div",{className:"px-4 pb-4",children:e.jsx("p",{className:"text-slate-400 text-sm leading-relaxed",children:a.answer})})]},r))})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Official Resources"}),e.jsx(ue,{className:"text-slate-400",children:"Links to official sanctions authorities"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:ibe.map(a=>e.jsxs("a",{href:a.href,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg border border-slate-700 hover:border-red-500/30 transition-colors",children:[e.jsx(a.icon,{className:"w-5 h-5 text-red-400"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-white",children:a.title}),e.jsx("p",{className:"text-sm text-slate-500",children:a.description})]}),e.jsx(ir,{className:"w-4 h-4 text-slate-500"})]},a.title))})})]}),e.jsx($,{className:"bg-gradient-to-r from-red-500/10 to-orange-500/10 border-red-500/20",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(eh,{className:"w-10 h-10 text-red-400"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-white",children:"Need Help?"}),e.jsx("p",{className:"text-slate-400",children:"Our compliance team is here to assist"})]})]}),e.jsx(M,{className:"bg-red-500 hover:bg-red-600 text-white",children:"Contact Support"})]})})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("p",{className:"text-xs text-slate-500 leading-relaxed",children:[e.jsx("strong",{className:"text-slate-400",children:"Disclaimer:"})," TRDR Sanctions Screener is a screening aid, not legal advice. Results should be verified with your compliance team. We update lists regularly but cannot guarantee real-time accuracy. For official sanctions information, always refer to the relevant government authority (OFAC, EU, UN, UK OFSI)."]})})})]})}function obe(){const{toast:t}=et(),[s,a]=m.useState("party"),[r,n]=m.useState(!1),[i,l]=m.useState(null),[o,d]=m.useState(!1),[c,u]=m.useState(null),h=m.useCallback(C=>{C.preventDefault(),n(!0)},[]),x=m.useCallback(C=>{C.preventDefault(),n(!1)},[]),g=m.useCallback(C=>{C.preventDefault(),n(!1);const _=C.dataTransfer.files[0];_&&_.name.endsWith(".csv")?l(_):t({title:"Invalid file",description:"Please upload a CSV file",variant:"destructive"})},[t]),j=C=>{const _=C.target.files?.[0];_&&l(_)},y=async()=>{if(i){d(!0);try{await new Promise(_=>setTimeout(_,1e3));const C={job_id:`batch-${Date.now()}`,status:"processing",total:50,processed:0,clear:0,potential_match:0,match:0,errors:0,started_at:new Date().toISOString()};u(C);for(let _=0;_<=50;_++)await new Promise(A=>setTimeout(A,100)),u(A=>A?{...A,processed:_,clear:Math.floor(_*.8),potential_match:Math.floor(_*.15),match:Math.floor(_*.02),errors:Math.floor(_*.03),status:_===50?"completed":"processing",completed_at:_===50?new Date().toISOString():void 0}:null);t({title:"Batch screening complete",description:"50 entities screened successfully"})}catch{t({title:"Upload failed",description:"Please try again",variant:"destructive"})}finally{d(!1)}}},b=()=>{const C={party:`name,country
apps\web\dist\assets\index-Bz84JA8h.js:134:`,_=new Blob([C],{type:"text/csv"}),A=URL.createObjectURL(_),k=document.createElement("a");k.href=A,k.download=`screening_results_${c.job_id}.csv`,k.click(),URL.revokeObjectURL(A)};return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Hs,{className:"w-6 h-6 text-red-400"}),"Batch Screening"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Upload a CSV file to screen multiple entities at once"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Upload CSV File"}),e.jsx(ue,{className:"text-slate-400",children:"Upload up to 1,000 entities per file"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-white",children:"Screening Type"}),e.jsxs(Te,{value:s,onValueChange:a,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 text-white",children:e.jsx(Fe,{})}),e.jsxs(De,{className:"bg-slate-800 border-slate-700",children:[e.jsx(K,{value:"party",className:"text-white",children:"Party / Entity"}),e.jsx(K,{value:"vessel",className:"text-white",children:"Vessel"}),e.jsx(K,{value:"goods",className:"text-white",children:"Goods"})]})]})]}),e.jsx("div",{onDragOver:h,onDragLeave:x,onDrop:g,className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${r?"border-red-500 bg-red-500/10":i?"border-emerald-500/50 bg-emerald-500/5":"border-slate-700 hover:border-slate-600"}`,children:i?e.jsxs("div",{className:"space-y-2",children:[e.jsx(zm,{className:"w-12 h-12 text-emerald-400 mx-auto"}),e.jsx("p",{className:"text-white font-medium",children:i.name}),e.jsxs("p",{className:"text-sm text-slate-400",children:[(i.size/1024).toFixed(1)," KB"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>l(null),className:"text-slate-400 hover:text-white",children:"Remove"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsx(Hs,{className:"w-12 h-12 text-slate-500 mx-auto"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white font-medium",children:"Drag and drop your CSV file here"}),e.jsx("p",{className:"text-sm text-slate-400",children:"or click to browse"})]}),e.jsx("input",{type:"file",accept:".csv",onChange:j,className:"hidden",id:"file-upload"}),e.jsx(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",onClick:()=>document.getElementById("file-upload")?.click(),children:"Select File"})]})}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:"Need a template?"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Download our CSV template"})]})]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:b,className:"text-red-400 hover:text-red-300",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download"]})]}),e.jsx(M,{onClick:y,disabled:!i||o,className:"w-full bg-red-500 hover:bg-red-600 text-white",children:o?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Start Batch Screening"]})})]})]}),c&&e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[c.status==="completed"?e.jsx(Oe,{className:"w-5 h-5 text-emerald-400"}):c.status==="failed"?e.jsx(bs,{className:"w-5 h-5 text-red-400"}):e.jsx(ct,{className:"w-5 h-5 text-red-400 animate-spin"}),c.status==="completed"?"Screening Complete":"Processing..."]}),e.jsxs(ue,{className:"text-slate-400",children:["Job ID: ",c.job_id]})]}),e.jsx(Q,{className:`${c.status==="completed"?"bg-emerald-500/20 text-emerald-400":c.status==="failed"?"bg-red-500/20 text-red-400":"bg-amber-500/20 text-amber-400"}`,children:c.status})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Progress"}),e.jsxs("span",{className:"text-white",children:[c.processed," / ",c.total]})]}),e.jsx(es,{value:c.processed/c.total*100,className:"h-2"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"p-3 bg-emerald-500/10 rounded-lg border border-emerald-500/30 text-center",children:[e.jsx(Oe,{className:"w-5 h-5 text-emerald-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-emerald-400",children:c.clear}),e.jsx("p",{className:"text-xs text-slate-400",children:"Clear"})]}),e.jsxs("div",{className:"p-3 bg-amber-500/10 rounded-lg border border-amber-500/30 text-center",children:[e.jsx(Ve,{className:"w-5 h-5 text-amber-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-amber-400",children:c.potential_match}),e.jsx("p",{className:"text-xs text-slate-400",children:"Review"})]}),e.jsxs("div",{className:"p-3 bg-red-500/10 rounded-lg border border-red-500/30 text-center",children:[e.jsx(bs,{className:"w-5 h-5 text-red-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-red-400",children:c.match}),e.jsx("p",{className:"text-xs text-slate-400",children:"Match"})]}),e.jsxs("div",{className:"p-3 bg-slate-500/10 rounded-lg border border-slate-500/30 text-center",children:[e.jsx(Ja,{className:"w-5 h-5 text-slate-400 mx-auto mb-1"}),e.jsx("p",{className:"text-lg font-bold text-slate-400",children:c.errors}),e.jsx("p",{className:"text-xs text-slate-400",children:"Errors"})]})]}),c.status==="completed"&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(M,{onClick:N,className:"flex-1 bg-emerald-500 hover:bg-emerald-600 text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download Results (CSV)"]}),e.jsx(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",onClick:()=>{u(null),l(null)},children:"New Batch"})]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-sm",children:"CSV Format Requirements"})}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Party Screening"}),e.jsxs("code",{className:"text-xs text-slate-400 block",children:["name,country",e.jsx("br",{}),"Acme Trading,US",e.jsx("br",{}),"Global Corp,GB"]})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Vessel Screening"}),e.jsxs("code",{className:"text-xs text-slate-400 block",children:["name,imo,flag_code",e.jsx("br",{}),"M/V STAR,9123456,PA",e.jsx("br",{}),"MT OCEAN,9876543,LR"]})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-2",children:"Goods Screening"}),e.jsxs("code",{className:"text-xs text-slate-400 block",children:["description,hs_code,destination",e.jsx("br",{}),"Centrifuge,8421.19,IR",e.jsx("br",{}),"Electronics,8542.31,CN"]})]})]})})]})]})}const cbe=[{key_id:"sk_live_abc123...def456",name:"Production ERP",created_at:"2025-12-01T10:00:00Z",last_used:"2025-12-06T18:30:00Z",permissions:["screen:party","screen:vessel","batch:upload"],is_active:!0},{key_id:"sk_test_xyz789...ghi012",name:"Development",created_at:"2025-11-15T09:00:00Z",permissions:["screen:party"],is_active:!0}];function dbe(){const{toast:t}=et(),[s,a]=m.useState(cbe),[r,n]=m.useState(""),[i,l]=m.useState(!1),[o,d]=m.useState(null),[c,u]=m.useState(!1),h=()=>{if(!r.trim()){t({title:"Name required",description:"Please enter a name for your API key",variant:"destructive"});return}const j=`sk_live_${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`,y={key_id:j.substring(0,15)+"..."+j.substring(j.length-6),name:r,created_at:new Date().toISOString(),permissions:["screen:party","screen:vessel","screen:goods","batch:upload"],is_active:!0};a([y,...s]),d(j),n(""),l(!1)},x=j=>{navigator.clipboard.writeText(j),t({title:"Copied!",description:"API key copied to clipboard"})},g=j=>{a(s.filter(y=>y.key_id!==j)),t({title:"Key revoked",description:"API key has been permanently revoked"})};return e.jsxs("div",{className:"p-6 space-y-6 max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx(Sc,{className:"w-6 h-6 text-red-400"}),"API Access"]}),e.jsx("p",{className:"text-slate-400 mt-1",children:"Programmatic access for ERP and compliance system integration"})]}),e.jsxs(wt,{open:i,onOpenChange:l,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{className:"bg-red-500 hover:bg-red-600 text-white",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create API Key"]})}),e.jsxs(yt,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:"Create API Key"}),e.jsx(_t,{className:"text-slate-400",children:"Generate a new API key for programmatic access"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-white",children:"Key Name"}),e.jsx(oe,{value:r,onChange:j=>n(j.target.value),placeholder:"e.g., Production ERP, Development",className:"bg-slate-800 border-slate-700 text-white"})]}),e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/30 rounded-lg",children:e.jsxs("p",{className:"text-sm text-amber-400 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"The API key will only be shown once. Store it securely."]})})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>l(!1),className:"border-slate-700 text-slate-400",children:"Cancel"}),e.jsx(M,{onClick:h,className:"bg-red-500 hover:bg-red-600",children:"Create Key"})]})]})]})]}),o&&e.jsx($,{className:"bg-emerald-500/10 border-emerald-500/30",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Oe,{className:"w-5 h-5 text-emerald-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"API Key Created"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Copy it now - you won't see it again"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"px-3 py-2 bg-slate-800 rounded text-sm text-white font-mono",children:c?o:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢"}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>u(!c),className:"text-slate-400 hover:text-white",children:c?e.jsx(yd,{className:"w-4 h-4"}):e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>x(o),className:"text-slate-400 hover:text-white",children:e.jsx(qa,{className:"w-4 h-4"})})]})]})})}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Your API Keys"}),e.jsx(ue,{className:"text-slate-400",children:"Manage keys for programmatic access to the screening API"})]}),e.jsx(U,{children:s.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Sc,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No API keys"}),e.jsx("p",{className:"text-slate-400",children:"Create an API key to get started"})]}):e.jsx("div",{className:"space-y-3",children:s.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/20 rounded-lg flex items-center justify-center",children:e.jsx(Sc,{className:"w-5 h-5 text-red-400"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:j.name}),j.is_active?e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 text-xs",children:"Active"}):e.jsx(Q,{className:"bg-slate-500/20 text-slate-400 text-xs",children:"Inactive"})]}),e.jsx("code",{className:"text-sm text-slate-500 font-mono",children:j.key_id}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-slate-500",children:[e.jsxs("span",{children:["Created: ",new Date(j.created_at).toLocaleDateString()]}),j.last_used&&e.jsxs("span",{children:["Last used: ",new Date(j.last_used).toLocaleDateString()]})]})]})]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>g(j.key_id),className:"text-slate-500 hover:text-red-400",children:e.jsx(ia,{className:"w-4 h-4"})})]},j.key_id))})})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5 text-yellow-400"}),"API Usage"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:"0"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Requests this month"})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-white",children:"10,000"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Monthly limit"})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:"100%"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Available"})]})]})})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx($de,{className:"w-5 h-5 text-red-400"}),"Quick Start"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 bg-slate-950 rounded-lg font-mono text-sm",children:[e.jsx("p",{className:"text-slate-500",children:"# Screen a party"}),e.jsx("p",{className:"text-white",children:"curl -X POST https://api.trdrhub.com/sanctions/screen/party \\"}),e.jsx("p",{className:"text-white pl-4",children:'-H "Authorization: Bearer YOUR_API_KEY" \\'}),e.jsx("p",{className:"text-white pl-4",children:'-H "Content-Type: application/json" \\'}),e.jsxs("p",{className:"text-white pl-4",children:["-d '",'{"name": "Acme Trading Co", "country": "US"}',"'"]})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-1",children:"Authentication"}),e.jsx("p",{className:"text-slate-400",children:"Pass API key in Authorization header as Bearer token"})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-1",children:"Rate Limits"}),e.jsx("p",{className:"text-slate-400",children:"1,000 requests/hour per key. Contact us for higher limits."})]}),e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-white mb-1",children:"Documentation"}),e.jsx("p",{className:"text-slate-400",children:"Full API docs at /api/docs"})]})]}),e.jsx(M,{variant:"outline",className:"border-slate-700 text-slate-400 hover:text-white",asChild:!0,children:e.jsxs("a",{href:"/api/docs",target:"_blank",children:[e.jsx(ha,{className:"w-4 h-4 mr-2"}),"View Full API Documentation"]})})]})]})]})}function ube({...t}){const s=rn(),{user:a,logout:r}=Dt(),n=l=>l==="/hs-code/dashboard"?s.pathname===l:s.pathname.startsWith(l),i=async l=>{l?.preventDefault(),l?.stopPropagation();try{await r()}catch(o){console.warn("Logout failed:",o),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-purple-500/10 text-purple-500",children:e.jsx(Ps,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"HS Code Finder"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Classification Tool"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Classification"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard")&&s.pathname==="/hs-code/dashboard",asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard",children:[e.jsx(Vt,{}),e.jsx("span",{children:"Overview"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/classify"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/classify",children:[e.jsx(Bt,{}),e.jsx("span",{children:"Classify Product"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/search"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/search",children:[e.jsx(yi,{}),e.jsx("span",{children:"Search HS Codes"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/duty"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/duty",children:[e.jsx(kc,{}),e.jsx("span",{children:"Duty Calculator"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/compare"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/compare",children:[e.jsx(Uw,{}),e.jsx("span",{children:"Compare Products"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Trade Agreements"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/fta"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/fta",children:[e.jsx(ha,{}),e.jsx("span",{children:"FTA Eligibility"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/usmca"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/usmca",children:[e.jsx(qj,{}),e.jsx("span",{children:"USMCA Calculator"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/roo"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/roo",children:[e.jsx(Gs,{}),e.jsx("span",{children:"Rules of Origin"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Compliance Suite"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/compliance-suite"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/compliance-suite",children:[e.jsx(bi,{}),e.jsx("span",{children:"Compliance Dashboard"}),e.jsx(Q,{variant:"secondary",className:"ml-auto text-[10px] px-1.5",children:"New"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/export-controls"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/export-controls",children:[e.jsx(Ot,{}),e.jsx("span",{children:"Export Controls"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/section-301"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/section-301",children:[e.jsx(Be,{}),e.jsx("span",{children:"Section 301"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/ad-cvd"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/ad-cvd",children:[e.jsx(El,{}),e.jsx("span",{children:"AD/CVD Orders"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/quotas"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/quotas",children:[e.jsx(io,{}),e.jsx("span",{children:"Quota Status"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Research & Alerts"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/rulings"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/rulings",children:[e.jsx(eue,{}),e.jsx("span",{children:"Binding Rulings"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/alerts"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/alerts",children:[e.jsx($s,{}),e.jsx("span",{children:"Rate Alerts"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"My Data"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/history"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/history",children:[e.jsx(xn,{}),e.jsx("span",{children:"History"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/favorites"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/favorites",children:[e.jsx(nl,{}),e.jsx("span",{children:"Favorites"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/bulk"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/bulk",children:[e.jsx(Be,{}),e.jsx("span",{children:"Bulk Upload"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/teams"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/teams",children:[e.jsx(xs,{}),e.jsx("span",{children:"Team Management"})]})})})]})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/settings"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/hs-code/dashboard/help"),asChild:!0,children:e.jsxs(pe,{to:"/hs-code/dashboard/help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help & FAQ"})]})})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.role||"User"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}function mbe(){return e.jsx(Lc,{sidebar:e.jsx(ube,{}),breadcrumbs:[{label:"Hub",href:"/hub"},{label:"HS Code Finder"}],title:"HS Code Finder",children:e.jsx(ip,{})})}const hbe="";function xbe(){const{session:t}=Dt(),[s,a]=m.useState({total_classifications:0,this_month:0,verified_count:0,favorite_count:0}),[r,n]=m.useState([]),[i,l]=m.useState(!0);m.useEffect(()=>{t?.access_token?o():l(!1)},[t?.access_token]);const o=async()=>{try{const u=await fetch(`${hbe}/hs-code/history?limit=5`,{headers:{Authorization:`Bearer ${t?.access_token}`}});if(u.ok){const h=await u.json();n(h.classifications||[]),a({total_classifications:h.total||0,this_month:Math.min(h.total||0,12),verified_count:h.classifications?.filter(x=>x.is_verified).length||0,favorite_count:0})}}catch(u){console.error("Error fetching classifications:",u)}finally{l(!1)}},d=[{icon:Bt,title:"Classify Product",description:"Describe your product and get AI-powered HS code",href:"/hs-code/dashboard/classify",color:"bg-emerald-500/20 text-emerald-400"},{icon:kc,title:"Duty Calculator",description:"Calculate import duties and landed costs",href:"/hs-code/dashboard/duty",color:"bg-blue-500/20 text-blue-400"},{icon:ha,title:"FTA Eligibility",description:"Check Free Trade Agreement benefits",href:"/hs-code/dashboard/fta",color:"bg-purple-500/20 text-purple-400"},{icon:Hs,title:"Bulk Upload",description:"Classify multiple products at once",href:"/hs-code/dashboard/bulk",color:"bg-amber-500/20 text-amber-400"}],c=[{query:"Cotton t-shirts",code:"6109.10.00",chapter:"61"},{query:"Laptops",code:"8471.30.01",chapter:"84"},{query:"Smartphones",code:"8517.12.00",chapter:"85"},{query:"Roasted coffee",code:"0901.21.00",chapter:"09"},{query:"Automotive parts",code:"8708.99.81",chapter:"87"},{query:"Lithium batteries",code:"8507.60.00",chapter:"85"}];return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-emerald-400"}),"HS Code Finder"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"AI-powered tariff classification, duty rates, and FTA eligibility"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/20",children:e.jsx(Ps,{className:"h-5 w-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.total_classifications}),e.jsx("p",{className:"text-sm text-slate-400",children:"Total Classifications"})]})]})})}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/20",children:e.jsx(Vt,{className:"h-5 w-5 text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.this_month}),e.jsx("p",{className:"text-sm text-slate-400",children:"This Month"})]})]})})}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/20",children:e.jsx(Oe,{className:"h-5 w-5 text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.verified_count}),e.jsx("p",{className:"text-sm text-slate-400",children:"Verified"})]})]})})}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/20",children:e.jsx(nl,{className:"h-5 w-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:s.favorite_count}),e.jsx("p",{className:"text-sm text-slate-400",children:"Favorites"})]})]})})})]}),e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:d.map(u=>e.jsx(pe,{to:u.href,children:e.jsx($,{className:"bg-slate-800 border-slate-700 hover:bg-slate-700 transition-colors cursor-pointer h-full",children:e.jsxs(U,{className:"p-4",children:[e.jsx("div",{className:`p-2 rounded-lg w-fit ${u.color} mb-3`,children:e.jsx(u.icon,{className:"h-5 w-5"})}),e.jsx("h3",{className:"font-semibold text-white mb-1",children:u.title}),e.jsx("p",{className:"text-sm text-slate-400",children:u.description})]})})},u.href))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Recent Classifications"}),e.jsx(pe,{to:"/hs-code/dashboard/history",children:e.jsxs(M,{variant:"ghost",size:"sm",className:"text-emerald-400 hover:text-emerald-300",children:["View All ",e.jsx(Jt,{className:"h-4 w-4 ml-1"})]})})]}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-0",children:i?e.jsx("div",{className:"p-8 text-center text-slate-400",children:"Loading..."}):r.length===0?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(Ps,{className:"h-12 w-12 mx-auto mb-3 text-slate-600"}),e.jsx("p",{className:"text-slate-400",children:"No classifications yet"}),e.jsx(pe,{to:"/hs-code/dashboard/classify",children:e.jsx(M,{variant:"outline",size:"sm",className:"mt-3",children:"Start Classifying"})})]}):e.jsx("ul",{className:"divide-y divide-slate-700",children:r.map(u=>e.jsx("li",{className:"p-4 hover:bg-slate-700/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:u.product_description}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Q,{variant:"secondary",className:"bg-emerald-500/20 text-emerald-400",children:u.hs_code}),e.jsxs("span",{className:"text-xs text-slate-500",children:[Math.round(u.confidence_score*100),"% confidence"]})]})]}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),new Date(u.created_at).toLocaleDateString()]})]})},u.id))})})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Popular Product Searches"}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-0",children:e.jsx("ul",{className:"divide-y divide-slate-700",children:c.map((u,h)=>e.jsx("li",{className:"p-4 hover:bg-slate-700/50",children:e.jsxs(pe,{to:`/hs-code/dashboard/classify?q=${encodeURIComponent(u.query)}`,className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:u.query}),e.jsxs("p",{className:"text-xs text-slate-500",children:["Chapter ",u.chapter]})]}),e.jsx(Q,{variant:"outline",className:"border-slate-600 text-slate-400",children:u.code})]})},h))})})})]})]}),e.jsxs("div",{className:"mt-8 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx($,{className:"bg-gradient-to-br from-emerald-900/50 to-slate-800 border-emerald-800/50",children:e.jsxs(X,{children:[e.jsx(ee,{className:"text-emerald-400 text-lg",children:"AI Classification"}),e.jsx(ue,{className:"text-slate-400",children:"Describe your product in plain language and our AI will determine the correct HS code using GRI rules and binding rulings."})]})}),e.jsx($,{className:"bg-gradient-to-br from-blue-900/50 to-slate-800 border-blue-800/50",children:e.jsxs(X,{children:[e.jsx(ee,{className:"text-blue-400 text-lg",children:"100+ Countries"}),e.jsx(ue,{className:"text-slate-400",children:"Access tariff schedules for US, EU, UK, China, Japan, India, and more. Calculate duties with country-specific rates."})]})}),e.jsx($,{className:"bg-gradient-to-br from-purple-900/50 to-slate-800 border-purple-800/50",children:e.jsxs(X,{children:[e.jsx(ee,{className:"text-purple-400 text-lg",children:"FTA Savings"}),e.jsx(ue,{className:"text-slate-400",children:"Check eligibility for USMCA, RCEP, CPTPP, and other trade agreements. See rules of origin and calculate potential savings."})]})})]})]})]})}const cM="",dM=[{code:"US",name:"United States"},{code:"EU",name:"European Union"},{code:"UK",name:"United Kingdom"},{code:"CN",name:"China"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"AU",name:"Australia"},{code:"SG",name:"Singapore"},{code:"CA",name:"Canada"},{code:"MX",name:"Mexico"},{code:"BD",name:"Bangladesh"},{code:"VN",name:"Vietnam"},{code:"KR",name:"South Korea"}];function pbe(){const[t]=zs(),{session:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(t.get("q")||""),[i,l]=m.useState("US"),[o,d]=m.useState(""),[c,u]=m.useState(!1),[h,x]=m.useState(null),[g,j]=m.useState(!1);m.useEffect(()=>{const _=t.get("q");_&&n(_)},[t]);const y=async()=>{if(!r.trim()){a({title:"Error",description:"Please enter a product description",variant:"destructive"});return}u(!0),x(null),j(!1);try{const _=await fetch(`${cM}/hs-code/classify`,{method:"POST",headers:{"Content-Type":"application/json",...s?.access_token&&{Authorization:`Bearer ${s.access_token}`}},body:JSON.stringify({description:r,import_country:i,export_country:o&&o!=="none"?o:void 0})});if(!_.ok)throw new Error("Classification failed");const A=await _.json();x(A)}catch{a({title:"Classification Failed",description:"Unable to classify product. Please try again.",variant:"destructive"})}finally{u(!1)}},b=async()=>{if(!(!s?.access_token||!h))try{(await fetch(`${cM}/hs-code/save`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({product_description:r,hs_code:h.hs_code,import_country:i,export_country:o&&o!=="none"?o:void 0})})).ok&&(j(!0),a({title:"Saved",description:"Classification saved to your history"}))}catch{a({title:"Error",description:"Failed to save classification",variant:"destructive"})}},N=_=>{navigator.clipboard.writeText(_),a({title:"Copied to clipboard"})},C=_=>_>=.9?"text-emerald-400 bg-emerald-500/20":_>=.7?"text-amber-400 bg-amber-500/20":"text-red-400 bg-red-500/20";return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-emerald-400"}),"Classify Product"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Describe your product in plain language and get AI-powered classification"})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(ni,{className:"h-5 w-5 text-emerald-400"}),"Product Description"]}),e.jsx(ue,{children:"Describe your product in detail. Include material, use, dimensions, and characteristics."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"description",children:"Product Description"}),e.jsx(Zt,{id:"description",value:r,onChange:_=>n(_.target.value),placeholder:"e.g., Men's cotton t-shirts, short-sleeved, knitted, 100% cotton, for casual wear",className:"mt-1 h-32 bg-slate-900 border-slate-700 text-white placeholder:text-slate-500"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Import Country"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:dM.map(_=>e.jsx(K,{value:_.code,children:_.name},_.code))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Export Country (Optional)"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{placeholder:"Select origin"})}),e.jsxs(De,{children:[e.jsx(K,{value:"none",children:"Not specified"}),dM.map(_=>e.jsx(K,{value:_.code,children:_.name},_.code))]})]})]})]}),e.jsx(M,{onClick:y,disabled:c||!r.trim(),className:"w-full bg-emerald-600 hover:bg-emerald-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Classifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Classify Product"]})})]})]}),h&&e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"text-white",children:"Classification Result"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>N(h.hs_code),children:[e.jsx(qa,{className:"h-4 w-4 mr-1"}),"Copy Code"]}),s?.access_token&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:b,disabled:g,children:[e.jsx(nl,{className:Le("h-4 w-4 mr-1",g&&"fill-amber-400 text-amber-400")}),g?"Saved":"Save"]})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between p-4 bg-slate-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"HS Code"}),e.jsx("p",{className:"text-3xl font-bold text-emerald-400",children:h.hs_code}),e.jsx("p",{className:"text-sm text-slate-300 mt-1",children:h.description})]}),e.jsxs(Q,{className:Le("px-3 py-1",C(h.confidence)),children:[Math.round(h.confidence*100),"% confidence"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Classification Hierarchy"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Chapter:"}),e.jsx("span",{className:"text-white",children:h.chapter})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Heading:"}),e.jsx("span",{className:"text-white",children:h.heading})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"Subheading:"}),e.jsx("span",{className:"text-white",children:h.subheading})]})]})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-400 mb-2 flex items-center gap-1",children:[e.jsx(Ja,{className:"h-4 w-4"}),"Classification Reasoning"]}),e.jsx("p",{className:"text-sm text-slate-300 bg-slate-900 p-3 rounded-lg",children:h.ai_reasoning})]}),h.duty_rates&&Object.keys(h.duty_rates).length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Duty Rates"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(h.duty_rates).map(([_,A])=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900 rounded",children:[e.jsx("span",{className:"text-sm text-slate-400 uppercase",children:_}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[A,"%"]})]},_))})]}),h.fta_options&&h.fta_options.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Available Trade Agreements"}),e.jsx("div",{className:"space-y-2",children:h.fta_options.map(_=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:_.code}),e.jsx("p",{className:"text-sm text-slate-400",children:_.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-emerald-400",children:[_.preferential_rate,"% rate"]}),_.savings_percent>0&&e.jsxs("p",{className:"text-xs text-slate-500",children:["Save ",_.savings_percent,"%"]})]})]},_.code))})]}),h.restrictions&&h.restrictions.length>0&&e.jsxs("div",{children:[e.jsxs("p",{className:"text-sm font-medium text-slate-400 mb-2 flex items-center gap-1",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-400"}),"Import Restrictions"]}),e.jsx("ul",{className:"space-y-1",children:h.restrictions.map((_,A)=>e.jsx("li",{className:"text-sm text-amber-400 bg-amber-500/10 p-2 rounded",children:_},A))})]}),h.alternatives&&h.alternatives.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Alternative Classifications"}),e.jsx("div",{className:"space-y-2",children:h.alternatives.map((_,A)=>e.jsxs("div",{className:"flex items-center justify-between p-2 bg-slate-900 rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium text-white",children:_.code}),e.jsx("span",{className:"text-sm text-slate-400 ml-2",children:_.description})]}),e.jsxs(Q,{variant:"outline",className:"text-xs",children:[Math.round((_.score||.5)*100),"%"]})]},A))})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-base",children:"Tips for Better Results"})}),e.jsx(U,{children:e.jsxs("ul",{className:"space-y-3 text-sm text-slate-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsxs("span",{children:["Include the ",e.jsx("strong",{className:"text-white",children:"material composition"})," (e.g., 100% cotton, polyester blend)"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsxs("span",{children:["Specify the ",e.jsx("strong",{className:"text-white",children:"intended use"})," (e.g., for children, industrial use)"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsxs("span",{children:["Mention if the product is ",e.jsx("strong",{className:"text-white",children:"finished or unfinished"})]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsxs("span",{children:["Include ",e.jsx("strong",{className:"text-white",children:"dimensions or weight"})," if relevant"]})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsxs("span",{children:["Specify ",e.jsx("strong",{className:"text-white",children:"brand names"})," for known products"]})]})]})})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-base",children:"GRI Rules Applied"})}),e.jsx(U,{children:e.jsxs("ul",{className:"space-y-2 text-sm text-slate-400",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-400 font-semibold",children:"GRI 1:"}),e.jsx("span",{children:"Terms of headings and Chapter Notes"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-400 font-semibold",children:"GRI 2:"}),e.jsx("span",{children:"Unfinished goods and mixtures"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-400 font-semibold",children:"GRI 3:"}),e.jsx("span",{children:"Most specific description prevails"})]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-emerald-400 font-semibold",children:"GRI 6:"}),e.jsx("span",{children:"Subheading classification"})]})]})})]})]})]})})]})}var x_="Tabs",[fbe,EJe]=Vr(x_,[Ch]),fK=Ch(),[gbe,DT]=fbe(x_),gK=m.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,onValueChange:n,defaultValue:i,orientation:l="horizontal",dir:o,activationMode:d="automatic",...c}=t,u=Ru(o),[h,x]=Hn({prop:r,onChange:n,defaultProp:i??"",caller:x_});return e.jsx(gbe,{scope:a,baseId:En(),value:h,onValueChange:x,orientation:l,dir:u,activationMode:d,children:e.jsx(Pt.div,{dir:u,"data-orientation":l,...c,ref:s})})});gK.displayName=x_;var vK="TabsList",jK=m.forwardRef((t,s)=>{const{__scopeTabs:a,loop:r=!0,...n}=t,i=DT(vK,a),l=fK(a);return e.jsx(r_,{asChild:!0,...l,orientation:i.orientation,dir:i.dir,loop:r,children:e.jsx(Pt.div,{role:"tablist","aria-orientation":i.orientation,...n,ref:s})})});jK.displayName=vK;var bK="TabsTrigger",yK=m.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,disabled:n=!1,...i}=t,l=DT(bK,a),o=fK(a),d=_K(l.baseId,r),c=CK(l.baseId,r),u=r===l.value;return e.jsx(n_,{asChild:!0,...o,focusable:!n,active:u,children:e.jsx(Pt.button,{type:"button",role:"tab","aria-selected":u,"aria-controls":c,"data-state":u?"active":"inactive","data-disabled":n?"":void 0,disabled:n,id:d,...i,ref:s,onMouseDown:gt(t.onMouseDown,h=>{!n&&h.button===0&&h.ctrlKey===!1?l.onValueChange(r):h.preventDefault()}),onKeyDown:gt(t.onKeyDown,h=>{[" ","Enter"].includes(h.key)&&l.onValueChange(r)}),onFocus:gt(t.onFocus,()=>{const h=l.activationMode!=="manual";!u&&!n&&h&&l.onValueChange(r)})})})});yK.displayName=bK;var NK="TabsContent",wK=m.forwardRef((t,s)=>{const{__scopeTabs:a,value:r,forceMount:n,children:i,...l}=t,o=DT(NK,a),d=_K(o.baseId,r),c=CK(o.baseId,r),u=r===o.value,h=m.useRef(u);return m.useEffect(()=>{const x=requestAnimationFrame(()=>h.current=!1);return()=>cancelAnimationFrame(x)},[]),e.jsx(jn,{present:n||u,children:({present:x})=>e.jsx(Pt.div,{"data-state":u?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":d,hidden:!x,id:c,tabIndex:0,...l,ref:s,style:{...t.style,animationDuration:h.current?"0s":void 0},children:x&&i})})});wK.displayName=NK;function _K(t,s){return`${t}-trigger-${s}`}function CK(t,s){return`${t}-content-${s}`}var vbe=gK,SK=jK,kK=yK,EK=wK;function TT(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Os=vbe,Fs=m.forwardRef(({className:t,...s},a)=>e.jsx(SK,{ref:a,className:TT("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",t),...s}));Fs.displayName=SK.displayName;const He=m.forwardRef(({className:t,...s},a)=>e.jsx(kK,{ref:a,className:TT("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",t),...s}));He.displayName=kK.displayName;const Qe=m.forwardRef(({className:t,...s},a)=>e.jsx(EK,{ref:a,className:TT("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",t),...s}));Qe.displayName=EK.displayName;const jbe="";function bbe(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState("US"),[i,l]=m.useState(!1),[o,d]=m.useState([]),c=async()=>{if(s.trim()){l(!0);try{const u=await fetch(`${jbe}/hs-code/search?q=${encodeURIComponent(s)}&country=${r}&limit=50`);if(u.ok){const h=await u.json();d(h.results||[])}}catch{t({title:"Error",description:"Failed to search HS codes",variant:"destructive"})}finally{l(!1)}}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-emerald-400"}),"Search HS Codes"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Browse and search the tariff schedule by code or description"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx($,{className:"bg-slate-800 border-slate-700 mb-6",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(oe,{value:s,onChange:u=>a(u.target.value),onKeyDown:u=>u.key==="Enter"&&c(),placeholder:"Enter HS code or description (e.g., 8471 or laptop)",className:"bg-slate-900 border-slate-700"})}),e.jsxs(Te,{value:r,onValueChange:n,children:[e.jsx(Pe,{className:"w-40 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"US",children:"United States"}),e.jsx(K,{value:"EU",children:"European Union"}),e.jsx(K,{value:"UK",children:"United Kingdom"}),e.jsx(K,{value:"CN",children:"China"})]})]}),e.jsxs(M,{onClick:c,disabled:i,className:"bg-emerald-600",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Search"]})]})})}),o.length>0?e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white text-lg",children:["Found ",o.length," results"]})}),e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-slate-700",children:o.map(u=>e.jsxs("div",{className:"p-4 hover:bg-slate-700/50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400",children:u.code}),u.mfn_rate!==void 0&&e.jsxs(Q,{variant:"outline",className:"border-slate-600 text-slate-400",children:["MFN: ",u.mfn_rate,"%"]})]}),e.jsx("p",{className:"text-sm text-white mt-2",children:u.description}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:u.chapter})]}),e.jsx(pe,{to:`/hs-code/dashboard/duty?code=${u.code}`,children:e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Jt,{className:"h-4 w-4"})})})]},u.code))})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ps,{className:"h-12 w-12 mx-auto text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Search for HS codes by entering a code number or product description"})]})]})]})}const ybe="",uM=[{code:"US",name:"United States"},{code:"EU",name:"European Union"},{code:"UK",name:"United Kingdom"},{code:"CN",name:"China"},{code:"JP",name:"Japan"},{code:"IN",name:"India"},{code:"CA",name:"Canada"},{code:"MX",name:"Mexico"}];function Nbe(){const[t]=zs(),{toast:s}=et(),[a,r]=m.useState(t.get("code")||""),[n,i]=m.useState("10000"),[l,o]=m.useState("US"),[d,c]=m.useState(""),[u,h]=m.useState(""),[x,g]=m.useState(!1),[j,y]=m.useState(null),b=async()=>{if(!a.trim()||!n){s({title:"Error",description:"Please enter HS code and product value",variant:"destructive"});return}g(!0);try{const N=await fetch(`${ybe}/hs-code/calculate-duty`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({hs_code:a,import_country:l,export_country:d&&d!=="none"?d:void 0,product_value:parseFloat(n),fta_code:u||void 0})});if(N.ok){const C=await N.json();y(C)}else throw new Error("Calculation failed")}catch{s({title:"Error",description:"Failed to calculate duties",variant:"destructive"})}finally{g(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(kc,{className:"h-5 w-5 text-emerald-400"}),"Duty Calculator"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Calculate import duties and landed costs for any HS code"})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Calculate Duties"}),e.jsx(ue,{children:"Enter product details to calculate import costs"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"HS Code"}),e.jsx(oe,{value:a,onChange:N=>r(N.target.value),placeholder:"e.g., 6109.10.0004",className:"mt-1 bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Product Value (USD)"}),e.jsx(oe,{type:"number",value:n,onChange:N=>i(N.target.value),placeholder:"10000",className:"mt-1 bg-slate-900 border-slate-700"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Import To"}),e.jsxs(Te,{value:l,onValueChange:o,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:uM.map(N=>e.jsx(K,{value:N.code,children:N.name},N.code))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Export From"}),e.jsxs(Te,{value:d,onValueChange:c,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{placeholder:"Select origin"})}),e.jsxs(De,{children:[e.jsx(K,{value:"none",children:"Not specified"}),uM.map(N=>e.jsx(K,{value:N.code,children:N.name},N.code))]})]})]})]}),e.jsxs(M,{onClick:b,disabled:x,className:"w-full bg-emerald-600",children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Calculate Duties"]})]})]}),j?e.jsxs("div",{className:"space-y-4",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Duty Calculation"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 rounded-lg",children:[e.jsx("span",{className:"text-slate-400",children:"Rate Type"}),e.jsx("span",{className:"font-semibold text-white",children:j.duty_calculation.rate_type})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-900 rounded-lg",children:[e.jsx("span",{className:"text-slate-400",children:"Duty Rate"}),e.jsxs("span",{className:"font-semibold text-white",children:[j.duty_calculation.rate_percent,"%"]})]}),j.duty_calculation.section_301_rate&&j.duty_calculation.section_301_rate>0&&e.jsxs("div",{className:"flex items-center justify-between p-3 bg-red-900/30 rounded-lg border border-red-800/50",children:[e.jsx("span",{className:"text-red-400",children:"Section 301 Rate"}),e.jsxs("span",{className:"font-semibold text-red-400",children:["+",j.duty_calculation.section_301_rate,"%"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-emerald-900/30 rounded-lg border border-emerald-800/50",children:[e.jsx("span",{className:"text-emerald-400",children:"Total Duty"}),e.jsxs("span",{className:"font-bold text-emerald-400 text-xl",children:["$",j.duty_calculation.total_duty.toLocaleString()]})]})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Landed Cost Estimate"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Product Value"}),e.jsxs("span",{className:"text-white",children:["$",j.landed_cost_estimate.product_value.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Freight (Est.)"}),e.jsxs("span",{className:"text-white",children:["$",j.landed_cost_estimate.freight.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Insurance (Est.)"}),e.jsxs("span",{className:"text-white",children:["$",j.landed_cost_estimate.insurance.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm border-t border-slate-700 pt-2",children:[e.jsx("span",{className:"text-slate-400",children:"CIF Value"}),e.jsxs("span",{className:"text-white",children:["$",j.landed_cost_estimate.cif_value.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Import Duty"}),e.jsxs("span",{className:"text-white",children:["$",j.landed_cost_estimate.duty.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between border-t border-slate-700 pt-2",children:[e.jsx("span",{className:"text-white font-semibold",children:"Total Landed Cost"}),e.jsxs("span",{className:"text-emerald-400 font-bold text-lg",children:["$",j.landed_cost_estimate.total.toLocaleString()]})]})]})]}),j.mfn_comparison.savings>0&&e.jsx($,{className:"bg-gradient-to-r from-emerald-900/30 to-slate-800 border-emerald-800/50",children:e.jsxs(U,{className:"p-4 flex items-center gap-4",children:[e.jsx(lr,{className:"h-8 w-8 text-emerald-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Potential Savings with FTA"}),e.jsxs("p",{className:"text-xl font-bold text-emerald-400",children:["$",j.mfn_comparison.savings.toLocaleString()]})]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Na,{className:"h-12 w-12 mx-auto text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Enter an HS code and value to calculate duties"})]})})]})})]})}const mM="",hM=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"MX",name:"Mexico"},{code:"CN",name:"China"},{code:"JP",name:"Japan"},{code:"KR",name:"South Korea"},{code:"VN",name:"Vietnam"},{code:"IN",name:"India"},{code:"AU",name:"Australia"},{code:"SG",name:"Singapore"},{code:"BD",name:"Bangladesh"},{code:"UK",name:"United Kingdom"}];function wbe(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState("US"),[i,l]=m.useState("CN"),[o,d]=m.useState(!1),[c,u]=m.useState([]),[h,x]=m.useState([]);m.useEffect(()=>{g()},[]);const g=async()=>{try{const y=await fetch(`${mM}/hs-code/ftas`);if(y.ok){const b=await y.json();x(b.ftas||[])}}catch(y){console.error("Failed to fetch FTAs:",y)}},j=async()=>{if(!s.trim()||!r||!i){t({title:"Error",description:"Please enter HS code and select countries",variant:"destructive"});return}d(!0);try{const y=await fetch(`${mM}/hs-code/fta-check?hs_code=${s}&import_country=${r}&export_country=${i}`);if(y.ok){const b=await y.json();u(b.eligible_ftas||[])}}catch{t({title:"Error",description:"Failed to check FTA eligibility",variant:"destructive"})}finally{d(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-emerald-400"}),"FTA Eligibility"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Check Free Trade Agreement eligibility and rules of origin"})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Check Eligibility"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"HS Code"}),e.jsx(oe,{value:s,onChange:y=>a(y.target.value),placeholder:"e.g., 6109.10",className:"mt-1 bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Import To"}),e.jsxs(Te,{value:r,onValueChange:n,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:hM.map(y=>e.jsx(K,{value:y.code,children:y.name},y.code))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Export From"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"mt-1 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:hM.map(y=>e.jsx(K,{value:y.code,children:y.name},y.code))})]})]}),e.jsxs(M,{onClick:j,disabled:o,className:"w-full bg-emerald-600",children:[e.jsx(ha,{className:"h-4 w-4 mr-2"}),"Check FTA Eligibility"]})]})]}),e.jsx("div",{className:"lg:col-span-2",children:c.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Found ",c.length," Eligible Trade Agreement",c.length!==1?"s":""]}),c.map(y=>e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-white",children:y.fta_code}),e.jsx(ue,{children:y.fta_name})]}),y.savings_percent>0&&e.jsxs(Q,{className:"bg-emerald-500/20 text-emerald-400",children:[e.jsx(lr,{className:"h-3 w-3 mr-1"}),"Save ",y.savings_percent,"%"]})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg",children:[e.jsx("p",{className:"text-xs text-slate-400",children:"MFN Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-white",children:[y.mfn_rate,"%"]})]}),e.jsxs("div",{className:"p-3 bg-emerald-900/30 rounded-lg border border-emerald-800/50",children:[e.jsx("p",{className:"text-xs text-emerald-400",children:"Preferential Rate"}),e.jsxs("p",{className:"text-lg font-semibold text-emerald-400",children:[y.preferential_rate,"%"]})]})]}),y.rules_of_origin&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Rules of Origin"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsx("span",{className:"text-slate-300",children:y.rules_of_origin.requirement})]}),y.rules_of_origin.rvc_threshold&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-emerald-400 mt-0.5"}),e.jsx("span",{className:"text-slate-300",children:y.rules_of_origin.rvc_threshold})]})]})]}),y.documentation&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-slate-400 mb-2",children:"Required Documentation"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:y.documentation.map((b,N)=>e.jsxs(Q,{variant:"outline",className:"border-slate-600 text-slate-300",children:[e.jsx(Be,{className:"h-3 w-3 mr-1"}),b]},N))})]})]})]},y.fta_code))]}):e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ha,{className:"h-12 w-12 mx-auto text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Enter an HS code and trade lane to check FTA eligibility"})]})})})]})})]})}function _be(){const t=[{type:"CTC - Change in Tariff Classification",description:"Product must undergo a change in tariff classification at the chapter (CC), heading (CTH), or subheading (CTSH) level.",examples:["CC: Change from any other chapter","CTH: Change from any other heading","CTSH: Change from any other subheading"]},{type:"RVC - Regional Value Content",description:"A minimum percentage of the product's value must originate from FTA member countries.",examples:["Build-down: (AV - VNM) / AV Ã— 100","Build-up: VOM / AV Ã— 100","Net cost: (NC - VNM) / NC Ã— 100"]},{type:"SP - Specific Process",description:"Product must undergo specific manufacturing processes within the FTA territory.",examples:["Chemical reaction","Purification","Assembly operations"]}],s=[{type:"Bilateral",description:"Materials from two partner countries can be combined."},{type:"Diagonal",description:"Materials from any FTA member can be used without affecting origin."},{type:"Full",description:"Any processing in member countries contributes to origin requirements."}];return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-emerald-400"}),"Rules of Origin Reference"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Understanding origin requirements for preferential trade"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8 space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Types of Origin Rules"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:t.map(a=>e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white text-base",children:a.type.split(" - ")[0]}),e.jsx(ue,{children:a.type.split(" - ")[1]})]}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:a.description}),e.jsx("div",{className:"space-y-1",children:a.examples.map((r,n)=>e.jsx("div",{className:"text-xs text-slate-500 font-mono bg-slate-900 px-2 py-1 rounded",children:r},n))})]})]},a.type))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Cumulation Types"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:s.map(a=>e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"p-4",children:[e.jsx(Q,{className:"bg-purple-500/20 text-purple-400 mb-2",children:a.type}),e.jsx("p",{className:"text-sm text-slate-400",children:a.description})]})},a.type))})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-400"}),"De Minimis Rule"]})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-slate-400 mb-4",children:"The de minimis rule allows a small percentage of non-originating materials without disqualifying the product from preferential treatment."}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"USMCA"}),e.jsx("p",{className:"text-lg font-bold text-white",children:"10%"})]}),e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"RCEP"}),e.jsx("p",{className:"text-lg font-bold text-white",children:"10%"})]}),e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"CPTPP"}),e.jsx("p",{className:"text-lg font-bold text-white",children:"10%"})]}),e.jsxs("div",{className:"p-3 bg-slate-900 rounded-lg text-center",children:[e.jsx("p",{className:"text-xs text-slate-500",children:"GSP"}),e.jsx("p",{className:"text-lg font-bold text-white",children:"35%"})]})]})]})]})]})]})}function Cbe(){const t=[{title:"Import Licenses",description:"Certain products require import licenses from regulatory agencies.",examples:["Firearms (ATF)","Pharmaceuticals (FDA)","Alcohol/Tobacco (TTB)","Wildlife (USFWS)"],icon:Be,color:"text-blue-400"},{title:"Quotas",description:"Some products are subject to import quotas limiting the quantity.",examples:["Textiles (certain countries)","Agricultural products","Steel/Aluminum (232)"],icon:El,color:"text-purple-400"},{title:"Sanctions",description:"Trade restrictions on certain countries, entities, or individuals.",examples:["OFAC Sanctions","Entity List","Country-specific restrictions"],icon:Ve,color:"text-red-400"},{title:"Product Standards",description:"Products must meet safety and labeling requirements.",examples:["CPSC (consumer products)","DOT (transportation)","EPA (environmental)"],icon:Oe,color:"text-emerald-400"}];return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(El,{className:"h-5 w-5 text-emerald-400"}),"Compliance Check"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Import compliance requirements and restrictions"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(s=>e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(s.icon,{className:`h-5 w-5 ${s.color}`}),s.title]}),e.jsx(ue,{children:s.description})]}),e.jsx(U,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:s.examples.map((a,r)=>e.jsx(Q,{variant:"outline",className:"border-slate-600 text-slate-300",children:a},r))})})]},s.title))}),e.jsx($,{className:"bg-amber-900/20 border-amber-800/50 mt-8",children:e.jsxs(U,{className:"p-4 flex items-start gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-amber-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-amber-400",children:"Disclaimer"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"This information is for reference only. Always verify compliance requirements with official government sources and consult with a licensed customs broker for specific import requirements."})]})]})})]})]})}const xM="";function Sbe(){const{session:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(0);m.useEffect(()=>{t?.access_token&&d()},[t?.access_token]);const d=async()=>{try{const h=await fetch(`${xM}/hs-code/history?limit=100`,{headers:{Authorization:`Bearer ${t?.access_token}`}});if(h.ok){const x=await h.json();r(x.classifications||[]),o(x.total||0)}}catch(h){console.error("Failed to fetch history:",h)}finally{i(!1)}},c=async h=>{try{(await fetch(`${xM}/hs-code/history/${h}`,{method:"DELETE",headers:{Authorization:`Bearer ${t?.access_token}`}})).ok&&(r(g=>g.filter(j=>j.id!==h)),s({title:"Deleted",description:"Classification removed from history"}))}catch{s({title:"Error",description:"Failed to delete",variant:"destructive"})}},u=h=>h>=.9?"bg-emerald-500/20 text-emerald-400":h>=.7?"bg-amber-500/20 text-amber-400":"bg-red-500/20 text-red-400";return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5 text-emerald-400"}),"My Classifications"]}),e.jsxs("p",{className:"text-sm text-slate-400",children:["View and manage your classification history (",l," total)"]})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:n?e.jsx("div",{className:"text-center py-12",children:e.jsx("p",{className:"text-slate-400",children:"Loading history..."})}):a.length===0?e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"py-12 text-center",children:[e.jsx(Ps,{className:"h-12 w-12 mx-auto text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No classifications yet"}),e.jsx(pe,{to:"/hs-code/dashboard/classify",children:e.jsxs(M,{className:"bg-emerald-600",children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Start Classifying"]})})]})}):e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"divide-y divide-slate-700",children:a.map(h=>e.jsx("div",{className:"p-4 hover:bg-slate-700/50",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400",children:h.hs_code}),e.jsxs(Q,{className:Le("text-xs",u(h.confidence_score)),children:[Math.round(h.confidence_score*100),"%"]}),h.is_verified&&e.jsxs(Q,{variant:"outline",className:"border-blue-500 text-blue-400",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),"Verified"]})]}),e.jsx("p",{className:"text-sm text-white font-medium truncate",children:h.product_description}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[h.import_country," â€¢ ",new Date(h.created_at).toLocaleDateString()]})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>c(h.id),className:"text-slate-400 hover:text-red-400",children:e.jsx(ia,{className:"h-4 w-4"})})]})},h.id))})})})})]})}function kbe(){return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(nl,{className:"h-5 w-5 text-amber-400"}),"Favorite HS Codes"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Quick access to your frequently used HS codes"})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"py-12 text-center",children:[e.jsx(nl,{className:"h-12 w-12 mx-auto text-slate-600 mb-4"}),e.jsx("p",{className:"text-slate-400 mb-2",children:"No favorites yet"}),e.jsx("p",{className:"text-sm text-slate-500",children:"Star classifications to add them to your favorites for quick access"})]})})})]})}function Ebe(){const{token:t}=Dt(),{toast:s}=et(),[a,r]=m.useState(!1),[n,i]=m.useState(null),[l,o]=m.useState(!1),[d,c]=m.useState(0),[u,h]=m.useState(null),x=m.useCallback(_=>{_.preventDefault(),r(!0)},[]),g=m.useCallback(_=>{_.preventDefault(),r(!1)},[]),j=m.useCallback(_=>{_.preventDefault(),r(!1);const A=_.dataTransfer.files[0];A?.name.endsWith(".csv")?(i(A),h(null)):s({title:"Invalid file",description:"Please upload a CSV file",variant:"destructive"})},[s]),y=m.useCallback(_=>{const A=_.target.files?.[0];A?.name.endsWith(".csv")?(i(A),h(null)):s({title:"Invalid file",description:"Please upload a CSV file",variant:"destructive"})},[s]),b=async()=>{try{const _=await fetch("/api/hs-code/bulk-classify/download-template");if(!_.ok)throw new Error("Failed to download template");const A=await _.blob(),k=window.URL.createObjectURL(A),E=document.createElement("a");E.href=k,E.download="bulk_classification_template.csv",document.body.appendChild(E),E.click(),document.body.removeChild(E),window.URL.revokeObjectURL(k)}catch{s({title:"Download failed",description:"Could not download template",variant:"destructive"})}},N=async()=>{if(!n||!t){s({title:"Authentication required",description:"Please sign in to use bulk classification",variant:"destructive"});return}o(!0),c(10);try{const _=new FormData;_.append("file",n);const A=setInterval(()=>{c(D=>Math.min(D+10,90))},500),k=await fetch("/api/hs-code/bulk-classify/upload?include_fta=true",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:_});if(clearInterval(A),c(100),!k.ok){const D=await k.json();throw new Error(D.detail||"Processing failed")}const E=await k.json();h(E),s({title:"Processing complete",description:`Classified ${E.successful} of ${E.total_items} products`})}catch(_){s({title:"Processing failed",description:_ instanceof Error?_.message:"Unknown error",variant:"destructive"})}finally{o(!1),c(0)}},C=async _=>{if(!(!u||!t))try{const A=await fetch(`/api/hs-code/bulk-classify/export/latest?format=${_}`,{headers:{Authorization:`Bearer ${t}`}});if(!A.ok)throw new Error("Export failed");if(_==="csv"){const k=await A.blob(),E=window.URL.createObjectURL(k),D=document.createElement("a");D.href=E,D.download=`classifications_${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(D),D.click(),document.body.removeChild(D),window.URL.revokeObjectURL(E)}else{const k=await A.json(),E=new Blob([JSON.stringify(k,null,2)],{type:"application/json"}),D=window.URL.createObjectURL(E),R=document.createElement("a");R.href=D,R.download=`classifications_${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(R),R.click(),document.body.removeChild(R),window.URL.revokeObjectURL(D)}}catch{s({title:"Export failed",description:"Could not export results",variant:"destructive"})}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Hs,{className:"h-5 w-5 text-emerald-400"}),"Bulk Classification"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Classify multiple products at once using CSV upload"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Upload Products"}),e.jsx(ue,{children:"Upload a CSV file with product descriptions (max 500 rows)"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors cursor-pointer ${a?"border-emerald-500 bg-emerald-500/10":"border-slate-600 hover:border-emerald-500"}`,onDragOver:x,onDragLeave:g,onDrop:j,onClick:()=>document.getElementById("file-input")?.click(),children:[e.jsx("input",{id:"file-input",type:"file",accept:".csv",onChange:y,className:"hidden"}),n?e.jsxs(e.Fragment,{children:[e.jsx(zm,{className:"h-10 w-10 mx-auto text-emerald-400 mb-3"}),e.jsx("p",{className:"text-white font-medium",children:n.name}),e.jsxs("p",{className:"text-sm text-slate-400 mt-1",children:[(n.size/1024).toFixed(1)," KB"]}),e.jsx(M,{variant:"ghost",size:"sm",className:"mt-2 text-slate-400",onClick:_=>{_.stopPropagation(),i(null),h(null)},children:"Change file"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-10 w-10 mx-auto text-slate-500 mb-3"}),e.jsx("p",{className:"text-slate-400",children:"Drag and drop your CSV file here"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"or click to browse"}),e.jsxs(Q,{variant:"outline",className:"mt-3 border-slate-600",children:[e.jsx(zm,{className:"h-3 w-3 mr-1"}),"CSV up to 500 rows"]})]})]}),l&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-slate-400",children:"Processing..."}),e.jsxs("span",{className:"text-emerald-400",children:[d,"%"]})]}),e.jsx(es,{value:d,className:"h-2"})]}),e.jsx(M,{className:"w-full bg-emerald-600 hover:bg-emerald-700",disabled:!n||l,onClick:N,children:l?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jt,{className:"h-4 w-4 mr-2"}),"Process File"]})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-base",children:"Template Format"})}),e.jsxs(U,{children:[e.jsxs("div",{className:"font-mono text-xs bg-slate-900 p-3 rounded overflow-x-auto",children:[e.jsx("p",{className:"text-slate-500",children:"# Required columns:"}),e.jsx("p",{className:"text-emerald-400",children:"description, import_country, export_country, product_value"}),e.jsx("p",{className:"text-slate-400 mt-2",children:'"Cotton t-shirts",US,CN,10000'}),e.jsx("p",{className:"text-slate-400",children:'"Laptop computers",US,TW,50000'}),e.jsx("p",{className:"text-slate-400",children:'"Fresh organic apples",US,NZ,5000'})]}),e.jsxs(M,{variant:"outline",size:"sm",className:"mt-3",onClick:b,children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Download Template"]})]})]}),e.jsx($,{className:"bg-blue-900/20 border-blue-800/50",children:e.jsxs(U,{className:"p-4 flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-slate-400",children:[e.jsx("p",{className:"font-medium text-blue-400 mb-1",children:"Bulk Classification Features"}),e.jsxs("ul",{className:"space-y-1",children:[e.jsx("li",{children:"â€¢ AI-powered classification for each product"}),e.jsx("li",{children:"â€¢ MFN duty rates with Section 301 rates"}),e.jsx("li",{children:"â€¢ FTA eligibility identification"}),e.jsx("li",{children:"â€¢ Export results as CSV or JSON"})]})]})]})})]})]}),u&&e.jsxs($,{className:"mt-8 bg-slate-800 border-slate-700",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-white",children:"Classification Results"}),e.jsxs(ue,{children:["Processed in ",u.processing_time_seconds,"s"]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>C("csv"),children:[e.jsx(zm,{className:"h-4 w-4 mr-2"}),"Export CSV"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>C("json"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Export JSON"]})]})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:u.total_items}),e.jsx("div",{className:"text-sm text-slate-400",children:"Total Items"})]}),e.jsxs("div",{className:"bg-emerald-900/30 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-400",children:u.successful}),e.jsx("div",{className:"text-sm text-slate-400",children:"Classified"})]}),e.jsxs("div",{className:"bg-red-900/30 p-4 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:u.failed}),e.jsx("div",{className:"text-sm text-slate-400",children:"Failed"})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-slate-700",children:[e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"#"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"Product"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"HS Code"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"Confidence"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"MFN Rate"}),e.jsx("th",{className:"text-left py-2 px-3 text-slate-400",children:"FTAs"})]})}),e.jsx("tbody",{children:u.results.map((_,A)=>e.jsxs("tr",{className:"border-b border-slate-800",children:[e.jsx("td",{className:"py-2 px-3 text-slate-500",children:_.row_id}),e.jsxs("td",{className:"py-2 px-3",children:[e.jsxs("div",{className:"text-white",children:[_.description.substring(0,40),"..."]}),e.jsx("div",{className:"text-xs text-slate-500",children:_.hs_description?.substring(0,50)})]}),e.jsx("td",{className:"py-2 px-3",children:e.jsx(Q,{variant:"outline",className:"font-mono",children:_.hs_code})}),e.jsx("td",{className:"py-2 px-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[_.confidence>=.8?e.jsx(Qs,{className:"h-4 w-4 text-emerald-400"}):e.jsx("span",{className:"h-4 w-4 rounded-full bg-yellow-500/20 border border-yellow-500"}),e.jsxs("span",{className:_.confidence>=.8?"text-emerald-400":"text-yellow-400",children:[(_.confidence*100).toFixed(0),"%"]})]})}),e.jsxs("td",{className:"py-2 px-3 text-white",children:[_.mfn_rate,"%"]}),e.jsx("td",{className:"py-2 px-3",children:_.fta_options&&_.fta_options.length>0?e.jsxs("div",{className:"flex gap-1 flex-wrap",children:[_.fta_options.slice(0,2).map(k=>e.jsx(Q,{variant:"outline",className:"text-xs border-blue-500/50 text-blue-400",children:k.code},k.code)),_.fta_options.length>2&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",_.fta_options.length-2]})]}):e.jsx("span",{className:"text-slate-500",children:"â€”"})})]},A))})]})}),u.errors.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsxs("h4",{className:"text-red-400 font-medium mb-2 flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4"}),"Failed Classifications (",u.errors.length,")"]}),e.jsx("div",{className:"space-y-2",children:u.errors.map((_,A)=>e.jsxs("div",{className:"bg-red-900/20 border border-red-800/50 rounded p-3 text-sm",children:[e.jsxs("div",{className:"text-white",children:["Row ",_.row_id,": ",_.description]}),e.jsx("div",{className:"text-red-400 text-xs mt-1",children:_.error})]},A))})]})]})]})]})]})}function Abe(){return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5 text-emerald-400"}),"Settings"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Configure your HS Code Finder preferences"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-2xl space-y-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Default Settings"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"Default Import Country"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Used when creating new classifications"})]}),e.jsxs(Te,{defaultValue:"US",children:[e.jsx(Pe,{className:"w-40 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"US",children:"United States"}),e.jsx(K,{value:"EU",children:"European Union"}),e.jsx(K,{value:"UK",children:"United Kingdom"}),e.jsx(K,{value:"CN",children:"China"})]})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"Currency"}),e.jsx("p",{className:"text-xs text-slate-500",children:"For duty calculations"})]}),e.jsxs(Te,{defaultValue:"USD",children:[e.jsx(Pe,{className:"w-40 bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD ($)"}),e.jsx(K,{value:"EUR",children:"EUR (â‚¬)"}),e.jsx(K,{value:"GBP",children:"GBP (Â£)"})]})]})]})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5"}),"Notifications"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"Tariff Updates"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Get notified of rate changes"})]}),e.jsx(js,{})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-white",children:"FTA News"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Trade agreement updates"})]}),e.jsx(js,{})]})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Gt,{className:"h-5 w-5"}),"Export Data"]}),e.jsx(ue,{children:"Download your classification history"})]}),e.jsx(U,{children:e.jsxs(M,{variant:"outline",className:"w-full",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Export to CSV"]})})]})]})]})}var p_="Collapsible",[Pbe,AK]=Vr(p_),[Dbe,FT]=Pbe(p_),PK=m.forwardRef((t,s)=>{const{__scopeCollapsible:a,open:r,defaultOpen:n,disabled:i,onOpenChange:l,...o}=t,[d,c]=Hn({prop:r,defaultProp:n??!1,onChange:l,caller:p_});return e.jsx(Dbe,{scope:a,disabled:i,contentId:En(),open:d,onOpenToggle:m.useCallback(()=>c(u=>!u),[c]),children:e.jsx(Pt.div,{"data-state":LT(d),"data-disabled":i?"":void 0,...o,ref:s})})});PK.displayName=p_;var DK="CollapsibleTrigger",RT=m.forwardRef((t,s)=>{const{__scopeCollapsible:a,...r}=t,n=FT(DK,a);return e.jsx(Pt.button,{type:"button","aria-controls":n.contentId,"aria-expanded":n.open||!1,"data-state":LT(n.open),"data-disabled":n.disabled?"":void 0,disabled:n.disabled,...r,ref:s,onClick:gt(t.onClick,n.onOpenToggle)})});RT.displayName=DK;var OT="CollapsibleContent",IT=m.forwardRef((t,s)=>{const{forceMount:a,...r}=t,n=FT(OT,t.__scopeCollapsible);return e.jsx(jn,{present:a||n.open,children:({present:i})=>e.jsx(Tbe,{...r,ref:s,present:i})})});IT.displayName=OT;var Tbe=m.forwardRef((t,s)=>{const{__scopeCollapsible:a,present:r,children:n,...i}=t,l=FT(OT,a),[o,d]=m.useState(r),c=m.useRef(null),u=vs(s,c),h=m.useRef(0),x=h.current,g=m.useRef(0),j=g.current,y=l.open||o,b=m.useRef(y),N=m.useRef(void 0);return m.useEffect(()=>{const C=requestAnimationFrame(()=>b.current=!1);return()=>cancelAnimationFrame(C)},[]),an(()=>{const C=c.current;if(C){N.current=N.current||{transitionDuration:C.style.transitionDuration,animationName:C.style.animationName},C.style.transitionDuration="0s",C.style.animationName="none";const _=C.getBoundingClientRect();h.current=_.height,g.current=_.width,b.current||(C.style.transitionDuration=N.current.transitionDuration,C.style.animationName=N.current.animationName),d(r)}},[l.open,r]),e.jsx(Pt.div,{"data-state":LT(l.open),"data-disabled":l.disabled?"":void 0,id:l.contentId,hidden:!y,...i,ref:u,style:{"--radix-collapsible-content-height":x?`${x}px`:void 0,"--radix-collapsible-content-width":j?`${j}px`:void 0,...t.style},children:y&&n})});function LT(t){return t?"open":"closed"}var TK=PK,Fbe=RT,Rbe=IT,Mc="Accordion",Obe=["Home","End","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"],[MT,Ibe,Lbe]=Gg(Mc),[f_,AJe]=Vr(Mc,[Lbe,AK]),BT=AK(),FK=lt.forwardRef((t,s)=>{const{type:a,...r}=t,n=r,i=r;return e.jsx(MT.Provider,{scope:t.__scopeAccordion,children:a==="multiple"?e.jsx(Ube,{...i,ref:s}):e.jsx($be,{...n,ref:s})})});FK.displayName=Mc;var[RK,Mbe]=f_(Mc),[OK,Bbe]=f_(Mc,{collapsible:!1}),$be=lt.forwardRef((t,s)=>{const{value:a,defaultValue:r,onValueChange:n=()=>{},collapsible:i=!1,...l}=t,[o,d]=Hn({prop:a,defaultProp:r??"",onChange:n,caller:Mc});return e.jsx(RK,{scope:t.__scopeAccordion,value:lt.useMemo(()=>o?[o]:[],[o]),onItemOpen:d,onItemClose:lt.useCallback(()=>i&&d(""),[i,d]),children:e.jsx(OK,{scope:t.__scopeAccordion,collapsible:i,children:e.jsx(IK,{...l,ref:s})})})}),Ube=lt.forwardRef((t,s)=>{const{value:a,defaultValue:r,onValueChange:n=()=>{},...i}=t,[l,o]=Hn({prop:a,defaultProp:r??[],onChange:n,caller:Mc}),d=lt.useCallback(u=>o((h=[])=>[...h,u]),[o]),c=lt.useCallback(u=>o((h=[])=>h.filter(x=>x!==u)),[o]);return e.jsx(RK,{scope:t.__scopeAccordion,value:l,onItemOpen:d,onItemClose:c,children:e.jsx(OK,{scope:t.__scopeAccordion,collapsible:!0,children:e.jsx(IK,{...i,ref:s})})})}),[zbe,g_]=f_(Mc),IK=lt.forwardRef((t,s)=>{const{__scopeAccordion:a,disabled:r,dir:n,orientation:i="vertical",...l}=t,o=lt.useRef(null),d=vs(o,s),c=Ibe(a),h=Ru(n)==="ltr",x=gt(t.onKeyDown,g=>{if(!Obe.includes(g.key))return;const j=g.target,y=c().filter(R=>!R.ref.current?.disabled),b=y.findIndex(R=>R.ref.current===j),N=y.length;if(b===-1)return;g.preventDefault();let C=b;const _=0,A=N-1,k=()=>{C=b+1,C>A&&(C=_)},E=()=>{C=b-1,C<_&&(C=A)};switch(g.key){case"Home":C=_;break;case"End":C=A;break;case"ArrowRight":i==="horizontal"&&(h?k():E());break;case"ArrowDown":i==="vertical"&&k();break;case"ArrowLeft":i==="horizontal"&&(h?E():k());break;case"ArrowUp":i==="vertical"&&E();break}const D=C%N;y[D].ref.current?.focus()});return e.jsx(zbe,{scope:a,disabled:r,direction:n,orientation:i,children:e.jsx(MT.Slot,{scope:a,children:e.jsx(Pt.div,{...l,"data-orientation":i,ref:d,onKeyDown:r?void 0:x})})})}),c2="AccordionItem",[qbe,$T]=f_(c2),LK=lt.forwardRef((t,s)=>{const{__scopeAccordion:a,value:r,...n}=t,i=g_(c2,a),l=Mbe(c2,a),o=BT(a),d=En(),c=r&&l.value.includes(r)||!1,u=i.disabled||t.disabled;return e.jsx(qbe,{scope:a,open:c,disabled:u,triggerId:d,children:e.jsx(TK,{"data-orientation":i.orientation,"data-state":qK(c),...o,...n,ref:s,disabled:u,open:c,onOpenChange:h=>{h?l.onItemOpen(r):l.onItemClose(r)}})})});LK.displayName=c2;var MK="AccordionHeader",BK=lt.forwardRef((t,s)=>{const{__scopeAccordion:a,...r}=t,n=g_(Mc,a),i=$T(MK,a);return e.jsx(Pt.h3,{"data-orientation":n.orientation,"data-state":qK(i.open),"data-disabled":i.disabled?"":void 0,...r,ref:s})});BK.displayName=MK;var P5="AccordionTrigger",$K=lt.forwardRef((t,s)=>{const{__scopeAccordion:a,...r}=t,n=g_(Mc,a),i=$T(P5,a),l=Bbe(P5,a),o=BT(a);return e.jsx(MT.ItemSlot,{scope:a,children:e.jsx(Fbe,{"aria-disabled":i.open&&!l.collapsible||void 0,"data-orientation":n.orientation,id:i.triggerId,...o,...r,ref:s})})});$K.displayName=P5;var UK="AccordionContent",zK=lt.forwardRef((t,s)=>{const{__scopeAccordion:a,...r}=t,n=g_(Mc,a),i=$T(UK,a),l=BT(a);return e.jsx(Rbe,{role:"region","aria-labelledby":i.triggerId,"data-orientation":n.orientation,...l,...r,ref:s,style:{"--radix-accordion-content-height":"var(--radix-collapsible-content-height)","--radix-accordion-content-width":"var(--radix-collapsible-content-width)",...t.style}})});zK.displayName=UK;function qK(t){return t?"open":"closed"}var Vbe=FK,Wbe=LK,Hbe=BK,VK=$K,WK=zK;function UT(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const oo=Vbe,Qr=m.forwardRef(({className:t,...s},a)=>e.jsx(Wbe,{ref:a,className:UT("border-b",t),...s}));Qr.displayName="AccordionItem";const Xr=m.forwardRef(({className:t,children:s,...a},r)=>e.jsx(Hbe,{className:"flex",children:e.jsxs(VK,{ref:r,className:UT("flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180",t),...a,children:[s,e.jsx(ja,{className:"h-4 w-4 shrink-0 transition-transform duration-200"})]})}));Xr.displayName=VK.displayName;const en=m.forwardRef(({className:t,children:s,...a},r)=>e.jsx(WK,{ref:r,className:"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down",...a,children:e.jsx("div",{className:UT("pb-4 pt-0",t),children:s})}));en.displayName=WK.displayName;function Gbe(){const t=[{question:"What is an HS code?",answer:"The Harmonized System (HS) is an international nomenclature for the classification of products. It uses a 6-digit code to identify goods, with additional digits added by individual countries for more specific classifications (8-10 digits in the US)."},{question:"How accurate is the AI classification?",answer:"Our AI classification achieves 90%+ accuracy for common products. For complex or unusual products, we recommend verifying with official sources or a customs broker. The confidence score indicates how certain the AI is about the classification."},{question:"What are the General Rules of Interpretation (GRI)?",answer:"GRI are the rules that govern HS classification. GRI 1 says to classify by the terms of headings and notes. GRI 2-6 provide guidance for more complex situations like incomplete goods, mixtures, and sets."},{question:"How do FTA preferential rates work?",answer:"Free Trade Agreements (FTAs) provide reduced or zero duty rates for products that meet specific rules of origin. To qualify, products must satisfy requirements like Change in Tariff Classification (CTC) or Regional Value Content (RVC)."},{question:"What is Section 301?",answer:"Section 301 tariffs are additional duties imposed by the US on certain Chinese products. These are added on top of the normal MFN rate and can significantly increase import costs."},{question:"How do I verify a classification?",answer:"You can request a binding ruling from CBP (CROSS system) for an official classification determination. This ruling is legally binding and provides certainty for your imports."}];return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Pn,{className:"h-5 w-5 text-emerald-400"}),"Help & FAQ"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Frequently asked questions and resources"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8 max-w-3xl",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsx($,{className:"bg-slate-800 border-slate-700 hover:bg-slate-700 transition-colors cursor-pointer",children:e.jsxs(U,{className:"p-4 flex items-center gap-3",children:[e.jsx(yi,{className:"h-5 w-5 text-emerald-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Documentation"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Learn how to use"})]})]})}),e.jsx($,{className:"bg-slate-800 border-slate-700 hover:bg-slate-700 transition-colors cursor-pointer",children:e.jsxs(U,{className:"p-4 flex items-center gap-3",children:[e.jsx(eh,{className:"h-5 w-5 text-blue-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Contact Support"}),e.jsx("p",{className:"text-xs text-slate-500",children:"Get help"})]})]})}),e.jsx("a",{href:"https://hts.usitc.gov/",target:"_blank",rel:"noopener noreferrer",children:e.jsx($,{className:"bg-slate-800 border-slate-700 hover:bg-slate-700 transition-colors cursor-pointer",children:e.jsxs(U,{className:"p-4 flex items-center gap-3",children:[e.jsx(ir,{className:"h-5 w-5 text-purple-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Official HTS"}),e.jsx("p",{className:"text-xs text-slate-500",children:"USITC website"})]})]})})})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Frequently Asked Questions"})}),e.jsx(U,{children:e.jsx(oo,{type:"single",collapsible:!0,className:"space-y-2",children:t.map((s,a)=>e.jsxs(Qr,{value:`item-${a}`,className:"border-slate-700",children:[e.jsx(Xr,{className:"text-white hover:text-emerald-400",children:s.question}),e.jsx(en,{className:"text-slate-400",children:s.answer})]},a))})})]})]})]})}const pM=[{code:"US",name:"United States"},{code:"CN",name:"China"},{code:"DE",name:"Germany"},{code:"JP",name:"Japan"},{code:"KR",name:"South Korea"},{code:"TW",name:"Taiwan"},{code:"VN",name:"Vietnam"},{code:"MX",name:"Mexico"},{code:"CA",name:"Canada"},{code:"GB",name:"United Kingdom"}];function Kbe(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState(""),[i,l]=m.useState("US"),[o,d]=m.useState(""),[c,u]=m.useState(!1),[h,x]=m.useState(null),g=async()=>{if(!s.trim()||!r.trim()){t({title:"Missing products",description:"Please enter descriptions for both products",variant:"destructive"});return}u(!0),x(null);try{const b=await fetch("/api/hs-code/compare",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_a:s,product_b:r,import_country:i,export_country:o||void 0})});if(!b.ok){const C=await b.json();throw new Error(C.detail||"Comparison failed")}const N=await b.json();x(N)}catch(b){t({title:"Comparison failed",description:b instanceof Error?b.message:"Unknown error",variant:"destructive"})}finally{u(!1)}},j=b=>b.same_code?"text-emerald-400":b.same_subheading?"text-green-400":b.same_heading?"text-yellow-400":b.same_chapter?"text-orange-400":"text-red-400",y=b=>b.same_code?{label:"Same Code",color:"bg-emerald-500"}:b.same_subheading?{label:"Same Subheading",color:"bg-green-500"}:b.same_heading?{label:"Same Heading",color:"bg-yellow-500"}:b.same_chapter?{label:"Same Chapter",color:"bg-orange-500"}:{label:"Different Chapters",color:"bg-red-500"};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(Uw,{className:"h-5 w-5 text-emerald-400"}),"Classification Comparison"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Compare two products to see if they share the same HS code classification"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-white text-base flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"A"}),"Product A"]})}),e.jsx(U,{children:e.jsx(Zt,{placeholder:"e.g., Cotton t-shirts for men, short sleeves, knitted",value:s,onChange:b=>a(b.target.value),className:"min-h-[100px] bg-slate-900 border-slate-700"})})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-white text-base flex items-center gap-2",children:[e.jsx("span",{className:"bg-purple-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"B"}),"Product B"]})}),e.jsx(U,{children:e.jsx(Zt,{placeholder:"e.g., Cotton polo shirts for men, short sleeves, knitted",value:r,onChange:b=>n(b.target.value),className:"min-h-[100px] bg-slate-900 border-slate-700"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Import Country"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"w-[180px] bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:pM.map(b=>e.jsx(K,{value:b.code,children:b.name},b.code))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Export Country (Optional)"}),e.jsxs(Te,{value:o||"none",onValueChange:b=>d(b==="none"?"":b),children:[e.jsx(Pe,{className:"w-[180px] bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Select origin"})}),e.jsxs(De,{children:[e.jsx(K,{value:"none",children:"Not specified"}),pM.map(b=>e.jsx(K,{value:b.code,children:b.name},b.code))]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(M,{onClick:g,disabled:c||!s.trim()||!r.trim(),className:"bg-emerald-600 hover:bg-emerald-700",children:c?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Comparing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Uw,{className:"h-4 w-4 mr-2"}),"Compare Products"]})})})]}),h&&e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Comparison Result"}),e.jsx("p",{className:j(h.comparison),children:h.comparison.consolidation_note})]}),e.jsxs("div",{className:"text-right",children:[e.jsx(Q,{className:`${y(h.comparison).color} text-white`,children:y(h.comparison).label}),h.comparison.can_consolidate&&e.jsxs("div",{className:"flex items-center gap-1 mt-2 text-emerald-400 text-sm",children:[e.jsx(Qs,{className:"h-4 w-4"}),"Can consolidate shipments"]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 mt-6",children:[e.jsxs("div",{className:`p-3 rounded-lg text-center ${h.comparison.same_chapter?"bg-emerald-900/30 border border-emerald-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Chapter"}),e.jsx("div",{className:"flex justify-center mt-1",children:h.comparison.same_chapter?e.jsx(Qs,{className:"h-5 w-5 text-emerald-400"}):e.jsx(bs,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("div",{className:`p-3 rounded-lg text-center ${h.comparison.same_heading?"bg-emerald-900/30 border border-emerald-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Heading"}),e.jsx("div",{className:"flex justify-center mt-1",children:h.comparison.same_heading?e.jsx(Qs,{className:"h-5 w-5 text-emerald-400"}):e.jsx(bs,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("div",{className:`p-3 rounded-lg text-center ${h.comparison.same_subheading?"bg-emerald-900/30 border border-emerald-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Subheading"}),e.jsx("div",{className:"flex justify-center mt-1",children:h.comparison.same_subheading?e.jsx(Qs,{className:"h-5 w-5 text-emerald-400"}):e.jsx(bs,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("div",{className:`p-3 rounded-lg text-center ${h.comparison.same_code?"bg-emerald-900/30 border border-emerald-700":"bg-slate-900"}`,children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Full Code"}),e.jsx("div",{className:"flex justify-center mt-1",children:h.comparison.same_code?e.jsx(Qs,{className:"h-5 w-5 text-emerald-400"}):e.jsx(bs,{className:"h-5 w-5 text-slate-600"})})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700 border-l-4 border-l-blue-500",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-white text-base flex items-center gap-2",children:[e.jsx("span",{className:"bg-blue-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"A"}),h.product_a.description.substring(0,50),"..."]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"HS Code"}),e.jsx(Q,{variant:"outline",className:"font-mono text-lg px-3 py-1",children:h.product_a.hs_code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Description"}),e.jsx("div",{className:"text-white text-sm",children:h.product_a.hs_description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Chapter"}),e.jsx("div",{className:"text-white text-sm",children:h.product_a.chapter})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Confidence"}),e.jsxs("div",{className:h.product_a.confidence>=.8?"text-emerald-400":"text-yellow-400",children:[(h.product_a.confidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"MFN Rate"}),e.jsxs("div",{className:"text-white",children:[h.product_a.mfn_rate,"%"]})]})]}),h.product_a.reasoning&&e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-xs text-slate-400",children:[e.jsx(Ja,{className:"h-3 w-3 inline mr-1"}),h.product_a.reasoning.substring(0,200),"..."]})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700 border-l-4 border-l-purple-500",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-white text-base flex items-center gap-2",children:[e.jsx("span",{className:"bg-purple-500 text-white text-xs font-bold px-2 py-0.5 rounded",children:"B"}),h.product_b.description.substring(0,50),"..."]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"HS Code"}),e.jsx(Q,{variant:"outline",className:"font-mono text-lg px-3 py-1",children:h.product_b.hs_code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Description"}),e.jsx("div",{className:"text-white text-sm",children:h.product_b.hs_description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Chapter"}),e.jsx("div",{className:"text-white text-sm",children:h.product_b.chapter})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"Confidence"}),e.jsxs("div",{className:h.product_b.confidence>=.8?"text-emerald-400":"text-yellow-400",children:[(h.product_b.confidence*100).toFixed(0),"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400",children:"MFN Rate"}),e.jsxs("div",{className:"text-white",children:[h.product_b.mfn_rate,"%"]})]})]}),h.product_b.reasoning&&e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-xs text-slate-400",children:[e.jsx(Ja,{className:"h-3 w-3 inline mr-1"}),h.product_b.reasoning.substring(0,200),"..."]})]})]})]}),h.comparison.rate_difference_percent>0&&e.jsx($,{className:"bg-yellow-900/20 border-yellow-800/50",children:e.jsxs(U,{className:"p-4 flex items-start gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-400",children:"Duty Rate Difference"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["These products have a ",h.comparison.rate_difference_percent,"% difference in MFN duty rates. Ensure correct classification to avoid overpaying duties or customs penalties."]})]})]})})]}),!h&&e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-base",children:"When to Use This Tool"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx(Vde,{className:"h-8 w-8 text-emerald-400 mb-2"}),e.jsx("h4",{className:"font-medium text-white mb-1",children:"Consolidate Shipments"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Check if products can be shipped under the same HS code to simplify customs"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx(Ve,{className:"h-8 w-8 text-yellow-400 mb-2"}),e.jsx("h4",{className:"font-medium text-white mb-1",children:"Verify Classification"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Ensure similar products are classified consistently"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx(Ja,{className:"h-8 w-8 text-blue-400 mb-2"}),e.jsx("h4",{className:"font-medium text-white mb-1",children:"Duty Analysis"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Compare duty rates between product variations"})]})]})})]})]})]})}function Ybe(){const{toast:t}=et(),[s,a]=m.useState(""),[r,n]=m.useState(""),[i,l]=m.useState(!1),[o,d]=m.useState([]),[c,u]=m.useState(null),[h,x]=m.useState(!1),g=async()=>{if(!s.trim()){t({title:"Search required",description:"Please enter a search term",variant:"destructive"});return}l(!0),u(null);try{const b=new URLSearchParams({q:s,country:"US",limit:"20"});r&&b.append("hs_code",r);const N=await fetch(`/api/hs-code/rulings/search?${b}`);if(!N.ok)throw new Error("Search failed");const C=await N.json();d(C.rulings||[]),C.rulings.length===0&&t({title:"No rulings found",description:"Try different search terms or broaden your criteria"})}catch{t({title:"Search failed",description:"Could not search binding rulings",variant:"destructive"})}finally{l(!1)}},j=async b=>{x(!0);try{const N=await fetch(`/api/hs-code/rulings/${b}`);if(!N.ok)throw new Error("Failed to load ruling");const C=await N.json();u(C)}catch{t({title:"Failed to load ruling",description:"Could not load ruling details",variant:"destructive"})}finally{x(!1)}},y=b=>{b.key==="Enter"&&g()};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(El,{className:"h-5 w-5 text-emerald-400"}),"Binding Rulings Search"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Search CBP CROSS database for classification precedent and rulings"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx($,{className:"bg-slate-800 border-slate-700 mb-8",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Search Product or Ruling"}),e.jsx(oe,{placeholder:"e.g., cotton t-shirt, laptop, N123456",value:s,onChange:b=>a(b.target.value),onKeyPress:y,className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{className:"w-full md:w-48",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"HS Code Filter (Optional)"}),e.jsx(oe,{placeholder:"e.g., 6109",value:r,onChange:b=>n(b.target.value),onKeyPress:y,className:"bg-slate-900 border-slate-700"})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(M,{onClick:g,disabled:i,className:"bg-emerald-600 hover:bg-emerald-700 w-full md:w-auto",children:i?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Search"]})})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Try:"}),["laptop computer","cotton textile","plastic toys","automotive parts"].map(b=>e.jsx(M,{variant:"ghost",size:"sm",className:"text-xs h-6 text-slate-400 hover:text-white",onClick:()=>{a(b),setTimeout(g,100)},children:b},b))]})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2 space-y-4",children:o.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-sm text-slate-400 mb-2",children:["Found ",o.length," ruling",o.length!==1?"s":""]}),o.map(b=>e.jsx($,{className:`bg-slate-800 border-slate-700 cursor-pointer transition-colors hover:border-emerald-600 ${c?.ruling_number===b.ruling_number?"border-emerald-500":""}`,onClick:()=>j(b.ruling_number),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{variant:"outline",className:"font-mono",children:b.ruling_number}),e.jsx(Q,{variant:"outline",className:b.ruling_type==="HQ"?"border-purple-500 text-purple-400":"border-blue-500 text-blue-400",children:b.ruling_type||"NY"}),e.jsx(Q,{variant:"outline",className:"font-mono text-emerald-400",children:b.hs_code})]}),e.jsxs("p",{className:"text-white text-sm mb-2",children:[b.product_description.substring(0,200),b.product_description.length>200?"...":""]}),b.ruling_date&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-500",children:[e.jsx(ya,{className:"h-3 w-3"}),new Date(b.ruling_date).toLocaleDateString()]}),b.keywords&&b.keywords.length>0&&e.jsx("div",{className:"flex gap-1 mt-2 flex-wrap",children:b.keywords.slice(0,5).map((N,C)=>e.jsx(Q,{variant:"secondary",className:"text-xs",children:N},C))})]}),e.jsx(xr,{className:"h-5 w-5 text-slate-600 flex-shrink-0"})]})})},b.ruling_number))]}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx(yi,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"Search Binding Rulings"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Enter a product description or ruling number to find CBP classification precedents"})]})})}),e.jsx("div",{children:h?e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400 mx-auto"}),e.jsx("p",{className:"text-slate-400 mt-2",children:"Loading ruling details..."})]})}):c?e.jsxs($,{className:"bg-slate-800 border-slate-700 sticky top-4",children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"text-white text-base flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-emerald-400"}),c.ruling_number]}),e.jsx("a",{href:`https://rulings.cbp.gov/ruling/${c.ruling_number}`,target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300",children:e.jsx(ir,{className:"h-4 w-4"})})]}),e.jsx(ue,{children:c.ruling_type==="HQ"?"Headquarters Ruling":"New York Ruling"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"HS Code"}),e.jsx(Q,{variant:"outline",className:"font-mono text-lg px-3 py-1 text-emerald-400",children:c.hs_code})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Product Description"}),e.jsx("p",{className:"text-white text-sm",children:c.product_description})]}),c.reasoning&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Classification Reasoning"}),e.jsx("p",{className:"text-white text-sm bg-slate-900 p-3 rounded",children:c.reasoning})]}),c.legal_reference&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Legal Reference"}),e.jsx("p",{className:"text-slate-300 text-xs font-mono bg-slate-900 p-2 rounded",children:c.legal_reference})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[c.ruling_date&&e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Ruling Date"}),e.jsx("div",{className:"text-white",children:new Date(c.ruling_date).toLocaleDateString()})]}),c.effective_date&&e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Effective"}),e.jsx("div",{className:"text-white",children:new Date(c.effective_date).toLocaleDateString()})]})]}),c.related_rulings&&c.related_rulings.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-slate-400 mb-2",children:"Related Rulings"}),e.jsx("div",{className:"space-y-2",children:c.related_rulings.map(b=>e.jsxs("div",{className:"bg-slate-900 p-2 rounded cursor-pointer hover:bg-slate-800",onClick:()=>j(b.ruling_number),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:b.ruling_number}),e.jsx(Q,{variant:"outline",className:"font-mono text-xs text-emerald-400",children:b.hs_code})]}),e.jsxs("p",{className:"text-xs text-slate-400 mt-1",children:[b.product_description.substring(0,80),"..."]})]},b.ruling_number))})]})]})]}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(U,{className:"p-6",children:[e.jsx(Ja,{className:"h-8 w-8 text-blue-400 mb-3"}),e.jsx("h4",{className:"text-white font-medium mb-2",children:"About Binding Rulings"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"CBP binding rulings provide official classification decisions that can be cited as precedent for similar products."}),e.jsxs("div",{className:"space-y-2 text-xs text-slate-500",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"border-blue-500 text-blue-400",children:"NY"}),e.jsx("span",{children:"New York rulings (most common)"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"border-purple-500 text-purple-400",children:"HQ"}),e.jsx("span",{children:"Headquarters rulings (appeals)"})]})]})]})})})]})]})]})}const fM=[{code:"US",name:"United States"},{code:"CN",name:"China"},{code:"DE",name:"Germany"},{code:"JP",name:"Japan"},{code:"MX",name:"Mexico"},{code:"CA",name:"Canada"},{code:"VN",name:"Vietnam"},{code:"TW",name:"Taiwan"}];function Zbe(){const{token:t,isAuthenticated:s}=Dt(),{toast:a}=et(),[r,n]=m.useState([]),[i,l]=m.useState([]),[o,d]=m.useState(!0),[c,u]=m.useState(!1),[h,x]=m.useState(!1),[g,j]=m.useState(""),[y,b]=m.useState("US"),[N,C]=m.useState(""),[_,A]=m.useState("any"),[k,E]=m.useState(""),[D,R]=m.useState(!0);m.useEffect(()=>{s&&O(),P()},[s]);const O=async()=>{if(t)try{const G=await fetch("/api/hs-code/alerts",{headers:{Authorization:`Bearer ${t}`}});if(G.ok){const q=await G.json();n(q.alerts||[])}}catch(G){console.error("Failed to load alerts:",G)}finally{d(!1)}},P=async()=>{try{const G=await fetch("/api/hs-code/rate-changes?country=US&days=30");if(G.ok){const q=await G.json();l(q.changes||[])}}catch(G){console.error("Failed to load rate changes:",G)}},T=async()=>{if(!t||!g.trim()){a({title:"HS Code required",description:"Please enter an HS code to monitor",variant:"destructive"});return}u(!0);try{const G=await fetch("/api/hs-code/alerts/subscribe",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({hs_code:g,import_country:y,export_country:N||void 0,alert_type:_,threshold_percent:k?parseFloat(k):void 0,email_notification:D})});if(!G.ok){const q=await G.json();throw new Error(q.detail||"Failed to create alert")}a({title:"Alert created",description:`You'll be notified when rates change for ${g}`}),x(!1),j(""),C(""),E(""),O()}catch(G){a({title:"Failed to create alert",description:G instanceof Error?G.message:"Unknown error",variant:"destructive"})}finally{u(!1)}},B=async G=>{if(t)try{(await fetch(`/api/hs-code/alerts/${G}`,{method:"DELETE",headers:{Authorization:`Bearer ${t}`}})).ok&&(n(r.filter(z=>z.id!==G)),a({title:"Alert removed",description:"You will no longer receive notifications"}))}catch{a({title:"Failed to remove alert",description:"Please try again",variant:"destructive"})}};return s?e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-emerald-400"}),"Rate Change Alerts"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Get notified when duty rates change for your products"})]}),e.jsxs(M,{onClick:()=>x(!h),className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"New Alert"]})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[h&&e.jsxs($,{className:"bg-slate-800 border-slate-700 mb-8",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white text-base",children:"Create Rate Alert"}),e.jsx(ue,{children:"Monitor an HS code for duty rate changes"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"HS Code *"}),e.jsx(oe,{placeholder:"e.g., 6109.10.00",value:g,onChange:G=>j(G.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Import Country"}),e.jsxs(Te,{value:y,onValueChange:b,children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:fM.map(G=>e.jsx(K,{value:G.code,children:G.name},G.code))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Export Country"}),e.jsxs(Te,{value:N||"none",onValueChange:G=>C(G==="none"?"":G),children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{placeholder:"Any origin"})}),e.jsxs(De,{children:[e.jsx(K,{value:"none",children:"Any origin"}),fM.map(G=>e.jsx(K,{value:G.code,children:G.name},G.code))]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Alert When"}),e.jsxs(Te,{value:_,onValueChange:A,children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"any",children:"Any change"}),e.jsx(K,{value:"increase",children:"Rate increases"}),e.jsx(K,{value:"decrease",children:"Rate decreases"})]})]})]})]}),e.jsxs("div",{className:"flex flex-col md:flex-row items-start md:items-center gap-4",children:[e.jsxs("div",{className:"w-48",children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Threshold (%)"}),e.jsx(oe,{type:"number",placeholder:"e.g., 5",value:k,onChange:G=>E(G.target.value),className:"bg-slate-900 border-slate-700"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Only alert if change exceeds this %"})]}),e.jsxs("div",{className:"flex items-center gap-3 pt-4 md:pt-6",children:[e.jsx(js,{checked:D,onCheckedChange:R}),e.jsxs("label",{className:"text-sm text-slate-400 flex items-center gap-1",children:[e.jsx(Va,{className:"h-4 w-4"}),"Email notifications"]})]}),e.jsx("div",{className:"flex-1"}),e.jsxs("div",{className:"flex gap-2 pt-4 md:pt-6",children:[e.jsx(M,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(M,{onClick:T,disabled:c,className:"bg-emerald-600 hover:bg-emerald-700",children:c?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):"Create Alert"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-lg font-semibold text-white",children:"Your Alerts"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:O,children:e.jsx(Lt,{className:"h-4 w-4"})})]}),o?e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-8 text-center",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400 mx-auto"})})}):r.length>0?e.jsx("div",{className:"space-y-4",children:r.map(G=>e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-emerald-400",children:G.hs_code}),e.jsxs(Q,{variant:"outline",className:"text-xs",children:[G.import_country,G.export_country&&` â† ${G.export_country}`]}),G.rate_changed&&e.jsxs(Q,{className:G.rate_change>0?"bg-red-500":"bg-green-500",children:[G.rate_change>0?e.jsx(Vt,{className:"h-3 w-3 mr-1"}):e.jsx(lr,{className:"h-3 w-3 mr-1"}),G.rate_change>0?"+":"",G.rate_change,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Baseline Rate"}),e.jsxs("div",{className:"text-white",children:[G.baseline_rate?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Current Rate"}),e.jsxs("div",{className:G.rate_changed?G.rate_change>0?"text-red-400":"text-green-400":"text-white",children:[G.current_rate?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Alert Type"}),e.jsx("div",{className:"text-white capitalize",children:G.alert_type})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-xs text-slate-500",children:[G.email_notification&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Va,{className:"h-3 w-3"})," Email enabled"]}),G.threshold_percent&&e.jsxs("span",{children:["Threshold: ",G.threshold_percent,"%"]}),e.jsxs("span",{children:["Created: ",new Date(G.created_at).toLocaleDateString()]})]})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>B(G.id),className:"text-slate-400 hover:text-red-400",children:e.jsx(ia,{className:"h-4 w-4"})})]})})},G.id))}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(U,{className:"p-8 text-center",children:[e.jsx(Yq,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"No alerts configured"}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Set up alerts to get notified when duty rates change"}),e.jsxs(M,{onClick:()=>x(!0),className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create First Alert"]})]})})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Recent Rate Changes"}),e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-4",children:i.length>0?e.jsx("div",{className:"space-y-3",children:i.slice(0,10).map((G,q)=>e.jsxs("div",{className:"bg-slate-900 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-1",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:G.hs_code}),G.rate_type==="section_301"?e.jsx(Q,{className:"bg-red-500 text-xs",children:"301"}):e.jsxs("span",{className:"text-emerald-400 text-sm font-medium",children:[G.current_rate,"%"]})]}),e.jsx("p",{className:"text-xs text-slate-400 truncate",children:G.description}),G.effective_from&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Effective: ",new Date(G.effective_from).toLocaleDateString()]})]},q))}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx(Qs,{className:"h-8 w-8 text-emerald-400 mx-auto mb-2"}),e.jsx("p",{className:"text-sm text-slate-400",children:"No recent rate changes"})]})})}),e.jsx($,{className:"bg-blue-900/20 border-blue-800/50 mt-4",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-blue-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"font-medium text-blue-400 mb-1",children:"Stay Compliant"}),e.jsx("p",{className:"text-slate-400",children:"Rate changes can affect your costs and compliance. Set up alerts for HS codes you frequently import."})]})]})})})]})]})]})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-emerald-400"}),"Rate Change Alerts"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Get notified when duty rates change for your products"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-16 text-center",children:[e.jsx($s,{className:"h-16 w-16 text-slate-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Sign in to set up alerts"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Create an account to receive notifications when duty rates change"}),e.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-700",children:"Sign In"})]})]})}const gM=[{code:"US",name:"United States"},{code:"CA",name:"Canada"},{code:"MX",name:"Mexico"}];function Jbe(){const{token:t}=Dt(),{toast:s}=et(),[a,r]=m.useState(""),[n,i]=m.useState("MX"),[l,o]=m.useState(!1),[d,c]=m.useState(null),[u,h]=m.useState(""),[x,g]=m.useState(""),[j,y]=m.useState(""),[b,N]=m.useState("transaction_value"),[C,_]=m.useState(!1),[A,k]=m.useState(""),[E,D]=m.useState(!1),[R,O]=m.useState(null),P=async()=>{if(!a.trim()){s({title:"HS Code required",description:"Please enter an HS code",variant:"destructive"});return}o(!0),c(null);try{const B=await fetch(`/api/hs-code/roo/rules/USMCA/${a}`);if(!B.ok)throw new Error("Failed to get rules");const G=await B.json();c(G.product_specific_rule||G.general_rule||G.default_rule)}catch{s({title:"Lookup failed",description:"Could not retrieve rules of origin",variant:"destructive"})}finally{o(!1)}},T=async()=>{if(!x||!j){s({title:"Values required",description:"Please enter transaction value and VOM",variant:"destructive"});return}D(!0),O(null);try{const B=await fetch("/api/hs-code/roo/calculate-rvc",{method:"POST",headers:{"Content-Type":"application/json",...t&&{Authorization:`Bearer ${t}`}},body:JSON.stringify({product_description:u||`Product ${a}`,hs_code:a,fta_code:"USMCA",transaction_value:parseFloat(x),vom_value:parseFloat(j),method:b,is_automotive:C,high_wage_labor:A?parseFloat(A):void 0})});if(!B.ok)throw new Error("Calculation failed");const G=await B.json();O(G.rvc_result),G.rvc_result.meets_requirement&&s({title:"Qualifies for USMCA!",description:`RVC of ${G.rvc_result.rvc_percent}% meets the ${G.rvc_result.threshold}% threshold`})}catch(B){s({title:"Calculation failed",description:B instanceof Error?B.message:"Unknown error",variant:"destructive"})}finally{D(!1)}};return e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(qj,{className:"h-5 w-5 text-emerald-400"}),"USMCA Rules of Origin"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Determine USMCA eligibility with RVC calculator"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-8",children:[e.jsx($,{className:"bg-gradient-to-r from-blue-900/30 to-red-900/30 border-slate-700 mb-8",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx("div",{className:"flex gap-2",children:gM.map(B=>e.jsx(Q,{variant:"outline",className:"text-white",children:B.code},B.code))}),e.jsx("span",{className:"text-white font-medium",children:"United States-Mexico-Canada Agreement"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Effective"}),e.jsx("div",{className:"text-white",children:"July 1, 2020"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Certificate"}),e.jsx("div",{className:"text-white",children:"USMCA Certificate of Origin"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"De Minimis"}),e.jsx("div",{className:"text-white",children:"10% (7% for textiles)"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Cumulation"}),e.jsx("div",{className:"text-white",children:"Full cumulation"})]})]})]})}),e.jsxs(Os,{defaultValue:"rules",className:"space-y-6",children:[e.jsxs(Fs,{className:"bg-slate-800",children:[e.jsx(He,{value:"rules",children:"Rule Lookup"}),e.jsx(He,{value:"rvc",children:"RVC Calculator"}),e.jsx(He,{value:"auto",children:"Automotive Rules"})]}),e.jsx(Qe,{value:"rules",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Find Product-Specific Rule"}),e.jsx(ue,{children:"Enter your HS code to see the applicable USMCA rule"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"HS Code"}),e.jsx(oe,{placeholder:"e.g., 6109.10.00",value:a,onChange:B=>r(B.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Export Country"}),e.jsxs(Te,{value:n,onValueChange:i,children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:gM.map(B=>e.jsx(K,{value:B.code,children:B.name},B.code))})]})]}),e.jsx(M,{onClick:P,disabled:l,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:l?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Find Rule"]})})]})]}),d&&e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Q,{className:"bg-emerald-500",children:d.rule_type}),"Applicable Rule"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsx("div",{className:"bg-slate-900 p-4 rounded-lg",children:e.jsx("p",{className:"text-white text-sm",children:d.rule_text})}),d.ctc_type&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"CTC Requirement"}),e.jsx(Q,{variant:"outline",children:d.ctc_type})]}),d.rvc_required&&e.jsxs("div",{className:"bg-yellow-900/20 border border-yellow-800/50 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(kc,{className:"h-4 w-4 text-yellow-400"}),e.jsx("span",{className:"text-yellow-400 font-medium",children:"RVC Required"})]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["Threshold: ",d.rvc_threshold,"% using ",d.rvc_method?.replace("_"," ")," method"]})]}),d.lvc_required&&e.jsxs("div",{className:"bg-blue-900/20 border border-blue-800/50 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ja,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{className:"text-blue-400 font-medium",children:"LVC Required (Automotive)"})]}),e.jsxs("div",{className:"text-sm text-slate-400",children:["High-wage labor threshold: ",d.lvc_threshold,"%"]})]}),d.process_requirements&&e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400 text-sm mb-1",children:"Process Requirements"}),e.jsx("p",{className:"text-white text-sm",children:d.process_requirements})]}),d.annex_reference&&e.jsxs("div",{className:"text-xs text-slate-500",children:["Reference: ",d.annex_reference]})]})]})]})}),e.jsx(Qe,{value:"rvc",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Regional Value Content Calculator"}),e.jsx(ue,{children:"Calculate RVC to determine USMCA eligibility"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Product Description"}),e.jsx(Zt,{placeholder:"Describe your product...",value:u,onChange:B=>h(B.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"HS Code"}),e.jsx(oe,{placeholder:"e.g., 6109.10.00",value:a,onChange:B=>r(B.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Transaction Value (FOB)"}),e.jsx(oe,{type:"number",placeholder:"e.g., 100000",value:x,onChange:B=>g(B.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Value of Non-Originating Materials (VOM)"}),e.jsx(oe,{type:"number",placeholder:"e.g., 35000",value:j,onChange:B=>y(B.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"RVC Method"}),e.jsxs(Te,{value:b,onValueChange:N,children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"transaction_value",children:"Transaction Value"}),e.jsx(K,{value:"net_cost",children:"Net Cost"})]})]})]}),e.jsx(M,{onClick:T,disabled:E,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:E?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Calculate RVC"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[R&&e.jsx($,{className:`border-2 ${R.meets_requirement?"border-emerald-500 bg-emerald-900/20":"border-red-500 bg-red-900/20"}`,children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[R.meets_requirement?e.jsx(Qs,{className:"h-12 w-12 text-emerald-400"}):e.jsx(bs,{className:"h-12 w-12 text-red-400"}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-2xl font-bold text-white",children:[R.rvc_percent.toFixed(1),"% RVC"]}),e.jsx("p",{className:R.meets_requirement?"text-emerald-400":"text-red-400",children:R.meets_requirement?"Qualifies for USMCA preferential treatment":`Does not meet ${R.threshold}% threshold`})]})]}),e.jsx("div",{className:"bg-slate-900/50 p-4 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Transaction Value"}),e.jsxs("div",{className:"text-white font-medium",children:["$",parseFloat(x).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"VOM"}),e.jsxs("div",{className:"text-white font-medium",children:["$",parseFloat(j).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Originating Content"}),e.jsxs("div",{className:"text-emerald-400 font-medium",children:["$",(parseFloat(x)-parseFloat(j)).toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-400",children:"Required Threshold"}),e.jsxs("div",{className:"text-white font-medium",children:[R.threshold,"%"]})]})]})})]})}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white text-base",children:"RVC Formulas"})}),e.jsxs(U,{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[e.jsx("div",{className:"text-slate-400 mb-1",children:"Transaction Value Method:"}),e.jsx("code",{className:"text-emerald-400",children:"RVC = ((TV - VNM) / TV) Ã— 100"})]}),e.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[e.jsx("div",{className:"text-slate-400 mb-1",children:"Net Cost Method:"}),e.jsx("code",{className:"text-emerald-400",children:"RVC = ((NC - VNM) / NC) Ã— 100"})]}),e.jsxs("div",{className:"text-slate-500 text-xs",children:[e.jsx("p",{children:"TV = Transaction Value (FOB price)"}),e.jsx("p",{children:"NC = Net Cost (total cost minus excluded costs)"}),e.jsx("p",{children:"VNM = Value of Non-originating Materials"})]})]})]})]})]})}),e.jsx(Qe,{value:"auto",children:e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"USMCA Automotive Rules"}),e.jsx(ue,{children:"Special requirements for motor vehicles and auto parts"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-emerald-400 mb-2",children:"75%"}),e.jsx("div",{className:"text-white font-medium mb-1",children:"Regional Value Content"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Passenger vehicles must meet 75% RVC (up from 62.5% under NAFTA)"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-blue-400 mb-2",children:"40-45%"}),e.jsx("div",{className:"text-white font-medium mb-1",children:"Labor Value Content"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Must be produced with high-wage labor ($16+/hour)"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-400 mb-2",children:"70%"}),e.jsx("div",{className:"text-white font-medium mb-1",children:"Steel & Aluminum"}),e.jsx("div",{className:"text-sm text-slate-400",children:"70% of steel and aluminum must be sourced from North America"})]}),e.jsxs("div",{className:"bg-slate-900 p-4 rounded-lg",children:[e.jsx("div",{className:"text-3xl font-bold text-purple-400 mb-2",children:"75%"}),e.jsx("div",{className:"text-white font-medium mb-1",children:"Core Parts"}),e.jsx("div",{className:"text-sm text-slate-400",children:"Engine, transmission, body/chassis must meet 75% RVC"})]})]}),e.jsx("div",{className:"mt-6 bg-yellow-900/20 border border-yellow-800/50 p-4 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ve,{className:"h-5 w-5 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-yellow-400 mb-1",children:"Phase-in Period"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Automotive RVC requirements are phased in through 2027. Check current year requirements for your specific products."})]})]})})]})]})})]})]})]})}const vM={owner:Jm,admin:Ot,editor:zn,viewer:Da},jM={owner:"text-yellow-400 border-yellow-500",admin:"text-purple-400 border-purple-500",editor:"text-blue-400 border-blue-500",viewer:"text-slate-400 border-slate-500"};function Qbe(){const{token:t,isAuthenticated:s}=Dt(),{toast:a}=et(),[r,n]=m.useState([]),[i,l]=m.useState(null),[o,d]=m.useState(!0),[c,u]=m.useState(!1),[h,x]=m.useState(!1),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState(!1),[_,A]=m.useState(""),[k,E]=m.useState("editor");m.useEffect(()=>{s&&t?D():d(!1)},[s,t]);const D=async()=>{if(t)try{const T=await fetch("/api/hs-code/teams",{headers:{Authorization:`Bearer ${t}`}});if(T.ok){const B=await T.json();n(B.teams||[])}}catch(T){console.error("Failed to load teams:",T)}finally{d(!1)}},R=async T=>{if(t)try{const B=await fetch(`/api/hs-code/teams/${T}`,{headers:{Authorization:`Bearer ${t}`}});if(B.ok){const G=await B.json();l(G)}}catch{a({title:"Failed to load team",description:"Could not load team details",variant:"destructive"})}},O=async()=>{if(!t||!g.trim()){a({title:"Name required",description:"Please enter a team name",variant:"destructive"});return}u(!0);try{const T=await fetch("/api/hs-code/teams",{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({name:g,description:y,default_import_country:"US"})});if(!T.ok)throw new Error("Failed to create team");const B=await T.json();a({title:"Team created",description:`${g} has been created successfully`}),x(!1),j(""),b(""),D()}catch(T){a({title:"Failed to create team",description:T instanceof Error?T.message:"Unknown error",variant:"destructive"})}finally{u(!1)}},P=async()=>{if(!t||!i||!_.trim()){a({title:"Email required",description:"Please enter an email address",variant:"destructive"});return}try{const T=await fetch(`/api/hs-code/teams/${i.id}/invite`,{method:"POST",headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"},body:JSON.stringify({email:_,role:k})});if(!T.ok){const G=await T.json();throw new Error(G.detail||"Failed to invite")}const B=await T.json();a({title:B.status==="added"?"Member added":"Invitation sent",description:B.message||`${_} has been ${B.status==="added"?"added to":"invited to"} the team`}),C(!1),A(""),E("editor"),R(i.id)}catch(T){a({title:"Failed to invite",description:T instanceof Error?T.message:"Unknown error",variant:"destructive"})}};return s?e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-emerald-400"}),"Team Collaboration"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Work together on HS code classifications"})]}),e.jsxs(wt,{open:h,onOpenChange:x,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Team"]})}),e.jsxs(yt,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:"Create a New Team"}),e.jsx(_t,{children:"Set up a team to collaborate on classifications"})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Team Name *"}),e.jsx(oe,{placeholder:"e.g., Import Team",value:g,onChange:T=>j(T.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Description"}),e.jsx(Zt,{placeholder:"What does this team work on?",value:y,onChange:T=>b(T.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsx(M,{onClick:O,disabled:c,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:c?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):"Create Team"})]})]})]})]})}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-white mb-4",children:"Your Teams"}),o?e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsx(U,{className:"p-8 text-center",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400 mx-auto"})})}):r.length>0?e.jsx("div",{className:"space-y-3",children:r.map(T=>{const B=vM[T.role]||Da;return e.jsx($,{className:`bg-slate-800 border-slate-700 cursor-pointer transition-colors hover:border-emerald-600 ${i?.id===T.id?"border-emerald-500":""}`,onClick:()=>R(T.id),children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-medium",children:T.name}),e.jsxs("p",{className:"text-xs text-slate-500",children:[T.member_count," members"]})]}),e.jsxs(Q,{variant:"outline",className:jM[T.role],children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),T.role]})]}),T.description&&e.jsx("p",{className:"text-sm text-slate-400 mt-2 line-clamp-2",children:T.description})]})},T.id)})}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(U,{className:"p-6 text-center",children:[e.jsx(xs,{className:"h-10 w-10 text-slate-600 mx-auto mb-3"}),e.jsx("h3",{className:"text-white font-medium mb-1",children:"No teams yet"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Create a team to start collaborating"}),e.jsxs(M,{onClick:()=>x(!0),variant:"outline",size:"sm",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Team"]})]})})]}),e.jsx("div",{className:"lg:col-span-2",children:i?e.jsx("div",{className:"space-y-6",children:e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-white",children:i.name}),e.jsx(ue,{children:i.description})]}),(i.your_role==="owner"||i.your_role==="admin")&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(wt,{open:N,onOpenChange:C,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(sh,{className:"h-4 w-4 mr-2"}),"Invite"]})}),e.jsxs(yt,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:"Invite Team Member"}),e.jsxs(_t,{children:["Add someone to ",i.name]})]}),e.jsxs("div",{className:"space-y-4 pt-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Email Address"}),e.jsx(oe,{type:"email",placeholder:"colleague@company.com",value:_,onChange:T=>A(T.target.value),className:"bg-slate-900 border-slate-700"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm text-slate-400 mb-1 block",children:"Role"}),e.jsxs(Te,{value:k,onValueChange:E,children:[e.jsx(Pe,{className:"bg-slate-900 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"admin",children:"Admin - Full access"}),e.jsx(K,{value:"editor",children:"Editor - Create & edit"}),e.jsx(K,{value:"viewer",children:"Viewer - View only"})]})]})]}),e.jsxs(M,{onClick:P,className:"w-full bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(Va,{className:"h-4 w-4 mr-2"}),"Send Invitation"]})]})]})]}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(sn,{className:"h-4 w-4"})})]})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-center",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:i.members.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Members"})]}),e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-center",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:i.projects.length}),e.jsx("div",{className:"text-xs text-slate-400",children:"Projects"})]}),e.jsxs("div",{className:"bg-slate-900 p-3 rounded text-center",children:[e.jsx("div",{className:"text-xl font-bold text-white capitalize",children:i.plan}),e.jsx("div",{className:"text-xs text-slate-400",children:"Plan"})]})]}),e.jsx("h4",{className:"text-white font-medium mb-3",children:"Team Members"}),e.jsx("div",{className:"space-y-2 mb-6",children:i.members.map(T=>{const B=vM[T.role]||Da;return e.jsxs("div",{className:"flex items-center justify-between bg-slate-900 p-3 rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-emerald-500/20 flex items-center justify-center",children:e.jsx("span",{className:"text-sm font-medium text-emerald-400",children:T.user_id.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-white text-sm",children:["User ",T.user_id.substring(0,8)]}),e.jsx("div",{className:"text-xs text-slate-500 capitalize",children:T.status})]})]}),e.jsxs(Q,{variant:"outline",className:jM[T.role],children:[e.jsx(B,{className:"h-3 w-3 mr-1"}),T.role]})]},T.id)})}),i.projects.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"text-white font-medium mb-3",children:"Projects"}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:i.projects.map(T=>e.jsxs("div",{className:"bg-slate-900 p-3 rounded",children:[e.jsx("div",{className:"text-white font-medium",children:T.name}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(Q,{variant:"outline",className:"text-xs capitalize",children:T.status}),e.jsxs("span",{className:"text-xs text-slate-500",children:[T.classification_count," classifications"]})]})]},T.id))})]})]})]})}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx(xs,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-white font-medium mb-2",children:"Select a Team"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Choose a team from the list to view details and members"})]})})})]})})]}):e.jsxs("div",{className:"min-h-screen bg-slate-950 text-white",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsxs("div",{className:"px-6 py-4",children:[e.jsxs("h1",{className:"text-xl font-bold flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-emerald-400"}),"Team Collaboration"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Work together on HS code classifications"})]})}),e.jsxs("div",{className:"container mx-auto px-6 py-16 text-center",children:[e.jsx(xs,{className:"h-16 w-16 text-slate-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-white mb-2",children:"Sign in to create a team"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Collaborate with colleagues on HS code classifications"}),e.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-700",children:"Sign In"})]})]})}const Xbe="http://localhost:8000";function eye(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState(""),[i,l]=m.useState(""),[o,d]=m.useState("CN"),[c,u]=m.useState("US"),[h,x]=m.useState(""),[g,j]=m.useState(""),[y,b]=m.useState(null),N=async()=>{if(!r){t({title:"Missing information",description:"Please provide a product description",variant:"destructive"});return}a(!0);try{const A=await fetch(`${Xbe}/hs-code/compliance/full-screening`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_description:r,hs_code:i||void 0,export_country:o,import_country:c,end_use:h||void 0,end_user:g||void 0})});if(!A.ok)throw new Error("Screening failed");const k=await A.json();b(k)}catch{t({title:"Screening failed",description:"Could not complete compliance screening",variant:"destructive"})}finally{a(!1)}},C=A=>{switch(A){case"prohibited":return e.jsxs(Q,{variant:"destructive",className:"text-lg px-4 py-1",children:[e.jsx(bs,{className:"h-4 w-4 mr-1"})," PROHIBITED"]});case"high":return e.jsxs(Q,{variant:"destructive",className:"text-lg px-4 py-1",children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"})," HIGH RISK"]});case"medium":return e.jsxs(Q,{className:"bg-amber-500 text-lg px-4 py-1",children:[e.jsx(Ve,{className:"h-4 w-4 mr-1"})," MEDIUM RISK"]});default:return e.jsxs(Q,{className:"bg-emerald-500 text-lg px-4 py-1",children:[e.jsx(Oe,{className:"h-4 w-4 mr-1"})," LOW RISK"]})}},_=[{title:"Export Controls",description:"EAR/ITAR screening",icon:Ot,link:"/tools/hs-code/export-controls",color:"text-blue-600"},{title:"Section 301",description:"Tariffs & exclusions",icon:Be,link:"/tools/hs-code/section-301",color:"text-purple-600"},{title:"AD/CVD Orders",description:"Trade remedy duties",icon:El,link:"/tools/hs-code/ad-cvd",color:"text-amber-600"},{title:"Quota Status",description:"TRQ monitoring",icon:io,link:"/tools/hs-code/quotas",color:"text-emerald-600"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Compliance Suite"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Comprehensive trade compliance screening and monitoring"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:_.map(A=>e.jsx(pe,{to:A.link,children:e.jsx($,{className:"hover:shadow-md transition-shadow cursor-pointer h-full",children:e.jsxs(U,{className:"pt-4",children:[e.jsx(A.icon,{className:`h-8 w-8 ${A.color} mb-2`}),e.jsx("h3",{className:"font-medium",children:A.title}),e.jsx("p",{className:"text-sm text-slate-500",children:A.description})]})})},A.title))}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(bi,{className:"h-5 w-5 text-blue-600"}),"Full Compliance Screening"]}),e.jsx(ue,{children:"Run comprehensive screening across all compliance areas"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Product Description *"}),e.jsx(Zt,{placeholder:"Describe the product, its specifications, materials, and intended use...",value:r,onChange:A=>n(A.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code (if known)"}),e.jsx(oe,{placeholder:"e.g., 8471.30.0100",value:i,onChange:A=>l(A.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Origin Country"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"CN",children:"China"}),e.jsx(K,{value:"US",children:"United States"}),e.jsx(K,{value:"DE",children:"Germany"}),e.jsx(K,{value:"JP",children:"Japan"}),e.jsx(K,{value:"KR",children:"South Korea"}),e.jsx(K,{value:"IN",children:"India"}),e.jsx(K,{value:"VN",children:"Vietnam"}),e.jsx(K,{value:"MX",children:"Mexico"}),e.jsx(K,{value:"CA",children:"Canada"}),e.jsx(K,{value:"TW",children:"Taiwan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Destination Country"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"US",children:"United States"}),e.jsx(K,{value:"CA",children:"Canada"}),e.jsx(K,{value:"MX",children:"Mexico"}),e.jsx(K,{value:"DE",children:"Germany"}),e.jsx(K,{value:"GB",children:"United Kingdom"}),e.jsx(K,{value:"JP",children:"Japan"}),e.jsx(K,{value:"AU",children:"Australia"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"End Use (optional)"}),e.jsx(oe,{placeholder:"Intended use",value:h,onChange:A=>x(A.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"End User (optional)"}),e.jsx(oe,{placeholder:"Company name",value:g,onChange:A=>j(A.target.value)})]})]}),e.jsx(M,{onClick:N,disabled:s,className:"w-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Running Full Screening..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bi,{className:"h-4 w-4 mr-2"}),"Run Full Compliance Screening"]})})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Screening Results"})}),e.jsx(U,{children:y?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center p-6 bg-slate-50 rounded-lg",children:[e.jsx("p",{className:"text-sm text-slate-500 mb-2",children:"Overall Risk Assessment"}),C(y.overall_risk),e.jsxs("p",{className:"text-sm text-slate-600 mt-2",children:[y.total_flags," compliance flag",y.total_flags!==1?"s":""," detected"]})]}),e.jsxs("div",{className:"space-y-3",children:[y.export_controls&&e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ot,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Export Controls"}),e.jsx("p",{className:"text-sm text-slate-500",children:y.export_controls.eccn||"EAR99"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.export_controls.license_required?e.jsx(Q,{variant:"destructive",children:"License Required"}):e.jsx(Q,{className:"bg-emerald-500",children:"No License"}),e.jsx(pe,{to:"/tools/hs-code/export-controls",children:e.jsx(xr,{className:"h-5 w-5 text-slate-400"})})]})]}),y.section_301&&e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"h-5 w-5 text-purple-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Section 301"}),e.jsx("p",{className:"text-sm text-slate-500",children:y.section_301.is_subject?`${y.section_301.rate_info?.additional_duty_rate||0}% additional duty`:"Not subject"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.section_301.is_subject?e.jsxs(e.Fragment,{children:[e.jsxs(Q,{className:"bg-amber-500",children:["+",y.section_301.rate_info?.additional_duty_rate||0,"%"]}),y.section_301.exclusions_available&&e.jsx(Q,{variant:"outline",className:"text-emerald-600",children:"Exclusion Available"})]}):e.jsx(Q,{className:"bg-emerald-500",children:"Clear"}),e.jsx(pe,{to:"/tools/hs-code/section-301",children:e.jsx(xr,{className:"h-5 w-5 text-slate-400"})})]})]}),y.ad_cvd&&e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(El,{className:"h-5 w-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"AD/CVD"}),e.jsx("p",{className:"text-sm text-slate-500",children:y.ad_cvd.has_orders?`${y.ad_cvd.order_count} order(s), ${y.ad_cvd.total_duty}% duty`:"No orders found"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.ad_cvd.has_orders?e.jsxs(Q,{className:"bg-amber-500",children:["+",y.ad_cvd.total_duty,"%"]}):e.jsx(Q,{className:"bg-emerald-500",children:"Clear"}),e.jsx(pe,{to:"/tools/hs-code/ad-cvd",children:e.jsx(xr,{className:"h-5 w-5 text-slate-400"})})]})]}),y.quotas&&e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(io,{className:"h-5 w-5 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Quotas"}),e.jsx("p",{className:"text-sm text-slate-500",children:y.quotas.has_quotas?`${y.quotas.quota_count} quota(s) apply`:"No quotas found"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[y.quotas.has_quotas?e.jsx(Q,{variant:"outline",children:"Check Status"}):e.jsx(Q,{className:"bg-emerald-500",children:"N/A"}),e.jsx(pe,{to:"/tools/hs-code/quotas",children:e.jsx(xr,{className:"h-5 w-5 text-slate-400"})})]})]})]}),y.all_flags&&y.all_flags.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Compliance Flags"}),e.jsx("ul",{className:"space-y-1",children:y.all_flags.map((A,k)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),A]},k))})]}),y.all_recommendations&&y.all_recommendations.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Recommendations"}),e.jsx("ul",{className:"space-y-1",children:y.all_recommendations.map((A,k)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx(Oe,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),A]},k))})]})]}):e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(bi,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Enter product details and run screening to see results"})]})})]})]})]})}const bM="http://localhost:8000";function tye(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState(!1),[i,l]=m.useState(""),[o,d]=m.useState(""),[c,u]=m.useState("US"),[h,x]=m.useState(""),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState(null),[_,A]=m.useState(""),[k,E]=m.useState([]),D=async()=>{if(!i||!h){t({title:"Missing information",description:"Please provide product description and destination country",variant:"destructive"});return}a(!0);try{const P=await fetch(`${bM}/hs-code/compliance/export-control/screen`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({product_description:i,hs_code:o||void 0,export_country:c,import_country:h,end_use:g||void 0,end_user:y||void 0})});if(!P.ok)throw new Error("Screening failed");const T=await P.json();C(T)}catch{t({title:"Screening failed",description:"Could not complete export control screening",variant:"destructive"})}finally{a(!1)}},R=async()=>{if(_){n(!0);try{const P=await fetch(`${bM}/hs-code/compliance/eccn/search?query=${encodeURIComponent(_)}`);if(!P.ok)throw new Error("Search failed");const T=await P.json();E(T.results||[])}catch{t({title:"Search failed",description:"Could not search ECCN database",variant:"destructive"})}finally{n(!1)}}},O=P=>{switch(P){case"prohibited":return e.jsx(Q,{variant:"destructive",className:"text-sm",children:"PROHIBITED"});case"high":return e.jsx(Q,{variant:"destructive",className:"text-sm",children:"HIGH RISK"});case"medium":return e.jsx(Q,{className:"bg-amber-500 text-sm",children:"MEDIUM RISK"});default:return e.jsx(Q,{variant:"secondary",className:"bg-emerald-500 text-white text-sm",children:"LOW RISK"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Export Controls Screening"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Screen products against EAR (Export Administration Regulations) and ITAR controls"})]}),e.jsxs(Os,{defaultValue:"screen",className:"space-y-4",children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"screen",children:"Product Screening"}),e.jsx(He,{value:"eccn",children:"ECCN Search"}),e.jsx(He,{value:"itar",children:"ITAR Categories"})]}),e.jsx(Qe,{value:"screen",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-blue-600"}),"Export Control Screening"]}),e.jsx(ue,{children:"Check if your product requires an export license"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Product Description *"}),e.jsx(Zt,{placeholder:"Describe the product, its technical specifications, and intended use...",value:i,onChange:P=>l(P.target.value),rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code (if known)"}),e.jsx(oe,{placeholder:"e.g., 8471.30.0100",value:o,onChange:P=>d(P.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Export From *"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"US",children:"United States"}),e.jsx(K,{value:"CA",children:"Canada"}),e.jsx(K,{value:"MX",children:"Mexico"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Destination Country *"}),e.jsx(oe,{placeholder:"e.g., DE, CN, JP",value:h,onChange:P=>x(P.target.value.toUpperCase()),maxLength:2})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"End Use (optional)"}),e.jsx(oe,{placeholder:"Intended use of the product",value:g,onChange:P=>j(P.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"End User (optional)"}),e.jsx(oe,{placeholder:"Name of the end user/company",value:y,onChange:P=>b(P.target.value)})]}),e.jsx(M,{onClick:D,disabled:s,className:"w-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Screening..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ot,{className:"h-4 w-4 mr-2"}),"Run Export Control Screening"]})})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Screening Results"})}),e.jsx(U,{children:N?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-50 rounded-lg",children:[e.jsx("span",{className:"font-medium",children:"Overall Risk Level"}),O(N.overall_risk)]}),e.jsxs("div",{className:"flex items-center gap-3 p-4 border rounded-lg",children:[N.license_required?e.jsx(Ve,{className:"h-6 w-6 text-amber-500"}):e.jsx(Oe,{className:"h-6 w-6 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:N.license_required?"Export License May Be Required":"No License Required"}),e.jsx("p",{className:"text-sm text-slate-600",children:N.license_required?"Consult with compliance officer before proceeding":"Product appears to be EAR99 or not controlled"})]})]}),N.ear_results&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"EAR Classification"}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{variant:"outline",children:N.ear_results.eccn}),N.ear_results.category&&e.jsxs(Q,{variant:"secondary",children:["Category ",N.ear_results.category]})]}),N.ear_results.description&&e.jsx("p",{className:"text-sm text-slate-600",children:N.ear_results.description}),N.ear_results.control_reasons&&N.ear_results.control_reasons.length>0&&e.jsx("div",{className:"mt-2 flex flex-wrap gap-1",children:N.ear_results.control_reasons.map(P=>e.jsx(Q,{variant:"outline",className:"text-xs",children:P},P))})]})]}),N.itar_results&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"ITAR Classification"}),e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ks,{className:"h-5 w-5 text-red-600"}),e.jsxs("span",{className:"font-medium",children:["USML Category ",N.itar_results.usml_category]})]}),N.itar_results.description&&e.jsx("p",{className:"text-sm text-slate-600",children:N.itar_results.description}),N.itar_results.significant_military_equipment&&e.jsx(Q,{variant:"destructive",className:"mt-2",children:"Significant Military Equipment"})]})]}),N.flags&&N.flags.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Compliance Flags"}),e.jsx("ul",{className:"space-y-2",children:N.flags.map((P,T)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-500 mt-0.5 flex-shrink-0"}),P]},T))})]}),N.recommendations&&N.recommendations.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Recommendations"}),e.jsx("ul",{className:"space-y-2",children:N.recommendations.map((P,T)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-600",children:[e.jsx(Ja,{className:"h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0"}),P]},T))})]})]}):e.jsxs("div",{className:"text-center py-12 text-slate-500",children:[e.jsx(Ot,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Enter product details and run screening to see results"})]})})]})]})}),e.jsx(Qe,{value:"eccn",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"ECCN Database Search"]}),e.jsx(ue,{children:"Search the Commerce Control List for Export Control Classification Numbers"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{placeholder:"Search by ECCN (e.g., 3A001) or product description...",value:_,onChange:P=>A(P.target.value),onKeyPress:P=>P.key==="Enter"&&R()}),e.jsx(M,{onClick:R,disabled:r,children:r?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsx(Bt,{className:"h-4 w-4"})})]}),k.length>0&&e.jsx("div",{className:"space-y-3",children:k.map((P,T)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{className:"font-mono",children:P.eccn}),P.category&&e.jsxs(Q,{variant:"outline",children:["Category ",P.category]}),P.is_itar&&e.jsx(Q,{variant:"destructive",children:"ITAR"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:P.description}),P.control_reasons&&P.control_reasons.length>0&&e.jsxs("div",{className:"mt-2 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"Control reasons:"}),P.control_reasons.map(B=>e.jsx(Q,{variant:"secondary",className:"text-xs",children:B},B))]})]},T))})]})]})}),e.jsx(Qe,{value:"itar",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(tV,{className:"h-5 w-5 text-red-600"}),"USML Categories (ITAR)"]}),e.jsx(ue,{children:"US Munitions List categories under International Traffic in Arms Regulations"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[{cat:"I",name:"Firearms, Close Assault Weapons and Combat Shotguns"},{cat:"II",name:"Guns and Armament"},{cat:"III",name:"Ammunition/Ordnance"},{cat:"IV",name:"Launch Vehicles, Guided Missiles, Ballistic Missiles"},{cat:"V",name:"Explosives and Energetic Materials"},{cat:"VI",name:"Surface Vessels of War"},{cat:"VII",name:"Ground Vehicles"},{cat:"VIII",name:"Aircraft and Related Articles"},{cat:"IX",name:"Military Training Equipment and Training"},{cat:"X",name:"Personal Protective Equipment"},{cat:"XI",name:"Military Electronics"},{cat:"XII",name:"Fire Control, Range Finder, Optical and Guidance"},{cat:"XIII",name:"Materials and Miscellaneous Articles"},{cat:"XIV",name:"Toxicological Agents"},{cat:"XV",name:"Spacecraft and Related Articles"},{cat:"XVI",name:"Nuclear Weapons Related Articles"},{cat:"XVII",name:"Classified Articles"},{cat:"XVIII",name:"Directed Energy Weapons"},{cat:"XIX",name:"Gas Turbine Engines and Associated Equipment"},{cat:"XX",name:"Submersible Vessels and Related Articles"},{cat:"XXI",name:"Articles, Technical Data, and Defense Services"}].map(P=>e.jsx("div",{className:"p-3 border rounded-lg",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"font-mono",children:P.cat}),e.jsx("span",{className:"text-sm",children:P.name})]})},P.cat))})})]})})]})]})}const yM="http://localhost:8000";function sye(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState(!1),[i,l]=m.useState(""),[o,d]=m.useState("CN"),[c,u]=m.useState(null),[h,x]=m.useState(""),[g,j]=m.useState("all"),[y,b]=m.useState("active"),[N,C]=m.useState([]),_=async()=>{if(!i){t({title:"Missing HS Code",description:"Please enter an HS code to check",variant:"destructive"});return}a(!0);try{const E=await fetch(`${yM}/hs-code/compliance/section-301/check/${i}?export_country=${o}`);if(!E.ok)throw new Error("Check failed");const D=await E.json();u(D)}catch{t({title:"Check failed",description:"Could not check Section 301 status",variant:"destructive"})}finally{a(!1)}},A=async()=>{n(!0);try{const E=new URLSearchParams;h&&E.append("hs_code",h),g!=="all"&&E.append("list_number",g),E.append("status",y);const D=await fetch(`${yM}/hs-code/compliance/section-301/exclusions?${E}`);if(!D.ok)throw new Error("Search failed");const R=await D.json();C(R.exclusions||[])}catch{t({title:"Search failed",description:"Could not search exclusions",variant:"destructive"})}finally{n(!1)}},k=E=>{switch(E){case"active":return e.jsx(Q,{className:"bg-emerald-500",children:"Active"});case"expired":return e.jsx(Q,{variant:"secondary",children:"Expired"});case"extended":return e.jsx(Q,{className:"bg-blue-500",children:"Extended"});default:return e.jsx(Q,{variant:"outline",children:E})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Section 301 Tariffs & Exclusions"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Check Section 301 tariff applicability and search for product exclusions"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-blue-600"}),"Check Section 301 Status"]}),e.jsx(ue,{children:"Determine if your product is subject to Section 301 tariffs"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code *"}),e.jsx(oe,{placeholder:"e.g., 8471.30.0100",value:i,onChange:E=>l(E.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Origin Country"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"CN",children:"China"}),e.jsx(K,{value:"HK",children:"Hong Kong"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Section 301 tariffs primarily apply to China-origin goods"})]}),e.jsx(M,{onClick:_,disabled:s,className:"w-full",children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Check Status"]})}),c&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${c.is_subject_to_301?"bg-amber-50 border-amber-200":"bg-emerald-50 border-emerald-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[c.is_subject_to_301?e.jsx(Ve,{className:"h-5 w-5 text-amber-600"}):e.jsx(Oe,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"font-medium",children:c.is_subject_to_301?"Subject to Section 301 Tariffs":"Not Subject to Section 301 Tariffs"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:c.net_effect})]}),c.rate_info&&e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Tariff Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsx("span",{className:"text-slate-500",children:"List:"}),e.jsxs("span",{children:["List ",c.rate_info.list_number]}),e.jsx("span",{className:"text-slate-500",children:"Additional Duty:"}),e.jsxs("span",{className:"font-medium text-amber-600",children:[c.rate_info.additional_duty_rate,"%"]}),c.rate_info.effective_date&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-500",children:"Effective:"}),e.jsx("span",{children:new Date(c.rate_info.effective_date).toLocaleDateString()})]})]})]}),c.exclusions&&c.exclusions.length>0&&e.jsxs("div",{className:"p-4 bg-emerald-50 border border-emerald-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-emerald-700 mb-2",children:"Exclusions Available"}),c.exclusions.map((E,D)=>e.jsxs("div",{className:"text-sm space-y-1 pb-2 border-b last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"text-xs",children:E.exclusion_number}),e.jsxs("span",{className:"text-xs text-slate-500",children:[E.days_remaining," days remaining"]})]}),e.jsx("p",{className:"text-slate-600",children:E.product_description})]},D))]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Search Exclusions"]}),e.jsx(ue,{children:"Find Section 301 product exclusions"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code (optional)"}),e.jsx(oe,{placeholder:"Filter by HS code...",value:h,onChange:E=>x(E.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"List"}),e.jsxs(Te,{value:g,onValueChange:j,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Lists"}),e.jsx(K,{value:"1",children:"List 1 ($34B)"}),e.jsx(K,{value:"2",children:"List 2 ($16B)"}),e.jsx(K,{value:"3",children:"List 3 ($200B)"}),e.jsx(K,{value:"4A",children:"List 4A ($120B)"}),e.jsx(K,{value:"4B",children:"List 4B"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:y,onValueChange:b,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"active",children:"Active Only"}),e.jsx(K,{value:"expired",children:"Expired"}),e.jsx(K,{value:"all",children:"All"})]})]})]})]}),e.jsx(M,{onClick:A,disabled:r,className:"w-full",children:r?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):"Search Exclusions"})]})]})]}),N.length>0&&e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{children:["Search Results (",N.length,")"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:N.map((E,D)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:E.exclusion_number}),e.jsxs(Q,{variant:"secondary",children:["List ",E.list_number]}),k(E.status)]}),e.jsx("span",{className:"text-xs text-slate-500 font-mono",children:E.hs_code})]}),e.jsx("p",{className:"text-sm text-slate-700 mb-2",children:E.product_description}),E.product_scope&&e.jsx("p",{className:"text-xs text-slate-500 mb-2",children:E.product_scope}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"h-3 w-3"}),new Date(E.effective_from).toLocaleDateString()," - ",new Date(E.effective_to).toLocaleDateString()]}),E.status==="active"&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),E.days_remaining," days remaining"]}),E.extensions_count>0&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:[E.extensions_count," extension",E.extensions_count>1?"s":""]}),E.fr_citation&&e.jsxs("a",{href:`https://www.federalregister.gov/documents/search?conditions%5Bterm%5D=${E.fr_citation}`,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-1 text-blue-600 hover:underline",children:[e.jsx(ir,{className:"h-3 w-3"}),E.fr_citation]})]})]},D))})})]}),e.jsx($,{className:"bg-blue-50 border-blue-200",children:e.jsxs(U,{className:"pt-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"About Section 301 Tariffs"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:"â€¢ Section 301 tariffs are additional duties on Chinese-origin goods"}),e.jsx("li",{children:"â€¢ Rates range from 7.5% to 25% depending on the product list"}),e.jsx("li",{children:"â€¢ Exclusions may be available for specific products"}),e.jsx("li",{children:"â€¢ Exclusions have expiration dates and may be extended"}),e.jsx("li",{children:"â€¢ Check if your product qualifies for an existing exclusion before importing"})]})]})})]})}const Zk="http://localhost:8000";function aye(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState(!1),[i,l]=m.useState(!1),[o,d]=m.useState(""),[c,u]=m.useState(""),[h,x]=m.useState(null),[g,j]=m.useState(""),[y,b]=m.useState("all"),[N,C]=m.useState("all"),[_,A]=m.useState([]),[k,E]=m.useState([]);m.useEffect(()=>{D()},[]);const D=async()=>{l(!0);try{const P=await fetch(`${Zk}/hs-code/compliance/ad-cvd/countries`);if(P.ok){const T=await P.json();E(T.countries||[])}}catch(P){console.error("Failed to load countries:",P)}finally{l(!1)}},R=async()=>{if(!o||!c){t({title:"Missing information",description:"Please enter both HS code and country",variant:"destructive"});return}a(!0);try{const P=await fetch(`${Zk}/hs-code/compliance/ad-cvd/check?hs_code=${o}&country=${c}`);if(!P.ok)throw new Error("Check failed");const T=await P.json();x(T)}catch{t({title:"Check failed",description:"Could not check AD/CVD status",variant:"destructive"})}finally{a(!1)}},O=async()=>{n(!0);try{const P=new URLSearchParams;g&&P.append("product",g),y!=="all"&&P.append("country",y),N!=="all"&&P.append("order_type",N);const T=await fetch(`${Zk}/hs-code/compliance/ad-cvd/search?${P}`);if(!T.ok)throw new Error("Search failed");const B=await T.json();A(B.orders||[])}catch{t({title:"Search failed",description:"Could not search AD/CVD orders",variant:"destructive"})}finally{n(!1)}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"AD/CVD Orders"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Check Antidumping (AD) and Countervailing Duty (CVD) orders on imports"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs($,{className:"lg:col-span-2",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(El,{className:"h-5 w-5 text-blue-600"}),"Check AD/CVD Applicability"]}),e.jsx(ue,{children:"Determine if AD/CVD duties apply to your product and country"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code *"}),e.jsx(oe,{placeholder:"e.g., 7306.30.5028",value:o,onChange:P=>d(P.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Origin Country *"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select country..."})}),e.jsxs(De,{children:[k.map(P=>e.jsxs(K,{value:P.code,children:[P.name||P.code," (",P.active_orders," orders)"]},P.code)),k.length===0&&e.jsxs(e.Fragment,{children:[e.jsx(K,{value:"CN",children:"China"}),e.jsx(K,{value:"IN",children:"India"}),e.jsx(K,{value:"KR",children:"South Korea"}),e.jsx(K,{value:"VN",children:"Vietnam"}),e.jsx(K,{value:"TW",children:"Taiwan"}),e.jsx(K,{value:"TH",children:"Thailand"}),e.jsx(K,{value:"MX",children:"Mexico"}),e.jsx(K,{value:"JP",children:"Japan"})]})]})]})]})]}),e.jsx(M,{onClick:R,disabled:s,children:s?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Checking..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Check AD/CVD Status"]})}),h&&e.jsxs("div",{className:"mt-4 space-y-4",children:[e.jsxs("div",{className:`p-4 rounded-lg border ${h.has_ad_cvd?"bg-amber-50 border-amber-200":"bg-emerald-50 border-emerald-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[h.has_ad_cvd?e.jsx(Ve,{className:"h-5 w-5 text-amber-600"}):e.jsx(Oe,{className:"h-5 w-5 text-emerald-600"}),e.jsx("span",{className:"font-medium",children:h.has_ad_cvd?`AD/CVD Duties May Apply (${h.total_estimated_duty}%)`:"No AD/CVD Orders Found"})]}),e.jsx("p",{className:"text-sm text-slate-600",children:h.message})]}),h.orders.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium text-slate-700",children:"Applicable Orders"}),h.orders.map((P,T)=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{variant:"outline",className:"font-mono",children:P.case_number}),e.jsx(Q,{className:P.order_type==="AD"?"bg-blue-500":P.order_type==="CVD"?"bg-purple-500":"bg-slate-500",children:P.order_type})]}),e.jsx("p",{className:"font-medium",children:P.product_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 font-medium",children:[e.jsx(Vw,{className:"h-4 w-4"}),P.deposit_rate,"%"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"deposit rate"})]})]}),P.scope&&e.jsx("p",{className:"text-sm text-slate-600 mb-2",children:P.scope}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-slate-500",children:[P.next_review&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"h-3 w-3"}),"Next review: ",new Date(P.next_review).toLocaleDateString()]}),P.fr_citation&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-3 w-3"}),P.fr_citation]})]})]},T))]}),h.recommendations&&h.recommendations.length>0&&e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Recommendations"}),e.jsx("ul",{className:"text-sm text-blue-800 space-y-1",children:h.recommendations.map((P,T)=>e.jsxs("li",{children:["â€¢ ",P]},T))})]})]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5"}),"Countries with Orders"]})}),e.jsx(U,{children:i?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-slate-400"})}):k.length>0?e.jsx("div",{className:"space-y-2",children:k.slice(0,15).map(P=>e.jsxs("button",{onClick:()=>{b(P.code),O()},className:"w-full flex items-center justify-between p-2 rounded hover:bg-slate-50 text-left",children:[e.jsx("span",{className:"text-sm",children:P.name||P.code}),e.jsx(Q,{variant:"secondary",children:P.active_orders})]},P.code))}):e.jsx("p",{className:"text-sm text-slate-500 text-center py-4",children:"No country data available"})})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5"}),"Search AD/CVD Orders"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"md:col-span-2 space-y-2",children:[e.jsx(Z,{children:"Product Name"}),e.jsx(oe,{placeholder:"e.g., steel, aluminum, solar cells...",value:g,onChange:P=>j(P.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country"}),e.jsxs(Te,{value:y,onValueChange:b,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Countries"}),k.map(P=>e.jsx(K,{value:P.code,children:P.name||P.code},P.code))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Order Type"}),e.jsxs(Te,{value:N,onValueChange:C,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Types"}),e.jsx(K,{value:"AD",children:"Antidumping (AD)"}),e.jsx(K,{value:"CVD",children:"Countervailing (CVD)"})]})]})]})]}),e.jsx(M,{onClick:O,disabled:r,children:r?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Search Orders"]})}),_.length>0&&e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("p",{className:"text-sm text-slate-500",children:[_.length," orders found"]}),_.map((P,T)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:P.case_number}),e.jsx(Q,{className:P.order_type==="AD"?"bg-blue-500":P.order_type==="CVD"?"bg-purple-500":"bg-slate-500",children:P.order_type}),e.jsx(Q,{variant:P.status==="active"?"default":"secondary",children:P.status})]}),e.jsx("p",{className:"font-medium",children:P.product_name}),e.jsx("p",{className:"text-sm text-slate-500",children:P.country_name||P.country})]}),(P.current_deposit_rate||P.all_others_rate)&&e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"flex items-center gap-1 text-amber-600 font-medium",children:[e.jsx(Vw,{className:"h-4 w-4"}),P.current_deposit_rate||P.all_others_rate,"%"]}),e.jsx("span",{className:"text-xs text-slate-500",children:P.current_deposit_rate?"deposit rate":"all others rate"})]})]}),P.hs_codes&&P.hs_codes.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[P.hs_codes.slice(0,5).map((B,G)=>e.jsx(Q,{variant:"outline",className:"text-xs font-mono",children:B},G)),P.hs_codes.length>5&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",P.hs_codes.length-5," more"]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-slate-500",children:[P.order_date&&e.jsxs("span",{children:["Order date: ",new Date(P.order_date).toLocaleDateString()]}),P.next_review_due&&e.jsxs("span",{children:["Next review: ",new Date(P.next_review_due).toLocaleDateString()]})]})]},T))]})]})]}),e.jsx($,{className:"bg-blue-50 border-blue-200",children:e.jsxs(U,{className:"pt-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"About AD/CVD Duties"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm text-blue-800",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Antidumping (AD)"}),e.jsx("p",{children:"Duties imposed when foreign goods are sold in the US at less than fair value, injuring US industry."})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:"Countervailing Duties (CVD)"}),e.jsx("p",{children:"Duties imposed to offset subsidies provided by foreign governments to their exporters."})]})]})]})})]})}const Jk="http://localhost:8000";function rye(){const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState(!1),[i,l]=m.useState(""),[o,d]=m.useState("all"),[c,u]=m.useState("all"),[h,x]=m.useState([]),[g,j]=m.useState(75),[y,b]=m.useState([]);m.useEffect(()=>{N()},[g]);const N=async()=>{n(!0);try{const E=await fetch(`${Jk}/hs-code/compliance/quotas/alerts?threshold=${g}`);if(E.ok){const D=await E.json();b(D.alerts||[])}}catch(E){console.error("Failed to load alerts:",E)}finally{n(!1)}},C=async()=>{a(!0);try{const E=new URLSearchParams;i&&E.append("hs_code",i),o!=="all"&&E.append("fta",o),c!=="all"&&E.append("status",c);const D=await fetch(`${Jk}/hs-code/compliance/quotas/search?${E}`);if(!D.ok)throw new Error("Search failed");const R=await D.json();x(R.quotas||[])}catch{t({title:"Search failed",description:"Could not search quotas",variant:"destructive"})}finally{a(!1)}},_=async()=>{if(!i){t({title:"Missing HS Code",description:"Please enter an HS code to check",variant:"destructive"});return}a(!0);try{const E=await fetch(`${Jk}/hs-code/compliance/quotas/check/${i}${o!=="all"?`?fta=${o}`:""}`);if(!E.ok)throw new Error("Check failed");const D=await E.json();x(D.quotas||[]),D.has_quotas||t({title:"No quotas found",description:D.message||"No active quotas for this HS code"})}catch{t({title:"Check failed",description:"Could not check quota status",variant:"destructive"})}finally{a(!1)}},A=E=>{switch(E){case"open":return e.jsx(Q,{className:"bg-emerald-500",children:"Open"});case"near_full":return e.jsx(Q,{className:"bg-amber-500",children:"Near Full"});case"full":return e.jsx(Q,{variant:"destructive",children:"Full"});case"closed":return e.jsx(Q,{variant:"secondary",children:"Closed"});default:return e.jsx(Q,{variant:"outline",children:E})}},k=E=>E>=100?"bg-red-500":E>=90?"bg-red-400":E>=75?"bg-amber-500":E>=50?"bg-amber-400":"bg-emerald-500";return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Quota Status Monitoring"}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Track tariff rate quota (TRQ) fill rates and availability"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs($,{className:"lg:col-span-2",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-5 w-5 text-blue-600"}),"Check Quota Status"]}),e.jsx(ue,{children:"Find applicable quotas for your product"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code"}),e.jsx(oe,{placeholder:"e.g., 0201.30.00",value:i,onChange:E=>l(E.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"FTA/Agreement"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Agreements"}),e.jsx(K,{value:"USMCA",children:"USMCA"}),e.jsx(K,{value:"KORUS",children:"Korea FTA"}),e.jsx(K,{value:"CAFTA",children:"CAFTA-DR"}),e.jsx(K,{value:"AUSFTA",children:"Australia FTA"}),e.jsx(K,{value:"WTO",children:"WTO/MFN"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"open",children:"Open"}),e.jsx(K,{value:"near_full",children:"Near Full"}),e.jsx(K,{value:"full",children:"Full"})]})]})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{onClick:_,disabled:s,children:s?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(Bt,{className:"h-4 w-4 mr-2"}),"Check HS Code"]})}),e.jsx(M,{variant:"outline",onClick:C,disabled:s,children:"Browse All Quotas"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"h-5 w-5 text-amber-500"}),"High Fill Alerts"]}),e.jsxs(ue,{children:["Quotas above ",g,"% capacity"]})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsx(Z,{className:"text-xs",children:"Alert Threshold"}),e.jsx("div",{className:"flex gap-2",children:[50,75,90].map(E=>e.jsxs(M,{variant:g===E?"default":"outline",size:"sm",onClick:()=>j(E),children:[E,"%"]},E))})]}),r?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-slate-400"})}):y.length>0?e.jsx("div",{className:"space-y-3",children:y.slice(0,5).map((E,D)=>e.jsxs("div",{className:"p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium truncate pr-2",children:E.quota_name}),A(E.status)]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{value:Math.min(E.fill_rate_percent,100),className:"h-2 flex-1"}),e.jsxs("span",{className:"text-xs font-medium",children:[E.fill_rate_percent.toFixed(0),"%"]})]}),E.rate_impact>0&&e.jsxs("p",{className:"text-xs text-amber-600 mt-1",children:["+",E.rate_impact,"% over-quota rate"]})]},D))}):e.jsxs("div",{className:"text-center py-6 text-slate-500",children:[e.jsx(Oe,{className:"h-8 w-8 mx-auto mb-2 text-emerald-500"}),e.jsx("p",{className:"text-sm",children:"No high-fill quotas"})]})]})]})]}),h.length>0&&e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{children:["Quota Results (",h.length,")"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:h.map((E,D)=>e.jsxs("div",{className:"p-4 border rounded-lg hover:bg-slate-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:E.quota_number}),A(E.status),E.fta_code&&e.jsx(Q,{variant:"secondary",children:E.fta_code})]}),e.jsx("h3",{className:"font-medium",children:E.quota_name})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-2xl font-bold",children:[E.fill_rate_percent.toFixed(1),"%"]}),e.jsx("span",{className:"text-xs text-slate-500",children:"fill rate"})]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mb-1",children:[e.jsxs("span",{children:[E.quantity_used.toLocaleString()," / ",E.quota_quantity.toLocaleString()," ",E.quota_unit||"units"]}),e.jsxs("span",{children:[(E.quota_quantity-E.quantity_used).toLocaleString()," remaining"]})]}),e.jsx("div",{className:"h-3 bg-slate-100 rounded-full overflow-hidden",children:e.jsx("div",{className:`h-full transition-all ${k(E.fill_rate_percent)}`,style:{width:`${Math.min(E.fill_rate_percent,100)}%`}})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 p-3 bg-slate-50 rounded-lg text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"In-Quota Rate"}),e.jsx("div",{className:"font-medium text-emerald-600",children:E.in_quota_rate!==void 0?`${E.in_quota_rate}%`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Over-Quota Rate"}),e.jsx("div",{className:"font-medium text-amber-600",children:E.over_quota_rate!==void 0?`${E.over_quota_rate}%`:"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Period Ends"}),e.jsx("div",{className:"font-medium",children:E.period_end?new Date(E.period_end).toLocaleDateString():"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-slate-500",children:"Days Left"}),e.jsxs("div",{className:"font-medium flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),E.days_remaining??"N/A"]})]})]}),E.hs_codes&&E.hs_codes.length>0&&e.jsxs("div",{className:"mt-3 flex flex-wrap gap-1",children:[e.jsx("span",{className:"text-xs text-slate-500",children:"HS Codes:"}),E.hs_codes.slice(0,8).map((R,O)=>e.jsx(Q,{variant:"outline",className:"text-xs font-mono",children:R},O)),E.hs_codes.length>8&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",E.hs_codes.length-8," more"]})]}),E.recommendation&&e.jsx("div",{className:`mt-3 p-2 rounded text-sm ${E.fill_rate_percent>=90?"bg-red-50 text-red-700":E.fill_rate_percent>=75?"bg-amber-50 text-amber-700":"bg-emerald-50 text-emerald-700"}`,children:e.jsxs("div",{className:"flex items-center gap-2",children:[E.fill_rate_percent>=90?e.jsx(Ve,{className:"h-4 w-4"}):e.jsx(Vt,{className:"h-4 w-4"}),E.recommendation]})})]},D))})})]}),e.jsx($,{className:"bg-blue-50 border-blue-200",children:e.jsxs(U,{className:"pt-6",children:[e.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"About Tariff Rate Quotas (TRQ)"}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:'â€¢ TRQs allow a certain quantity of goods to enter at a lower "in-quota" duty rate'}),e.jsx("li",{children:'â€¢ Once the quota is filled, additional imports face higher "over-quota" rates'}),e.jsx("li",{children:"â€¢ Quotas typically reset annually or quarterly"}),e.jsx("li",{children:"â€¢ Some quotas are first-come-first-served, others require licenses"}),e.jsx("li",{children:"â€¢ Monitor fill rates closely to secure preferential rates"})]})]})})]})}const nye=[{name:"Commercial Invoice",icon:Fu,description:"Pre-filled from LC, bank-compliant format"},{name:"Packing List",icon:Ps,description:"Detailed carton breakdown with weights"},{name:"Certificate of Origin",icon:ag,description:"Multiple formats: Form A, EUR.1, RCEP"},{name:"Bill of Lading Draft",icon:Nue,description:"Standard layout for carrier/shipper review"},{name:"Weight Certificate",icon:Be,description:"Auto-calculated from packing details"},{name:"Beneficiary Certificate",icon:Gs,description:"LC-compliant attestation documents"},{name:"Insurance Certificate",icon:Ot,description:"Marine cargo policy certificates"},{name:"Inspection Certificate",icon:Gs,description:"Pre-shipment inspection reports"}],iye=[{icon:gn,title:"Pre-Filled from LC Data",description:"Upload your LC once. All documents auto-populate with correct buyer, seller, goods description, and terms.",bullets:["Auto-extract LC terms","Consistent data across docs","No manual re-entry","Reduces typo errors by 95%"]},{icon:Ot,title:"Bank-Compliant Formats",description:"Templates designed to pass bank examination. Formatting, fonts, and layouts that banks expect to see.",bullets:["UCP600 compliant","ISBP745 aligned","Bank-specific templates","Proper document dating"]},{icon:ha,title:"Country-Specific Templates",description:"Certificate of Origin formats for every FTA. Know exactly which form your destination requires.",bullets:["Form A (GSP)","EUR.1, EUR-MED","RCEP, CPTPP forms","US-specific formats"]},{icon:Gs,title:"Consistency Checker",description:"Automatic cross-check between documents. Catch weight mismatches, description differences, and value discrepancies.",bullets:["Cross-doc validation","Weight reconciliation","Value matching","Description consistency"]},{icon:Gt,title:"Multiple Export Formats",description:"Download as PDF for submission, Word for editing, or Excel for data manipulation.",bullets:["Bank-ready PDFs","Editable Word docs","Excel data export","Batch download"]},{icon:mt,title:"10x Faster Preparation",description:"What takes hours manually takes minutes with Doc Generator. Focus on your business, not paperwork.",bullets:["Minutes not hours","Template library","Reuse previous docs","Bulk generation"]}],lye=[{step:"01",icon:Ps,title:"Upload Your LC",description:"Upload your Letter of Credit or enter shipment details manually",time:"30 sec"},{step:"02",icon:bh,title:"Select Documents",description:"Choose which documents you need - invoice, packing list, COO, etc.",time:"10 sec"},{step:"03",icon:Gt,title:"Review & Download",description:"Preview each document, make adjustments, and download bank-ready PDFs",time:"20 sec"}],oye=[{value:"95%",label:"Error Reduction"},{value:"10x",label:"Faster Prep"},{value:"15+",label:"Doc Types"},{value:"6",label:"Banks Supported"}],cye=[{tier:"Starter",docs:"10 doc sets/mo",price:"$29/mo",description:"For occasional exporters",features:["Basic templates","PDF export","Email support"]},{tier:"Professional",docs:"50 doc sets/mo",price:"$79/mo",description:"For regular exporters",features:["All templates","Word/Excel export","LC integration","Priority support"],popular:!0},{tier:"Enterprise",docs:"Unlimited",price:"$199/mo",description:"For freight & banks",features:["Everything in Pro","Custom templates","API access","White-label option"]}],dye=[{q:"What documents can I generate?",a:"We support 15+ trade document types including Commercial Invoice, Packing List, Certificate of Origin (Form A, EUR.1, RCEP), Bill of Lading draft, Weight Certificate, Beneficiary Certificate, Bill of Exchange, Inspection Certificate, Insurance Certificate, and Shipping Instructions."},{q:"Can I customize the templates?",a:"Yes! Professional and Enterprise plans allow you to customize templates with your logo, letterhead, and specific formatting. Enterprise plans include fully custom template design."},{q:"How does LC integration work?",a:"Upload your LC PDF and our AI extracts key fields - buyer/seller details, goods description, amounts, shipping terms, and document requirements. These auto-populate into every document you generate."},{q:"Are the documents compliant with UCP600?",a:"Yes, all templates are designed to meet UCP600 and ISBP745 requirements. We follow ICC guidelines for document formatting, dating, and content structure."},{q:"Can I edit documents after generation?",a:"Absolutely. Download in Word format for editing, or use our built-in editor to make changes before downloading the final PDF."}],uye=[{aspect:"Time to prepare",before:"2-4 hours",after:"15 minutes",icon:mt},{aspect:"Data entry errors",before:"Frequent",after:"Zero",icon:Be},{aspect:"Document consistency",before:"Manual check",after:"Auto-synced",icon:Oe},{aspect:"Bank rejection rate",before:"High",after:"<1%",icon:Ot}],mye=()=>{const[t,s]=m.useState(null);return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{className:"relative min-h-screen",children:[e.jsxs("section",{className:"relative pt-48 md:pt-48 pb-24",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center px-4 py-1.5 rounded-full border border-[#B2F273]/20 bg-[#B2F273]/5 backdrop-blur-sm mb-6",children:e.jsx("span",{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"AI-Powered Document Generation"})}),e.jsxs("h1",{className:"text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-8 leading-tight font-display",children:["Generate Trade Docs in",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Minutes, Not Hours."})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 max-w-2xl mx-auto font-light leading-relaxed mb-10",children:"Bank-compliant commercial invoices, packing lists, and certificates of origin - all pre-filled from your LC data. No more manual entry, no more typos."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] text-[#00261C] hover:bg-[#a3e662] text-lg px-8 h-14 font-bold shadow-[0_0_20px_rgba(178,242,115,0.3)] border-none",asChild:!0,children:e.jsxs(pe,{to:"/doc-generator/dashboard",children:["Start Generating",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})}),e.jsx(M,{variant:"outline",size:"lg",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 text-lg px-8 h-14 bg-transparent",asChild:!0,children:e.jsx(pe,{to:"/doc-generator/dashboard/new",children:"Create First Document"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60 mb-16",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"UCP600 Compliant"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Pre-filled from LC"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"20+ Document Types"]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 sm:gap-6 border-t border-[#EDF5F2]/10 pt-12",children:oye.map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white font-display",children:[a.value,e.jsx("span",{className:"text-[#B2F273]",children:a.unit})]}),e.jsx("div",{className:"text-xs sm:text-sm text-[#EDF5F2]/40 mt-1 font-mono uppercase tracking-wider",children:a.label})]},r))})]})})]}),e.jsxs("section",{className:"relative py-24 bg-[#00261C] overflow-hidden border-y border-[#EDF5F2]/10",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("p",{className:"text-[#B2F273] font-mono font-semibold mb-4 tracking-wide uppercase text-sm",children:"The Difference"}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-4 font-display",children:["Document Prep is a ",e.jsx("span",{className:"text-[#EDF5F2]/40 line-through decoration-[#EDF5F2]/40",children:"Time Sink"})]}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto text-lg",children:"See how Doc Generator transforms your workflow"})]}),e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 mb-4 text-sm font-semibold",children:[e.jsx("div",{className:"text-[#EDF5F2]/40 pl-4 font-mono uppercase tracking-wider",children:"Aspect"}),e.jsx("div",{className:"text-center text-[#EDF5F2]/40 font-mono uppercase tracking-wider",children:"The Old Way"}),e.jsx("div",{className:"text-center text-[#B2F273] font-mono uppercase tracking-wider",children:"With Doc Generator"})]}),e.jsx("div",{className:"space-y-3",children:uye.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 rounded-xl p-4 border border-[#EDF5F2]/10",children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#00261C] rounded-lg flex items-center justify-center shrink-0 border border-[#EDF5F2]/10",children:e.jsx(a.icon,{className:"w-5 h-5 text-[#EDF5F2]/60"})}),e.jsx("span",{className:"text-white font-medium text-sm",children:a.aspect})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 bg-[#EDF5F2]/5 rounded-lg text-[#EDF5F2]/40 text-xs border border-[#EDF5F2]/10 font-mono",children:[e.jsx(fn,{className:"w-3.5 h-3.5"}),a.before]}),e.jsxs("span",{className:"flex-1 inline-flex items-center justify-center gap-1.5 px-3 py-2 bg-[#B2F273]/10 rounded-lg text-[#B2F273] text-xs border border-[#B2F273]/20 font-mono",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),a.after]})]})]}),e.jsxs("div",{className:"hidden md:grid grid-cols-3 gap-4 items-center",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#00261C] rounded-lg flex items-center justify-center shrink-0 border border-[#EDF5F2]/10",children:e.jsx(a.icon,{className:"w-5 h-5 text-[#EDF5F2]/60"})}),e.jsx("span",{className:"text-white font-medium text-sm",children:a.aspect})]}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-[#EDF5F2]/5 rounded-lg text-[#EDF5F2]/40 text-sm border border-[#EDF5F2]/10 font-mono",children:[e.jsx(fn,{className:"w-4 h-4"}),a.before]})}),e.jsx("div",{className:"text-center",children:e.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1.5 bg-[#B2F273]/10 rounded-lg text-[#B2F273] text-sm border border-[#B2F273]/20 font-mono",children:[e.jsx(Oe,{className:"w-4 h-4"}),a.after]})})]})]},r))})]})]})]}),e.jsxs("section",{className:"relative py-24 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-16",children:[e.jsx("h2",{className:"text-3xl md:text-5xl font-bold text-white mb-6 font-display",children:"From LC to Documents in Three Steps"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Upload your LC, select documents, download. That's it."})]}),e.jsx("div",{className:"max-w-5xl mx-auto",children:e.jsx("div",{className:"grid md:grid-cols-3 gap-8",children:lye.map((a,r)=>e.jsx("div",{className:"relative h-full",children:e.jsxs("div",{className:"group bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-2xl p-8 hover:border-[#B2F273]/50 transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_10px_40px_-10px_rgba(178,242,115,0.1)] relative overflow-hidden h-full",children:[e.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-[#B2F273]/10 rounded-bl-full blur-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500 pointer-events-none"}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("span",{className:"text-5xl font-bold text-[#EDF5F2]/10 font-display group-hover:text-[#B2F273]/20 transition-colors",children:a.step}),e.jsx("div",{className:"w-14 h-14 bg-[#B2F273]/10 rounded-xl flex items-center justify-center border border-[#B2F273]/20 group-hover:bg-[#B2F273] group-hover:text-[#00261C] transition-all duration-300 relative z-10",children:e.jsx(a.icon,{className:"w-7 h-7 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 font-display transition-colors duration-300 group-hover:text-[#B2F273]",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed mb-4",children:a.description}),e.jsxs("div",{className:"inline-flex items-center gap-2 text-xs text-[#EDF5F2]/40 font-mono",children:[e.jsx(mt,{className:"w-3 h-3"}),a.time]}),e.jsx("div",{className:"absolute bottom-0 left-0 w-0 h-[3px] bg-[#B2F273] group-hover:w-full transition-all duration-500 ease-in-out"})]})},r))})})]})]}),e.jsxs("section",{className:"relative py-24 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Supported Documents"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Generate any of these documents instantly from your LC data."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:nye.map((a,r)=>e.jsx("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-4 hover:border-[#B2F273]/30 transition-colors backdrop-blur-sm group",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-[#B2F273]/10 rounded-lg flex items-center justify-center shrink-0 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(a.icon,{className:"w-5 h-5 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-bold text-sm font-display",children:a.name}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-xs mt-1",children:a.description})]})]})},r))})]})]}),e.jsxs("section",{className:"relative py-24 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"bg-[#00382E]/30 border border-[#EDF5F2]/10 rounded-3xl p-12 relative overflow-hidden",children:[e.jsx("div",{className:"absolute top-0 right-0 w-64 h-64 bg-[#B2F273]/5 rounded-full blur-3xl"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"text-center mb-12 sm:mb-16",children:[e.jsx("p",{className:"text-[#B2F273] font-mono font-semibold mb-3 sm:mb-4 tracking-wide uppercase text-xs sm:text-sm",children:"Features"}),e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-3 sm:mb-4 font-display",children:"Everything You Need for Document Prep"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto text-base sm:text-lg px-4",children:"Professional templates, smart auto-fill, and cross-document validation."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:iye.map((a,r)=>e.jsxs("div",{className:"group bg-[#00261C] border border-[#EDF5F2]/10 rounded-2xl p-8 hover:border-[#B2F273]/50 transition-all duration-300 hover:-translate-y-1 hover:shadow-[0_10px_40px_-10px_rgba(178,242,115,0.1)] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-[#B2F273]/5 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 pointer-events-none"}),e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsx("div",{className:"w-14 h-14 bg-[#00382E] rounded-xl flex items-center justify-center group-hover:bg-[#B2F273] transition-colors duration-300 relative z-10",children:e.jsx(a.icon,{className:"w-7 h-7 text-[#EDF5F2]/60 group-hover:text-[#00261C] transition-colors duration-300"})}),e.jsx("span",{className:"px-2.5 py-1 bg-[#B2F273]/10 rounded-full text-xs font-medium text-[#B2F273] border border-[#B2F273]/20 font-mono",children:a.highlight})]}),e.jsx("h3",{className:"text-xl font-bold text-white mb-3 font-display group-hover:text-[#B2F273] transition-colors duration-300",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed font-light",children:a.description})]},r))})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-10 sm:mb-16",children:[e.jsx("p",{className:"text-[#B2F273] font-mono font-semibold mb-3 sm:mb-4 tracking-wide uppercase text-xs sm:text-sm",children:"Pricing"}),e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-3 sm:mb-4 font-display",children:"Simple Pricing"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto text-base sm:text-lg px-4",children:"Pay for what you use. No long-term contracts."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:cye.map((a,r)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 backdrop-blur-sm",a.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[a.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:a.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:a.price}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.docs}),e.jsx("ul",{className:"space-y-2 mb-6",children:a.features.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),n]},i))}),e.jsx(M,{className:Le("w-full font-bold border-none",a.popular?"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C]":"bg-[#EDF5F2]/10 hover:bg-[#EDF5F2]/20 text-white"),asChild:!0,children:e.jsx(pe,{to:"/doc-generator/dashboard",children:"Get Started"})})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:dye.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===r?null:r),children:[e.jsx("span",{className:"text-white font-medium font-display",children:a.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===r&&"rotate-180")})]}),t===r&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:a.a})})]},r))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-gradient-to-b from-[#00382E] to-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Ready to generate your first document?"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Start creating bank-compliant trade documents in minutes."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/doc-generator/dashboard",children:["Start Generating ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})})]})})]})]}),e.jsx(er,{})]})},hye=[{icon:$w,title:"Guided LC Drafting",description:"Step-by-step wizard walks you through every field. Smart defaults based on your trade type.",bullets:["Field-by-field guidance","Context-sensitive help","Smart auto-suggestions","Progress tracking"]},{icon:yi,title:"Clause Library",description:"Pre-approved clauses for common scenarios. Each clause explained in plain English.",bullets:["500+ standard clauses","Bank-accepted language","Plain English explanations","Risk indicators"]},{icon:Ot,title:"Real-Time Validation",description:"Instant error detection as you type. Catch problems before you submit to the bank.",bullets:["UCP600 compliance check","Logical consistency","Date validation","Amount verification"]},{icon:Ve,title:"Risk Scoring",description:"See the risk profile of your LC before submission. Understand which clauses benefit you or the bank.",bullets:["Clause-by-clause risk","Red/amber/green flags","Beneficiary vs applicant bias","Negotiation tips"]},{icon:Da,title:"MT700 Preview",description:"See exactly how your LC will look in SWIFT format. No surprises when the bank issues.",bullets:["SWIFT field mapping","Character count check","Format validation","Bank preview mode"]},{icon:Gt,title:"Export Options",description:"Download in the format your bank accepts. PDF, Word, or structured data for API submission.",bullets:["Bank-ready PDF","Editable Word doc","MT700 text format","API/JSON export"]}],xye=[{step:"1",title:"Start with Basics",description:"Enter parties, amounts, goods description, and key dates in our guided wizard"},{step:"2",title:"Select Clauses",description:"Browse our clause library or let AI suggest clauses based on your trade scenario"},{step:"3",title:"Review & Export",description:"Preview the MT700, fix any warnings, and export in your bank's preferred format"}],pye=[{value:"80%",label:"Fewer Rejections"},{value:"500+",label:"Clause Library"},{value:"30min",label:"Avg Draft Time"},{value:"100%",label:"UCP600 Compliant"}],fye=[{name:"Shipment Terms",count:85,example:"Latest shipment date, partial shipments, transhipment"},{name:"Document Requirements",count:120,example:"B/L requirements, certificate formats, inspection"},{name:"Payment Terms",count:65,example:"Sight, deferred, acceptance, mixed payment"},{name:"Special Conditions",count:95,example:"Insurance, origin, quality certificates"},{name:"Amendments",count:45,example:"Pre-approved amendment language"},{name:"Red Clause / Green Clause",count:25,example:"Advance payment provisions"}],gye=[{q:"Can I use this for import or export LCs?",a:"Yes! LC Builder works for both import (LC application to your bank) and export (reviewing LCs received from buyers). The guided wizard adapts to your perspective."},{q:"How does the clause library work?",a:"Our library contains 500+ pre-approved clauses covering shipment, documents, payment, and special conditions. Each clause includes plain English explanations, risk indicators, and bank acceptance history."},{q:"Will this work with my bank's format?",a:"We support export formats for major trade banks worldwide. If your bank has specific requirements, our Enterprise plan includes custom template development."},{q:"How does risk scoring work?",a:"Each clause is analyzed for favorability (who benefits: applicant, beneficiary, or neutral) and risk level. The overall LC gets a score so you can see potential issues before submission."},{q:"Can I save draft LCs for later?",a:"Yes, all plans include draft saving. Professional and Enterprise plans add version history, team sharing, and LC templates for repeat transactions."}],vye=[{tier:"Starter",lcs:"5 LCs/mo",price:"$39/mo",description:"For occasional traders",features:["Guided wizard","Basic clause library","PDF export"]},{tier:"Professional",lcs:"25 LCs/mo",price:"$99/mo",description:"For active traders",features:["Full clause library","Risk scoring","MT700 preview","Version history"],popular:!0},{tier:"Enterprise",lcs:"Unlimited",price:"$299/mo",description:"For banks & corporates",features:["Everything in Pro","Custom templates","Team access","API integration"]}],jye=()=>{const[t,s]=m.useState(null);return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative pt-24 pb-20 lg:pt-32 lg:pb-32 overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#B2F273]/10 border border-[#B2F273]/20 mb-6",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] text-sm font-medium",children:"Now Available"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Draft"," ",e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Error-Free LCs"})," ","in 30 Minutes"]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8 leading-relaxed max-w-2xl mx-auto",children:"Guided LC application builder with smart clause suggestions, real-time validation, and risk scoring. Reduce application rejections by 80%."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/lc-builder/dashboard",children:["Start Building ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})}),e.jsx(M,{variant:"outline",size:"lg",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",asChild:!0,children:e.jsx(pe,{to:"/lc-builder/wizard",children:"Create New LC"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"UCP600 Compliant"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"500+ Clause Library"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"MT700 Preview"]})]})]})})]}),e.jsxs("section",{className:"relative py-12 bg-[#00261C] border-y border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-4xl mx-auto",children:pye.map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 font-display",children:a.value}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:a.label})]},r))})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:["LC Applications Get"," ",e.jsx("span",{className:"text-[#B2F273]",children:"Rejected"}),". A Lot."]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"Common Problems"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Missing required fields or clauses"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Conflicting dates or terms"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Non-standard clause language"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Hidden risks in accepted clauses"]})]})]}),e.jsxs("div",{className:"bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"With LC Builder"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Guided wizard ensures completeness"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Real-time date/term validation"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Pre-approved clause library"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Risk scoring before submission"]})]})]})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"500+ Bank-Approved Clauses"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Stop writing clauses from scratch. Use our library of pre-approved, bank-accepted language."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4 max-w-5xl mx-auto",children:fye.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-4 backdrop-blur-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h3",{className:"text-white font-bold font-display",children:a.name}),e.jsxs("span",{className:"text-[#B2F273] text-sm",children:[a.count," clauses"]})]}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:a.example})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"From Blank Page to Bank-Ready in 30 Minutes"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Our guided wizard makes LC drafting straightforward."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:xye.map((a,r)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors duration-300",children:e.jsx("span",{className:"text-[#B2F273] font-bold font-display group-hover:text-[#00261C] transition-colors",children:a.step})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:a.description})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Everything for Professional LC Drafting"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Smart suggestions, validation, and export in the format your bank accepts."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:hye.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-colors group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(a.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.bullets.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273] shrink-0"}),n]},i))})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Simple Pricing"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Pay per LC. No hidden fees."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:vye.map((a,r)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 backdrop-blur-sm",a.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[a.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:a.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:a.price}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.lcs}),e.jsx("ul",{className:"space-y-2 mb-6",children:a.features.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),n]},i))}),e.jsx(M,{className:Le("w-full font-bold border-none",a.popular?"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C]":"bg-[#EDF5F2]/10 hover:bg-[#EDF5F2]/20 text-white"),asChild:!0,children:e.jsx(pe,{to:"/lc-builder/dashboard",children:"Get Started"})})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:gye.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===r?null:r),children:[e.jsx("span",{className:"text-white font-medium font-display",children:a.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===r&&"rotate-180")})]}),t===r&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:a.a})})]},r))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Stop Getting LC Applications Rejected"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Start drafting bank-ready LC applications in minutes."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/lc-builder/wizard",children:["Create LC Application ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})})]})})]})]}),e.jsx(er,{})]})},ko="",bye={draft:"bg-slate-500",review:"bg-amber-500",submitted:"bg-blue-500",approved:"bg-emerald-500",rejected:"bg-red-500",amended:"bg-purple-500"},yye=t=>t===null?"text-slate-500":t<=20?"text-emerald-500":t<=50?"text-amber-500":"text-red-500";function Nye(){const t=zt(),{toast:s}=et(),{session:a}=Dt(),[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(""),[c,u]=m.useState("all"),[h,x]=m.useState(!1),[g,j]=m.useState([]),[y,b]=m.useState(!1),[N,C]=m.useState(!1),[_,A]=m.useState(!1),[k,E]=m.useState(null),[D,R]=m.useState(""),[O,P]=m.useState("view"),[T,B]=m.useState(!1);m.useEffect(()=>{a?.access_token&&H()},[c,a?.access_token]);const G=async()=>{if(a?.access_token){b(!0);try{const ne=await fetch(`${ko}/lc-builder/lcopilot/sessions`,{headers:{Authorization:`Bearer ${a.access_token}`}});if(ne.ok){const ae=await ne.json();j(ae.sessions||[])}}catch(ne){console.error("Error fetching LCopilot sessions:",ne)}finally{b(!1)}}},q=async ne=>{if(a?.access_token){C(!0);try{const ae=await fetch(`${ko}/lc-builder/lcopilot/import/${ne}`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`}});if(ae.ok){const re=await ae.json();s({title:"Imported Successfully",description:`LC Application ${re.reference_number} created from LCopilot validation`}),x(!1),H(),t(`/lc-builder/dashboard/edit/${re.id}`)}else throw new Error("Import failed")}catch{s({title:"Import Failed",description:"Could not import from LCopilot session",variant:"destructive"})}finally{C(!1)}}},z=async()=>{if(!(!k||!D||!a?.access_token)){B(!0);try{if((await fetch(`${ko}/lc-builder/applications/${k}/share`,{method:"POST",headers:{Authorization:`Bearer ${a.access_token}`,"Content-Type":"application/json"},body:JSON.stringify({email:D,permission:O})})).ok)s({title:"Shared Successfully",description:`LC shared with ${D}`}),A(!1),R(""),E(null);else throw new Error("Share failed")}catch{s({title:"Share Failed",description:"Could not share the application",variant:"destructive"})}finally{B(!1)}}},H=async()=>{try{l(!0);const ne=new URLSearchParams;c!=="all"&&ne.append("status",c);const ae=await fetch(`${ko}/lc-builder/applications?${ne}`,{headers:{Authorization:`Bearer ${a?.access_token||""}`}});if(!ae.ok)throw new Error("Failed to fetch applications");const re=await ae.json();n(re.applications||[])}catch(ne){console.error("Error fetching applications:",ne),s({title:"Error",description:"Failed to load LC applications",variant:"destructive"})}finally{l(!1)}},le=async ne=>{try{const ae=await fetch(`${ko}/lc-builder/applications/${ne}/duplicate`,{method:"POST",headers:{Authorization:`Bearer ${a?.access_token||""}`}});if(!ae.ok)throw new Error("Failed to duplicate");const re=await ae.json();s({title:"Duplicated",description:`Created copy: ${re.reference_number}`}),H()}catch{s({title:"Error",description:"Failed to duplicate application",variant:"destructive"})}},Y=async ne=>{if(confirm("Are you sure you want to delete this LC application?"))try{if(!(await fetch(`${ko}/lc-builder/applications/${ne}`,{method:"DELETE",headers:{Authorization:`Bearer ${a?.access_token||""}`}})).ok)throw new Error("Failed to delete");s({title:"Deleted",description:"LC application deleted"}),H()}catch{s({title:"Error",description:"Failed to delete application",variant:"destructive"})}},te=r.filter(ne=>{if(!o)return!0;const ae=o.toLowerCase();return ne.reference_number.toLowerCase().includes(ae)||ne.name?.toLowerCase().includes(ae)||ne.beneficiary_name?.toLowerCase().includes(ae)});return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"LC Applications"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Create and manage LC applications"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",onClick:()=>{G(),x(!0)},children:[e.jsx(PD,{className:"h-4 w-4 mr-2"}),"Import from LCopilot"]}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("/lc-builder/dashboard/new"),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"New LC Application"]})]})]})})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-6",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search by reference, name, or beneficiary...",value:o,onChange:ne=>d(ne.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsxs(Pe,{className:"w-[180px] bg-slate-800 border-slate-700",children:[e.jsx(Nd,{className:"h-4 w-4 mr-2"}),e.jsx(Fe,{placeholder:"Filter by status"})]}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"draft",children:"Draft"}),e.jsx(K,{value:"review",children:"In Review"}),e.jsx(K,{value:"submitted",children:"Submitted"}),e.jsx(K,{value:"approved",children:"Approved"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx($,{className:"bg-slate-900 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-800",children:e.jsx(Be,{className:"h-5 w-5 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.length}),e.jsx("p",{className:"text-xs text-slate-400",children:"Total Applications"})]})]})})}),e.jsx($,{className:"bg-slate-900 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:e.jsx(mt,{className:"h-5 w-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(ne=>ne.status==="draft").length}),e.jsx("p",{className:"text-xs text-slate-400",children:"Drafts"})]})]})})}),e.jsx($,{className:"bg-slate-900 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(Oe,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(ne=>ne.status==="approved").length}),e.jsx("p",{className:"text-xs text-slate-400",children:"Approved"})]})]})})}),e.jsx($,{className:"bg-slate-900 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(Ve,{className:"h-5 w-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-white",children:r.filter(ne=>(ne.risk_score||0)>50).length}),e.jsx("p",{className:"text-xs text-slate-400",children:"High Risk"})]})]})})})]}),i?e.jsx("div",{className:"flex items-center justify-center py-20",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-emerald-500 border-t-transparent rounded-full"})}):te.length===0?e.jsx($,{className:"bg-slate-900 border-slate-800",children:e.jsxs(U,{className:"py-16 text-center",children:[e.jsx(Be,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No LC applications yet"}),e.jsx("p",{className:"text-slate-400 mb-6",children:"Create your first LC application to get started"}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("/lc-builder/dashboard/new"),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create LC Application"]})]})}):e.jsx("div",{className:"space-y-3",children:te.map(ne=>e.jsx($,{className:"bg-slate-900 border-slate-800 hover:border-slate-700 transition-colors",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-slate-800",children:e.jsx(Be,{className:"h-5 w-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm text-emerald-400",children:ne.reference_number}),e.jsx(Q,{className:`${bye[ne.status]} text-white text-xs`,children:ne.status})]}),e.jsx("p",{className:"text-white font-medium",children:ne.name||ne.beneficiary_name||"Untitled"}),e.jsxs("p",{className:"text-sm text-slate-400",children:[ne.currency," ",ne.amount?.toLocaleString()," â€¢"," ",ne.lc_type]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsxs("p",{className:`font-medium ${yye(ne.risk_score)}`,children:["Risk: ",ne.risk_score??"N/A"]}),e.jsx("p",{className:"text-xs text-slate-400",children:ne.expiry_date?`Expires ${new Date(ne.expiry_date).toLocaleDateString()}`:"No expiry set"})]}),e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(dp,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>t(`/lc-builder/dashboard/edit/${ne.id}`),children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"View / Edit"]}),e.jsxs(is,{onClick:()=>le(ne.id),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Duplicate"]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/pdf`,"_blank"),children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Export PDF (Generic)"]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/word`,"_blank"),children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Export Word (.docx)"]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/pdf/SCB`,"_blank"),children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"flex items-center",children:["Standard Chartered Format",e.jsx(xr,{className:"h-3 w-3 ml-auto"})]})]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/pdf/HSBC`,"_blank"),children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"flex items-center",children:["HSBC Format",e.jsx(xr,{className:"h-3 w-3 ml-auto"})]})]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/pdf/CITI`,"_blank"),children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"flex items-center",children:["Citibank Format",e.jsx(xr,{className:"h-3 w-3 ml-auto"})]})]}),e.jsxs(is,{onClick:()=>window.open(`${ko}/lc-builder/applications/${ne.id}/export/pdf/DBS`,"_blank"),children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),e.jsxs("span",{className:"flex items-center",children:["DBS Bank Format",e.jsx(xr,{className:"h-3 w-3 ml-auto"})]})]}),e.jsxs(is,{onClick:()=>t(`/lc-builder/dashboard/history/${ne.id}`),children:[e.jsx(mt,{className:"h-4 w-4 mr-2"}),"Version History"]}),e.jsxs(is,{onClick:()=>t(`/lc-builder/dashboard/workflow/${ne.id}`),children:[e.jsx(Gs,{className:"h-4 w-4 mr-2"}),"Workflow Status"]}),e.jsxs(is,{onClick:()=>{E(ne.id),A(!0)},children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(is,{className:"text-red-400",onClick:()=>Y(ne.id),children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})]})})},ne.id))})]}),e.jsx(wt,{open:h,onOpenChange:x,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-emerald-400"}),"Import from LCopilot"]}),e.jsx(_t,{children:"Select a completed LCopilot validation session to create an LC application with pre-filled data."})]}),y?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-emerald-400"})}):g.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Gs,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"No LCopilot sessions found"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Complete an LC validation in LCopilot to import the data here."})]}):e.jsx("div",{className:"space-y-3",children:g.map(ne=>e.jsx("button",{className:"w-full text-left p-4 rounded-lg border border-slate-700 hover:border-emerald-500 hover:bg-slate-800/50 transition-colors",onClick:()=>q(ne.session_id),disabled:N,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white",children:ne.lc_number||"LC Reference"}),ne.has_extracted_data&&e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Ready"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400 mt-1",children:[e.jsx("span",{children:ne.beneficiary||"Unknown Beneficiary"}),ne.amount&&e.jsxs("span",{className:"text-emerald-400",children:[ne.currency," ",Number(ne.amount).toLocaleString()]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:["Validated: ",new Date(ne.created_at).toLocaleDateString()]})]}),e.jsx(xr,{className:"h-5 w-5 text-slate-500"})]})},ne.session_id))}),e.jsx(ms,{children:e.jsx(M,{variant:"outline",onClick:()=>x(!1),children:"Cancel"})})]})}),e.jsx(wt,{open:_,onOpenChange:A,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(sh,{className:"h-5 w-5 text-emerald-400"}),"Share LC Application"]}),e.jsx(_t,{children:"Share this LC application with a colleague. They'll receive an email notification."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Email Address"}),e.jsx(oe,{type:"email",placeholder:"colleague@company.com",value:D,onChange:ne=>R(ne.target.value),className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium text-slate-300",children:"Permission Level"}),e.jsxs(Te,{value:O,onValueChange:P,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"view",children:"View Only"}),e.jsx(K,{value:"comment",children:"View & Comment"}),e.jsx(K,{value:"edit",children:"Full Edit Access"}),e.jsx(K,{value:"review",children:"Reviewer (Approve/Reject)"})]})]}),e.jsxs("p",{className:"text-xs text-slate-500",children:[O==="view"&&"Can view the application but cannot make changes.",O==="comment"&&"Can view and add comments for discussion.",O==="edit"&&"Can edit all fields of the application.",O==="review"&&"Can approve or reject the application."]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:z,disabled:T||!D,children:[T&&e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Share"]})]})]})})]})}const ox="",cx=[{id:1,title:"Basic Details",icon:Be,description:"LC type, amount, tolerance"},{id:2,title:"Parties",icon:xs,description:"Applicant & beneficiary"},{id:3,title:"Shipment",icon:Us,description:"Ports, dates, Incoterms"},{id:4,title:"Goods",icon:Ps,description:"Description of goods"},{id:5,title:"Documents",icon:Gs,description:"Required documents"},{id:6,title:"Payment",icon:pn,description:"Terms & validity"}],NM=[{type:"commercial_invoice",label:"Commercial Invoice",defaultOriginals:3},{type:"packing_list",label:"Packing List",defaultOriginals:3},{type:"bill_of_lading",label:"Full Set Clean On Board B/L",defaultOriginals:3},{type:"certificate_of_origin",label:"Certificate of Origin",defaultOriginals:1},{type:"insurance_certificate",label:"Insurance Certificate",defaultOriginals:1},{type:"inspection_certificate",label:"Inspection Certificate",defaultOriginals:1},{type:"weight_certificate",label:"Weight Certificate",defaultOriginals:1},{type:"beneficiary_certificate",label:"Beneficiary Certificate",defaultOriginals:1}],Qk={name:"",lc_type:"documentary",currency:"USD",amount:"",tolerance_plus:"5",tolerance_minus:"5",applicant_name:"",applicant_address:"",applicant_country:"",beneficiary_name:"",beneficiary_address:"",beneficiary_country:"",advising_bank_name:"",advising_bank_swift:"",port_of_loading:"",port_of_discharge:"",place_of_delivery:"",latest_shipment_date:"",incoterms:"FOB",incoterms_place:"",partial_shipments:!0,transhipment:!0,goods_description:"",hs_code:"",quantity:"",unit_price:"",documents_required:[{document_type:"commercial_invoice",copies_original:3,copies_copy:0,specific_requirements:"",is_required:!0},{document_type:"packing_list",copies_original:3,copies_copy:0,specific_requirements:"",is_required:!0},{document_type:"bill_of_lading",copies_original:3,copies_copy:0,specific_requirements:"",is_required:!0}],payment_terms:"sight",usance_days:"30",usance_from:"bl_date",expiry_date:"",expiry_place:"",presentation_period:"21",confirmation_instructions:"without",additional_conditions:[]};function dN(){const{id:t}=Ko(),s=zt(),{toast:a}=et(),{session:r}=Dt(),[n,i]=m.useState(1),[l,o]=m.useState(Qk),[d,c]=m.useState(!1),[u,h]=m.useState(null),[x,g]=m.useState(null),[j,y]=m.useState(!1),[b,N]=m.useState(!1),[C,_]=m.useState([]),[A,k]=m.useState(!1),[E,D]=m.useState(["applicant","beneficiary","shipment","goods","documents"]);m.useEffect(()=>{t&&r?.access_token&&P(t)},[t,r?.access_token]);const R=async()=>{if(r?.access_token){k(!0);try{const H=await fetch(`${ox}/lc-builder/applications`,{headers:{Authorization:`Bearer ${r.access_token}`}});if(H.ok){const le=await H.json();_(le.applications||[])}}catch(H){console.error("Error fetching previous LCs:",H)}finally{k(!1)}}},O=async H=>{if(!t||!r?.access_token){try{const le=await fetch(`${ox}/lc-builder/applications/${H}`,{headers:{Authorization:`Bearer ${r?.access_token||""}`}});if(le.ok){const Y=await le.json(),te={...l};E.includes("applicant")&&(te.applicant_name=Y.applicant?.name||"",te.applicant_address=Y.applicant?.address||"",te.applicant_country=Y.applicant?.country||""),E.includes("beneficiary")&&(te.beneficiary_name=Y.beneficiary?.name||"",te.beneficiary_address=Y.beneficiary?.address||"",te.beneficiary_country=Y.beneficiary?.country||"",te.advising_bank_name=Y.advising_bank?.name||"",te.advising_bank_swift=Y.advising_bank?.swift||""),E.includes("shipment")&&(te.port_of_loading=Y.port_of_loading||"",te.port_of_discharge=Y.port_of_discharge||"",te.place_of_delivery=Y.place_of_delivery||"",te.incoterms=Y.incoterms||"FOB",te.incoterms_place=Y.incoterms_place||"",te.partial_shipments=Y.partial_shipments??!0,te.transhipment=Y.transhipment??!0),E.includes("goods")&&(te.goods_description=Y.goods_description||"",te.hs_code=Y.hs_code||""),E.includes("documents")&&(te.documents_required=Y.documents_required||Qk.documents_required),E.includes("payment")&&(te.payment_terms=Y.payment_terms||"sight",te.usance_days=String(Y.usance_days||30),te.usance_from=Y.usance_from||"bl_date",te.presentation_period=String(Y.presentation_period||21),te.confirmation_instructions=Y.confirmation_instructions||"without"),E.includes("conditions")&&(te.additional_conditions=Y.additional_conditions||[]),o(te),N(!1),a({title:"Data Imported",description:`Imported ${E.length} sections from ${Y.reference_number}`})}}catch(le){console.error("Error importing LC:",le),a({title:"Import Failed",description:"Could not import data from selected LC",variant:"destructive"})}return}try{const le=await fetch(`${ox}/lc-builder/applications/${t}/import-data?source_id=${H}&fields=${E.join("&fields=")}`,{method:"POST",headers:{Authorization:`Bearer ${r.access_token}`}});if(le.ok){const Y=await le.json();await P(t),N(!1),a({title:"Data Imported",description:`Imported ${Y.fields_imported.length} sections from ${Y.source_reference}`})}}catch(le){console.error("Error importing LC:",le),a({title:"Import Failed",description:"Could not import data from selected LC",variant:"destructive"})}},P=async H=>{try{const le=await fetch(`${ox}/lc-builder/applications/${H}`,{headers:{Authorization:`Bearer ${r?.access_token||""}`}});if(!le.ok)throw new Error("Failed to load application");const Y=await le.json();o({name:Y.name||"",lc_type:Y.lc_type||"documentary",currency:Y.currency||"USD",amount:String(Y.amount||""),tolerance_plus:String(Y.tolerance_plus||5),tolerance_minus:String(Y.tolerance_minus||5),applicant_name:Y.applicant?.name||"",applicant_address:Y.applicant?.address||"",applicant_country:Y.applicant?.country||"",beneficiary_name:Y.beneficiary?.name||"",beneficiary_address:Y.beneficiary?.address||"",beneficiary_country:Y.beneficiary?.country||"",advising_bank_name:Y.advising_bank?.name||"",advising_bank_swift:Y.advising_bank?.swift||"",port_of_loading:Y.port_of_loading||"",port_of_discharge:Y.port_of_discharge||"",place_of_delivery:Y.place_of_delivery||"",latest_shipment_date:Y.latest_shipment_date?.split("T")[0]||"",incoterms:Y.incoterms||"FOB",incoterms_place:Y.incoterms_place||"",partial_shipments:Y.partial_shipments??!0,transhipment:Y.transhipment??!0,goods_description:Y.goods_description||"",hs_code:Y.hs_code||"",quantity:Y.quantity||"",unit_price:Y.unit_price||"",documents_required:Y.documents_required||Qk.documents_required,payment_terms:Y.payment_terms||"sight",usance_days:String(Y.usance_days||30),usance_from:Y.usance_from||"bl_date",expiry_date:Y.expiry_date?.split("T")[0]||"",expiry_place:Y.expiry_place||"",presentation_period:String(Y.presentation_period||21),confirmation_instructions:Y.confirmation_instructions||"without",additional_conditions:Y.additional_conditions||[]}),h({is_valid:Y.validation_issues?.length===0,issues:Y.validation_issues||[],risk_score:Y.risk_score||0,risk_details:Y.risk_details||{}})}catch(le){console.error("Error loading application:",le),a({title:"Error",description:"Failed to load LC application",variant:"destructive"})}},T=async(H=!0)=>{c(!0);try{const le={name:l.name,lc_type:l.lc_type,currency:l.currency,amount:parseFloat(l.amount)||0,tolerance_plus:parseFloat(l.tolerance_plus)||0,tolerance_minus:parseFloat(l.tolerance_minus)||0,applicant:{name:l.applicant_name,address:l.applicant_address,country:l.applicant_country},beneficiary:{name:l.beneficiary_name,address:l.beneficiary_address,country:l.beneficiary_country},advising_bank:l.advising_bank_name?{name:l.advising_bank_name,swift:l.advising_bank_swift}:null,port_of_loading:l.port_of_loading,port_of_discharge:l.port_of_discharge,place_of_delivery:l.place_of_delivery,latest_shipment_date:l.latest_shipment_date||null,incoterms:l.incoterms,incoterms_place:l.incoterms_place,partial_shipments:l.partial_shipments,transhipment:l.transhipment,goods_description:l.goods_description,hs_code:l.hs_code,quantity:l.quantity,unit_price:l.unit_price,documents_required:l.documents_required,payment_terms:l.payment_terms,usance_days:l.payment_terms==="usance"?parseInt(l.usance_days):null,usance_from:l.payment_terms==="usance"?l.usance_from:null,expiry_date:l.expiry_date||null,expiry_place:l.expiry_place,presentation_period:parseInt(l.presentation_period)||21,confirmation_instructions:l.confirmation_instructions,additional_conditions:l.additional_conditions,selected_clause_ids:[]},Y=t?`${ox}/lc-builder/applications/${t}`:`${ox}/lc-builder/applications`,ne=await fetch(Y,{method:t?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r?.access_token||""}`},body:JSON.stringify(le)});if(!ne.ok){const re=await ne.json();throw new Error(re.detail||"Failed to save")}const ae=await ne.json();h(ae.validation),a({title:"Saved",description:t?"LC application updated":`Created: ${ae.reference_number}`}),t||s(`/lc-builder/wizard/${ae.id}`)}catch(le){a({title:"Error",description:le.message||"Failed to save application",variant:"destructive"})}finally{c(!1)}},B=async()=>{if(!t){a({title:"Save First",description:"Please save the application before generating MT700 preview",variant:"destructive"});return}try{const H=await fetch(`${ox}/lc-builder/applications/${t}/export/mt700`,{method:"POST",headers:{Authorization:`Bearer ${r?.access_token||""}`}});if(!H.ok)throw new Error("Failed to generate MT700");const le=await H.json();g(le),y(!0)}catch{a({title:"Error",description:"Failed to generate MT700 preview",variant:"destructive"})}},G=(H,le)=>{o(Y=>({...Y,[H]:le}))},q=(H,le)=>{o(Y=>{const te=[...Y.documents_required],ne=te.find(ae=>ae.document_type===H);if(le&&!ne){const ae=NM.find(re=>re.type===H);te.push({document_type:H,copies_original:ae?.defaultOriginals||1,copies_copy:0,specific_requirements:"",is_required:!0})}else if(!le&&ne){const ae=te.findIndex(re=>re.document_type===H);ae>=0&&te.splice(ae,1)}return{...Y,documents_required:te}})},z=()=>{switch(n){case 1:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Application Name (Optional)"}),e.jsx(oe,{placeholder:"e.g., Q1 2025 Cotton Import",value:l.name,onChange:H=>G("name",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Type of Documentary Credit"}),e.jsxs(Te,{value:l.lc_type,onValueChange:H=>G("lc_type",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"documentary",children:"Irrevocable Documentary Credit"}),e.jsx(K,{value:"standby",children:"Standby Letter of Credit (SBLC)"}),e.jsx(K,{value:"transferable",children:"Transferable Credit"}),e.jsx(K,{value:"revolving",children:"Revolving Credit"})]})]}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Most common: Irrevocable Documentary Credit"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Currency"}),e.jsxs(Te,{value:l.currency,onValueChange:H=>G("currency",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD - US Dollar"}),e.jsx(K,{value:"EUR",children:"EUR - Euro"}),e.jsx(K,{value:"GBP",children:"GBP - British Pound"}),e.jsx(K,{value:"CNY",children:"CNY - Chinese Yuan"}),e.jsx(K,{value:"JPY",children:"JPY - Japanese Yen"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Amount"}),e.jsx(oe,{type:"number",placeholder:"500000",value:l.amount,onChange:H=>G("amount",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Z,{children:"Amount Tolerance"}),e.jsx(nh,{children:e.jsxs(pu,{children:[e.jsx(fu,{children:e.jsx(Pn,{className:"h-4 w-4 text-slate-400"})}),e.jsx(vd,{children:e.jsx("p",{className:"max-w-xs",children:"Allows flexibility for quantity/amount. Standard is Â±5%."})})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-400",children:"+"}),e.jsx(oe,{type:"number",value:l.tolerance_plus,onChange:H=>G("tolerance_plus",H.target.value),className:"bg-slate-800 border-slate-700"}),e.jsx("span",{className:"text-slate-400",children:"%"})]})}),e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-slate-400",children:"-"}),e.jsx(oe,{type:"number",value:l.tolerance_minus,onChange:H=>G("tolerance_minus",H.target.value),className:"bg-slate-800 border-slate-700"}),e.jsx("span",{className:"text-slate-400",children:"%"})]})})]})]})]});case 2:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{className:"pb-3",children:[e.jsx(ee,{className:"text-lg",children:"Applicant (Buyer)"}),e.jsx(ue,{children:"Your company details"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Company Name *"}),e.jsx(oe,{placeholder:"Your Company Ltd",value:l.applicant_name,onChange:H=>G("applicant_name",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Address"}),e.jsx(Zt,{placeholder:"Street address, city, postal code",value:l.applicant_address,onChange:H=>G("applicant_address",H.target.value),className:"bg-slate-800 border-slate-700 mt-1",rows:2})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Country"}),e.jsx(oe,{placeholder:"Country",value:l.applicant_country,onChange:H=>G("applicant_country",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{className:"pb-3",children:[e.jsx(ee,{className:"text-lg",children:"Beneficiary (Seller)"}),e.jsx(ue,{children:"Supplier/Exporter details"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Company Name *"}),e.jsx(oe,{placeholder:"Supplier Company Name",value:l.beneficiary_name,onChange:H=>G("beneficiary_name",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Address"}),e.jsx(Zt,{placeholder:"Street address, city, postal code",value:l.beneficiary_address,onChange:H=>G("beneficiary_address",H.target.value),className:"bg-slate-800 border-slate-700 mt-1",rows:2})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Country"}),e.jsx(oe,{placeholder:"Country",value:l.beneficiary_country,onChange:H=>G("beneficiary_country",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{className:"pb-3",children:[e.jsx(ee,{className:"text-lg",children:"Advising Bank (Optional)"}),e.jsx(ue,{children:"Bank that will advise the LC to beneficiary"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Bank Name"}),e.jsx(oe,{placeholder:"Bank name",value:l.advising_bank_name,onChange:H=>G("advising_bank_name",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"SWIFT Code"}),e.jsx(oe,{placeholder:"BANKXXXX",value:l.advising_bank_swift,onChange:H=>G("advising_bank_swift",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]})})]})]});case 3:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Port of Loading *"}),e.jsx(oe,{placeholder:"e.g., Shanghai, China",value:l.port_of_loading,onChange:H=>G("port_of_loading",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Port of Discharge *"}),e.jsx(oe,{placeholder:"e.g., Los Angeles, USA",value:l.port_of_discharge,onChange:H=>G("port_of_discharge",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Place of Final Destination (Optional)"}),e.jsx(oe,{placeholder:"If different from port of discharge",value:l.place_of_delivery,onChange:H=>G("place_of_delivery",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Latest Shipment Date *"}),e.jsx(oe,{type:"date",value:l.latest_shipment_date,onChange:H=>G("latest_shipment_date",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Allow enough time for production & booking"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Incoterms 2020"}),e.jsxs(Te,{value:l.incoterms,onValueChange:H=>G("incoterms",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"EXW",children:"EXW - Ex Works"}),e.jsx(K,{value:"FCA",children:"FCA - Free Carrier"}),e.jsx(K,{value:"FOB",children:"FOB - Free On Board"}),e.jsx(K,{value:"CFR",children:"CFR - Cost and Freight"}),e.jsx(K,{value:"CIF",children:"CIF - Cost, Insurance & Freight"}),e.jsx(K,{value:"DAP",children:"DAP - Delivered at Place"}),e.jsx(K,{value:"DDP",children:"DDP - Delivered Duty Paid"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Place (for Incoterms)"}),e.jsx(oe,{placeholder:"e.g., Shanghai Port",value:l.incoterms_place,onChange:H=>G("incoterms_place",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]}),e.jsxs("div",{className:"flex gap-8",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{checked:l.partial_shipments,onCheckedChange:H=>G("partial_shipments",H)}),e.jsxs("div",{children:[e.jsx(Z,{children:"Partial Shipments"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Allow multiple shipments"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(js,{checked:l.transhipment,onCheckedChange:H=>G("transhipment",H)}),e.jsxs("div",{children:[e.jsx(Z,{children:"Transhipment"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Allow vessel changes"})]})]})]})]});case 4:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Description of Goods *"}),e.jsx(Zt,{placeholder:`Describe the goods in detail...
apps\web\dist\assets\index-Bz84JA8h.js:140:AS PER PROFORMA INVOICE NO. PI-2024-001`,value:l.goods_description,onChange:H=>G("goods_description",H.target.value),className:"bg-slate-800 border-slate-700 mt-1 font-mono text-sm",rows:8}),e.jsxs("div",{className:"mt-2 p-3 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("p",{className:"text-xs text-amber-400 flex items-center gap-2",children:[e.jsx(Ja,{className:"h-4 w-4"}),"Tips for goods description:"]}),e.jsxs("ul",{className:"text-xs text-slate-400 mt-2 space-y-1 ml-6",children:[e.jsx("li",{children:"â€¢ Be specific but not overly restrictive"}),e.jsx("li",{children:"â€¢ Include reference to Proforma Invoice/Contract"}),e.jsx("li",{children:"â€¢ Avoid brand names unless required"}),e.jsx("li",{children:"â€¢ Use clear quantities and units"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"HS Code (Optional)"}),e.jsx(oe,{placeholder:"e.g., 6109.10",value:l.hs_code,onChange:H=>G("hs_code",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Quantity"}),e.jsx(oe,{placeholder:"e.g., 50,000 PCS",value:l.quantity,onChange:H=>G("quantity",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Unit Price"}),e.jsx(oe,{placeholder:"e.g., USD 5.50/PC",value:l.unit_price,onChange:H=>G("unit_price",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]})]});case 5:return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{children:[e.jsx(Z,{className:"text-base",children:"Select Required Documents"}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"Check the documents you need the beneficiary to provide"}),e.jsx("div",{className:"space-y-3",children:NM.map(H=>{const le=l.documents_required.some(te=>te.document_type===H.type),Y=l.documents_required.find(te=>te.document_type===H.type);return e.jsx("div",{className:Le("p-4 rounded-lg border transition-colors",le?"bg-emerald-500/10 border-emerald-500/30":"bg-slate-800/50 border-slate-700"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(rr,{checked:le,onCheckedChange:te=>q(H.type,!!te)}),e.jsx("span",{className:"text-white",children:H.label})]}),le&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{type:"number",min:"1",max:"10",value:Y?.copies_original||1,onChange:te=>{const ne=l.documents_required.map(ae=>ae.document_type===H.type?{...ae,copies_original:parseInt(te.target.value)||1}:ae);G("documents_required",ne)},className:"w-16 h-8 bg-slate-800 border-slate-600 text-center"}),e.jsx("span",{className:"text-xs text-slate-400",children:"original(s)"})]})]})},H.type)})})]})});case 6:return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Payment Terms *"}),e.jsxs(Te,{value:l.payment_terms,onValueChange:H=>G("payment_terms",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"sight",children:"At Sight (Immediate Payment)"}),e.jsx(K,{value:"usance",children:"Usance (Deferred Payment)"}),e.jsx(K,{value:"deferred",children:"Deferred Payment"})]})]})]}),l.payment_terms==="usance"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Days"}),e.jsxs(Te,{value:l.usance_days,onValueChange:H=>G("usance_days",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-600 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"30",children:"30 Days"}),e.jsx(K,{value:"60",children:"60 Days"}),e.jsx(K,{value:"90",children:"90 Days"}),e.jsx(K,{value:"120",children:"120 Days"}),e.jsx(K,{value:"180",children:"180 Days"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"From"}),e.jsxs(Te,{value:l.usance_from,onValueChange:H=>G("usance_from",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-600 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bl_date",children:"B/L Date"}),e.jsx(K,{value:"invoice_date",children:"Invoice Date"}),e.jsx(K,{value:"presentation",children:"Presentation"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"LC Expiry Date *"}),e.jsx(oe,{type:"date",value:l.expiry_date,onChange:H=>G("expiry_date",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"}),e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Should be at least 21 days after latest shipment"})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Expiry Place"}),e.jsx(oe,{placeholder:"Beneficiary's country",value:l.expiry_place,onChange:H=>G("expiry_place",H.target.value),className:"bg-slate-800 border-slate-700 mt-1"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Presentation Period"}),e.jsxs(Te,{value:l.presentation_period,onValueChange:H=>G("presentation_period",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"14",children:"14 Days"}),e.jsx(K,{value:"21",children:"21 Days (UCP600 Default)"}),e.jsx(K,{value:"30",children:"30 Days"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Confirmation"}),e.jsxs(Te,{value:l.confirmation_instructions,onValueChange:H=>G("confirmation_instructions",H),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 mt-1",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"without",children:"Without (Cheaper)"}),e.jsx(K,{value:"may_add",children:"May Add (Bank's Option)"}),e.jsx(K,{value:"confirm",children:"Confirm (Extra Security)"})]})]})]})]})]});default:return null}};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:e.jsx(ma,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:t?"Edit LC Application":"New LC Application"}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Step ",n," of ",cx.length,": ",cx[n-1].title]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",onClick:()=>{R(),N(!0)},children:[e.jsx(PD,{className:"h-4 w-4 mr-2"}),"Import from Previous LC"]}),e.jsxs(M,{variant:"outline",onClick:()=>T(!0),disabled:d,children:[e.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),t&&e.jsxs(M,{variant:"outline",onClick:B,children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"MT700 Preview"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"sticky top-6 space-y-2",children:[cx.map(H=>e.jsxs("button",{onClick:()=>i(H.id),className:Le("w-full flex items-center gap-3 p-3 rounded-lg text-left transition-colors",n===H.id?"bg-emerald-500/10 border border-emerald-500/30":"bg-slate-900 border border-slate-800 hover:border-slate-700"),children:[e.jsx("div",{className:Le("p-2 rounded-lg",n===H.id?"bg-emerald-500/20":"bg-slate-800"),children:e.jsx(H.icon,{className:Le("h-4 w-4",n===H.id?"text-emerald-400":"text-slate-400")})}),e.jsxs("div",{children:[e.jsx("p",{className:Le("text-sm font-medium",n===H.id?"text-white":"text-slate-400"),children:H.title}),e.jsx("p",{className:"text-xs text-slate-500",children:H.description})]})]},H.id)),u&&e.jsxs($,{className:"mt-4 bg-slate-900 border-slate-800",children:[e.jsx(X,{className:"pb-2",children:e.jsx(ee,{className:"text-sm",children:"Validation"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-slate-400",children:"Risk Score"}),e.jsx(Q,{variant:u.risk_score<=20?"default":u.risk_score<=50?"secondary":"destructive",children:u.risk_score})]}),u.issues?.length>0&&e.jsxs("div",{className:"pt-2 border-t border-slate-800",children:[e.jsxs("p",{className:"text-xs text-slate-400 mb-2",children:[u.issues.length," issue(s)"]}),u.issues.slice(0,3).map((H,le)=>e.jsxs("div",{className:"flex items-start gap-2 text-xs mb-1",children:[e.jsx(Ve,{className:Le("h-3 w-3 mt-0.5 shrink-0",H.severity==="error"?"text-red-400":H.severity==="warning"?"text-amber-400":"text-blue-400")}),e.jsx("span",{className:"text-slate-400",children:H.message})]},le))]})]})})]})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs($,{className:"bg-slate-900 border-slate-800",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[(()=>{const H=cx[n-1].icon;return e.jsx(H,{className:"h-5 w-5 text-emerald-400"})})(),cx[n-1].title]}),e.jsx(ue,{children:cx[n-1].description})]}),e.jsx(U,{children:z()})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs(M,{variant:"outline",onClick:()=>i(H=>H-1),disabled:n===1,children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Previous"]}),n<cx.length?e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>i(H=>H+1),children:["Next",e.jsx(Jt,{className:"h-4 w-4 ml-2"})]}):e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>T(!1),disabled:d,children:[e.jsx(Za,{className:"h-4 w-4 mr-2"}),"Complete & Save"]})]})]})]})}),e.jsx(wt,{open:j,onOpenChange:y,children:e.jsxs(yt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(jt,{children:e.jsx(bt,{children:"MT700 SWIFT Message Preview"})}),x&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Q,{variant:x.is_valid?"default":"destructive",children:x.is_valid?"Valid":"Has Issues"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[x.character_count," characters"]})]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{navigator.clipboard.writeText(x.message),a({title:"Copied",description:"MT700 message copied to clipboard"})},children:"Copy"})]}),e.jsx("pre",{className:"p-4 bg-slate-900 rounded-lg text-xs font-mono text-slate-300 overflow-x-auto whitespace-pre-wrap",children:x.message}),x.validation_errors?.length>0&&e.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/30 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-red-400 mb-2",children:"Validation Issues:"}),e.jsx("ul",{className:"space-y-1",children:x.validation_errors.map((H,le)=>e.jsxs("li",{className:"text-xs text-red-300 flex items-center gap-2",children:[e.jsx(Ve,{className:"h-3 w-3"}),H]},le))})]})]})]})}),e.jsx(wt,{open:b,onOpenChange:N,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsx(jt,{children:e.jsx(bt,{children:"Import from Previous LC"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:"Select data to import:"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{id:"applicant",label:"Applicant Details"},{id:"beneficiary",label:"Beneficiary Details"},{id:"shipment",label:"Shipment Details"},{id:"goods",label:"Goods Description"},{id:"documents",label:"Documents Required"},{id:"payment",label:"Payment Terms"},{id:"conditions",label:"Additional Conditions"}].map(H=>e.jsxs("label",{className:"flex items-center gap-2 p-2 rounded-lg hover:bg-slate-800 cursor-pointer",children:[e.jsx(rr,{checked:E.includes(H.id),onCheckedChange:le=>{D(le?[...E,H.id]:E.filter(Y=>Y!==H.id))}}),e.jsx("span",{className:"text-sm text-white",children:H.label})]},H.id))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-3",children:"Select source LC:"}),A?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-slate-400"})}):C.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:e.jsx("p",{children:"No previous LC applications found"})}):e.jsx("div",{className:"space-y-2 max-h-[300px] overflow-y-auto",children:C.filter(H=>H.id!==t).map(H=>e.jsx("button",{className:"w-full text-left p-3 rounded-lg border border-slate-700 hover:border-emerald-500 hover:bg-slate-800/50 transition-colors",onClick:()=>O(H.id),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:H.reference_number}),e.jsxs("p",{className:"text-sm text-slate-400",children:[H.beneficiary_name||"No beneficiary"," â€¢ ",H.currency," ",Number(H.amount||0).toLocaleString()]})]}),e.jsx(Q,{variant:"outline",className:"text-xs",children:H.status})]})},H.id))})]})]})]})})]})}var wM=1,wye=.9,_ye=.8,Cye=.17,Xk=.1,e4=.999,Sye=.9999,kye=.99,Eye=/[\\\/_+.#"@\[\(\{&]/,Aye=/[\\\/_+.#"@\[\(\{&]/g,Pye=/[\s-]/,HK=/[\s-]/g;function D5(t,s,a,r,n,i,l){if(i===s.length)return n===t.length?wM:kye;var o=`${n},${i}`;if(l[o]!==void 0)return l[o];for(var d=r.charAt(i),c=a.indexOf(d,n),u=0,h,x,g,j;c>=0;)h=D5(t,s,a,r,c+1,i+1,l),h>u&&(c===n?h*=wM:Eye.test(t.charAt(c-1))?(h*=_ye,g=t.slice(n,c-1).match(Aye),g&&n>0&&(h*=Math.pow(e4,g.length))):Pye.test(t.charAt(c-1))?(h*=wye,j=t.slice(n,c-1).match(HK),j&&n>0&&(h*=Math.pow(e4,j.length))):(h*=Cye,n>0&&(h*=Math.pow(e4,c-n))),t.charAt(c)!==s.charAt(i)&&(h*=Sye)),(h<Xk&&a.charAt(c-1)===r.charAt(i+1)||r.charAt(i+1)===r.charAt(i)&&a.charAt(c-1)!==r.charAt(i))&&(x=D5(t,s,a,r,c+1,i+2,l),x*Xk>h&&(h=x*Xk)),h>u&&(u=h),c=a.indexOf(d,c+1);return l[o]=u,u}function _M(t){return t.toLowerCase().replace(HK," ")}function Dye(t,s,a){return t=a&&a.length>0?`${t+" "+a.join(" ")}`:t,D5(t,s,_M(t),_M(s),0,0,{})}var a0='[cmdk-group=""]',t4='[cmdk-group-items=""]',Tye='[cmdk-group-heading=""]',GK='[cmdk-item=""]',CM=`${GK}:not([aria-disabled="true"])`,T5="cmdk-item-select",Sf="data-value",Fye=(t,s,a)=>Dye(t,s,a),KK=m.createContext(void 0),rb=()=>m.useContext(KK),YK=m.createContext(void 0),zT=()=>m.useContext(YK),ZK=m.createContext(void 0),JK=m.forwardRef((t,s)=>{let a=kf(()=>{var re,xe;return{search:"",value:(xe=(re=t.value)!=null?re:t.defaultValue)!=null?xe:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),r=kf(()=>new Set),n=kf(()=>new Map),i=kf(()=>new Map),l=kf(()=>new Set),o=QK(t),{label:d,children:c,value:u,onValueChange:h,filter:x,shouldFilter:g,loop:j,disablePointerSelection:y=!1,vimBindings:b=!0,...N}=t,C=En(),_=En(),A=En(),k=m.useRef(null),E=Vye();Gx(()=>{if(u!==void 0){let re=u.trim();a.current.value=re,D.emit()}},[u]),Gx(()=>{E(6,G)},[]);let D=m.useMemo(()=>({subscribe:re=>(l.current.add(re),()=>l.current.delete(re)),snapshot:()=>a.current,setState:(re,xe,ye)=>{var ke,ze,ce,Re;if(!Object.is(a.current[re],xe)){if(a.current[re]=xe,re==="search")B(),P(),E(1,T);else if(re==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let ie=document.getElementById(A);ie?ie.focus():(ke=document.getElementById(C))==null||ke.focus()}if(E(7,()=>{var ie;a.current.selectedItemId=(ie=q())==null?void 0:ie.id,D.emit()}),ye||E(5,G),((ze=o.current)==null?void 0:ze.value)!==void 0){let ie=xe??"";(Re=(ce=o.current).onValueChange)==null||Re.call(ce,ie);return}}D.emit()}},emit:()=>{l.current.forEach(re=>re())}}),[]),R=m.useMemo(()=>({value:(re,xe,ye)=>{var ke;xe!==((ke=i.current.get(re))==null?void 0:ke.value)&&(i.current.set(re,{value:xe,keywords:ye}),a.current.filtered.items.set(re,O(xe,ye)),E(2,()=>{P(),D.emit()}))},item:(re,xe)=>(r.current.add(re),xe&&(n.current.has(xe)?n.current.get(xe).add(re):n.current.set(xe,new Set([re]))),E(3,()=>{B(),P(),a.current.value||T(),D.emit()}),()=>{i.current.delete(re),r.current.delete(re),a.current.filtered.items.delete(re);let ye=q();E(4,()=>{B(),ye?.getAttribute("id")===re&&T(),D.emit()})}),group:re=>(n.current.has(re)||n.current.set(re,new Set),()=>{i.current.delete(re),n.current.delete(re)}),filter:()=>o.current.shouldFilter,label:d||t["aria-label"],getDisablePointerSelection:()=>o.current.disablePointerSelection,listId:C,inputId:A,labelId:_,listInnerRef:k}),[]);function O(re,xe){var ye,ke;let ze=(ke=(ye=o.current)==null?void 0:ye.filter)!=null?ke:Fye;return re?ze(re,a.current.search,xe):0}function P(){if(!a.current.search||o.current.shouldFilter===!1)return;let re=a.current.filtered.items,xe=[];a.current.filtered.groups.forEach(ke=>{let ze=n.current.get(ke),ce=0;ze.forEach(Re=>{let ie=re.get(Re);ce=Math.max(ie,ce)}),xe.push([ke,ce])});let ye=k.current;z().sort((ke,ze)=>{var ce,Re;let ie=ke.getAttribute("id"),Ne=ze.getAttribute("id");return((ce=re.get(Ne))!=null?ce:0)-((Re=re.get(ie))!=null?Re:0)}).forEach(ke=>{let ze=ke.closest(t4);ze?ze.appendChild(ke.parentElement===ze?ke:ke.closest(`${t4} > *`)):ye.appendChild(ke.parentElement===ye?ke:ke.closest(`${t4} > *`))}),xe.sort((ke,ze)=>ze[1]-ke[1]).forEach(ke=>{var ze;let ce=(ze=k.current)==null?void 0:ze.querySelector(`${a0}[${Sf}="${encodeURIComponent(ke[0])}"]`);ce?.parentElement.appendChild(ce)})}function T(){let re=z().find(ye=>ye.getAttribute("aria-disabled")!=="true"),xe=re?.getAttribute(Sf);D.setState("value",xe||void 0)}function B(){var re,xe,ye,ke;if(!a.current.search||o.current.shouldFilter===!1){a.current.filtered.count=r.current.size;return}a.current.filtered.groups=new Set;let ze=0;for(let ce of r.current){let Re=(xe=(re=i.current.get(ce))==null?void 0:re.value)!=null?xe:"",ie=(ke=(ye=i.current.get(ce))==null?void 0:ye.keywords)!=null?ke:[],Ne=O(Re,ie);a.current.filtered.items.set(ce,Ne),Ne>0&&ze++}for(let[ce,Re]of n.current)for(let ie of Re)if(a.current.filtered.items.get(ie)>0){a.current.filtered.groups.add(ce);break}a.current.filtered.count=ze}function G(){var re,xe,ye;let ke=q();ke&&(((re=ke.parentElement)==null?void 0:re.firstChild)===ke&&((ye=(xe=ke.closest(a0))==null?void 0:xe.querySelector(Tye))==null||ye.scrollIntoView({block:"nearest"})),ke.scrollIntoView({block:"nearest"}))}function q(){var re;return(re=k.current)==null?void 0:re.querySelector(`${GK}[aria-selected="true"]`)}function z(){var re;return Array.from(((re=k.current)==null?void 0:re.querySelectorAll(CM))||[])}function H(re){let xe=z()[re];xe&&D.setState("value",xe.getAttribute(Sf))}function le(re){var xe;let ye=q(),ke=z(),ze=ke.findIndex(Re=>Re===ye),ce=ke[ze+re];(xe=o.current)!=null&&xe.loop&&(ce=ze+re<0?ke[ke.length-1]:ze+re===ke.length?ke[0]:ke[ze+re]),ce&&D.setState("value",ce.getAttribute(Sf))}function Y(re){let xe=q(),ye=xe?.closest(a0),ke;for(;ye&&!ke;)ye=re>0?zye(ye,a0):qye(ye,a0),ke=ye?.querySelector(CM);ke?D.setState("value",ke.getAttribute(Sf)):le(re)}let te=()=>H(z().length-1),ne=re=>{re.preventDefault(),re.metaKey?te():re.altKey?Y(1):le(1)},ae=re=>{re.preventDefault(),re.metaKey?H(0):re.altKey?Y(-1):le(-1)};return m.createElement(Pt.div,{ref:s,tabIndex:-1,...N,"cmdk-root":"",onKeyDown:re=>{var xe;(xe=N.onKeyDown)==null||xe.call(N,re);let ye=re.nativeEvent.isComposing||re.keyCode===229;if(!(re.defaultPrevented||ye))switch(re.key){case"n":case"j":{b&&re.ctrlKey&&ne(re);break}case"ArrowDown":{ne(re);break}case"p":case"k":{b&&re.ctrlKey&&ae(re);break}case"ArrowUp":{ae(re);break}case"Home":{re.preventDefault(),H(0);break}case"End":{re.preventDefault(),te();break}case"Enter":{re.preventDefault();let ke=q();if(ke){let ze=new Event(T5);ke.dispatchEvent(ze)}}}}},m.createElement("label",{"cmdk-label":"",htmlFor:R.inputId,id:R.labelId,style:Hye},d),v_(t,re=>m.createElement(YK.Provider,{value:D},m.createElement(KK.Provider,{value:R},re))))}),Rye=m.forwardRef((t,s)=>{var a,r;let n=En(),i=m.useRef(null),l=m.useContext(ZK),o=rb(),d=QK(t),c=(r=(a=d.current)==null?void 0:a.forceMount)!=null?r:l?.forceMount;Gx(()=>{if(!c)return o.item(n,l?.id)},[c]);let u=XK(n,i,[t.value,t.children,i],t.keywords),h=zT(),x=lh(E=>E.value&&E.value===u.current),g=lh(E=>c||o.filter()===!1?!0:E.search?E.filtered.items.get(n)>0:!0);m.useEffect(()=>{let E=i.current;if(!(!E||t.disabled))return E.addEventListener(T5,j),()=>E.removeEventListener(T5,j)},[g,t.onSelect,t.disabled]);function j(){var E,D;y(),(D=(E=d.current).onSelect)==null||D.call(E,u.current)}function y(){h.setState("value",u.current,!0)}if(!g)return null;let{disabled:b,value:N,onSelect:C,forceMount:_,keywords:A,...k}=t;return m.createElement(Pt.div,{ref:Uo(i,s),...k,id:n,"cmdk-item":"",role:"option","aria-disabled":!!b,"aria-selected":!!x,"data-disabled":!!b,"data-selected":!!x,onPointerMove:b||o.getDisablePointerSelection()?void 0:y,onClick:b?void 0:j},t.children)}),Oye=m.forwardRef((t,s)=>{let{heading:a,children:r,forceMount:n,...i}=t,l=En(),o=m.useRef(null),d=m.useRef(null),c=En(),u=rb(),h=lh(g=>n||u.filter()===!1?!0:g.search?g.filtered.groups.has(l):!0);Gx(()=>u.group(l),[]),XK(l,o,[t.value,t.heading,d]);let x=m.useMemo(()=>({id:l,forceMount:n}),[n]);return m.createElement(Pt.div,{ref:Uo(o,s),...i,"cmdk-group":"",role:"presentation",hidden:h?void 0:!0},a&&m.createElement("div",{ref:d,"cmdk-group-heading":"","aria-hidden":!0,id:c},a),v_(t,g=>m.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":a?c:void 0},m.createElement(ZK.Provider,{value:x},g))))}),Iye=m.forwardRef((t,s)=>{let{alwaysRender:a,...r}=t,n=m.useRef(null),i=lh(l=>!l.search);return!a&&!i?null:m.createElement(Pt.div,{ref:Uo(n,s),...r,"cmdk-separator":"",role:"separator"})}),Lye=m.forwardRef((t,s)=>{let{onValueChange:a,...r}=t,n=t.value!=null,i=zT(),l=lh(c=>c.search),o=lh(c=>c.selectedItemId),d=rb();return m.useEffect(()=>{t.value!=null&&i.setState("search",t.value)},[t.value]),m.createElement(Pt.input,{ref:s,...r,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":d.listId,"aria-labelledby":d.labelId,"aria-activedescendant":o,id:d.inputId,type:"text",value:n?t.value:l,onChange:c=>{n||i.setState("search",c.target.value),a?.(c.target.value)}})}),Mye=m.forwardRef((t,s)=>{let{children:a,label:r="Suggestions",...n}=t,i=m.useRef(null),l=m.useRef(null),o=lh(c=>c.selectedItemId),d=rb();return m.useEffect(()=>{if(l.current&&i.current){let c=l.current,u=i.current,h,x=new ResizeObserver(()=>{h=requestAnimationFrame(()=>{let g=c.offsetHeight;u.style.setProperty("--cmdk-list-height",g.toFixed(1)+"px")})});return x.observe(c),()=>{cancelAnimationFrame(h),x.unobserve(c)}}},[]),m.createElement(Pt.div,{ref:Uo(i,s),...n,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":o,"aria-label":r,id:d.listId},v_(t,c=>m.createElement("div",{ref:Uo(l,d.listInnerRef),"cmdk-list-sizer":""},c)))}),Bye=m.forwardRef((t,s)=>{let{open:a,onOpenChange:r,overlayClassName:n,contentClassName:i,container:l,...o}=t;return m.createElement(V1,{open:a,onOpenChange:r},m.createElement(W1,{container:l},m.createElement(Mg,{"cmdk-overlay":"",className:n}),m.createElement(Bg,{"aria-label":t.label,"cmdk-dialog":"",className:i},m.createElement(JK,{ref:s,...o}))))}),$ye=m.forwardRef((t,s)=>lh(a=>a.filtered.count===0)?m.createElement(Pt.div,{ref:s,...t,"cmdk-empty":"",role:"presentation"}):null),Uye=m.forwardRef((t,s)=>{let{progress:a,children:r,label:n="Loading...",...i}=t;return m.createElement(Pt.div,{ref:s,...i,"cmdk-loading":"",role:"progressbar","aria-valuenow":a,"aria-valuemin":0,"aria-valuemax":100,"aria-label":n},v_(t,l=>m.createElement("div",{"aria-hidden":!0},l)))}),Pl=Object.assign(JK,{List:Mye,Item:Rye,Input:Lye,Group:Oye,Separator:Iye,Dialog:Bye,Empty:$ye,Loading:Uye});function zye(t,s){let a=t.nextElementSibling;for(;a;){if(a.matches(s))return a;a=a.nextElementSibling}}function qye(t,s){let a=t.previousElementSibling;for(;a;){if(a.matches(s))return a;a=a.previousElementSibling}}function QK(t){let s=m.useRef(t);return Gx(()=>{s.current=t}),s}var Gx=typeof window>"u"?m.useEffect:m.useLayoutEffect;function kf(t){let s=m.useRef();return s.current===void 0&&(s.current=t()),s}function lh(t){let s=zT(),a=()=>t(s.snapshot());return m.useSyncExternalStore(s.subscribe,a,a)}function XK(t,s,a,r=[]){let n=m.useRef(),i=rb();return Gx(()=>{var l;let o=(()=>{var c;for(let u of a){if(typeof u=="string")return u.trim();if(typeof u=="object"&&"current"in u)return u.current?(c=u.current.textContent)==null?void 0:c.trim():n.current}})(),d=r.map(c=>c.trim());i.value(t,o,d),(l=s.current)==null||l.setAttribute(Sf,o),n.current=o}),n}var Vye=()=>{let[t,s]=m.useState(),a=kf(()=>new Map);return Gx(()=>{a.current.forEach(r=>r()),a.current=new Map},[t]),(r,n)=>{a.current.set(r,n),s({})}};function Wye(t){let s=t.type;return typeof s=="function"?s(t.props):"render"in s?s.render(t.props):t}function v_({asChild:t,children:s},a){return t&&m.isValidElement(s)?m.cloneElement(Wye(s),{ref:s.ref},a(s.props.children)):a(s)}var Hye={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};function Yg(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const j_=m.forwardRef(({className:t,...s},a)=>e.jsx(Pl,{ref:a,className:Yg("flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground",t),...s}));j_.displayName=Pl.displayName;const Gye=({children:t,...s})=>e.jsx(wt,{...s,children:e.jsx(yt,{className:"overflow-hidden p-0 shadow-lg",children:e.jsx(j_,{className:"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5",children:t})})}),b_=m.forwardRef(({className:t,...s},a)=>e.jsxs("div",{className:"flex items-center border-b px-3","cmdk-input-wrapper":"",children:[e.jsx(Bt,{className:"mr-2 h-4 w-4 shrink-0 opacity-50"}),e.jsx(Pl.Input,{ref:a,className:Yg("flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50",t),...s})]}));b_.displayName=Pl.Input.displayName;const y_=m.forwardRef(({className:t,...s},a)=>e.jsx(Pl.List,{ref:a,className:Yg("max-h-[300px] overflow-y-auto overflow-x-hidden",t),...s}));y_.displayName=Pl.List.displayName;const N_=m.forwardRef((t,s)=>e.jsx(Pl.Empty,{ref:s,className:"py-6 text-center text-sm",...t}));N_.displayName=Pl.Empty.displayName;const uj=m.forwardRef(({className:t,...s},a)=>e.jsx(Pl.Group,{ref:a,className:Yg("overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground",t),...s}));uj.displayName=Pl.Group.displayName;const Kye=m.forwardRef(({className:t,...s},a)=>e.jsx(Pl.Separator,{ref:a,className:Yg("-mx-1 h-px bg-border",t),...s}));Kye.displayName=Pl.Separator.displayName;const zf=m.forwardRef(({className:t,...s},a)=>e.jsx(Pl.Item,{ref:a,className:Yg("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50",t),...s}));zf.displayName=Pl.Item.displayName;const SM=[{title:"Applications",items:[{title:"All Applications",href:"/lc-builder/dashboard",icon:aV},{title:"Create New",href:"/lc-builder/dashboard/new",icon:Yt}]},{title:"Workflow",items:[{title:"Approval Queue",href:"/lc-builder/dashboard/approvals",icon:h5},{title:"Shared With Me",href:"/lc-builder/dashboard/shared",icon:xs,badge:"New"}]},{title:"Library",items:[{title:"Clause Library",href:"/lc-builder/dashboard/clauses",icon:yi},{title:"Templates",href:"/lc-builder/dashboard/templates",icon:Be}]},{title:"Quick Entry",items:[{title:"Applicant Profiles",href:"/lc-builder/dashboard/applicants",icon:Bs},{title:"Beneficiary Directory",href:"/lc-builder/dashboard/beneficiaries",icon:xs}]},{title:"Tools",items:[{title:"MT700 Reference",href:"/lc-builder/dashboard/mt700-reference",icon:Gs},{title:"Risk Calculator",href:"/lc-builder/dashboard/risk",icon:Ve},{title:"Version History",href:"/lc-builder/dashboard/history",icon:xn,badge:"New"}]},{title:"Settings",items:[{title:"Preferences",href:"/lc-builder/dashboard/settings",icon:sn},{title:"Help & FAQ",href:"/lc-builder/dashboard/help",icon:Pn}]}];function Yye(){const t=rn(),s=zt(),{user:a,logout:r,isLoading:n}=Dt(),[i,l]=m.useState(!1);m.useEffect(()=>{!n&&!a&&s("/login?redirect=/lc-builder/dashboard")},[n,a,s]),m.useEffect(()=>{const c=u=>{u.key==="k"&&(u.metaKey||u.ctrlKey)&&(u.preventDefault(),l(h=>!h))};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[]);const o=m.useCallback(async()=>{await r(),s("/")},[r,s]),d=c=>c==="/lc-builder/dashboard"?t.pathname===c:t.pathname.startsWith(c);return n?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-emerald-500 border-t-transparent rounded-full"})}):e.jsxs(uT,{children:[e.jsxs("div",{className:"min-h-screen flex w-full bg-slate-950",children:[e.jsxs(Zo,{className:"border-r border-slate-800",children:[e.jsxs(Jo,{className:"border-b border-slate-800 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs(pe,{to:"/lc-builder",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:e.jsx(Be,{className:"w-4 h-4 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"font-semibold text-white text-sm",children:"LC Builder"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Bank-Ready Applications"})]})]})}),e.jsxs("button",{onClick:()=>l(!0),className:"mt-4 w-full flex items-center gap-2 px-3 py-2 text-sm text-slate-400 bg-slate-800/50 border border-slate-700 rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(Bt,{className:"w-4 h-4"}),e.jsx("span",{className:"flex-1 text-left",children:"Search..."}),e.jsx("kbd",{className:"text-xs bg-slate-700 px-1.5 py-0.5 rounded",children:"âŒ˜K"})]})]}),e.jsx(Xo,{className:"p-2",children:SM.map(c=>e.jsxs(Zs,{children:[e.jsx(Aa,{className:"text-xs text-slate-500 uppercase tracking-wider px-2 mb-1",children:c.title}),e.jsx(Js,{children:e.jsx(ls,{children:c.items.map(u=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:d(u.href),className:"w-full",children:e.jsxs(pe,{to:u.href,className:`flex items-center gap-2 px-2 py-1.5 rounded-lg transition-colors ${d(u.href)?"bg-emerald-500/10 text-emerald-400":"text-slate-400 hover:text-white hover:bg-slate-800"}`,children:[e.jsx(u.icon,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:u.title})]})})},u.href))})})]},c.title))}),e.jsxs(Qo,{className:"border-t border-slate-800 p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsx(M,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",asChild:!0,children:e.jsxs(pe,{to:"/hub",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Hub"]})})}),a&&e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsxs("button",{className:"mt-3 w-full flex items-center gap-2 px-2 py-2 rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(Ux,{className:"h-8 w-8",children:e.jsx(zx,{className:"bg-emerald-500/10 text-emerald-400 text-xs",children:a.email?.charAt(0).toUpperCase()})}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("p",{className:"text-sm text-white truncate",children:a.email}),e.jsx("p",{className:"text-xs text-slate-400",children:"Free Plan"})]}),e.jsx(ja,{className:"w-4 h-4 text-slate-400"})]})}),e.jsxs(Zn,{align:"end",className:"w-56",children:[e.jsx(is,{asChild:!0,children:e.jsxs(pe,{to:"/lc-builder/dashboard/settings",children:[e.jsx(sn,{className:"w-4 h-4 mr-2"}),"Settings"]})}),e.jsx(Dc,{}),e.jsxs(is,{onClick:o,className:"text-red-400",children:[e.jsx(Yo,{className:"w-4 h-4 mr-2"}),"Sign Out"]})]})]})]})]}),e.jsxs("main",{className:"flex-1 overflow-auto",children:[e.jsxs("div",{className:"md:hidden flex items-center justify-between p-4 border-b border-slate-800",children:[e.jsx(mT,{}),e.jsx("span",{className:"font-semibold text-white",children:"LC Builder"}),e.jsx("div",{className:"w-8"})," "]}),e.jsx(ip,{})]})]}),e.jsxs(Gye,{open:i,onOpenChange:l,children:[e.jsx(b_,{placeholder:"Search applications, clauses, or commands..."}),e.jsxs(y_,{children:[e.jsx(N_,{children:"No results found."}),e.jsxs(uj,{heading:"Quick Actions",children:[e.jsxs(zf,{onSelect:()=>{l(!1),s("/lc-builder/dashboard/new")},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create New LC Application"]}),e.jsxs(zf,{onSelect:()=>{l(!1),s("/lc-builder/dashboard/clauses")},children:[e.jsx(yi,{className:"w-4 h-4 mr-2"}),"Browse Clause Library"]})]}),e.jsx(uj,{heading:"Navigation",children:SM.flatMap(c=>c.items.map(u=>e.jsxs(zf,{onSelect:()=>{l(!1),s(u.href)},children:[e.jsx(u.icon,{className:"w-4 h-4 mr-2"}),u.title]},u.href)))})]})]})]})}const Zye="https://trdrhub-api.onrender.com",kM={shipment:Us,documents:Be,payment:pn,special:ni,amendments:$w,red_green:zde},EM={shipment:"bg-blue-500/10 text-blue-400 border-blue-500/20",documents:"bg-emerald-500/10 text-emerald-400 border-emerald-500/20",payment:"bg-purple-500/10 text-purple-400 border-purple-500/20",special:"bg-amber-500/10 text-amber-400 border-amber-500/20",amendments:"bg-pink-500/10 text-pink-400 border-pink-500/20",red_green:"bg-red-500/10 text-red-400 border-red-500/20"},AM={low:"bg-green-500/10 text-green-400",medium:"bg-yellow-500/10 text-yellow-400",high:"bg-red-500/10 text-red-400"},PM={beneficiary:"bg-blue-500/10 text-blue-400",applicant:"bg-purple-500/10 text-purple-400",neutral:"bg-slate-500/10 text-slate-400"};function Jye(){const{session:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(null),[d,c]=m.useState(!0),[u,h]=m.useState(""),[x,g]=m.useState("all"),[j,y]=m.useState("all"),[b,N]=m.useState("all"),[C,_]=m.useState(null),[A,k]=m.useState(!1);m.useEffect(()=>{E()},[t?.access_token]),m.useEffect(()=>{D()},[a,u,x,j,b]);const E=async()=>{c(!0);try{const T={"Content-Type":"application/json"};t?.access_token&&(T.Authorization=`Bearer ${t.access_token}`);const B=await fetch(`${Zye}/lc-builder/clauses`,{headers:T});if(B.ok){const G=await B.json();r(G.clauses||[]),o(G.statistics||null)}}catch(T){console.error("Error fetching clauses:",T),s({title:"Error",description:"Failed to load clause library",variant:"destructive"})}finally{c(!1)}},D=()=>{let T=[...a];if(u){const B=u.toLowerCase();T=T.filter(G=>G.title.toLowerCase().includes(B)||G.clause_text.toLowerCase().includes(B)||G.plain_english.toLowerCase().includes(B)||G.tags.some(q=>q.toLowerCase().includes(B)))}x!=="all"&&(T=T.filter(B=>B.category===x)),j!=="all"&&(T=T.filter(B=>B.risk_level===j)),b!=="all"&&(T=T.filter(B=>B.bias===b)),i(T)},R=T=>{navigator.clipboard.writeText(T),s({title:"Copied!",description:"Clause text copied to clipboard"})},O=T=>{_(T),k(!0)},P=n.reduce((T,B)=>{const G=`${B.category}|${B.subcategory}`;return T[G]||(T[G]=[]),T[G].push(B),T},{});return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(yi,{className:"h-5 w-5 text-emerald-400"}),"Clause Library"]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[l?.total_clauses||0," pre-approved LC clauses across ",Object.keys(l?.categories||{}).length," categories"]})]})})})}),l&&e.jsx("div",{className:"px-6 py-4 border-b border-slate-800",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-6 gap-4",children:Object.entries(l.categories).map(([T,B])=>{const G=kM[T]||Be;return e.jsxs("button",{onClick:()=>g(T===x?"all":T),className:`p-3 rounded-lg border transition-all ${x===T?"border-emerald-500 bg-emerald-500/10":"border-slate-700 bg-slate-800/50 hover:border-slate-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(G,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-white capitalize",children:T})]}),e.jsx("p",{className:"text-lg font-bold text-emerald-400 mt-1",children:B})]},T)})})}),e.jsxs("div",{className:"px-6 py-4 border-b border-slate-800",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsx("div",{className:"flex-1 min-w-[200px]",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search clauses...",value:u,onChange:T=>h(T.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]})}),e.jsxs(Te,{value:j,onValueChange:y,children:[e.jsx(Pe,{className:"w-[150px] bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Risk Level"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Risk Levels"}),e.jsx(K,{value:"low",children:"Low Risk"}),e.jsx(K,{value:"medium",children:"Medium Risk"}),e.jsx(K,{value:"high",children:"High Risk"})]})]}),e.jsxs(Te,{value:b,onValueChange:N,children:[e.jsx(Pe,{className:"w-[150px] bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Bias"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Parties"}),e.jsx(K,{value:"beneficiary",children:"Pro-Beneficiary"}),e.jsx(K,{value:"applicant",children:"Pro-Applicant"}),e.jsx(K,{value:"neutral",children:"Neutral"})]})]}),(x!=="all"||j!=="all"||b!=="all"||u)&&e.jsx(M,{variant:"ghost",onClick:()=>{g("all"),y("all"),N("all"),h("")},className:"text-slate-400",children:"Clear Filters"})]}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2",children:["Showing ",n.length," of ",a.length," clauses"]})]}),e.jsx("div",{className:"px-6 py-6",children:d?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin h-8 w-8 border-2 border-emerald-500 border-t-transparent rounded-full"})}):n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(yi,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No clauses found"}),e.jsx("p",{className:"text-slate-400",children:"Try adjusting your search or filters"})]}):e.jsx(oo,{type:"multiple",className:"space-y-4",children:Object.entries(P).map(([T,B])=>{const[G,q]=T.split("|"),z=kM[G]||Be;return e.jsxs(Qr,{value:T,className:"border border-slate-700 rounded-lg bg-slate-800/30",children:[e.jsx(Xr,{className:"px-4 hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${EM[G]?.split(" ")[0]||"bg-slate-700"}`,children:e.jsx(z,{className:"h-4 w-4"})}),e.jsxs("div",{className:"text-left",children:[e.jsx("p",{className:"font-medium text-white",children:q}),e.jsxs("p",{className:"text-xs text-slate-400",children:[B.length," clauses"]})]})]})}),e.jsx(en,{className:"px-4 pb-4",children:e.jsx("div",{className:"space-y-3",children:B.map(H=>e.jsx($,{className:"bg-slate-800/50 border-slate-700 hover:border-slate-600 cursor-pointer transition-all",onClick:()=>O(H),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Q,{variant:"outline",className:"text-xs",children:H.code}),e.jsx(Q,{className:AM[H.risk_level],children:H.risk_level}),e.jsx(Q,{className:PM[H.bias],children:H.bias})]}),e.jsx("h4",{className:"font-medium text-white mb-1",children:H.title}),e.jsx("p",{className:"text-sm text-slate-400 line-clamp-2",children:H.plain_english})]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:le=>{le.stopPropagation(),R(H.clause_text)},children:e.jsx(qa,{className:"h-4 w-4"})})]})})},H.code))})})]},T)})})}),e.jsx(wt,{open:A,onOpenChange:k,children:e.jsx(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:C&&e.jsxs(e.Fragment,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",children:C.code}),C.title]}),e.jsx(_t,{children:C.subcategory})]}),e.jsxs("div",{className:"space-y-4 mt-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(Q,{className:EM[C.category],children:C.category}),e.jsxs(Q,{className:AM[C.risk_level],children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),C.risk_level," risk"]}),e.jsxs(Q,{className:PM[C.bias],children:[e.jsx(Ot,{className:"h-3 w-3 mr-1"}),C.bias]}),C.bank_acceptance>0&&e.jsxs(Q,{className:"bg-green-500/10 text-green-400",children:[e.jsx(Oe,{className:"h-3 w-3 mr-1"}),Math.round(C.bank_acceptance*100),"% acceptance"]})]}),e.jsx("div",{className:"bg-slate-800 rounded-lg p-4 border border-slate-700",children:e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"CLAUSE TEXT"}),e.jsx("p",{className:"text-white font-mono text-sm",children:C.clause_text})]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>R(C.clause_text),children:e.jsx(qa,{className:"h-4 w-4"})})]})}),e.jsx("div",{className:"bg-emerald-500/5 rounded-lg p-4 border border-emerald-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-emerald-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-emerald-400 mb-1",children:"PLAIN ENGLISH"}),e.jsx("p",{className:"text-slate-300",children:C.plain_english})]})]})}),C.risk_notes&&e.jsx("div",{className:"bg-yellow-500/5 rounded-lg p-4 border border-yellow-500/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-yellow-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-yellow-400 mb-1",children:"RISK NOTES"}),e.jsx("p",{className:"text-slate-300",children:C.risk_notes})]})]})}),C.tags.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-400 mb-2",children:"TAGS"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:C.tags.map(T=>e.jsx(Q,{variant:"outline",className:"text-xs cursor-pointer hover:bg-slate-700",onClick:()=>{h(T),k(!1)},children:T},T))})]}),e.jsx("div",{className:"flex gap-2 pt-4",children:e.jsxs(M,{className:"flex-1 bg-emerald-600 hover:bg-emerald-700",onClick:()=>R(C.clause_text),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Copy Clause"]})})]})]})})})]})}const DM="https://trdrhub-api.onrender.com",TM={textiles:RD,electronics:zj,food:pV,machinery:AD,general:Ps},s4=[{id:"tpl-rmg-bd-us",name:"Bangladesh RMG to USA",description:"Standard LC for ready-made garments export from Bangladesh to United States",industry:"textiles",trade_route:"Bangladesh â†’ USA",payment_terms:"At Sight",typical_documents:["Commercial Invoice","Packing List","B/L","GSP Form A","Certificate of Origin"],usage_count:1250},{id:"tpl-rmg-bd-eu",name:"Bangladesh RMG to EU",description:"RMG export to European Union with GSP origin certificate",industry:"textiles",trade_route:"Bangladesh â†’ EU",payment_terms:"At Sight",typical_documents:["Commercial Invoice","Packing List","B/L","EUR.1","Certificate of Origin"],usage_count:980},{id:"tpl-elec-cn-us",name:"China Electronics to USA",description:"Electronics/electrical products from China to United States",industry:"electronics",trade_route:"China â†’ USA",payment_terms:"60 Days Sight",typical_documents:["Commercial Invoice","Packing List","B/L","CE Certificate","FCC Declaration"],usage_count:850},{id:"tpl-elec-cn-eu",name:"China Electronics to EU",description:"Electronics export to EU with CE marking and RoHS compliance",industry:"electronics",trade_route:"China â†’ EU",payment_terms:"60 Days Sight",typical_documents:["Commercial Invoice","Packing List","B/L","CE Certificate","RoHS Certificate"],usage_count:720},{id:"tpl-food-in-me",name:"India Food to Middle East",description:"Food products export from India to GCC countries with Halal certification",industry:"food",trade_route:"India â†’ GCC",payment_terms:"At Sight",typical_documents:["Commercial Invoice","Packing List","B/L","Halal Certificate","Health Certificate"],usage_count:650},{id:"tpl-mach-de-in",name:"Germany Machinery to India",description:"Industrial machinery export from Germany to India",industry:"machinery",trade_route:"Germany â†’ India",payment_terms:"90 Days Sight",typical_documents:["Commercial Invoice","Packing List","B/L","Performance Certificate","Warranty"],usage_count:420},{id:"tpl-textile-pk-uk",name:"Pakistan Textiles to UK",description:"Textile products from Pakistan to United Kingdom",industry:"textiles",trade_route:"Pakistan â†’ UK",payment_terms:"At Sight",typical_documents:["Commercial Invoice","Packing List","B/L","Certificate of Origin","GSP Form A"],usage_count:380},{id:"tpl-general-import",name:"General Import LC",description:"Standard import LC template for any goods",industry:"general",trade_route:"Any â†’ Any",payment_terms:"At Sight",typical_documents:["Commercial Invoice","Packing List","B/L","Certificate of Origin"],usage_count:5200}];function Qye(){const t=zt(),{session:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(s4),[i,l]=m.useState([]),[o,d]=m.useState(s4),[c,u]=m.useState(!0),[h,x]=m.useState(""),[g,j]=m.useState("all");m.useEffect(()=>{y()},[s?.access_token]);const y=async()=>{u(!0);try{const _=await fetch(`${DM}/lc-builder/templates`);if(_.ok){const A=await _.json();if(A.templates&&A.templates.length>0){const k=A.templates.map(E=>({id:E.id,name:E.name,description:E.description||"",industry:E.industry||"general",trade_route:E.trade_route||"Any â†’ Any",payment_terms:E.template_data?.payment_terms||"At Sight",typical_documents:E.default_documents?.map(D=>D.document_type||D)||[],usage_count:E.usage_count||0}));k.length>0&&n([...k,...s4])}}if(s?.access_token){const A=await fetch(`${DM}/lc-builder/templates/mine`,{headers:{Authorization:`Bearer ${s.access_token}`}});if(A.ok){const k=await A.json();l(k.templates||[])}}}catch(_){console.error("Error fetching templates:",_)}finally{u(!1)}};m.useEffect(()=>{b()},[r,h,g]);const b=()=>{let _=[...r];if(h){const A=h.toLowerCase();_=_.filter(k=>k.name.toLowerCase().includes(A)||k.description.toLowerCase().includes(A)||k.trade_route.toLowerCase().includes(A))}g!=="all"&&(_=_.filter(A=>A.industry===g)),d(_)},N=_=>{a({title:"Template Selected",description:`Starting LC application with ${_.name} template`}),t("/lc-builder/dashboard/new",{state:{template:_}})},C=[...new Set(r.map(_=>_.industry))];return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-emerald-400"}),"LC Templates"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Pre-configured templates for common trade scenarios"})]}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:()=>t("/lc-builder/dashboard/new"),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Start from Scratch"]})]})})}),e.jsx("div",{className:"px-6 py-4 border-b border-slate-800",children:e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{variant:g==="all"?"default":"outline",size:"sm",onClick:()=>j("all"),className:g==="all"?"bg-emerald-600":"",children:"All Industries"}),C.map(_=>{const A=TM[_]||Ps;return e.jsxs(M,{variant:g===_?"default":"outline",size:"sm",onClick:()=>j(_),className:g===_?"bg-emerald-600":"",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),_.charAt(0).toUpperCase()+_.slice(1)]},_)})]})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search templates...",value:h,onChange:_=>x(_.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]})}),e.jsxs("div",{className:"px-6 py-4",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:o.map(_=>{const A=TM[_.industry]||Ps;return e.jsxs($,{className:"bg-slate-800/50 border-slate-700 hover:border-slate-600 transition-all cursor-pointer",onClick:()=>N(_),children:[e.jsxs(X,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(A,{className:"h-5 w-5 text-emerald-400"})}),e.jsxs(Q,{variant:"outline",className:"text-xs",children:[_.usage_count.toLocaleString()," uses"]})]}),e.jsx(ee,{className:"text-lg text-white mt-2",children:_.name}),e.jsx(ue,{className:"text-slate-400",children:_.description})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ha,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-slate-300",children:_.trade_route})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(mt,{className:"h-4 w-4 text-slate-500"}),e.jsx("span",{className:"text-slate-300",children:_.payment_terms})]}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.typical_documents.slice(0,3).map(k=>e.jsx(Q,{variant:"outline",className:"text-xs",children:k},k)),_.typical_documents.length>3&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",_.typical_documents.length-3," more"]})]}),e.jsxs(M,{className:"w-full mt-4 bg-slate-700 hover:bg-slate-600",variant:"secondary",children:["Use Template",e.jsx(Jt,{className:"h-4 w-4 ml-2"})]})]})})]},_.id)})}),o.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No templates found"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Try adjusting your search or filter"}),e.jsx(M,{onClick:()=>t("/lc-builder/dashboard/new"),children:"Start from Scratch"})]})]})]})}const FM={company_name:"",address:"",city:"",country:"",contact_person:"",email:"",phone:"",bank_name:"",bank_swift:"",bank_address:"",is_favorite:!1},r0="https://trdrhub-api.onrender.com";function Xye(){const{session:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(""),[u,h]=m.useState(!1),[x,g]=m.useState(null),[j,y]=m.useState(FM);m.useEffect(()=>{b()},[t?.access_token]);const b=async()=>{if(!t?.access_token){o(!1);return}o(!0);try{const D=await fetch(`${r0}/lc-builder/profiles/applicants`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(D.ok){const R=await D.json();r(R.profiles||[])}}catch(D){console.error("Error fetching profiles:",D)}finally{o(!1)}};m.useEffect(()=>{!l&&a.length===0&&!t?.access_token&&r([{id:"ap-1",company_name:"ABC Trading Co. Ltd",address:"123 Commerce Street, Suite 500",city:"New York",country:"United States",contact_person:"John Smith",email:"john@abctrading.com",phone:"+1 212 555 0123",bank_name:"Citibank N.A.",bank_swift:"CITIUS33",bank_address:"388 Greenwich Street, New York, NY 10013",is_favorite:!0,created_at:"2024-01-15",usage_count:25},{id:"ap-2",company_name:"Euro Imports GmbH",address:"IndustriestraÃŸe 45",city:"Frankfurt",country:"Germany",contact_person:"Hans Mueller",email:"hans@euroimports.de",phone:"+49 69 555 0456",bank_name:"Deutsche Bank AG",bank_swift:"DEUTDEFF",bank_address:"Taunusanlage 12, 60325 Frankfurt",is_favorite:!1,created_at:"2024-02-20",usage_count:12}])},[l,a.length,t?.access_token]),m.useEffect(()=>{N()},[a,d]);const N=()=>{let D=[...a];if(d){const R=d.toLowerCase();D=D.filter(O=>O.company_name.toLowerCase().includes(R)||O.country.toLowerCase().includes(R)||O.city.toLowerCase().includes(R))}D.sort((R,O)=>R.is_favorite!==O.is_favorite?R.is_favorite?-1:1:O.usage_count-R.usage_count),i(D)},C=()=>{g(null),y(FM),h(!0)},_=D=>{g(D),y({company_name:D.company_name,address:D.address,city:D.city,country:D.country,contact_person:D.contact_person,email:D.email,phone:D.phone,bank_name:D.bank_name,bank_swift:D.bank_swift,bank_address:D.bank_address,is_favorite:D.is_favorite}),h(!0)},A=async()=>{if(!j.company_name||!j.country){s({title:"Validation Error",description:"Company name and country are required",variant:"destructive"});return}if(!t?.access_token){if(x)r(a.map(D=>D.id===x.id?{...D,...j}:D));else{const D={id:`ap-${Date.now()}`,...j,created_at:new Date().toISOString().split("T")[0],usage_count:0};r([...a,D])}h(!1);return}try{const D=x?`${r0}/lc-builder/profiles/applicants/${x.id}`:`${r0}/lc-builder/profiles/applicants`;if((await fetch(D,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify(j)})).ok)s({title:x?"Profile Updated":"Profile Created",description:`${j.company_name} has been ${x?"updated":"added"}`}),b(),h(!1);else throw new Error("Failed to save")}catch{s({title:"Error",description:"Failed to save profile",variant:"destructive"})}},k=async D=>{if(t?.access_token)try{(await fetch(`${r0}/lc-builder/profiles/applicants/${D}`,{method:"DELETE",headers:{Authorization:`Bearer ${t.access_token}`}})).ok&&(s({title:"Profile Deleted",description:"Applicant profile has been removed"}),b())}catch{s({title:"Error",description:"Failed to delete profile",variant:"destructive"})}else r(a.filter(R=>R.id!==D)),s({title:"Profile Deleted",description:"Applicant profile has been removed"})},E=async D=>{const R=a.find(O=>O.id===D);if(R)if(t?.access_token)try{await fetch(`${r0}/lc-builder/profiles/applicants/${D}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({...R,is_favorite:!R.is_favorite})}),b()}catch(O){console.error("Failed to update favorite:",O)}else r(a.map(O=>O.id===D?{...O,is_favorite:!O.is_favorite}:O))};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-emerald-400"}),"Applicant Profiles"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Saved buyer/importer profiles for quick LC creation"})]}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:C,children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Applicant"]})]})})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search applicants...",value:d,onChange:D=>c(D.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]})}),e.jsx("div",{className:"px-6 py-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bs,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No applicant profiles"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Add your first buyer/importer profile"}),e.jsxs(M,{onClick:C,children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Applicant"]})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(D=>e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(Bs,{className:"h-5 w-5 text-blue-400"})}),e.jsx("button",{onClick:()=>E(D.id),className:"text-slate-400 hover:text-yellow-400 transition-colors",children:D.is_favorite?e.jsx(nl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(B1,{className:"h-4 w-4"})})]}),e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(dp,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>_(D),children:[e.jsx(zn,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(is,{className:"text-red-400",onClick:()=>k(D.id),children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsx(ee,{className:"text-lg text-white mt-2",children:D.company_name}),e.jsxs(ue,{className:"text-slate-400 flex items-center gap-1",children:[e.jsx(ha,{className:"h-3 w-3"}),D.city,", ",D.country]})]}),e.jsxs(U,{className:"space-y-2",children:[D.contact_person&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Be,{className:"h-4 w-4 text-slate-500"}),D.contact_person]}),D.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Va,{className:"h-4 w-4 text-slate-500"}),D.email]}),D.bank_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Bs,{className:"h-4 w-4 text-slate-500"}),D.bank_name,D.bank_swift&&e.jsx(Q,{variant:"outline",className:"text-xs",children:D.bank_swift})]}),e.jsxs("div",{className:"pt-2 text-xs text-slate-500",children:["Used ",D.usage_count," times"]})]})]},D.id))})}),e.jsx(wt,{open:u,onOpenChange:h,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:x?"Edit Applicant Profile":"Add Applicant Profile"}),e.jsx(_t,{children:"Save buyer/importer details for quick LC creation"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-400",children:"Company Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Name *"}),e.jsx(oe,{value:j.company_name,onChange:D=>y({...j,company_name:D.target.value}),placeholder:"ABC Trading Co. Ltd",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Person"}),e.jsx(oe,{value:j.contact_person,onChange:D=>y({...j,contact_person:D.target.value}),placeholder:"John Smith",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Address"}),e.jsx(Zt,{value:j.address,onChange:D=>y({...j,address:D.target.value}),placeholder:"123 Commerce Street, Suite 500",className:"bg-slate-800 border-slate-700",rows:2})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"City"}),e.jsx(oe,{value:j.city,onChange:D=>y({...j,city:D.target.value}),placeholder:"New York",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country *"}),e.jsx(oe,{value:j.country,onChange:D=>y({...j,country:D.target.value}),placeholder:"United States",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Email"}),e.jsx(oe,{type:"email",value:j.email,onChange:D=>y({...j,email:D.target.value}),placeholder:"contact@company.com",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Phone"}),e.jsx(oe,{value:j.phone,onChange:D=>y({...j,phone:D.target.value}),placeholder:"+1 212 555 0123",className:"bg-slate-800 border-slate-700"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-700",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-400",children:"Issuing Bank Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Name"}),e.jsx(oe,{value:j.bank_name,onChange:D=>y({...j,bank_name:D.target.value}),placeholder:"Citibank N.A.",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SWIFT Code"}),e.jsx(oe,{value:j.bank_swift,onChange:D=>y({...j,bank_swift:D.target.value}),placeholder:"CITIUS33",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Address"}),e.jsx(oe,{value:j.bank_address,onChange:D=>y({...j,bank_address:D.target.value}),placeholder:"388 Greenwich Street, New York, NY 10013",className:"bg-slate-800 border-slate-700"})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:A,children:[x?"Update":"Create"," Profile"]})]})]})})]})}const RM={company_name:"",address:"",city:"",country:"",contact_person:"",email:"",phone:"",bank_name:"",bank_swift:"",bank_account:"",bank_address:"",industry:"general",is_favorite:!1},OM=[{value:"textiles",label:"Textiles/RMG",icon:RD},{value:"electronics",label:"Electronics",icon:zj},{value:"general",label:"General Trading",icon:Ps}],n0="https://trdrhub-api.onrender.com";function eNe(){const{session:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(""),[u,h]=m.useState(!1),[x,g]=m.useState(null),[j,y]=m.useState(RM);m.useEffect(()=>{b()},[t?.access_token]);const b=async()=>{if(!t?.access_token){o(!1),r([{id:"bp-1",company_name:"Fashion Garments Ltd",address:"Plot 123, BSCIC Industrial Area",city:"Dhaka",country:"Bangladesh",contact_person:"Mohammad Rahman",email:"rahman@fashiongarments.bd",phone:"+880 2 8901234",bank_name:"Standard Chartered Bank Bangladesh",bank_swift:"SCBLBDDX",bank_account:"0123456789012",bank_address:"67 Gulshan Avenue, Dhaka 1212",industry:"textiles",is_favorite:!0,created_at:"2024-01-10",usage_count:45},{id:"bp-2",company_name:"Shenzhen Electronics Co. Ltd",address:"Building A, Tech Park, Nanshan District",city:"Shenzhen",country:"China",contact_person:"Wang Lei",email:"wang@szelectronics.cn",phone:"+86 755 8888 9999",bank_name:"Bank of China",bank_swift:"BKCHCNBJ",bank_account:"6212261234567890",bank_address:"1 Fuxingmen Nei Dajie, Beijing",industry:"electronics",is_favorite:!1,created_at:"2024-02-15",usage_count:18},{id:"bp-3",company_name:"Karachi Exports Pvt Ltd",address:"Suite 501, Trade Tower",city:"Karachi",country:"Pakistan",contact_person:"Ali Hassan",email:"ali@karachiexports.pk",phone:"+92 21 3456 7890",bank_name:"Habib Bank Limited",bank_swift:"HABORPKA",bank_account:"0102345678901",bank_address:"Habib Bank Plaza, Karachi",industry:"textiles",is_favorite:!1,created_at:"2024-03-01",usage_count:12}]);return}o(!0);try{const R=await fetch(`${n0}/lc-builder/profiles/beneficiaries`,{headers:{Authorization:`Bearer ${t.access_token}`}});if(R.ok){const O=await R.json();r(O.profiles||[])}}catch(R){console.error("Error fetching profiles:",R)}finally{o(!1)}};m.useEffect(()=>{N()},[a,d]);const N=()=>{let R=[...a];if(d){const O=d.toLowerCase();R=R.filter(P=>P.company_name.toLowerCase().includes(O)||P.country.toLowerCase().includes(O)||P.city.toLowerCase().includes(O)||P.industry.toLowerCase().includes(O))}R.sort((O,P)=>O.is_favorite!==P.is_favorite?O.is_favorite?-1:1:P.usage_count-O.usage_count),i(R)},C=()=>{g(null),y(RM),h(!0)},_=R=>{g(R),y({company_name:R.company_name,address:R.address,city:R.city,country:R.country,contact_person:R.contact_person,email:R.email,phone:R.phone,bank_name:R.bank_name,bank_swift:R.bank_swift,bank_account:R.bank_account,bank_address:R.bank_address,industry:R.industry,is_favorite:R.is_favorite}),h(!0)},A=async()=>{if(!j.company_name||!j.country){s({title:"Validation Error",description:"Company name and country are required",variant:"destructive"});return}if(!t?.access_token){if(x)r(a.map(R=>R.id===x.id?{...R,...j}:R));else{const R={id:`bp-${Date.now()}`,...j,created_at:new Date().toISOString().split("T")[0],usage_count:0};r([...a,R])}h(!1);return}try{const R=x?`${n0}/lc-builder/profiles/beneficiaries/${x.id}`:`${n0}/lc-builder/profiles/beneficiaries`;if((await fetch(R,{method:x?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify(j)})).ok)s({title:x?"Profile Updated":"Profile Created",description:`${j.company_name} has been ${x?"updated":"added"}`}),b(),h(!1);else throw new Error("Failed to save")}catch{s({title:"Error",description:"Failed to save profile",variant:"destructive"})}},k=async R=>{if(t?.access_token)try{(await fetch(`${n0}/lc-builder/profiles/beneficiaries/${R}`,{method:"DELETE",headers:{Authorization:`Bearer ${t.access_token}`}})).ok&&(s({title:"Profile Deleted",description:"Beneficiary profile has been removed"}),b())}catch{s({title:"Error",description:"Failed to delete profile",variant:"destructive"})}else r(a.filter(O=>O.id!==R)),s({title:"Profile Deleted",description:"Beneficiary profile has been removed"})},E=async R=>{const O=a.find(P=>P.id===R);if(O)if(t?.access_token)try{await fetch(`${n0}/lc-builder/profiles/beneficiaries/${R}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t.access_token}`},body:JSON.stringify({...O,is_favorite:!O.is_favorite})}),b()}catch(P){console.error("Failed to update favorite:",P)}else r(a.map(P=>P.id===R?{...P,is_favorite:!P.is_favorite}:P))},D=R=>OM.find(P=>P.value===R)?.icon||Ps;return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-emerald-400"}),"Beneficiary Directory"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Saved seller/exporter profiles for quick LC creation"})]}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:C,children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Beneficiary"]})]})})}),e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search beneficiaries...",value:d,onChange:R=>c(R.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]})}),e.jsx("div",{className:"px-6 py-4",children:n.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No beneficiary profiles"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Add your first seller/exporter profile"}),e.jsxs(M,{onClick:C,children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Beneficiary"]})]}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(R=>{const O=D(R.industry);return e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(O,{className:"h-5 w-5 text-emerald-400"})}),e.jsx("button",{onClick:()=>E(R.id),className:"text-slate-400 hover:text-yellow-400 transition-colors",children:R.is_favorite?e.jsx(nl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(B1,{className:"h-4 w-4"})})]}),e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(dp,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>_(R),children:[e.jsx(zn,{className:"h-4 w-4 mr-2"}),"Edit"]}),e.jsxs(is,{className:"text-red-400",onClick:()=>k(R.id),children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]}),e.jsx(ee,{className:"text-lg text-white mt-2",children:R.company_name}),e.jsxs(ue,{className:"text-slate-400 flex items-center gap-1",children:[e.jsx(ha,{className:"h-3 w-3"}),R.city,", ",R.country]})]}),e.jsxs(U,{className:"space-y-2",children:[e.jsx(Q,{variant:"outline",className:"text-xs capitalize",children:R.industry}),R.email&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Va,{className:"h-4 w-4 text-slate-500"}),R.email]}),R.bank_name&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Bs,{className:"h-4 w-4 text-slate-500"}),R.bank_name,R.bank_swift&&e.jsx(Q,{variant:"outline",className:"text-xs",children:R.bank_swift})]}),e.jsxs("div",{className:"pt-2 text-xs text-slate-500",children:["Used ",R.usage_count," times"]})]})]},R.id)})})}),e.jsx(wt,{open:u,onOpenChange:h,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:x?"Edit Beneficiary Profile":"Add Beneficiary Profile"}),e.jsx(_t,{children:"Save seller/exporter details for quick LC creation"})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-400",children:"Company Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Name *"}),e.jsx(oe,{value:j.company_name,onChange:R=>y({...j,company_name:R.target.value}),placeholder:"Fashion Garments Ltd",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Industry"}),e.jsx("select",{value:j.industry,onChange:R=>y({...j,industry:R.target.value}),className:"w-full h-10 px-3 rounded-md bg-slate-800 border border-slate-700 text-white",children:OM.map(R=>e.jsx("option",{value:R.value,children:R.label},R.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Address"}),e.jsx(Zt,{value:j.address,onChange:R=>y({...j,address:R.target.value}),placeholder:"Plot 123, Industrial Area",className:"bg-slate-800 border-slate-700",rows:2})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"City"}),e.jsx(oe,{value:j.city,onChange:R=>y({...j,city:R.target.value}),placeholder:"Dhaka",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country *"}),e.jsx(oe,{value:j.country,onChange:R=>y({...j,country:R.target.value}),placeholder:"Bangladesh",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Person"}),e.jsx(oe,{value:j.contact_person,onChange:R=>y({...j,contact_person:R.target.value}),placeholder:"Mohammad Rahman",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Email"}),e.jsx(oe,{type:"email",value:j.email,onChange:R=>y({...j,email:R.target.value}),placeholder:"contact@company.com",className:"bg-slate-800 border-slate-700"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-4 border-t border-slate-700",children:[e.jsx("h3",{className:"text-sm font-medium text-slate-400",children:"Advising/Negotiating Bank Details"}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Name"}),e.jsx(oe,{value:j.bank_name,onChange:R=>y({...j,bank_name:R.target.value}),placeholder:"Standard Chartered Bank",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SWIFT Code"}),e.jsx(oe,{value:j.bank_swift,onChange:R=>y({...j,bank_swift:R.target.value}),placeholder:"SCBLBDDX",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Account Number"}),e.jsx(oe,{value:j.bank_account,onChange:R=>y({...j,bank_account:R.target.value}),placeholder:"0123456789012",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Address"}),e.jsx(oe,{value:j.bank_address,onChange:R=>y({...j,bank_address:R.target.value}),placeholder:"67 Gulshan Avenue, Dhaka",className:"bg-slate-800 border-slate-700"})]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Cancel"}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:A,children:[x?"Update":"Create"," Profile"]})]})]})})]})}const tNe=[{tag:"27",name:"Sequence of Total",status:"mandatory",description:"Indicates sequence number in multi-message LC",format:"1!n/1!n",example:"1/1",notes:"Use 1/1 for single message LC"},{tag:"40A",name:"Form of Documentary Credit",status:"mandatory",description:"Type of documentary credit",format:"24x",example:"IRREVOCABLE",notes:"Values: IRREVOCABLE, IRREVOCABLE TRANSFERABLE, IRREV TRANS STANDBY"},{tag:"20",name:"Documentary Credit Number",status:"mandatory",description:"Unique reference assigned by issuing bank",format:"16x",example:"LC2024000123",notes:"Must be unique. Used for all future references."},{tag:"23",name:"Reference to Pre-Advice",status:"optional",description:"Reference to preliminary advice",format:"16x",example:"PREADVICE001"},{tag:"31C",name:"Date of Issue",status:"mandatory",description:"Date LC was issued",format:"6!n (YYMMDD)",example:"241205",notes:"Format: YYMMDD"},{tag:"40E",name:"Applicable Rules",status:"mandatory",description:"Rules governing the LC",format:"30x",example:"UCP LATEST VERSION",notes:"Usually UCP LATEST VERSION or EUCP LATEST VERSION"},{tag:"31D",name:"Date and Place of Expiry",status:"mandatory",description:"When and where LC expires",format:"6!n29x",example:"250305BANGLADESH",notes:"Date (YYMMDD) + Place name"},{tag:"50",name:"Applicant",status:"mandatory",description:"Name and address of applicant (buyer)",format:"4*35x",example:`ABC TRADING CO LTD
apps\web\dist\assets\index-Bz84JA8h.js:155:CITIBANK NEW YORK`},{tag:"57A/D",name:"Advise Through Bank",status:"conditional",description:"Bank through which LC is advised",format:"4!a2!a2!c[3!c]",example:"SCBLBDDX",notes:"Required if different from available with bank"},{tag:"72Z",name:"Sender to Receiver Information",status:"optional",description:"Additional information for receiver",format:"6*35x",example:"PLEASE ADVISE BENEFICIARY URGENTLY"}],uN={mandatory:"bg-red-500/10 text-red-400",optional:"bg-green-500/10 text-green-400",conditional:"bg-yellow-500/10 text-yellow-400"};function sNe(){const[t,s]=m.useState(""),a=tNe.filter(r=>{if(!t)return!0;const n=t.toLowerCase();return r.tag.toLowerCase().includes(n)||r.name.toLowerCase().includes(n)||r.description.toLowerCase().includes(n)});return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-emerald-400"}),"MT700 Reference Guide"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Complete guide to SWIFT MT700 documentary credit message fields"})]})})}),e.jsx("div",{className:"px-6 py-4 border-b border-slate-800",children:e.jsx("div",{className:"bg-blue-500/10 border border-blue-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-blue-400",children:"About SWIFT MT700"}),e.jsx("p",{className:"text-sm text-slate-300 mt-1",children:"MT700 is the SWIFT message type used by banks to issue documentary credits. Understanding these fields helps you create LC applications that banks can process efficiently."})]})]})})}),e.jsx("div",{className:"px-6 py-4 border-b border-slate-800",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx(oe,{placeholder:"Search by field tag or name...",value:t,onChange:r=>s(r.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Q,{className:uN.mandatory,children:"Mandatory"}),e.jsx(Q,{className:uN.optional,children:"Optional"}),e.jsx(Q,{className:uN.conditional,children:"Conditional"})]})]})}),e.jsxs("div",{className:"px-6 py-6",children:[e.jsx(oo,{type:"multiple",className:"space-y-2",children:a.map(r=>e.jsxs(Qr,{value:r.tag,className:"border border-slate-700 rounded-lg bg-slate-800/30",children:[e.jsx(Xr,{className:"px-4 hover:no-underline",children:e.jsxs("div",{className:"flex items-center gap-4 w-full",children:[e.jsx(Q,{variant:"outline",className:"font-mono",children:r.tag}),e.jsx("span",{className:"font-medium text-white flex-1 text-left",children:r.name}),e.jsx(Q,{className:uN[r.status],children:r.status})]})}),e.jsx(en,{className:"px-4 pb-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsx("p",{className:"text-slate-300",children:r.description}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{className:"pb-2",children:e.jsx(ee,{className:"text-sm text-slate-400",children:"Format"})}),e.jsx(U,{children:e.jsx("code",{className:"text-emerald-400 font-mono text-sm",children:r.format})})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{className:"pb-2",children:e.jsx(ee,{className:"text-sm text-slate-400",children:"Example"})}),e.jsx(U,{children:e.jsx("pre",{className:"text-white font-mono text-sm whitespace-pre-wrap",children:r.example})})]})]}),r.notes&&e.jsx("div",{className:"bg-yellow-500/10 border border-yellow-500/20 rounded-lg p-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-yellow-400 mt-0.5"}),e.jsx("p",{className:"text-sm text-slate-300",children:r.notes})]})})]})})]},r.tag))}),a.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Bt,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No fields found"}),e.jsx("p",{className:"text-slate-400",children:"Try a different search term"})]})]})]})}function aNe(){const[t,s]=m.useState({lcAmount:"",currency:"USD",paymentTerms:"sight",beneficiaryCountry:"",applicantCountry:"",goodsType:"general",isConfirmed:"no",firstTimeTransaction:"no",documentComplexity:"standard",tenor:"0"}),[a,r]=m.useState(null),n=()=>{let o=100;const d=[];if(t.paymentTerms==="sight")d.push({name:"Payment Terms",value:"At Sight",impact:"positive",points:0});else if(t.paymentTerms==="usance"){const h=parseInt(t.tenor)||0;h<=60?(d.push({name:"Payment Terms",value:`Usance ${h} days`,impact:"neutral",points:-5}),o-=5):h<=120?(d.push({name:"Payment Terms",value:`Usance ${h} days`,impact:"negative",points:-10,recommendation:"Consider requiring confirmation for long tenors"}),o-=10):(d.push({name:"Payment Terms",value:`Usance ${h} days`,impact:"negative",points:-20,recommendation:"Long tenor increases non-payment risk significantly"}),o-=20)}t.isConfirmed==="yes"?(d.push({name:"Confirmation",value:"Confirmed LC",impact:"positive",points:10,recommendation:"Confirmation adds second bank guarantee"}),o+=10):d.push({name:"Confirmation",value:"Unconfirmed",impact:"neutral",points:0}),t.firstTimeTransaction==="yes"?(d.push({name:"Transaction History",value:"First Transaction",impact:"negative",points:-15,recommendation:"Request confirmation or consider smaller initial order"}),o-=15):(d.push({name:"Transaction History",value:"Repeat Buyer",impact:"positive",points:5}),o+=5),t.documentComplexity==="simple"?(d.push({name:"Document Requirements",value:"Simple (3-4 docs)",impact:"positive",points:5}),o+=5):t.documentComplexity==="complex"?(d.push({name:"Document Requirements",value:"Complex (7+ docs)",impact:"negative",points:-10,recommendation:"Complex documents increase discrepancy risk"}),o-=10):d.push({name:"Document Requirements",value:"Standard (5-6 docs)",impact:"neutral",points:0});const c=parseFloat(t.lcAmount.replace(/,/g,""))||0;c>1e6?(d.push({name:"LC Amount",value:`${t.currency} ${c.toLocaleString()}`,impact:"negative",points:-10,recommendation:"Large amounts warrant extra due diligence"}),o-=10):c>5e5?(d.push({name:"LC Amount",value:`${t.currency} ${c.toLocaleString()}`,impact:"neutral",points:-5}),o-=5):d.push({name:"LC Amount",value:`${t.currency} ${c.toLocaleString()}`,impact:"positive",points:0}),t.goodsType==="perishable"?(d.push({name:"Goods Type",value:"Perishable",impact:"negative",points:-15,recommendation:"Perishable goods have tight timelines and quality risks"}),o-=15):t.goodsType==="machinery"?(d.push({name:"Goods Type",value:"Machinery/Equipment",impact:"neutral",points:-5,recommendation:"Ensure performance bonds and warranty terms are clear"}),o-=5):d.push({name:"Goods Type",value:t.goodsType.charAt(0).toUpperCase()+t.goodsType.slice(1),impact:"positive",points:0}),o=Math.max(0,Math.min(100,o));let u;o>=80?u="low":o>=60?u="medium":o>=40?u="high":u="critical",r({score:o,level:u,factors:d})},i=o=>{switch(o){case"low":return"text-green-400";case"medium":return"text-yellow-400";case"high":return"text-orange-400";case"critical":return"text-red-400";default:return"text-slate-400"}},l=o=>{switch(o){case"low":return"bg-green-500/10 border-green-500/20";case"medium":return"bg-yellow-500/10 border-yellow-500/20";case"high":return"bg-orange-500/10 border-orange-500/20";case"critical":return"bg-red-500/10 border-red-500/20";default:return"bg-slate-500/10 border-slate-500/20"}};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(kc,{className:"h-5 w-5 text-emerald-400"}),"Risk Calculator"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Assess risk factors for your LC application"})]})})}),e.jsx("div",{className:"px-6 py-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"LC Parameters"}),e.jsx(ue,{children:"Enter details to calculate risk score"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"LC Amount"}),e.jsx(oe,{value:t.lcAmount,onChange:o=>s({...t,lcAmount:o.target.value}),placeholder:"100,000",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Currency"}),e.jsxs(Te,{value:t.currency,onValueChange:o=>s({...t,currency:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"GBP",children:"GBP"}),e.jsx(K,{value:"CNY",children:"CNY"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Payment Terms"}),e.jsxs(Te,{value:t.paymentTerms,onValueChange:o=>s({...t,paymentTerms:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"sight",children:"At Sight"}),e.jsx(K,{value:"usance",children:"Usance"})]})]})]}),t.paymentTerms==="usance"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Tenor (Days)"}),e.jsxs(Te,{value:t.tenor,onValueChange:o=>s({...t,tenor:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"30",children:"30 Days"}),e.jsx(K,{value:"60",children:"60 Days"}),e.jsx(K,{value:"90",children:"90 Days"}),e.jsx(K,{value:"120",children:"120 Days"}),e.jsx(K,{value:"180",children:"180 Days"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Goods Type"}),e.jsxs(Te,{value:t.goodsType,onValueChange:o=>s({...t,goodsType:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"general",children:"General Merchandise"}),e.jsx(K,{value:"textiles",children:"Textiles/Garments"}),e.jsx(K,{value:"electronics",children:"Electronics"}),e.jsx(K,{value:"machinery",children:"Machinery/Equipment"}),e.jsx(K,{value:"perishable",children:"Perishable Goods"}),e.jsx(K,{value:"chemicals",children:"Chemicals"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Complexity"}),e.jsxs(Te,{value:t.documentComplexity,onValueChange:o=>s({...t,documentComplexity:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"simple",children:"Simple (3-4 docs)"}),e.jsx(K,{value:"standard",children:"Standard (5-6 docs)"}),e.jsx(K,{value:"complex",children:"Complex (7+ docs)"})]})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Is LC Confirmed?"}),e.jsxs(Te,{value:t.isConfirmed,onValueChange:o=>s({...t,isConfirmed:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"yes",children:"Yes - Confirmed"}),e.jsx(K,{value:"no",children:"No - Unconfirmed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"First Transaction?"}),e.jsxs(Te,{value:t.firstTimeTransaction,onValueChange:o=>s({...t,firstTimeTransaction:o}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"yes",children:"Yes - First Time"}),e.jsx(K,{value:"no",children:"No - Repeat Buyer"})]})]})]})]}),e.jsxs(M,{className:"w-full bg-emerald-600 hover:bg-emerald-700 mt-4",onClick:n,children:[e.jsx(kc,{className:"h-4 w-4 mr-2"}),"Calculate Risk Score"]})]})]}),e.jsx("div",{className:"space-y-6",children:a?e.jsxs(e.Fragment,{children:[e.jsx($,{className:`border ${l(a.level)}`,children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-6xl font-bold ${i(a.level)}`,children:a.score}),e.jsx("p",{className:"text-lg text-slate-400 mt-2",children:"Risk Score"}),e.jsxs(Q,{className:`mt-4 text-lg px-4 py-1 ${l(a.level)} ${i(a.level)}`,children:[a.level.toUpperCase()," RISK"]})]})})}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Risk Factors"})}),e.jsx(U,{className:"space-y-3",children:a.factors.map((o,d)=>e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg bg-slate-800/50",children:[o.impact==="positive"?e.jsx(Vt,{className:"h-5 w-5 text-green-400 mt-0.5"}):o.impact==="negative"?e.jsx(lr,{className:"h-5 w-5 text-red-400 mt-0.5"}):e.jsx(Nh,{className:"h-5 w-5 text-slate-400 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-white",children:o.name}),e.jsxs("span",{className:`text-sm ${o.impact==="positive"?"text-green-400":o.impact==="negative"?"text-red-400":"text-slate-400"}`,children:[o.points>0?"+":"",o.points," pts"]})]}),e.jsx("p",{className:"text-sm text-slate-400",children:o.value}),o.recommendation&&e.jsxs("p",{className:"text-xs text-yellow-400 mt-1 flex items-center gap-1",children:[e.jsx(Ja,{className:"h-3 w-3"}),o.recommendation]})]})]},d))})]})]}):e.jsx($,{className:"bg-slate-800/50 border-slate-700",children:e.jsx(U,{className:"py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ot,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Calculate Risk Score"}),e.jsx("p",{className:"text-slate-400",children:"Enter LC parameters and click calculate to see risk assessment"})]})})})})]})})]})}function rNe(){const{user:t}=Dt(),{toast:s}=et(),[a,r]=m.useState({defaultCurrency:"USD",defaultPaymentTerms:"sight",defaultPresentationDays:"21",autoSaveEnabled:!0,showRiskIndicators:!0,defaultCountry:"",companyName:"",companyAddress:"",defaultBank:"",defaultSwift:""}),n=()=>{s({title:"Settings Saved",description:"Your preferences have been updated"})};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5 text-emerald-400"}),"Settings"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Configure your LC Builder preferences"})]})})}),e.jsxs("div",{className:"px-6 py-6 space-y-6 max-w-3xl",children:[e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5 text-slate-400"}),"Default Values"]}),e.jsx(ue,{children:"Pre-fill values for new LC applications"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Currency"}),e.jsxs(Te,{value:a.defaultCurrency,onValueChange:i=>r({...a,defaultCurrency:i}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD - US Dollar"}),e.jsx(K,{value:"EUR",children:"EUR - Euro"}),e.jsx(K,{value:"GBP",children:"GBP - British Pound"}),e.jsx(K,{value:"CNY",children:"CNY - Chinese Yuan"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Payment Terms"}),e.jsxs(Te,{value:a.defaultPaymentTerms,onValueChange:i=>r({...a,defaultPaymentTerms:i}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"sight",children:"At Sight"}),e.jsx(K,{value:"usance",children:"Usance"}),e.jsx(K,{value:"deferred",children:"Deferred Payment"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Presentation Period (Days)"}),e.jsxs(Te,{value:a.defaultPresentationDays,onValueChange:i=>r({...a,defaultPresentationDays:i}),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700 w-[200px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"7",children:"7 Days"}),e.jsx(K,{value:"14",children:"14 Days"}),e.jsx(K,{value:"21",children:"21 Days (Default)"})]})]})]})]})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-slate-400"}),"Company Defaults"]}),e.jsx(ue,{children:"Your company information for LC applications"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Name"}),e.jsx(oe,{value:a.companyName,onChange:i=>r({...a,companyName:i.target.value}),placeholder:"Your Company Ltd",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Address"}),e.jsx(oe,{value:a.companyAddress,onChange:i=>r({...a,companyAddress:i.target.value}),placeholder:"123 Business Street, City, Country",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Bank"}),e.jsx(oe,{value:a.defaultBank,onChange:i=>r({...a,defaultBank:i.target.value}),placeholder:"Standard Chartered Bank",className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default SWIFT Code"}),e.jsx(oe,{value:a.defaultSwift,onChange:i=>r({...a,defaultSwift:i.target.value}),placeholder:"SCBLBDDX",className:"bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Country"}),e.jsx(oe,{value:a.defaultCountry,onChange:i=>r({...a,defaultCountry:i.target.value}),placeholder:"Bangladesh",className:"bg-slate-800 border-slate-700"})]})]})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-slate-400"}),"Preferences"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Auto-Save Drafts"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Automatically save your work while editing"})]}),e.jsx(js,{checked:a.autoSaveEnabled,onCheckedChange:i=>r({...a,autoSaveEnabled:i})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Show Risk Indicators"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Display risk scores and warnings in the wizard"})]}),e.jsx(js,{checked:a.showRiskIndicators,onCheckedChange:i=>r({...a,showRiskIndicators:i})})]})]})]}),e.jsxs(M,{className:"w-full bg-emerald-600 hover:bg-emerald-700",onClick:n,children:[e.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Save Settings"]})]})]})}const nNe=[{question:"What is an LC (Letter of Credit)?",answer:"A Letter of Credit is a payment guarantee issued by a bank on behalf of a buyer, promising to pay the seller upon presentation of compliant documents. It reduces risk for both parties in international trade."},{question:"What is UCP600?",answer:"UCP600 (Uniform Customs and Practice for Documentary Credits) is a set of international rules published by the International Chamber of Commerce (ICC) that govern letters of credit. Most LCs are subject to UCP600."},{question:"What is the difference between Sight and Usance LC?",answer:"A Sight LC requires the issuing bank to pay immediately upon receiving compliant documents. A Usance (or deferred payment) LC allows the buyer a credit period (e.g., 60, 90, 180 days) to pay after documents are accepted."},{question:"What is a Confirmed LC?",answer:"A Confirmed LC has a second bank (the confirming bank, usually in the seller's country) adding its guarantee of payment. This provides additional security, especially when dealing with banks in higher-risk countries."},{question:"What is MT700?",answer:"MT700 is the SWIFT message format used by banks to issue documentary credits. Understanding MT700 fields helps ensure your LC application contains all required information in the correct format."},{question:"What documents are typically required?",answer:"Common documents include: Commercial Invoice, Packing List, Bill of Lading (or other transport document), Certificate of Origin, Insurance Certificate (for CIF/CIP terms), and any inspection certificates required by the buyer."},{question:"What is a discrepancy?",answer:"A discrepancy occurs when documents presented don't comply with LC terms. Common discrepancies include: late shipment, late presentation, inconsistent data between documents, missing documents, and description mismatches."},{question:"What is the 5% tolerance rule?",answer:"Under UCP600 Article 30, a 5% tolerance in quantity is allowed (unless prohibited by the LC or exact quantity specified), provided the total amount doesn't exceed the LC value."},{question:"Can I use this tool for Standby LCs?",answer:"Yes, the LC Builder supports both Documentary Credits and Standby Letters of Credit. Standby LCs typically have simpler document requirements as they serve as a guarantee rather than primary payment method."},{question:"How do I export to MT700 format?",answer:"After completing your LC application, click the 'Export' button and select 'MT700 Text'. This generates a properly formatted SWIFT message that can be sent to your bank."}],iNe=[{title:"Getting Started with LC Builder",description:"Learn the basics of creating your first LC application",duration:"5 min read"},{title:"Understanding the Clause Library",description:"How to search and use pre-approved LC clauses",duration:"3 min read"},{title:"Using Templates for Common Routes",description:"Speed up LC creation with trade route templates",duration:"4 min read"},{title:"MT700 Field Reference",description:"Complete guide to SWIFT documentary credit fields",duration:"10 min read"}];function lNe(){return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Pn,{className:"h-5 w-5 text-emerald-400"}),"Help & FAQ"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"Learn how to use LC Builder effectively"})]})})}),e.jsxs("div",{className:"px-6 py-6 space-y-6 max-w-4xl",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx($,{className:"bg-slate-800/50 border-slate-700 hover:border-emerald-500/50 transition-colors cursor-pointer",children:e.jsxs(U,{className:"pt-6 text-center",children:[e.jsx(yi,{className:"h-10 w-10 text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-white",children:"Clause Library"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Browse 428+ pre-approved clauses"})]})}),e.jsx($,{className:"bg-slate-800/50 border-slate-700 hover:border-emerald-500/50 transition-colors cursor-pointer",children:e.jsxs(U,{className:"pt-6 text-center",children:[e.jsx(Be,{className:"h-10 w-10 text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-white",children:"MT700 Reference"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"SWIFT message field guide"})]})}),e.jsx($,{className:"bg-slate-800/50 border-slate-700 hover:border-emerald-500/50 transition-colors cursor-pointer",children:e.jsxs(U,{className:"pt-6 text-center",children:[e.jsx(eh,{className:"h-10 w-10 text-emerald-400 mx-auto mb-3"}),e.jsx("h3",{className:"font-medium text-white",children:"Contact Support"}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:"Get help from our team"})]})})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(jue,{className:"h-5 w-5 text-slate-400"}),"Video Tutorials"]}),e.jsx(ue,{children:"Watch step-by-step guides"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:iNe.map((t,s)=>e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 cursor-pointer transition-colors",children:[e.jsx("h4",{className:"font-medium text-white",children:t.title}),e.jsx("p",{className:"text-sm text-slate-400 mt-1",children:t.description}),e.jsx("p",{className:"text-xs text-emerald-400 mt-2",children:t.duration})]},s))})})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Frequently Asked Questions"})}),e.jsx(U,{children:e.jsx(oo,{type:"multiple",className:"space-y-2",children:nNe.map((t,s)=>e.jsxs(Qr,{value:`faq-${s}`,className:"border border-slate-700 rounded-lg bg-slate-800/30 px-4",children:[e.jsx(Xr,{className:"hover:no-underline",children:e.jsx("span",{className:"text-left text-white",children:t.question})}),e.jsx(en,{className:"text-slate-300",children:t.answer})]},s))})})]}),e.jsxs($,{className:"bg-slate-800/50 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"External Resources"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("a",{href:"https://iccwbo.org/resources-for-business/documentary-credits-and-guarantees/",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"ICC Documentary Credits"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Official UCP600 resources from ICC"})]}),e.jsx(ir,{className:"h-4 w-4 text-slate-400"})]}),e.jsxs("a",{href:"https://www.swift.com/standards/data-standards/message-types",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/50 hover:bg-slate-700/50 transition-colors",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"SWIFT Message Types"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Official SWIFT documentation"})]}),e.jsx(ir,{className:"h-4 w-4 text-slate-400"})]})]})]}),e.jsx($,{className:"bg-emerald-500/10 border-emerald-500/20",children:e.jsxs(U,{className:"pt-6 text-center",children:[e.jsx("h3",{className:"font-medium text-white text-lg",children:"Need More Help?"}),e.jsx("p",{className:"text-slate-300 mt-2",children:"Our trade finance experts are here to assist you"}),e.jsxs(M,{className:"mt-4 bg-emerald-600 hover:bg-emerald-700",children:[e.jsx(eh,{className:"h-4 w-4 mr-2"}),"Contact Support"]})]})})]})]})}const mN="https://trdrhub-api.onrender.com";function IM(){const{applicationId:t}=Ko(),s=zt(),{session:a}=Dt(),{toast:r}=et(),[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(""),[u,h]=m.useState(null),[x,g]=m.useState(null),[j,y]=m.useState(!1),[b,N]=m.useState(!1),[C,_]=m.useState(null),[A,k]=m.useState(!1),[E,D]=m.useState(!1);m.useEffect(()=>{t&&a?.access_token&&R()},[t,a?.access_token]);const R=async()=>{o(!0);try{const q=await fetch(`${mN}/lc-builder/applications/${t}/versions`,{headers:{Authorization:`Bearer ${a?.access_token}`}});if(q.ok){const z=await q.json();i(z.versions||[]),c(z.reference_number||"")}else r({title:"Error",description:"Failed to load version history",variant:"destructive"})}catch(q){console.error("Error fetching versions:",q)}finally{o(!1)}},O=async q=>{h(q),y(!0),N(!0);try{const z=await fetch(`${mN}/lc-builder/applications/${t}/versions/${q.id}/diff`,{headers:{Authorization:`Bearer ${a?.access_token}`}});if(z.ok){const H=await z.json();g(H)}}catch(z){console.error("Error fetching diff:",z)}finally{y(!1)}},P=async()=>{D(!0);try{const q=await fetch(`${mN}/lc-builder/applications/${t}/versions`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${a?.access_token}`}});if(q.ok){const z=await q.json();r({title:"Version Created",description:`Version ${z.version_number} saved successfully`}),R()}else throw new Error("Failed to create version")}catch{r({title:"Error",description:"Failed to create version",variant:"destructive"})}finally{D(!1)}},T=async()=>{if(C){k(!0);try{const q=await fetch(`${mN}/lc-builder/applications/${t}/versions/${C.id}/restore`,{method:"POST",headers:{Authorization:`Bearer ${a?.access_token}`}});if(q.ok){const z=await q.json();r({title:"Restored",description:`Application restored to version ${z.restored_to_version}. Backup created as version ${z.backup_version}.`}),_(null),R()}else throw new Error("Failed to restore")}catch{r({title:"Error",description:"Failed to restore version",variant:"destructive"})}finally{k(!1)}}},B=q=>new Date(q).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),G=q=>q==null?"â€”":typeof q=="boolean"?q?"Yes":"No":typeof q=="object"?JSON.stringify(q):String(q);return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>s(-1),children:e.jsx(ma,{className:"h-5 w-5"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(xn,{className:"h-5 w-5 text-emerald-400"}),"Version History"]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[d||"LC Application"," â€¢ ",n.length," version",n.length!==1?"s":""]})]})]}),e.jsxs(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:P,disabled:E,children:[E?e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"Save Current Version"]})]})})}),e.jsx("div",{className:"p-6",children:l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400"})}):n.length===0?e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"py-12 text-center",children:[e.jsx(xn,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"No versions saved yet"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Create a version to start tracking changes to this LC application."}),e.jsx(M,{className:"bg-emerald-600 hover:bg-emerald-700",onClick:P,disabled:E,children:"Create First Version"})]})}):e.jsx("div",{className:"space-y-4",children:n.map((q,z)=>e.jsx($,{className:Le("bg-slate-900/50 border-slate-800 hover:border-slate-700 transition-colors",z===0&&"border-emerald-500/50"),children:e.jsx(U,{className:"py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-slate-800 flex items-center justify-center",children:e.jsxs("span",{className:"text-lg font-bold text-white",children:["v",q.version_number]})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-medium text-white",children:q.change_summary}),z===0&&e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Latest"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-slate-400 mt-1",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),B(q.created_at)]}),q.created_by&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ec,{className:"h-3 w-3"}),"User"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>O(q),children:[e.jsx(Uw,{className:"h-4 w-4 mr-1"}),"View Changes"]}),z!==0&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>_(q),children:[e.jsx(yu,{className:"h-4 w-4 mr-1"}),"Restore"]})]})]})})},q.id))})}),e.jsx(wt,{open:b,onOpenChange:N,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:["Version ",u?.version_number," Changes"]}),e.jsx(_t,{children:x?.compare_to?`Comparing to version ${x.compare_to.version_number}`:"Initial version - all fields shown"})]}),j?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-emerald-400"})}):x?.diffs.length===0?e.jsx("div",{className:"text-center py-8 text-slate-400",children:"No changes detected"}):e.jsx("div",{className:"space-y-3",children:x?.diffs.map((q,z)=>e.jsxs("div",{className:Le("p-3 rounded-lg border",q.change_type==="added"&&"bg-emerald-500/10 border-emerald-500/30",q.change_type==="removed"&&"bg-red-500/10 border-red-500/30",q.change_type==="modified"&&"bg-amber-500/10 border-amber-500/30"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[q.change_type==="added"&&e.jsx(Yt,{className:"h-4 w-4 text-emerald-400"}),q.change_type==="removed"&&e.jsx(Nh,{className:"h-4 w-4 text-red-400"}),q.change_type==="modified"&&e.jsx(Lt,{className:"h-4 w-4 text-amber-400"}),e.jsx("span",{className:"font-medium text-white",children:q.label}),e.jsx(Q,{variant:"outline",className:Le("text-xs",q.change_type==="added"&&"border-emerald-500/50 text-emerald-400",q.change_type==="removed"&&"border-red-500/50 text-red-400",q.change_type==="modified"&&"border-amber-500/50 text-amber-400"),children:q.change_type})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"Previous"}),e.jsx("p",{className:Le("text-slate-300",q.change_type==="added"&&"text-slate-500"),children:G(q.old_value)})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-slate-500 text-xs mb-1",children:"New"}),e.jsx("p",{className:Le("text-white",q.change_type==="removed"&&"text-slate-500"),children:G(q.new_value)})]})]})]},z))})]})}),e.jsx(wt,{open:!!C,onOpenChange:()=>_(null),children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:["Restore Version ",C?.version_number,"?"]}),e.jsxs(_t,{children:["This will restore your LC application to the state it was in at version ",C?.version_number,". A backup of the current state will be created automatically."]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>_(null),children:"Cancel"}),e.jsxs(M,{className:"bg-amber-600 hover:bg-amber-700",onClick:T,disabled:A,children:[A?e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(yu,{className:"h-4 w-4 mr-2"}),"Restore"]})]})]})})]})}const a4="",oNe={draft:e.jsx(Be,{className:"h-5 w-5"}),review:e.jsx(mt,{className:"h-5 w-5"}),submitted:e.jsx($i,{className:"h-5 w-5"}),approved:e.jsx(Oe,{className:"h-5 w-5"}),rejected:e.jsx(bs,{className:"h-5 w-5"}),amended:e.jsx(zn,{className:"h-5 w-5"})},cNe={draft:"bg-slate-500",review:"bg-amber-500",submitted:"bg-blue-500",approved:"bg-emerald-500",rejected:"bg-red-500",amended:"bg-purple-500"};function LM(){const{id:t}=Ko(),s=zt(),{toast:a}=et(),{session:r}=Dt(),[n,i]=m.useState(!0),[l,o]=m.useState(!1),[d,c]=m.useState(null),[u,h]=m.useState(null),[x,g]=m.useState(!1),[j,y]=m.useState(!1),[b,N]=m.useState(""),[C,_]=m.useState("");m.useEffect(()=>{t&&r?.access_token&&(A(),k())},[t,r?.access_token]);const A=async()=>{try{const O=await fetch(`${a4}/lc-builder/applications/${t}/workflow-status`,{headers:{Authorization:`Bearer ${r?.access_token}`}});if(O.ok){const P=await O.json();c(P)}}catch(O){console.error("Error fetching workflow:",O)}finally{i(!1)}},k=async()=>{try{const O=await fetch(`${a4}/lc-builder/applications/${t}`,{headers:{Authorization:`Bearer ${r?.access_token}`}});if(O.ok){const P=await O.json();h(P)}}catch(O){console.error("Error fetching application:",O)}},E=async(O,P,T)=>{if(!P){if(O==="edit"){s(`/lc-builder/dashboard/edit/${t}`);return}if(O==="export"){s(`/lc-builder/dashboard/edit/${t}?tab=export`);return}return}o(!0);try{const B=await fetch(`${a4}/lc-builder/applications/${t}${P}`,{method:"POST",headers:{Authorization:`Bearer ${r?.access_token}`,"Content-Type":"application/json"},body:T?JSON.stringify(T):void 0});if(B.ok){const G=await B.json();a({title:"Success",description:G.message||"Action completed successfully"}),A(),k()}else{const G=await B.json();throw new Error(G.detail||"Action failed")}}catch(B){a({title:"Error",description:B.message||"Failed to complete action",variant:"destructive"})}finally{o(!1)}},D=async()=>{await E("submit_for_review","/submit-for-review",{notes:C}),y(!1),_("")},R=async()=>{if(!b.trim()){a({title:"Required",description:"Please provide a rejection reason",variant:"destructive"});return}await E("reject",`/reject?rejection_reason=${encodeURIComponent(b)}`),g(!1),N("")};return n?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400"})}):!d||!u?e.jsx("div",{className:"min-h-screen bg-slate-950 p-6",children:e.jsx("p",{className:"text-slate-400",children:"Application not found"})}):e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>s("/lc-builder/dashboard"),children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Back"]}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(Gs,{className:"h-5 w-5 text-emerald-400"}),"Workflow Status"]}),e.jsx("p",{className:"text-sm text-slate-400",children:d.reference_number})]})]}),e.jsx(Q,{className:Le(cNe[d.current_status],"text-white"),children:d.current_status.toUpperCase()})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Workflow Progress"}),e.jsx(ue,{children:"Track your LC application through the approval process"})]}),e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-between",children:d.workflow_steps.map((O,P)=>e.jsxs("div",{className:"flex items-center flex-1",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:Le("w-10 h-10 rounded-full flex items-center justify-center",O.completed?"bg-emerald-500 text-white":d.current_status===O.step?"bg-amber-500 text-white":"bg-slate-700 text-slate-400"),children:O.completed?e.jsx(Oe,{className:"h-5 w-5"}):oNe[O.step]||e.jsx(mt,{className:"h-5 w-5"})}),e.jsx("span",{className:Le("text-sm mt-2",O.completed||d.current_status===O.step?"text-white":"text-slate-500"),children:O.label})]}),P<d.workflow_steps.length-1&&e.jsx("div",{className:Le("flex-1 h-1 mx-2",O.completed?"bg-emerald-500":"bg-slate-700")})]},O.step))})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Application Summary"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Reference"}),e.jsx("p",{className:"text-white font-medium",children:u.reference_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Amount"}),e.jsxs("p",{className:"text-emerald-400 font-bold text-lg",children:[u.currency," ",u.amount?.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Beneficiary"}),e.jsx("p",{className:"text-white",children:u.beneficiary_name})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-slate-400",children:"Applicant"}),e.jsx("p",{className:"text-white",children:u.applicant_name})]})]}),u.risk_score!==null&&e.jsxs("div",{className:"pt-4 border-t border-slate-700",children:[e.jsx("p",{className:"text-sm text-slate-400 mb-2",children:"Risk Score"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 h-2 bg-slate-700 rounded-full overflow-hidden",children:e.jsx("div",{className:Le("h-full rounded-full",u.risk_score<=20?"bg-emerald-500":u.risk_score<=50?"bg-amber-500":"bg-red-500"),style:{width:`${u.risk_score}%`}})}),e.jsxs("span",{className:Le("text-sm font-bold",u.risk_score<=20?"text-emerald-400":u.risk_score<=50?"text-amber-400":"text-red-400"),children:[u.risk_score.toFixed(0),"%"]})]})]}),u.validation_issues?.length>0&&e.jsx("div",{className:"pt-4 border-t border-slate-700",children:e.jsxs("p",{className:"text-sm text-slate-400 mb-2",children:[e.jsx(Ve,{className:"h-4 w-4 inline mr-1 text-amber-400"}),u.validation_issues.length," Validation Issue(s)"]})})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Available Actions"}),e.jsx(ue,{children:"Actions you can take on this application"})]}),e.jsx(U,{className:"space-y-3",children:d.available_actions.map(O=>e.jsxs(M,{variant:O.action==="approve"?"default":O.action==="reject"?"destructive":"outline",className:Le("w-full justify-start",O.action==="approve"&&"bg-emerald-600 hover:bg-emerald-700",O.action==="submit_for_review"&&"bg-blue-600 hover:bg-blue-700 text-white"),onClick:()=>{O.action==="submit_for_review"||O.action==="resubmit"?y(!0):O.action==="reject"?g(!0):E(O.action,O.endpoint)},disabled:l,children:[l?e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):O.action==="approve"?e.jsx(Oe,{className:"h-4 w-4 mr-2"}):O.action==="reject"?e.jsx(bs,{className:"h-4 w-4 mr-2"}):O.action==="submit_for_review"||O.action==="resubmit"?e.jsx($i,{className:"h-4 w-4 mr-2"}):O.action==="edit"?e.jsx(zn,{className:"h-4 w-4 mr-2"}):O.action==="amend"?e.jsx(xn,{className:"h-4 w-4 mr-2"}):e.jsx(Be,{className:"h-4 w-4 mr-2"}),O.label]},O.action))})]})]}),e.jsxs($,{className:"bg-slate-800 border-slate-700",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Timeline"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-emerald-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Application Created"}),e.jsx("p",{className:"text-sm text-slate-400",children:new Date(d.created_at).toLocaleString()})]})]}),d.submitted_at&&e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Submitted for Review"}),e.jsx("p",{className:"text-sm text-slate-400",children:new Date(d.submitted_at).toLocaleString()})]})]}),e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-2 h-2 mt-2 rounded-full bg-slate-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:"Last Updated"}),e.jsx("p",{className:"text-sm text-slate-400",children:new Date(d.updated_at).toLocaleString()})]})]})]})})]})]}),e.jsx(wt,{open:j,onOpenChange:y,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx($i,{className:"h-5 w-5 text-blue-400"}),"Submit for Review"]}),e.jsx(_t,{children:"Add any notes for the reviewer (optional)"})]}),e.jsxs("div",{className:"py-4",children:[e.jsx(Zt,{placeholder:"Add notes for the reviewer...",value:C,onChange:O=>_(O.target.value),rows:4}),e.jsxs("p",{className:"text-sm text-slate-400 mt-2 flex items-center gap-1",children:[e.jsx(Va,{className:"h-4 w-4"}),"You will receive an email notification when the status changes."]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsxs(M,{className:"bg-blue-600 hover:bg-blue-700",onClick:D,disabled:l,children:[l&&e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Submit for Review"]})]})]})}),e.jsx(wt,{open:x,onOpenChange:g,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-5 w-5 text-red-400"}),"Reject Application"]}),e.jsx(_t,{children:"Please provide a reason for rejection"})]}),e.jsx("div",{className:"py-4",children:e.jsx(Zt,{placeholder:"Reason for rejection (required)...",value:b,onChange:O=>N(O.target.value),rows:4})}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsxs(M,{variant:"destructive",onClick:R,disabled:l||!b.trim(),children:[l&&e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Reject Application"]})]})]})})]})}const dNe="",uNe={view:e.jsx(Da,{className:"h-4 w-4"}),comment:e.jsx(Lg,{className:"h-4 w-4"}),edit:e.jsx(zn,{className:"h-4 w-4"}),review:e.jsx(Oe,{className:"h-4 w-4"})},mNe={view:"bg-slate-500",comment:"bg-blue-500",edit:"bg-amber-500",review:"bg-emerald-500",admin:"bg-purple-500"},hNe={draft:"bg-slate-500",review:"bg-amber-500",submitted:"bg-blue-500",approved:"bg-emerald-500",rejected:"bg-red-500",amended:"bg-purple-500"};function xNe(){const t=zt(),{toast:s}=et(),{session:a}=Dt(),[r,n]=m.useState([]),[i,l]=m.useState(!0);m.useEffect(()=>{a?.access_token&&o()},[a?.access_token]);const o=async()=>{try{const c=await fetch(`${dNe}/lc-builder/shared-with-me`,{headers:{Authorization:`Bearer ${a?.access_token}`}});if(c.ok){const u=await c.json();n(u.shared_applications||[])}}catch(c){console.error("Error fetching shared applications:",c),s({title:"Error",description:"Failed to load shared applications",variant:"destructive"})}finally{l(!1)}},d=(c,u)=>{t(u==="view"?`/lc-builder/dashboard/workflow/${c}`:`/lc-builder/dashboard/edit/${c}`)};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("div",{className:"border-b border-slate-800 bg-slate-900/50",children:e.jsx("div",{className:"px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-xl font-bold text-white flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5 text-emerald-400"}),"Shared With Me"]}),e.jsx("p",{className:"text-sm text-slate-400",children:"LC applications shared by colleagues"})]}),e.jsxs(Q,{variant:"outline",className:"text-emerald-400 border-emerald-400",children:[r.length," Application",r.length!==1?"s":""]})]})})}),e.jsx("div",{className:"p-6",children:i?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-emerald-400"})}):r.length===0?e.jsx($,{className:"bg-slate-800 border-slate-700",children:e.jsxs(U,{className:"flex flex-col items-center py-12",children:[e.jsx(xs,{className:"h-16 w-16 text-slate-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No Shared Applications"}),e.jsx("p",{className:"text-slate-400 text-center max-w-md",children:"When colleagues share LC applications with you, they will appear here. You'll be able to view, comment, or edit based on the permissions granted."})]})}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:r.map(c=>e.jsxs($,{className:"bg-slate-800 border-slate-700 hover:border-emerald-500/50 transition-colors cursor-pointer",onClick:()=>d(c.lc_id,c.permission),children:[e.jsxs(X,{className:"pb-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Q,{className:Le(hNe[c.status],"text-white"),children:c.status}),e.jsxs(Q,{variant:"outline",className:Le("flex items-center gap-1",mNe[c.permission],"text-white border-0"),children:[uNe[c.permission],c.permission]})]}),e.jsx(ee,{className:"text-white text-lg mt-2",children:c.reference_number}),e.jsx(ue,{className:"text-slate-400",children:c.name||"Untitled"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Amount"}),e.jsxs("span",{className:"text-emerald-400 font-medium",children:[c.currency," ",c.amount?.toLocaleString()]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Beneficiary"}),e.jsx("span",{className:"text-white",children:c.beneficiary_name})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Shared by"}),e.jsx("span",{className:"text-white",children:c.shared_by})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Shared"}),e.jsx("span",{className:"text-slate-300",children:new Date(c.shared_at).toLocaleDateString()})]})]})})]},c.share_id))})})]})}const pNe=[{icon:ha,title:"100+ Carrier Coverage",description:"Track containers across Maersk, MSC, CMA CGM, Hapag-Lloyd, ONE, Evergreen, and 100+ more carriers.",bullets:["Top 20 carriers included","Regional carriers","Feeder services","NVO/NVOCC coverage"]},{icon:oi,title:"Real-Time Location",description:"Live position updates from AIS data and carrier systems. See exactly where your container is.",bullets:["AIS position data","Port arrival/departure","Terminal gate events","Rail/truck segments"]},{icon:ya,title:"Accurate ETAs",description:"Machine learning ETAs that account for port congestion, weather, and vessel schedules.",bullets:["ML-powered predictions","Port congestion factored","Weather delays included","Rolling updates"]},{icon:$s,title:"Proactive Alerts",description:"Get notified of delays, exceptions, and milestones before they become problems.",bullets:["Delay notifications","Exception alerts","Milestone updates","Custom alert rules"]},{icon:Be,title:"Document Status",description:"Track B/L release, customs clearance, and documentation status alongside physical tracking.",bullets:["B/L release status","Customs clearance","Holds & exceptions","Release coordination"]},{icon:Ws,title:"Analytics Dashboard",description:"Carrier performance, port delays, and transit time analytics across your shipments.",bullets:["Carrier scorecards","Port delay trends","Transit time analysis","Exception reports"]}],fNe=[{step:"1",title:"Enter Container Number",description:"Paste your container number, B/L, or booking reference"},{step:"2",title:"Get Live Status",description:"See current location, vessel, ETA, and any exceptions"},{step:"3",title:"Set Up Alerts",description:"Get notified of delays, arrivals, and milestones automatically"}],gNe=[{value:"100+",label:"Carriers"},{value:"95%",label:"ETA Accuracy"},{value:"Real-Time",label:"Updates"},{value:"Free",label:"Basic Tier"}],vNe=["Maersk","MSC","CMA CGM","Hapag-Lloyd","ONE","Evergreen","COSCO","Yang Ming","HMM","ZIM","PIL","Wan Hai"],jNe=[{tier:"Free",containers:"10/mo",price:"$0",description:"For occasional shippers",features:["Basic tracking","Email alerts","7-day history"]},{tier:"Professional",containers:"100/mo",price:"$49/mo",description:"For regular shippers",features:["Advanced ETA","SMS alerts","Analytics","API access"],popular:!0},{tier:"Enterprise",containers:"Unlimited",price:"$199/mo",description:"For freight & 3PL",features:["Everything in Pro","White-label","Integrations","Dedicated support"]}],bNe=[{q:"Which carriers do you support?",a:"We support 100+ ocean carriers including all major lines (Maersk, MSC, CMA CGM, Hapag-Lloyd, ONE, Evergreen, COSCO, Yang Ming, HMM, ZIM) plus regional carriers and feeder services. Rail and truck tracking is available in select regions."},{q:"How accurate are the ETAs?",a:"Our ML-powered ETAs achieve 95% accuracy within Â±1 day for final port arrival. We factor in port congestion, weather patterns, vessel schedules, and historical performance data."},{q:"Can I track by B/L number?",a:"Yes! You can track using container number, B/L number, booking reference, or carrier reference. We automatically match across carriers."},{q:"How do alerts work?",a:"Set up custom alerts for departure, arrival, delays, exceptions, or custom milestones. Receive notifications via email, SMS, webhook, or in-app. Configure thresholds (e.g., alert if delay > 2 days)."},{q:"Can I integrate with my TMS or ERP?",a:"Yes, Professional and Enterprise plans include API access for real-time tracking data. We support webhooks, REST API, and pre-built integrations with common platforms."}],yNe=()=>{const[t,s]=m.useState(null),[a,r]=m.useState("");return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative pt-24 pb-20 lg:pt-32 lg:pb-32 overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#B2F273]/10 border border-[#B2F273]/20 mb-6",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] text-sm font-medium",children:"Now Available"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Track Every Container,"," ",e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Every Carrier"})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8 leading-relaxed max-w-2xl mx-auto",children:"Real-time container tracking across 100+ carriers. Live ETAs, delay alerts, and exception notifications in one dashboard."}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60 mb-12",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"100+ Carriers"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Real-Time Updates"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"ML-Powered ETAs"]})]})]}),e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-[#00382E]/80 border border-[#EDF5F2]/10 rounded-2xl p-6 backdrop-blur-md shadow-xl",children:[e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:"Enter container number, B/L, or booking reference:"}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",placeholder:"e.g., MSCU1234567 or MAEU123456789",value:a,onChange:n=>r(n.target.value),className:"flex-1 bg-[#00261C] border border-[#EDF5F2]/10 rounded-lg px-4 py-3 text-white placeholder-[#EDF5F2]/30 focus:outline-none focus:border-[#B2F273]/50 transition-colors"}),e.jsx(M,{className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] px-6 font-bold",asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard",children:[e.jsx(Us,{className:"w-5 h-5 mr-2"}),"Track"]})})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2 items-center",children:[e.jsx("span",{className:"text-xs text-[#EDF5F2]/40",children:"Supported carriers:"}),vNe.slice(0,6).map((n,i)=>e.jsx("span",{className:"text-xs text-[#B2F273]",children:n},i)),e.jsx("span",{className:"text-xs text-[#EDF5F2]/40",children:"+100 more"})]})]})})]})]}),e.jsxs("section",{className:"relative py-12 bg-[#00261C] border-y border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-3xl mx-auto",children:gNe.map((n,i)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 font-display",children:n.value}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:n.label})]},i))})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:["Shipment Visibility is"," ",e.jsx("span",{className:"text-[#B2F273]",children:"Fragmented"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"Without TRDR"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Login to 10 carrier portals daily"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"ETAs always wrong at port congestion"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Find out about delays after the fact"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"No single view of all shipments"]})]})]}),e.jsxs("div",{className:"bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"With Container Tracker"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"All carriers in one dashboard"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"ML-adjusted ETAs with 95% accuracy"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Proactive delay alerts"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Portfolio view + analytics"]})]})]})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Track in Three Steps"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Enter your reference, get instant visibility."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:fNe.map((n,i)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors duration-300",children:e.jsx("span",{className:"text-[#B2F273] font-bold font-display group-hover:text-[#00261C] transition-colors",children:n.step})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:n.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:n.description})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Complete Shipment Visibility"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Real-time tracking, intelligent ETAs, and proactive alerts."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:pNe.map((n,i)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-colors group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(n.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:n.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:n.description}),e.jsx("ul",{className:"space-y-2",children:n.bullets.map((l,o)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273] shrink-0"}),l]},o))})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Simple Pricing"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Free tier for occasional tracking. Scale as you grow."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:jNe.map((n,i)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 backdrop-blur-sm",n.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[n.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:n.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:n.price}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:n.containers}),e.jsx("ul",{className:"space-y-2 mb-6",children:n.features.map((l,o)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),l]},o))}),e.jsx(M,{className:Le("w-full font-bold border-none",n.popular?"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C]":"bg-[#EDF5F2]/10 hover:bg-[#EDF5F2]/20 text-white"),asChild:!0,children:e.jsx(pe,{to:"/tracking/dashboard",children:n.tier==="Free"?"Get Started":"Start Free Trial"})})]},i))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:bNe.map((n,i)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===i?null:i),children:[e.jsx("span",{className:"text-white font-medium font-display",children:n.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===i&&"rotate-180")})]}),t===i&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:n.a})})]},i))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Never Lose Track of a Shipment Again"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Join the waitlist for early access."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard",children:["Start Tracking ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})})]})})]})]}),e.jsx(er,{})]})},NNe=[{icon:Vt,title:"Trade Volume Analytics",description:"Track shipment volumes, values, and trends across time, destinations, and product categories.",bullets:["Monthly/quarterly trends","YoY comparisons","By country/product","Value vs volume"]},{icon:aj,title:"Compliance Metrics",description:"Monitor LC compliance rates, discrepancy patterns, and first-time acceptance rates.",bullets:["Compliance rate trends","Discrepancy breakdown","Root cause analysis","Improvement tracking"]},{icon:xs,title:"Supplier Scorecards",description:"Rate and compare supplier performance on delivery, documentation, and quality.",bullets:["On-time delivery %","Doc accuracy rate","Quality metrics","Risk scoring"]},{icon:Bs,title:"Bank Performance",description:"Track bank processing times, fee trends, and first-presentation acceptance.",bullets:["Processing time trends","Fee comparison","Acceptance rates","Amendment frequency"]},{icon:io,title:"Custom Dashboards",description:"Build custom dashboards with the metrics that matter to your business.",bullets:["Drag-and-drop builder","Widget library","Share with team","Schedule reports"]},{icon:Be,title:"Export & Reports",description:"Generate PDF reports, Excel exports, and scheduled email digests.",bullets:["PDF reports","Excel export","Scheduled emails","API data access"]}],wNe=[{name:"Trade Volume",description:"Shipments by month, country, product"},{name:"LC Compliance Rate",description:"First-presentation acceptance %"},{name:"Discrepancy Analysis",description:"Types, frequency, root causes"},{name:"Processing Time",description:"Bank turnaround trends"},{name:"Supplier Performance",description:"Delivery, docs, quality"},{name:"Cost Analysis",description:"Fees, duties, shipping trends"}],_Ne=[{step:"1",title:"Connect Data",description:"Import from LCopilot, upload CSVs, or connect via API"},{step:"2",title:"Choose Metrics",description:"Select from 50+ pre-built metrics or create custom calculations"},{step:"3",title:"Build Dashboards",description:"Drag and drop charts, set up alerts, schedule reports"}],CNe=[{value:"50+",label:"Pre-Built Metrics"},{value:"Real-Time",label:"Data Sync"},{value:"PDF/Excel",label:"Export Options"},{value:"API",label:"Access"}],SNe=[{tier:"Starter",price:"$49/mo",description:"For small traders",features:["10 dashboards","Basic metrics","Monthly reports","Email support"]},{tier:"Professional",price:"$149/mo",description:"For active traders",features:["Unlimited dashboards","All metrics","Custom reports","API access"],popular:!0},{tier:"Enterprise",price:"$399/mo",description:"For large operations",features:["Everything in Pro","Custom metrics","White-label","Dedicated support"]}],kNe=[{q:"What data sources do you support?",a:"We integrate with LCopilot data automatically. You can also import data via CSV upload, Excel import, or connect your ERP/TMS via API. We support common formats from SAP, Oracle, and other trade systems."},{q:"Can I create custom metrics?",a:"Yes! Professional and Enterprise plans include a formula builder for custom metrics. Combine any data fields with mathematical operations, time-based calculations, and conditional logic."},{q:"How often is data updated?",a:"LCopilot data syncs in real-time. Imported data updates on your schedule - hourly, daily, or on-demand. API connections can be configured for real-time or batch updates."},{q:"Can I share dashboards with my team?",a:"Yes, all plans include dashboard sharing. Control access by user or role. Enterprise plans add presentation mode, external sharing links, and embedded analytics."},{q:"Do you offer benchmarking?",a:"Enterprise plans include industry benchmarking - compare your compliance rates, processing times, and costs against anonymized industry averages."}],ENe=()=>{const[t,s]=m.useState(null);return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("main",{children:[e.jsxs("section",{className:"relative pt-24 pb-20 lg:pt-32 lg:pb-32 overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute top-0 left-1/4 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-[120px]"}),e.jsx("div",{className:"absolute bottom-0 right-1/4 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-[100px]"}),e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"max-w-3xl mx-auto text-center mb-12",children:[e.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 rounded-full bg-[#B2F273]/10 border border-[#B2F273]/20 mb-6",children:[e.jsx(mt,{className:"w-4 h-4 text-[#B2F273]"}),e.jsx("span",{className:"text-[#B2F273] text-sm font-medium",children:"Coming Q3 2025"})]}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Turn Trade Data into"," ",e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Actionable Insights"})]}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8 leading-relaxed max-w-2xl mx-auto",children:"Dashboards for trade volume, compliance rates, supplier performance, and operational KPIs. Know where you're winning and where you're leaking money."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-8",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/waitlist?tool=analytics",children:["Join Waitlist ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})}),e.jsx(M,{variant:"outline",size:"lg",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",asChild:!0,children:e.jsx(pe,{to:"/contact",children:"Request Demo"})})]}),e.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-6 text-sm text-[#EDF5F2]/60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"50+ Metrics"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Custom Dashboards"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"API Access"]})]})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:wNe.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-4 hover:border-[#B2F273]/30 transition-colors backdrop-blur-sm",children:[e.jsx("h3",{className:"text-white font-bold text-sm mb-1 font-display",children:a.name}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-xs",children:a.description})]},r))})]})]}),e.jsxs("section",{className:"relative py-12 bg-[#00261C] border-y border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 max-w-3xl mx-auto",children:CNe.map((a,r)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-1 font-display",children:a.value}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:a.label})]},r))})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:["Trade Operations are a"," ",e.jsx("span",{className:"text-[#B2F273]",children:"Black Box"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"Without Analytics"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"No visibility into compliance trends"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Can't compare supplier performance"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Bank fees and times are a mystery"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-red-400",children:"âœ—"}),"Manual Excel reports take hours"]})]})]}),e.jsxs("div",{className:"bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx("h3",{className:"text-lg font-bold text-white mb-4 font-display",children:"With Trade Analytics"}),e.jsxs("ul",{className:"space-y-3 text-[#EDF5F2]/60",children:[e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Real-time compliance dashboards"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Supplier scorecards and rankings"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Bank performance comparisons"]}),e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-[#B2F273]",children:"âœ“"}),"Automated scheduled reports"]})]})]})]})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"From Data to Insights in Minutes"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Connect your data, pick your metrics, build your dashboards."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:_Ne.map((a,r)=>e.jsxs("div",{className:"text-center group",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-full flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors duration-300",children:e.jsx("span",{className:"text-[#B2F273] font-bold font-display group-hover:text-[#00261C] transition-colors",children:a.step})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:a.description})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Everything for Trade Intelligence"}),e.jsx("p",{className:"text-[#EDF5F2]/60 max-w-2xl mx-auto",children:"Pre-built metrics, custom dashboards, and automated reports."})]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 max-w-6xl mx-auto",children:NNe.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 hover:border-[#B2F273]/30 transition-colors group backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-lg flex items-center justify-center mb-4 border border-[#B2F273]/20 group-hover:bg-[#B2F273] transition-colors",children:e.jsx(a.icon,{className:"w-6 h-6 text-[#B2F273] group-hover:text-[#00261C] transition-colors"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:a.title}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.description}),e.jsx("ul",{className:"space-y-2",children:a.bullets.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273] shrink-0"}),n]},i))})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:"Simple Pricing"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Start small, scale with your data needs."})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-6 max-w-4xl mx-auto",children:SNe.map((a,r)=>e.jsxs("div",{className:Le("bg-[#00382E]/50 border rounded-xl p-6 backdrop-blur-sm",a.popular?"border-[#B2F273] shadow-[0_0_20px_rgba(178,242,115,0.1)]":"border-[#EDF5F2]/10"),children:[a.popular&&e.jsx("span",{className:"text-xs text-[#B2F273] font-mono uppercase tracking-wider font-medium",children:"MOST POPULAR"}),e.jsx("h3",{className:"text-lg font-bold text-white mt-2 font-display",children:a.tier}),e.jsx("div",{className:"text-3xl font-bold text-white my-4 font-display",children:a.price}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm mb-4",children:a.description}),e.jsx("ul",{className:"space-y-2 mb-6",children:a.features.map((n,i)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-[#EDF5F2]/50",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),n]},i))}),e.jsx(M,{className:Le("w-full font-bold border-none",a.popular?"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C]":"bg-[#EDF5F2]/10 hover:bg-[#EDF5F2]/20 text-white"),asChild:!0,children:e.jsx(pe,{to:"/waitlist?tool=analytics",children:"Join Waitlist"})})]},r))})]})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white text-center mb-12 font-display",children:"Frequently Asked Questions"}),e.jsx("div",{className:"space-y-4",children:kNe.map((a,r)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl overflow-hidden backdrop-blur-sm",children:[e.jsxs("button",{className:"w-full px-6 py-4 text-left flex items-center justify-between",onClick:()=>s(t===r?null:r),children:[e.jsx("span",{className:"text-white font-medium font-display",children:a.q}),e.jsx(ja,{className:Le("w-5 h-5 text-[#EDF5F2]/40 transition-transform shrink-0 ml-4",t===r&&"rotate-180")})]}),t===r&&e.jsx("div",{className:"px-6 pb-4",children:e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm leading-relaxed",children:a.a})})]},r))})]})})]}),e.jsxs("section",{className:"relative py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"absolute bottom-1/4 left-0 w-96 h-96 bg-[#B2F273]/5 rounded-full blur-3xl pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 lg:px-8 relative z-10",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-6 font-display",children:"Make Data-Driven Trade Decisions"}),e.jsx("p",{className:"text-lg text-[#EDF5F2]/60 mb-8",children:"Join the waitlist for early access."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold border-none",asChild:!0,children:e.jsxs(pe,{to:"/waitlist?tool=analytics",children:["Join Waitlist ",e.jsx(Jt,{className:"w-5 h-5 ml-2"})]})})]})})]})]}),e.jsx(er,{})]})},r4=[{code:"BDT",flag:"ðŸ‡§ðŸ‡©",label:"Bangladesh (à§³)"},{code:"INR",flag:"ðŸ‡®ðŸ‡³",label:"India (â‚¹)"},{code:"PKR",flag:"ðŸ‡µðŸ‡°",label:"Pakistan (Rs)"},{code:"USD",flag:"ðŸ‡ºðŸ‡¸",label:"USD ($)"},{code:"EUR",flag:"ðŸ‡ªðŸ‡º",label:"Euro (â‚¬)"},{code:"GBP",flag:"ðŸ‡¬ðŸ‡§",label:"UK (Â£)"}],ANe={USD:1,BDT:85,INR:69,PKR:172,EUR:.92,GBP:.79,AED:3.67,SGD:1.35,AUD:1.55};function PNe(t){const s=t.match(/\$(\d+)/);return s?parseInt(s[1]):null}function DNe(t,s){return Math.round(s==="BDT"?t*86:s==="INR"?t*69:s==="PKR"?t*172:t*ANe[s])}function TNe(t,s){const a=PNe(t);if(a===null||a===0)return t.includes("0")?"Free":t;const r=DNe(a,s),n=qx[s],i=t.includes("/mo")?"/mo":"";return n?.position==="after"?`${r.toLocaleString()} ${n.symbol}${i}`:`${n?.symbol||"$"}${r.toLocaleString()}${i}`}function FNe({title:t="Simple, Transparent Pricing",subtitle:s="Start free, upgrade as you grow",tiers:a,toolSlug:r}){const[n,i]=m.useState("USD"),[l,o]=m.useState(!1);m.useEffect(()=>{async function c(){try{const u=await fetch("/api/geo");if(u.ok){const h=await u.json();if(h.country&&h.detected){i(rj(h.country));return}}}catch{}try{const u=Intl.DateTimeFormat().resolvedOptions().timeZone;u.includes("Dhaka")?i("BDT"):u.includes("Kolkata")||u.includes("Mumbai")?i("INR"):u.includes("Karachi")?i("PKR"):u.includes("London")?i("GBP"):u.includes("Europe/")&&i("EUR")}catch{}}c()},[]);const d=r4.find(c=>c.code===n)||r4[3];return e.jsx("section",{className:"py-20 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:t}),e.jsx("p",{className:"text-lg text-muted-foreground mb-4",children:s}),e.jsxs("div",{className:"inline-flex justify-center relative",children:[e.jsxs("button",{onClick:()=>o(!l),className:"flex items-center gap-2 bg-muted/50 hover:bg-muted/70 rounded-full px-4 py-2 text-sm transition-colors",children:[e.jsx("span",{children:d.flag}),e.jsx("span",{className:"text-foreground",children:d.label}),e.jsx(ja,{className:`w-4 h-4 text-muted-foreground transition-transform ${l?"rotate-180":""}`})]}),l&&e.jsx("div",{className:"absolute top-full left-1/2 -translate-x-1/2 mt-2 bg-card border rounded-lg shadow-lg z-50 min-w-[180px]",children:r4.map(c=>e.jsxs("button",{onClick:()=>{i(c.code),o(!1)},className:`w-full flex items-center gap-2 px-4 py-2 text-sm hover:bg-muted/50 transition-colors first:rounded-t-lg last:rounded-b-lg ${n===c.code?"bg-muted/30 text-primary":"text-foreground"}`,children:[e.jsx("span",{children:c.flag}),e.jsx("span",{children:c.label})]},c.code))})]})]}),e.jsx("div",{className:`grid gap-6 max-w-5xl mx-auto ${a.length===3?"md:grid-cols-3":a.length===4?"md:grid-cols-4":"md:grid-cols-3"}`,children:a.map((c,u)=>{const h=TNe(c.price,n),x=c.checks||c.lookups||c.docs||c.lcs||c.screens||c.searches||c.reports||c.containers||c.calcs||c.comparisons;return e.jsxs($,{className:`relative transition-all duration-300 hover:shadow-lg ${c.popular?"border-primary shadow-lg scale-105 z-10":"border-gray-200"}`,children:[c.popular&&e.jsx(Q,{className:"absolute -top-3 left-1/2 -translate-x-1/2 bg-primary",children:"Most Popular"}),e.jsxs(X,{className:"text-center pb-4",children:[e.jsx(ee,{className:"text-xl font-bold",children:c.tier}),c.description&&e.jsx(ue,{className:"text-sm",children:c.description}),e.jsxs("div",{className:"mt-4",children:[e.jsx("span",{className:"text-3xl font-bold text-foreground",children:h.replace("/mo","")}),h.includes("/mo")&&e.jsx("span",{className:"text-muted-foreground",children:"/mo"})]}),x&&e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:x})]}),e.jsxs(U,{className:"pt-0",children:[e.jsx("ul",{className:"space-y-2 mb-6",children:c.features.map((g,j)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Za,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:g})]},j))}),e.jsx(M,{className:`w-full group ${c.popular?"bg-primary":""}`,variant:c.popular?"default":"outline",asChild:!0,children:e.jsxs("a",{href:"/register",children:[c.price==="$0"?"Get Started":"Start Free Trial",e.jsx(Jt,{className:"w-4 h-4 ml-2 group-hover:translate-x-1 transition-transform"})]})})]})]},u)})}),e.jsx("div",{className:"text-center mt-8",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["ðŸŽ¯ All paid plans include 14-day free trial â€¢ No credit card required",n==="BDT"&&" â€¢ Pay with bKash/Nagad via SSLCommerz",n==="INR"&&" â€¢ Pay with UPI/Cards via Razorpay"]})})]})})}function RNe(){return e.jsxs("div",{className:"min-h-screen bg-[#00261C]",children:[e.jsx(Xa,{}),e.jsxs("section",{className:"pt-24 sm:pt-32 pb-12 sm:pb-20 relative overflow-hidden bg-[#00261C]",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"absolute top-1/4 right-0 w-96 h-96 bg-[#B2F273]/10 rounded-full blur-3xl"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(Q,{className:"mb-6 bg-[#B2F273]/10 text-[#B2F273] border-[#B2F273]/20 px-4 py-1.5",children:"ðŸ¦ Built for Banks â€¢ Direct Request"}),e.jsxs("h1",{className:"text-3xl sm:text-4xl lg:text-6xl font-bold text-white mb-6 leading-tight font-display",children:["Catch Price Anomalies",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273] text-glow-sm",children:"Before They Become Problems"})]}),e.jsx("p",{className:"text-lg sm:text-xl text-[#EDF5F2]/60 mb-8 max-w-2xl mx-auto",children:"Verify trade document prices against real-time market data. Detect over/under invoicing and trade-based money laundering risks in seconds."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-12",children:[e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold px-8 h-12",asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard",children:["Open Dashboard",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})}),e.jsx(M,{size:"lg",variant:"outline",className:"border-[#EDF5F2]/20 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 px-8 h-12 bg-transparent",children:"View Demo"})]}),e.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-sm text-[#EDF5F2]/60",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"50+ Commodities"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"Real-Time Market Data"]}),e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-[#B2F273]"}),"TBML Detection"]})]})]})})]}),e.jsxs("section",{className:"py-12 sm:py-16 border-y border-[#EDF5F2]/10 bg-[#00261C] overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white mb-2 font-display",children:"50+"}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:"Commodities Covered"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white mb-2 font-display",children:"<30s"}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:"Verification Time"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white mb-2 font-display",children:"Â±15%"}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:"Variance Tolerance"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl sm:text-4xl font-bold text-white mb-2 font-display",children:"6+"}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/60 font-mono uppercase tracking-wider",children:"Data Sources"})]})]})})]}),e.jsxs("section",{className:"py-12 sm:py-20 bg-[#00261C] overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-10 sm:mb-16 text-center font-display",children:["Trade-Based Money Laundering is a",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273]",children:"$2 Trillion Problem"})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6 sm:gap-8",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx(Ve,{className:"w-10 h-10 text-red-400 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"Over-Invoicing"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Importers pay inflated prices, moving excess funds abroad illegally. Without market data, banks can't detect these anomalies."})]}),e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx(Ve,{className:"w-10 h-10 text-orange-400 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"Under-Invoicing"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Exporters receive below-market payments, evading taxes and capital controls. Manual checks miss 90% of cases."})]}),e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx(mt,{className:"w-10 h-10 text-yellow-400 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"Manual Process"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Banks spend 30-60 minutes per transaction Googling prices. Results are inconsistent and undocumented."})]}),e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 backdrop-blur-sm",children:[e.jsx(Ot,{className:"w-10 h-10 text-blue-400 mb-4"}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"Regulatory Pressure"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"FATF guidelines require price verification. Banks need auditable compliance records."})]})]})]})})]}),e.jsxs("section",{className:"py-12 sm:py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:[e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-10 sm:mb-16",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:["Verify Prices in ",e.jsx("span",{className:"text-[#B2F273]",children:"Under 30 Seconds"})]}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Upload documents or enter prices manually. Get instant market comparisons."})]}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-6 sm:gap-8 max-w-5xl mx-auto",children:[e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 text-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-xl flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20",children:e.jsx(Be,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"1. Upload Document"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Drop your invoice, LC, or contract. We extract commodity, quantity, and price automatically."})]}),e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 text-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-xl flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20",children:e.jsx(Vt,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"2. Compare to Market"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"We check ICE, LME, USDA, and industry indices. Real-time and historical data."})]}),e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-6 text-center backdrop-blur-sm",children:[e.jsx("div",{className:"w-12 h-12 bg-[#B2F273]/10 rounded-xl flex items-center justify-center mx-auto mb-4 border border-[#B2F273]/20",children:e.jsx(Ws,{className:"w-6 h-6 text-[#B2F273]"})}),e.jsx("h3",{className:"text-lg font-bold text-white mb-2 font-display",children:"3. Get Verdict"}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-sm",children:"Clear variance analysis with risk flags. Download compliance-ready PDF reports."})]})]})]})]}),e.jsxs("section",{className:"py-12 sm:py-20 bg-[#00261C] overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsxs("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:[e.jsxs("div",{className:"max-w-4xl mx-auto text-center mb-10 sm:mb-16",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:["50+ Commodities. ",e.jsx("span",{className:"text-[#B2F273]",children:"Bangladesh Focus."})]}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Optimized for Bangladesh's top export and import categories."})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-4 max-w-5xl mx-auto",children:[{name:"Raw Cotton",icon:"ðŸ§¶"},{name:"Steel Coils",icon:"ðŸ”©"},{name:"Garments",icon:"ðŸ‘•"},{name:"Rice & Grains",icon:"ðŸŒ¾"},{name:"Fuel Oil",icon:"â›½"},{name:"Chemicals",icon:"ðŸ§ª"}].map((t,s)=>e.jsxs("div",{className:"bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl p-4 text-center backdrop-blur-sm hover:border-[#B2F273]/30 transition-colors",children:[e.jsx("div",{className:"text-2xl mb-2",children:t.icon}),e.jsx("div",{className:"text-sm text-[#EDF5F2]/80",children:t.name})]},s))})]})]}),e.jsxs("section",{className:"py-12 sm:py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex items-center justify-center gap-3 mb-6",children:[e.jsx(Bs,{className:"w-8 h-8 text-[#B2F273]"}),e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white font-display",children:["Built for ",e.jsx("span",{className:"text-[#B2F273]",children:"Banks"})]})]}),e.jsx("p",{className:"text-[#EDF5F2]/60 text-center mb-10 sm:mb-12",children:"Direct feedback from trade finance departments shaped every feature."}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl backdrop-blur-sm",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#B2F273] flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1 font-display",children:"TBML Risk Scoring"}),e.jsx("p",{className:"text-sm text-[#EDF5F2]/60",children:"Auto-flag transactions with >25% variance for enhanced due diligence."})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl backdrop-blur-sm",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#B2F273] flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1 font-display",children:"Audit Trail"}),e.jsx("p",{className:"text-sm text-[#EDF5F2]/60",children:"Every price check logged with timestamp, user, and source data for regulators."})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl backdrop-blur-sm",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#B2F273] flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1 font-display",children:"LCopilot Integration"}),e.jsx("p",{className:"text-sm text-[#EDF5F2]/60",children:"Auto-verify prices when processing LC documents. One seamless workflow."})]})]}),e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-[#00382E]/50 border border-[#EDF5F2]/10 rounded-xl backdrop-blur-sm",children:[e.jsx(Oe,{className:"w-6 h-6 text-[#B2F273] flex-shrink-0 mt-1"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-white mb-1 font-display",children:"Multi-Source Verification"}),e.jsx("p",{className:"text-sm text-[#EDF5F2]/60",children:"ICE, LME, USDA, FAO, and industry indices. Never rely on a single source."})]})]})]})]})})]}),e.jsx(FNe,{title:"Simple, Transparent Pricing",subtitle:"Start free. Scale as you grow.",tiers:[{tier:"Free",price:"$0",checks:"10/month",features:["Basic verification","3 commodities","PDF reports"]},{tier:"Starter",price:"$49/mo",checks:"100/month",features:["All commodities","Historical data","Email support"]},{tier:"Professional",price:"$149/mo",checks:"500/month",features:["API access","LCopilot integration","Priority support"],popular:!0},{tier:"Enterprise",price:"Custom",checks:"Unlimited",features:["Custom commodities","Dedicated support","On-premise option"]}],toolSlug:"price-verify"}),e.jsxs("section",{className:"py-12 sm:py-20 bg-[#00261C] border-t border-[#EDF5F2]/10 overflow-hidden relative",children:[e.jsx("div",{className:"absolute inset-0 bg-[linear-gradient(rgba(178,242,115,0.03)_1px,transparent_1px),linear-gradient(90deg,rgba(178,242,115,0.03)_1px,transparent_1px)] bg-[size:100px_100px] [mask-image:radial-gradient(ellipse_at_center,black_40%,transparent_70%)] pointer-events-none"}),e.jsx("div",{className:"absolute top-0 left-0 w-full h-px bg-gradient-to-r from-transparent via-[#B2F273]/30 to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsxs("div",{className:"max-w-2xl mx-auto text-center",children:[e.jsxs("h2",{className:"text-2xl sm:text-3xl md:text-4xl font-bold text-white mb-4 font-display",children:["Stop Googling Prices.",e.jsx("br",{}),e.jsx("span",{className:"text-[#B2F273]",children:"Get Verified Market Data."})]}),e.jsx("p",{className:"text-[#EDF5F2]/60 mb-8",children:"Join the waitlist for early access and launch pricing."}),e.jsx(M,{size:"lg",className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold px-8 h-12",asChild:!0,children:e.jsxs(pe,{to:"/price-verify/tool",children:["Start Verifying Prices",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})]})})]}),e.jsx(er,{})]})}const n4="http://localhost:8000",ONe=[{value:"agriculture",label:"ðŸŒ¾ Agriculture"},{value:"energy",label:"â›½ Energy"},{value:"metals",label:"ðŸ”© Metals"},{value:"textiles",label:"ðŸ‘• Textiles"},{value:"chemicals",label:"ðŸ§ª Chemicals"},{value:"food_beverage",label:"ðŸ– Food & Beverage"},{value:"electronics",label:"ðŸ’» Electronics"}],MM=[{value:"kg",label:"Kilogram (kg)"},{value:"mt",label:"Metric Ton (MT)"},{value:"lb",label:"Pound (lb)"},{value:"oz",label:"Ounce (oz)"},{value:"bbl",label:"Barrel (bbl)"},{value:"gal",label:"Gallon (gal)"},{value:"l",label:"Liter (L)"},{value:"m",label:"Meter (m)"},{value:"pcs",label:"Pieces (pcs)"},{value:"doz",label:"Dozen (doz)"}],INe={low:"bg-green-500/20 text-green-400 border-green-500/30",medium:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",high:"bg-orange-500/20 text-orange-400 border-orange-500/30",critical:"bg-red-500/20 text-red-400 border-red-500/30"},i4={pass:"bg-green-500/20 text-green-400 border-green-500/30",warning:"bg-yellow-500/20 text-yellow-400 border-yellow-500/30",fail:"bg-red-500/20 text-red-400 border-red-500/30"};function LNe(){const{toast:t}=et(),[s,a]=m.useState("single"),[r,n]=m.useState([]),[i,l]=m.useState("all"),[o,d]=m.useState(!1),[c,u]=m.useState(null),[h,x]=m.useState(null),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState("kg"),[_,A]=m.useState("USD"),[k,E]=m.useState(""),[D,R]=m.useState(""),[O,P]=m.useState(""),[T,B]=m.useState([{id:"1",commodity:"",price:"",unit:"kg",quantity:"",currency:"USD"}]);m.useEffect(()=>{G()},[]);const G=async()=>{try{const xe=await(await fetch(`${n4}/price-verify/commodities`)).json();xe.success&&n(xe.commodities)}catch(re){console.error("Failed to fetch commodities:",re),n([{code:"COTTON_RAW",name:"Raw Cotton",category:"agriculture",unit:"kg",current_estimate:2.2},{code:"STEEL_HRC",name:"Steel (Hot Rolled Coil)",category:"metals",unit:"mt",current_estimate:650},{code:"CRUDE_OIL_BRENT",name:"Crude Oil (Brent)",category:"energy",unit:"bbl",current_estimate:82},{code:"COPPER",name:"Copper",category:"metals",unit:"mt",current_estimate:8500},{code:"RICE_WHITE",name:"White Rice",category:"agriculture",unit:"mt",current_estimate:520},{code:"UREA",name:"Urea (Fertilizer)",category:"chemicals",unit:"mt",current_estimate:350},{code:"GARMENTS_TSHIRT",name:"T-Shirts (Basic)",category:"textiles",unit:"pcs",current_estimate:3.5},{code:"SHRIMP_FROZEN",name:"Frozen Shrimp",category:"food_beverage",unit:"kg",current_estimate:9}])}},q=async()=>{if(!g||!y||!N){t({title:"Missing Information",description:"Please enter commodity, price, and unit.",variant:"destructive"});return}d(!0),u(null);try{const xe=await(await fetch(`${n4}/price-verify/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commodity:g,price:parseFloat(y),unit:N,currency:_,quantity:k?parseFloat(k):void 0,document_type:D||void 0,document_reference:O||void 0})})).json();u(xe),xe.success?t({title:`Verdict: ${xe.verdict.toUpperCase()}`,description:xe.verdict_reason,variant:xe.verdict==="pass"?"default":"destructive"}):t({title:"Verification Failed",description:xe.error||"Could not verify price",variant:"destructive"})}catch(re){console.error("Verification error:",re);const xe={success:!0,verification_id:"demo-"+Date.now(),timestamp:new Date().toISOString(),commodity:{code:g.toUpperCase().replace(/\s+/g,"_"),name:g,category:"agriculture",matched_from:g},document_price:{price:parseFloat(y),unit:N,currency:_,normalized_price:parseFloat(y),normalized_unit:N,quantity:k?parseFloat(k):void 0,total_value:k?parseFloat(y)*parseFloat(k):void 0},market_price:{price:parseFloat(y)*.9,price_low:parseFloat(y)*.7,price_high:parseFloat(y)*1.1,unit:N,currency:"USD",source:"demo",fetched_at:new Date().toISOString()},variance:{percent:11.1,absolute:parseFloat(y)*.1,direction:"over"},risk:{risk_level:"medium",risk_flags:[]},verdict:"warning",verdict_reason:"Price is 11.1% above market average. Review recommended.",context:{document_type:D,document_reference:O}};u(xe),t({title:"Demo Mode",description:"Backend not connected. Showing simulated result."})}finally{d(!1)}},z=async()=>{const re=T.filter(xe=>xe.commodity&&xe.price&&xe.unit);if(re.length===0){t({title:"No Valid Items",description:"Please add at least one complete item.",variant:"destructive"});return}d(!0),x(null);try{const ye=await(await fetch(`${n4}/price-verify/verify/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:re.map(ke=>({commodity:ke.commodity,price:parseFloat(ke.price),unit:ke.unit,quantity:ke.quantity?parseFloat(ke.quantity):void 0,currency:ke.currency})),document_type:D||void 0,document_reference:O||void 0})})).json();x(ye)}catch(xe){console.error("Batch verification error:",xe),t({title:"Error",description:"Failed to verify batch. Please try again.",variant:"destructive"})}finally{d(!1)}},H=()=>{B([...T,{id:Date.now().toString(),commodity:"",price:"",unit:"kg",quantity:"",currency:"USD"}])},le=re=>{T.length>1&&B(T.filter(xe=>xe.id!==re))},Y=(re,xe,ye)=>{B(T.map(ke=>ke.id===re?{...ke,[xe]:ye}:ke))},te=i==="all"?r:r.filter(re=>re.category===i),ne=re=>{switch(re){case"pass":return e.jsx(Oe,{className:"w-5 h-5 text-green-400"});case"warning":return e.jsx(Ve,{className:"w-5 h-5 text-yellow-400"});case"fail":return e.jsx(bs,{className:"w-5 h-5 text-red-400"});default:return null}},ae=re=>{switch(re){case"over":return e.jsx(Vt,{className:"w-4 h-4 text-red-400"});case"under":return e.jsx(lr,{className:"w-4 h-4 text-blue-400"});default:return e.jsx(Nh,{className:"w-4 h-4 text-slate-400"})}};return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx(Xa,{}),e.jsxs("section",{className:"pt-24 sm:pt-32 pb-8 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-b from-green-500/5 via-transparent to-transparent"}),e.jsx("div",{className:"container mx-auto px-4 sm:px-6 relative z-10",children:e.jsx("div",{className:"max-w-4xl mx-auto",children:e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500/20 rounded-xl flex items-center justify-center",children:e.jsx(Na,{className:"w-6 h-6 text-green-400"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-white",children:"Price Verify"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Verify commodity prices against market data"})]})]})})})]}),e.jsx("section",{className:"pb-16",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsxs(Os,{value:s,onValueChange:re=>a(re),className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2 bg-slate-900/50 border border-slate-800 mb-8",children:[e.jsx(He,{value:"single",className:"data-[state=active]:bg-green-500/20 data-[state=active]:text-green-400",children:"Single Verification"}),e.jsx(He,{value:"batch",className:"data-[state=active]:bg-green-500/20 data-[state=active]:text-green-400",children:"Batch Verification"})]}),e.jsx(Qe,{value:"single",children:e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white text-lg",children:"Enter Price Details"}),e.jsx(ue,{children:"Search for a commodity and enter the price from your document."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Commodity *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-slate-500"}),e.jsx(oe,{placeholder:"Search by name, code, or HS code...",value:g,onChange:re=>j(re.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(Q,{variant:"outline",className:`cursor-pointer ${i==="all"?"bg-green-500/20 text-green-400 border-green-500/30":"border-slate-700 text-slate-400 hover:border-slate-600"}`,onClick:()=>l("all"),children:"All"}),ONe.map(re=>e.jsx(Q,{variant:"outline",className:`cursor-pointer ${i===re.value?"bg-green-500/20 text-green-400 border-green-500/30":"border-slate-700 text-slate-400 hover:border-slate-600"}`,onClick:()=>l(re.value),children:re.label},re.value))]}),g.length<2&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:te.slice(0,8).map(re=>e.jsx(Q,{variant:"outline",className:"cursor-pointer border-slate-700 text-slate-300 hover:border-green-500/50 hover:bg-green-500/10",onClick:()=>{j(re.name),C(re.unit)},children:re.name},re.code))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Price per Unit *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-slate-500",children:"$"}),e.jsx(oe,{type:"number",placeholder:"0.00",value:y,onChange:re=>b(re.target.value),className:"pl-8 bg-slate-800 border-slate-700"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Unit *"}),e.jsxs(Te,{value:N,onValueChange:C,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsx(De,{children:MM.map(re=>e.jsx(K,{value:re.value,children:re.label},re.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Quantity (optional)"}),e.jsx(oe,{type:"number",placeholder:"Enter quantity for total value calculation",value:k,onChange:re=>E(re.target.value),className:"bg-slate-800 border-slate-700"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Type"}),e.jsxs(Te,{value:D,onValueChange:R,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Select..."})}),e.jsxs(De,{children:[e.jsx(K,{value:"invoice",children:"Invoice"}),e.jsx(K,{value:"lc",children:"Letter of Credit"}),e.jsx(K,{value:"contract",children:"Contract"}),e.jsx(K,{value:"proforma",children:"Proforma Invoice"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Reference"}),e.jsx(oe,{placeholder:"INV-001, LC-2024-001...",value:O,onChange:re=>P(re.target.value),className:"bg-slate-800 border-slate-700"})]})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsx(M,{className:"w-full bg-green-500 hover:bg-green-600",onClick:q,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Verify Price"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[c?e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"text-white text-lg",children:"Verification Result"}),e.jsxs(Q,{className:i4[c.verdict],children:[ne(c.verdict),e.jsx("span",{className:"ml-1.5 uppercase",children:c.verdict})]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-start gap-3 p-3 bg-slate-800/50 rounded-lg",children:[e.jsx(Ps,{className:"w-5 h-5 text-slate-400 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:c.commodity.name}),e.jsxs("div",{className:"text-sm text-slate-400",children:[c.commodity.code," â€¢ ",c.commodity.category]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Your Price"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",c.document_price.normalized_price.toFixed(2),e.jsxs("span",{className:"text-sm font-normal text-slate-400",children:["/",c.document_price.normalized_unit]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[e.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Market Price"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:["$",c.market_price.price.toFixed(2),e.jsxs("span",{className:"text-sm font-normal text-slate-400",children:["/",c.market_price.unit]})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-1",children:["Range: $",c.market_price.price_low.toFixed(2)," - $",c.market_price.price_high.toFixed(2)]})]})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Variance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[ae(c.variance.direction),e.jsxs("span",{className:`font-bold ${Math.abs(c.variance.percent)<15?"text-green-400":Math.abs(c.variance.percent)<30?"text-yellow-400":"text-red-400"}`,children:[c.variance.percent>0?"+":"",c.variance.percent.toFixed(1),"%"]})]})]}),e.jsx(es,{value:Math.min(Math.abs(c.variance.percent),100),className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-slate-500 mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"Â±15% (OK)"}),e.jsx("span",{children:"Â±30% (Warning)"}),e.jsx("span",{children:"50%+"})]})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Risk Level"}),e.jsx(Q,{className:INe[c.risk.risk_level],children:c.risk.risk_level.toUpperCase()})]}),c.risk.risk_flags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:c.risk.risk_flags.map((re,xe)=>e.jsxs(Q,{variant:"outline",className:"border-red-500/30 text-red-400 text-xs",children:[e.jsx(W0,{className:"w-3 h-3 mr-1"}),re.replace(/_/g," ")]},xe))})]}),e.jsx("div",{className:"p-4 bg-slate-800/50 rounded-lg border border-slate-700",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"w-5 h-5 text-slate-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-slate-300",children:c.verdict_reason})]})}),e.jsxs("div",{className:"text-xs text-slate-500 flex items-center justify-between",children:[e.jsxs("span",{children:["Source: ",c.market_price.source]}),e.jsxs("span",{children:["ID: ",c.verification_id.slice(0,8),"..."]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(M,{variant:"outline",className:"flex-1 border-slate-700",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download PDF"]}),e.jsx(M,{variant:"outline",className:"border-slate-700",onClick:()=>u(null),children:e.jsx(Lt,{className:"w-4 h-4"})})]})]})]}):e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-slate-800 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Na,{className:"w-8 h-8 text-slate-500"})}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Enter Price Details"}),e.jsx("p",{className:"text-slate-400 text-sm max-w-sm mx-auto",children:"Search for a commodity and enter the price from your trade document to verify against market data."})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"w-5 h-5 text-green-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-slate-400",children:[e.jsx("p",{className:"font-medium text-white mb-1",children:"How it works"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ Compares your price against real-time market data"}),e.jsx("li",{children:"â€¢ Sources: World Bank, FRED, LME, industry indices"}),e.jsx("li",{children:"â€¢ Â±15% variance = OK, Â±30% = Warning, 50%+ = TBML risk"})]})]})]})})})]})]})}),e.jsx(Qe,{value:"batch",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white text-lg",children:"Batch Price Verification"}),e.jsx(ue,{children:"Verify multiple line items from an invoice or LC at once."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:T.map((re,xe)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("span",{className:"text-slate-500 text-sm w-6",children:[xe+1,"."]}),e.jsx(oe,{placeholder:"Commodity",value:re.commodity,onChange:ye=>Y(re.id,"commodity",ye.target.value),className:"flex-1 bg-slate-700 border-slate-600"}),e.jsx(oe,{type:"number",placeholder:"Price",value:re.price,onChange:ye=>Y(re.id,"price",ye.target.value),className:"w-28 bg-slate-700 border-slate-600"}),e.jsxs(Te,{value:re.unit,onValueChange:ye=>Y(re.id,"unit",ye),children:[e.jsx(Pe,{className:"w-24 bg-slate-700 border-slate-600",children:e.jsx(Fe,{})}),e.jsx(De,{children:MM.slice(0,6).map(ye=>e.jsx(K,{value:ye.value,children:ye.value},ye.value))})]}),e.jsx(oe,{type:"number",placeholder:"Qty",value:re.quantity,onChange:ye=>Y(re.id,"quantity",ye.target.value),className:"w-20 bg-slate-700 border-slate-600"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>le(re.id),disabled:T.length===1,className:"text-slate-400 hover:text-red-400",children:e.jsx(ia,{className:"w-4 h-4"})})]},re.id))}),e.jsxs(M,{variant:"outline",onClick:H,className:"border-slate-700",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add Item"]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Type"}),e.jsxs(Te,{value:D,onValueChange:R,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Select..."})}),e.jsxs(De,{children:[e.jsx(K,{value:"invoice",children:"Invoice"}),e.jsx(K,{value:"lc",children:"Letter of Credit"}),e.jsx(K,{value:"contract",children:"Contract"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Reference"}),e.jsx(oe,{placeholder:"INV-001, LC-2024-001...",value:O,onChange:re=>P(re.target.value),className:"bg-slate-800 border-slate-700"})]})]}),e.jsx(M,{className:"w-full bg-green-500 hover:bg-green-600",onClick:z,disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Verifying ",T.filter(re=>re.commodity&&re.price).length," items..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Verify All Prices"]})}),h&&e.jsxs("div",{className:"mt-6 space-y-4",children:[e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-green-400",children:h.summary.passed}),e.jsx("div",{className:"text-xs text-slate-400",children:"Passed"})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-400",children:h.summary.warnings}),e.jsx("div",{className:"text-xs text-slate-400",children:"Warnings"})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-red-400",children:h.summary.failed}),e.jsx("div",{className:"text-xs text-slate-400",children:"Failed"})]}),e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-white",children:[h.summary.overall_variance_percent>0?"+":"",h.summary.overall_variance_percent.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-slate-400",children:"Overall Variance"})]})]}),e.jsx("div",{className:"space-y-2",children:h.items.map((re,xe)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ne(re.verdict),e.jsx("span",{className:"text-white",children:re.commodity?.name||T[xe]?.commodity})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-slate-400",children:["$",re.document_price?.price.toFixed(2),"/",re.document_price?.unit]}),e.jsxs("span",{className:`font-medium ${Math.abs(re.variance?.percent||0)<15?"text-green-400":Math.abs(re.variance?.percent||0)<30?"text-yellow-400":"text-red-400"}`,children:[(re.variance?.percent||0)>0?"+":"",(re.variance?.percent||0).toFixed(1),"%"]}),e.jsx(Q,{className:i4[re.verdict]||i4.warning,children:re.verdict?.toUpperCase()})]})]},xe))})]})]})]})})]})})})}),e.jsx("section",{className:"py-12 bg-slate-900/30",children:e.jsx("div",{className:"container mx-auto px-4 sm:px-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("h2",{className:"text-xl font-bold text-white mb-6 flex items-center gap-2",children:[e.jsx(Ps,{className:"w-5 h-5 text-green-400"}),"50+ Supported Commodities"]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-3",children:r.slice(0,12).map(re=>e.jsxs("div",{className:"p-3 bg-slate-800/50 border border-slate-700 rounded-lg hover:border-green-500/50 cursor-pointer transition-colors",onClick:()=>{j(re.name),C(re.unit),a("single")},children:[e.jsx("div",{className:"text-sm font-medium text-white truncate",children:re.name}),e.jsx("div",{className:"text-xs text-slate-500",children:re.category}),re.current_estimate&&e.jsxs("div",{className:"text-xs text-green-400 mt-1",children:["$",re.current_estimate,"/",re.unit]})]},re.code))}),e.jsx("div",{className:"text-center mt-4",children:e.jsxs(M,{variant:"link",className:"text-green-400",children:["View all commodities ",e.jsx(xr,{className:"w-4 h-4 ml-1"})]})})]})})}),e.jsx(er,{})]})}const MNe="https://trdrhub-api.onrender.com",BM={manage_team:!1,remove_members:!1,transfer_ownership:!1,view_billing:!1,manage_billing:!1,view_usage:!1,view_org_usage:!1,access_all_tools:!1,admin_panels:!1,api_access:!1},BNe=["lcopilot","lc_builder","doc-generator","sanctions","hs_code","container","price_verify"];function w_(){const{user:t,isLoading:s}=Dt(),[a,r]=m.useState(!0),[n,i]=m.useState(null),[l,o]=m.useState(null),d=m.useCallback(async()=>{if(!t){o(null),r(!1);return}const N={user_id:t.id,company_id:"",role:"owner",tool_access:BNe,permissions:{...BM,manage_team:!0,view_billing:!0,manage_billing:!0,view_usage:!0,view_org_usage:!0,access_all_tools:!0,admin_panels:!0,api_access:!0},is_owner:!0,is_admin:!0,can_manage_team:!0,can_view_billing:!0,can_manage_billing:!0};try{r(!0),i(null);let C={"Content-Type":"application/json"};try{const{supabase:k}=await ll(async()=>{const{supabase:R}=await Promise.resolve().then(()=>Ooe);return{supabase:R}},void 0),{data:E}=await k.auth.getSession(),D=E?.session?.access_token;D&&(C.Authorization=`Bearer ${D}`)}catch{}const _=await fetch(`${MNe}/members/me/permissions`,{headers:C,credentials:"include"});if(!_.ok){if(_.status===401||_.status===403||_.status===404){o(N);return}throw new Error("Failed to fetch permissions")}const A=await _.json();o(A)}catch(C){console.error("Failed to fetch user role:",C),i(C instanceof Error?C.message:"Unknown error"),o(N)}finally{r(!1)}},[t]);m.useEffect(()=>{s||d()},[s,d]);const c=l?.role??null,u=l?.is_owner??!1,h=l?.is_admin??!1,x=c==="member",g=c==="viewer",j=l?.permissions??BM,y=l?.tool_access??[],b=m.useCallback(N=>l?u||h?!0:y.includes(N):!1,[l,u,h,y]);return{isLoading:a||s,error:n,role:c,companyId:l?.company_id??null,isOwner:u,isAdmin:h,isMember:x,isViewer:g,canManageTeam:l?.can_manage_team??!1,canViewBilling:l?.can_view_billing??!1,canManageBilling:l?.can_manage_billing??!1,canViewUsage:j.view_usage,canViewOrgUsage:j.view_org_usage,canAccessAdminPanels:j.admin_panels,canAccessApi:j.api_access,toolAccess:y,canAccessTool:b,canAccessAnyTool:u||h||y.length>0,permissions:j,refresh:d}}function $Ne({...t}){const s=rn(),{user:a,logout:r}=Dt(),{isAdmin:n,canAccessAdminPanels:i}=w_(),l=c=>c==="/price-verify/dashboard"?s.pathname===c:s.pathname.startsWith(c),o=async c=>{c?.preventDefault(),c?.stopPropagation();try{await r()}catch(u){console.warn("Logout failed:",u),window.location.href="/login"}},d=n||i;return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-emerald-500/10 text-emerald-500",children:e.jsx(Na,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"Price Verify"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"TBML Detection"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Verification"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard")&&s.pathname==="/price-verify/dashboard",asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard",children:[e.jsx(ej,{}),e.jsx("span",{children:"Overview"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/verify"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/verify",children:[e.jsx(Yt,{}),e.jsx("span",{children:"New Verification"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/batch"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/batch",children:[e.jsx(uue,{}),e.jsx("span",{children:"Batch Verify"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Data"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/commodities"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/commodities",children:[e.jsx(Ps,{}),e.jsx("span",{children:"Commodities"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/prices"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/prices",children:[e.jsx(Vt,{}),e.jsx("span",{children:"Market Prices"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/history"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/history",children:[e.jsx(xn,{}),e.jsx("span",{children:"History"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Insights"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/analytics"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/analytics",children:[e.jsx(Ws,{}),e.jsx("span",{children:"Analytics"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/reports"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/reports",children:[e.jsx(Be,{}),e.jsx("span",{children:"Reports"})]})})})]})})]}),d&&e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Admin"}),e.jsx(Js,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/admin"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/admin",children:[e.jsx(Ot,{}),e.jsx("span",{children:"Admin Panel"})]})})})})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/settings"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:l("/price-verify/dashboard/help"),asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help"})]})})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.role||"User"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:o,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}function UNe(){return e.jsx(Lc,{sidebar:e.jsx($Ne,{}),breadcrumbs:[{label:"Hub",href:"/hub"},{label:"Price Verify"}],title:"Price Verify",children:e.jsx(ip,{})})}const zNe="http://localhost:8000",qNe=[{id:"1",commodity:"Raw Cotton",price:2.45,unit:"kg",variance:11.2,verdict:"warning",timestamp:"2 hours ago"},{id:"2",commodity:"Steel HRC",price:680,unit:"mt",variance:-5.3,verdict:"pass",timestamp:"4 hours ago"},{id:"3",commodity:"Crude Oil (Brent)",price:95,unit:"bbl",variance:15.8,verdict:"warning",timestamp:"Yesterday"},{id:"4",commodity:"Copper",price:12500,unit:"mt",variance:47.1,verdict:"fail",timestamp:"Yesterday"},{id:"5",commodity:"White Rice",price:510,unit:"mt",variance:-2.1,verdict:"pass",timestamp:"2 days ago"}],VNe=[{name:"Raw Cotton",verifications:124,trend:"up"},{name:"Steel HRC",verifications:98,trend:"up"},{name:"Crude Oil",verifications:87,trend:"down"},{name:"Copper",verifications:65,trend:"up"},{name:"White Rice",verifications:52,trend:"stable"}];function WNe(){const[t,s]=m.useState(!0),[a,r]=m.useState(!1),[n,i]=m.useState(qNe),[l,o]=m.useState(VNe),[d,c]=m.useState(0),[u,h]=m.useState({totalVerifications:0,passRate:68,warningRate:24,failRate:8,avgVariance:12.4,commoditiesCovered:52});m.useEffect(()=>{(async()=>{try{const y=await fetch(`${zNe}/price-verify/commodities`);if(y.ok){const b=await y.json();b.success&&(c(b.count||b.commodities?.length||0),h(N=>({...N,commoditiesCovered:b.count||b.commodities?.length||52})),r(!0))}}catch{console.log("Using demo data - API not available")}finally{s(!1)}})()},[]);const x=j=>{switch(j){case"pass":return e.jsx(Oe,{className:"h-4 w-4 text-green-500"});case"warning":return e.jsx(Ve,{className:"h-4 w-4 text-yellow-500"});case"fail":return e.jsx(bs,{className:"h-4 w-4 text-red-500"});default:return null}},g=j=>{const y={pass:"bg-green-500/10 text-green-500 border-green-500/20",warning:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",fail:"bg-red-500/10 text-red-500 border-red-500/20"};return e.jsx(Q,{variant:"outline",className:y[j],children:j.toUpperCase()})};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Price Verification Dashboard"}),t?e.jsxs(Q,{variant:"outline",className:"text-muted-foreground",children:[e.jsx(ct,{className:"h-3 w-3 mr-1 animate-spin"}),"Loading..."]}):a?e.jsxs(Q,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:[e.jsx(ha,{className:"h-3 w-3 mr-1"}),"Live Data"]}):e.jsx(Q,{variant:"outline",className:"text-muted-foreground",children:"Demo Mode"})]}),e.jsx("p",{className:"text-muted-foreground",children:a?`Connected to real-time market data across ${d} commodities`:"Verify trade document prices against market data"})]}),e.jsx("div",{className:"flex gap-3",children:e.jsx(M,{asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/verify",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"New Verification"]})})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Verifications"}),e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.totalVerifications.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.totalVerifications===0?"Start verifying prices to track":e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-green-500",children:"+12.5%"})," from last month"]})})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Pass Rate"}),e.jsx(Oe,{className:"h-4 w-4 text-green-500"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold text-green-500",children:[u.passRate,"%"]}),e.jsx(es,{value:u.passRate,className:"mt-2 h-1"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Avg. Variance"}),e.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:["Â±",u.avgVariance,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Within acceptable range"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Commodities"}),e.jsx(Ps,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:u.commoditiesCovered}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Across 7 categories"})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-7",children:[e.jsxs($,{className:"lg:col-span-4",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{children:"Recent Verifications"}),u.totalVerifications===0&&e.jsx(Q,{variant:"outline",className:"text-xs text-muted-foreground",children:"Sample Data"})]}),e.jsx(ue,{children:"Your latest price verification results"})]}),e.jsx(M,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(pe,{to:"/price-verify/dashboard/history",children:["View all",e.jsx(Jt,{className:"ml-2 h-4 w-4"})]})})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:n.map(j=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-card hover:bg-accent/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[x(j.verdict),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:j.commodity}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["$",j.price,"/",j.unit]})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:`font-medium ${j.variance>0?"text-red-500":"text-green-500"}`,children:[j.variance>0?"+":"",j.variance,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),j.timestamp]})]}),g(j.verdict)]})]},j.id))})})]}),e.jsxs($,{className:"lg:col-span-3",children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{children:"Top Commodities"}),u.totalVerifications===0&&e.jsx(Q,{variant:"outline",className:"text-xs text-muted-foreground",children:"Sample Data"})]}),e.jsx(ue,{children:"Most verified commodities this month"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:l.map((j,y)=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-muted text-sm font-medium",children:y+1}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:j.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[j.verifications," verifications"]})]}),e.jsxs("div",{children:[j.trend==="up"&&e.jsx(Vt,{className:"h-4 w-4 text-green-500"}),j.trend==="down"&&e.jsx(lr,{className:"h-4 w-4 text-red-500"}),j.trend==="stable"&&e.jsx("div",{className:"h-4 w-4 rounded-full bg-muted"})]})]},j.name))})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ee,{children:"Verdict Distribution"}),u.totalVerifications===0&&e.jsx(Q,{variant:"outline",className:"text-xs text-muted-foreground",children:"Sample Data"})]}),e.jsx(ue,{children:"Breakdown of verification results this month"})]}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-8",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500"}),e.jsx("span",{className:"text-sm",children:"Pass"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[u.passRate,"%"]})]}),e.jsx(es,{value:u.passRate,className:"h-2 bg-muted [&>div]:bg-green-500"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-yellow-500"}),e.jsx("span",{className:"text-sm",children:"Warning"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[u.warningRate,"%"]})]}),e.jsx(es,{value:u.warningRate,className:"h-2 bg-muted [&>div]:bg-yellow-500"})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm",children:"Fail"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[u.failRate,"%"]})]}),e.jsx(es,{value:u.failRate,className:"h-2 bg-muted [&>div]:bg-red-500"})]})]})})]})]})}const i0="http://localhost:8000",HNe=[{value:"agriculture",label:"ðŸŒ¾ Agriculture"},{value:"energy",label:"â›½ Energy"},{value:"metals",label:"ðŸ”© Metals"},{value:"textiles",label:"ðŸ‘• Textiles"},{value:"chemicals",label:"ðŸ§ª Chemicals"},{value:"food_beverage",label:"ðŸ– Food & Beverage"},{value:"electronics",label:"ðŸ’» Electronics"}],$M=[{value:"kg",label:"Kilogram (kg)"},{value:"mt",label:"Metric Ton (MT)"},{value:"lb",label:"Pound (lb)"},{value:"oz",label:"Ounce (oz)"},{value:"bbl",label:"Barrel (bbl)"},{value:"gal",label:"Gallon (gal)"},{value:"l",label:"Liter (L)"},{value:"m",label:"Meter (m)"},{value:"pcs",label:"Pieces (pcs)"},{value:"doz",label:"Dozen (doz)"}],UM={low:"bg-green-500/10 text-green-500 border-green-500/20",medium:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",high:"bg-orange-500/10 text-orange-500 border-orange-500/20",critical:"bg-red-500/10 text-red-500 border-red-500/20"},zM={pass:"bg-green-500/10 text-green-500 border-green-500/20",warning:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",fail:"bg-red-500/10 text-red-500 border-red-500/20"};function GNe(){const{toast:t}=et(),s=m.useRef(null),[a,r]=m.useState([]),[n,i]=m.useState("all"),[l,o]=m.useState(!1),[d,c]=m.useState(null),[u,h]=m.useState(""),[x,g]=m.useState(""),[j,y]=m.useState("kg"),[b]=m.useState("USD"),[N,C]=m.useState(""),[_,A]=m.useState(""),[k,E]=m.useState(""),[D,R]=m.useState(null),[O,P]=m.useState(!1),[T,B]=m.useState(null),[G,q]=m.useState(!1);m.useEffect(()=>{z()},[]);const z=async()=>{try{const Re=await(await fetch(`${i0}/price-verify/commodities`)).json();Re.success&&r(Re.commodities)}catch{r([{code:"COTTON_RAW",name:"Raw Cotton",category:"agriculture",unit:"kg",current_estimate:2.2},{code:"STEEL_HRC",name:"Steel (Hot Rolled Coil)",category:"metals",unit:"mt",current_estimate:650},{code:"CRUDE_OIL_BRENT",name:"Crude Oil (Brent)",category:"energy",unit:"bbl",current_estimate:82},{code:"COPPER",name:"Copper",category:"metals",unit:"mt",current_estimate:8500},{code:"RICE_WHITE",name:"White Rice",category:"agriculture",unit:"mt",current_estimate:520},{code:"UREA",name:"Urea (Fertilizer)",category:"chemicals",unit:"mt",current_estimate:350},{code:"GARMENTS_TSHIRT",name:"T-Shirts (Basic)",category:"textiles",unit:"pcs",current_estimate:3.5},{code:"SHRIMP_FROZEN",name:"Frozen Shrimp",category:"food_beverage",unit:"kg",current_estimate:9}])}},H=m.useCallback(ce=>{ce.preventDefault(),ce.stopPropagation(),q(!0)},[]),le=m.useCallback(ce=>{ce.preventDefault(),ce.stopPropagation(),q(!1)},[]),Y=m.useCallback(ce=>{ce.preventDefault(),ce.stopPropagation(),q(!1);const Re=ce.dataTransfer.files;Re.length>0&&te(Re[0])},[]),te=ce=>{if(!["application/pdf","image/jpeg","image/png","image/tiff"].includes(ce.type)){t({title:"Invalid File Type",description:"Please upload a PDF, JPG, PNG, or TIFF file.",variant:"destructive"});return}if(ce.size>20*1024*1024){t({title:"File Too Large",description:"Maximum file size is 20MB.",variant:"destructive"});return}R(ce),B(null)},ne=async()=>{if(D){P(!0),B(null);try{const ce=new FormData;ce.append("file",D),ce.append("auto_verify","true");const ie=await(await fetch(`${i0}/price-verify/extract`,{method:"POST",body:ce})).json();if(ie.success){B(ie);const Ne=ie.extraction?.line_items?.length||0;t({title:"Extraction Complete",description:`Found ${Ne} line item(s) with prices.`})}else t({title:"Extraction Failed",description:ie.detail||"Could not extract prices from document.",variant:"destructive"})}catch{const Re={success:!0,extraction:{document_info:{document_type:"invoice",document_number:"INV-2024-001",document_date:"2024-11-30",seller_name:"ABC Trading Co.",buyer_name:"XYZ Imports Ltd."},line_items:[{commodity_name:"Raw Cotton",quantity:5e3,unit:"kg",unit_price:2.45,total_price:12250,currency:"USD",confidence:.92},{commodity_name:"Polyester Fiber",quantity:2e3,unit:"kg",unit_price:1.85,total_price:3700,currency:"USD",confidence:.88}],totals:{total_amount:15950,currency:"USD"}},verifications:[{success:!0,verification_id:"demo-1",timestamp:new Date().toISOString(),commodity:{code:"COTTON_RAW",name:"Raw Cotton",category:"agriculture"},document_price:{price:2.45,unit:"kg",currency:"USD",normalized_price:2.45,normalized_unit:"kg"},market_price:{price:2.2,price_low:2,price_high:2.4,unit:"kg",currency:"USD",source:"demo"},variance:{percent:11.4,absolute:.25,direction:"over"},risk:{risk_level:"medium",risk_flags:[]},verdict:"warning",verdict_reason:"Price is 11.4% above market average."},{success:!0,verification_id:"demo-2",timestamp:new Date().toISOString(),commodity:{code:"POLYESTER_FIBER",name:"Polyester Fiber",category:"textiles"},document_price:{price:1.85,unit:"kg",currency:"USD",normalized_price:1.85,normalized_unit:"kg"},market_price:{price:1.75,price_low:1.6,price_high:1.9,unit:"kg",currency:"USD",source:"demo"},variance:{percent:5.7,absolute:.1,direction:"over"},risk:{risk_level:"low",risk_flags:[]},verdict:"pass",verdict_reason:"Price within acceptable market range."}],summary:{total_items:2,passed:1,warnings:1,failed:0,tbml_flags:0}};B(Re),t({title:"Demo Mode",description:"Backend not connected. Showing simulated extraction."})}finally{P(!1)}}},ae=()=>{R(null),B(null),s.current&&(s.current.value="")},re=async()=>{if(!d||!u||!x){t({title:"No Result",description:"Please verify a price first.",variant:"destructive"});return}try{const ce=await fetch(`${i0}/price-verify/verify/pdf?include_market_details=true`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commodity:u,price:parseFloat(x),unit:j,currency:b,quantity:N?parseFloat(N):void 0,document_type:_||void 0,document_reference:k||void 0})});if(!ce.ok)throw new Error("PDF generation failed");const Re=await ce.blob(),ie=window.URL.createObjectURL(Re),Ne=document.createElement("a");Ne.href=ie,Ne.download=`price_verify_${d.commodity.code}_${new Date().toISOString().slice(0,10)}.pdf`,document.body.appendChild(Ne),Ne.click(),document.body.removeChild(Ne),window.URL.revokeObjectURL(ie),t({title:"PDF Downloaded",description:"Compliance report saved successfully."})}catch{t({title:"Download Failed",description:"Could not generate PDF. Please try again.",variant:"destructive"})}},xe=async()=>{if(!u||!x||!j){t({title:"Missing Information",description:"Please enter commodity, price, and unit.",variant:"destructive"});return}o(!0),c(null);try{const Re=await(await fetch(`${i0}/price-verify/verify`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({commodity:u,price:parseFloat(x),unit:j,currency:b,quantity:N?parseFloat(N):void 0,document_type:_||void 0,document_reference:k||void 0})})).json();c(Re),Re.success&&t({title:`Verdict: ${Re.verdict.toUpperCase()}`,description:Re.verdict_reason,variant:Re.verdict==="pass"?"default":"destructive"})}catch{const Re={success:!0,verification_id:"demo-"+Date.now(),timestamp:new Date().toISOString(),commodity:{code:u.toUpperCase().replace(/\s+/g,"_"),name:u,category:"agriculture"},document_price:{price:parseFloat(x),unit:j,currency:b,normalized_price:parseFloat(x),normalized_unit:j,quantity:N?parseFloat(N):void 0,total_value:N?parseFloat(x)*parseFloat(N):void 0},market_price:{price:parseFloat(x)*.9,price_low:parseFloat(x)*.7,price_high:parseFloat(x)*1.1,unit:j,currency:"USD",source:"demo"},variance:{percent:11.1,absolute:parseFloat(x)*.1,direction:"over"},risk:{risk_level:"medium",risk_flags:[]},verdict:"warning",verdict_reason:"Price is 11.1% above market average. Review recommended."};c(Re),t({title:"Demo Mode",description:"Backend not connected. Showing simulated result."})}finally{o(!1)}},ye=n==="all"?a:a.filter(ce=>ce.category===n),ke=ce=>{switch(ce){case"pass":return e.jsx(Oe,{className:"h-5 w-5 text-green-500"});case"warning":return e.jsx(Ve,{className:"h-5 w-5 text-yellow-500"});case"fail":return e.jsx(bs,{className:"h-5 w-5 text-red-500"});default:return null}},ze=ce=>{switch(ce){case"over":return e.jsx(Vt,{className:"h-4 w-4 text-red-500"});case"under":return e.jsx(lr,{className:"h-4 w-4 text-blue-500"});default:return e.jsx(Nh,{className:"h-4 w-4 text-muted-foreground"})}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"New Verification"}),e.jsx("p",{className:"text-muted-foreground",children:"Verify commodity prices against real-time market data."})]}),e.jsxs(Os,{defaultValue:"upload",className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2 max-w-md",children:[e.jsxs(He,{value:"upload",className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"}),"Upload Document"]}),e.jsxs(He,{value:"manual",className:"flex items-center gap-2",children:[e.jsx(Bt,{className:"h-4 w-4"}),"Manual Entry"]})]}),e.jsx(Qe,{value:"upload",className:"mt-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ni,{className:"h-5 w-5 text-primary"}),"AI-Powered Extraction"]}),e.jsx(ue,{children:"Upload an invoice, LC, or contract and we'll automatically extract prices."})]}),e.jsxs(U,{className:"space-y-4",children:[D?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg border bg-muted/30",children:[e.jsx(Be,{className:"h-8 w-8 text-primary flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium truncate",children:D.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[(D.size/1024).toFixed(1)," KB"]})]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:ae,children:e.jsx(fn,{className:"h-4 w-4"})})]}),e.jsx(M,{className:"w-full",onClick:ne,disabled:O,children:O?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Extracting Prices..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ni,{className:"h-4 w-4 mr-2"}),"Extract & Verify Prices"]})})]}):e.jsxs("div",{className:`border-2 border-dashed rounded-lg p-8 text-center transition-colors ${G?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,onDragOver:H,onDragLeave:le,onDrop:Y,children:[e.jsx(Hs,{className:"h-10 w-10 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"font-medium mb-1",children:"Drop your document here"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"PDF, JPG, PNG, or TIFF (max 20MB)"}),e.jsx("input",{ref:s,type:"file",accept:".pdf,.jpg,.jpeg,.png,.tiff,.tif",className:"hidden",onChange:ce=>ce.target.files?.[0]&&te(ce.target.files[0])}),e.jsx(M,{variant:"outline",onClick:()=>s.current?.click(),children:"Browse Files"})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsx("p",{className:"font-medium",children:"Supported documents:"}),e.jsxs("ul",{className:"flex flex-wrap gap-2",children:[e.jsx("li",{className:"px-2 py-1 bg-muted rounded",children:"Commercial Invoice"}),e.jsx("li",{className:"px-2 py-1 bg-muted rounded",children:"Letter of Credit"}),e.jsx("li",{className:"px-2 py-1 bg-muted rounded",children:"Purchase Contract"}),e.jsx("li",{className:"px-2 py-1 bg-muted rounded",children:"Proforma Invoice"})]})]})]})]}),e.jsx("div",{className:"space-y-6",children:T?e.jsx(e.Fragment,{children:e.jsxs($,{children:[e.jsx(X,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{children:"Extraction Results"}),T.summary?e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(Q,{variant:"outline",className:"bg-green-500/10 text-green-500 border-green-500/20",children:[T.summary.passed," Passed"]}),T.summary.warnings>0&&e.jsxs(Q,{variant:"outline",className:"bg-yellow-500/10 text-yellow-500 border-yellow-500/20",children:[T.summary.warnings," Warning"]}),T.summary.failed>0&&e.jsxs(Q,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/20",children:[T.summary.failed," Failed"]})]}):e.jsxs(Q,{variant:"outline",className:"bg-blue-500/10 text-blue-500 border-blue-500/20",children:[e.jsx(ni,{className:"h-3 w-3 mr-1"}),"Ready to Verify"]})]})}),e.jsxs(U,{className:"space-y-4",children:[(()=>{const ce=T.extraction.line_items.filter(ie=>!ie.unit_price&&ie.unit_price!==0).length,Re=T.extraction.line_items.filter(ie=>!ie.quantity&&ie.quantity!==0).length;return ce>0||Re>0?e.jsx("div",{className:"p-3 rounded-lg border border-amber-500/30 bg-amber-500/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-amber-500 mb-1",children:"Action Required"}),ce>0&&e.jsxs("div",{className:"text-muted-foreground",children:[ce," item(s) missing unit price - enter prices below"]}),Re>0&&e.jsxs("div",{className:"text-muted-foreground",children:[Re," item(s) missing quantity"]})]})]})}):null})(),T.extraction.document_info.document_number&&e.jsx("div",{className:"p-3 rounded-lg border bg-muted/30 text-sm",children:e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Doc #:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.document_number})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Date:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.document_date||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Seller:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.seller_name||"N/A"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Buyer:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.buyer_name||"N/A"})]}),T.extraction.document_info.incoterms&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Incoterms:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.incoterms})]}),T.extraction.document_info.contract_reference&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Contract:"})," ",e.jsx("span",{className:"font-medium",children:T.extraction.document_info.contract_reference})]})]})}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("h4",{className:"text-sm font-medium text-muted-foreground",children:["Line Items (",T.extraction.line_items.length,")"]})}),T.extraction.line_items.map((ce,Re)=>{const ie=T.verifications?.[Re],Ne=ce.needs_price||ce.unit_price===null||ce.unit_price===void 0;return ce.needs_quantity||ce.quantity===null||ce.quantity,e.jsxs("div",{className:`p-4 rounded-lg border ${Ne?"border-amber-500/30 bg-amber-500/5":""}`,children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:ce.commodity_name||"Unknown Commodity"}),ce.hs_code&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-0.5",children:["HS Code: ",e.jsx("span",{className:"font-mono bg-muted px-1 rounded",children:ce.hs_code})]})]}),ie?e.jsxs(Q,{variant:"outline",className:zM[ie.verdict],children:[ke(ie.verdict),e.jsx("span",{className:"ml-1 uppercase",children:ie.verdict})]}):Ne?e.jsxs(Q,{variant:"outline",className:"bg-amber-500/10 text-amber-500 border-amber-500/20",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),"Needs Price"]}):null]}),e.jsxs("div",{className:"grid grid-cols-4 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Quantity"}),e.jsx(oe,{type:"number",placeholder:"0",className:"h-8 text-sm",defaultValue:ce.quantity||"",onChange:Ue=>{const ge=[...T.extraction.line_items];ge[Re]={...ce,quantity:parseFloat(Ue.target.value)||void 0},B({...T,extraction:{...T.extraction,line_items:ge}})}})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Unit"}),e.jsxs(Te,{defaultValue:ce.unit||"pcs",onValueChange:Ue=>{const ge=[...T.extraction.line_items];ge[Re]={...ce,unit:Ue},B({...T,extraction:{...T.extraction,line_items:ge}})},children:[e.jsx(Pe,{className:"h-8 text-sm",children:e.jsx(Fe,{})}),e.jsx(De,{children:$M.map(Ue=>e.jsx(K,{value:Ue.value,children:Ue.label},Ue.value))})]})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Unit Price ($)"}),e.jsx(oe,{type:"number",step:"0.01",placeholder:"0.00",className:`h-8 text-sm ${Ne?"border-amber-500 focus:ring-amber-500":""}`,defaultValue:ce.unit_price||"",onChange:Ue=>{const ge=[...T.extraction.line_items];ge[Re]={...ce,unit_price:parseFloat(Ue.target.value)||void 0,needs_price:!1},B({...T,extraction:{...T.extraction,line_items:ge}})}})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-xs text-muted-foreground",children:"Currency"}),e.jsxs(Te,{defaultValue:ce.currency||"USD",onValueChange:Ue=>{const ge=[...T.extraction.line_items];ge[Re]={...ce,currency:Ue},B({...T,extraction:{...T.extraction,line_items:ge}})},children:[e.jsx(Pe,{className:"h-8 text-sm",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"GBP",children:"GBP"}),e.jsx(K,{value:"BDT",children:"BDT"}),e.jsx(K,{value:"CNY",children:"CNY"})]})]})]})]}),ie&&ie.market_price&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Your Price"}),e.jsxs("div",{className:"text-xl font-bold",children:["$",ce.unit_price?.toFixed(2)||"0.00",e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",ce.unit||"unit"]})]})]}),e.jsxs("div",{className:"p-3 rounded-lg border bg-muted/30",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-1",children:"Market Price"}),e.jsxs("div",{className:"text-xl font-bold",children:["$",ie.market_price.price?.toFixed(2)||"?",e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",ie.market_price.unit||"unit"]})]}),ie.market_price.price_low&&ie.market_price.price_high&&e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Range: $",ie.market_price.price_low?.toFixed(2)," - $",ie.market_price.price_high?.toFixed(2)]})]})]}),ie.variance&&e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Variance"}),e.jsxs("span",{className:`font-bold ${Math.abs(ie.variance.percent||0)<15?"text-green-500":Math.abs(ie.variance.percent||0)<30?"text-yellow-500":"text-red-500"}`,children:[e.jsx(Vt,{className:"h-4 w-4 inline mr-1"}),(ie.variance.percent||0)>0?"+":"",(ie.variance.percent||0).toFixed(1),"%"]})]}),e.jsx("div",{className:"h-2 w-full bg-gradient-to-r from-green-500 via-yellow-500 to-red-500 rounded-full mb-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"Â±15% (OK)"}),e.jsx("span",{children:"Â±30% (Warning)"}),e.jsx("span",{children:"50%+"})]})]}),ie.resolution&&!ie.resolution.verified&&e.jsx("div",{className:"p-3 rounded-lg border border-amber-500/30 bg-amber-500/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-amber-500",children:"Commodity Not in Verified Database"}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Source: ",ie.resolution.source," â€¢ Confidence: ",Math.round((ie.resolution.confidence||0)*100),"%"]}),ie.resolution.warnings?.map((Ue,ge)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:["â€¢ ",Ue]},ge))]})]})}),ie.risk&&e.jsxs("div",{className:"p-3 rounded-lg border",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Risk Level"}),e.jsx(Q,{variant:"outline",className:UM[ie.risk.risk_level]||"",children:ie.risk.risk_level?.toUpperCase()||"UNKNOWN"})]}),ie.risk.risk_flags&&ie.risk.risk_flags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:ie.risk.risk_flags.map((Ue,ge)=>e.jsxs(Q,{variant:"outline",className:"text-xs bg-red-500/10 text-red-400 border-red-500/20",children:[e.jsx(Ve,{className:"h-3 w-3 mr-1"}),Ue.replace(/_/g," ")]},ge))})]}),ie.ai_explanation&&e.jsx("div",{className:"p-3 rounded-lg border bg-muted/20",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ja,{className:"h-4 w-4 text-muted-foreground flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:ie.ai_explanation})]})}),ie.tbml_assessment&&e.jsx("div",{className:"p-3 rounded-lg border border-red-500/30 bg-red-500/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(W0,{className:"h-4 w-4 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium text-red-500 mb-1",children:"TBML Assessment"}),e.jsx("p",{className:"text-muted-foreground",children:ie.tbml_assessment})]})]})}),e.jsxs("div",{className:"p-2 rounded border bg-muted/10 text-xs text-muted-foreground",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("span",{children:["Data Source: ",ie.market_price?.source_display||ie.market_price?.source||"Market Data"]}),ie.verification_id&&e.jsxs("span",{className:"font-mono",children:["Audit ID: ",String(ie.verification_id).slice(0,12)]})]}),ie.market_price?.fetched_at&&e.jsxs("div",{className:"mt-1",children:["Updated: ",new Date(ie.market_price.fetched_at).toLocaleString()]})]})]}),ie&&ie.error&&e.jsxs("div",{className:"text-sm mt-3 pt-3 border-t text-amber-500",children:["âš ï¸ ",ie.error]})]},Re)})]}),T.extraction.totals.total_amount&&e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border bg-muted/30",children:[e.jsx("span",{className:"font-medium",children:"Total Document Value"}),e.jsxs("span",{className:"text-lg font-bold",children:["$",T.extraction.totals.total_amount.toLocaleString()]})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex gap-3",children:[!T.verifications||T.verifications.length===0?e.jsxs(M,{className:"flex-1 bg-green-600 hover:bg-green-700",onClick:async()=>{o(!0);try{const ce=T.extraction.line_items.filter(Ne=>Ne.unit_price&&Ne.commodity_name);if(ce.length===0){t({title:"No prices to verify",description:"Please enter unit prices for at least one item",variant:"destructive"});return}const ie=await(await fetch(`${i0}/price-verify/verify/batch`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:ce.map(Ne=>({commodity:Ne.commodity_name,price:Ne.unit_price,unit:Ne.unit||"pcs",quantity:Ne.quantity,currency:Ne.currency||"USD",hs_code:Ne.hs_code})),document_type:T.extraction.document_info.document_type,document_reference:T.extraction.document_info.document_number})})).json();if(ie.success){const Ne=(ie.items||[]).map(Ue=>({...Ue,verdict:Ue.verdict?.toUpperCase()||"UNKNOWN"}));B({...T,verifications:Ne,summary:ie.summary}),t({title:"Verification Complete",description:`${ie.summary.passed} passed, ${ie.summary.warnings} warnings, ${ie.summary.failed} failed`})}else throw new Error(ie.error||"Verification failed")}catch(ce){t({title:"Verification Failed",description:ce instanceof Error?ce.message:"Unknown error",variant:"destructive"})}finally{o(!1)}},disabled:l,children:[l?e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Verify Prices Against Market"]}):e.jsxs(M,{variant:"outline",className:"flex-1",children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Download Report"]}),e.jsxs(M,{variant:"outline",onClick:ae,children:[e.jsx(Lt,{className:"h-4 w-4 mr-2"}),"New Upload"]})]})]})]})}):e.jsx($,{children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-xl bg-muted flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Upload a Document"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-sm mx-auto",children:"Upload an invoice or LC and our AI will extract commodity prices for verification."})]})})})]})}),e.jsx(Qe,{value:"manual",className:"mt-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Price Details"}),e.jsx(ue,{children:"Enter the commodity and price from your trade document."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Commodity *"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search by name, code, or HS code...",value:u,onChange:ce=>h(ce.target.value),className:"pl-10"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 pt-2",children:[e.jsx(Q,{variant:"outline",className:`cursor-pointer ${n==="all"?"bg-primary/10 text-primary border-primary/20":""}`,onClick:()=>i("all"),children:"All"}),HNe.map(ce=>e.jsx(Q,{variant:"outline",className:`cursor-pointer ${n===ce.value?"bg-primary/10 text-primary border-primary/20":""}`,onClick:()=>i(ce.value),children:ce.label},ce.value))]}),u.length<2&&e.jsx("div",{className:"flex flex-wrap gap-2 pt-2",children:ye.slice(0,6).map(ce=>e.jsx(Q,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>{h(ce.name),y(ce.unit)},children:ce.name},ce.code))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Price per Unit *"}),e.jsxs("div",{className:"relative",children:[e.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-muted-foreground",children:"$"}),e.jsx(oe,{type:"number",placeholder:"0.00",value:x,onChange:ce=>g(ce.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Unit *"}),e.jsxs(Te,{value:j,onValueChange:y,children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsx(De,{children:$M.map(ce=>e.jsx(K,{value:ce.value,children:ce.label},ce.value))})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Quantity (optional)"}),e.jsx(oe,{type:"number",placeholder:"Enter quantity for total value calculation",value:N,onChange:ce=>C(ce.target.value)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Type"}),e.jsxs(Te,{value:_,onValueChange:A,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select..."})}),e.jsxs(De,{children:[e.jsx(K,{value:"invoice",children:"Invoice"}),e.jsx(K,{value:"lc",children:"Letter of Credit"}),e.jsx(K,{value:"contract",children:"Contract"}),e.jsx(K,{value:"proforma",children:"Proforma Invoice"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Reference"}),e.jsx(oe,{placeholder:"INV-001, LC-2024-001...",value:k,onChange:ce=>E(ce.target.value)})]})]}),e.jsx(As,{}),e.jsx(M,{className:"w-full",onClick:xe,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"h-4 w-4 mr-2"}),"Verify Price"]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[d?e.jsxs($,{children:[e.jsx(X,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{children:"Verification Result"}),e.jsxs(Q,{variant:"outline",className:zM[d.verdict],children:[ke(d.verdict),e.jsx("span",{className:"ml-1.5 uppercase",children:d.verdict})]})]})}),e.jsxs(U,{className:"space-y-6",children:[d.resolution&&!d.resolution.verified&&e.jsx("div",{className:"p-3 rounded-lg border border-amber-500/30 bg-amber-500/10",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium text-amber-500",children:"Commodity Not in Verified Database"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Source: ",d.resolution.source.replace(/_/g," "),d.resolution.matched_to&&` (matched to: ${d.resolution.matched_to})`," â€¢ ","Confidence: ",Math.round(d.resolution.confidence*100),"%"]}),d.resolution.warnings&&d.resolution.warnings.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground list-disc ml-4 mt-1",children:d.resolution.warnings.map((ce,Re)=>e.jsx("li",{children:ce},Re))})]})]})}),e.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg border bg-muted/30",children:[e.jsx(Ps,{className:"h-5 w-5 text-muted-foreground mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:d.commodity?.name||"Unknown Commodity"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.commodity?.code||"N/A"," â€¢ ",d.commodity?.category||"general"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Your Price"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",d.document_price.normalized_price.toFixed(2),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",d.document_price.normalized_unit]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsx("div",{className:"text-sm text-muted-foreground mb-1",children:"Market Price"}),e.jsxs("div",{className:"text-2xl font-bold",children:["$",d.market_price.price.toFixed(2),e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["/",d.market_price.unit]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Range: $",d.market_price.price_low.toFixed(2)," - $",d.market_price.price_high.toFixed(2)]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Variance"}),e.jsxs("div",{className:"flex items-center gap-2",children:[ze(d.variance.direction),e.jsxs("span",{className:`font-bold ${Math.abs(d.variance.percent)<15?"text-green-500":Math.abs(d.variance.percent)<30?"text-yellow-500":"text-red-500"}`,children:[d.variance.percent>0?"+":"",d.variance.percent.toFixed(1),"%"]})]})]}),e.jsx(es,{value:Math.min(Math.abs(d.variance.percent),100),className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"Â±15% (OK)"}),e.jsx("span",{children:"Â±30% (Warning)"}),e.jsx("span",{children:"50%+"})]})]}),e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Risk Level"}),e.jsx(Q,{variant:"outline",className:UM[d.risk.risk_level],children:d.risk.risk_level.toUpperCase()})]}),d.risk.risk_flags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:d.risk.risk_flags.map((ce,Re)=>e.jsxs(Q,{variant:"outline",className:"bg-red-500/10 text-red-500 border-red-500/20 text-xs",children:[e.jsx(W0,{className:"h-3 w-3 mr-1"}),ce.replace(/_/g," ")]},Re))})]}),e.jsx("div",{className:"p-4 rounded-lg border",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-muted-foreground flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm",children:d.verdict_reason})]})}),e.jsxs("div",{className:"p-3 rounded-lg border bg-slate-950/50 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium text-foreground",children:"Data Source:"}),d.market_price.source_url?e.jsx("a",{href:d.market_price.source_url,target:"_blank",rel:"noopener noreferrer",className:"text-primary hover:underline",children:d.market_price.source_display||d.market_price.source}):e.jsx("span",{children:d.market_price.source_display||d.market_price.source})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Updated: ",d.market_price.data_updated?new Date(d.market_price.data_updated).toLocaleString():"Real-time"]}),e.jsxs("span",{className:"font-mono",children:["Audit ID: ",d.verification_id.slice(0,12)]})]})]}),d.ai_explanation&&e.jsx("div",{className:"p-4 rounded-lg border bg-primary/5 border-primary/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ni,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:"AI Analysis"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.ai_explanation})]})]})}),d.tbml_assessment&&e.jsx("div",{className:"p-4 rounded-lg border bg-red-500/5 border-red-500/20",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(W0,{className:"h-5 w-5 text-red-500 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-red-500 mb-1",children:"TBML Risk Assessment"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:d.tbml_assessment})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(M,{variant:"outline",className:"flex-1",onClick:re,children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.jsx(M,{variant:"outline",onClick:()=>c(null),children:e.jsx(Lt,{className:"h-4 w-4"})})]})]})]}):e.jsx($,{children:e.jsxs(U,{className:"p-12 text-center",children:[e.jsx("div",{className:"h-16 w-16 rounded-xl bg-muted flex items-center justify-center mx-auto mb-4",children:e.jsx(Bt,{className:"h-8 w-8 text-muted-foreground"})}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"Enter Price Details"}),e.jsx("p",{className:"text-muted-foreground text-sm max-w-sm mx-auto",children:"Search for a commodity and enter the price from your trade document to verify against market data."})]})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-primary flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground mb-1",children:"How it works"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[e.jsx("li",{children:"â€¢ Compares your price against real-time market data"}),e.jsx("li",{children:"â€¢ Sources: World Bank, FRED, LME, industry indices"}),e.jsx("li",{children:"â€¢ Â±15% variance = OK, Â±30% = Warning, 50%+ = TBML risk"})]})]})]})})})]})]})})]})]})}const KNe="";function YNe(){const{toast:t}=et(),[s,a]=m.useState([]),[r,n]=m.useState(!1),[i,l]=m.useState(0),[o,d]=m.useState(null),c=m.useCallback(y=>{const N=Array.from(y.target.files||[]).map((C,_)=>({id:`${Date.now()}-${_}`,file:C,status:"pending"}));a(C=>[...C,...N].slice(0,20))},[]),u=m.useCallback(y=>{y.preventDefault();const N=Array.from(y.dataTransfer.files).map((C,_)=>({id:`${Date.now()}-${_}`,file:C,status:"pending"}));a(C=>[...C,...N].slice(0,20))},[]),h=y=>{a(b=>b.filter(N=>N.id!==y))},x=()=>{a([]),d(null),l(0)},g=async()=>{if(s.length===0)return;n(!0),l(0),d(null);const y=[...s];let b=0,N=0,C=0,_=0;for(let A=0;A<y.length;A++){const k=y[A];y[A]={...k,status:"processing"},a([...y]);try{const E=new FormData;E.append("file",k.file),E.append("auto_verify","true");const D=await fetch(`${KNe}/price-verify/extract`,{method:"POST",body:E});if(!D.ok)throw new Error(await D.text());const R=await D.json();y[A]={...k,status:"completed",result:R},R.summary&&(b+=R.summary.passed||0,N+=R.summary.warnings||0,C+=R.summary.failed||0,_+=R.summary.tbml_flags||0)}catch(E){y[A]={...k,status:"error",error:E.message},C++}a([...y]),l((A+1)/y.length*100)}d({total:y.length,passed:b,warnings:N,failed:C,tbmlFlags:_}),n(!1),t({title:"Batch Processing Complete",description:`Processed ${y.length} documents.`})},j=()=>{const y=["File","Status","Items","Passed","Warnings","Failed","TBML Flags"],b=s.map(k=>{if(k.status==="completed"&&k.result?.summary){const E=k.result.summary;return[k.file.name,"Completed",E.total_items,E.passed,E.warnings,E.failed,E.tbml_flags]}return[k.file.name,k.status,"-","-","-","-","-"]}),N=[y,...b].map(k=>k.join(",")).join(`
apps\web\dist\assets\index-Bz84JA8h.js:303:              `,children:[e.jsx("input",{...ge()}),e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"bg-exporter/10 p-4 rounded-full",children:e.jsx(Hs,{className:"w-8 h-8 text-exporter"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground mb-2",children:he?"Drop files here...":"Upload Documents"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Drag and drop your files here, or click to browse"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 text-xs text-muted-foreground",children:od.map(dt=>e.jsx(Q,{variant:"outline",children:dt.label},dt.value))})]}),e.jsxs(M,{variant:"outline",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Choose Files"]})]})]}),a.length>0&&e.jsxs("div",{className:"mt-6 space-y-3",children:[e.jsxs("h4",{className:"font-semibold text-foreground",children:["Uploaded Files (",a.length,")"]}),a.map(dt=>e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-secondary/20 rounded-lg border border-gray-200/50",children:[e.jsx("div",{className:"flex-shrink-0",children:dt.status==="completed"?e.jsx("div",{className:"bg-success/10 p-2 rounded-lg",children:e.jsx(Gs,{className:"w-5 h-5 text-success"})}):dt.status==="error"?e.jsx("div",{className:"bg-destructive/10 p-2 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-destructive"})}):e.jsx("div",{className:"bg-exporter/10 p-2 rounded-lg",children:e.jsx(Be,{className:"w-5 h-5 text-exporter"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h5",{className:"font-medium text-foreground truncate",children:dt.name}),e.jsx("span",{className:"text-sm text-muted-foreground",children:st(dt.size)})]}),dt.status==="uploading"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:dt.progress,className:"h-1"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Uploading... ",Math.round(dt.progress),"%"]})]}),dt.status==="completed"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Oe,{className:"w-4 h-4 text-success"}),e.jsx("span",{className:"text-xs text-success",children:"Upload complete"}),dt.detectedType&&dt.detectedConfidence&&dt.detectedConfidence>.6&&e.jsxs(Q,{variant:"outline",className:"text-xs bg-blue-50 text-blue-700 border-blue-200",children:["Auto-detected: ",od.find(we=>we.value===dt.detectedType)?.label||dt.detectedType,dt.detectedConfidence>=.8&&" âœ“"]})]}),dt.relevanceWarning&&e.jsxs("div",{className:"flex items-start gap-2 p-2 rounded bg-amber-50 border border-amber-200",children:[e.jsx(Ve,{className:"w-4 h-4 text-amber-500 mt-0.5 shrink-0"}),e.jsx("span",{className:"text-xs text-amber-700",children:dt.relevanceWarning})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx(Z,{className:"text-xs text-muted-foreground whitespace-nowrap",children:"Document Type:"}),e.jsxs(Te,{value:dt.documentType??"other",onValueChange:we=>nt(dt.id,we),children:[e.jsx(Pe,{className:Le("h-7 text-xs w-48",R&&!dt.documentType&&"border-destructive focus-visible:ring-destructive",dt.relevanceWarning&&"border-amber-300"),children:e.jsx(Fe,{placeholder:"Select type"})}),e.jsxs(De,{className:"max-h-80 overflow-y-auto",children:[e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground bg-muted/50",children:"Core Documents"}),od.filter(we=>we.category===Ut.CORE).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Transport Documents"}),od.filter(we=>we.category===Ut.TRANSPORT).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Inspection & Quality"}),od.filter(we=>we.category===Ut.INSPECTION).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Health & Agricultural"}),od.filter(we=>we.category===Ut.HEALTH).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Financial Documents"}),od.filter(we=>we.category===Ut.FINANCIAL).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Customs & Trade"}),od.filter(we=>we.category===Ut.CUSTOMS).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value)),e.jsx("div",{className:"px-2 py-1.5 text-xs font-semibold text-muted-foreground border-t mt-1 bg-muted/50",children:"Other"}),od.filter(we=>we.category===Ut.OTHER).map(we=>e.jsxs(K,{value:we.value,children:[we.emoji," ",we.label]},we.value))]})]}),R&&!dt.documentType&&e.jsx("p",{className:"text-xs text-destructive",children:"Select the correct document category."})]})]}),dt.status==="error"&&e.jsx("p",{className:"text-xs text-destructive",children:"Upload failed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>ht(dt),disabled:dt.status==="uploading",title:"Preview file",children:e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>at(dt.id),disabled:dt.status==="uploading",children:e.jsx(ia,{className:"w-4 h-4"})})]})]},dt.id))]})]})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Document Validation"}),e.jsx(ue,{children:"Validate your LC and trade documents for compliance and completeness"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-secondary/20 rounded-lg p-4 border border-gray-200/50",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-3",children:"Upload Summary"}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"LC Number:"}),e.jsx("p",{className:"font-medium",children:n||"Not provided"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Documents:"}),e.jsxs("p",{className:"font-medium",children:[Wt.length," files uploaded"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Size:"}),e.jsx("p",{className:"font-medium",children:st(Wt.reduce((dt,we)=>dt+we.size,0))})]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-center justify-between",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:Rt?e.jsx("span",{className:"text-success",children:"âœ“ Ready to validate your export documents"}):e.jsx("span",{children:"Please upload documents and provide LC number to continue"})}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx(M,{variant:"outline",onClick:Re,disabled:x,children:u?"Update Draft":"Save Draft"}),e.jsx(M,{onClick:Ss,disabled:!Rt,className:"hover:opacity-90 bg-gradient-exporter",children:ze?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full mr-2"}),"Validating..."]}):"Validate Documents"})]})})]}),ze&&e.jsx(FBe,{fileCount:Wt.length}),d&&e.jsx("div",{className:"mt-6",children:e.jsx(iBe,{onRetry:()=>{c(!1),Ss()},onCancel:()=>c(!1)})})]})})]})]}),e.jsx(gBe,{open:P.open,onClose:()=>T({open:!1}),blockReason:P.blockReason,error:P.error,detectedDocuments:P.detectedDocuments,lcDetection:P.lcDetection})]})}function RBe({open:t,onClose:s,message:a,quota:r,nextActionUrl:n}){const i=d=>{d||s()},l=r&&r.limit!==null?`${r.used.toLocaleString()} of ${r.limit.toLocaleString()} checks used this period`:r?`${r.used.toLocaleString()} checks used`:null,o=n||"/pricing";return e.jsx(wt,{open:t,onOpenChange:i,children:e.jsxs(yt,{className:"sm:max-w-lg",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Usage Limit Reached"}),e.jsx(_t,{children:a})]}),e.jsxs("div",{className:"space-y-4 py-2",children:[l&&e.jsxs("div",{className:"p-4 rounded-lg bg-muted",children:[e.jsx(Q,{variant:"secondary",className:"mb-2",children:"Current cycle"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l}),r?.remaining!==null&&r.remaining<=0&&e.jsx("div",{className:"text-sm text-destructive mt-2",children:"No validations remaining in this cycle."})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upgrade your plan or purchase additional LC checks to continue validating documents."})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end sm:space-x-3 space-y-3 sm:space-y-0 pt-2",children:[e.jsx(M,{variant:"outline",onClick:s,className:"flex-1 sm:flex-none",children:"Close"}),e.jsx(M,{asChild:!0,className:"flex-1 sm:flex-none",children:e.jsx("a",{href:o,children:"View upgrade options"})})]})]})})}const OBe=[{value:"lc",label:"Draft LC (PDF)"},{value:"swift",label:"SWIFT Message"},{value:"application",label:"LC Application Form"},{value:"proforma",label:"Proforma Invoice (PI)"},{value:"other",label:"Other Document"}],IBe=[{value:"invoice",label:"Commercial Invoice"},{value:"packing",label:"Packing List"},{value:"bill_of_lading",label:"Bill of Lading"},{value:"certificate_origin",label:"Certificate of Origin"},{value:"insurance",label:"Insurance Certificate"},{value:"other",label:"Other Trade Documents"}],f0=[{id:"upload",label:"Uploading documents",duration:2,icon:Hs},{id:"ocr",label:"Extracting text (OCR)",duration:35,icon:Be},{id:"validation",label:"Running compliance checks",duration:5,icon:Gs},{id:"sanctions",label:"Screening parties",duration:10,icon:Ve},{id:"complete",label:"Building results",duration:3,icon:Oe}];function LBe({fileCount:t,variant:s="importer"}){const[a,r]=m.useState(0),[n]=m.useState(()=>Date.now());m.useEffect(()=>{const x=setInterval(()=>{r(Math.floor((Date.now()-n)/1e3))},500);return()=>clearInterval(x)},[n]);let i=0,l=0;for(let x=0;x<f0.length;x++){const g=f0[x],j=g.id==="ocr"?g.duration*Math.max(1,t*.7):g.duration;if(a<i+j){l=x;break}i+=j,l=x}const o=f0.reduce((x,g)=>x+(g.id==="ocr"?g.duration*Math.max(1,t*.7):g.duration),0),d=Math.min(95,a/o*100),c=f0[l],u=c.icon,h=s==="importer"?"importer":"exporter";return e.jsxs("div",{className:`bg-${h}/5 border border-${h}/20 rounded-lg p-4 space-y-4`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:`animate-spin w-5 h-5 border-2 border-${h} border-t-transparent rounded-full`}),e.jsx(u,{className:`absolute inset-0 w-3 h-3 m-auto text-${h}/60`})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("span",{className:`font-medium text-${h}`,children:[c.label,"..."]}),e.jsxs("span",{className:"text-sm text-muted-foreground ml-2",children:["(",a,"s)"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:d,className:"h-2"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Processing ",t," document",t!==1?"s":""]}),e.jsxs("span",{children:["~",Math.max(0,Math.ceil(o-a)),"s remaining"]})]})]}),e.jsx("div",{className:"flex gap-1",children:f0.map((x,g)=>{const j=g<l,y=g===l;return e.jsx("div",{className:`flex-1 h-1 rounded-full transition-colors ${j?`bg-${h}`:y?`bg-${h}/50`:"bg-gray-200"}`,title:x.label},x.id)})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Analyzing LC terms, checking compliance with UCP600 & ISBP745, and screening parties."})]})}function Jee({embedded:t=!1,onComplete:s}={}){const[a,r]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(""),[d,c]=m.useState(""),[u,h]=m.useState(!1),[x,g]=m.useState("draft"),[j,y]=m.useState(null),[b,N]=m.useState(!1),{toast:C}=et(),[_]=zs(),{validate:A,isLoading:k}=WF(),{createDraft:E,getDraft:D,updateDraft:R,markDraftSubmitted:O,isLoading:P}=vC(),T=zt(),[B,G]=m.useState(null),[q,z]=m.useState(!1);m.useEffect(()=>{const ge=_.get("draft_id"),he=_.get("type");ge&&he&&(N(!0),y(ge),he==="draft"?g("draft"):he==="supplier"&&g("supplier"),D(ge).then(_e=>{o(_e.lc_number||""),c(_e.notes||"");const at=_e.uploaded_docs.map(nt=>({id:nt.id,file:nt.file||new File([],nt.name),name:nt.name,size:nt.size,type:nt.type,status:"completed",progress:100,documentType:nt.documentType}));_e.draft_type==="importer_draft"?r(at):_e.draft_type==="importer_supplier"&&i(at),C({title:"Draft Loaded",description:`Resumed working on ${_e.draft_type==="importer_draft"?"Draft LC Risk":"Supplier Document"} draft with ${_e.uploaded_docs.length} files.`})}).catch(_e=>{console.error("Failed to load draft:",_e),C({title:"Failed to Load Draft",description:"Could not load the saved draft. Please try again.",variant:"destructive"})}).finally(()=>{N(!1)}))},[_,D,C]);const H=async ge=>{const _e=(ge==="draft"?a:n).filter(at=>at.status==="completed");if(_e.length===0&&!l.trim()){C({title:"Nothing to Save",description:"Please upload some files or enter an LC number before saving a draft.",variant:"destructive"});return}try{const at=_e.map(ht=>({id:ht.id,name:ht.name,size:ht.size,type:ht.type,documentType:ht.documentType,file:ht.file})),nt=ge==="draft"?"importer_draft":"importer_supplier";let st;j?st=await R(j,{lc_number:l.trim()||void 0,notes:d.trim()||void 0,files:at}):(st=await E({draft_type:nt,lc_number:l.trim()||void 0,notes:d.trim()||void 0,files:at}),y(st.draft_id)),C({title:"Draft Saved",description:"Your progress has been saved. You can resume later from your dashboard."}),t||T("/lcopilot/importer-dashboard")}catch(at){console.error("Failed to save draft:",at),C({title:"Failed to Save Draft",description:at.message||"Could not save the draft. Please try again.",variant:"destructive"})}},le=ge=>m.useCallback(he=>{const _e=he.map(at=>({id:Math.random().toString(36).substring(2,11),file:at,name:at.name,size:at.size,type:at.type,status:"pending",progress:0}));ge==="draft"?r(at=>[...at,..._e]):i(at=>[...at,..._e]),_e.forEach(at=>{ye(at.id,ge)})},[]),{getRootProps:Y,getInputProps:te,isDragActive:ne}=vg({onDrop:le("draft"),accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxFiles:5,maxSize:10*1024*1024}),{getRootProps:ae,getInputProps:re,isDragActive:xe}=vg({onDrop:le("supplier"),accept:{"application/pdf":[".pdf"],"image/jpeg":[".jpg",".jpeg"],"image/png":[".png"]},maxFiles:10,maxSize:10*1024*1024}),ye=(ge,he)=>{const _e=he==="draft"?r:i;_e(st=>st.map(ht=>ht.id===ge?{...ht,status:"uploading"}:ht));let at=0;const nt=setInterval(()=>{at+=Math.random()*30,at>=100?(at=100,clearInterval(nt),_e(st=>st.map(ht=>ht.id===ge?{...ht,status:"completed",progress:100}:ht))):_e(st=>st.map(ht=>ht.id===ge?{...ht,progress:at}:ht))},200)},ke=(ge,he)=>{he==="draft"?r(_e=>_e.filter(at=>at.id!==ge)):i(_e=>_e.filter(at=>at.id!==ge))},ze=(ge,he,_e)=>{(he==="draft"?r:i)(nt=>nt.map(st=>st.id===ge?{...st,documentType:_e}:st))},ce=ge=>{if(ge===0)return"0 Bytes";const he=1024,_e=["Bytes","KB","MB","GB"],at=Math.floor(Math.log(ge)/Math.log(he));return parseFloat((ge/Math.pow(he,at)).toFixed(2))+" "+_e[at]},Re=ge=>{if(ge.file&&ge.file.size>0){const he=URL.createObjectURL(ge.file);window.open(he,"_blank"),setTimeout(()=>{URL.revokeObjectURL(he)},1e3)}else C({title:"Preview Unavailable",description:"This file cannot be previewed.",variant:"destructive"})},ie=async ge=>{const _e=(ge==="draft"?a:n).filter(nt=>nt.status==="completed");if(_e.length===0){C({title:"No Files Selected",description:`Please upload at least one ${ge==="draft"?"draft LC":"supplier"} document to proceed.`,variant:"destructive"});return}if(_e.filter(nt=>!nt.documentType).length>0){C({title:"Document Types Required",description:"Please select document types for all uploaded files before processing.",variant:"destructive"});return}if(!l.trim()){C({title:"LC Number Required",description:"Please enter the LC number before processing.",variant:"destructive"});return}h(!0);try{const nt={};_e.forEach(Rt=>{Rt.documentType&&(nt[Rt.name]=Rt.documentType)});const st=ge==="draft"?"draft-lc-risk":"supplier-document-check";console.log("Starting validation request...");const ht=await A({files:_e.map(Rt=>Rt.file),lcNumber:l,notes:d,documentTags:nt,userType:"importer",workflowType:st});C({title:ge==="draft"?"LC Risk Analysis Started":"Compliance Check Started",description:ge==="draft"?"Your draft LC is being analyzed for risks and unfavorable terms.":"Your supplier documents are being checked against LC requirements."}),t&&s?setTimeout(()=>{s({jobId:ht.jobId,lcNumber:l,mode:ge})},500):T(`/import/results/${ht.jobId}?mode=${ge}`)}catch(nt){if(console.error("Validation failed:",nt),console.log("Error type:",nt.type),console.log("Error code:",nt.code),console.log("Error name:",nt.name),console.log("Error details:",nt),nt.type==="quota"){G(nt),z(!0);return}if(nt.type==="network"||nt.type==="server"||nt.code==="ERR_NETWORK"||nt.name==="AxiosError"||!nt.type){console.log("API unavailable, redirecting to demo results...");const ht=`demo-${ge}-${Date.now()}`;if(C({title:"Demo Mode",description:"API unavailable - showing demo results with sample data."}),j)try{await O(j),console.log("âœ… Draft marked as submitted:",j)}catch(Ss){console.error("Failed to mark draft as submitted:",Ss)}t&&s?setTimeout(()=>{s({jobId:ht,lcNumber:l,mode:ge})},500):T(`/import/results/${ht}?mode=${ge}`);return}if(nt.type==="rate_limit")C({title:"Rate Limit Exceeded",description:nt.message||"Too many requests. Please try again later.",variant:"destructive"});else if(nt.type==="validation")C({title:"Validation Failed",description:nt.message||"Document validation failed. Please check your files.",variant:"destructive"});else{console.log("Unhandled error, falling back to demo mode...");const ht=`demo-${ge}-${Date.now()}`;if(C({title:"Demo Mode",description:"Processing unavailable - showing demo results with sample data."}),j)try{await O(j),console.log("âœ… Draft marked as submitted:",j)}catch(Ss){console.error("Failed to mark draft as submitted:",Ss)}t&&s?setTimeout(()=>{s({jobId:ht,lcNumber:l,mode:ge})},500):T(`/import/results/${ht}?mode=${ge}`);return}}finally{h(!1)}},Ne=(ge,he,_e,at,nt,st,ht,Ss)=>{const Wt=he.filter(Rt=>Rt.status==="completed");return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{..._e(),className:`
apps\web\dist\assets\index-Bz84JA8h.js:462:`),suggestions:ve}:null},[Tl]),Np=Dn.length>0,Id=Tt?.lc_structured,Ld=(Tt?.lc_type??Id?.lc_type??"unknown").toLowerCase();Tt?.lc_type_reason??Id?.lc_type_reason;const wp=Tt?.lc_type_confidence??Id?.lc_type_confidence,Vu=typeof wp=="number"?Math.round(wp*100):null;Tt?.lc_type_source??Id?.lc_type_source;const xv={export:"Export LC",import:"Import LC",sight:"Sight LC",usance:"Usance LC",deferred:"Deferred Payment LC",transferable:"Transferable LC",standby:"Standby LC",irrevocable:"Irrevocable LC",unknown:"Unknown"}[Ld]??Ld.charAt(0).toUpperCase()+Ld.slice(1)+" LC",Mh=m.useMemo(()=>{const ve=new Map;return Ir.forEach(xt=>{xt.name&&ve.set(xt.name,{status:xt.status,type:xt.type})}),ve},[Ir]),Wu=m.useMemo(()=>Ir.reduce((ve,xt)=>{const Ct=xt.status??"warning";return Ct in ve||(ve[Ct]=0),ve[Ct]+=1,ve},{success:0,warning:0,error:0}),[Ir]),Hu=m.useMemo(()=>Dn.reduce((ve,xt)=>{const Ct=qP(xt.severity);return ve[Ct]=(ve[Ct]||0)+1,ve},{critical:0,major:0,minor:0}),[Dn]),Bh=m.useMemo(()=>nt==="all"?Dn:Dn.filter(ve=>qP(ve.severity)===nt),[Dn,nt]),zc=!!(j&&!fs&&C&&!(b||_||O)),{successCount:Fl,errorCount:ei,warningCount:cl,successRate:Is,extractionRate:or}=m.useMemo(()=>{const ve=Yi?.document_status_distribution??Oa?.document_status??Oa?.status_counts??{},xt=typeof ve.success=="number"?ve.success:0,Ct=typeof ve.warning=="number"?ve.warning:0,qt=typeof ve.error=="number"?ve.error:0,Ua=xt>0||Ct>0||qt>0;let cr,xi,hl;if(Ua)cr=xt,xi=qt,hl=Ct;else{const Ml=Ir.filter(Kc=>Kc.status==="success").length,pv=typeof Oa?.successful_extractions=="number"?Oa.successful_extractions:void 0;cr=Ml>0?Ml:pv??Ml,xi=typeof Oa?.failed_extractions=="number"?Oa.failed_extractions:Ir.filter(Kc=>(Kc.status??"").toLowerCase()==="error").length,hl=typeof Wu.warning=="number"?Wu.warning:Ir.filter(Kc=>Kc.status==="warning").length}const Wa=Gr>0?Math.round(cr/Gr*100):0,pi=typeof Oa?.successful_extractions=="number"?Oa.successful_extractions:Gr,Ll=Gr>0?Math.round(pi/Gr*100):100;return{successCount:cr,errorCount:xi,warningCount:hl,successRate:Wa,extractionRate:Ll}},[Ir,Oa?.successful_extractions,Oa?.failed_extractions,Oa?.document_status,Oa?.status_counts,Yi?.document_status_distribution,Wu.warning,Gr]),Rl=m.useMemo(()=>Yi?.compliance_score??Yi?.lc_compliance_score??Oa?.compliance_rate??Is,[Yi?.compliance_score,Yi?.lc_compliance_score,Oa?.compliance_rate,Is]),dl=Rl,ul=m.useMemo(()=>Tt?lBe(Tt):null,[Tt]),qc=m.useMemo(()=>Yi?.document_risk??Ir.map(ve=>({document_id:ve.documentId,filename:ve.name,risk:ve.issuesCount>=3?"high":ve.issuesCount>0?"medium":"low"})),[Yi?.document_risk,Ir]),Ts=m.useMemo(()=>or,[or]),ka=m.useMemo(()=>Math.max(0,Rl-cl*5),[Rl,cl]),$h=m.useMemo(()=>[Fl+"/"+(Gr||0)+" documents extracted successfully",hi+" issue"+(hi===1?"":"s")+" detected","Compliance score "+Rl+"%"],[Fl,Gr,hi,Rl]),Vc=ei>0?"error":cl>0||hi>0?"warning":"success",Fn=Tt?.customs_pack,Wc=Fn?.ready??!1,Hc=Tt?.processing_summary,Zi=Tt?.analytics,Er=Hc?.processing_time_display||Zi?.processing_time_display||"-",Ol=m.useMemo(()=>!Xe||aa?!1:ln?ln.can_submit&&ln.high_severity_discrepancies===0:hi===0,[Xe,ln,aa,hi]),ra=fs?.contractWarnings??[],Gc=ra.length>0,Rn=m.useMemo(()=>{const ve=ra.filter(qt=>qt.severity==="error"),xt=ra.filter(qt=>qt.severity==="warning"),Ct=ra.filter(qt=>qt.severity==="info");return{errors:ve,warnings:xt,infos:Ct}},[ra]);if(!fs){if(!j)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh] p-6",children:e.jsxs($,{className:"max-w-xl mx-auto text-center",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Upload Required"}),e.jsx(ue,{children:"Upload an LC package from the Exporter Dashboard to see validation results."})]}),e.jsx(U,{children:e.jsx(M,{onClick:()=>d("/lcopilot/exporter-dashboard?section=upload"),children:"Go to Upload"})})]})});if(b||_||O){const xt=b?.message||O||_?.message||"Failed to load validation results.";return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs($,{className:"max-w-lg mx-auto",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Unable to load validation results"}),e.jsx(ue,{children:xt})]}),e.jsx(U,{className:"space-y-4",children:e.jsx(M,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})})]})})}const ve=y?.status?y.status.replace(/_/g," ").replace(/\b\w/g,xt=>xt.toUpperCase()):"Processing";return e.jsxs("div",{className:"min-h-[60vh] p-6",children:[e.jsxs("div",{className:"flex flex-col items-center justify-center space-y-4 pb-8",children:[e.jsx(ct,{className:"w-10 h-10 animate-spin text-primary"}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-lg font-semibold",children:"Validation in progress"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Current status: ",ve]})]})]}),zc&&lc()]})}if(!Tt)return null;function lc(){return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-6 md:grid-cols-2",children:[0,1].map(ve=>e.jsx($,{className:"border border-border/60 shadow-soft",children:e.jsxs(U,{className:"space-y-3 p-6",children:[e.jsx(pt,{className:"h-5 w-48"}),e.jsx(pt,{className:"h-4 w-full"}),e.jsx(pt,{className:"h-4 w-2/3"}),e.jsx(pt,{className:"h-4 w-1/2"})]})},`overview-skeleton-${ve}`))}),e.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:[0,1].map(ve=>e.jsx($,{className:"border border-border/60 shadow-soft",children:e.jsxs(U,{className:"space-y-4 p-6",children:[e.jsx(pt,{className:"h-5 w-56"}),e.jsx(pt,{className:"h-4 w-32"}),e.jsx(pt,{className:"h-4 w-full"}),e.jsx(pt,{className:"h-4 w-5/6"}),e.jsx(pt,{className:"h-4 w-1/2"})]})},`document-skeleton-${ve}`))}),e.jsx("div",{className:"grid gap-4 lg:grid-cols-2",children:[0,1].map(ve=>e.jsx($,{className:"border border-border/60 shadow-soft",children:e.jsxs(U,{className:"space-y-3 p-6",children:[e.jsx(pt,{className:"h-5 w-64"}),e.jsx(pt,{className:"h-4 w-full"}),e.jsx(pt,{className:"h-4 w-2/3"})]})},`issue-skeleton-${ve}`))}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[0,1].map(ve=>e.jsx($,{className:"border border-border/60 shadow-soft",children:e.jsxs(U,{className:"space-y-4 p-6",children:[e.jsx(pt,{className:"h-5 w-40"}),e.jsx(pt,{className:"h-4 w-full"}),e.jsx(pt,{className:"h-4 w-4/5"}),e.jsx(pt,{className:"h-4 w-2/5"})]})},`analytics-skeleton-${ve}`))})]})}const Gu=()=>fo?.summary?e.jsxs($,{className:"shadow-soft border border-primary/20 bg-primary/5",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary/20",children:e.jsx(Xm,{className:"w-5 h-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:["AI Risk Insights",e.jsx(Q,{variant:"outline",className:"text-xs bg-primary/10 text-primary border-primary/30",children:"AI-Powered"})]}),e.jsx(ue,{children:"Context-aware guidance generated for this LC package."})]})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsx("p",{className:"text-sm text-foreground leading-relaxed",children:fo.summary}),Array.isArray(fo.suggestions)&&fo.suggestions.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Recommended Actions"}),e.jsx("ul",{className:"space-y-2",children:fo.suggestions.map((ve,xt)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Oe,{className:"w-4 h-4 text-primary mt-0.5 flex-shrink-0"}),e.jsx("span",{children:ve})]},xt))})]}),fo.rule_references&&fo.rule_references.length>0&&e.jsx("div",{className:"pt-2 border-t border-primary/20",children:e.jsxs("p",{className:"text-xs text-muted-foreground",children:[e.jsx("span",{className:"font-medium",children:"References:"})," ",fo.rule_references.map((ve,xt)=>e.jsxs("span",{children:[xt>0&&", ",typeof ve=="string"?ve:ve.rule_code]},xt))]})})]})]}):null,Ku=()=>po.length?e.jsxs($,{className:"shadow-soft border border-dashed border-muted",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Technical References"}),e.jsx(ue,{children:"Underlying rule citations retained for audit (hidden from SME view)."})]}),e.jsx(U,{className:"space-y-3 text-sm text-muted-foreground",children:po.map((ve,xt)=>e.jsxs("div",{className:"p-3 rounded-lg bg-secondary/20 border border-secondary/40",children:[e.jsx("p",{className:"font-medium text-foreground",children:ve.title||ve.rule||`Rule ${xt+1}`}),e.jsxs("p",{className:"text-xs uppercase tracking-wide mt-1",children:["Severity: ",ve.severity||"reference"," - ",ve.ruleset_domain||"rulebook"]}),ve.article&&e.jsxs("p",{className:"text-xs mt-1",children:["Article: ",e.jsx("span",{className:"font-medium",children:ve.article})]}),ve.message&&e.jsx("p",{className:"mt-2",children:ve.message})]},xt))})]}):null,oc=Uc.length>0,Md=oc?Uc.map(ve=>({...ve,title:ve.title??"Milestone"})):[];Ir.map(ve=>{const Ct=qc.find(qt=>qt.document_id===ve.documentId||qt.filename===ve.name)?.risk??(ve.issuesCount>0?"medium":"low");return{name:ve.name,type:ve.type,status:ve.status,risk:Ct,issues:ve.issuesCount}}),Tt?.analytics;const cc=[{id:"bank-1",name:"Standard Chartered Bank"},{id:"bank-2",name:"HSBC Bank"},{id:"bank-3",name:"Citibank"},{id:"bank-4",name:"Deutsche Bank"}],Ji=async()=>{try{_e||await ca.mutateAsync(),await vr.mutateAsync()}catch{}},Il=ve=>{Ss(ve),Rt(!0)},ml=async()=>{if(!Xe){c({title:"Feature Disabled",description:"Bank submission is currently disabled.",variant:"destructive"});return}xe(!0)},Bd=()=>{if(!Re){c({title:"Bank Required",description:"Please select a bank.",variant:"destructive"});return}xe(!1),_e||ca.mutate(),ke(!0)},Es=()=>{if(!ge){c({title:"Confirmation Required",description:"Please confirm that the manifest contents are accurate.",variant:"destructive"});return}ke(!1),Xs.mutate({bank_id:ze||void 0,bank_name:Re,note:Ne||void 0})},on=t?"mx-auto w-full max-w-6xl py-4":"container mx-auto px-4 py-8 max-w-6xl";return e.jsxs("div",{className:t?"bg-transparent":"bg-background min-h-screen",children:[!t&&e.jsx("header",{className:"bg-card border-b border-gray-200",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pe,{to:"/lcopilot/exporter-dashboard",children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-exporter p-2 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Export LC Validation Results"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Review the results of your latest document validation"})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx("button",{onClick:()=>te("manual"),disabled:!j||C,className:"rounded-md border px-3 py-1 text-sm hover:bg-muted disabled:cursor-not-allowed disabled:opacity-60",children:C?"Fetching...":"Fetch Results"})})]})})}),e.jsxs("div",{className:on,children:[e.jsxs("div",{className:"mb-8",children:[ul?.isBlocked&&e.jsx(xBe,{state:ul,onRetry:()=>d("/lcopilot/exporter-dashboard?section=upload")}),e.jsx(h$e,{data:fs??null,lcTypeLabel:xv,lcTypeConfidence:Vu,packGenerated:Wc,overallStatus:Vc,actualIssuesCount:Dn.length,complianceScore:Rl}),Tt?.bank_profile&&e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(b$e,{profile:Tt.bank_profile}),Tt?.tolerances_applied&&Object.keys(Tt.tolerances_applied).length>0&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["â€¢ Tolerances applied: ",Object.keys(Tt.tolerances_applied).join(", ")]})]}),Tt?.bank_verdict&&e.jsx(f$e,{verdict:Tt.bank_verdict}),Tt?.extraction_confidence&&e.jsx(y$e,{confidence:Tt.extraction_confidence}),Tt?.amendments_available&&Tt.amendments_available.count>0&&e.jsx(N$e,{amendments:Tt.amendments_available,onDownloadMT707:ve=>{const xt=new Blob([ve.swift_mt707_text],{type:"text/plain"}),Ct=URL.createObjectURL(xt),qt=document.createElement("a");qt.href=Ct,qt.download=`MT707_Amendment_${ve.field.tag}.txt`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(Ct)},onDownloadISO20022:ve=>{if(!ve.iso20022_xml)return;const xt=new Blob([ve.iso20022_xml],{type:"application/xml"}),Ct=URL.createObjectURL(xt),qt=document.createElement("a");qt.href=Ct,qt.download=`ISO20022_trad002_Amendment_${ve.field.tag}.xml`,document.body.appendChild(qt),qt.click(),document.body.removeChild(qt),URL.revokeObjectURL(Ct)}})]}),e.jsxs(Os,{value:ne,onValueChange:ve=>{q7(ve)&&nn(ve)},className:"space-y-6",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-4",children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsxs(He,{value:"documents",children:["Documents (",Gr,")"]}),e.jsxs(He,{value:"discrepancies",className:"relative",children:["Issues (",hi,")",hi>0&&e.jsx("div",{className:"absolute -top-1 -right-1 w-2 h-2 bg-warning rounded-full"})]}),e.jsx(He,{value:"customs",children:"Customs Pack"})]}),e.jsxs(Qe,{value:"overview",className:"space-y-6",children:[Gc&&e.jsxs(zo,{variant:Rn.errors.length>0?"destructive":"default",className:"border-amber-500/50 bg-amber-500/5",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsxs(Tc,{className:"font-semibold",children:["Extraction Notice",Rn.errors.length>0&&e.jsxs(Q,{variant:"destructive",className:"ml-2 text-xs",children:[Rn.errors.length," critical"]}),Rn.warnings.length>0&&e.jsxs(Q,{variant:"outline",className:"ml-2 text-xs border-amber-500/50 text-amber-600",children:[Rn.warnings.length," warning",Rn.warnings.length>1?"s":""]})]}),e.jsxs(qo,{className:"mt-2",children:[e.jsxs("ul",{className:"space-y-1 text-sm",children:[Rn.errors.map((ve,xt)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(bs,{className:"w-3.5 h-3.5 mt-0.5 text-destructive shrink-0"}),e.jsx("span",{children:ve.message})]},`err-${xt}`)),Rn.warnings.map((ve,xt)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"w-3.5 h-3.5 mt-0.5 text-amber-500 shrink-0"}),e.jsx("span",{children:ve.message})]},`warn-${xt}`))]}),Rn.infos.length>0&&e.jsxs("details",{className:"mt-2 text-xs text-muted-foreground",children:[e.jsxs("summary",{className:"cursor-pointer",children:["Show ",Rn.infos.length," info message",Rn.infos.length>1?"s":""]}),e.jsx("ul",{className:"mt-1 space-y-0.5 pl-2",children:Rn.infos.map((ve,xt)=>e.jsxs("li",{children:["â€¢ ",ve.message]},`info-${xt}`))})]})]})]}),e.jsxs("div",{className:Le("grid gap-6",oc?"md:grid-cols-2":"md:grid-cols-1"),children:[oc&&e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsxs(X,{className:"pb-3",children:[e.jsxs(ee,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"Export Processing Timeline"]}),e.jsx(ue,{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Real-time processing journey"})]}),e.jsx(U,{className:"space-y-4",children:Md.map((ve,xt)=>{const Ct=ve.status==="error"?"bg-destructive":ve.status==="warning"?"bg-warning":"bg-success";return e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${Ct}`}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:ve.title}),ve.timestamp?e.jsxs("p",{className:"text-xs text-muted-foreground",children:[hs(new Date(ve.timestamp),"HH:mm"),ve.description?` - ${ve.description}`:""]}):ve.description?e.jsx("p",{className:"text-xs text-muted-foreground",children:ve.description}):null]})]},`${ve.title}-${xt}`)})})]}),e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsxs(X,{className:"pb-3",children:[e.jsx(ee,{className:"text-lg font-semibold",children:"Export Document Statistics"}),e.jsx(ue,{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Validation health"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-3 bg-success/5 border border-success/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-success",children:Fl}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Verified"})]}),e.jsxs("div",{className:"text-center p-3 bg-warning/5 border border-warning/20 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-warning",children:hi}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Warnings"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"LC Compliance:"}),e.jsxs("span",{className:`font-medium ${dl>=70?"text-success":dl>=30?"text-warning":"text-destructive"}`,children:[dl,"%"]})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Customs Ready:"}),e.jsx("span",{className:`font-medium ${ka>=90?"text-success":"text-warning"}`,children:ka>=90?"Yes":"Review"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Bank Ready:"}),e.jsx("span",{className:`font-medium ${Vc==="success"?"text-success":"text-warning"}`,children:Vc==="success"?"Ready":"Review needed"})]})]}),Wc&&e.jsxs("div",{className:"p-3 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-primary",children:"Customs-Ready Pack Generated"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All documents bundled for smooth customs clearance"})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Processing Performance"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Document Extraction"}),e.jsxs("span",{className:"text-sm font-medium",children:[Ts,"%"]})]}),e.jsx(es,{value:Ts,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"LC Compliance"}),e.jsxs("span",{className:"text-sm font-medium",children:[dl,"%"]})]}),e.jsx(es,{value:dl,className:"h-2"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm",children:"Customs Readiness"}),e.jsxs("span",{className:"text-sm font-medium",children:[ka,"%"]})]}),e.jsx(es,{value:ka,className:"h-2"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 pt-2",children:[e.jsxs("div",{className:"text-center p-2 bg-success/5 border border-success/20 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-success",children:Er}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Processing Time"})]}),e.jsxs("div",{className:"text-center p-2 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Gr}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Documents"})]})]})]})]}),e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsx(X,{className:"pb-3",children:e.jsxs(ee,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(io,{className:"w-5 h-5"}),"Document Status"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-success rounded-full"}),e.jsx("span",{className:"text-sm",children:"Verified"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[Fl," (",Gr?Math.round(Fl/Gr*100):0,"%)"]})]}),cl>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-warning rounded-full"}),e.jsx("span",{className:"text-sm",children:"With Warnings"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[cl," (",Gr?Math.round(cl/Gr*100):0,"%)"]})]}),ei>0&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 bg-destructive rounded-full"}),e.jsx("span",{className:"text-sm",children:"With Errors"})]}),e.jsxs("span",{className:"text-sm font-medium",children:[ei," (",Gr?Math.round(ei/Gr*100):0,"%)"]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-gradient-to-r from-primary/5 to-primary/10 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vt,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm font-medium text-primary",children:"Performance Insights"})]}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:$h.slice(0,3).map((ve,xt)=>e.jsxs("li",{children:["â€¢ ",ve]},xt))})]})]})]})]})]}),e.jsxs(Qe,{value:"customs",className:"space-y-6",children:[e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsxs(X,{className:"pb-3",children:[e.jsxs(ee,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(Ps,{className:"w-5 h-5"}),"Customs Pack"]}),e.jsx(ue,{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Manifest, readiness, and downloads"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsxs("div",{className:"p-4 rounded-lg border border-border/60 space-y-2",children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Status"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Fa,{status:Wc?"success":"warning",children:Wc?"Ready":"Pending"}),e.jsx(Q,{variant:"outline",children:Fn?.format??"zip"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Wc?"Customs pack generated and ready to download.":"Generate your customs pack after resolving issues."})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border/60 space-y-2",children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Readiness"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:Le("text-2xl font-semibold",ka>=80?"text-success":ka>=50?"text-warning":"text-destructive"),children:[ka,"%"]}),e.jsx(Q,{variant:"outline",children:"Customs Ready Score"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ka>=80?"Documents are ready for customs clearance.":ka>=50?"Some issues need review before customs clearance.":"Critical issues must be resolved before customs clearance."})]}),e.jsxs("div",{className:"p-4 rounded-lg border border-border/60 space-y-2",children:[e.jsx("p",{className:"text-xs uppercase text-muted-foreground tracking-wide",children:"Actions"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs(M,{size:"sm",variant:_e?"outline":"default",className:"w-full",onClick:()=>ca.mutate(),disabled:ca.isPending,children:[e.jsx(Lt,{className:Le("w-4 h-4 mr-2",ca.isPending&&"animate-spin")}),ca.isPending?"Generating...":"Generate Customs Pack"]}),_e&&e.jsxs(M,{size:"sm",className:"w-full bg-emerald-600 hover:bg-emerald-700 text-white",onClick:Ji,disabled:vr.isPending,children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),vr.isPending?"Downloading...":"Download Customs Pack"]}),Ol&&Xe&&e.jsx(M,{size:"sm",className:"w-full bg-blue-600 hover:bg-blue-700 text-white",onClick:ml,disabled:Xs.isPending||aa,children:Xs.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"w-4 h-4 mr-2"}),"Submit to Bank"]})}),e.jsx(M,{size:"sm",variant:"outline",className:"w-full",onClick:()=>ke(!0),disabled:!_e,children:"Preview Manifest"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Manifest"}),_e&&e.jsxs(Q,{variant:"outline",className:"text-xs bg-emerald-500/10 text-emerald-600 border-emerald-500/30",children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"Generated"]})]}),_e?e.jsxs("div",{className:"rounded-lg border border-border/60 p-4 space-y-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"LC Number"}),e.jsx("p",{className:"font-medium",children:_e.lc_number})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground uppercase tracking-wide",children:"Generated"}),e.jsx("p",{className:"font-medium",children:hs(new Date(_e.generated_at),"MMM d, yyyy HH:mm")})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:["Documents Included (",_e.documents.length,")"]}),e.jsx("ul",{className:"divide-y divide-border/60 rounded-lg border border-border/60",children:_e.documents.map((ve,xt)=>e.jsxs("li",{className:"flex items-center justify-between px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ve.name})]}),e.jsx(Q,{variant:"outline",children:MN(ve.type)})]},`${ve.name}-${xt}`))})]})]}):e.jsx($,{className:"border-dashed bg-muted/20",children:e.jsxs(U,{className:"py-8 text-center",children:[e.jsx(Ps,{className:"w-8 h-8 mx-auto mb-3 text-muted-foreground"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:"No manifest generated yet"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:'Click "Generate Customs Pack" above to create your customs manifest.'})]})})]})]})]}),e.jsxs($,{className:"shadow-soft border border-border/60",children:[e.jsxs(X,{className:"pb-3",children:[e.jsxs(ee,{className:"text-lg font-semibold flex items-center gap-2",children:[e.jsx(xn,{className:"w-5 h-5"}),"Submission History"]}),e.jsx(ue,{className:"text-xs uppercase tracking-[0.2em] text-muted-foreground",children:"Bank submission timeline"})]}),e.jsx(U,{children:Ds?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ct,{className:"w-8 h-8 mx-auto text-muted-foreground mb-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading submission history..."})]}):!Hr||Hr.items.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bs,{className:"w-10 h-10 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground mb-1",children:"No submissions yet"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Submit this LC to a bank to track its submission history"})]}):e.jsx("div",{className:"space-y-3",children:Hr.items.map(ve=>e.jsx(_$e,{submission:ve,validationSessionId:j||""},ve.id))})})]})]}),e.jsx(Qe,{value:"documents",className:"space-y-4",children:Ir.map(ve=>{const xt=Object.entries(ve.extractedFields||{}),Ct=xt.length>0,qt=ve.issuesCount??0;return e.jsxs($,{className:"shadow-soft border border-border/60 transition duration-200 hover:-translate-y-0.5 hover:border-primary/40",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-muted/50",children:e.jsx(Be,{className:"w-5 h-5 text-muted-foreground"})}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-lg font-semibold",children:ve.name}),e.jsx(ue,{className:"text-sm text-muted-foreground",children:MN(ve.type)})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[qt===0?e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-emerald-100 text-emerald-700 dark:bg-emerald-900/50 dark:text-emerald-300",children:[e.jsx(Oe,{className:"w-3.5 h-3.5"}),"Verified"]}):e.jsxs("span",{className:"inline-flex items-center gap-1.5 px-2.5 py-1 rounded-full text-xs font-medium bg-amber-100 text-amber-700 dark:bg-amber-900/50 dark:text-amber-300",children:[e.jsx(Ve,{className:"w-3.5 h-3.5"}),qt===1?"Minor Issues":`${qt} Issues`]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{ot({id:ve.id,name:ve.name,filename:ve.filename,type:ve.type,typeKey:ve.typeKey,status:ve.status,extractionStatus:ve.extractionStatus,issuesCount:ve.issuesCount,extractedFields:ve.extractedFields,ocrConfidence:ve.extractedFields?._extraction_confidence,sourceFormat:ve.extractedFields?._source_format,isElectronicBL:ve.extractedFields?._is_electronic_bl}),Ft(!0)},children:[e.jsx(Da,{className:"w-4 h-4 mr-2"}),"View Details"]})]})]})}),e.jsx(U,{children:Ct?ve.typeKey==="letter_of_credit"&&tr?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 flex-wrap",children:[e.jsx("p",{className:"text-sm font-semibold",children:"Letter of Credit Snapshot"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>dt(Ua=>!Ua),children:ys?"Hide raw JSON":"View raw JSON"})]}),e.jsxs("div",{className:"rounded-md border bg-card/50 p-4 space-y-4",children:[Tn.length>0&&e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:Tn}),ts.length>0&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Key Dates"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:ts})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[qu,bp]}),yp,Lh,Dl&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold mb-2",children:"Additional Conditions (47A)"}),e.jsx("ul",{className:"text-sm space-y-1.5 list-disc list-inside",children:k$e(Dl).map((Ua,cr)=>e.jsx("li",{className:"text-muted-foreground",children:Ua},cr))})]})]}),ys&&e.jsx("div",{className:"bg-gray-50 dark:bg-gray-900 p-4 rounded-md",children:e.jsx(la,{children:e.jsx(oa,{children:Object.entries(tr||{}).map(([Ua,cr])=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium capitalize w-1/3",children:Ua.replace(/([A-Z])/g," $1").trim()}),e.jsx(fe,{className:"text-sm",children:typeof cr=="object"&&cr!==null?JSON.stringify(cr,null,2):String(cr||"")})]},Ua))})})})]}):e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:xt.map(([Ua,cr])=>{const xi=o1(cr);return e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-xs text-muted-foreground font-medium capitalize",children:Ua.replace(/([A-Z])/g," $1").trim()}),e.jsx("p",{className:"text-sm font-medium text-foreground whitespace-pre-wrap break-words",children:xi})]},Ua)})}):e.jsx("div",{className:"rounded-md border border-dashed border-muted-foreground/30 p-4 text-sm text-muted-foreground",children:"This document could not be fully parsed. Preview text is available for manual review."})})]},ve.id)})}),e.jsx(Qe,{value:"discrepancies",className:"space-y-4",children:e.jsx(M$e,{hasIssueCards:Np,issueCards:Dn,filteredIssueCards:Bh,severityCounts:Hu,issueFilter:nt,setIssueFilter:st,documentStatusMap:Mh,renderAIInsightsCard:Gu,renderReferenceIssuesCard:Ku,lcNumber:gr,onDraftEmail:Il})})]}),e.jsx(G$e,{document:we,open:St,onOpenChange:Ft}),e.jsx(wt,{open:re,onOpenChange:xe,children:e.jsxs(yt,{className:"max-w-md",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-5 h-5"}),"Select Bank"]}),e.jsxs(_t,{children:["Choose the bank to submit LC ",gr," to"]})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bank-select",children:"Bank"}),e.jsxs(Te,{value:ze,onValueChange:ve=>{const xt=cc.find(Ct=>Ct.id===ve);ce(ve),ie(xt?.name||"")},children:[e.jsx(Pe,{id:"bank-select",children:e.jsx(Fe,{placeholder:"Select a bank"})}),e.jsx(De,{children:cc.map(ve=>e.jsx(K,{value:ve.id,children:ve.name},ve.id))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"submission-note",children:"Note (Optional)"}),e.jsx(Zt,{id:"submission-note",placeholder:"Add any notes for the bank...",value:Ne,onChange:ve=>Ue(ve.target.value),rows:3})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>xe(!1),children:"Cancel"}),e.jsx(M,{onClick:Bd,disabled:!Re,children:"Continue"})]})]})}),e.jsx(wt,{open:ye,onOpenChange:ke,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"w-5 h-5"}),"Review Manifest"]}),e.jsx(_t,{children:"Review the contents of your customs pack before submission"})]}),e.jsx("div",{className:"space-y-4 py-4",children:_e?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4 bg-muted rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"LC Number:"}),e.jsx("span",{className:"font-medium",children:_e.lc_number})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Generated:"}),e.jsx("span",{className:"font-medium",children:hs(new Date(_e.generated_at),"MMM d, yyyy 'at' HH:mm")})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Documents:"}),e.jsx("span",{className:"font-medium",children:_e.documents.length})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Documents Included:"}),e.jsx("div",{className:"border rounded-lg p-4 space-y-2 max-h-64 overflow-y-auto",children:_e.documents.map((ve,xt)=>e.jsxs("div",{className:"flex items-center justify-between text-sm py-2 border-b last:border-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:ve.name})]}),e.jsx(Q,{variant:"outline",children:MN(ve.type)})]},xt))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-4 border rounded-lg",children:[e.jsx(rr,{id:"manifest-confirm",checked:ge,onCheckedChange:ve=>he(ve===!0)}),e.jsx(Z,{htmlFor:"manifest-confirm",className:"cursor-pointer",children:"I confirm that the manifest contents are accurate and ready for submission"})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ct,{className:"w-8 h-8 mx-auto text-muted-foreground mb-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Generating manifest..."})]})}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>ke(!1),children:"Cancel"}),e.jsx(M,{onClick:Es,disabled:!ge||!_e||Xs.isPending,className:"bg-green-600 hover:bg-green-700",children:Xs.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"w-4 h-4 mr-2"}),"Submit to Bank"]})})]})]})}),e.jsx(B$e,{open:Wt,onOpenChange:Rt,context:ht,lcNumber:gr})]})]})}function K$e(t){const s=new Date,a=new Date(s.getFullYear(),s.getMonth()-5,1),n=t.filter(E=>new Date(E.created_at)>=a).filter(E=>E.status==="completed"),i=n.length,l=n.filter(E=>(E.discrepancies?.length||0)===0),o=n.length>0?Math.round(l.length/n.length*1e3)/10:0,d=n.filter(E=>E.processing_started_at&&E.processing_completed_at),c=d.length>0?d.reduce((E,D)=>{const R=new Date(D.processing_started_at).getTime(),O=new Date(D.processing_completed_at).getTime();return E+(O-R)},0)/d.length:0,u=c>0?`${(c/6e4).toFixed(1)} minutes`:"N/A",h=new Date(s.getFullYear(),s.getMonth()-1,1),x=new Date(s.getFullYear(),s.getMonth(),0),g=new Date(s.getFullYear(),s.getMonth()-2,1),j=new Date(s.getFullYear(),s.getMonth()-1,0),y=n.filter(E=>{const D=new Date(E.created_at);return D>=h&&D<=x}),b=n.filter(E=>{const D=new Date(E.created_at);return D>=g&&D<=j}),N=b.length>0?Math.round((y.length-b.length)/b.length*1e3)/10:y.length>0?100:0,C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=[];for(let E=5;E>=0;E--){const D=new Date(s.getFullYear(),s.getMonth()-E,1),R=new Date(s.getFullYear(),s.getMonth()-E+1,0),O=n.filter(G=>{const q=new Date(G.created_at);return q>=D&&q<=R}),P=O.filter(G=>(G.discrepancies?.length||0)===0),T=O.filter(G=>G.processing_started_at&&G.processing_completed_at),B=T.length>0?T.reduce((G,q)=>{const z=new Date(q.processing_started_at).getTime(),H=new Date(q.processing_completed_at).getTime();return G+(H-z)},0)/T.length:0;_.push({month:C[D.getMonth()],exports:O.length,compliance:O.length>0?Math.round(P.length/O.length*100):0,avgTime:B>0?Math.round(B/6e4*10)/10:0,packs:O.length})}const A={};n.forEach(E=>{(E.documents||[]).forEach(D=>{const R=D.type||D.documentType||"Other";A[R]||(A[R]={count:0,compliant:0}),A[R].count++,(D.status==="success"||!D.issuesCount)&&A[R].compliant++})});const k=Object.entries(A).map(([E,{count:D,compliant:R}])=>({type:E,count:D,complianceRate:D>0?Math.round(R/D*100):0,trend:"stable"})).sort((E,D)=>D.count-E.count).slice(0,5);return k.length===0&&k.push({type:"Commercial Invoice",count:0,complianceRate:0,trend:"stable"},{type:"Packing List",count:0,complianceRate:0,trend:"stable"},{type:"Bill of Lading",count:0,complianceRate:0,trend:"stable"}),{overview:{totalExports:i,monthlyGrowth:N,complianceRate:o,avgProcessingTime:u,customsPacks:i,timeToMarket:c>0?Math.round(c/864e5*10)/10:0},monthly:_,documentTypes:k,exportDestinations:[]}}function cte({embedded:t=!1}={}){const[s,a]=m.useState("overview"),[r,n]=m.useState([]),[i,l]=m.useState(!0);m.useEffect(()=>{(async()=>{l(!0);try{const u=await xp();n(u||[])}catch(u){console.error("Failed to load sessions for analytics:",u),n([])}finally{l(!1)}})()},[]);const o=m.useMemo(()=>K$e(r),[r]),d=t?"mx-auto w-full max-w-6xl py-4":"container mx-auto px-4 py-8 max-w-6xl";return e.jsxs("div",{className:t?"bg-transparent":"bg-background min-h-screen",children:[!t&&e.jsx("header",{className:"bg-card border-b border-gray-200",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pe,{to:"/exporter-dashboard",children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-primary p-2 rounded-lg",children:e.jsx(Ws,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Exporter Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export performance and compliance insights"})]})]})]})})})}),e.jsxs("div",{className:d,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Exports"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.overview.totalExports}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Vt,{className:"w-4 h-4 text-success"}),e.jsxs("span",{className:"text-sm text-success",children:["+",o.overview.monthlyGrowth,"% this month"]})]})]}),e.jsx("div",{className:"bg-exporter/10 p-3 rounded-lg",children:e.jsx(Ps,{className:"w-6 h-6 text-exporter"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Compliance Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[o.overview.complianceRate,"%"]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Vt,{className:"w-4 h-4 text-success"}),e.jsx("span",{className:"text-sm text-success",children:"Industry leading"})]})]}),e.jsx("div",{className:"bg-success/10 p-3 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-success"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Customs Packs"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.overview.customsPacks}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Mx,{className:"w-4 h-4 text-primary"}),e.jsx("span",{className:"text-sm text-primary",children:"Ready for shipment"})]})]}),e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(Mx,{className:"w-6 h-6 text-primary"})})]})})})]}),e.jsxs(Os,{value:s,onValueChange:a,className:"space-y-6",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-4",children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsx(He,{value:"performance",children:"Performance"}),e.jsx(He,{value:"destinations",children:"Destinations"}),e.jsx(He,{value:"insights",children:"Insights"})]}),e.jsx(Qe,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"Processing Efficiency"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-exporter mb-2",children:o.overview.avgProcessingTime}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Average processing time"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Document extraction"}),e.jsx("span",{className:"font-medium",children:"0.8 min"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"LC compliance check"}),e.jsx("span",{className:"font-medium",children:"0.6 min"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Customs pack generation"}),e.jsx("span",{className:"font-medium",children:"0.5 min"})]})]}),e.jsx("div",{className:"p-3 bg-success/5 border border-success/20 rounded-lg",children:e.jsx("p",{className:"text-sm font-medium text-success",children:"ðŸš€ 25% faster than industry average"})})]})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5"}),"Export Value & Savings"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-success mb-2",children:"$813K"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total export value this year"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Time savings value"}),e.jsx("span",{className:"font-medium text-success",children:"$32,000"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Reduced rejections"}),e.jsx("span",{className:"font-medium text-success",children:"$18,500"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Faster customs clearance"}),e.jsx("span",{className:"font-medium text-success",children:"$24,800"})]})]})]})]})]})}),e.jsx(Qe,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ng,{className:"w-5 h-5"}),"Monthly Export Trends"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:o.monthly.map((c,u)=>e.jsxs("div",{className:"grid grid-cols-4 gap-2 p-2 rounded bg-muted/30 text-sm",children:[e.jsx("div",{className:"text-center font-medium",children:c.month}),e.jsx("div",{className:"text-center text-exporter",children:c.exports}),e.jsxs("div",{className:"text-center text-success",children:[c.compliance,"%"]}),e.jsxs("div",{className:"text-center",children:[c.avgTime,"m"]})]},u))})})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(io,{className:"w-5 h-5"}),"Document Type Performance"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:o.documentTypes.map((c,u)=>e.jsxs("div",{className:"flex items-center justify-between p-2 rounded border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:c.type}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[c.count," processed"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-sm font-medium",children:[c.complianceRate,"%"]}),e.jsx("div",{className:"flex items-center gap-1",children:c.trend==="up"?e.jsx(Vt,{className:"w-3 h-3 text-success"}):c.trend==="down"?e.jsx(lr,{className:"w-3 h-3 text-destructive"}):e.jsx("div",{className:"w-3 h-3 rounded-full bg-muted"})})]})]},u))})})]})]})}),e.jsx(Qe,{value:"destinations",className:"space-y-6",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Wn,{className:"w-5 h-5"}),"Export Destinations Performance"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:o.exportDestinations.map((c,u)=>e.jsxs("div",{className:"p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:c.country}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.orders," orders â€¢ $",c.value.toLocaleString()]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Compliance"}),e.jsxs("div",{className:"font-medium text-success",children:[c.compliance,"%"]})]})]}),e.jsx(es,{value:c.compliance,className:"h-2"})]},u))})})]})}),e.jsx(Qe,{value:"insights",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsx(ee,{children:"Performance Insights"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-success/5 border border-success/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"ðŸŽ¯ Excellent Compliance"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your 96.8% compliance rate is significantly above the 89% industry average. This excellence reduces delays and builds strong relationships with importers."})]}),e.jsxs("div",{className:"p-3 bg-exporter/5 border border-exporter/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-exporter mb-1",children:"ðŸ“ˆ Growing Market Share"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your European exports have grown 42% this quarter, with Germany and UK leading. Consider expanding capacity to meet increasing demand."})]}),e.jsxs("div",{className:"p-3 bg-primary/5 border border-primary/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-primary mb-1",children:"âš¡ Speed Advantage"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Processing 25% faster than competitors gives you a significant competitive edge in time-sensitive export markets."})]})]})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsx(ee,{children:"Strategic Recommendations"})}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Expand Premium Services"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your exceptional compliance rate positions you well to offer premium, guaranteed-clearance services at higher margins."})]}),e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"GSP Certificate Optimization"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Focus on improving GSP certificate processing (94% vs 99% for COO) to unlock additional duty savings for customers."})]}),e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"New Market Opportunities"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Strong performance in current markets suggests readiness to explore additional European destinations or premium product lines."})]})]})})]})]})})]})]})]})}function Y$e({workspaceId:t,currentUserRole:s="viewer"}){const[a,r]=m.useState([]),[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(!1),[u,h]=m.useState(!1),[x,g]=m.useState(null),{toast:j}=et(),[y,b]=m.useState({email:"",role:"viewer"}),N=s==="owner"||s==="editor",C=s==="owner";m.useEffect(()=>{_(),A()},[t]);const _=async()=>{try{const P=await Ae.get(`/api/sme/workspaces/${t}/members`);r(P.data.items||[])}catch(P){j({title:"Error",description:P.response?.data?.detail||"Failed to load team members",variant:"destructive"})}finally{o(!1)}},A=async()=>{try{const P=await Ae.get(`/api/sme/workspaces/${t}/invitations`);i(P.data.items||[])}catch{}},k=async()=>{if(!y.email){j({title:"Error",description:"Please enter an email address",variant:"destructive"});return}try{await Ae.post(`/api/sme/workspaces/${t}/invite`,{email:y.email,role:y.role}),j({title:"Invitation Sent",description:`Invitation sent to ${y.email}`}),b({email:"",role:"viewer"}),c(!1),A()}catch(P){j({title:"Error",description:P.response?.data?.detail||"Failed to send invitation",variant:"destructive"})}},E=async(P,T)=>{try{await Ae.put(`/api/sme/workspaces/${t}/members/${P}`,{role:T}),j({title:"Role Updated",description:"Member role has been updated successfully"}),h(!1),g(null),_()}catch(B){j({title:"Error",description:B.response?.data?.detail||"Failed to update role",variant:"destructive"})}},D=async P=>{if(confirm("Are you sure you want to remove this member from the workspace?"))try{await Ae.delete(`/api/sme/workspaces/${t}/members/${P}`),j({title:"Member Removed",description:"Member has been removed from the workspace"}),_()}catch(T){j({title:"Error",description:T.response?.data?.detail||"Failed to remove member",variant:"destructive"})}},R=P=>{switch(P){case"owner":return e.jsx(Jm,{className:"h-4 w-4 text-yellow-600"});case"editor":return e.jsx(zn,{className:"h-4 w-4 text-blue-600"});case"viewer":return e.jsx(Da,{className:"h-4 w-4 text-gray-600"});case"auditor":return e.jsx(Ot,{className:"h-4 w-4 text-purple-600"});default:return null}},O=P=>{switch(P){case"owner":return"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200";case"editor":return"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-200";case"viewer":return"bg-gray-100 text-gray-800 dark:bg-gray-900 dark:text-gray-200";case"auditor":return"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-200";default:return""}};return l?e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Team Members"})}),e.jsx(U,{children:e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."})})]}):e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),"Team Members"]}),e.jsx(ue,{children:"Manage workspace access and permissions for team members and auditors"})]}),N&&e.jsxs(wt,{open:d,onOpenChange:c,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(sh,{className:"mr-2 h-4 w-4"}),"Invite Member"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Invite Team Member"}),e.jsx(_t,{children:"Send an invitation to join this workspace. They will receive an email with instructions."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-email",children:"Email Address"}),e.jsx(oe,{id:"invite-email",type:"email",placeholder:"colleague@example.com",value:y.email,onChange:P=>b({...y,email:P.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-role",children:"Role"}),e.jsxs(Te,{value:y.role,onValueChange:P=>b({...y,role:P}),children:[e.jsx(Pe,{id:"invite-role",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"editor",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"h-4 w-4"}),e.jsx("span",{children:"Editor - Can edit workspace and upload documents"})]})}),e.jsx(K,{value:"viewer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"h-4 w-4"}),e.jsx("span",{children:"Viewer - Read-only access"})]})}),e.jsx(K,{value:"auditor",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Auditor - Read-only access for external auditors"})]})}),C&&e.jsx(K,{value:"owner",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Jm,{className:"h-4 w-4"}),e.jsx("span",{children:"Owner - Full control"})]})})]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(M,{onClick:k,children:"Send Invitation"})]})]})]})]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium mb-3",children:["Active Members (",a.length,")"]}),e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Member"}),e.jsx(je,{children:"Role"}),e.jsx(je,{children:"Joined"}),N&&e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:a.map(P=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium",children:P.user_name||P.user_email||"Unknown User"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:P.user_email})]})}),e.jsx(fe,{children:e.jsx(Q,{className:O(P.role),children:e.jsxs("div",{className:"flex items-center gap-1",children:[R(P.role),e.jsx("span",{className:"capitalize",children:P.role})]})})}),e.jsx(fe,{children:e.jsx("span",{className:"text-sm text-muted-foreground",children:P.accepted_at?new Date(P.accepted_at).toLocaleDateString():"Pending"})}),N&&e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[C&&P.role!=="owner"&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{g(P),h(!0)},children:e.jsx(zn,{className:"h-4 w-4"})}),P.role!=="owner"&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D(P.id),children:e.jsx(ia,{className:"h-4 w-4 text-destructive"})})]})})]},P.id))})]})]}),n.filter(P=>P.status==="pending").length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium mb-3",children:"Pending Invitations"}),e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Email"}),e.jsx(je,{children:"Role"}),e.jsx(je,{children:"Expires"}),N&&e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:n.filter(P=>P.status==="pending").map(P=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:P.email})]})}),e.jsx(fe,{children:e.jsx(Q,{className:O(P.role),children:e.jsx("span",{className:"capitalize",children:P.role})})}),e.jsx(fe,{children:e.jsx("span",{className:"text-sm text-muted-foreground",children:new Date(P.expires_at).toLocaleDateString()})}),N&&e.jsx(fe,{className:"text-right",children:e.jsx(M,{variant:"ghost",size:"sm",onClick:async()=>{try{await Ae.delete(`/api/sme/workspaces/invitations/${P.id}`),j({title:"Invitation Cancelled",description:"The invitation has been cancelled"}),A()}catch(T){j({title:"Error",description:T.response?.data?.detail||"Failed to cancel invitation",variant:"destructive"})}},children:e.jsx(fn,{className:"h-4 w-4"})})})]},P.id))})]})]})]}),e.jsx(wt,{open:u,onOpenChange:h,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Edit Member Role"}),e.jsxs(_t,{children:["Change the role for ",x?.user_name||x?.user_email]})]}),x&&e.jsx("div",{className:"space-y-4 py-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Role"}),e.jsxs(Te,{value:x.role,onValueChange:P=>{E(x.id,P)},children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"editor",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(zn,{className:"h-4 w-4"}),e.jsx("span",{children:"Editor"})]})}),e.jsx(K,{value:"viewer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Da,{className:"h-4 w-4"}),e.jsx("span",{children:"Viewer"})]})}),e.jsx(K,{value:"auditor",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),e.jsx("span",{children:"Auditor"})]})})]})]})]})}),e.jsx(ms,{children:e.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Close"})})]})})]})]})}const hf="http://localhost:8000";function dte({embedded:t=!1}){const{toast:s}=et(),[a,r]=m.useState("workspace"),[n,i]=m.useState([]),[l,o]=m.useState([]),[d,c]=m.useState([]),[u,h]=m.useState(!0),[x,g]=m.useState(null),[j,y]=m.useState(!1),[b,N]=m.useState(!1),[C,_]=m.useState(""),[A,k]=m.useState("");m.useEffect(()=>{E()},[a]);const E=async()=>{h(!0);try{const P=localStorage.getItem("token"),T={"Content-Type":"application/json"};if(P&&(T.Authorization=`Bearer ${P}`),a==="workspace"){const B=await fetch(`${hf}/api/sme/lc-workspaces`,{headers:T});if(B.ok){const G=await B.json();i(G.items||[])}}else if(a==="drafts"){const B=await fetch(`${hf}/api/sme/drafts`,{headers:T});if(B.ok){const G=await B.json();o(G.items||[])}}else if(a==="amendments"){const B=await fetch(`${hf}/api/sme/amendments`,{headers:T});if(B.ok){const G=await B.json();c(G.items||[])}}}catch(P){console.error("Failed to load data:",P),s({title:"Error",description:"Failed to load workspace data",variant:"destructive"})}finally{h(!1)}},D=async()=>{if(!C.trim()){s({title:"Validation Error",description:"LC Number is required",variant:"destructive"});return}try{const P=localStorage.getItem("token"),T=await fetch(`${hf}/api/sme/lc-workspaces`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({lc_number:C,client_name:A||void 0,document_checklist:[{document_type:"letter_of_credit",required:!0,status:"missing"},{document_type:"commercial_invoice",required:!0,status:"missing"},{document_type:"bill_of_lading",required:!0,status:"missing"}]})});if(T.ok)s({title:"Success",description:"LC Workspace created successfully"}),y(!1),_(""),k(""),E();else{const B=await T.json();throw new Error(B.detail||"Failed to create workspace")}}catch(P){s({title:"Error",description:P.message||"Failed to create workspace",variant:"destructive"})}},R=P=>{switch(P){case"valid":return e.jsx(Qs,{className:"h-4 w-4 text-success"});case"invalid":return e.jsx(bs,{className:"h-4 w-4 text-destructive"});case"uploaded":return e.jsx(mt,{className:"h-4 w-4 text-info"});case"pending_review":return e.jsx(ks,{className:"h-4 w-4 text-warning"});default:return e.jsx(ks,{className:"h-4 w-4 text-muted-foreground"})}},O=P=>{switch(P){case"valid":return e.jsx(Q,{variant:"default",className:"bg-success/10 text-success",children:"Valid"});case"invalid":return e.jsx(Q,{variant:"destructive",children:"Invalid"});case"uploaded":return e.jsx(Q,{variant:"outline",children:"Uploaded"});case"pending_review":return e.jsx(Q,{variant:"outline",className:"bg-warning/10 text-warning",children:"Pending Review"});default:return e.jsx(Q,{variant:"outline",className:"bg-muted",children:"Missing"})}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold",children:"LC Workspace"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your LC documents, drafts, and amendments"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:E,disabled:u,children:e.jsx(Lt,{className:`h-4 w-4 ${u?"animate-spin":""}`})}),a==="workspace"&&e.jsxs(wt,{open:j,onOpenChange:y,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"New Workspace"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create LC Workspace"}),e.jsx(_t,{children:"Create a new workspace for tracking LC documents"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lc-number",children:"LC Number *"}),e.jsx(oe,{id:"lc-number",value:C,onChange:P=>_(P.target.value),placeholder:"LC-2024-001"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"client-name",children:"Client Name"}),e.jsx(oe,{id:"client-name",value:A,onChange:P=>k(P.target.value),placeholder:"Optional"})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>y(!1),children:"Cancel"}),e.jsx(M,{onClick:D,children:"Create"})]})]})]})]})]}),e.jsxs(Os,{value:a,onValueChange:P=>r(P),children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"workspace",children:"LC Workspaces"}),e.jsx(He,{value:"drafts",children:"Drafts"}),e.jsx(He,{value:"amendments",children:"Amendments"})]}),e.jsx(Qe,{value:"workspace",className:"mt-6",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Lt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):n.length===0?e.jsx($,{children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(R1,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No LC workspaces yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Create a workspace to start tracking LC documents"})]})}):e.jsx("div",{className:"space-y-4",children:n.map(P=>e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[P.lc_number,P.client_name&&e.jsxs("span",{className:"text-sm font-normal text-muted-foreground",children:["- ",P.client_name]})]}),e.jsx(ue,{children:P.description||"No description"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"outline",children:[P.completion_percentage,"% Complete"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{g(P),r("workspace")},children:"View Details"})]})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Document Checklist"}),e.jsx(Progress,{value:P.completion_percentage,className:"w-32"})]}),e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Document Type"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Required"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(oa,{children:P.document_checklist.map((T,B)=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:T.document_type}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[R(T.status),O(T.status)]})}),e.jsx(fe,{children:T.required?e.jsx(Q,{variant:"outline",children:"Required"}):e.jsx(Q,{variant:"outline",className:"bg-muted",children:"Optional"})}),e.jsxs(fe,{children:[T.status==="missing"&&e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Hs,{className:"h-4 w-4"})}),T.status==="invalid"&&e.jsx(M,{variant:"ghost",size:"sm",children:e.jsx(Lt,{className:"h-4 w-4"})})]})]},B))})]})]}),e.jsx(oo,{type:"single",collapsible:!0,className:"mt-4",children:e.jsxs(Qr,{value:"team",children:[e.jsx(Xr,{className:"text-sm font-medium",children:"Team Members & Sharing"}),e.jsx(en,{children:e.jsx(Y$e,{workspaceId:P.id,currentUserRole:"owner"})})]})})]})})]},P.id))})}),e.jsx(Qe,{value:"drafts",className:"mt-6",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Lt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):l.length===0?e.jsx($,{children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(th,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No drafts saved"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Save a draft while uploading to resume later"})]})}):e.jsx("div",{className:"space-y-4",children:l.map(P=>e.jsx($,{children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(th,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold",children:P.lc_number||"Untitled Draft"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[P.uploaded_docs.length," file",P.uploaded_docs.length===1?"":"s"," â€¢"," ",P.draft_type]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(StatusBadge,{status:P.status==="ready_for_submission"?"success":P.status==="submitted"?"info":"warning",children:P.status.replace("_"," ")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated ",new Date(P.updated_at).toLocaleDateString()]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.status==="draft"&&e.jsx(M,{variant:"outline",size:"sm",onClick:async()=>{try{const T=localStorage.getItem("token");(await fetch(`${hf}/api/sme/drafts/${P.id}/promote`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${T}`},body:JSON.stringify({notes:"Promoted to ready for submission"})})).ok&&(s({title:"Success",description:"Draft promoted successfully"}),E())}catch{s({title:"Error",description:"Failed to promote draft",variant:"destructive"})}},children:"Promote"}),e.jsx(M,{variant:"outline",size:"sm",children:e.jsx(Jt,{className:"h-4 w-4"})})]})]})})},P.id))})}),e.jsx(Qe,{value:"amendments",className:"mt-6",children:u?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(Lt,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):d.length===0?e.jsx($,{children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(qm,{className:"h-12 w-12 text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No amendments recorded"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"LC amendments will appear here"})]})}):e.jsx("div",{className:"space-y-4",children:d.map(P=>e.jsx($,{children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(qm,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold",children:[P.lc_number," - Version ",P.version]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[P.document_changes?.length||0," document change",(P.document_changes?.length||0)===1?"":"s"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx(StatusBadge,{status:P.status==="approved"?"success":P.status==="rejected"?"error":"warning",children:P.status}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Created ",new Date(P.created_at).toLocaleDateString()]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(M,{variant:"outline",size:"sm",onClick:async()=>{try{const T=localStorage.getItem("token"),B=await fetch(`${hf}/api/sme/amendments/${P.id}/diff`,{headers:{Authorization:`Bearer ${T}`}});if(B.ok){const G=await B.json();s({title:"Diff Loaded",description:`Found ${G.summary.added+G.summary.modified+G.summary.removed} changes`})}}catch{s({title:"Error",description:"Failed to load diff",variant:"destructive"})}},children:"View Diff"})})]})})},P.id))})})]})]})}const xf={async list(t){return(await Ae.get("/sme/templates",{params:t})).data},async get(t){return(await Ae.get(`/sme/templates/${t}`)).data},async create(t){return(await Ae.post("/sme/templates",t)).data},async update(t,s){return(await Ae.put(`/sme/templates/${t}`,s)).data},async delete(t){await Ae.delete(`/sme/templates/${t}`)},async use(t){return(await Ae.post(`/sme/templates/${t}/use`)).data},async prefill(t){return(await Ae.post("/sme/templates/prefill",t)).data}},Z$e=[{id:"template-1",name:"Standard LC Template",type:"lc",description:"Standard letter of credit template for regular trade",fields:{beneficiary:"{{company_name}}",amount:"USD {{amount}}",expiry_date:"{{expiry_days}} days from issue",shipment_terms:"FOB"},is_default:!0,is_active:!0,usage_count:45,created_at:"2024-01-01T10:00:00Z",updated_at:"2024-01-15T14:30:00Z"},{id:"template-2",name:"Commercial Invoice Template",type:"document",document_type:"commercial_invoice",description:"Pre-filled commercial invoice with common fields",fields:{consignee:"{{default_consignee}}",shipper:"{{company_name}}",incoterms:"FOB",currency:"USD"},is_default:!1,is_active:!0,usage_count:23,created_at:"2024-01-05T09:00:00Z",updated_at:"2024-01-10T11:20:00Z"}];function ute({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt(),r=zt();zs();const[n,i]=m.useState(!1),[l,o]=m.useState([]),[d,c]=m.useState("lc"),[u,h]=m.useState(!1),[x,g]=m.useState(!1),[j,y]=m.useState(null),[b,N]=m.useState(""),[C,_]=m.useState(""),[A,k]=m.useState({}),[E,D]=m.useState("commercial_invoice");m.useEffect(()=>{R()},[d]);const R=async()=>{try{i(!0);const H=await xf.list({type:d,active_only:!0});o(H.items)}catch(H){console.error("Failed to load templates:",H),o(Z$e.filter(le=>le.type===d)),s({title:"Warning",description:"Failed to load templates. Using cached data.",variant:"destructive"})}finally{i(!1)}},O=()=>{N(""),_(""),k({}),y(null),h(!0)},P=H=>{y(H),N(H.name),_(H.description||""),k(H.fields),g(!0)},T=async()=>{if(!b.trim()){s({title:"Name Required",description:"Please provide a template name.",variant:"destructive"});return}if(!a?.company_id){s({title:"Error",description:"Company ID not found",variant:"destructive"});return}i(!0);try{if(j){const H={name:b,description:C||void 0,fields:A,is_default:!l.some(Y=>Y.is_default&&Y.id!==j.id)},le=await xf.update(j.id,H);await R(),s({title:"Template Updated",description:`Template "${b}" has been updated successfully.`}),g(!1)}else{const H={name:b,type:d,document_type:d==="document"?E:void 0,description:C||void 0,fields:A,is_default:!1},le=await xf.create({...H,company_id:a.company_id,user_id:a.id||""});await R(),s({title:"Template Created",description:`Template "${b}" has been created successfully.`}),h(!1)}y(null),N(""),_(""),k({})}catch(H){s({title:"Save Failed",description:H.response?.data?.detail||"Failed to save template. Please try again.",variant:"destructive"})}finally{i(!1)}},B=async H=>{if(confirm("Are you sure you want to delete this template?")){i(!0);try{await xf.delete(H),await R(),s({title:"Template Deleted",description:"Template has been deleted successfully."})}catch(le){s({title:"Delete Failed",description:le.response?.data?.detail||"Failed to delete template. Please try again.",variant:"destructive"})}finally{i(!1)}}},G=async H=>{try{await xf.use(H.id);const le=await xf.prefill({template_id:H.id}),Y=encodeURIComponent(JSON.stringify(le.fields));r(t?`/lcopilot/${a?.role==="importer"?"importer":"exporter"}-dashboard?section=upload&template=${H.id}&prefill=${Y}`:`/${a?.role==="importer"?"import":"export"}-lc-upload?template=${H.id}&prefill=${Y}`),s({title:"Template Applied",description:`Template "${H.name}" has been loaded with pre-filled data.`})}catch(le){s({title:"Template Load Failed",description:le.response?.data?.detail||"Failed to load template. Please try again.",variant:"destructive"})}},q=async H=>{N(`${H.name} (Copy)`),_(H.description||""),k(H.fields),y(null),h(!0)},z=l.filter(H=>H.type===d);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Templates"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage LC and document templates to speed up your validation workflow."})]}),e.jsxs(M,{onClick:O,className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"New Template"]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"About Templates"]})}),e.jsxs(U,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Templates allow you to pre-fill common fields when creating new LC validations or uploading documents. Use variables like ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"{{company_name}}"})," or"," ",e.jsx("code",{className:"bg-muted px-1 rounded",children:"{{default_consignee}}"})," to auto-populate from your company profile."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"LC Templates:"})," Pre-fill LC-specific fields like beneficiary, amount, expiry dates, and shipment terms."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"Document Templates:"})," Pre-fill document-specific fields like consignee, shipper, incoterms, and currency."]})]})]}),e.jsxs(Os,{value:d,onValueChange:H=>c(H),className:"w-full",children:[e.jsxs(Fs,{children:[e.jsxs(He,{value:"lc",children:["LC Templates (",l.filter(H=>H.type==="lc").length,")"]}),e.jsxs(He,{value:"document",children:["Document Templates (",l.filter(H=>H.type==="document").length,")"]})]}),e.jsx(Qe,{value:d,className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:d==="lc"?"LC Templates":"Document Templates"}),e.jsx(ue,{children:d==="lc"?"Templates for letter of credit validations":"Templates for document uploads"})]}),e.jsx(U,{children:n?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading templates..."]}):z.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsxs("p",{children:["No ",d==="lc"?"LC":"document"," templates yet"]}),e.jsx("p",{className:"text-sm",children:"Create your first template to get started"}),e.jsxs(M,{onClick:O,className:"mt-4",variant:"outline",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Description"}),e.jsx(je,{children:"Fields"}),e.jsx(je,{children:"Usage"}),e.jsx(je,{children:"Status"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:z.map(H=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:H.name}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:H.type==="lc"?"LC":H.document_type?.replace(/_/g," ")||"Document"})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:H.description||"-"}),e.jsx(fe,{children:e.jsxs(Q,{variant:"secondary",children:[Object.keys(H.fields).length," fields"]})}),e.jsxs(fe,{className:"text-sm text-muted-foreground",children:["Used ",H.usage_count," time",H.usage_count!==1?"s":""]}),e.jsx(fe,{children:H.is_default?e.jsx(Fa,{status:"success",children:"Default"}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"-"})}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>G(H),className:"gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Use"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>q(H),className:"gap-2",children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>P(H),className:"gap-2",children:e.jsx(th,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>B(H.id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"h-4 w-4"})})]})})]},H.id))})]})})]})})]}),e.jsx(wt,{open:u||x,onOpenChange:H=>{H||(h(!1),g(!1),y(null))},children:e.jsxs(yt,{className:"sm:max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:j?"Edit Template":"Create Template"}),e.jsx(_t,{children:j?"Update your template details and fields":`Create a new ${d==="lc"?"LC":"document"} template`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Template Name"}),e.jsx(oe,{value:b,onChange:H=>N(H.target.value),placeholder:"e.g., Standard LC Template"})]}),d==="document"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Type"}),e.jsxs(Te,{value:E,onValueChange:D,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select document type"})}),e.jsxs(De,{children:[e.jsx(K,{value:"commercial_invoice",children:"Commercial Invoice"}),e.jsx(K,{value:"bill_of_lading",children:"Bill of Lading"}),e.jsx(K,{value:"packing_list",children:"Packing List"}),e.jsx(K,{value:"certificate_of_origin",children:"Certificate of Origin"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Description (Optional)"}),e.jsx(Zt,{value:C,onChange:H=>_(H.target.value),placeholder:"Describe when to use this template...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Template Fields"}),e.jsxs("div",{className:"space-y-2 border rounded-lg p-4",children:[e.jsxs("p",{className:"text-sm text-muted-foreground mb-3",children:["Define field values. Use variables like ","{{company_name}}"," or ","{{default_consignee}}"," for dynamic values."]}),d==="lc"?e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Beneficiary"}),e.jsx(oe,{placeholder:"e.g., {{company_name}}",defaultValue:A.beneficiary||"",onChange:H=>k({...A,beneficiary:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Amount"}),e.jsx(oe,{placeholder:"e.g., USD {{amount}}",defaultValue:A.amount||"",onChange:H=>k({...A,amount:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Expiry Date"}),e.jsx(oe,{placeholder:"e.g., {{expiry_days}} days from issue",defaultValue:A.expiry_date||"",onChange:H=>k({...A,expiry_date:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Shipment Terms"}),e.jsx(oe,{placeholder:"e.g., FOB",defaultValue:A.shipment_terms||"",onChange:H=>k({...A,shipment_terms:H.target.value})})]})]}):e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Consignee"}),e.jsx(oe,{placeholder:"e.g., {{default_consignee}}",defaultValue:A.consignee||"",onChange:H=>k({...A,consignee:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Shipper"}),e.jsx(oe,{placeholder:"e.g., {{company_name}}",defaultValue:A.shipper||"",onChange:H=>k({...A,shipper:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Incoterms"}),e.jsx(oe,{placeholder:"e.g., FOB",defaultValue:A.incoterms||"",onChange:H=>k({...A,incoterms:H.target.value})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsx(Z,{className:"text-xs",children:"Currency"}),e.jsx(oe,{placeholder:"e.g., USD",defaultValue:A.currency||"",onChange:H=>k({...A,currency:H.target.value})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(M,{variant:"outline",onClick:()=>{h(!1),g(!1),y(null)},children:"Cancel"}),e.jsx(M,{onClick:T,disabled:n||!b.trim(),children:n?e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bi,{className:"h-4 w-4 mr-2"}),j?"Update Template":"Create Template"]})})]})]})]})})]})}const J$e=[{id:"req-1",type:"download",status:"completed",requestedAt:"2024-01-15T10:00:00Z",completedAt:"2024-01-15T11:30:00Z",expiresAt:"2024-01-22T11:30:00Z",downloadUrl:"https://example.com/download/req-1.zip",dataScope:["profile","validation_sessions","documents"]},{id:"req-2",type:"deletion",status:"pending",requestedAt:"2024-01-18T14:00:00Z",reason:"Account closure request",dataScope:["all"]}],Q$e=t=>new Date(t).toLocaleString(),au=t=>{const s=new Date(t),r=new Date().getTime()-s.getTime(),n=Math.floor(r/(1e3*60*60*24));return n<1?"Today":n===1?"Yesterday":n<7?`${n} days ago`:Q$e(t)};function eR({embedded:t=!1}){const{user:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(J$e),[i,l]=m.useState(!1),[o,d]=m.useState(!1),[c,u]=m.useState(!1),[h,x]=m.useState([]),[g,j]=m.useState(""),[y,b]=m.useState("all"),N=[{value:"profile",label:"Profile Information"},{value:"validation_sessions",label:"Validation Sessions"},{value:"documents",label:"Uploaded Documents"},{value:"analytics",label:"Analytics Data"},{value:"billing",label:"Billing & Payment History"},{value:"audit_logs",label:"Audit Logs"}];m.useEffect(()=>{},[]);const C=async()=>{if(h.length===0){a({title:"Selection Required",description:"Please select at least one data type to download.",variant:"destructive"});return}l(!0);try{const E={id:`req-${Date.now()}`,type:"download",status:"pending",requestedAt:new Date().toISOString(),dataScope:h};n(D=>[E,...D]),d(!1),x([]),a({title:"Download Request Submitted",description:"Your data export will be prepared and you'll receive a notification when ready."})}catch{a({title:"Request Failed",description:"Failed to submit download request. Please try again.",variant:"destructive"})}finally{l(!1)}},_=async()=>{if(!g.trim()){a({title:"Reason Required",description:"Please provide a reason for the deletion request.",variant:"destructive"});return}l(!0);try{const E={id:`req-${Date.now()}`,type:"deletion",status:"pending",requestedAt:new Date().toISOString(),reason:g,dataScope:y==="all"?["all"]:[y]};n(D=>[E,...D]),u(!1),j(""),b("all"),a({title:"Deletion Request Submitted",description:"Your deletion request is being processed. You'll be notified once completed.",variant:"default"})}catch{a({title:"Request Failed",description:"Failed to submit deletion request. Please try again.",variant:"destructive"})}finally{l(!1)}},A=E=>{E.downloadUrl?window.open(E.downloadUrl,"_blank"):a({title:"Download Not Available",description:"The download link is not yet available. Please check back later.",variant:"default"})},k=async E=>{l(!0);try{n(D=>D.map(R=>R.id===E?{...R,status:"cancelled"}:R)),a({title:"Request Cancelled",description:"Your data request has been cancelled."})}catch{a({title:"Cancellation Failed",description:"Failed to cancel request. Please try again.",variant:"destructive"})}finally{l(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Data Retention & Privacy"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your data download and deletion requests in compliance with GDPR and privacy regulations."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Request Data Download"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Request Data Download"}),e.jsx(_t,{children:"Select the data types you want to download. Your export will be prepared and available for 7 days."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Select Data Types"}),e.jsx("div",{className:"space-y-2",children:N.map(E=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:E.value,checked:h.includes(E.value),onChange:D=>{D.target.checked?x([...h,E.value]):x(h.filter(R=>R!==E.value))},className:"rounded border-gray-300"}),e.jsx(Z,{htmlFor:E.value,className:"font-normal cursor-pointer",children:E.label})]},E.value))})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:C,disabled:i||h.length===0,children:i?"Submitting...":"Submit Request"})]})]})]})]}),e.jsxs(wt,{open:c,onOpenChange:u,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{variant:"destructive",className:"gap-2",children:[e.jsx(ia,{className:"h-4 w-4"}),"Request Data Deletion"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Request Data Deletion"}),e.jsx(_t,{children:"This action cannot be undone. All selected data will be permanently deleted."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs(zo,{variant:"destructive",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx(Tc,{children:"Warning"}),e.jsx(qo,{children:"Data deletion is permanent and irreversible. Please ensure you have backups of any important data."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Deletion Scope"}),e.jsxs("select",{value:y,onChange:E=>b(E.target.value),className:"w-full rounded-md border border-input bg-background px-3 py-2",children:[e.jsx("option",{value:"all",children:"All Data"}),N.map(E=>e.jsxs("option",{value:E.value,children:[E.label," Only"]},E.value))]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Reason for Deletion"}),e.jsx(Zt,{placeholder:"Please provide a reason for the deletion request...",value:g,onChange:E=>j(E.target.value),rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>u(!1),children:"Cancel"}),e.jsx(M,{variant:"destructive",onClick:_,disabled:i||!g.trim(),children:i?"Submitting...":"Confirm Deletion"})]})]})]})]})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Your Rights"]})}),e.jsxs(U,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"â€¢ Right to access your personal data"}),e.jsx("p",{children:"â€¢ Right to data portability"}),e.jsx("p",{children:'â€¢ Right to erasure ("right to be forgotten")'}),e.jsx("p",{children:"â€¢ Right to rectification"}),e.jsx("p",{children:"â€¢ Right to object to processing"})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(mt,{className:"h-4 w-4"}),"Processing Times"]})}),e.jsxs(U,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"â€¢ Download requests: 1-3 business days"}),e.jsx("p",{children:"â€¢ Deletion requests: 7-14 business days"}),e.jsx("p",{children:"â€¢ Download links expire after 7 days"}),e.jsx("p",{children:"â€¢ Some data may be retained for legal compliance"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:"Your Data Requests"}),e.jsx(ue,{children:"Track the status of your download and deletion requests"})]}),e.jsx(U,{children:i?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading requests..."]}):r.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No data requests yet"}),e.jsx("p",{className:"text-sm",children:"Submit a request above to get started"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Data Scope"}),e.jsx(je,{children:"Requested"}),e.jsx(je,{children:"Completed"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:r.map(E=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs(Q,{variant:E.type==="download"?"default":"destructive",children:[E.type==="download"?e.jsx(Gt,{className:"h-3 w-3 mr-1"}):e.jsx(ia,{className:"h-3 w-3 mr-1"}),E.type==="download"?"Download":"Deletion"]})}),e.jsx(fe,{children:e.jsx(Fa,{status:E.status==="completed"?"success":E.status==="failed"?"error":E.status==="cancelled"?"warning":"pending",children:E.status})}),e.jsx(fe,{children:e.jsx("div",{className:"flex flex-wrap gap-1",children:E.dataScope.map(D=>e.jsx(Q,{variant:"outline",className:"text-xs",children:D==="all"?"All Data":D.replace(/_/g," ")},D))})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:au(E.requestedAt)}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:E.completedAt?au(E.completedAt):"-"}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[E.type==="download"&&E.status==="completed"&&E.downloadUrl&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>A(E),children:e.jsx(Gt,{className:"h-4 w-4"})}),E.status==="pending"&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>k(E.id),className:"text-destructive",children:"Cancel"})]})})]},E.id))})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:"Audit Logs"}),e.jsx(ue,{children:"View your account activity and data access logs"})]}),e.jsx(U,{children:e.jsxs(Os,{defaultValue:"recent",className:"w-full",children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"recent",children:"Recent Activity"}),e.jsx(He,{value:"access",children:"Data Access"}),e.jsx(He,{value:"changes",children:"Account Changes"})]}),e.jsx(Qe,{value:"recent",className:"space-y-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["â€¢ Login from new device - ",au(new Date(Date.now()-1e3*60*60*2).toISOString())]}),e.jsxs("p",{children:["â€¢ Profile updated - ",au(new Date(Date.now()-1e3*60*60*24).toISOString())]}),e.jsxs("p",{children:["â€¢ Password changed - ",au(new Date(Date.now()-1e3*60*60*24*7).toISOString())]})]})}),e.jsx(Qe,{value:"access",className:"space-y-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["â€¢ Data download requested - ",au(new Date(Date.now()-1e3*60*60*24).toISOString())]}),e.jsxs("p",{children:["â€¢ Validation session accessed - ",au(new Date(Date.now()-1e3*60*60*48).toISOString())]})]})}),e.jsx(Qe,{value:"changes",className:"space-y-2",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["â€¢ Email address updated - ",au(new Date(Date.now()-1e3*60*60*24*7).toISOString())]}),e.jsxs("p",{children:["â€¢ Account created - ",au(new Date(Date.now()-1e3*60*60*24*30).toISOString())]})]})})]})})]})]})}class X$e{baseUrl="/api/company-profile";async listAddresses(s){return(await Ae.get(`${this.baseUrl}/addresses`,{params:s})).data}async getAddress(s){return(await Ae.get(`${this.baseUrl}/addresses/${s}`)).data}async createAddress(s){return(await Ae.post(`${this.baseUrl}/addresses`,s)).data}async updateAddress(s,a){return(await Ae.patch(`${this.baseUrl}/addresses/${s}`,a)).data}async deleteAddress(s){await Ae.delete(`${this.baseUrl}/addresses/${s}`)}async getComplianceInfo(){return(await Ae.get(`${this.baseUrl}/compliance`)).data}async upsertComplianceInfo(s){return(await Ae.post(`${this.baseUrl}/compliance`,s)).data}async updateComplianceInfo(s){return(await Ae.patch(`${this.baseUrl}/compliance`,s)).data}async listConsigneeShipper(s){return(await Ae.get(`${this.baseUrl}/consignee-shipper`,{params:s})).data}async getConsigneeShipper(s){return(await Ae.get(`${this.baseUrl}/consignee-shipper/${s}`)).data}async createConsigneeShipper(s){return(await Ae.post(`${this.baseUrl}/consignee-shipper`,s)).data}async updateConsigneeShipper(s,a){return(await Ae.patch(`${this.baseUrl}/consignee-shipper/${s}`,a)).data}async deleteConsigneeShipper(s){await Ae.delete(`${this.baseUrl}/consignee-shipper/${s}`)}}const cd=new X$e;function tR({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt(),[r,n]=m.useState("compliance"),[i,l]=m.useState(!1),[o,d]=m.useState(null),[c,u]=m.useState(!1),[h,x]=m.useState([]),[g,j]=m.useState(!1),[y,b]=m.useState(null),[N,C]=m.useState([]),[_,A]=m.useState(!1),[k,E]=m.useState(null);m.useEffect(()=>{D(),R(),O()},[]);const D=async()=>{try{l(!0);const z=await cd.getComplianceInfo();d(z)}catch(z){console.error("Failed to load compliance info:",z)}finally{l(!1)}},R=async()=>{try{l(!0);const z=await cd.listAddresses({active_only:!0});x(z.items)}catch(z){console.error("Failed to load addresses:",z)}finally{l(!1)}},O=async()=>{try{l(!0);const z=await cd.listConsigneeShipper({active_only:!0});C(z.items)}catch(z){console.error("Failed to load consignee/shipper:",z)}finally{l(!1)}},P=async z=>{try{if(l(!0),!a?.company_id){s({title:"Error",description:"Company ID not found",variant:"destructive"});return}await cd.upsertComplianceInfo({...z,company_id:a.company_id}),await D(),u(!1),s({title:"Success",description:"Compliance information saved successfully"})}catch(H){s({title:"Error",description:H.response?.data?.detail||"Failed to save compliance information",variant:"destructive"})}finally{l(!1)}},T=async z=>{try{if(l(!0),!a?.company_id){s({title:"Error",description:"Company ID not found",variant:"destructive"});return}y?await cd.updateAddress(y.id,z):await cd.createAddress({...z,company_id:a.company_id}),await R(),j(!1),b(null),s({title:"Success",description:y?"Address updated successfully":"Address created successfully"})}catch(H){s({title:"Error",description:H.response?.data?.detail||"Failed to save address",variant:"destructive"})}finally{l(!1)}},B=async z=>{try{l(!0),await cd.deleteAddress(z),await R(),s({title:"Success",description:"Address deleted successfully"})}catch(H){s({title:"Error",description:H.response?.data?.detail||"Failed to delete address",variant:"destructive"})}finally{l(!1)}},G=async z=>{try{if(l(!0),!a?.company_id){s({title:"Error",description:"Company ID not found",variant:"destructive"});return}k?await cd.updateConsigneeShipper(k.id,z):await cd.createConsigneeShipper({...z,company_id:a.company_id}),await O(),A(!1),E(null),s({title:"Success",description:k?"Consignee/Shipper updated successfully":"Consignee/Shipper created successfully"})}catch(H){s({title:"Error",description:H.response?.data?.detail||"Failed to save consignee/shipper",variant:"destructive"})}finally{l(!1)}},q=async z=>{try{l(!0),await cd.deleteConsigneeShipper(z),await O(),s({title:"Success",description:"Consignee/Shipper deleted successfully"})}catch(H){s({title:"Error",description:H.response?.data?.detail||"Failed to delete consignee/shipper",variant:"destructive"})}finally{l(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Company Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your company's compliance information, addresses, and default shipping details."})]})}),e.jsxs(Os,{value:r,onValueChange:z=>n(z),className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsxs(He,{value:"compliance",className:"flex items-center gap-2",children:[e.jsx(Gs,{className:"w-4 h-4"})," Compliance"]}),e.jsxs(He,{value:"addresses",className:"flex items-center gap-2",children:[e.jsx(oi,{className:"w-4 h-4"})," Address Book (",h.length,")"]}),e.jsxs(He,{value:"consignee-shipper",className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4"})," Default Consignee/Shipper (",N.length,")"]})]}),e.jsx(Qe,{value:"compliance",className:"mt-6",children:e.jsx(e7e,{complianceInfo:o,loading:i,onSave:P,dialogOpen:c,onDialogOpenChange:u})}),e.jsx(Qe,{value:"addresses",className:"mt-6",children:e.jsx(s7e,{addresses:h,loading:i,onSave:T,onDelete:B,dialogOpen:g,onDialogOpenChange:j,editingAddress:y,onEdit:b})}),e.jsx(Qe,{value:"consignee-shipper",className:"mt-6",children:e.jsx(r7e,{consigneeShipper:N,addresses:h,loading:i,onSave:G,onDelete:q,dialogOpen:_,onDialogOpenChange:A,editingConsigneeShipper:k,onEdit:E})})]})]})}function e7e({complianceInfo:t,loading:s,onSave:a,dialogOpen:r,onDialogOpenChange:n}){const[i,l]=m.useState({company_id:"",tax_id:t?.tax_id||"",vat_number:t?.vat_number||"",registration_number:t?.registration_number||"",regulator_id:t?.regulator_id||"",compliance_status:t?.compliance_status||"pending",expiry_date:t?.expiry_date||void 0,notes:t?.notes||""});m.useEffect(()=>{t&&l({company_id:t.company_id,tax_id:t.tax_id||"",vat_number:t.vat_number||"",registration_number:t.registration_number||"",regulator_id:t.regulator_id||"",compliance_status:t.compliance_status,expiry_date:t.expiry_date||void 0,notes:t.notes||""})},[t]);const o=d=>{switch(d){case"verified":return e.jsx(Qs,{className:"w-5 h-5 text-success"});case"expired":return e.jsx(ks,{className:"w-5 h-5 text-warning"});case"rejected":return e.jsx(bs,{className:"w-5 h-5 text-destructive"});default:return e.jsx(mt,{className:"w-5 h-5 text-muted-foreground"})}};return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Compliance Information"}),e.jsx(ue,{children:"Manage your company's tax IDs, registration numbers, and compliance status."})]}),e.jsxs(M,{onClick:()=>n(!0),children:[e.jsx(zn,{className:"w-4 h-4 mr-2"})," Edit"]})]})}),e.jsx(U,{children:s?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-primary border-t-transparent animate-spin"})}):t?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Tax ID / TIN"}),e.jsx("p",{className:"text-sm font-medium",children:t.tax_id||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"VAT Number"}),e.jsx("p",{className:"text-sm font-medium",children:t.vat_number||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Registration Number"}),e.jsx("p",{className:"text-sm font-medium",children:t.registration_number||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Regulator ID"}),e.jsx("p",{className:"text-sm font-medium",children:t.regulator_id||"Not provided"})]}),e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Compliance Status"}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[o(t.compliance_status),e.jsx(Fa,{status:t.compliance_status==="verified"?"success":t.compliance_status==="rejected"?"destructive":t.compliance_status==="expired"?"warning":"info",children:t.compliance_status})]})]}),t.expiry_date&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Expiry Date"}),e.jsx("p",{className:"text-sm font-medium",children:new Date(t.expiry_date).toLocaleDateString()})]})]}),t.notes&&e.jsxs("div",{children:[e.jsx(Z,{className:"text-muted-foreground",children:"Notes"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:t.notes})]})]}):e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Gs,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No compliance information set up"}),e.jsxs(M,{onClick:()=>n(!0),className:"mt-4",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"})," Add Compliance Information"]})]})}),e.jsx(t7e,{open:r,onOpenChange:n,complianceInfo:t,onSave:a})]})}function t7e({open:t,onOpenChange:s,complianceInfo:a,onSave:r}){const[n,i]=m.useState({company_id:a?.company_id||"",tax_id:a?.tax_id||"",vat_number:a?.vat_number||"",registration_number:a?.registration_number||"",regulator_id:a?.regulator_id||"",compliance_status:a?.compliance_status||"pending",expiry_date:a?.expiry_date||void 0,notes:a?.notes||""}),[l,o]=m.useState(!1);m.useEffect(()=>{a&&i({company_id:a.company_id,tax_id:a.tax_id||"",vat_number:a.vat_number||"",registration_number:a.registration_number||"",regulator_id:a.regulator_id||"",compliance_status:a.compliance_status,expiry_date:a.expiry_date||void 0,notes:a.notes||""})},[a,t]);const d=async c=>{c.preventDefault(),o(!0);try{await r(n)}finally{o(!1)}};return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:[a?"Edit":"Add"," Compliance Information"]}),e.jsx(_t,{children:"Enter your company's compliance and regulatory information."})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"tax_id",children:"Tax ID / TIN"}),e.jsx(oe,{id:"tax_id",value:n.tax_id,onChange:c=>i({...n,tax_id:c.target.value}),placeholder:"Enter tax ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"vat_number",children:"VAT Number"}),e.jsx(oe,{id:"vat_number",value:n.vat_number,onChange:c=>i({...n,vat_number:c.target.value}),placeholder:"Enter VAT number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"registration_number",children:"Registration Number"}),e.jsx(oe,{id:"registration_number",value:n.registration_number,onChange:c=>i({...n,registration_number:c.target.value}),placeholder:"Enter registration number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"regulator_id",children:"Regulator ID"}),e.jsx(oe,{id:"regulator_id",value:n.regulator_id,onChange:c=>i({...n,regulator_id:c.target.value}),placeholder:"Enter regulator ID"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"compliance_status",children:"Compliance Status"}),e.jsxs(Te,{value:n.compliance_status,onValueChange:c=>i({...n,compliance_status:c}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"pending",children:"Pending"}),e.jsx(K,{value:"verified",children:"Verified"}),e.jsx(K,{value:"expired",children:"Expired"}),e.jsx(K,{value:"rejected",children:"Rejected"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"expiry_date",children:"Expiry Date"}),e.jsx(oe,{id:"expiry_date",type:"date",value:n.expiry_date?new Date(n.expiry_date).toISOString().split("T")[0]:"",onChange:c=>i({...n,expiry_date:c.target.value?new Date(c.target.value).toISOString():void 0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Notes"}),e.jsx(Zt,{id:"notes",value:n.notes,onChange:c=>i({...n,notes:c.target.value}),placeholder:"Additional notes or comments",rows:3})]}),e.jsxs(ms,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:l,children:l?"Saving...":"Save"})]})]})]})})}function s7e({addresses:t,loading:s,onSave:a,onDelete:r,dialogOpen:n,onDialogOpenChange:i,editingAddress:l,onEdit:o}){return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Address Book"}),e.jsx(ue,{children:"Manage your company's addresses for shipping, billing, and business operations."})]}),e.jsxs(M,{onClick:()=>{o(null),i(!0)},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"})," Add Address"]})]})}),e.jsx(U,{children:s?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-primary border-t-transparent animate-spin"})}):t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(oi,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No addresses added yet"}),e.jsxs(M,{onClick:()=>{o(null),i(!0)},className:"mt-4",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"})," Add First Address"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Label"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Address"}),e.jsx(je,{children:"Contact"}),e.jsx(je,{children:"Defaults"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:t.map(d=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:d.label}),e.jsx(fe,{children:e.jsx(Fa,{status:"info",children:d.address_type})}),e.jsx(fe,{children:e.jsxs("div",{className:"text-sm",children:[d.street_address,e.jsx("br",{}),d.city,", ",d.state_province||""," ",d.postal_code||"",e.jsx("br",{}),d.country]})}),e.jsx(fe,{children:d.contact_name&&e.jsxs("div",{className:"text-sm",children:[d.contact_name,d.contact_email&&e.jsx("div",{className:"text-muted-foreground",children:d.contact_email})]})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex gap-2",children:[d.is_default_shipping&&e.jsx(Fa,{status:"success",className:"text-xs",children:"Shipping"}),d.is_default_billing&&e.jsx(Fa,{status:"success",className:"text-xs",children:"Billing"})]})}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{o(d),i(!0)},children:e.jsx(zn,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>r(d.id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"w-4 h-4"})})]})})]},d.id))})]})}),e.jsx(a7e,{open:n,onOpenChange:i,address:l,onSave:a})]})}function a7e({open:t,onOpenChange:s,address:a,onSave:r}){const[n,i]=m.useState({company_id:"",label:"",address_type:"business",street_address:"",city:"",state_province:"",postal_code:"",country:"",contact_name:"",contact_email:"",contact_phone:"",is_default_shipping:!1,is_default_billing:!1}),[l,o]=m.useState(!1);m.useEffect(()=>{i(a?{company_id:a.company_id,label:a.label,address_type:a.address_type,street_address:a.street_address,city:a.city,state_province:a.state_province||"",postal_code:a.postal_code||"",country:a.country,contact_name:a.contact_name||"",contact_email:a.contact_email||"",contact_phone:a.contact_phone||"",is_default_shipping:a.is_default_shipping,is_default_billing:a.is_default_billing}:{company_id:"",label:"",address_type:"business",street_address:"",city:"",state_province:"",postal_code:"",country:"",contact_name:"",contact_email:"",contact_phone:"",is_default_shipping:!1,is_default_billing:!1})},[a,t]);const d=async c=>{c.preventDefault(),o(!0);try{await r(n)}finally{o(!1)}};return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:[a?"Edit":"Add"," Address"]}),e.jsx(_t,{children:"Enter address details for your company."})]}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"label",children:"Label *"}),e.jsx(oe,{id:"label",value:n.label,onChange:c=>i({...n,label:c.target.value}),placeholder:"e.g., Main Warehouse",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"address_type",children:"Address Type *"}),e.jsxs(Te,{value:n.address_type,onValueChange:c=>i({...n,address_type:c}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"business",children:"Business"}),e.jsx(K,{value:"shipping",children:"Shipping"}),e.jsx(K,{value:"billing",children:"Billing"}),e.jsx(K,{value:"warehouse",children:"Warehouse"}),e.jsx(K,{value:"custom",children:"Custom"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"street_address",children:"Street Address *"}),e.jsx(Zt,{id:"street_address",value:n.street_address,onChange:c=>i({...n,street_address:c.target.value}),placeholder:"Enter street address",required:!0,rows:2})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"city",children:"City *"}),e.jsx(oe,{id:"city",value:n.city,onChange:c=>i({...n,city:c.target.value}),placeholder:"City",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"state_province",children:"State/Province"}),e.jsx(oe,{id:"state_province",value:n.state_province,onChange:c=>i({...n,state_province:c.target.value}),placeholder:"State/Province"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(oe,{id:"postal_code",value:n.postal_code,onChange:c=>i({...n,postal_code:c.target.value}),placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",children:"Country *"}),e.jsx(oe,{id:"country",value:n.country,onChange:c=>i({...n,country:c.target.value}),placeholder:"Country",required:!0})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_name",children:"Contact Name"}),e.jsx(oe,{id:"contact_name",value:n.contact_name,onChange:c=>i({...n,contact_name:c.target.value}),placeholder:"Contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(oe,{id:"contact_email",type:"email",value:n.contact_email,onChange:c=>i({...n,contact_email:c.target.value}),placeholder:"contact@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_phone",children:"Contact Phone"}),e.jsx(oe,{id:"contact_phone",value:n.contact_phone,onChange:c=>i({...n,contact_phone:c.target.value}),placeholder:"+1 234 567 8900"})]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"is_default_shipping",checked:n.is_default_shipping,onCheckedChange:c=>i({...n,is_default_shipping:c===!0})}),e.jsx(Z,{htmlFor:"is_default_shipping",className:"cursor-pointer",children:"Default Shipping Address"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"is_default_billing",checked:n.is_default_billing,onCheckedChange:c=>i({...n,is_default_billing:c===!0})}),e.jsx(Z,{htmlFor:"is_default_billing",className:"cursor-pointer",children:"Default Billing Address"})]})]}),e.jsxs(ms,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:l,children:l?"Saving...":"Save"})]})]})]})})}function r7e({consigneeShipper:t,addresses:s,loading:a,onSave:r,onDelete:n,dialogOpen:i,onDialogOpenChange:l,editingConsigneeShipper:o,onEdit:d}){return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Default Consignee/Shipper"}),e.jsx(ue,{children:"Set default consignee (for exporters) or shipper (for importers) information to pre-fill forms."})]}),e.jsxs(M,{onClick:()=>{d(null),l(!0)},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"})," Add Default"]})]})}),e.jsx(U,{children:a?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-5 h-5 rounded-full border-2 border-primary border-t-transparent animate-spin"})}):t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Bs,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No default consignee/shipper set up"}),e.jsxs(M,{onClick:()=>{d(null),l(!0)},className:"mt-4",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"})," Add Default Consignee/Shipper"]})]}):e.jsx("div",{className:"space-y-4",children:t.map(c=>e.jsx($,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Fa,{status:c.type_==="consignee"?"info":"success",children:c.type_}),e.jsx("h4",{className:"font-semibold",children:c.company_name})]}),c.contact_name&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Contact: ",c.contact_name,c.contact_email&&` (${c.contact_email})`]}),(c.street_address||c.address_id)&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:[c.street_address||"Address from address book",c.city&&`, ${c.city}`,c.country&&`, ${c.country}`]}),c.bank_name&&e.jsxs("p",{className:"text-sm text-muted-foreground mt-1",children:["Bank: ",c.bank_name,c.swift_code&&` (SWIFT: ${c.swift_code})`]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{d(c),l(!0)},children:e.jsx(zn,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>n(c.id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"w-4 h-4"})})]})]})},c.id))})}),e.jsx(n7e,{open:i,onOpenChange:l,consigneeShipper:o,addresses:s,onSave:r})]})}function n7e({open:t,onOpenChange:s,consigneeShipper:a,addresses:r,onSave:n}){const[i,l]=m.useState({company_id:"",type_:"consignee",company_name:"",contact_name:"",contact_email:"",contact_phone:"",address_id:void 0,street_address:"",city:"",state_province:"",postal_code:"",country:"",bank_name:"",bank_account:"",swift_code:""}),[o,d]=m.useState(!1),[c,u]=m.useState(!1);m.useEffect(()=>{a?(l({company_id:a.company_id,type_:a.type_,company_name:a.company_name,contact_name:a.contact_name||"",contact_email:a.contact_email||"",contact_phone:a.contact_phone||"",address_id:a.address_id||void 0,street_address:a.street_address||"",city:a.city||"",state_province:a.state_province||"",postal_code:a.postal_code||"",country:a.country||"",bank_name:a.bank_name||"",bank_account:a.bank_account||"",swift_code:a.swift_code||""}),u(!!a.address_id)):(l({company_id:"",type_:"consignee",company_name:"",contact_name:"",contact_email:"",contact_phone:"",address_id:void 0,street_address:"",city:"",state_province:"",postal_code:"",country:"",bank_name:"",bank_account:"",swift_code:""}),u(!1))},[a,t]);const h=async x=>{x.preventDefault(),d(!0);try{const g={...i};c&&i.address_id?(g.street_address=void 0,g.city=void 0,g.state_province=void 0,g.postal_code=void 0,g.country=void 0):g.address_id=void 0,await n(g)}finally{d(!1)}};return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:[a?"Edit":"Add"," Default Consignee/Shipper"]}),e.jsx(_t,{children:"Enter default consignee (for exporters) or shipper (for importers) information."})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"type_",children:"Type *"}),e.jsxs(Te,{value:i.type_,onValueChange:x=>l({...i,type_:x}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"consignee",children:"Consignee (for Exporters)"}),e.jsx(K,{value:"shipper",children:"Shipper (for Importers)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"company_name",children:"Company Name *"}),e.jsx(oe,{id:"company_name",value:i.company_name,onChange:x=>l({...i,company_name:x.target.value}),placeholder:"Company name",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_name",children:"Contact Name"}),e.jsx(oe,{id:"contact_name",value:i.contact_name,onChange:x=>l({...i,contact_name:x.target.value}),placeholder:"Contact name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_email",children:"Contact Email"}),e.jsx(oe,{id:"contact_email",type:"email",value:i.contact_email,onChange:x=>l({...i,contact_email:x.target.value}),placeholder:"contact@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_phone",children:"Contact Phone"}),e.jsx(oe,{id:"contact_phone",value:i.contact_phone,onChange:x=>l({...i,contact_phone:x.target.value}),placeholder:"+1 234 567 8900"})]})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"use_address_book",checked:c,onCheckedChange:x=>{u(x===!0),x||l({...i,address_id:void 0})}}),e.jsx(Z,{htmlFor:"use_address_book",className:"cursor-pointer",children:"Use address from address book"})]})}),c?e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"address_id",children:"Select Address"}),e.jsxs(Te,{value:i.address_id||"",onValueChange:x=>l({...i,address_id:x}),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select an address"})}),e.jsx(De,{children:r.map(x=>e.jsxs(K,{value:x.id,children:[x.label," - ",x.city,", ",x.country]},x.id))})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"street_address",children:"Street Address"}),e.jsx(Zt,{id:"street_address",value:i.street_address,onChange:x=>l({...i,street_address:x.target.value}),placeholder:"Enter street address",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"city",children:"City"}),e.jsx(oe,{id:"city",value:i.city,onChange:x=>l({...i,city:x.target.value}),placeholder:"City"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"state_province",children:"State/Province"}),e.jsx(oe,{id:"state_province",value:i.state_province,onChange:x=>l({...i,state_province:x.target.value}),placeholder:"State/Province"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"postal_code",children:"Postal Code"}),e.jsx(oe,{id:"postal_code",value:i.postal_code,onChange:x=>l({...i,postal_code:x.target.value}),placeholder:"Postal Code"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",children:"Country"}),e.jsx(oe,{id:"country",value:i.country,onChange:x=>l({...i,country:x.target.value}),placeholder:"Country"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bank_name",children:"Bank Name"}),e.jsx(oe,{id:"bank_name",value:i.bank_name,onChange:x=>l({...i,bank_name:x.target.value}),placeholder:"Bank name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bank_account",children:"Bank Account"}),e.jsx(oe,{id:"bank_account",value:i.bank_account,onChange:x=>l({...i,bank_account:x.target.value}),placeholder:"Account number"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"swift_code",children:"SWIFT Code"}),e.jsx(oe,{id:"swift_code",value:i.swift_code,onChange:x=>l({...i,swift_code:x.target.value}),placeholder:"SWIFT/BIC"})]})]}),e.jsxs(ms,{children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{type:"submit",disabled:o,children:o?"Saving...":"Save"})]})]})]})})}function mte({embedded:t=!1,lcData:s,role:a,hasIssues:r=!1,isSubmissionReady:n=!1,onFieldInferred:i}){const{toast:l}=et(),{user:o}=Dt(),d=a||(o?.role==="exporter"?"exporter":"importer"),[c,u]=m.useState("compose"),[h,x]=m.useState(null),[g,j]=m.useState({}),[y,b]=m.useState(""),[N,C]=m.useState(!1),[_,A]=m.useState(""),[k,E]=m.useState(""),[D,R]=m.useState(!1),[O,P]=m.useState(""),[T,B]=m.useState("bn"),[G,q]=m.useState(""),[z,H]=m.useState(!1),le=()=>{if(d==="exporter"){const ce=[],Re=[];return r?(ce.push("discrepancy-response"),Re.push("bank-cover-letter","shipping-advice","invoice-helper","coo-helper")):n?(ce.push("bank-cover-letter"),Re.push("shipping-advice","invoice-helper","coo-helper")):(ce.push("bank-cover-letter"),Re.push("discrepancy-response","shipping-advice","invoice-helper","coo-helper")),{recommended:ce,others:Re}}else{const ce=[],Re=[];return r?(ce.push("supplier-fix-email","amendment-request"),Re.push("compliance-memo")):(ce.push("compliance-memo"),Re.push("supplier-fix-email","amendment-request")),{recommended:ce,others:Re}}},{recommended:Y,others:te}=le(),ne=ce=>({"bank-cover-letter":"Generate Bank Submission Cover Letter","discrepancy-response":"Draft Discrepancy Response to Bank","shipping-advice":"Create Shipping/Booking Advice Email","invoice-helper":"Invoice/Packing List Wording Helper","coo-helper":"COO Statement Helper","supplier-fix-email":"Send Supplier Fix Pack Email","amendment-request":"Draft Bank Amendment Request","compliance-memo":"Generate Internal Compliance Memo"})[ce],ae=ce=>({"bank-cover-letter":e.jsx(Be,{className:"w-4 h-4"}),"discrepancy-response":e.jsx(Lg,{className:"w-4 h-4"}),"shipping-advice":e.jsx(Va,{className:"w-4 h-4"}),"invoice-helper":e.jsx($w,{className:"w-4 h-4"}),"coo-helper":e.jsx(Be,{className:"w-4 h-4"}),"supplier-fix-email":e.jsx($i,{className:"w-4 h-4"}),"amendment-request":e.jsx($w,{className:"w-4 h-4"}),"compliance-memo":e.jsx(Vt,{className:"w-4 h-4"})})[ce],re=async()=>{if(h){C(!0);try{await new Promise(Ne=>setTimeout(Ne,2e3));let ce="";const Re=s?.lc_number||"LC-XXXX-XXXX",ie=o?.name||(d==="exporter"?"Exporter":"Importer");switch(h){case"bank-cover-letter":ce=`Dear Sir/Madam,
apps\web\dist\assets\index-Bz84JA8h.js:567:3. Consider LC amendment if necessary`;E(ce),l({title:"Explanation Generated",description:"AI has generated an explanation based on your context."})}catch{l({title:"Explanation Failed",description:"Failed to generate explanation. Please try again.",variant:"destructive"})}finally{R(!1)}},ye=async()=>{if(!O.trim()){l({title:"Text Required",description:"Please provide text to translate.",variant:"destructive"});return}H(!0);try{await new Promise(Re=>setTimeout(Re,1500)),q({bn:"à¦à¦Ÿà¦¿ à¦à¦•à¦Ÿà¦¿ à¦¨à¦®à§à¦¨à¦¾ à¦…à¦¨à§à¦¬à¦¾à¦¦à¥¤",ar:"Ù‡Ø°Ù‡ ØªØ±Ø¬Ù…Ø© Ù†Ù…ÙˆØ°Ø¬ÙŠØ©.",hi:"à¤¯à¤¹ à¤à¤• à¤¨à¤®à¥‚à¤¨à¤¾ à¤…à¤¨à¥à¤µà¤¾à¤¦ à¤¹à¥ˆà¥¤",ur:"ÛŒÛ Ø§ÛŒÚ© Ù†Ù…ÙˆÙ†Û ØªØ±Ø¬Ù…Û ÛÛ’Û”",zh:"è¿™æ˜¯ä¸€ä¸ªç¤ºä¾‹ç¿»è¯‘ã€‚"}[T]||O),l({title:"Translation Complete",description:"Text has been translated successfully."})}catch{l({title:"Translation Failed",description:"Failed to translate text. Please try again.",variant:"destructive"})}finally{H(!1)}},ke=(ce,Re)=>{navigator.clipboard.writeText(ce),l({title:"Copied",description:`${Re} copied to clipboard.`})},ze=ce=>{switch(ce){case"bank-cover-letter":return[{key:"additionalNotes",label:"Additional Notes",placeholder:"Any special instructions or notes..."}];case"discrepancy-response":return[{key:"discrepancyDetails",label:"Discrepancy Details",placeholder:"Describe the discrepancies and your response..."}];case"shipping-advice":return[{key:"recipientName",label:"Recipient Name",placeholder:"Buyer/Consignee name"},{key:"shippingDetails",label:"Shipping Details",placeholder:"Vessel, ETD, ETA, etc."}];case"invoice-helper":return[{key:"invoiceContext",label:"Invoice Context",placeholder:"Describe what you need help with..."}];case"coo-helper":return[{key:"cooContext",label:"COO Context",placeholder:"Describe your COO requirements..."}];case"supplier-fix-email":return[{key:"supplierName",label:"Supplier Name",placeholder:"Supplier company name"},{key:"issueDetails",label:"Issue Details",placeholder:"Describe the issues that need correction..."}];case"amendment-request":return[{key:"amendmentDetails",label:"Amendment Details",placeholder:"Describe the requested amendments..."}];case"compliance-memo":return[{key:"memoContext",label:"Memo Context",placeholder:"Describe the compliance situation..."}];default:return[]}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[!t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"AI Assistance"}),e.jsx("p",{className:"text-muted-foreground",children:"Use AI to compose documents, explain discrepancies, and translate text."})]}),e.jsxs(Os,{value:c,onValueChange:ce=>u(ce),className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsxs(He,{value:"compose",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Compose"]}),e.jsxs(He,{value:"explain",className:"flex items-center gap-2",children:[e.jsx(Xm,{className:"w-4 h-4"}),"Explain"]}),e.jsxs(He,{value:"translate",className:"flex items-center gap-2",children:[e.jsx(zw,{className:"w-4 h-4"}),"Translate"]})]}),e.jsx(Qe,{value:"compose",className:"mt-6",children:e.jsxs("div",{className:"space-y-6",children:[Y.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Q,{variant:"default",className:"bg-green-600",children:"Recommended"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Based on your current LC status"})]}),e.jsx("div",{className:"grid gap-3",children:Y.map(ce=>e.jsx($,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>x(ce),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ae(ce),e.jsx("span",{className:"font-medium",children:ne(ce)})]}),h===ce&&e.jsx(Qs,{className:"w-5 h-5 text-green-600"})]})})},ce))})]}),te.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"flex items-center gap-2 mb-4",children:e.jsx(Q,{variant:"outline",children:"Other Tools"})}),e.jsx("div",{className:"grid gap-3",children:te.map(ce=>e.jsx($,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>x(ce),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[ae(ce),e.jsx("span",{className:"font-medium",children:ne(ce)})]}),h===ce&&e.jsx(Qs,{className:"w-5 h-5 text-green-600"})]})})},ce))})]}),h&&e.jsxs($,{className:"mt-6",children:[e.jsxs(X,{children:[e.jsx(ee,{children:ne(h)}),e.jsx(ue,{children:"Provide the required information to generate your content."})]}),e.jsxs(U,{className:"space-y-4",children:[ze(h).map(ce=>e.jsxs("div",{children:[e.jsx(Z,{htmlFor:ce.key,children:ce.label}),e.jsx(Zt,{id:ce.key,placeholder:ce.placeholder,value:g[ce.key]||"",onChange:Re=>j({...g,[ce.key]:Re.target.value}),rows:3})]},ce.key)),e.jsx(M,{onClick:re,disabled:N,className:"w-full",children:N?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ni,{className:"h-4 w-4 mr-2"}),"Generate"]})}),y&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Generated Content"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ke(y,"Content"),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:e.jsx("pre",{className:"whitespace-pre-wrap text-sm",children:y})})]})]})]})]})}),e.jsx(Qe,{value:"explain",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:d==="exporter"?"Explain This Discrepancy and How to Fix":"Explain PO â†” LC â†” Supplier Mismatch"}),e.jsx(ue,{children:d==="exporter"?"Get AI-powered explanations for discrepancies and guidance on how to fix them.":"Understand mismatches between Purchase Order, Letter of Credit, and Supplier documents."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"explain-context",children:"Context & Question"}),e.jsx(Zt,{id:"explain-context",placeholder:d==="exporter"?"Describe the discrepancy or ask a question about LC compliance...":"Describe the mismatch between PO, LC, and supplier documents...",value:_,onChange:ce=>A(ce.target.value),rows:4})]}),e.jsx(M,{onClick:xe,disabled:D||!_.trim(),className:"w-full",children:D?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Explaining..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Xm,{className:"h-4 w-4 mr-2"}),"Explain"]})}),k&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Explanation"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ke(k,"Explanation"),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:e.jsx("div",{className:"prose prose-sm max-w-none whitespace-pre-wrap text-sm",children:k})})]})]})]})}),e.jsx(Qe,{value:"translate",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Translate Text"}),e.jsx(ue,{children:"Translate LC descriptions, documents, and communications to multiple languages."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"text-to-translate",children:"Text to Translate"}),e.jsx(Zt,{id:"text-to-translate",placeholder:"Enter text to translate...",value:O,onChange:ce=>P(ce.target.value),rows:4})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"target-language",children:"Target Language"}),e.jsxs(Te,{value:T,onValueChange:B,children:[e.jsx(Pe,{id:"target-language",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bn",children:"Bengali (à¦¬à¦¾à¦‚à¦²à¦¾)"}),e.jsx(K,{value:"ar",children:"Arabic (Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©)"}),e.jsx(K,{value:"hi",children:"Hindi (à¤¹à¤¿à¤¨à¥à¤¦à¥€)"}),e.jsx(K,{value:"ur",children:"Urdu (Ø§Ø±Ø¯Ùˆ)"}),e.jsx(K,{value:"zh",children:"Chinese (ä¸­æ–‡)"})]})]})]}),e.jsx(M,{onClick:ye,disabled:z||!O.trim(),className:"w-full",children:z?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Translating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zw,{className:"h-4 w-4 mr-2"}),"Translate"]})}),G&&e.jsxs("div",{className:"mt-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Translated Text"}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>ke(G,"Translation"),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Copy"]})]}),e.jsx("div",{className:"border rounded-lg p-4 bg-muted/50",children:e.jsx("p",{className:"text-sm",children:G})})]})]})]})})]})]})}const j0="lcopilot_content_library",pf=[{id:"desc-1",type:"description",value:"100% Cotton T-Shirts, Made in Bangladesh, HS Code: 6109.10.00",label:"Cotton T-Shirts",usageCount:15,lastUsed:"2024-01-15",isFavorite:!0,tags:["textiles","apparel"]},{id:"hs-1",type:"hs_code",value:"6109.10.00",label:"Cotton T-Shirts",usageCount:12,lastUsed:"2024-01-18",isFavorite:!0,tags:["textiles"]},{id:"port-1",type:"port",value:"Chittagong Port, Bangladesh",label:"Chittagong Port",usageCount:25,lastUsed:"2024-01-20",isFavorite:!0,tags:["bangladesh"]},{id:"port-2",type:"port",value:"Port of Singapore",label:"Singapore Port",usageCount:8,lastUsed:"2024-01-10",isFavorite:!1,tags:["singapore"]}];function hte({embedded:t=!1,onSelect:s}){const{toast:a}=et(),{user:r}=Dt(),[n,i]=m.useState("all"),[l,o]=m.useState(""),[d,c]=m.useState(pf),[u,h]=m.useState(!1),[x,g]=m.useState("description"),[j,y]=m.useState(""),[b,N]=m.useState("");m.useEffect(()=>{try{const O=localStorage.getItem(j0);if(O){const P=JSON.parse(O);c([...pf,...P])}}catch(O){console.error("Failed to load content library:",O)}},[]);const C=m.useMemo(()=>{let O=d;if(n!=="all"){const P={descriptions:"description",hs_codes:"hs_code",ports:"port"};O=O.filter(T=>T.type===P[n])}if(l.trim()){const P=l.toLowerCase();O=O.filter(T=>T.value.toLowerCase().includes(P)||T.label?.toLowerCase().includes(P)||T.tags?.some(B=>B.toLowerCase().includes(P)))}return O.sort((P,T)=>P.isFavorite!==T.isFavorite?P.isFavorite?-1:1:T.usageCount-P.usageCount)},[d,n,l]),_=()=>{if(!j.trim()){a({title:"Value Required",description:"Please provide a value for the content item.",variant:"destructive"});return}const O={id:`content-${Date.now()}`,type:x,value:j.trim(),label:b.trim()||void 0,usageCount:0,isFavorite:!1},P=[...d,O];c(P),localStorage.setItem(j0,JSON.stringify(P.filter(T=>!pf.find(B=>B.id===T.id)))),y(""),N(""),h(!1),a({title:"Content Added",description:"New content item has been added to your library."})},A=O=>{const P=d.map(T=>T.id===O?{...T,isFavorite:!T.isFavorite}:T);c(P),localStorage.setItem(j0,JSON.stringify(P.filter(T=>!pf.find(B=>B.id===T.id))))},k=O=>{if(confirm("Delete this content item?")){const P=d.filter(T=>T.id!==O);c(P),localStorage.setItem(j0,JSON.stringify(P.filter(T=>!pf.find(B=>B.id===T.id)))),a({title:"Content Deleted",description:"Content item has been removed from your library."})}},E=O=>{const P=d.map(T=>T.id===O.id?{...T,usageCount:T.usageCount+1,lastUsed:new Date().toISOString().split("T")[0]}:T);c(P),localStorage.setItem(j0,JSON.stringify(P.filter(T=>!pf.find(B=>B.id===T.id)))),navigator.clipboard.writeText(O.value),a({title:"Content Selected",description:`${O.label||O.value} copied to clipboard.`}),s?.(O)},D=O=>{switch(O){case"description":return e.jsx(Be,{className:"h-4 w-4"});case"hs_code":return e.jsx(Ps,{className:"h-4 w-4"});case"port":return e.jsx(oi,{className:"h-4 w-4"});default:return e.jsx(Be,{className:"h-4 w-4"})}},R=O=>{switch(O){case"description":return"Description";case"hs_code":return"HS Code";case"port":return"Port";case"incoterms":return"Incoterms";case"currency":return"Currency";default:return O}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[!t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Content Library"}),e.jsx("p",{className:"text-muted-foreground",children:"Reuse frequently used descriptions, HS codes, ports, and other content to speed up your workflow."})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Your Content Library"}),e.jsxs(ue,{children:[C.length," item",C.length!==1?"s":""," available"]})]}),e.jsxs(M,{onClick:()=>h(!0),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Content"]})]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search content library...",value:l,onChange:O=>o(O.target.value),className:"pl-10"})]}),e.jsxs(Os,{value:n,onValueChange:O=>i(O),children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"all",children:"All"}),e.jsx(He,{value:"descriptions",children:"Descriptions"}),e.jsx(He,{value:"hs_codes",children:"HS Codes"}),e.jsx(He,{value:"ports",children:"Ports"})]}),e.jsx(Qe,{value:n,className:"mt-4",children:C.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(DD,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No content found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:l?"Try a different search term":"Add your first content item to get started"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Label"}),e.jsx(je,{children:"Value"}),e.jsx(je,{children:"Usage"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(oa,{children:C.map(O=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[D(O.type),e.jsx("span",{className:"text-sm",children:R(O.type)})]})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[O.label||"-",O.isFavorite&&e.jsx(nl,{className:"h-3 w-3 fill-yellow-400 text-yellow-400"})]})}),e.jsx(fe,{children:e.jsx("div",{className:"max-w-md truncate",title:O.value,children:O.value})}),e.jsx(fe,{children:e.jsxs(Q,{variant:"secondary",children:[O.usageCount," times"]})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>E(O),children:e.jsx(qa,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>A(O.id),children:O.isFavorite?e.jsx(nl,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"}):e.jsx(B1,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>k(O.id),children:e.jsx(ia,{className:"h-4 w-4"})})]})})]},O.id))})]})})]})]})]}),u?e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Add Content to Library"}),e.jsx(ue,{children:"Save frequently used content for quick access."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"content-type",children:"Content Type"}),e.jsxs(Te,{value:x,onValueChange:O=>g(O),children:[e.jsx(Pe,{id:"content-type",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"description",children:"Description"}),e.jsx(K,{value:"hs_code",children:"HS Code"}),e.jsx(K,{value:"port",children:"Port"}),e.jsx(K,{value:"incoterms",children:"Incoterms"}),e.jsx(K,{value:"currency",children:"Currency"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"content-label",children:"Label (Optional)"}),e.jsx(oe,{id:"content-label",placeholder:"e.g., Cotton T-Shirts",value:b,onChange:O=>N(O.target.value)})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"content-value",children:"Value *"}),e.jsx(Zt,{id:"content-value",placeholder:"Enter the content value...",value:j,onChange:O=>y(O.target.value),rows:3})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{onClick:_,disabled:!j.trim(),children:"Add Content"}),e.jsx(M,{variant:"outline",onClick:()=>h(!1),children:"Cancel"})]})]})]}):null]})}const b0="lcopilot_shipment_timelines",ff=[{id:"milestone-1",lcNumber:"LC-2024-001",title:"Shipment Date",description:"Latest date of shipment as per LC",dueDate:Ix(new Date,5).toISOString(),status:"pending",reminderEnabled:!0,reminderDaysBefore:3},{id:"milestone-2",lcNumber:"LC-2024-001",title:"Document Presentation",description:"Present documents to bank within 21 days of shipment",dueDate:Ix(new Date,26).toISOString(),status:"pending",reminderEnabled:!0,reminderDaysBefore:7},{id:"milestone-3",lcNumber:"LC-2024-002",title:"LC Expiry",description:"Letter of Credit expires",dueDate:Ix(new Date,-2).toISOString(),status:"overdue",reminderEnabled:!0,reminderDaysBefore:14}];function xte({embedded:t=!1,lcNumber:s}){const{toast:a}=et(),{user:r}=Dt(),[n,i]=m.useState(ff),[l,o]=m.useState(!1),[d,c]=m.useState(null),[u,h]=m.useState(""),[x,g]=m.useState(""),[j,y]=m.useState(""),[b,N]=m.useState(!0),[C,_]=m.useState(7);m.useEffect(()=>{try{const P=localStorage.getItem(b0);if(P){const T=JSON.parse(P);i([...ff,...T])}}catch(P){console.error("Failed to load shipment timelines:",P)}},[]);const A=m.useMemo(()=>{let P=n;return s&&(P=P.filter(T=>T.lcNumber===s)),P.sort((T,B)=>new Date(T.dueDate).getTime()-new Date(B.dueDate).getTime())},[n,s]);m.useEffect(()=>{A.forEach(P=>{if(P.reminderEnabled&&P.status==="pending"){const T=new Date(P.dueDate),B=Ix(T,-P.reminderDaysBefore);(L7(B)||LN(B)&&I7(T))&&a({title:"Milestone Reminder",description:`${P.title} for ${P.lcNumber} is due in ${P.reminderDaysBefore} days.`})}})},[A,a]);const k=()=>{if(!u.trim()||!j){a({title:"Fields Required",description:"Please provide title and due date.",variant:"destructive"});return}const P={id:`milestone-${Date.now()}`,lcNumber:s||"LC-XXXX-XXXX",title:u.trim(),description:x.trim()||void 0,dueDate:new Date(j).toISOString(),status:LN(new Date(j))?"overdue":"pending",reminderEnabled:b,reminderDaysBefore:C},T=[...n,P];i(T),localStorage.setItem(b0,JSON.stringify(T.filter(B=>!ff.find(G=>G.id===B.id)))),h(""),g(""),y(""),N(!0),_(7),o(!1),a({title:"Milestone Added",description:"New milestone has been added to your timeline."})},E=P=>{const T=n.map(B=>B.id===P?{...B,status:"completed",completedAt:new Date().toISOString()}:B);i(T),localStorage.setItem(b0,JSON.stringify(T.filter(B=>!ff.find(G=>G.id===B.id)))),a({title:"Milestone Completed",description:"Milestone marked as completed."})},D=P=>{const T=n.map(B=>B.id===P?{...B,reminderEnabled:!B.reminderEnabled}:B);i(T),localStorage.setItem(b0,JSON.stringify(T.filter(B=>!ff.find(G=>G.id===B.id))))},R=P=>{if(confirm("Delete this milestone?")){const T=n.filter(B=>B.id!==P);i(T),localStorage.setItem(b0,JSON.stringify(T.filter(B=>!ff.find(G=>G.id===B.id)))),a({title:"Milestone Deleted",description:"Milestone has been removed."})}},O=P=>{const T=new Date(P.dueDate);let B=P.status;switch(B==="pending"&&LN(T)&&(B="overdue"),B){case"completed":return e.jsxs(Q,{className:"bg-green-500",children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"})," Completed"]});case"overdue":return e.jsxs(Q,{variant:"destructive",children:[e.jsx(ks,{className:"h-3 w-3 mr-1"})," Overdue"]});case"pending":if(L7(T))return e.jsx(Q,{className:"bg-yellow-500",children:"Due Today"});if(I7(T)){const G=Math.ceil((T.getTime()-new Date().getTime())/864e5);return e.jsxs(Q,{variant:"secondary",children:[G," days left"]})}return e.jsx(Q,{variant:"secondary",children:"Pending"});default:return e.jsx(Q,{variant:"secondary",children:B})}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[!t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Shipment Timeline"}),e.jsx("p",{className:"text-muted-foreground",children:"Track important milestones and get reminders for your LC shipments."})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Milestones"}),e.jsxs(ue,{children:[A.length," milestone",A.length!==1?"s":""," tracked"]})]}),e.jsxs(wt,{open:l,onOpenChange:o,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Add Milestone"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Add Milestone"}),e.jsx(_t,{children:"Create a new milestone to track important dates in your shipment timeline."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"milestone-title",children:"Title *"}),e.jsx(oe,{id:"milestone-title",placeholder:"e.g., Shipment Date, Document Presentation",value:u,onChange:P=>h(P.target.value)})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"milestone-description",children:"Description"}),e.jsx(oe,{id:"milestone-description",placeholder:"Optional description",value:x,onChange:P=>g(P.target.value)})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"milestone-date",children:"Due Date *"}),e.jsx(oe,{id:"milestone-date",type:"date",value:j,onChange:P=>y(P.target.value)})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"reminder-enabled",checked:b,onChange:P=>N(P.target.checked),className:"rounded"}),e.jsx(Z,{htmlFor:"reminder-enabled",className:"cursor-pointer",children:"Enable reminder"})]}),b&&e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"reminder-days",children:"Remind me (days before)"}),e.jsxs(Te,{value:C.toString(),onValueChange:P=>_(parseInt(P)),children:[e.jsx(Pe,{id:"reminder-days",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"1",children:"1 day before"}),e.jsx(K,{value:"3",children:"3 days before"}),e.jsx(K,{value:"7",children:"7 days before"}),e.jsx(K,{value:"14",children:"14 days before"}),e.jsx(K,{value:"30",children:"30 days before"})]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>o(!1),children:"Cancel"}),e.jsx(M,{onClick:k,disabled:!u.trim()||!j,children:"Add Milestone"})]})]})]})]})}),e.jsx(U,{children:A.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ya,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No milestones tracked"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Add milestones to track important dates in your shipment timeline"})]}):e.jsx("div",{className:"space-y-4",children:A.map(P=>{const T=new Date(P.dueDate),B=P.status==="overdue"||P.status==="pending"&&LN(T);return e.jsx($,{className:B?"border-destructive":"",children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:P.title}),O(P)]}),P.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:P.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsx("span",{children:hs(T,"MMM dd, yyyy")})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"h-4 w-4"}),e.jsxs("span",{children:["LC: ",P.lcNumber]})]}),P.reminderEnabled&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($s,{className:"h-4 w-4"}),e.jsxs("span",{children:[P.reminderDaysBefore," days before"]})]})]}),P.completedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Completed: ",hs(new Date(P.completedAt),"MMM dd, yyyy")]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[P.status!=="completed"&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>E(P.id),children:[e.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Complete"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D(P.id),children:P.reminderEnabled?e.jsx($s,{className:"h-4 w-4"}):e.jsx(Yq,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>R(P.id),children:e.jsx(ia,{className:"h-4 w-4"})})]})]})})},P.id)})})})]})]})}function i7e(t){if(typeof document>"u")return;let s=document.head||document.getElementsByTagName("head")[0],a=document.createElement("style");a.type="text/css",s.appendChild(a),a.styleSheet?a.styleSheet.cssText=t:a.appendChild(document.createTextNode(t))}Array(12).fill(0);let VP=1;class l7e{constructor(){this.subscribe=s=>(this.subscribers.push(s),()=>{const a=this.subscribers.indexOf(s);this.subscribers.splice(a,1)}),this.publish=s=>{this.subscribers.forEach(a=>a(s))},this.addToast=s=>{this.publish(s),this.toasts=[...this.toasts,s]},this.create=s=>{var a;const{message:r,...n}=s,i=typeof s?.id=="number"||((a=s.id)==null?void 0:a.length)>0?s.id:VP++,l=this.toasts.find(d=>d.id===i),o=s.dismissible===void 0?!0:s.dismissible;return this.dismissedToasts.has(i)&&this.dismissedToasts.delete(i),l?this.toasts=this.toasts.map(d=>d.id===i?(this.publish({...d,...s,id:i,title:r}),{...d,...s,id:i,dismissible:o,title:r}):d):this.addToast({title:r,...n,dismissible:o,id:i}),i},this.dismiss=s=>(s?(this.dismissedToasts.add(s),requestAnimationFrame(()=>this.subscribers.forEach(a=>a({id:s,dismiss:!0})))):this.toasts.forEach(a=>{this.subscribers.forEach(r=>r({id:a.id,dismiss:!0}))}),s),this.message=(s,a)=>this.create({...a,message:s}),this.error=(s,a)=>this.create({...a,message:s,type:"error"}),this.success=(s,a)=>this.create({...a,type:"success",message:s}),this.info=(s,a)=>this.create({...a,type:"info",message:s}),this.warning=(s,a)=>this.create({...a,type:"warning",message:s}),this.loading=(s,a)=>this.create({...a,type:"loading",message:s}),this.promise=(s,a)=>{if(!a)return;let r;a.loading!==void 0&&(r=this.create({...a,promise:s,type:"loading",message:a.loading,description:typeof a.description!="function"?a.description:void 0}));const n=Promise.resolve(s instanceof Function?s():s);let i=r!==void 0,l;const o=n.then(async c=>{if(l=["resolve",c],lt.isValidElement(c))i=!1,this.create({id:r,type:"default",message:c});else if(c7e(c)&&!c.ok){i=!1;const h=typeof a.error=="function"?await a.error(`HTTP error! status: ${c.status}`):a.error,x=typeof a.description=="function"?await a.description(`HTTP error! status: ${c.status}`):a.description,j=typeof h=="object"&&!lt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:x,...j})}else if(c instanceof Error){i=!1;const h=typeof a.error=="function"?await a.error(c):a.error,x=typeof a.description=="function"?await a.description(c):a.description,j=typeof h=="object"&&!lt.isValidElement(h)?h:{message:h};this.create({id:r,type:"error",description:x,...j})}else if(a.success!==void 0){i=!1;const h=typeof a.success=="function"?await a.success(c):a.success,x=typeof a.description=="function"?await a.description(c):a.description,j=typeof h=="object"&&!lt.isValidElement(h)?h:{message:h};this.create({id:r,type:"success",description:x,...j})}}).catch(async c=>{if(l=["reject",c],a.error!==void 0){i=!1;const u=typeof a.error=="function"?await a.error(c):a.error,h=typeof a.description=="function"?await a.description(c):a.description,g=typeof u=="object"&&!lt.isValidElement(u)?u:{message:u};this.create({id:r,type:"error",description:h,...g})}}).finally(()=>{i&&(this.dismiss(r),r=void 0),a.finally==null||a.finally.call(a)}),d=()=>new Promise((c,u)=>o.then(()=>l[0]==="reject"?u(l[1]):c(l[1])).catch(u));return typeof r!="string"&&typeof r!="number"?{unwrap:d}:Object.assign(r,{unwrap:d})},this.custom=(s,a)=>{const r=a?.id||VP++;return this.create({jsx:s(r),id:r,...a}),r},this.getActiveToasts=()=>this.toasts.filter(s=>!this.dismissedToasts.has(s.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Fo=new l7e,o7e=(t,s)=>{const a=s?.id||VP++;return Fo.addToast({title:t,...s,id:a}),a},c7e=t=>t&&typeof t=="object"&&"ok"in t&&typeof t.ok=="boolean"&&"status"in t&&typeof t.status=="number",d7e=o7e,u7e=()=>Fo.toasts,m7e=()=>Fo.getActiveToasts(),Vn=Object.assign(d7e,{success:Fo.success,info:Fo.info,warning:Fo.warning,error:Fo.error,custom:Fo.custom,message:Fo.message,promise:Fo.promise,dismiss:Fo.dismiss,loading:Fo.loading},{getHistory:u7e,getToasts:m7e});i7e("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");var da=(t=>(t.FREE="FREE",t.STARTER="STARTER",t.PROFESSIONAL="PROFESSIONAL",t.ENTERPRISE="ENTERPRISE",t))(da||{}),Gf=(t=>(t.PENDING="PENDING",t.PAID="PAID",t.OVERDUE="OVERDUE",t.CANCELLED="CANCELLED",t.FAILED="FAILED",t))(Gf||{}),Om=(t=>(t.SSLCOMMERZ="sslcommerz",t.STRIPE="stripe",t))(Om||{});const Kf={FREE:{name:"Free",quota:5,price:0,currency:"BDT",features:["5 LC validations per month","Basic validation features","Email support"]},STARTER:{name:"Starter",quota:100,price:15e3,currency:"BDT",features:["100 LC validations per month","Standard features","Priority email support","Usage analytics"],popular:!0},PROFESSIONAL:{name:"Professional",quota:500,price:45e3,currency:"BDT",features:["500 LC validations per month","Advanced features","Phone support","Custom integrations","Advanced analytics"]},ENTERPRISE:{name:"Enterprise",quota:null,price:0,currency:"BDT",features:["Unlimited validations","All features included","Dedicated support","Custom workflows","SLA guarantees"]}},ZE={warning:80,critical:95,exceeded:100};function Tr(t,s="BDT"){return`${{BDT:"à§³",USD:"$"}[s]}${t.toLocaleString()}`}function WP(t,s){if(!s)return"normal";const a=t/s*100;return a>=ZE.exceeded?"exceeded":a>=ZE.critical?"critical":a>=ZE.warning?"warning":"normal"}function Ym(t){return Kf[t].name}function sR(t){return Kf[t].quota===null}function pte(t){switch(t){case"PAID":return"text-green-600 bg-green-100";case"PENDING":return"text-yellow-600 bg-yellow-100";case"OVERDUE":case"FAILED":return"text-red-600 bg-red-100";case"CANCELLED":return"text-gray-600 bg-gray-100";default:return"text-gray-600 bg-gray-100"}}function BN(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function fte({usage:t,plan:s,className:a,showCost:r=!0}){const{quota_used:n,quota_limit:i,quota_remaining:l,total_cost:o}=t,d=sR(s),c=WP(n,i),u=i?Math.min(n/i*100,100):0,x=(()=>{switch(c){case"exceeded":return{color:"text-red-600",bgColor:"bg-red-50",borderColor:"border-red-200",progressColor:"bg-red-500",icon:bs,label:"Quota Exceeded",badgeVariant:"destructive"};case"critical":return{color:"text-orange-600",bgColor:"bg-orange-50",borderColor:"border-orange-200",progressColor:"bg-orange-500",icon:Ve,label:"Critical",badgeVariant:"destructive"};case"warning":return{color:"text-yellow-600",bgColor:"bg-yellow-50",borderColor:"border-yellow-200",progressColor:"bg-yellow-500",icon:mt,label:"Warning",badgeVariant:"secondary"};default:return{color:"text-green-600",bgColor:"bg-green-50",borderColor:"border-green-200",progressColor:"bg-green-500",icon:Oe,label:"Good",badgeVariant:"secondary"}}})(),g=x.icon;return d?e.jsxs($,{className:BN("",a),children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Quota Usage"}),e.jsx(Q,{variant:"secondary",className:"bg-blue-50 text-blue-600",children:"Unlimited"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:n}),e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-blue-600",children:[e.jsx(Oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Unlimited"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Validations used this month"}),r&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total cost:"}),e.jsx("span",{className:"font-medium",children:Tr(o)})]})})]})})]}):e.jsxs($,{className:BN("transition-colors",x.bgColor,x.borderColor,a),children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Quota Usage"}),e.jsxs(Q,{variant:x.badgeVariant,className:"gap-1",children:[e.jsx(g,{className:"h-3 w-3"}),x.label]})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:BN("text-2xl font-bold",x.color),children:n}),e.jsx("span",{className:"text-sm text-muted-foreground",children:i?` / ${i}`:""})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:BN("text-sm font-medium",x.color),children:l!==null&&l>=0?`${l} remaining`:"Quota exceeded"}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[u.toFixed(1),"% used"]})]})]}),i&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(es,{value:Math.min(u,100),className:"h-2",indicatorClassName:x.progressColor}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:i})]})]}),r&&e.jsx("div",{className:"pt-2 border-t",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total cost this month:"}),e.jsx("span",{className:"font-medium",children:Tr(o)})]})}),c==="exceeded"&&e.jsxs("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-red-800",children:[e.jsx(bs,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Quota exceeded"})]}),e.jsx("p",{className:"text-xs text-red-600 mt-1",children:"You've exceeded your monthly quota. Consider upgrading your plan to continue validation services."})]}),c==="critical"&&e.jsxs("div",{className:"p-3 bg-orange-50 border border-orange-200 rounded-md",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-orange-800",children:[e.jsx(Ve,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Nearing quota limit"})]}),e.jsx("p",{className:"text-xs text-orange-600 mt-1",children:"You're close to your monthly limit. Consider upgrading to avoid service interruption."})]})]})})]})}function V7(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function h7e({billingInfo:t,onUpgrade:s,className:a,showUpgradeButton:r=!0}){const{plan:n}=t,i=Kf[n],l=sR(n),o=()=>{switch(n){case da.FREE:return e.jsx(nV,{className:"h-5 w-5 text-gray-500"});case da.STARTER:return e.jsx(gn,{className:"h-5 w-5 text-blue-500"});case da.PROFESSIONAL:return e.jsx(Jm,{className:"h-5 w-5 text-purple-500"});case da.ENTERPRISE:return e.jsx(cp,{className:"h-5 w-5 text-gold-500"});default:return e.jsx(gn,{className:"h-5 w-5 text-gray-500"})}},d=()=>{switch(n){case da.FREE:return"text-gray-600";case da.STARTER:return"text-blue-600";case da.PROFESSIONAL:return"text-purple-600";case da.ENTERPRISE:return"text-gold-600";default:return"text-gray-600"}},c=()=>{switch(n){case da.FREE:return e.jsx(Q,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Free Plan"});case da.STARTER:return e.jsx(Q,{variant:"default",className:"bg-blue-100 text-blue-600",children:"Starter"});case da.PROFESSIONAL:return e.jsx(Q,{variant:"default",className:"bg-purple-100 text-purple-600",children:"Professional"});case da.ENTERPRISE:return e.jsx(Q,{variant:"default",className:"bg-gold-100 text-gold-600",children:"Enterprise"});default:return e.jsx(Q,{variant:"secondary",children:Ym(n)})}},u=n!==da.ENTERPRISE,h=()=>{const x=new Date;return x.setMonth(x.getMonth()+1),x.setDate(1),x.toLocaleDateString("en-BD",{year:"numeric",month:"long",day:"numeric"})};return e.jsxs($,{className:V7("",a),children:[e.jsx(X,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[o(),e.jsx(ee,{className:V7("text-lg",d()),children:Ym(n)})]}),c()]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-baseline space-x-2",children:i.price>0?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-2xl font-bold",children:Tr(i.price)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"/month"})]}):n===da.ENTERPRISE?e.jsx("span",{className:"text-xl font-semibold text-gold-600",children:"Custom Pricing"}):e.jsx("span",{className:"text-2xl font-bold text-green-600",children:"Free"})}),e.jsx("div",{className:"text-sm text-muted-foreground",children:l?e.jsx("span",{className:"text-blue-600 font-medium",children:"Unlimited validations"}):e.jsxs("span",{children:[i.quota?.toLocaleString()," validations per month"]})})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Plan Features"}),e.jsxs("ul",{className:"space-y-1",children:[i.features.slice(0,3).map((x,g)=>e.jsxs("li",{className:"text-sm flex items-start space-x-2",children:[e.jsx("span",{className:"text-green-500 mt-0.5",children:"âœ“"}),e.jsx("span",{children:x})]},g)),i.features.length>3&&e.jsxs("li",{className:"text-sm text-muted-foreground",children:["+",i.features.length-3," more features"]})]})]}),n!==da.FREE&&e.jsxs(e.Fragment,{children:[e.jsx(As,{}),e.jsx("div",{className:"space-y-1",children:e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Next billing:"}),e.jsx("span",{className:"font-medium",children:h()})]})})]}),u&&r&&e.jsxs(e.Fragment,{children:[e.jsx(As,{}),e.jsxs(M,{onClick:s,className:"w-full",variant:n===da.FREE?"default":"outline",children:[e.jsx(Zm,{className:"h-4 w-4 mr-2"}),n===da.FREE?"Upgrade Plan":"Change Plan"]})]}),n===da.ENTERPRISE&&e.jsxs(e.Fragment,{children:[e.jsx(As,{}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Need to modify your Enterprise plan?"}),e.jsx(M,{variant:"outline",size:"sm",children:"Contact Sales"})]})]})]})]})}function x7e(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function p7e({contract:t,className:s}){const{plan:a,contract_number:r,contract_term_months:n,start_date:i,end_date:l,quota_limit:o,overage_rate:d,billing_contact_name:c,billing_contact_email:u,billing_contact_phone:h,po_reference:x,next_settlement_date:g,payment_terms:j,currency:y,status:b}=t,N=sR(a),C=()=>{switch(b){case"active":return e.jsx(Q,{variant:"default",className:"bg-green-100 text-green-600",children:"Active"});case"expired":return e.jsx(Q,{variant:"secondary",className:"bg-gray-100 text-gray-600",children:"Expired"});case"terminated":return e.jsx(Q,{variant:"destructive",children:"Terminated"});default:return null}},_=A=>hs(new Date(A),"MMM dd, yyyy");return e.jsxs($,{className:x7e("",s),children:[e.jsx(X,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(cp,{className:"h-5 w-5 text-blue-500"}),e.jsx(ee,{className:"text-lg",children:"Contract Details"})]}),C()]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:"Contract Number"})]}),e.jsx("p",{className:"text-base font-medium",children:r}),x&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["PO: ",x]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Plan"}),e.jsx("span",{className:"text-sm font-medium",children:Ym(a)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Quota"}),e.jsx("span",{className:"text-sm font-medium",children:N?"Unlimited":`${o?.toLocaleString()||"N/A"} validations`})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Overage Rate"}),e.jsxs("span",{className:"text-sm font-medium",children:[Tr(d,y)," per validation"]})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(ya,{className:"h-4 w-4"}),e.jsx("span",{children:"Contract Term"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Start Date"}),e.jsx("span",{className:"font-medium",children:_(i)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"End Date"}),e.jsx("span",{className:"font-medium",children:_(l)})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Term"}),e.jsxs("span",{className:"font-medium",children:[n," months"]})]})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2 text-sm text-muted-foreground",children:[e.jsx(Va,{className:"h-4 w-4"}),e.jsx("span",{children:"Billing Contact"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:c}),e.jsx("p",{className:"text-sm text-muted-foreground",children:u}),h&&e.jsxs("div",{className:"flex items-center space-x-1 text-sm text-muted-foreground",children:[e.jsx(L1,{className:"h-3 w-3"}),e.jsx("span",{children:h})]})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Payment Terms"}),e.jsx("span",{className:"font-medium",children:j})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Next Settlement"}),e.jsx("span",{className:"font-medium",children:_(g)})]})]})]})]})}function M0(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function $N({type:t,usage:s,lastInvoiceStatus:a,className:r,trend:n}){const i=()=>{switch(t){case"validations":return{title:"Validations This Month",value:s?.current_month||0,icon:Qs,iconColor:"text-green-600",bgColor:"bg-green-50",description:`${s?.today||0} today, ${s?.current_week||0} this week`,suffix:"validations"};case"rechecks":return{title:"Re-checks Used",value:Math.floor((s?.current_month||0)*.15),icon:Lt,iconColor:"text-blue-600",bgColor:"bg-blue-50",description:"Quality assurance validations",suffix:"re-checks"};case"cost":return{title:"Total Cost",value:s?.total_cost||0,icon:Na,iconColor:"text-purple-600",bgColor:"bg-purple-50",description:"Current month spending",isCurrency:!0,suffix:"BDT"};case"invoice":return{title:"Last Invoice",value:l(),icon:Be,iconColor:o(),bgColor:d(),description:"Most recent billing status",isStatus:!0};default:return{title:"Unknown",value:0,icon:Wn,iconColor:"text-gray-600",bgColor:"bg-gray-50",description:"No data available"}}},l=()=>{switch(a){case"PAID":return"Paid";case"PENDING":return"Pending";case"OVERDUE":return"Overdue";case"FAILED":return"Failed";case"CANCELLED":return"Cancelled";default:return"No Invoice"}},o=()=>{switch(a){case"PAID":return"text-green-600";case"PENDING":return"text-yellow-600";case"OVERDUE":case"FAILED":return"text-red-600";case"CANCELLED":return"text-gray-600";default:return"text-gray-600"}},d=()=>{switch(a){case"PAID":return"bg-green-50";case"PENDING":return"bg-yellow-50";case"OVERDUE":case"FAILED":return"bg-red-50";case"CANCELLED":return"bg-gray-50";default:return"bg-gray-50"}},c=i(),u=c.icon,h=()=>c.isStatus?c.value:c.isCurrency?Tr(c.value):typeof c.value=="number"?c.value.toLocaleString():c.value;return e.jsxs($,{className:M0("transition-all hover:shadow-md",r),children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:c.title}),e.jsx("div",{className:M0("p-2 rounded-full",c.bgColor),children:e.jsx(u,{className:M0("h-4 w-4",c.iconColor)})})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"text-2xl font-bold",children:h()}),c.isStatus&&e.jsx(Q,{variant:a==="PAID"?"default":a==="PENDING"?"secondary":"destructive",className:"text-xs",children:c.value})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c.description}),n&&e.jsxs("div",{className:"flex items-center space-x-1 pt-1",children:[n.isPositive?e.jsx(Vt,{className:"h-3 w-3 text-green-600"}):e.jsx(lr,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:M0("text-xs font-medium",n.isPositive?"text-green-600":"text-red-600"),children:[n.isPositive?"+":"",n.value,"%"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["vs ",n.period]})]})]})})]})}function f7e({usage:t,lastInvoiceStatus:s,className:a,trends:r}){return e.jsxs("div",{className:M0("grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",a),children:[e.jsx($N,{type:"validations",usage:t,trend:r?.validations}),e.jsx($N,{type:"rechecks",usage:t}),e.jsx($N,{type:"cost",usage:t,trend:r?.cost}),e.jsx($N,{type:"invoice",lastInvoiceStatus:s})]})}function W7(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function g7e({usage:t,plan:s,lastInvoiceStatus:a,onUpgrade:r,onRetryPayment:n,onDismiss:i,dismissedAlerts:l=[],className:o}){const d=[];if(t.quota_limit&&t.quota_used>=t.quota_limit)d.push({id:"quota-exceeded",type:"error",title:"Quota Exceeded",description:`You've used all ${t.quota_limit} validations in your ${Ym(s)} plan. Upgrade to continue validation services.`,icon:bs,action:r?{label:"Upgrade Plan",onClick:r}:void 0,dismissible:!1,priority:10});else if(t.quota_limit&&WP(t.quota_used,t.quota_limit)==="critical"){const g=t.quota_remaining||0;d.push({id:"quota-critical",type:"warning",title:"Quota Almost Exceeded",description:`Only ${g} validations remaining in your ${Ym(s)} plan. Consider upgrading to avoid service interruption.`,icon:Ve,action:r?{label:"Upgrade Plan",onClick:r}:void 0,dismissible:!0,priority:8})}else if(t.quota_limit&&WP(t.quota_used,t.quota_limit)==="warning"){const g=t.quota_remaining||0;d.push({id:"quota-warning",type:"info",title:"Quota Usage High",description:`${g} validations remaining in your ${Ym(s)} plan. You're at ${Math.round(t.quota_used/t.quota_limit*100)}% of your monthly limit.`,icon:mt,action:r?{label:"View Plans",onClick:r}:void 0,dismissible:!0,priority:5})}if(a==="FAILED"&&d.push({id:"payment-failed",type:"error",title:"Payment Failed",description:"Your last payment could not be processed. Please retry payment or update your payment method to avoid service interruption.",icon:pn,action:n?{label:"Retry Payment",onClick:n}:void 0,dismissible:!1,priority:9}),a==="OVERDUE"&&d.push({id:"invoice-overdue",type:"error",title:"Invoice Overdue",description:"Your invoice is past due. Please make payment immediately to avoid service suspension.",icon:Ve,action:n?{label:"Pay Now",onClick:n}:void 0,dismissible:!1,priority:9}),a==="PENDING"&&d.push({id:"payment-pending",type:"info",title:"Payment Processing",description:"Your payment is being processed. This may take a few minutes to complete.",icon:mt,dismissible:!0,priority:3}),t.quota_limit&&t.quota_used<t.quota_limit){const g=t.quota_used/new Date().getDate(),j=new Date(new Date().getFullYear(),new Date().getMonth()+1,0).getDate();if(g*j>t.quota_limit*1.1){const b=Math.ceil((t.quota_limit-t.quota_used)/g);d.push({id:"usage-forecast",type:"warning",title:"Usage Forecast Warning",description:`At your current rate, you'll exceed your quota in approximately ${b} days. Consider upgrading to avoid interruption.`,icon:Vt,action:r?{label:"Upgrade Plan",onClick:r}:void 0,dismissible:!0,priority:6})}}const c=d.filter(g=>!l.includes(g.id)).sort((g,j)=>j.priority-g.priority);if(c.length===0)return null;const u=c[0],h=g=>{switch(g){case"error":return"destructive";case"warning":return"default";case"info":return"default";default:return"default"}},x=g=>{switch(g){case"error":return"border-red-200 bg-red-50";case"warning":return"border-yellow-200 bg-yellow-50";case"info":return"border-blue-200 bg-blue-50";default:return""}};return e.jsxs("div",{className:W7("space-y-2",o),children:[e.jsxs(zo,{variant:h(u.type),className:W7(x(u.type)),children:[e.jsx(u.icon,{className:"h-4 w-4"}),e.jsx("div",{className:"flex-1 space-y-2",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs(Tc,{className:"flex items-center space-x-2",children:[e.jsx("span",{children:u.title}),e.jsx(Q,{variant:"outline",className:"text-xs",children:u.type.toUpperCase()})]}),e.jsx(qo,{className:"mt-1",children:u.description})]}),e.jsxs("div",{className:"flex items-center space-x-2 ml-4",children:[u.action&&e.jsxs(M,{size:"sm",onClick:u.action.onClick,className:"h-8",children:[e.jsx(Zm,{className:"h-3 w-3 mr-1"}),u.action.label]}),u.dismissible&&i&&e.jsx(M,{size:"sm",variant:"ghost",onClick:()=>i(u.id),className:"h-8 w-8 p-0",children:e.jsx(fn,{className:"h-3 w-3"})})]})]})})]}),c.length>1&&e.jsxs("div",{className:"text-xs text-muted-foreground text-center",children:["+",c.length-1," more ",c.length===2?"alert":"alerts"]})]})}function gte(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function yC({currentTab:t,onTabChange:s,onUpgrade:a,onRefresh:r,onExport:n,className:i,showActions:l=!0,pendingInvoicesCount:o=0,overdueInvoicesCount:d=0,mode:c="sme",hideUpgrade:u=!1}){const h=rn(),x=zt(),{user:g}=Dt(),j=t||(()=>{const D=h.pathname;return D.includes("/usage")?"usage":D.includes("/invoices")?"invoices":D.includes("/settings")?"settings":D.includes("/bank-compliance")?"bank-compliance":"overview"})(),y=D=>{if(s)s(D);else{const R=h.pathname.includes("/admin/billing")?"/dashboard/admin/billing":"/dashboard/billing";switch(D){case"overview":x(R);break;case"usage":x(`${R}/usage`);break;case"invoices":x(`${R}/invoices`);break;case"allocations":x(`${R}/allocations`);break;case"settings":x(`${R}/settings`);break;case"bank-compliance":x(`${R}/bank-compliance`);break;default:x(R)}}},b=g?.role==="admin",N=g?.role==="admin",C=g?.role==="bank",_=b||N,A=b||C,k=c==="bank",E=!u&&!k&&a;return e.jsxs("div",{className:gte("flex items-center justify-between",i),children:[e.jsx(Os,{value:j,onValueChange:y,children:e.jsxs(Fs,{className:`grid w-full lg:w-auto ${k?A&&_?"grid-cols-4 lg:grid-cols-6":A||_?"grid-cols-4 lg:grid-cols-5":"grid-cols-4":A&&_?"grid-cols-3 lg:grid-cols-5":A||_?"grid-cols-3 lg:grid-cols-4":"grid-cols-3"}`,children:[e.jsxs(He,{value:"overview",className:"gap-2",children:[e.jsx(Ws,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Overview"})]}),e.jsxs(He,{value:"usage",className:"gap-2",children:[e.jsx(Wn,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Usage"})]}),e.jsxs(He,{value:"invoices",className:"gap-2 relative",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:k?"Invoices & Settlements":"Invoices"}),(o>0||d>0)&&e.jsx(Q,{variant:d>0?"destructive":"secondary",className:"absolute -top-2 -right-2 h-5 w-5 p-0 flex items-center justify-center text-xs",children:d>0?d:o})]}),k&&e.jsxs(He,{value:"allocations",className:"gap-2",children:[e.jsx(io,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Allocations"})]}),A&&e.jsxs(He,{value:"bank-compliance",className:"gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Bank Compliance"})]}),_&&e.jsxs(He,{value:"settings",className:"gap-2",children:[e.jsx(sn,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Settings"})]})]})}),l&&e.jsxs("div",{className:"flex items-center space-x-2",children:[r&&e.jsxs(M,{variant:"outline",size:"sm",onClick:r,className:"gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Refresh"})]}),n&&e.jsxs(M,{variant:"outline",size:"sm",onClick:n,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Export"})]}),E&&e.jsxs(M,{size:"sm",onClick:a,className:"gap-2",children:[e.jsx(Jm,{className:"h-4 w-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Upgrade"})]})]})]})}function sp({items:t,className:s}){const a=rn(),r=zt(),n=(()=>{const l=a.pathname,o=l.includes("/admin/billing")?"Admin":"Dashboard",d=[{label:o,href:o==="Admin"?"/dashboard/admin":"/dashboard"},{label:"Billing",href:o==="Admin"?"/dashboard/admin/billing":"/dashboard/billing"}];return l.includes("/usage")?d.push({label:"Usage",active:!0}):l.includes("/invoices")?d.push({label:"Invoices",active:!0}):l.includes("/settings")?d.push({label:"Settings",active:!0}):l.includes("/bank-compliance")&&d.push({label:"Bank Compliance",active:!0}),d})(),i=t||n;return e.jsx("nav",{className:gte("flex items-center space-x-1 text-sm",s),children:i.map((l,o)=>e.jsxs(lt.Fragment,{children:[o>0&&e.jsx("span",{className:"text-muted-foreground",children:"/"}),l.active?e.jsx("span",{className:"font-medium",children:l.label}):e.jsx("button",{onClick:()=>l.href&&r(l.href),className:"text-muted-foreground hover:text-foreground transition-colors",children:l.label})]},o))})}const c1={getBillingInfo:async()=>(await Ae.get("/billing/company")).data,updateBillingInfo:async t=>(await Ae.put("/billing/company",t)).data,getUsageStats:async()=>(await Ae.get("/billing/usage")).data,getUsageRecords:async(t={})=>(await Ae.get("/billing/usage/records",{params:t})).data,getInvoices:async(t={})=>(await Ae.get("/billing/invoices",{params:t})).data,getInvoice:async t=>(await Ae.get(`/billing/invoices/${t}`)).data,generateInvoice:async(t,s)=>(await Ae.post("/billing/invoices/generate",null,{params:{period_start:t,period_end:s}})).data,createPaymentIntent:async t=>(await Ae.post("/billing/payments/intents",t)).data,getPaymentStatus:async(t,s="sslcommerz")=>(await Ae.get(`/billing/payments/${t}`,{params:{provider:s}})).data,getPricing:async()=>(await Ae.get("/billing/pricing")).data,checkQuota:async(t,s=1)=>(await Ae.post("/billing/quota/check",{action:t,quantity:s})).data,startCheckout:async t=>{const s={FREE:0,STARTER:15e3,PROFESSIONAL:45e3,ENTERPRISE:0},a={provider:t.provider,return_url:t.return_url||`${window.location.origin}/dashboard/billing?success=true`,cancel_url:t.cancel_url||`${window.location.origin}/dashboard/billing?cancelled=true`,metadata:{plan:t.plan,...t.metadata||{}}};return typeof t.amount=="number"&&(a.amount=t.amount),t.currency&&(a.currency=t.currency.toUpperCase()),t.priceId?(a.price_id=t.priceId,a.mode=t.mode||"subscription",a.quantity=t.quantity||1,a.currency=(t.currency||"USD").toUpperCase()):t.provider===Om.SSLCOMMERZ&&(a.amount=a.amount??s[t.plan]??0,a.currency="BDT"),t.paymentMethodTypes&&(a.payment_method_types=t.paymentMethodTypes),(await Ae.post("/billing/payments/intents",a,{params:{provider:t.provider}})).data},downloadInvoice:async t=>(await Ae.get(`/billing/invoices/${t}/pdf`,{responseType:"blob"})).data,exportUsageData:async(t={})=>(await Ae.get("/billing/usage/export",{params:t,responseType:"blob"})).data,retryPayment:async(t,s="sslcommerz")=>(await Ae.post(`/billing/invoices/${t}/retry-payment`,{provider:s})).data,getBankContract:async()=>(await Ae.get("/billing/bank/contract")).data,getAllocations:async(t={})=>(await Ae.get("/billing/bank/allocations",{params:t})).data,updateAllocation:async(t,s)=>(await Ae.put(`/billing/bank/allocations/${t}`,s)).data},v7e={getSystemKPIs:async()=>{const[t,s]=await Promise.all([Ae.get("/billing/admin/companies?per_page=1000"),Ae.get("/billing/admin/usage-report",{params:{start_date:new Date(new Date().getFullYear(),new Date().getMonth(),1).toISOString().split("T")[0],end_date:new Date().toISOString().split("T")[0]}})]),a=t.data,r=s.data,n=a.filter(l=>l.status==="active").length,i=a.filter(l=>l.status==="overdue").length;return{total_revenue_monthly:r.total_revenue,active_companies:n,delinquent_accounts:i,invoices_this_cycle:r.total_companies,average_revenue_per_company:r.total_revenue/(r.total_companies||1),quota_utilization_average:a.reduce((l,o)=>l+(o.quota_limit?o.quota_used/o.quota_limit*100:0),0)/a.length}},getCompanyStats:async(t=1,s=50)=>(await Ae.get("/billing/admin/companies",{params:{page:t,per_page:s}})).data,getUsageReport:async(t,s)=>(await Ae.get("/billing/admin/usage-report",{params:{start_date:t,end_date:s}})).data,changeCompanyPlan:async(t,s)=>{await Ae.put(`/billing/admin/companies/${t}/plan`,{plan:s})},updateCompanyStatus:async(t,s)=>{await Ae.put(`/billing/admin/companies/${t}/status`,{status:s})},sendReminderEmail:async t=>{console.log(`Sending reminder email to company ${t}`)},exportSystemData:async(t="csv")=>(await Ae.get("/billing/admin/export",{params:{format:t},responseType:"blob"})).data,getRevenueTrends:async(t,s)=>{const a=await Ae.get("/billing/admin/usage-report",{params:{start_date:t,end_date:s}});return[{date:t,revenue:a.data.total_revenue,companies:a.data.total_companies}]},getBankComplianceReport:async t=>(await Ae.get("/billing/bank/compliance-report",{params:t})).data,getSMEMetrics:async t=>(await Ae.get("/billing/bank/sme-metrics",{params:t})).data,exportComplianceData:async t=>(await Ae.get("/billing/bank/export-compliance",{params:t,responseType:"blob"})).data},j7e=(t,s)=>{const a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=s,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a)},b7e=t=>t.toISOString().split("T")[0],Fd={...c1,admin:v7e,utils:{downloadFile:j7e,formatDateForAPI:b7e}},Ur={all:["billing"],info:()=>[...Ur.all,"info"],usage:()=>[...Ur.all,"usage"],usageRecords:t=>[...Ur.usage(),"records",t],invoices:t=>[...Ur.all,"invoices",t],invoice:t=>[...Ur.all,"invoice",t],pricing:()=>[...Ur.all,"pricing"],admin:{all:["billing","admin"],kpis:()=>[...Ur.admin.all,"kpis"],companies:(t,s)=>[...Ur.admin.all,"companies",t,s],usage:(t,s)=>[...Ur.admin.all,"usage",t,s],trends:(t,s)=>[...Ur.admin.all,"trends",t,s]},bank:{all:["billing","bank"],compliance:t=>[...Ur.bank.all,"compliance",t],smeMetrics:t=>[...Ur.bank.all,"sme-metrics",t]}},vte=()=>Ks({queryKey:Ur.info(),queryFn:Fd.getBillingInfo,staleTime:300*1e3,retry:2,retryOnMount:!1,refetchOnWindowFocus:!1}),NC=()=>Ks({queryKey:Ur.usage(),queryFn:Fd.getUsageStats,staleTime:120*1e3,retry:2,retryOnMount:!1,refetchOnWindowFocus:!1}),aR=(t={})=>Ks({queryKey:Ur.usageRecords(t),queryFn:()=>Fd.getUsageRecords(t),staleTime:30*1e3,retry:2}),Ab=(t={})=>Ks({queryKey:Ur.invoices(t),queryFn:()=>Fd.getInvoices(t),staleTime:60*1e3,retry:2}),y7e=t=>Ks({queryKey:Ur.invoice(t),queryFn:()=>Fd.getInvoice(t),enabled:!!t,staleTime:60*1e3}),N7e=()=>{const t=Yn();return Ya({mutationFn:async s=>{const a=await Fd.startCheckout(s);return a.checkout_url&&(window.location.href=a.checkout_url),a},onSuccess:()=>{Vn.success("Redirecting to payment...")},onError:s=>{Vn.error(`Checkout failed: ${s.message}`)},onSettled:()=>{t.invalidateQueries({queryKey:Ur.info()})}})},w7e=()=>{const t=Yn();return Ya({mutationFn:({startDate:s,endDate:a})=>Fd.generateInvoice(s,a),onSuccess:()=>{t.invalidateQueries({queryKey:Ur.all}),Vn.success("Invoice generated successfully")},onError:s=>{Vn.error(`Failed to generate invoice: ${s.message}`)}})},jte=()=>{const t=Yn();return Ya({mutationFn:({invoiceId:s,provider:a})=>Fd.retryPayment(s,a),onSuccess:s=>{t.invalidateQueries({queryKey:Ur.all}),s.checkout_url&&(window.location.href=s.checkout_url),Vn.success("Payment retry initiated")},onError:s=>{Vn.error(`Failed to retry payment: ${s.message}`)}})},bte=()=>Ya({mutationFn:Fd.downloadInvoice,onSuccess:(t,s)=>{const a=window.URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`invoice-${s}.pdf`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),Vn.success("Invoice downloaded")},onError:t=>{Vn.error(`Failed to download invoice: ${t.message}`)}}),yte=()=>Ya({mutationFn:Fd.exportUsageData,onSuccess:t=>{const s=window.URL.createObjectURL(t),a=document.createElement("a");a.href=s,a.download=`usage-export-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(s),Vn.success("Usage data exported")},onError:t=>{Vn.error(`Failed to export usage data: ${t.message}`)}}),rR=()=>{const t=Yn();return()=>{t.invalidateQueries({queryKey:Ur.all}),Vn.success("Billing data refreshed")}},_7e=(t=!1)=>{const s=Yn();Ks({queryKey:["billing-poll"],queryFn:async()=>(s.invalidateQueries({queryKey:Ur.info()}),s.invalidateQueries({queryKey:Ur.usage()}),null),refetchInterval:30*1e3,enabled:t})};function C7e(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const _w={[da.FREE]:void 0,[da.STARTER]:void 0,[da.PROFESSIONAL]:void 0,[da.ENTERPRISE]:void 0},S7e={[da.FREE]:0,[da.STARTER]:15e3,[da.PROFESSIONAL]:45e3,[da.ENTERPRISE]:0},H7=!!(_w[da.STARTER]||_w[da.PROFESSIONAL]||_w[da.ENTERPRISE]);function k7e({open:t,onOpenChange:s,currentBillingInfo:a,onSuccess:r}){const[n,i]=m.useState(null),[l,o]=m.useState(Om.SSLCOMMERZ),[d,c]=m.useState("plans"),u=N7e(),h=Object.entries(Kf).filter(([A])=>{const k=A;return k!==a.plan&&k!==da.FREE}).map(([A,k])=>({key:A,...k})),x=A=>{switch(A){case da.STARTER:return e.jsx(gn,{className:"h-5 w-5 text-blue-500"});case da.PROFESSIONAL:return e.jsx(Jm,{className:"h-5 w-5 text-purple-500"});case da.ENTERPRISE:return e.jsx(cp,{className:"h-5 w-5 text-gold-500"});default:return e.jsx(gn,{className:"h-5 w-5 text-gray-500"})}},g=A=>{switch(A){case da.STARTER:return"border-blue-200 bg-blue-50";case da.PROFESSIONAL:return"border-purple-200 bg-purple-50";case da.ENTERPRISE:return"border-gold-200 bg-gold-50";default:return"border-gray-200 bg-gray-50"}},j=A=>{i(A),A===da.ENTERPRISE?(window.open("mailto:sales@lcopilot.com?subject=Enterprise Plan Inquiry","_blank"),s(!1)):c("payment")},y=async()=>{if(n){c("processing");try{const A={plan:n,provider:l,return_url:`${window.location.origin}/dashboard/billing?success=true&plan=${n}`,cancel_url:`${window.location.origin}/dashboard/billing?cancelled=true`,metadata:{plan:n}};if(l===Om.SSLCOMMERZ)Object.assign(A,{amount:S7e[n],currency:"BDT"});else if(l===Om.STRIPE){const k=_w[n];Object.assign(A,{currency:"USD",mode:"subscription",priceId:k,paymentMethodTypes:["card"]})}await u.mutateAsync(A),r?.(),s(!1)}catch(A){c("payment"),console.error("Checkout failed:",A)}}},b=()=>{d==="payment"?(c("plans"),i(null)):d==="processing"&&c("payment")},N=()=>e.jsxs(e.Fragment,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Upgrade Your Plan"}),e.jsx(_t,{children:"Choose a plan that fits your validation needs. You can change or cancel anytime."})]}),e.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h.map(A=>e.jsxs($,{className:C7e("cursor-pointer transition-all hover:shadow-md",n===A.key?g(A.key):"hover:border-primary"),onClick:()=>j(A.key),children:[e.jsxs(X,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[x(A.key),e.jsx(ee,{className:"text-lg",children:A.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:A.price>0?Tr(A.price):"Custom"}),A.price>0&&e.jsx("div",{className:"text-sm text-muted-foreground",children:"/month"})]})]}),A.popular&&e.jsx(Q,{className:"w-fit",children:"Most Popular"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:A.quota?`${A.quota.toLocaleString()} validations per month`:"Unlimited validations"}),e.jsx(As,{}),e.jsx("ul",{className:"space-y-1",children:A.features.map((k,E)=>e.jsxs("li",{className:"text-sm flex items-start space-x-2",children:[e.jsx(Za,{className:"h-3 w-3 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:k})]},E))}),A.key===da.ENTERPRISE&&e.jsx("div",{className:"pt-2",children:e.jsx(M,{variant:"outline",size:"sm",className:"w-full",children:"Contact Sales"})})]})})]},A.key))})]}),C=()=>e.jsxs(e.Fragment,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center space-x-2",children:[e.jsx("span",{children:"Payment Method"}),n&&e.jsx(Q,{variant:"secondary",children:Ym(n)})]}),e.jsx(_t,{children:"Choose your preferred payment method to complete the upgrade."})]}),e.jsxs("div",{className:"space-y-6",children:[n&&e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Ym(n)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[Kf[n].quota?.toLocaleString()||"Unlimited"," validations per month"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold",children:Tr(Kf[n].price)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"/month"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Select Payment Method"}),e.jsxs(Y2,{value:l,onValueChange:A=>o(A),className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx(_j,{value:Om.SSLCOMMERZ,id:"sslcommerz"}),e.jsx(Z,{htmlFor:"sslcommerz",className:"flex-1 cursor-pointer",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Hw,{className:"h-5 w-5 text-green-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"SSLCommerz"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"bKash, Rocket, Nagad, Cards"})]})]}),e.jsx(Q,{variant:"secondary",children:"Recommended for BD"})]})})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-3 border rounded-lg",children:[e.jsx(_j,{value:Om.STRIPE,id:"stripe",disabled:!H7}),e.jsxs(Z,{htmlFor:"stripe",className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(pn,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Stripe"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"International Cards, PayPal"})]})]}),e.jsx(Q,{variant:"secondary",children:"Global"})]}),!H7&&e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Stripe pricing IDs not configured. Add VITE_STRIPE_PRICE_* env values to enable."})]})]})]})]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(M,{variant:"outline",onClick:b,className:"flex-1",children:"Back"}),e.jsx(M,{onClick:y,className:"flex-1",children:"Continue to Payment"})]})]})]}),_=()=>e.jsxs(e.Fragment,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Processing..."}),e.jsx(_t,{children:"Redirecting you to secure payment gateway..."})]}),e.jsxs("div",{className:"flex flex-col items-center space-y-4 py-8",children:[e.jsx(ct,{className:"h-8 w-8 animate-spin text-primary"}),e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx("div",{className:"font-medium",children:"Setting up your payment"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["You'll be redirected to ",l===Om.SSLCOMMERZ?"SSLCommerz":"Stripe"," to complete your payment"]})]})]}),e.jsx("div",{className:"flex justify-center",children:e.jsx(M,{variant:"outline",onClick:b,disabled:u.isPending,children:"Cancel"})})]});return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"sm:max-w-2xl",children:[d==="plans"&&N(),d==="payment"&&C(),d==="processing"&&_()]})})}function E7e(t,s,a="long"){return new Intl.DateTimeFormat("en-US",{hour:"numeric",timeZone:t,timeZoneName:a}).format(s).split(/\s/g).slice(2).join(" ")}const A7e={},B0={};function Ax(t,s){try{const r=(A7e[t]||=new Intl.DateTimeFormat("en-US",{timeZone:t,timeZoneName:"longOffset"}).format)(s).split("GMT")[1];return r in B0?B0[r]:G7(r,r.split(":"))}catch{if(t in B0)return B0[t];const a=t?.match(P7e);return a?G7(t,a.slice(1)):NaN}}const P7e=/([+-]\d\d):?(\d\d)?/;function G7(t,s){const a=+(s[0]||0),r=+(s[1]||0),n=+(s[2]||0)/60;return B0[t]=a*60+r>0?a*60+r+n:a*60-r-n}class pd extends Date{constructor(...s){super(),s.length>1&&typeof s[s.length-1]=="string"&&(this.timeZone=s.pop()),this.internal=new Date,isNaN(Ax(this.timeZone,this))?this.setTime(NaN):s.length?typeof s[0]=="number"&&(s.length===1||s.length===2&&typeof s[1]!="number")?this.setTime(s[0]):typeof s[0]=="string"?this.setTime(+new Date(s[0])):s[0]instanceof Date?this.setTime(+s[0]):(this.setTime(+new Date(...s)),Nte(this),HP(this)):this.setTime(Date.now())}static tz(s,...a){return a.length?new pd(...a,s):new pd(Date.now(),s)}withTimeZone(s){return new pd(+this,s)}getTimezoneOffset(){const s=-Ax(this.timeZone,this);return s>0?Math.floor(s):Math.ceil(s)}setTime(s){return Date.prototype.setTime.apply(this,arguments),HP(this),+this}[Symbol.for("constructDateFrom")](s){return new pd(+new Date(s),this.timeZone)}}const K7=/^(get|set)(?!UTC)/;Object.getOwnPropertyNames(Date.prototype).forEach(t=>{if(!K7.test(t))return;const s=t.replace(K7,"$1UTC");pd.prototype[s]&&(t.startsWith("get")?pd.prototype[t]=function(){return this.internal[s]()}:(pd.prototype[t]=function(){return Date.prototype[s].apply(this.internal,arguments),D7e(this),+this},pd.prototype[s]=function(){return Date.prototype[s].apply(this,arguments),HP(this),+this}))});function HP(t){t.internal.setTime(+t),t.internal.setUTCSeconds(t.internal.getUTCSeconds()-Math.round(-Ax(t.timeZone,t)*60))}function D7e(t){Date.prototype.setFullYear.call(t,t.internal.getUTCFullYear(),t.internal.getUTCMonth(),t.internal.getUTCDate()),Date.prototype.setHours.call(t,t.internal.getUTCHours(),t.internal.getUTCMinutes(),t.internal.getUTCSeconds(),t.internal.getUTCMilliseconds()),Nte(t)}function Nte(t){const s=Ax(t.timeZone,t),a=s>0?Math.floor(s):Math.ceil(s),r=new Date(+t);r.setUTCHours(r.getUTCHours()-1);const n=-new Date(+t).getTimezoneOffset(),i=-new Date(+r).getTimezoneOffset(),l=n-i,o=Date.prototype.getHours.apply(t)!==t.internal.getUTCHours();l&&o&&t.internal.setUTCMinutes(t.internal.getUTCMinutes()+l);const d=n-a;d&&Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+d);const c=new Date(+t);c.setUTCSeconds(0);const u=n>0?c.getSeconds():(c.getSeconds()-60)%60,h=Math.round(-(Ax(t.timeZone,t)*60))%60;(h||u)&&(t.internal.setUTCSeconds(t.internal.getUTCSeconds()+h),Date.prototype.setUTCSeconds.call(t,Date.prototype.getUTCSeconds.call(t)+h+u));const x=Ax(t.timeZone,t),g=x>0?Math.floor(x):Math.ceil(x),y=-new Date(+t).getTimezoneOffset()-g,b=g!==a,N=y-d;if(b&&N){Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+N);const C=Ax(t.timeZone,t),_=C>0?Math.floor(C):Math.ceil(C),A=g-_;A&&(t.internal.setUTCMinutes(t.internal.getUTCMinutes()+A),Date.prototype.setUTCMinutes.call(t,Date.prototype.getUTCMinutes.call(t)+A))}}class Oi extends pd{static tz(s,...a){return a.length?new Oi(...a,s):new Oi(Date.now(),s)}toISOString(){const[s,a,r]=this.tzComponents(),n=`${s}${a}:${r}`;return this.internal.toISOString().slice(0,-1)+n}toString(){return`${this.toDateString()} ${this.toTimeString()}`}toDateString(){const[s,a,r,n]=this.internal.toUTCString().split(" ");return`${s?.slice(0,-1)} ${r} ${a} ${n}`}toTimeString(){const s=this.internal.toUTCString().split(" ")[4],[a,r,n]=this.tzComponents();return`${s} GMT${a}${r}${n} (${E7e(this.timeZone,this)})`}toLocaleString(s,a){return Date.prototype.toLocaleString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleDateString(s,a){return Date.prototype.toLocaleDateString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}toLocaleTimeString(s,a){return Date.prototype.toLocaleTimeString.call(this,s,{...a,timeZone:a?.timeZone||this.timeZone})}tzComponents(){const s=this.getTimezoneOffset(),a=s>0?"-":"+",r=String(Math.floor(Math.abs(s)/60)).padStart(2,"0"),n=String(Math.abs(s)%60).padStart(2,"0");return[a,r,n]}withTimeZone(s){return new Oi(+this,s)}[Symbol.for("constructDateFrom")](s){return new Oi(+new Date(s),this.timeZone)}}const Y7=5,T7e=4;function F7e(t,s){const a=s.startOfMonth(t),r=a.getDay()>0?a.getDay():7,n=s.addDays(t,-r+1),i=s.addDays(n,Y7*7-1);return s.getMonth(t)===s.getMonth(i)?Y7:T7e}function wte(t,s){const a=s.startOfMonth(t),r=a.getDay();return r===1?a:r===0?s.addDays(a,-6):s.addDays(a,-1*(r-1))}function R7e(t,s){const a=wte(t,s),r=F7e(t,s);return s.addDays(a,r*7-1)}class Uu{constructor(s,a){this.Date=Date,this.today=()=>this.overrides?.today?this.overrides.today():this.options.timeZone?Oi.tz(this.options.timeZone):new this.Date,this.newDate=(r,n,i)=>this.overrides?.newDate?this.overrides.newDate(r,n,i):this.options.timeZone?new Oi(r,n,i,this.options.timeZone):new Date(r,n,i),this.addDays=(r,n)=>this.overrides?.addDays?this.overrides.addDays(r,n):Ix(r,n),this.addMonths=(r,n)=>this.overrides?.addMonths?this.overrides.addMonths(r,n):Xee(r,n),this.addWeeks=(r,n)=>this.overrides?.addWeeks?this.overrides.addWeeks(r,n):qBe(r,n),this.addYears=(r,n)=>this.overrides?.addYears?this.overrides.addYears(r,n):VBe(r,n),this.differenceInCalendarDays=(r,n)=>this.overrides?.differenceInCalendarDays?this.overrides.differenceInCalendarDays(r,n):tte(r,n),this.differenceInCalendarMonths=(r,n)=>this.overrides?.differenceInCalendarMonths?this.overrides.differenceInCalendarMonths(r,n):YBe(r,n),this.eachMonthOfInterval=r=>this.overrides?.eachMonthOfInterval?this.overrides.eachMonthOfInterval(r):QBe(r),this.endOfBroadcastWeek=r=>this.overrides?.endOfBroadcastWeek?this.overrides.endOfBroadcastWeek(r):R7e(r,this),this.endOfISOWeek=r=>this.overrides?.endOfISOWeek?this.overrides.endOfISOWeek(r):t8e(r),this.endOfMonth=r=>this.overrides?.endOfMonth?this.overrides.endOfMonth(r):ZBe(r),this.endOfWeek=(r,n)=>this.overrides?.endOfWeek?this.overrides.endOfWeek(r,n):rte(r,this.options),this.endOfYear=r=>this.overrides?.endOfYear?this.overrides.endOfYear(r):e8e(r),this.format=(r,n,i)=>{const l=this.overrides?.format?this.overrides.format(r,n,this.options):hs(r,n,this.options);return this.options.numerals&&this.options.numerals!=="latn"?this.replaceDigits(l):l},this.getISOWeek=r=>this.overrides?.getISOWeek?this.overrides.getISOWeek(r):nte(r),this.getMonth=(r,n)=>this.overrides?.getMonth?this.overrides.getMonth(r,this.options):Q8e(r,this.options),this.getYear=(r,n)=>this.overrides?.getYear?this.overrides.getYear(r,this.options):X8e(r,this.options),this.getWeek=(r,n)=>this.overrides?.getWeek?this.overrides.getWeek(r,this.options):lte(r,this.options),this.isAfter=(r,n)=>this.overrides?.isAfter?this.overrides.isAfter(r,n):e$e(r,n),this.isBefore=(r,n)=>this.overrides?.isBefore?this.overrides.isBefore(r,n):t$e(r,n),this.isDate=r=>this.overrides?.isDate?this.overrides.isDate(r):ate(r),this.isSameDay=(r,n)=>this.overrides?.isSameDay?this.overrides.isSameDay(r,n):ste(r,n),this.isSameMonth=(r,n)=>this.overrides?.isSameMonth?this.overrides.isSameMonth(r,n):s$e(r,n),this.isSameYear=(r,n)=>this.overrides?.isSameYear?this.overrides.isSameYear(r,n):a$e(r,n),this.max=r=>this.overrides?.max?this.overrides.max(r):WBe(r),this.min=r=>this.overrides?.min?this.overrides.min(r):HBe(r),this.setMonth=(r,n)=>this.overrides?.setMonth?this.overrides.setMonth(r,n):r$e(r,n),this.setYear=(r,n)=>this.overrides?.setYear?this.overrides.setYear(r,n):n$e(r,n),this.startOfBroadcastWeek=(r,n)=>this.overrides?.startOfBroadcastWeek?this.overrides.startOfBroadcastWeek(r,this):wte(r,this),this.startOfDay=r=>this.overrides?.startOfDay?this.overrides.startOfDay(r):Aj(r),this.startOfISOWeek=r=>this.overrides?.startOfISOWeek?this.overrides.startOfISOWeek(r):Ej(r),this.startOfMonth=r=>this.overrides?.startOfMonth?this.overrides.startOfMonth(r):XBe(r),this.startOfWeek=(r,n)=>this.overrides?.startOfWeek?this.overrides.startOfWeek(r,this.options):Sg(r,this.options),this.startOfYear=r=>this.overrides?.startOfYear?this.overrides.startOfYear(r):QF(r),this.options={locale:XF,...s},this.overrides=a}getDigitMap(){const{numerals:s="latn"}=this.options,a=new Intl.NumberFormat("en-US",{numberingSystem:s}),r={};for(let n=0;n<10;n++)r[n.toString()]=a.format(n);return r}replaceDigits(s){const a=this.getDigitMap();return s.replace(/\d/g,r=>a[r]||r)}formatNumber(s){return this.replaceDigits(s.toString())}}const Rd=new Uu;class _te{constructor(s,a,r=Rd){this.date=s,this.displayMonth=a,this.outside=!!(a&&!r.isSameMonth(s,a)),this.dateLib=r}isEqualTo(s){return this.dateLib.isSameDay(s.date,this.date)&&this.dateLib.isSameMonth(s.displayMonth,this.displayMonth)}}class O7e{constructor(s,a){this.date=s,this.weeks=a}}class I7e{constructor(s,a){this.days=a,this.weekNumber=s}}function L7e(t){return lt.createElement("button",{...t})}function M7e(t){return lt.createElement("span",{...t})}function B7e(t){const{size:s=24,orientation:a="left",className:r}=t;return lt.createElement("svg",{className:r,width:s,height:s,viewBox:"0 0 24 24"},a==="up"&&lt.createElement("polygon",{points:"6.77 17 12.5 11.43 18.24 17 20 15.28 12.5 8 5 15.28"}),a==="down"&&lt.createElement("polygon",{points:"6.77 8 12.5 13.57 18.24 8 20 9.72 12.5 17 5 9.72"}),a==="left"&&lt.createElement("polygon",{points:"16 18.112 9.81111111 12 16 5.87733333 14.0888889 4 6 12 14.0888889 20"}),a==="right"&&lt.createElement("polygon",{points:"8 18.112 14.18888889 12 8 5.87733333 9.91111111 4 18 12 9.91111111 20"}))}function $7e(t){const{day:s,modifiers:a,...r}=t;return lt.createElement("td",{...r})}function U7e(t){const{day:s,modifiers:a,...r}=t,n=lt.useRef(null);return lt.useEffect(()=>{a.focused&&n.current?.focus()},[a.focused]),lt.createElement("button",{ref:n,...r})}var gs;(function(t){t.Root="root",t.Chevron="chevron",t.Day="day",t.DayButton="day_button",t.CaptionLabel="caption_label",t.Dropdowns="dropdowns",t.Dropdown="dropdown",t.DropdownRoot="dropdown_root",t.Footer="footer",t.MonthGrid="month_grid",t.MonthCaption="month_caption",t.MonthsDropdown="months_dropdown",t.Month="month",t.Months="months",t.Nav="nav",t.NextMonthButton="button_next",t.PreviousMonthButton="button_previous",t.Week="week",t.Weeks="weeks",t.Weekday="weekday",t.Weekdays="weekdays",t.WeekNumber="week_number",t.WeekNumberHeader="week_number_header",t.YearsDropdown="years_dropdown"})(gs||(gs={}));var zr;(function(t){t.disabled="disabled",t.hidden="hidden",t.outside="outside",t.focused="focused",t.today="today"})(zr||(zr={}));var Cc;(function(t){t.range_end="range_end",t.range_middle="range_middle",t.range_start="range_start",t.selected="selected"})(Cc||(Cc={}));var Yl;(function(t){t.weeks_before_enter="weeks_before_enter",t.weeks_before_exit="weeks_before_exit",t.weeks_after_enter="weeks_after_enter",t.weeks_after_exit="weeks_after_exit",t.caption_after_enter="caption_after_enter",t.caption_after_exit="caption_after_exit",t.caption_before_enter="caption_before_enter",t.caption_before_exit="caption_before_exit"})(Yl||(Yl={}));function z7e(t){const{options:s,className:a,components:r,classNames:n,...i}=t,l=[n[gs.Dropdown],a].join(" "),o=s?.find(({value:d})=>d===i.value);return lt.createElement("span",{"data-disabled":i.disabled,className:n[gs.DropdownRoot]},lt.createElement(r.Select,{className:l,...i},s?.map(({value:d,label:c,disabled:u})=>lt.createElement(r.Option,{key:d,value:d,disabled:u},c))),lt.createElement("span",{className:n[gs.CaptionLabel],"aria-hidden":!0},o?.label,lt.createElement(r.Chevron,{orientation:"down",size:18,className:n[gs.Chevron]})))}function q7e(t){return lt.createElement("div",{...t})}function V7e(t){return lt.createElement("div",{...t})}function W7e(t){const{calendarMonth:s,displayIndex:a,...r}=t;return lt.createElement("div",{...r},t.children)}function H7e(t){const{calendarMonth:s,displayIndex:a,...r}=t;return lt.createElement("div",{...r})}function G7e(t){return lt.createElement("table",{...t})}function K7e(t){return lt.createElement("div",{...t})}const Cte=m.createContext(void 0);function Pb(){const t=m.useContext(Cte);if(t===void 0)throw new Error("useDayPicker() must be used within a custom component.");return t}function Y7e(t){const{components:s}=Pb();return lt.createElement(s.Dropdown,{...t})}function Z7e(t){const{onPreviousClick:s,onNextClick:a,previousMonth:r,nextMonth:n,...i}=t,{components:l,classNames:o,labels:{labelPrevious:d,labelNext:c}}=Pb(),u=m.useCallback(x=>{n&&a?.(x)},[n,a]),h=m.useCallback(x=>{r&&s?.(x)},[r,s]);return lt.createElement("nav",{...i},lt.createElement(l.PreviousMonthButton,{type:"button",className:o[gs.PreviousMonthButton],tabIndex:r?void 0:-1,"aria-disabled":r?void 0:!0,"aria-label":d(r),onClick:h},lt.createElement(l.Chevron,{disabled:r?void 0:!0,className:o[gs.Chevron],orientation:"left"})),lt.createElement(l.NextMonthButton,{type:"button",className:o[gs.NextMonthButton],tabIndex:n?void 0:-1,"aria-disabled":n?void 0:!0,"aria-label":c(n),onClick:u},lt.createElement(l.Chevron,{disabled:n?void 0:!0,orientation:"right",className:o[gs.Chevron]})))}function J7e(t){const{components:s}=Pb();return lt.createElement(s.Button,{...t})}function Q7e(t){return lt.createElement("option",{...t})}function X7e(t){const{components:s}=Pb();return lt.createElement(s.Button,{...t})}function eUe(t){const{rootRef:s,...a}=t;return lt.createElement("div",{...a,ref:s})}function tUe(t){return lt.createElement("select",{...t})}function sUe(t){const{week:s,...a}=t;return lt.createElement("tr",{...a})}function aUe(t){return lt.createElement("th",{...t})}function rUe(t){return lt.createElement("thead",{"aria-hidden":!0},lt.createElement("tr",{...t}))}function nUe(t){const{week:s,...a}=t;return lt.createElement("th",{...a})}function iUe(t){return lt.createElement("th",{...t})}function lUe(t){return lt.createElement("tbody",{...t})}function oUe(t){const{components:s}=Pb();return lt.createElement(s.Dropdown,{...t})}const cUe=Object.freeze(Object.defineProperty({__proto__:null,Button:L7e,CaptionLabel:M7e,Chevron:B7e,Day:$7e,DayButton:U7e,Dropdown:z7e,DropdownNav:q7e,Footer:V7e,Month:W7e,MonthCaption:H7e,MonthGrid:G7e,Months:K7e,MonthsDropdown:Y7e,Nav:Z7e,NextMonthButton:J7e,Option:Q7e,PreviousMonthButton:X7e,Root:eUe,Select:tUe,Week:sUe,WeekNumber:nUe,WeekNumberHeader:iUe,Weekday:aUe,Weekdays:rUe,Weeks:lUe,YearsDropdown:oUe},Symbol.toStringTag,{value:"Module"}));function hu(t,s,a=!1,r=Rd){let{from:n,to:i}=t;const{differenceInCalendarDays:l,isSameDay:o}=r;return n&&i?(l(i,n)<0&&([n,i]=[i,n]),l(s,n)>=(a?1:0)&&l(i,s)>=(a?1:0)):!a&&i?o(i,s):!a&&n?o(n,s):!1}function Ste(t){return!!(t&&typeof t=="object"&&"before"in t&&"after"in t)}function nR(t){return!!(t&&typeof t=="object"&&"from"in t)}function kte(t){return!!(t&&typeof t=="object"&&"after"in t)}function Ete(t){return!!(t&&typeof t=="object"&&"before"in t)}function Ate(t){return!!(t&&typeof t=="object"&&"dayOfWeek"in t)}function Pte(t,s){return Array.isArray(t)&&t.every(s.isDate)}function xu(t,s,a=Rd){const r=Array.isArray(s)?s:[s],{isSameDay:n,differenceInCalendarDays:i,isAfter:l}=a;return r.some(o=>{if(typeof o=="boolean")return o;if(a.isDate(o))return n(t,o);if(Pte(o,a))return o.includes(t);if(nR(o))return hu(o,t,!1,a);if(Ate(o))return Array.isArray(o.dayOfWeek)?o.dayOfWeek.includes(t.getDay()):o.dayOfWeek===t.getDay();if(Ste(o)){const d=i(o.before,t),c=i(o.after,t),u=d>0,h=c<0;return l(o.before,o.after)?h&&u:u||h}return kte(o)?i(t,o.after)>0:Ete(o)?i(o.before,t)>0:typeof o=="function"?o(t):!1})}function dUe(t,s,a,r,n){const{disabled:i,hidden:l,modifiers:o,showOutsideDays:d,broadcastCalendar:c,today:u}=s,{isSameDay:h,isSameMonth:x,startOfMonth:g,isBefore:j,endOfMonth:y,isAfter:b}=n,N=a&&g(a),C=r&&y(r),_={[zr.focused]:[],[zr.outside]:[],[zr.disabled]:[],[zr.hidden]:[],[zr.today]:[]},A={};for(const k of t){const{date:E,displayMonth:D}=k,R=!!(D&&!x(E,D)),O=!!(N&&j(E,N)),P=!!(C&&b(E,C)),T=!!(i&&xu(E,i,n)),B=!!(l&&xu(E,l,n))||O||P||!c&&!d&&R||c&&d===!1&&R,G=h(E,u??n.today());R&&_.outside.push(k),T&&_.disabled.push(k),B&&_.hidden.push(k),G&&_.today.push(k),o&&Object.keys(o).forEach(q=>{const z=o?.[q];z&&xu(E,z,n)&&(A[q]?A[q].push(k):A[q]=[k])})}return k=>{const E={[zr.focused]:!1,[zr.disabled]:!1,[zr.hidden]:!1,[zr.outside]:!1,[zr.today]:!1},D={};for(const R in _){const O=_[R];E[R]=O.some(P=>P===k)}for(const R in A)D[R]=A[R].some(O=>O===k);return{...E,...D}}}function uUe(t,s,a={}){return Object.entries(t).filter(([,n])=>n===!0).reduce((n,[i])=>(a[i]?n.push(a[i]):s[zr[i]]?n.push(s[zr[i]]):s[Cc[i]]&&n.push(s[Cc[i]]),n),[s[gs.Day]])}function mUe(t){return{...cUe,...t}}function hUe(t){const s={"data-mode":t.mode??void 0,"data-required":"required"in t?t.required:void 0,"data-multiple-months":t.numberOfMonths&&t.numberOfMonths>1||void 0,"data-week-numbers":t.showWeekNumber||void 0,"data-broadcast-calendar":t.broadcastCalendar||void 0,"data-nav-layout":t.navLayout||void 0};return Object.entries(t).forEach(([a,r])=>{a.startsWith("data-")&&(s[a]=r)}),s}function xUe(){const t={};for(const s in gs)t[gs[s]]=`rdp-${gs[s]}`;for(const s in zr)t[zr[s]]=`rdp-${zr[s]}`;for(const s in Cc)t[Cc[s]]=`rdp-${Cc[s]}`;for(const s in Yl)t[Yl[s]]=`rdp-${Yl[s]}`;return t}function Dte(t,s,a){return(a??new Uu(s)).format(t,"LLLL y")}const pUe=Dte;function fUe(t,s,a){return(a??new Uu(s)).format(t,"d")}function gUe(t,s=Rd){return s.format(t,"LLLL")}function vUe(t,s,a){return(a??new Uu(s)).format(t,"cccccc")}function jUe(t,s=Rd){return t<10?s.formatNumber(`0${t.toLocaleString()}`):s.formatNumber(`${t.toLocaleString()}`)}function bUe(){return""}function Tte(t,s=Rd){return s.format(t,"yyyy")}const yUe=Tte,NUe=Object.freeze(Object.defineProperty({__proto__:null,formatCaption:Dte,formatDay:fUe,formatMonthCaption:pUe,formatMonthDropdown:gUe,formatWeekNumber:jUe,formatWeekNumberHeader:bUe,formatWeekdayName:vUe,formatYearCaption:yUe,formatYearDropdown:Tte},Symbol.toStringTag,{value:"Module"}));function wUe(t){return t?.formatMonthCaption&&!t.formatCaption&&(t.formatCaption=t.formatMonthCaption),t?.formatYearCaption&&!t.formatYearDropdown&&(t.formatYearDropdown=t.formatYearCaption),{...NUe,...t}}function _Ue(t,s,a,r,n){const{startOfMonth:i,startOfYear:l,endOfYear:o,eachMonthOfInterval:d,getMonth:c}=n;return d({start:l(t),end:o(t)}).map(x=>{const g=r.formatMonthDropdown(x,n),j=c(x),y=s&&x<i(s)||a&&x>i(a)||!1;return{value:j,label:g,disabled:y}})}function CUe(t,s={},a={}){let r={...s?.[gs.Day]};return Object.entries(t).filter(([,n])=>n===!0).forEach(([n])=>{r={...r,...a?.[n]}}),r}function SUe(t,s,a){const r=t.today(),n=s?t.startOfISOWeek(r):t.startOfWeek(r),i=[];for(let l=0;l<7;l++){const o=t.addDays(n,l);i.push(o)}return i}function kUe(t,s,a,r,n=!1){if(!t||!s)return;const{startOfYear:i,endOfYear:l,addYears:o,getYear:d,isBefore:c,isSameYear:u}=r,h=i(t),x=l(s),g=[];let j=h;for(;c(j,x)||u(j,x);)g.push(j),j=o(j,1);return n&&g.reverse(),g.map(y=>{const b=a.formatYearDropdown(y,r);return{value:d(y),label:b,disabled:!1}})}function Fte(t,s,a,r){let n=(r??new Uu(a)).format(t,"PPPP");return s.today&&(n=`Today, ${n}`),s.selected&&(n=`${n}, selected`),n}const EUe=Fte;function Rte(t,s,a){return(a??new Uu(s)).format(t,"LLLL y")}const AUe=Rte;function PUe(t,s,a,r){let n=(r??new Uu(a)).format(t,"PPPP");return s?.today&&(n=`Today, ${n}`),n}function DUe(t){return"Choose the Month"}function TUe(){return""}function FUe(t){return"Go to the Next Month"}function RUe(t){return"Go to the Previous Month"}function OUe(t,s,a){return(a??new Uu(s)).format(t,"cccc")}function IUe(t,s){return`Week ${t}`}function LUe(t){return"Week Number"}function MUe(t){return"Choose the Year"}const BUe=Object.freeze(Object.defineProperty({__proto__:null,labelCaption:AUe,labelDay:EUe,labelDayButton:Fte,labelGrid:Rte,labelGridcell:PUe,labelMonthDropdown:DUe,labelNav:TUe,labelNext:FUe,labelPrevious:RUe,labelWeekNumber:IUe,labelWeekNumberHeader:LUe,labelWeekday:OUe,labelYearDropdown:MUe},Symbol.toStringTag,{value:"Module"})),Db=t=>t instanceof HTMLElement?t:null,JE=t=>[...t.querySelectorAll("[data-animated-month]")??[]],$Ue=t=>Db(t.querySelector("[data-animated-month]")),QE=t=>Db(t.querySelector("[data-animated-caption]")),XE=t=>Db(t.querySelector("[data-animated-weeks]")),UUe=t=>Db(t.querySelector("[data-animated-nav]")),zUe=t=>Db(t.querySelector("[data-animated-weekdays]"));function qUe(t,s,{classNames:a,months:r,focused:n,dateLib:i}){const l=m.useRef(null),o=m.useRef(r),d=m.useRef(!1);m.useLayoutEffect(()=>{const c=o.current;if(o.current=r,!s||!t.current||!(t.current instanceof HTMLElement)||r.length===0||c.length===0||r.length!==c.length)return;const u=i.isSameMonth(r[0].date,c[0].date),h=i.isAfter(r[0].date,c[0].date),x=h?a[Yl.caption_after_enter]:a[Yl.caption_before_enter],g=h?a[Yl.weeks_after_enter]:a[Yl.weeks_before_enter],j=l.current,y=t.current.cloneNode(!0);if(y instanceof HTMLElement?(JE(y).forEach(_=>{if(!(_ instanceof HTMLElement))return;const A=$Ue(_);A&&_.contains(A)&&_.removeChild(A);const k=QE(_);k&&k.classList.remove(x);const E=XE(_);E&&E.classList.remove(g)}),l.current=y):l.current=null,d.current||u||n)return;const b=j instanceof HTMLElement?JE(j):[],N=JE(t.current);if(N?.every(C=>C instanceof HTMLElement)&&b&&b.every(C=>C instanceof HTMLElement)){d.current=!0,t.current.style.isolation="isolate";const C=UUe(t.current);C&&(C.style.zIndex="1"),N.forEach((_,A)=>{const k=b[A];if(!k)return;_.style.position="relative",_.style.overflow="hidden";const E=QE(_);E&&E.classList.add(x);const D=XE(_);D&&D.classList.add(g);const R=()=>{d.current=!1,t.current&&(t.current.style.isolation=""),C&&(C.style.zIndex=""),E&&E.classList.remove(x),D&&D.classList.remove(g),_.style.position="",_.style.overflow="",_.contains(k)&&_.removeChild(k)};k.style.pointerEvents="none",k.style.position="absolute",k.style.overflow="hidden",k.setAttribute("aria-hidden","true");const O=zUe(k);O&&(O.style.opacity="0");const P=QE(k);P&&(P.classList.add(h?a[Yl.caption_before_exit]:a[Yl.caption_after_exit]),P.addEventListener("animationend",R));const T=XE(k);T&&T.classList.add(h?a[Yl.weeks_before_exit]:a[Yl.weeks_after_exit]),_.insertBefore(k,_.firstChild)})}})}function VUe(t,s,a,r){const n=t[0],i=t[t.length-1],{ISOWeek:l,fixedWeeks:o,broadcastCalendar:d}=a??{},{addDays:c,differenceInCalendarDays:u,differenceInCalendarMonths:h,endOfBroadcastWeek:x,endOfISOWeek:g,endOfMonth:j,endOfWeek:y,isAfter:b,startOfBroadcastWeek:N,startOfISOWeek:C,startOfWeek:_}=r,A=d?N(n,r):l?C(n):_(n),k=d?x(i):l?g(j(i)):y(j(i)),E=u(k,A),D=h(i,n)+1,R=[];for(let T=0;T<=E;T++){const B=c(A,T);if(s&&b(B,s))break;R.push(B)}const P=(d?35:42)*D;if(o&&R.length<P){const T=P-R.length;for(let B=0;B<T;B++){const G=c(R[R.length-1],1);R.push(G)}}return R}function WUe(t){const s=[];return t.reduce((a,r)=>{const n=r.weeks.reduce((i,l)=>i.concat(l.days.slice()),s.slice());return a.concat(n.slice())},s.slice())}function HUe(t,s,a,r){const{numberOfMonths:n=1}=a,i=[];for(let l=0;l<n;l++){const o=r.addMonths(t,l);if(s&&o>s)break;i.push(o)}return i}function Z7(t,s,a,r){const{month:n,defaultMonth:i,today:l=r.today(),numberOfMonths:o=1}=t;let d=n||i||l;const{differenceInCalendarMonths:c,addMonths:u,startOfMonth:h}=r;if(a&&c(a,d)<o-1){const x=-1*(o-1);d=u(a,x)}return s&&c(d,s)<0&&(d=s),h(d)}function GUe(t,s,a,r){const{addDays:n,endOfBroadcastWeek:i,endOfISOWeek:l,endOfMonth:o,endOfWeek:d,getISOWeek:c,getWeek:u,startOfBroadcastWeek:h,startOfISOWeek:x,startOfWeek:g}=r,j=t.reduce((y,b)=>{const N=a.broadcastCalendar?h(b,r):a.ISOWeek?x(b):g(b),C=a.broadcastCalendar?i(b):a.ISOWeek?l(o(b)):d(o(b)),_=s.filter(D=>D>=N&&D<=C),A=a.broadcastCalendar?35:42;if(a.fixedWeeks&&_.length<A){const D=s.filter(R=>{const O=A-_.length;return R>C&&R<=n(C,O)});_.push(...D)}const k=_.reduce((D,R)=>{const O=a.ISOWeek?c(R):u(R),P=D.find(B=>B.weekNumber===O),T=new _te(R,b,r);return P?P.days.push(T):D.push(new I7e(O,[T])),D},[]),E=new O7e(b,k);return y.push(E),y},[]);return a.reverseMonths?j.reverse():j}function KUe(t,s){let{startMonth:a,endMonth:r}=t;const{startOfYear:n,startOfDay:i,startOfMonth:l,endOfMonth:o,addYears:d,endOfYear:c,newDate:u,today:h}=s,{fromYear:x,toYear:g,fromMonth:j,toMonth:y}=t;!a&&j&&(a=j),!a&&x&&(a=s.newDate(x,0,1)),!r&&y&&(r=y),!r&&g&&(r=u(g,11,31));const b=t.captionLayout==="dropdown"||t.captionLayout==="dropdown-years";return a?a=l(a):x?a=u(x,0,1):!a&&b&&(a=n(d(t.today??h(),-100))),r?r=o(r):g?r=u(g,11,31):!r&&b&&(r=c(t.today??h())),[a&&i(a),r&&i(r)]}function YUe(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:i=1}=a,{startOfMonth:l,addMonths:o,differenceInCalendarMonths:d}=r,c=n?i:1,u=l(t);if(!s)return o(u,c);if(!(d(s,t)<i))return o(u,c)}function ZUe(t,s,a,r){if(a.disableNavigation)return;const{pagedNavigation:n,numberOfMonths:i}=a,{startOfMonth:l,addMonths:o,differenceInCalendarMonths:d}=r,c=n?i??1:1,u=l(t);if(!s)return o(u,-c);if(!(d(u,s)<=0))return o(u,-c)}function JUe(t){const s=[];return t.reduce((a,r)=>a.concat(r.weeks.slice()),s.slice())}function wC(t,s){const[a,r]=m.useState(t);return[s===void 0?a:s,r]}function QUe(t,s){const[a,r]=KUe(t,s),{startOfMonth:n,endOfMonth:i}=s,l=Z7(t,a,r,s),[o,d]=wC(l,t.month?l:void 0);m.useEffect(()=>{const E=Z7(t,a,r,s);d(E)},[t.timeZone]);const c=HUe(o,r,t,s),u=VUe(c,t.endMonth?i(t.endMonth):void 0,t,s),h=GUe(c,u,t,s),x=JUe(h),g=WUe(h),j=ZUe(o,a,t,s),y=YUe(o,r,t,s),{disableNavigation:b,onMonthChange:N}=t,C=E=>x.some(D=>D.days.some(R=>R.isEqualTo(E))),_=E=>{if(b)return;let D=n(E);a&&D<n(a)&&(D=n(a)),r&&D>n(r)&&(D=n(r)),d(D),N?.(D)};return{months:h,weeks:x,days:g,navStart:a,navEnd:r,previousMonth:j,nextMonth:y,goToMonth:_,goToDay:E=>{C(E)||_(E.date)}}}var ud;(function(t){t[t.Today=0]="Today",t[t.Selected=1]="Selected",t[t.LastFocused=2]="LastFocused",t[t.FocusedModifier=3]="FocusedModifier"})(ud||(ud={}));function J7(t){return!t[zr.disabled]&&!t[zr.hidden]&&!t[zr.outside]}function XUe(t,s,a,r){let n,i=-1;for(const l of t){const o=s(l);J7(o)&&(o[zr.focused]&&i<ud.FocusedModifier?(n=l,i=ud.FocusedModifier):r?.isEqualTo(l)&&i<ud.LastFocused?(n=l,i=ud.LastFocused):a(l.date)&&i<ud.Selected?(n=l,i=ud.Selected):o[zr.today]&&i<ud.Today&&(n=l,i=ud.Today))}return n||(n=t.find(l=>J7(s(l)))),n}function eze(t,s,a,r,n,i,l){const{ISOWeek:o,broadcastCalendar:d}=i,{addDays:c,addMonths:u,addWeeks:h,addYears:x,endOfBroadcastWeek:g,endOfISOWeek:j,endOfWeek:y,max:b,min:N,startOfBroadcastWeek:C,startOfISOWeek:_,startOfWeek:A}=l;let E={day:c,week:h,month:u,year:x,startOfWeek:D=>d?C(D,l):o?_(D):A(D),endOfWeek:D=>d?g(D):o?j(D):y(D)}[t](a,s==="after"?1:-1);return s==="before"&&r?E=b([r,E]):s==="after"&&n&&(E=N([n,E])),E}function Ote(t,s,a,r,n,i,l,o=0){if(o>365)return;const d=eze(t,s,a.date,r,n,i,l),c=!!(i.disabled&&xu(d,i.disabled,l)),u=!!(i.hidden&&xu(d,i.hidden,l)),h=d,x=new _te(d,h,l);return!c&&!u?x:Ote(t,s,x,r,n,i,l,o+1)}function tze(t,s,a,r,n){const{autoFocus:i}=t,[l,o]=m.useState(),d=XUe(s.days,a,r||(()=>!1),l),[c,u]=m.useState(i?d:void 0);return{isFocusTarget:y=>!!d?.isEqualTo(y),setFocused:u,focused:c,blur:()=>{o(c),u(void 0)},moveFocus:(y,b)=>{if(!c)return;const N=Ote(y,b,c,s.navStart,s.navEnd,t,n);N&&(s.goToDay(N),u(N))}}}function sze(t,s){const{selected:a,required:r,onSelect:n}=t,[i,l]=wC(a,n?a:void 0),o=n?a:i,{isSameDay:d}=s,c=g=>o?.some(j=>d(j,g))??!1,{min:u,max:h}=t;return{selected:o,select:(g,j,y)=>{let b=[...o??[]];if(c(g)){if(o?.length===u||r&&o?.length===1)return;b=o?.filter(N=>!d(N,g))}else o?.length===h?b=[g]:b=[...b,g];return n||l(b),n?.(b,g,j,y),b},isSelected:c}}function aze(t,s,a=0,r=0,n=!1,i=Rd){const{from:l,to:o}=s||{},{isSameDay:d,isAfter:c,isBefore:u}=i;let h;if(!l&&!o)h={from:t,to:a>0?void 0:t};else if(l&&!o)d(l,t)?a===0?h={from:l,to:t}:n?h={from:l,to:void 0}:h=void 0:u(t,l)?h={from:t,to:l}:h={from:l,to:t};else if(l&&o)if(d(l,t)&&d(o,t))n?h={from:l,to:o}:h=void 0;else if(d(l,t))h={from:l,to:a>0?void 0:t};else if(d(o,t))h={from:t,to:a>0?void 0:t};else if(u(t,l))h={from:t,to:o};else if(c(t,l))h={from:l,to:t};else if(c(t,o))h={from:l,to:t};else throw new Error("Invalid range");if(h?.from&&h?.to){const x=i.differenceInCalendarDays(h.to,h.from);r>0&&x>r?h={from:t,to:void 0}:a>1&&x<a&&(h={from:t,to:void 0})}return h}function rze(t,s,a=Rd){const r=Array.isArray(s)?s:[s];let n=t.from;const i=a.differenceInCalendarDays(t.to,t.from),l=Math.min(i,6);for(let o=0;o<=l;o++){if(r.includes(n.getDay()))return!0;n=a.addDays(n,1)}return!1}function Q7(t,s,a=Rd){return hu(t,s.from,!1,a)||hu(t,s.to,!1,a)||hu(s,t.from,!1,a)||hu(s,t.to,!1,a)}function nze(t,s,a=Rd){const r=Array.isArray(s)?s:[s];if(r.filter(o=>typeof o!="function").some(o=>typeof o=="boolean"?o:a.isDate(o)?hu(t,o,!1,a):Pte(o,a)?o.some(d=>hu(t,d,!1,a)):nR(o)?o.from&&o.to?Q7(t,{from:o.from,to:o.to},a):!1:Ate(o)?rze(t,o.dayOfWeek,a):Ste(o)?a.isAfter(o.before,o.after)?Q7(t,{from:a.addDays(o.after,1),to:a.addDays(o.before,-1)},a):xu(t.from,o,a)||xu(t.to,o,a):kte(o)||Ete(o)?xu(t.from,o,a)||xu(t.to,o,a):!1))return!0;const l=r.filter(o=>typeof o=="function");if(l.length){let o=t.from;const d=a.differenceInCalendarDays(t.to,t.from);for(let c=0;c<=d;c++){if(l.some(u=>u(o)))return!0;o=a.addDays(o,1)}}return!1}function ize(t,s){const{disabled:a,excludeDisabled:r,selected:n,required:i,onSelect:l}=t,[o,d]=wC(n,l?n:void 0),c=l?n:o;return{selected:c,select:(x,g,j)=>{const{min:y,max:b}=t,N=x?aze(x,c,y,b,i,s):void 0;return r&&a&&N?.from&&N.to&&nze({from:N.from,to:N.to},a,s)&&(N.from=x,N.to=void 0),l||d(N),l?.(N,x,g,j),N},isSelected:x=>c&&hu(c,x,!1,s)}}function lze(t,s){const{selected:a,required:r,onSelect:n}=t,[i,l]=wC(a,n?a:void 0),o=n?a:i,{isSameDay:d}=s;return{selected:o,select:(h,x,g)=>{let j=h;return!r&&o&&o&&d(h,o)&&(j=void 0),n||l(j),n?.(j,h,x,g),j},isSelected:h=>o?d(o,h):!1}}function oze(t,s){const a=lze(t,s),r=sze(t,s),n=ize(t,s);switch(t.mode){case"single":return a;case"multiple":return r;case"range":return n;default:return}}function cze(t){let s=t;s.timeZone&&(s={...t},s.today&&(s.today=new Oi(s.today,s.timeZone)),s.month&&(s.month=new Oi(s.month,s.timeZone)),s.defaultMonth&&(s.defaultMonth=new Oi(s.defaultMonth,s.timeZone)),s.startMonth&&(s.startMonth=new Oi(s.startMonth,s.timeZone)),s.endMonth&&(s.endMonth=new Oi(s.endMonth,s.timeZone)),s.mode==="single"&&s.selected?s.selected=new Oi(s.selected,s.timeZone):s.mode==="multiple"&&s.selected?s.selected=s.selected?.map(Ds=>new Oi(Ds,s.timeZone)):s.mode==="range"&&s.selected&&(s.selected={from:s.selected.from?new Oi(s.selected.from,s.timeZone):void 0,to:s.selected.to?new Oi(s.selected.to,s.timeZone):void 0}));const{components:a,formatters:r,labels:n,dateLib:i,locale:l,classNames:o}=m.useMemo(()=>{const Ds={...XF,...s.locale};return{dateLib:new Uu({locale:Ds,weekStartsOn:s.broadcastCalendar?1:s.weekStartsOn,firstWeekContainsDate:s.firstWeekContainsDate,useAdditionalWeekYearTokens:s.useAdditionalWeekYearTokens,useAdditionalDayOfYearTokens:s.useAdditionalDayOfYearTokens,timeZone:s.timeZone,numerals:s.numerals},s.dateLib),components:mUe(s.components),formatters:wUe(s.formatters),labels:{...BUe,...s.labels},locale:Ds,classNames:{...xUe(),...s.classNames}}},[s.locale,s.broadcastCalendar,s.weekStartsOn,s.firstWeekContainsDate,s.useAdditionalWeekYearTokens,s.useAdditionalDayOfYearTokens,s.timeZone,s.numerals,s.dateLib,s.components,s.formatters,s.labels,s.classNames]),{captionLayout:d,mode:c,navLayout:u,numberOfMonths:h=1,onDayBlur:x,onDayClick:g,onDayFocus:j,onDayKeyDown:y,onDayMouseEnter:b,onDayMouseLeave:N,onNextClick:C,onPrevClick:_,showWeekNumber:A,styles:k}=s,{formatCaption:E,formatDay:D,formatMonthDropdown:R,formatWeekNumber:O,formatWeekNumberHeader:P,formatWeekdayName:T,formatYearDropdown:B}=r,G=QUe(s,i),{days:q,months:z,navStart:H,navEnd:le,previousMonth:Y,nextMonth:te,goToMonth:ne}=G,ae=dUe(q,s,H,le,i),{isSelected:re,select:xe,selected:ye}=oze(s,i)??{},{blur:ke,focused:ze,isFocusTarget:ce,moveFocus:Re,setFocused:ie}=tze(s,G,ae,re??(()=>!1),i),{labelDayButton:Ne,labelGridcell:Ue,labelGrid:ge,labelMonthDropdown:he,labelNav:_e,labelPrevious:at,labelNext:nt,labelWeekday:st,labelWeekNumber:ht,labelWeekNumberHeader:Ss,labelYearDropdown:Wt}=n,Rt=m.useMemo(()=>SUe(i,s.ISOWeek),[i,s.ISOWeek]),ys=c!==void 0||g!==void 0,dt=m.useCallback(()=>{Y&&(ne(Y),_?.(Y))},[Y,ne,_]),we=m.useCallback(()=>{te&&(ne(te),C?.(te))},[ne,te,C]),ot=m.useCallback((Ds,pa)=>Rs=>{Rs.preventDefault(),Rs.stopPropagation(),ie(Ds),xe?.(Ds.date,pa,Rs),g?.(Ds.date,pa,Rs)},[xe,g,ie]),St=m.useCallback((Ds,pa)=>Rs=>{ie(Ds),j?.(Ds.date,pa,Rs)},[j,ie]),Ft=m.useCallback((Ds,pa)=>Rs=>{ke(),x?.(Ds.date,pa,Rs)},[ke,x]),fs=m.useCallback((Ds,pa)=>Rs=>{const ca={ArrowLeft:[Rs.shiftKey?"month":"day",s.dir==="rtl"?"after":"before"],ArrowRight:[Rs.shiftKey?"month":"day",s.dir==="rtl"?"before":"after"],ArrowDown:[Rs.shiftKey?"year":"week","after"],ArrowUp:[Rs.shiftKey?"year":"week","before"],PageUp:[Rs.shiftKey?"year":"month","before"],PageDown:[Rs.shiftKey?"year":"month","after"],Home:["startOfWeek","before"],End:["endOfWeek","after"]};if(ca[Rs.key]){Rs.preventDefault(),Rs.stopPropagation();const[vr,Xs]=ca[Rs.key];Re(vr,Xs)}y?.(Ds.date,pa,Rs)},[Re,y,s.dir]),nn=m.useCallback((Ds,pa)=>Rs=>{b?.(Ds.date,pa,Rs)},[b]),Xe=m.useCallback((Ds,pa)=>Rs=>{N?.(Ds.date,pa,Rs)},[N]),Tt=m.useCallback(Ds=>pa=>{const Rs=Number(pa.target.value),ca=i.setMonth(i.startOfMonth(Ds),Rs);ne(ca)},[i,ne]),$a=m.useCallback(Ds=>pa=>{const Rs=Number(pa.target.value),ca=i.setYear(i.startOfMonth(Ds),Rs);ne(ca)},[i,ne]),{className:Ea,style:gr}=m.useMemo(()=>({className:[o[gs.Root],s.className].filter(Boolean).join(" "),style:{...k?.[gs.Root],...s.style}}),[o,s.className,s.style,k]),ln=hUe(s),aa=m.useRef(null);qUe(aa,!!s.animate,{classNames:o,months:z,focused:ze,dateLib:i});const Hr={dayPickerProps:s,selected:ye,select:xe,isSelected:re,months:z,nextMonth:te,previousMonth:Y,goToMonth:ne,getModifiers:ae,components:a,classNames:o,styles:k,labels:n,formatters:r};return lt.createElement(Cte.Provider,{value:Hr},lt.createElement(a.Root,{rootRef:s.animate?aa:void 0,className:Ea,style:gr,dir:s.dir,id:s.id,lang:s.lang,nonce:s.nonce,title:s.title,role:s.role,"aria-label":s["aria-label"],...ln},lt.createElement(a.Months,{className:o[gs.Months],style:k?.[gs.Months]},!s.hideNavigation&&!u&&lt.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:o[gs.Nav],style:k?.[gs.Nav],"aria-label":_e(),onPreviousClick:dt,onNextClick:we,previousMonth:Y,nextMonth:te}),z.map((Ds,pa)=>lt.createElement(a.Month,{"data-animated-month":s.animate?"true":void 0,className:o[gs.Month],style:k?.[gs.Month],key:pa,displayIndex:pa,calendarMonth:Ds},u==="around"&&!s.hideNavigation&&pa===0&&lt.createElement(a.PreviousMonthButton,{type:"button",className:o[gs.PreviousMonthButton],tabIndex:Y?void 0:-1,"aria-disabled":Y?void 0:!0,"aria-label":at(Y),onClick:dt,"data-animated-button":s.animate?"true":void 0},lt.createElement(a.Chevron,{disabled:Y?void 0:!0,className:o[gs.Chevron],orientation:s.dir==="rtl"?"right":"left"})),lt.createElement(a.MonthCaption,{"data-animated-caption":s.animate?"true":void 0,className:o[gs.MonthCaption],style:k?.[gs.MonthCaption],calendarMonth:Ds,displayIndex:pa},d?.startsWith("dropdown")?lt.createElement(a.DropdownNav,{className:o[gs.Dropdowns],style:k?.[gs.Dropdowns]},d==="dropdown"||d==="dropdown-months"?lt.createElement(a.MonthsDropdown,{className:o[gs.MonthsDropdown],"aria-label":he(),classNames:o,components:a,disabled:!!s.disableNavigation,onChange:Tt(Ds.date),options:_Ue(Ds.date,H,le,r,i),style:k?.[gs.Dropdown],value:i.getMonth(Ds.date)}):lt.createElement("span",null,R(Ds.date,i)),d==="dropdown"||d==="dropdown-years"?lt.createElement(a.YearsDropdown,{className:o[gs.YearsDropdown],"aria-label":Wt(i.options),classNames:o,components:a,disabled:!!s.disableNavigation,onChange:$a(Ds.date),options:kUe(H,le,r,i,!!s.reverseYears),style:k?.[gs.Dropdown],value:i.getYear(Ds.date)}):lt.createElement("span",null,B(Ds.date,i)),lt.createElement("span",{role:"status","aria-live":"polite",style:{border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap",wordWrap:"normal"}},E(Ds.date,i.options,i))):lt.createElement(a.CaptionLabel,{className:o[gs.CaptionLabel],role:"status","aria-live":"polite"},E(Ds.date,i.options,i))),u==="around"&&!s.hideNavigation&&pa===h-1&&lt.createElement(a.NextMonthButton,{type:"button",className:o[gs.NextMonthButton],tabIndex:te?void 0:-1,"aria-disabled":te?void 0:!0,"aria-label":nt(te),onClick:we,"data-animated-button":s.animate?"true":void 0},lt.createElement(a.Chevron,{disabled:te?void 0:!0,className:o[gs.Chevron],orientation:s.dir==="rtl"?"left":"right"})),pa===h-1&&u==="after"&&!s.hideNavigation&&lt.createElement(a.Nav,{"data-animated-nav":s.animate?"true":void 0,className:o[gs.Nav],style:k?.[gs.Nav],"aria-label":_e(),onPreviousClick:dt,onNextClick:we,previousMonth:Y,nextMonth:te}),lt.createElement(a.MonthGrid,{role:"grid","aria-multiselectable":c==="multiple"||c==="range","aria-label":ge(Ds.date,i.options,i)||void 0,className:o[gs.MonthGrid],style:k?.[gs.MonthGrid]},!s.hideWeekdays&&lt.createElement(a.Weekdays,{"data-animated-weekdays":s.animate?"true":void 0,className:o[gs.Weekdays],style:k?.[gs.Weekdays]},A&&lt.createElement(a.WeekNumberHeader,{"aria-label":Ss(i.options),className:o[gs.WeekNumberHeader],style:k?.[gs.WeekNumberHeader],scope:"col"},P()),Rt.map(Rs=>lt.createElement(a.Weekday,{"aria-label":st(Rs,i.options,i),className:o[gs.Weekday],key:String(Rs),style:k?.[gs.Weekday],scope:"col"},T(Rs,i.options,i)))),lt.createElement(a.Weeks,{"data-animated-weeks":s.animate?"true":void 0,className:o[gs.Weeks],style:k?.[gs.Weeks]},Ds.weeks.map(Rs=>lt.createElement(a.Week,{className:o[gs.Week],key:Rs.weekNumber,style:k?.[gs.Week],week:Rs},A&&lt.createElement(a.WeekNumber,{week:Rs,style:k?.[gs.WeekNumber],"aria-label":ht(Rs.weekNumber,{locale:l}),className:o[gs.WeekNumber],scope:"row",role:"rowheader"},O(Rs.weekNumber,i)),Rs.days.map(ca=>{const{date:vr}=ca,Xs=ae(ca);if(Xs[zr.focused]=!Xs.hidden&&!!ze?.isEqualTo(ca),Xs[Cc.selected]=re?.(vr)||Xs.selected,nR(ye)){const{from:Ir,to:Dn}=ye;Xs[Cc.range_start]=!!(Ir&&Dn&&i.isSameDay(vr,Ir)),Xs[Cc.range_end]=!!(Ir&&Dn&&i.isSameDay(vr,Dn)),Xs[Cc.range_middle]=hu(ye,vr,!0,i)}const Ki=CUe(Xs,k,s.modifiersStyles),Oa=uUe(Xs,o,s.modifiersClassNames),ic=!ys&&!Xs.hidden?Ue(vr,Xs,i.options,i):void 0;return lt.createElement(a.Day,{key:`${i.format(vr,"yyyy-MM-dd")}_${i.format(ca.displayMonth,"yyyy-MM")}`,day:ca,modifiers:Xs,className:Oa.join(" "),style:Ki,role:"gridcell","aria-selected":Xs.selected||void 0,"aria-label":ic,"data-day":i.format(vr,"yyyy-MM-dd"),"data-month":ca.outside?i.format(vr,"yyyy-MM"):void 0,"data-selected":Xs.selected||void 0,"data-disabled":Xs.disabled||void 0,"data-hidden":Xs.hidden||void 0,"data-outside":ca.outside||void 0,"data-focused":Xs.focused||void 0,"data-today":Xs.today||void 0},!Xs.hidden&&ys?lt.createElement(a.DayButton,{className:o[gs.DayButton],style:k?.[gs.DayButton],type:"button",day:ca,modifiers:Xs,disabled:Xs.disabled||void 0,tabIndex:ce(ca)?0:-1,"aria-label":Ne(vr,Xs,i.options,i),onClick:ot(ca,Xs),onBlur:Ft(ca,Xs),onFocus:St(ca,Xs),onKeyDown:fs(ca,Xs),onMouseEnter:nn(ca,Xs),onMouseLeave:Xe(ca,Xs)},D(vr,i.options,i)):!Xs.hidden&&D(ca.date,i.options,i))})))))))),s.footer&&lt.createElement(a.Footer,{className:o[gs.Footer],style:k?.[gs.Footer],role:"status","aria-live":"polite"},s.footer)))}function eA(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function iR({className:t,classNames:s,showOutsideDays:a=!0,...r}){return e.jsx(cze,{showOutsideDays:a,className:eA("p-3",t),classNames:{months:"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0",month:"space-y-4",caption:"flex justify-center pt-1 relative items-center",caption_label:"text-sm font-medium",nav:"space-x-1 flex items-center",nav_button:eA(ig({variant:"outline"}),"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100"),nav_button_previous:"absolute left-1",nav_button_next:"absolute right-1",table:"w-full border-collapse space-y-1",head_row:"flex",head_cell:"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]",row:"flex w-full mt-2",cell:"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20",day:eA(ig({variant:"ghost"}),"h-9 w-9 p-0 font-normal aria-selected:opacity-100"),day_range_end:"day-range-end",day_selected:"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground",day_today:"bg-accent text-accent-foreground",day_outside:"day-outside text-muted-foreground opacity-50 aria-selected:bg-accent/50 aria-selected:text-muted-foreground aria-selected:opacity-30",day_disabled:"text-muted-foreground opacity-50",day_range_middle:"aria-selected:bg-accent aria-selected:text-accent-foreground",day_hidden:"invisible",...s},components:{IconLeft:({...n})=>e.jsx(Uj,{className:"h-4 w-4"}),IconRight:({...n})=>e.jsx(xr,{className:"h-4 w-4"})},...r})}iR.displayName="Calendar";var _C="Popover",[Ite,GJe]=Vr(_C,[_h]),Tb=_h(),[dze,Rh]=Ite(_C),Lte=t=>{const{__scopePopover:s,children:a,open:r,defaultOpen:n,onOpenChange:i,modal:l=!1}=t,o=Tb(s),d=m.useRef(null),[c,u]=m.useState(!1),[h,x]=Hn({prop:r,defaultProp:n??!1,onChange:i,caller:_C});return e.jsx(J1,{...o,children:e.jsx(dze,{scope:s,contentId:En(),triggerRef:d,open:h,onOpenChange:x,onOpenToggle:m.useCallback(()=>x(g=>!g),[x]),hasCustomAnchor:c,onCustomAnchorAdd:m.useCallback(()=>u(!0),[]),onCustomAnchorRemove:m.useCallback(()=>u(!1),[]),modal:l,children:a})})};Lte.displayName=_C;var Mte="PopoverAnchor",uze=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Rh(Mte,a),i=Tb(a),{onCustomAnchorAdd:l,onCustomAnchorRemove:o}=n;return m.useEffect(()=>(l(),()=>o()),[l,o]),e.jsx(Qj,{...i,...r,ref:s})});uze.displayName=Mte;var Bte="PopoverTrigger",$te=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Rh(Bte,a),i=Tb(a),l=vs(s,n.triggerRef),o=e.jsx(Pt.button,{type:"button","aria-haspopup":"dialog","aria-expanded":n.open,"aria-controls":n.contentId,"data-state":Wte(n.open),...r,ref:l,onClick:gt(t.onClick,n.onOpenToggle)});return n.hasCustomAnchor?o:e.jsx(Qj,{asChild:!0,...i,children:o})});$te.displayName=Bte;var lR="PopoverPortal",[mze,hze]=Ite(lR,{forceMount:void 0}),Ute=t=>{const{__scopePopover:s,forceMount:a,children:r,container:n}=t,i=Rh(lR,s);return e.jsx(mze,{scope:s,forceMount:a,children:e.jsx(jn,{present:a||i.open,children:e.jsx(hp,{asChild:!0,container:n,children:r})})})};Ute.displayName=lR;var kg="PopoverContent",zte=m.forwardRef((t,s)=>{const a=hze(kg,t.__scopePopover),{forceMount:r=a.forceMount,...n}=t,i=Rh(kg,t.__scopePopover);return e.jsx(jn,{present:r||i.open,children:i.modal?e.jsx(pze,{...n,ref:s}):e.jsx(fze,{...n,ref:s})})});zte.displayName=kg;var xze=Bx("PopoverContent.RemoveScroll"),pze=m.forwardRef((t,s)=>{const a=Rh(kg,t.__scopePopover),r=m.useRef(null),n=vs(s,r),i=m.useRef(!1);return m.useEffect(()=>{const l=r.current;if(l)return z1(l)},[]),e.jsx(Gj,{as:xze,allowPinchZoom:!0,children:e.jsx(qte,{...t,ref:n,trapFocus:a.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:gt(t.onCloseAutoFocus,l=>{l.preventDefault(),i.current||a.triggerRef.current?.focus()}),onPointerDownOutside:gt(t.onPointerDownOutside,l=>{const o=l.detail.originalEvent,d=o.button===0&&o.ctrlKey===!0,c=o.button===2||d;i.current=c},{checkForDefaultPrevented:!1}),onFocusOutside:gt(t.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1})})})}),fze=m.forwardRef((t,s)=>{const a=Rh(kg,t.__scopePopover),r=m.useRef(!1),n=m.useRef(!1);return e.jsx(qte,{...t,ref:s,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:i=>{t.onCloseAutoFocus?.(i),i.defaultPrevented||(r.current||a.triggerRef.current?.focus(),i.preventDefault()),r.current=!1,n.current=!1},onInteractOutside:i=>{t.onInteractOutside?.(i),i.defaultPrevented||(r.current=!0,i.detail.originalEvent.type==="pointerdown"&&(n.current=!0));const l=i.target;a.triggerRef.current?.contains(l)&&i.preventDefault(),i.detail.originalEvent.type==="focusin"&&n.current&&i.preventDefault()}})}),qte=m.forwardRef((t,s)=>{const{__scopePopover:a,trapFocus:r,onOpenAutoFocus:n,onCloseAutoFocus:i,disableOutsidePointerEvents:l,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onInteractOutside:u,...h}=t,x=Rh(kg,a),g=Tb(a);return $1(),e.jsx(Hj,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:n,onUnmountAutoFocus:i,children:e.jsx(mp,{asChild:!0,disableOutsidePointerEvents:l,onInteractOutside:u,onEscapeKeyDown:o,onPointerDownOutside:d,onFocusOutside:c,onDismiss:()=>x.onOpenChange(!1),children:e.jsx(Q1,{"data-state":Wte(x.open),role:"dialog",id:x.contentId,...g,...h,ref:s,style:{...h.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),Vte="PopoverClose",gze=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Rh(Vte,a);return e.jsx(Pt.button,{type:"button",...r,ref:s,onClick:gt(t.onClick,()=>n.onOpenChange(!1))})});gze.displayName=Vte;var vze="PopoverArrow",jze=m.forwardRef((t,s)=>{const{__scopePopover:a,...r}=t,n=Tb(a);return e.jsx(X1,{...n,...r,ref:s})});jze.displayName=vze;function Wte(t){return t?"open":"closed"}var bze=Lte,yze=$te,Nze=Ute,Hte=zte;function wze(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Fb=bze,Rb=yze,lv=m.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},n)=>e.jsx(Nze,{children:e.jsx(Hte,{ref:n,align:s,sideOffset:a,className:wze("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));lv.displayName=Hte.displayName;function _ze(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function Cze({className:t,initialFilters:s={},onRowClick:a,showExport:r=!0,bankMode:n=!1,clients:i=[],branches:l=[],products:o=[]}){const[d,c]=m.useState({page:1,per_page:25,...s}),[u,h]=m.useState({}),{data:x,isLoading:g,error:j,refetch:y}=aR(d),b=yte(),N=T=>{switch(T.toLowerCase()){case"per_check":return e.jsx(Oe,{className:"h-4 w-4 text-green-600"});case"recheck":return e.jsx(Lt,{className:"h-4 w-4 text-blue-600"});case"import_draft":return e.jsx(Hs,{className:"h-4 w-4 text-purple-600"});case"import_bundle":return e.jsx(Ps,{className:"h-4 w-4 text-orange-600"});default:return e.jsx(Oe,{className:"h-4 w-4 text-gray-600"})}},C=T=>{switch(T.toLowerCase()){case"per_check":return"LC Validation";case"recheck":return"Re-check";case"import_draft":return"Import Draft";case"import_bundle":return"Import Bundle";default:return T.replace("_"," ").replace(/\b\w/g,B=>B.toUpperCase())}},_=T=>{switch(T.toLowerCase()){case"per_check":return"bg-green-100 text-green-800";case"recheck":return"bg-blue-100 text-blue-800";case"import_draft":return"bg-purple-100 text-purple-800";case"import_bundle":return"bg-orange-100 text-orange-800";default:return"bg-gray-100 text-gray-800"}},A=(T,B)=>{c(G=>({...G,[T]:B,page:T!=="page"?1:B}))},k=()=>{c(T=>({...T,start_date:u.start?hs(u.start,"yyyy-MM-dd"):void 0,end_date:u.end?hs(u.end,"yyyy-MM-dd"):void 0,page:1}))},E=()=>{c({page:1,per_page:25}),h({})},D=()=>{b.mutate(d)},R=T=>{A("page",T)},O=x?Math.ceil(x.total/(d.per_page||25)):0,P=d.page||1;return j?e.jsx($,{className:t,children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Error loading usage data. Please try again."}),e.jsx(M,{variant:"outline",onClick:()=>y(),className:"mt-2",children:"Retry"})]})}):e.jsxs($,{className:t,children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:["Usage Records",x&&e.jsxs(Q,{variant:"secondary",children:[x.total.toLocaleString()," total"]})]}),r&&e.jsxs(M,{variant:"outline",size:"sm",onClick:D,disabled:b.isPending,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),b.isPending?"Exporting...":"Export CSV"]})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search actions...",value:d.action||"",onChange:T=>A("action",T.target.value||void 0),className:"pl-8"})]})}),e.jsxs(Fb,{children:[e.jsx(Rb,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:"w-full lg:w-auto gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),u.start?u.end?e.jsxs(e.Fragment,{children:[hs(u.start,"LLL dd, y")," -"," ",hs(u.end,"LLL dd, y")]}):hs(u.start,"LLL dd, y"):"Pick a date range"]})}),e.jsxs(lv,{className:"w-auto p-0",align:"start",children:[e.jsx(iR,{initialFocus:!0,mode:"range",defaultMonth:u.start,selected:{from:u.start,to:u.end},onSelect:T=>{h({start:T?.from,end:T?.to})},numberOfMonths:2}),e.jsx("div",{className:"p-3 border-t",children:e.jsx(M,{onClick:k,className:"w-full",size:"sm",children:"Apply Date Range"})})]})]}),n&&e.jsxs(e.Fragment,{children:[i.length>0&&e.jsxs(Te,{value:d.client_id||"all",onValueChange:T=>A("client_id",T==="all"?void 0:T),children:[e.jsx(Pe,{className:"w-full lg:w-[180px]",children:e.jsx(Fe,{placeholder:"All Clients"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Clients"}),i.map(T=>e.jsx(K,{value:T.id,children:T.name},T.id))]})]}),l.length>0&&e.jsxs(Te,{value:d.branch_id||"all",onValueChange:T=>A("branch_id",T==="all"?void 0:T),children:[e.jsx(Pe,{className:"w-full lg:w-[180px]",children:e.jsx(Fe,{placeholder:"All Branches"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Branches"}),l.map(T=>e.jsx(K,{value:T.id,children:T.name},T.id))]})]}),o.length>0&&e.jsxs(Te,{value:d.product||"all",onValueChange:T=>A("product",T==="all"?void 0:T),children:[e.jsx(Pe,{className:"w-full lg:w-[180px]",children:e.jsx(Fe,{placeholder:"All Products"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Products"}),o.map(T=>e.jsx(K,{value:T,children:T.replace("_"," ")},T))]})]})]}),e.jsxs(Te,{value:d.per_page?.toString()||"25",onValueChange:T=>A("per_page",parseInt(T)),children:[e.jsx(Pe,{className:"w-full lg:w-auto",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"10",children:"10 per page"}),e.jsx(K,{value:"25",children:"25 per page"}),e.jsx(K,{value:"50",children:"50 per page"}),e.jsx(K,{value:"100",children:"100 per page"})]})]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:E,className:"gap-2",children:[e.jsx(Nd,{className:"h-4 w-4"}),"Clear"]})]})]}),e.jsx(U,{children:g?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((T,B)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-20 h-4 bg-muted rounded animate-pulse"})]},B))}):x?.records.length===0?e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No usage records found for the selected filters."})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Action"}),e.jsx(je,{children:"Date & Time"}),e.jsx(je,{children:"Cost"}),e.jsx(je,{className:"w-[100px]",children:"Session"})]})}),e.jsx(oa,{children:x?.records.map(T=>e.jsxs(At,{className:_ze("cursor-pointer hover:bg-muted/50",a&&"cursor-pointer"),onClick:()=>a?.(T),children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center space-x-3",children:[N(T.action),e.jsx("div",{children:e.jsx(Q,{variant:"secondary",className:_(T.action),children:C(T.action)})})]})}),e.jsx(fe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:hs(new Date(T.created_at),"MMM dd, yyyy")}),e.jsx("div",{className:"text-sm text-muted-foreground",children:hs(new Date(T.created_at),"HH:mm:ss")})]})}),e.jsx(fe,{children:e.jsx("div",{className:"font-medium",children:Tr(T.cost)})}),e.jsx(fe,{children:T.session_id?e.jsx(Q,{variant:"outline",className:"text-xs",children:T.session_id.slice(-8)}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"-"})})]},T.id))})]})}),O>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(P-1)*(d.per_page||25)+1," to"," ",Math.min(P*(d.per_page||25),x?.total||0)," of"," ",x?.total||0," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>R(P-1),disabled:P===1,children:[e.jsx(Uj,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,O)},(T,B)=>{const G=B+1;return e.jsx(M,{variant:P===G?"default":"outline",size:"sm",onClick:()=>R(G),className:"w-8 h-8 p-0",children:G},G)})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>R(P+1),disabled:P===O,children:["Next",e.jsx(xr,{className:"h-4 w-4"})]})]})]})]})})]})}function Sze({className:t,maxRows:s=5}){const{data:a,isLoading:r}=aR({page:1,per_page:s});if(r)return e.jsxs($,{className:t,children:[e.jsx(X,{children:e.jsx(ee,{className:"text-base",children:"Recent Usage"})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((l,o)=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-6 h-6 bg-muted rounded animate-pulse"}),e.jsxs("div",{className:"flex-1 space-y-1",children:[e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-2 bg-muted rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-16 h-3 bg-muted rounded animate-pulse"})]},o))})})]});if(!a?.records.length)return e.jsxs($,{className:t,children:[e.jsx(X,{children:e.jsx(ee,{className:"text-base",children:"Recent Usage"})}),e.jsx(U,{children:e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No usage records found"})})]});return e.jsxs($,{className:t,children:[e.jsx(X,{children:e.jsx(ee,{className:"text-base",children:"Recent Usage"})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:a.records.slice(0,s).map(l=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"p-1 bg-muted rounded",children:n(l.action)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-sm font-medium truncate",children:i(l.action)}),e.jsx("div",{className:"text-xs text-muted-foreground",children:hs(new Date(l.created_at),"MMM dd, HH:mm")})]}),e.jsx("div",{className:"text-sm font-medium",children:Tr(l.cost)})]},l.id))})})]});function n(l){switch(l.toLowerCase()){case"per_check":return e.jsx(Oe,{className:"h-4 w-4 text-green-600"});case"recheck":return e.jsx(Lt,{className:"h-4 w-4 text-blue-600"});case"import_draft":return e.jsx(Hs,{className:"h-4 w-4 text-purple-600"});case"import_bundle":return e.jsx(Ps,{className:"h-4 w-4 text-orange-600"});default:return e.jsx(Oe,{className:"h-4 w-4 text-gray-600"})}}function i(l){switch(l.toLowerCase()){case"per_check":return"LC Validation";case"recheck":return"Re-check";case"import_draft":return"Import Draft";case"import_bundle":return"Import Bundle";default:return l.replace("_"," ").replace(/\b\w/g,o=>o.toUpperCase())}}}function X7(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function Gte({className:t,initialFilters:s={},onInvoiceClick:a,showActions:r=!0,compact:n=!1,bankMode:i=!1,clients:l=[],branches:o=[],products:d=[]}){const[c,u]=m.useState({page:1,per_page:n?5:20,...s}),[h,x]=m.useState(new Set),{data:g,isLoading:j,error:y,refetch:b}=Ab(c),N=bte(),C=jte(),_=z=>{switch(z){case"PAID":return e.jsx(Oe,{className:"h-4 w-4 text-green-600"});case"PENDING":return e.jsx(mt,{className:"h-4 w-4 text-yellow-600"});case"OVERDUE":case"FAILED":return e.jsx(ks,{className:"h-4 w-4 text-red-600"});default:return e.jsx(Be,{className:"h-4 w-4 text-gray-600"})}},A=z=>{switch(z){case"PAID":return"Paid";case"PENDING":return"Pending";case"OVERDUE":return"Overdue";case"FAILED":return"Failed";case"CANCELLED":return"Cancelled";default:return z}},k=z=>{if(!z)return"N/A";switch(z){case"PENDING":return"Pending";case"PROCESSED":return"Processed";case"RECONCILED":return"Reconciled";case"DISPUTED":return"Disputed";default:return z}},E=z=>{if(!z)return"text-gray-600 bg-gray-100";switch(z){case"RECONCILED":return"text-green-600 bg-green-100";case"PROCESSED":return"text-blue-600 bg-blue-100";case"PENDING":return"text-yellow-600 bg-yellow-100";case"DISPUTED":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}},D=(z,H)=>{u(le=>({...le,[z]:H,page:z!=="page"?1:H}))},R=z=>{D("page",z)},O=z=>{x(H=>{const le=new Set(H);return le.has(z)?le.delete(z):le.add(z),le})},P=z=>{N.mutate(z)},T=z=>{C.mutate({invoiceId:z})},B=z=>z==="FAILED"||z==="OVERDUE",G=g?Math.ceil(g.total/(c.per_page||20)):0,q=c.page||1;return y?e.jsx($,{className:t,children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-8",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Error loading invoices. Please try again."}),e.jsx(M,{variant:"outline",onClick:()=>b(),className:"mt-2",children:"Retry"})]})}):e.jsxs($,{className:t,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:["Invoices",g&&e.jsxs(Q,{variant:"secondary",children:[g.total," total"]})]}),!n&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(Te,{value:c.status||"all",onValueChange:z=>D("status",z==="all"?void 0:z),children:[e.jsx(Pe,{className:"w-[140px]",children:e.jsx(Fe,{placeholder:"All statuses"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Statuses"}),e.jsx(K,{value:"PENDING",children:"Pending"}),e.jsx(K,{value:"PAID",children:"Paid"}),e.jsx(K,{value:"OVERDUE",children:"Overdue"}),e.jsx(K,{value:"FAILED",children:"Failed"}),e.jsx(K,{value:"CANCELLED",children:"Cancelled"})]})]}),i&&e.jsxs(e.Fragment,{children:[e.jsxs(Te,{value:c.settlement_status||"all",onValueChange:z=>D("settlement_status",z==="all"?void 0:z),children:[e.jsx(Pe,{className:"w-[160px]",children:e.jsx(Fe,{placeholder:"All settlements"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Settlements"}),e.jsx(K,{value:"PENDING",children:"Pending"}),e.jsx(K,{value:"PROCESSED",children:"Processed"}),e.jsx(K,{value:"RECONCILED",children:"Reconciled"}),e.jsx(K,{value:"DISPUTED",children:"Disputed"})]})]}),l.length>0&&e.jsxs(Te,{value:c.client_id||"all",onValueChange:z=>D("client_id",z==="all"?void 0:z),children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"All Clients"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Clients"}),l.map(z=>e.jsx(K,{value:z.id,children:z.name},z.id))]})]}),o.length>0&&e.jsxs(Te,{value:c.branch_id||"all",onValueChange:z=>D("branch_id",z==="all"?void 0:z),children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"All Branches"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Branches"}),o.map(z=>e.jsx(K,{value:z.id,children:z.name},z.id))]})]}),d.length>0&&e.jsxs(Te,{value:c.product||"all",onValueChange:z=>D("product",z==="all"?void 0:z),children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"All Products"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Products"}),d.map(z=>e.jsx(K,{value:z,children:z.replace("_"," ")},z))]})]})]}),e.jsxs(Te,{value:c.per_page?.toString()||"20",onValueChange:z=>D("per_page",parseInt(z)),children:[e.jsx(Pe,{className:"w-[120px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"10",children:"10 per page"}),e.jsx(K,{value:"20",children:"20 per page"}),e.jsx(K,{value:"50",children:"50 per page"})]})]})]})]})}),e.jsx(U,{children:j?e.jsx("div",{className:"space-y-3",children:Array.from({length:n?3:5}).map((z,H)=>e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-8 h-8 bg-muted rounded animate-pulse"}),e.jsxs("div",{className:"space-y-2 flex-1",children:[e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]}),e.jsx("div",{className:"w-20 h-4 bg-muted rounded animate-pulse"})]},H))}):g?.invoices.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Be,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No invoices found."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[!n&&e.jsx(je,{className:"w-[50px]"}),e.jsx(je,{children:"Invoice"}),e.jsx(je,{children:"Amount"}),e.jsx(je,{children:"Status"}),i&&e.jsx(je,{children:"Settlement"}),e.jsx(je,{children:"Due Date"}),r&&e.jsx(je,{className:"w-[50px]"})]})}),e.jsx(oa,{children:g?.invoices.map(z=>e.jsxs(lt.Fragment,{children:[e.jsxs(At,{className:X7("group",a&&"cursor-pointer hover:bg-muted/50"),onClick:()=>a?.(z),children:[!n&&e.jsx(fe,{children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:H=>{H.stopPropagation(),O(z.id)},children:h.has(z.id)?e.jsx(ja,{className:"h-4 w-4"}):e.jsx(xr,{className:"h-4 w-4"})})}),e.jsx(fe,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:z.invoice_number}),e.jsx("div",{className:"text-sm text-muted-foreground",children:hs(new Date(z.issued_date),"MMM dd, yyyy")})]})}),e.jsx(fe,{children:e.jsx("div",{className:"font-medium",children:Tr(z.amount,z.currency)})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[_(z.status),e.jsx(Q,{variant:z.status==="PAID"?"default":z.status==="PENDING"?"secondary":"destructive",className:pte(z.status),children:A(z.status)})]})}),i&&e.jsx(fe,{children:e.jsx(Q,{variant:"secondary",className:E(z.settlement_status),children:k(z.settlement_status)})}),e.jsx(fe,{children:e.jsx("div",{className:X7("text-sm",z.status==="OVERDUE"&&"text-red-600 font-medium"),children:hs(new Date(z.due_date),"MMM dd, yyyy")})}),r&&e.jsx(fe,{children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 opacity-0 group-hover:opacity-100",onClick:H=>H.stopPropagation(),children:e.jsx(Vj,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:H=>{H.stopPropagation(),a?.(z)},children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"View Details"]}),e.jsxs(is,{onClick:H=>{H.stopPropagation(),P(z.id)},children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),B(z.status)&&e.jsxs(e.Fragment,{children:[e.jsx(Dc,{}),e.jsxs(is,{onClick:H=>{H.stopPropagation(),T(z.id)},children:[e.jsx(pn,{className:"h-4 w-4 mr-2"}),"Retry Payment"]})]})]})]})})]}),!n&&h.has(z.id)&&e.jsx(At,{children:e.jsx(fe,{colSpan:r?6:5,className:"p-0",children:e.jsx(xh,{open:h.has(z.id),children:e.jsx(ph,{children:e.jsx("div",{className:"p-4 bg-muted/30",children:e.jsx(kze,{lineItems:z.line_items})})})})})})]},z.id))})]})}),!n&&G>1&&e.jsxs("div",{className:"flex items-center justify-between pt-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(q-1)*(c.per_page||20)+1," to"," ",Math.min(q*(c.per_page||20),g?.total||0)," of"," ",g?.total||0," results"]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>R(q-1),disabled:q===1,children:[e.jsx(Uj,{className:"h-4 w-4"}),"Previous"]}),e.jsx("div",{className:"flex items-center space-x-1",children:Array.from({length:Math.min(5,G)},(z,H)=>{const le=H+1;return e.jsx(M,{variant:q===le?"default":"outline",size:"sm",onClick:()=>R(le),className:"w-8 h-8 p-0",children:le},le)})}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>R(q+1),disabled:q===G,children:["Next",e.jsx(xr,{className:"h-4 w-4"})]})]})]})]})})]})}function kze({lineItems:t}){return!t||t.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No line items available."}):e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"text-sm font-medium",children:"Invoice Line Items"}),e.jsx("div",{className:"space-y-2",children:t.map(s=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-medium",children:s.description}),s.quantity>1&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[s.quantity," Ã— ",Tr(s.unit_price)]})]}),e.jsx("div",{className:"text-sm font-medium",children:Tr(s.amount)})]},s.id))})]})}function Eze({className:t,maxRows:s=5}){return e.jsx(Gte,{className:t,initialFilters:{page:1,per_page:s},showActions:!1,compact:!0})}function oR({onTabChange:t,mode:s="sme"}){const[a]=zs(),[r,n]=m.useState(!1),[i,l]=m.useState([]),{user:o}=Dt(),d=rR(),c=s==="bank",{data:u,isLoading:h,error:x}=vte(),{data:g,isLoading:j}=NC(),{data:y,isLoading:b}=Ab({page:1,per_page:5}),{data:N,isLoading:C}=Ks({queryKey:["bankContract"],queryFn:()=>c1.getBankContract(),enabled:c}),_=y?.invoices.some(B=>B.status===Gf.PENDING);_7e(_),lt.useEffect(()=>{const B=a.get("success"),G=a.get("cancelled"),q=a.get("plan");if(B==="true"?(Vn.success(q?`Plan upgrade successful! Welcome to ${q}.`:"Payment completed successfully!"),d()):G==="true"&&Vn.info("Payment was cancelled. You can retry anytime."),B||G){const z=new URLSearchParams(a);z.delete("success"),z.delete("cancelled"),z.delete("plan"),window.history.replaceState({},"",`${window.location.pathname}?${z}`)}},[a,d]);const A=B=>{l(G=>[...G,B])},k=()=>{n(!0)},E=()=>{d(),Vn.success("Plan upgrade initiated! You will be redirected to complete payment.")},D=()=>y?.invoices[0]?.status;if(h||j)return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx(pt,{className:"h-8 w-48 mb-2"}),e.jsx(pt,{className:"h-4 w-96"})]}),e.jsx(pt,{className:"h-10 w-32"})]}),e.jsx(pt,{className:"h-12 w-full"}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(pt,{className:"h-64 w-full"}),e.jsx(pt,{className:"h-96 w-full"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(pt,{className:"h-80 w-full"}),e.jsx(pt,{className:"h-64 w-full"})]})]})]});const R={id:"default",name:o?.email?.split("@")[0]||"Your Company",plan:da.FREE,quota_limit:100,quota_used:0,quota_remaining:100,billing_email:o?.email||null,payment_customer_id:null},O={company_id:"default",current_month:0,current_week:0,today:0,total_usage:0,total_cost:0,quota_limit:100,quota_used:0,quota_remaining:100},P=u||R,T=g||O;return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsx("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Billing Dashboard"}),e.jsxs("p",{className:"text-muted-foreground",children:["Manage your subscription, usage, and billing for ",P.name]})]})}),e.jsx(yC,{currentTab:"overview",onTabChange:t,onUpgrade:k,onRefresh:d,mode:s,hideUpgrade:c,pendingInvoicesCount:y?.invoices.filter(B=>B.status===Gf.PENDING).length||0,overdueInvoicesCount:y?.invoices.filter(B=>B.status===Gf.OVERDUE).length||0}),e.jsx(g7e,{usage:T,plan:P.plan,lastInvoiceStatus:D(),onUpgrade:k,onRetryPayment:()=>{Vn.info("Payment retry functionality will be available soon.")},onDismiss:A,dismissedAlerts:i}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(f7e,{usage:T,lastInvoiceStatus:D(),trends:{validations:{value:12.5,isPositive:!0,period:"last month"},cost:{value:-5.2,isPositive:!1,period:"last month"}}}),e.jsx(Sze,{maxRows:8}),!b&&y&&y.invoices.length>0&&e.jsx(Eze,{maxRows:5})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(fte,{usage:T,plan:P.plan}),c&&N?e.jsx(p7e,{contract:N}):c?e.jsx(pt,{className:"h-[300px]"}):e.jsx(h7e,{billingInfo:P,onUpgrade:k}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Quick Actions"}),e.jsxs(M,{variant:"outline",className:"w-full gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Export Usage Data"]}),e.jsxs(M,{variant:"outline",className:"w-full gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),"Generate Invoice"]}),!c&&P.plan!=="ENTERPRISE"&&e.jsxs(M,{onClick:k,className:"w-full gap-2",children:[e.jsx(Vt,{className:"h-4 w-4"}),"Upgrade Plan"]})]})]})]}),!c&&e.jsx(k7e,{open:r,onOpenChange:n,currentBillingInfo:P,onSuccess:E})]})}function cR({onTabChange:t,mode:s="sme"}){const[a,r]=m.useState({page:1,per_page:25}),n=s==="bank",i=n?[{id:"client-1",name:"ABC Exports Ltd"},{id:"client-2",name:"XYZ Imports Ltd"},{id:"client-3",name:"Global Trading Co"}]:[],l=n?[{id:"branch-1",name:"Dhaka Main"},{id:"branch-2",name:"Chittagong"},{id:"branch-3",name:"Sylhet"}]:[],o=n?["LC_VALIDATION","RE_CHECK","AMENDMENT"]:[],[d,c]=m.useState("trend"),{data:u}=vte(),{data:h,isLoading:x}=NC(),{data:g}=aR(a),j=yte(),y=rR(),b=Array.from({length:30},(_,A)=>{const k=Un(new Date,29-A);return{date:hs(k,"MMM dd"),usage:Math.floor(Math.random()*15)+1,cost:(Math.floor(Math.random()*15)+1)*1200}}),N=[{name:"LC Validation",value:45,cost:54e3,color:"#10b981"},{name:"Re-check",value:12,cost:14400,color:"#3b82f6"},{name:"Import Draft",value:8,cost:8e3,color:"#8b5cf6"},{name:"Import Bundle",value:3,cost:5400,color:"#f59e0b"}];Array.from({length:12},(_,A)=>{const k=new Date;return k.setMonth(k.getMonth()-(11-A)),{month:hs(k,"MMM"),usage:Math.floor(Math.random()*80)+20,cost:(Math.floor(Math.random()*80)+20)*1200}});const C=()=>{j.mutate(a)};return x||!h?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(pt,{className:"h-8 w-48"}),e.jsx(pt,{className:"h-12 w-full"}),e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-4",children:Array.from({length:4}).map((_,A)=>e.jsx(pt,{className:"h-32"},A))}),e.jsx(pt,{className:"h-96 w-full"})]})]}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Usage Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Detailed usage history and trends for your LC validation services"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(M,{variant:"outline",onClick:C,disabled:j.isPending,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),j.isPending?"Exporting...":"Export CSV"]})})]}),e.jsx(yC,{currentTab:"usage",onTabChange:t,onRefresh:y,mode:s,hideUpgrade:n}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"This Month"}),e.jsx(Wn,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.current_month}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"validations used"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"This Week"}),e.jsx(ya,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:h.current_week}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"validations this week"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Cost"}),e.jsx(Na,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Tr(h.total_cost)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"lifetime spending"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Daily Average"}),e.jsx(Vt,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:Math.round(h.current_month/new Date().getDate())}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"validations per day"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs($,{className:"lg:col-span-2",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"}),"Usage Trends"]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(M,{size:"sm",variant:d==="trend"?"default":"outline",onClick:()=>c("trend"),children:"Trend"}),e.jsx(M,{size:"sm",variant:d==="cost"?"default":"outline",onClick:()=>c("cost"),children:"Cost"})]})]})}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:300,children:d==="trend"?e.jsxs(cC,{data:b,children:[e.jsx(wi,{strokeDasharray:"3 3"}),e.jsx(Gn,{dataKey:"date",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Kn,{fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(kn,{content:({active:_,payload:A,label:k})=>_&&A&&A.length?e.jsxs("div",{className:"bg-background border rounded-lg shadow-sm p-3",children:[e.jsx("p",{className:"font-medium",children:k}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-green-600",children:"Usage: "}),A[0].value," validations"]})]}):null}),e.jsx(Gm,{type:"monotone",dataKey:"usage",stroke:"#10b981",fill:"#10b981",fillOpacity:.1})]}):e.jsxs(mh,{data:b,children:[e.jsx(wi,{strokeDasharray:"3 3"}),e.jsx(Gn,{dataKey:"date",fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(Kn,{fontSize:12,tickLine:!1,axisLine:!1}),e.jsx(kn,{content:({active:_,payload:A,label:k})=>_&&A&&A.length?e.jsxs("div",{className:"bg-background border rounded-lg shadow-sm p-3",children:[e.jsx("p",{className:"font-medium",children:k}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{className:"text-purple-600",children:"Cost: "}),Tr(A[0].value)]})]}):null}),e.jsx(Fc,{dataKey:"cost",fill:"#8b5cf6"})]})})})]}),e.jsxs("div",{className:"space-y-6",children:[u&&e.jsx(fte,{usage:h,plan:u.plan,showCost:!1}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(io,{className:"h-5 w-5"}),"Usage by Type"]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(qn,{width:"100%",height:180,children:e.jsxs(K2,{children:[e.jsx(wj,{data:N,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:5,dataKey:"value",children:N.map((_,A)=>e.jsx(Eu,{fill:_.color},`cell-${A}`))}),e.jsx(kn,{content:({active:_,payload:A})=>{if(_&&A&&A.length){const k=A[0].payload;return e.jsxs("div",{className:"bg-background border rounded-lg shadow-sm p-3",children:[e.jsx("p",{className:"font-medium",children:k.name}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{children:"Count: "}),k.value," validations"]}),e.jsxs("p",{className:"text-sm",children:[e.jsx("span",{children:"Cost: "}),Tr(k.cost)]})]})}return null}})]})}),e.jsx("div",{className:"space-y-2",children:N.map((_,A)=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:_.color}}),e.jsx("span",{className:"text-sm",children:_.name})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-medium",children:_.value}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Tr(_.cost)})]})]},A))})]})})]})]})]}),e.jsx(Cze,{initialFilters:a,bankMode:n,clients:i,branches:l,products:o,onRowClick:_=>{console.log("Usage record clicked:",_)}})]})}function dR({onTabChange:t,mode:s="sme"}){const[a,r]=m.useState(null),[n,i]=m.useState(!1),[l,o]=m.useState({page:1,per_page:20}),d=s==="bank",c=d?[{id:"client-1",name:"ABC Exports Ltd"},{id:"client-2",name:"XYZ Imports Ltd"},{id:"client-3",name:"Global Trading Co"}]:[],u=d?[{id:"branch-1",name:"Dhaka Main"},{id:"branch-2",name:"Chittagong"},{id:"branch-3",name:"Sylhet"}]:[],h=d?["LC_VALIDATION","RE_CHECK","AMENDMENT"]:[],{user:x}=Dt(),{data:g,isLoading:j}=Ab(l),{data:y,isLoading:b}=y7e(a?.id||""),N=w7e(),C=bte(),_=jte(),A=rR(),k=x?.role==="admin",E=B=>{r(B),i(!0)},D=B=>{C.mutate(B)},R=B=>{_.mutate({invoiceId:B})},O=()=>{const B=new Date;B.setDate(1),B.setHours(0,0,0,0);const G=new Date;G.setMonth(G.getMonth()+1),G.setDate(0),G.setHours(23,59,59,999),N.mutate({startDate:B.toISOString().split("T")[0],endDate:G.toISOString().split("T")[0]})},T=g?.invoices?g.invoices.reduce((G,q)=>(G[q.status]=(G[q.status]||0)+1,G),{}):null;return j?e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(pt,{className:"h-8 w-48"}),e.jsx(pt,{className:"h-12 w-full"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:Array.from({length:4}).map((B,G)=>e.jsx(pt,{className:"h-24"},G))}),e.jsx(pt,{className:"h-96 w-full"})]})]}):e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:d?"Invoices & Settlements":"Invoices"}),e.jsx("p",{className:"text-muted-foreground",children:d?"View and manage invoices and settlement records":"View and manage your invoices and payment history"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:k&&e.jsxs(M,{onClick:O,disabled:N.isPending,className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),N.isPending?"Generating...":"Generate Invoice"]})})]}),e.jsx(yC,{currentTab:"invoices",onTabChange:t,onRefresh:A,mode:s,hideUpgrade:d}),T&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Invoices"}),e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold",children:g?.total||0})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Paid"}),e.jsx(Oe,{className:"h-4 w-4 text-green-600"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:T.PAID||0})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Pending"}),e.jsx(mt,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:T.PENDING||0})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(ks,{className:"h-4 w-4 text-red-600"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(T.OVERDUE||0)+(T.FAILED||0)})})]})]}),e.jsx(Gte,{initialFilters:l,bankMode:d,clients:c,branches:u,products:h,onInvoiceClick:E}),e.jsx(wt,{open:n,onOpenChange:i,children:e.jsxs(yt,{className:"sm:max-w-2xl",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center space-x-2",children:[e.jsx(Be,{className:"h-5 w-5"}),e.jsx("span",{children:"Invoice Details"}),a&&e.jsx(Q,{variant:a.status==="PAID"?"default":a.status==="PENDING"?"secondary":"destructive",className:pte(a.status),children:a.status})]}),e.jsxs(_t,{children:[a?.invoice_number," â€¢ ",a&&hs(new Date(a.issued_date),"MMMM dd, yyyy")]})]}),b?e.jsxs("div",{className:"space-y-4",children:[e.jsx(pt,{className:"h-4 w-full"}),e.jsx(pt,{className:"h-4 w-3/4"}),e.jsx(pt,{className:"h-32 w-full"})]}):a?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Amount"}),e.jsx("p",{className:"text-2xl font-bold",children:Tr(a.amount,a.currency)})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Due Date"}),e.jsx("p",{className:"text-lg",children:hs(new Date(a.due_date),"MMMM dd, yyyy")})]})]}),a.paid_date&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground",children:"Payment Date"}),e.jsx("p",{className:"text-sm",children:hs(new Date(a.paid_date),"MMMM dd, yyyy")})]}),a.line_items&&a.line_items.length>0&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-medium text-muted-foreground mb-3",children:"Invoice Items"}),e.jsx("div",{className:"space-y-2",children:a.line_items.map(B=>e.jsxs("div",{className:"flex items-center justify-between py-2 border-b last:border-b-0",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:B.description}),B.quantity>1&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[B.quantity," Ã— ",Tr(B.unit_price)]})]}),e.jsx("div",{className:"font-medium",children:Tr(B.amount)})]},B.id))})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsx("div",{className:"space-x-2",children:e.jsxs(M,{variant:"outline",onClick:()=>D(a.id),disabled:C.isPending,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),C.isPending?"Downloading...":"Download PDF"]})}),(a.status==="FAILED"||a.status==="OVERDUE")&&e.jsxs(M,{onClick:()=>R(a.id),disabled:_.isPending,className:"gap-2",children:[e.jsx(pn,{className:"h-4 w-4"}),_.isPending?"Processing...":"Retry Payment"]})]})]}):null]})})]})}const Aze={success:{icon:Qs,color:"text-success",bgColor:"bg-success/10"},warning:{icon:Ve,color:"text-warning",bgColor:"bg-warning/10"},info:{icon:Ja,color:"text-info",bgColor:"bg-info/10"},error:{icon:ks,color:"text-destructive",bgColor:"bg-destructive/10"},approval:{icon:Gs,color:"text-primary",bgColor:"bg-primary/10"},discrepancy:{icon:Ve,color:"text-warning",bgColor:"bg-warning/10"}};function Pze({notification:t,onMarkAsRead:s,onDismiss:a,embedded:r=!1}){const n=zt(),i=Aze[t.type],l=i.icon,o=()=>{t.link&&n(t.link),!t.read&&s&&s(t.id)},d=u=>{u.stopPropagation(),t.action&&t.action.action(),!t.read&&s&&s(t.id)},c=u=>{u.stopPropagation(),a&&a(t.id)};return e.jsx("div",{className:Le("p-3 rounded-lg border transition-all cursor-pointer hover:bg-muted/50",t.read?"border-border/50 opacity-75":"border-border bg-background",t.link&&"hover:border-primary/50"),onClick:o,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:Le("p-1.5 rounded-full flex-shrink-0",i.bgColor),children:e.jsx(l,{className:Le("w-4 h-4",i.color)})}),e.jsxs("div",{className:"flex-1 min-w-0 space-y-2",children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h4",{className:Le("font-medium text-sm",t.read?"text-muted-foreground":"text-foreground"),children:t.title}),!t.read&&e.jsx(Q,{variant:"default",className:"h-4 px-1.5 text-xs",children:"New"}),t.badge&&e.jsx(Q,{variant:"secondary",className:"h-4 px-1.5 text-xs",children:t.badge})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:t.timestamp})]}),a&&e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0 flex-shrink-0",onClick:c,children:e.jsx(fn,{className:"h-3 w-3"})})]}),t.action&&e.jsx("div",{className:"flex items-center gap-2 pt-1",children:e.jsxs(M,{size:"sm",variant:t.action.variant||"outline",className:"h-7 text-xs",onClick:d,children:[t.action.label,e.jsx(Jt,{className:"h-3 w-3 ml-1"})]})})]})]})})}function uR({notifications:t,onMarkAsRead:s,onDismiss:a,onMarkAllAsRead:r,embedded:n=!1,showHeader:i=!0}){const l=t.filter(o=>!o.read).length;return e.jsxs("div",{className:"space-y-4",children:[i&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),e.jsx("h3",{className:"font-semibold",children:"Notifications"}),l>0&&e.jsx(Q,{variant:"default",className:"h-5 px-2",children:l})]}),r&&l>0&&e.jsx(M,{variant:"ghost",size:"sm",onClick:r,className:"text-xs",children:"Mark all as read"})]}),e.jsx("div",{className:"space-y-2",children:t.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx($s,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No notifications"})]}):t.map(o=>e.jsx(Pze,{notification:o,onMarkAsRead:s,onDismiss:a,embedded:n},o.id))})]})}const Kte=m.createContext(void 0);function Dze({children:t}){const{results:s,getResults:a,isLoading:r,error:n}=HF(),[i,l]=m.useState(null);m.useEffect(()=>{i&&a(i).catch(()=>{})},[i,a]);const o=m.useCallback(async c=>{const u=c??i;return u?a(u):null},[i,a]),d=m.useMemo(()=>({jobId:i,setJobId:l,results:s,isLoading:r,error:n,refresh:o}),[i,s,r,n,o]);return e.jsx(Kte.Provider,{value:d,children:t})}function Tze(){const t=m.useContext(Kte);if(!t)throw new Error("useResultsContext must be used within a ResultsProvider");return t}function Yte({activeSection:t,onSectionChange:s,user:a,...r}){const n=rn(),{user:i,logout:l}=jG(),{logout:o}=Dt(),d=a||i,c=h=>n.pathname===h||n.pathname+n.search===h,u=async h=>{h?.preventDefault(),h?.stopPropagation();try{await o()}catch(x){console.warn("Main auth logout failed:",x)}try{l()}catch(x){console.warn("Exporter auth logout failed:",x),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...r,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-exporter/10 text-exporter",children:e.jsx(Bs,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"LCopilot"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Exporter Portal"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Main Navigation"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="dashboard",onClick:()=>s("dashboard"),children:[e.jsx(Ws,{}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="templates",onClick:()=>s("templates"),tooltip:"Templates",children:[e.jsx(Be,{}),e.jsx("span",{children:"Templates"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="upload",onClick:()=>s("upload"),tooltip:"Upload Documents",children:[e.jsx(Hs,{}),e.jsx("span",{children:"Upload Documents"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="reviews",onClick:()=>s("reviews"),tooltip:"Review Results",children:[e.jsx(mt,{}),e.jsx("span",{children:"Review Results"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="workspace",onClick:()=>s("workspace"),tooltip:"LC Workspace",children:[e.jsx(R1,{}),e.jsx("span",{children:"LC Workspace"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="analytics",onClick:()=>s("analytics"),tooltip:"Analytics",children:[e.jsx(Ws,{}),e.jsx("span",{children:"Analytics"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="notifications",onClick:()=>s("notifications"),tooltip:"Notifications",children:[e.jsx($s,{}),e.jsx("span",{children:"Notifications"})]})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Billing & Finance"}),e.jsx(Js,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs(it,{isActive:t==="billing",onClick:()=>s("billing"),tooltip:"Billing",children:[e.jsx(pn,{}),e.jsx("span",{children:"Billing"})]})})})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"AI & Tools"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="ai-assistance",onClick:()=>s("ai-assistance"),tooltip:"AI Assistance",children:[e.jsx(ni,{}),e.jsx("span",{children:"AI Assistance"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="content-library",onClick:()=>s("content-library"),tooltip:"Content Library",children:[e.jsx(DD,{}),e.jsx("span",{children:"Content Library"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="shipment-timeline",onClick:()=>s("shipment-timeline"),tooltip:"Shipment Timeline",children:[e.jsx(ya,{}),e.jsx("span",{children:"Shipment Timeline"})]})})]})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="settings"||c("/lcopilot/exporter-dashboard?tab=settings"),onClick:()=>s("settings"),tooltip:"Settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="help",onClick:()=>s("help"),tooltip:"Help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help"})]})})]})})})]}),e.jsx(Qo,{children:d&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:d.name?.charAt(0).toUpperCase()||d.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:d.name||d.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:d.role==="tenant_admin"?"Admin":"Exporter"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:u,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}const GP=["overview","upload","reviews","documents","issues","extracted-data","history","analytics","customs"];function eU(t){if(!t)return"overview";const s=t.toLowerCase().trim();return s==="discrepancies"?"issues":s==="dashboard"?"overview":GP.includes(s)?s:"overview"}function Fze(t){switch(t){case"overview":case"reviews":return"overview";case"documents":return"documents";case"issues":return"discrepancies";case"extracted-data":return"extracted-data";case"history":return"history";case"analytics":return"analytics";case"customs":return"customs";default:return"overview"}}function Rze(t){switch(t){case"overview":return"reviews";case"documents":return"documents";case"discrepancies":return"issues";case"extracted-data":return"extracted-data";case"history":return"history";case"analytics":return"reviews";case"customs":return"reviews";default:return"reviews"}}function Oze(t){switch(t){case"overview":return"dashboard";case"upload":return"upload";case"reviews":case"documents":case"issues":case"extracted-data":case"history":case"analytics":case"customs":return"reviews";default:return"dashboard"}}function Ize(t){switch(t){case"dashboard":return"overview";case"upload":return"upload";case"reviews":return"reviews";case"workspace":return"workspace";case"analytics":return"analytics";case"templates":case"notifications":case"billing":case"billing-usage":case"ai-assistance":case"content-library":case"shipment-timeline":case"settings":case"help":return t;default:return"overview"}}function tA(t,s){const a=t.get(s);return a===null?void 0:a}function Lze(){return e.jsx(Dze,{children:e.jsx(Mze,{})})}function Mze(){const t=zt(),[s,a]=zs(),{jobId:r,setJobId:n}=Tze(),{user:i,isLoading:l}=Dt(),{user:o,isAuthenticated:d,isLoading:c}=jG(),u=d||!!i,{toast:h}=et(),x=s.get("section"),g=tA(s,"jobId"),j=tA(s,"lc"),y=tA(s,"tab"),[b,N]=m.useState(()=>{if(!x)return"overview";const G=eU(x);return G!=="overview"||x==="overview"?G:["dashboard","workspace","templates","upload","reviews","analytics","notifications","billing","billing-usage","ai-assistance","content-library","shipment-timeline","settings","help"].includes(x)?x:"overview"}),[C,_]=m.useState("overview"),A=g||r,k=GP.includes(b)?Oze(b):b;m.useEffect(()=>{if(c||l)return;const G=typeof window<"u"&&localStorage.getItem("demo_mode")==="true";if(u||G)return;const q=window.setTimeout(()=>{const z=encodeURIComponent(window.location.pathname+window.location.search);t(`/login?returnUrl=${z}`)},1500);return()=>window.clearTimeout(q)},[u,c,l,t]),m.useEffect(()=>{g&&g!==r&&n(g)},[g,r,n]),m.useEffect(()=>{if(!x){N("overview");return}const G=eU(x);if(G!=="overview"||x==="overview"){N(G);return}["dashboard","workspace","templates","upload","reviews","analytics","notifications","billing","billing-usage","ai-assistance","content-library","shipment-timeline","settings","help"].includes(x)?N(x):N("overview")},[x]);const E=m.useCallback((G,q)=>{const z=new URLSearchParams;if(G!=="overview"&&z.set("section",G),["reviews","documents","issues","extracted-data","history","analytics","customs"].includes(G)){const le=q?.jobId??A,Y=q?.lc??j,te=q?.tab??(G==="reviews"?y:void 0);le&&z.set("jobId",le),Y&&z.set("lc",Y),te&&G==="reviews"&&z.set("tab",te)}a(z,{replace:!0}),N(G)},[A,j,y,a]),D=m.useCallback(G=>{const q=Ize(G);E(q)},[E]),R=m.useCallback(G=>{G==="usage"?E("billing-usage"):G==="invoices"?(_("invoices"),E("billing")):(_("overview"),E("billing"))},[E]),O=m.useCallback(G=>{n(G.jobId),E("reviews",{jobId:G.jobId,lc:G.lcNumber,tab:"overview"})},[n,E]),P=m.useCallback(G=>{const q=Rze(G);E(q,{jobId:A,lc:j,tab:q==="reviews"?G:void 0})},[A,j,E]);if(c||l)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-emerald-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!u)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx("p",{className:"text-muted-foreground",children:"Please log in to access the exporter dashboard."}),e.jsx("a",{href:`/login?returnUrl=${encodeURIComponent(window.location.pathname+window.location.search)}`,className:"inline-block px-4 py-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600",children:"Go to Login"})]})});const T=b==="reviews"&&y?y:GP.includes(b)?Fze(b):"overview",B=["reviews","documents","issues","extracted-data","history","customs"].includes(b);return e.jsx(Lc,{sidebar:e.jsx(Yte,{activeSection:k,onSectionChange:D,user:i??o??void 0}),breadcrumbs:[{label:"LCopilot",href:"/lcopilot"},{label:"Exporter Dashboard"}],children:e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6 lg:p-8",children:[b==="overview"&&e.jsx(Bze,{onNavigate:E,user:i??o??void 0}),b==="upload"&&e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-5 h-5"}),"Upload LC Documents"]}),e.jsx(ue,{children:"Run extraction, rule checks, and customs readiness against your LC package."})]}),e.jsx(U,{children:e.jsx(Zee,{embedded:!0,onComplete:O})})]}),B&&e.jsx(ww,{embedded:!0,jobId:A??void 0,lcNumber:j??void 0,initialTab:T,onTabChange:P}),b==="workspace"&&e.jsx(dte,{embedded:!0}),b==="templates"&&e.jsx(ute,{embedded:!0}),b==="analytics"&&e.jsx(cte,{embedded:!0}),b==="notifications"&&e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Notifications"]}),e.jsx(ue,{children:"Stay updated on your LC validations and compliance alerts"})]}),e.jsxs(U,{className:"text-center py-8",children:[e.jsx($s,{className:"w-12 h-12 text-muted-foreground/50 mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No notifications yet"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"You'll receive notifications when your LCs are validated or require attention."})]})]}),b==="billing"&&(C==="invoices"?e.jsx(dR,{onTabChange:R}):e.jsx(oR,{onTabChange:R})),b==="billing-usage"&&e.jsx(cR,{onTabChange:R}),b==="ai-assistance"&&e.jsx(mte,{embedded:!0,role:"exporter"}),b==="content-library"&&e.jsx(hte,{embedded:!0}),b==="shipment-timeline"&&e.jsx(xte,{embedded:!0}),b==="settings"&&e.jsx($ze,{toast:h}),b==="help"&&e.jsx(Uze,{})]})})}function Bze({onNavigate:t,user:s}){const{toast:a}=et(),{getAllDrafts:r,removeDraft:n}=vC(),{getAllAmendedLCs:i}=Pee(),[l,o]=m.useState([]),[d,c]=m.useState(!1),[u,h]=m.useState([]),[x,g]=m.useState(!1),[j,y]=m.useState("drafts"),[b,N]=m.useState([]),[C,_]=m.useState(!0);m.useEffect(()=>{(()=>{c(!0);try{const ne=r();o(ne)}catch(ne){console.error("Failed to load drafts:",ne)}finally{c(!1)}})()},[r]),m.useEffect(()=>{(async()=>{g(!0);try{const ne=await i();h(ne)}catch(ne){console.error("Failed to load amended LCs:",ne)}finally{g(!1)}})()},[i]),m.useEffect(()=>{(async()=>{_(!0);try{const ne=await xp();N(ne||[])}catch(ne){console.error("Failed to load validation sessions:",ne),N([])}finally{_(!1)}})()},[]);const A=te=>{try{n(te),o(ne=>ne.filter(ae=>ae.id!==te)),a({title:"Draft Deleted",description:"The saved draft has been removed."})}catch(ne){a({title:"Failed to Delete Draft",description:ne.message||"Could not delete the draft. Please try again.",variant:"destructive"})}},k=te=>{const ne=new Date(te),re=Math.floor((new Date().getTime()-ne.getTime())/(1e3*60*60));if(re<1)return"Just now";if(re<24)return`${re}h ago`;const xe=Math.floor(re/24);return xe<7?`${xe}d ago`:ne.toLocaleDateString()},E=s?.company||s?.name||"Exporter",D=new Date,R=new Date(D.getFullYear(),D.getMonth(),1),O=b.filter(te=>new Date(te.created_at)>=R),P=b.filter(te=>te.status==="completed"),T=b.reduce((te,ne)=>te+(ne.discrepancies?.length||0),0),B=b.reduce((te,ne)=>te+(ne.documents?.length||0),0),G=P.filter(te=>(te.discrepancies?.length||0)===0),q=P.length>0?Math.round(G.length/P.length*100*10)/10:0,z=P.filter(te=>te.processing_started_at&&te.processing_completed_at),H=z.length>0?z.reduce((te,ne)=>{const ae=new Date(ne.processing_started_at).getTime(),re=new Date(ne.processing_completed_at).getTime();return te+(re-ae)},0)/z.length:0,le=H>0?`${(H/6e4).toFixed(1)} min`:"N/A",Y=[...b].filter(te=>te.status==="completed").sort((te,ne)=>new Date(ne.created_at).getTime()-new Date(te.created_at).getTime()).slice(0,5);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-2",children:["Welcome back, ",E]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your LC validations today."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-6",children:[e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:O.length}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length," total validations"]})]}),e.jsx("div",{className:"bg-emerald-500/10 p-3 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-emerald-600"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[q,"%"]}),e.jsx(es,{value:q,className:"mt-2 h-2"})]}),e.jsx("div",{className:"bg-green-500/10 p-3 rounded-lg",children:e.jsx(Vt,{className:"w-6 h-6 text-green-500"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Avg Processing"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:le}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[P.length," completed"]})]}),e.jsx("div",{className:"bg-blue-500/10 p-3 rounded-lg",children:e.jsx(mt,{className:"w-6 h-6 text-blue-500"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:"Discrepancies"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:T}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[B," docs processed"]})]}),e.jsx("div",{className:"bg-amber-500/10 p-3 rounded-lg",children:e.jsx(Ve,{className:"w-6 h-6 text-amber-500"})})]})})})]}),e.jsxs($,{className:"shadow-soft border-0 mb-6",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Your LC Management"}),e.jsx(ue,{children:"Manage your draft uploads and track amended LCs"})]}),e.jsx(U,{children:e.jsxs(Os,{value:j,onValueChange:y,children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2",children:[e.jsxs(He,{value:"drafts",className:"flex items-center gap-2",children:[e.jsx(th,{className:"w-4 h-4"}),"Drafts (",l.length,")"]}),e.jsxs(He,{value:"amendments",className:"flex items-center gap-2",children:[e.jsx(qm,{className:"w-4 h-4"}),"Amendments (",u.length,")"]})]}),e.jsx(Qe,{value:"drafts",className:"mt-6",children:d?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-emerald-500 border-t-transparent rounded-full mr-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading drafts..."})]}):l.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(th,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No drafts saved"}),e.jsx("p",{className:"text-sm",children:"Save drafts while uploading to resume later"})]}):e.jsx("div",{className:"space-y-3",children:l.map(te=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-secondary/20",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:te.lcNumber||"Untitled Draft"}),e.jsx(Q,{variant:"outline",className:"text-xs",children:"Incomplete"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[te.filesMeta?.length||0," files"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Updated ",k(te.updatedAt)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(pe,{to:`/export-lc-upload?draftId=${te.id}`,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Jt,{className:"w-4 h-4 mr-2"}),"Resume"]})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>A(te.id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"w-4 h-4"})})]})]},te.id))})}),e.jsx(Qe,{value:"amendments",className:"mt-6",children:x?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-emerald-500 border-t-transparent rounded-full mr-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading amendments..."})]}):u.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qm,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No amended LCs"}),e.jsx("p",{className:"text-sm",children:"LCs with multiple versions will appear here"})]}):e.jsx("div",{className:"space-y-3",children:u.map(te=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg bg-secondary/20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-emerald-500/10 p-3 rounded-lg",children:e.jsx(qm,{className:"w-5 h-5 text-emerald-600"})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground",children:["LC #",te.lc_number]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[te.versions," versions â€¢ Latest: ",te.latest_version]}),e.jsx("div",{className:"flex items-center gap-2 mt-1",children:e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last updated ",k(te.last_updated)]})})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(pe,{to:`/lcopilot/results/latest?lc=${te.lc_number}`,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(xn,{className:"w-4 h-4 mr-2"}),"View History"]})})})]},te.lc_number))})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Recent LC Validations"]}),e.jsx(ue,{children:"Your latest document validation results"})]}),e.jsx(U,{children:C?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx("div",{className:"animate-spin w-6 h-6 border-2 border-emerald-500 border-t-transparent rounded-full mr-3"}),e.jsx("span",{className:"text-muted-foreground",children:"Loading validations..."})]}):Y.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No validations yet"}),e.jsx("p",{className:"text-sm",children:"Upload your first LC package to get started"}),e.jsxs(M,{variant:"outline",className:"mt-4",onClick:()=>t("upload"),children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Upload LC"]})]}):e.jsx("div",{className:"space-y-4",children:Y.map(te=>{const ne=te.discrepancies?.length||0,ae=te.documents?.length||0,re=ne>0,xe=te.extracted_data?.lc_number||te.id.slice(0,8).toUpperCase();return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/20 rounded-lg border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:re?ne>2?e.jsx("div",{className:"bg-red-500/10 p-2 rounded-lg",children:e.jsx(bs,{className:"w-5 h-5 text-red-500"})}):e.jsx("div",{className:"bg-amber-500/10 p-2 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})}):e.jsx("div",{className:"bg-green-500/10 p-2 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5 text-green-500"})})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground",children:["LC-",xe]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Session ",te.id.slice(0,8)]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:k(te.created_at)}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["â€¢ ",ae," documents"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-right",children:e.jsx(Fa,{status:re?ne>2?"error":"warning":"success",children:ne===0?"No issues":ne===1?"1 issue":`${ne} issues`})}),e.jsx(pe,{to:`/lcopilot/exporter-dashboard?section=reviews&jobId=${te.id}`,children:e.jsx(M,{variant:"outline",size:"sm",children:"View"})})]})]},te.id)})})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Summary"}),e.jsx(ue,{children:"Your validation overview"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Validations"}),e.jsx("span",{className:"font-medium",children:b.length})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Documents Processed"}),e.jsx("span",{className:"font-medium",children:B})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Total Discrepancies"}),e.jsx("span",{className:"font-medium",children:T})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm text-muted-foreground",children:"Completed"}),e.jsx("span",{className:"font-medium",children:P.length})]})]})})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2 text-lg",children:[e.jsx($s,{className:"w-5 h-5"}),"Activity"]})}),e.jsx(U,{children:Y.length===0?e.jsx("p",{className:"text-sm text-muted-foreground text-center py-4",children:"No recent activity"}):e.jsx("div",{className:"space-y-3",children:Y.slice(0,3).map(te=>{const ne=te.discrepancies?.length||0,ae=te.extracted_data?.lc_number||te.id.slice(0,8);return e.jsx("div",{className:"p-3 rounded-lg border border-gray-200/50",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`p-1 rounded-full ${ne===0?"bg-green-500/10":ne>2?"bg-red-500/10":"bg-amber-500/10"}`,children:e.jsx("div",{className:`w-2 h-2 rounded-full ${ne===0?"bg-green-500":ne>2?"bg-red-500":"bg-amber-500"}`})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-medium text-sm text-foreground",children:ne===0?"Validation Passed":`${ne} Issues Found`}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["LC-",ae]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:k(te.created_at)})]})]})},te.id)})})})]})]})]})]})}function $ze({toast:t}){const[s,a]=m.useState(!0),[r,n]=m.useState(!1),[i,l]=m.useState("daily"),[o,d]=m.useState("overview"),[c,u]=m.useState(!1),[h,x]=m.useState("preferences"),g=()=>{u(!0),setTimeout(()=>{u(!1),t({title:"Preferences updated",description:"Your exporter workspace settings were saved successfully."})},600)},j=()=>{a(!0),n(!1),l("daily"),d("overview")};return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Settings"}),e.jsx(ue,{children:"Configure exporter workspace preferences and data retention."})]}),e.jsx(U,{children:e.jsxs(Os,{value:h,onValueChange:x,className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"preferences",children:"Preferences"}),e.jsx(He,{value:"company-profile",children:"Company Profile"}),e.jsx(He,{value:"data-retention",children:"Data & Privacy"})]}),e.jsxs(Qe,{value:"preferences",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Email alerts for validation issues"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive an email whenever validation finds discrepancies."})]}),e.jsx(js,{checked:s,onCheckedChange:a,"aria-label":"Toggle validation email alerts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Auto-archive completed validations"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Move validations to archive 7 days after completion."})]}),e.jsx(js,{checked:r,onCheckedChange:n,"aria-label":"Toggle auto archive"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"digest-frequency",children:"Notification digest"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{id:"digest-frequency",children:e.jsx(Fe,{placeholder:"Select frequency"})}),e.jsxs(De,{children:[e.jsx(K,{value:"instant",children:"Instant"}),e.jsx(K,{value:"hourly",children:"Hourly"}),e.jsx(K,{value:"daily",children:"Daily"}),e.jsx(K,{value:"weekly",children:"Weekly"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how often you receive summary notifications."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"default-view",children:"Default workspace view"}),e.jsxs(Te,{value:o,onValueChange:y=>d(y),children:[e.jsx(Pe,{id:"default-view",children:e.jsx(Fe,{placeholder:"Select default view"})}),e.jsxs(De,{children:[e.jsx(K,{value:"overview",children:"Dashboard metrics"}),e.jsx(K,{value:"upload",children:"Upload LC"}),e.jsx(K,{value:"reviews",children:"Review results"}),e.jsx(K,{value:"analytics",children:"Analytics"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The section that opens first each time you visit."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(M,{variant:"outline",onClick:j,children:"Reset"}),e.jsx(M,{onClick:g,disabled:c,children:c?"Saving...":"Save preferences"})]})]}),e.jsx(Qe,{value:"company-profile",className:"mt-6",children:e.jsx(tR,{embedded:!0})}),e.jsx(Qe,{value:"data-retention",className:"mt-6",children:e.jsx(eR,{embedded:!0})})]})})]})}function Uze(){return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Need Help?"}),e.jsx(ue,{children:"Browse exporter resources, walkthroughs, and contact options."})]}),e.jsxs(U,{className:"space-y-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(M,{variant:"outline",onClick:()=>window.open("/lcopilot/support","_blank"),children:"Support Center"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("/docs/exporter-runbook","_blank"),children:"Exporter Runbook"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("mailto:support@trdrhub.com"),children:"Email Support"})]}),e.jsxs(oo,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(Qr,{value:"faq-1",children:[e.jsx(Xr,{children:"How do I validate a new LC package?"}),e.jsxs(en,{children:["Choose ",e.jsx("span",{className:"font-medium",children:"Upload Documents"}),", attach your LC and supporting files, then run validation. Results appear under ",e.jsx("span",{className:"font-medium",children:"Review Results"})," with compliance checks and customs readiness assessment."]})]}),e.jsxs(Qr,{value:"faq-2",children:[e.jsx(Xr,{children:"How do I generate a customs pack?"}),e.jsxs(en,{children:["After validation, navigate to the ",e.jsx("span",{className:"font-medium",children:"Customs Pack"})," tab in Review Results. Your customs documentation will be automatically generated based on the validated LC data."]})]}),e.jsxs(Qr,{value:"faq-3",children:[e.jsx(Xr,{children:"Where can I monitor validation trends?"}),e.jsxs(en,{children:["Use the ",e.jsx("span",{className:"font-medium",children:"Analytics"})," view to track compliance rates, processing times, and document quality trends across your export operations."]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200/60 bg-secondary/20 p-4",children:[e.jsx("p",{className:"text-xs",children:"Need a guided walkthrough? Schedule a 30-minute onboarding session with our success team and we'll review your exporter workflow end-to-end."}),e.jsx(M,{size:"sm",className:"mt-3",onClick:()=>window.open("https://cal.com/trdrhub/exporter-onboarding","_blank"),children:"Book onboarding session"})]})]})]})}const zze="https://trdrhub-api.onrender.com";async function qze(t){const s=await fetch(`${zze}/api/validate/v2/session/${t}`,{credentials:"include"});if(!s.ok)throw new Error(`Failed to fetch results: ${s.statusText}`);return(await s.json()).data}function Vze({verdict:t}){const a=(()=>{switch(t.status){case"PASS":return{bg:"bg-green-50 border-green-200",icon:e.jsx(Qs,{className:"h-8 w-8 text-green-600"}),textColor:"text-green-800"};case"FIX_REQUIRED":return{bg:"bg-yellow-50 border-yellow-200",icon:e.jsx(Ve,{className:"h-8 w-8 text-yellow-600"}),textColor:"text-yellow-800"};case"LIKELY_REJECT":return{bg:"bg-red-50 border-red-200",icon:e.jsx(bs,{className:"h-8 w-8 text-red-600"}),textColor:"text-red-800"};case"MISSING_DOCS":return{bg:"bg-orange-50 border-orange-200",icon:e.jsx(Be,{className:"h-8 w-8 text-orange-600"}),textColor:"text-orange-800"};default:return{bg:"bg-gray-50 border-gray-200",icon:e.jsx(ks,{className:"h-8 w-8 text-gray-600"}),textColor:"text-gray-800"}}})();return e.jsx($,{className:`${a.bg} border-2`,children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[a.icon,e.jsxs("div",{className:"flex-1",children:[e.jsx("h2",{className:`text-2xl font-bold ${a.textColor}`,children:t.headline}),e.jsx("p",{className:`mt-1 ${a.textColor} opacity-80`,children:t.subtext}),t.estimated_fee_if_rejected>0&&e.jsxs("div",{className:"mt-3 flex items-center gap-2 text-sm",children:[e.jsx(Na,{className:"h-4 w-4"}),e.jsxs("span",{children:["Estimated discrepancy fee if rejected: $",t.estimated_fee_if_rejected.toFixed(2)]})]})]})]})})})}function tU({issue:t,index:s}){const a=()=>{switch(t.severity){case"critical":return e.jsx(Q,{variant:"destructive",children:"Critical"});case"major":return e.jsx(Q,{className:"bg-orange-500",children:"Major"});case"minor":return e.jsx(Q,{variant:"secondary",children:"Minor"})}};return e.jsxs($,{className:"mb-4",children:[e.jsx(X,{className:"pb-3",children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"flex h-8 w-8 items-center justify-center rounded-full bg-gray-100 text-sm font-medium",children:s+1}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-lg",children:t.title}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[a(),e.jsxs(Q,{variant:"outline",children:["ðŸ“„ ",t.document_name]})]})]})]})})}),e.jsxs(U,{children:[e.jsx("div",{className:"mb-4 rounded-lg bg-gray-50 p-4",children:e.jsxs("div",{className:"grid gap-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"Your document:"}),e.jsx("span",{className:"font-medium",children:t.your_document})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"LC requires:"}),e.jsx("span",{className:"font-medium",children:t.lc_requires})]}),t.difference&&e.jsxs("div",{className:"flex justify-between text-red-600",children:[e.jsx("span",{children:"Difference:"}),e.jsx("span",{className:"font-medium",children:t.difference})]})]})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("h4",{className:"mb-2 flex items-center gap-2 font-medium text-green-700",children:"ðŸ’¡ HOW TO FIX:"}),e.jsx("ul",{className:"space-y-1 text-sm",children:t.how_to_fix.map((r,n)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:"â€¢"}),e.jsx("span",{children:r})]},n))})]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[e.jsx("span",{className:"font-medium",children:"ðŸ“– Why banks reject this: "}),t.why_banks_reject]})]})]})}function Wze({documents:t}){return e.jsxs("div",{className:"space-y-6",children:[t.good.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-green-700",children:[e.jsx(Qs,{className:"h-5 w-5"}),"DOCUMENTS THAT LOOK GOOD"]}),e.jsx("div",{className:"space-y-2",children:t.good.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-green-200 bg-green-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qs,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsx("span",{className:"text-sm text-green-600",children:s.status_note})]},s.type))})]}),t.has_issues.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-yellow-700",children:[e.jsx(Ve,{className:"h-5 w-5"}),"DOCUMENTS WITH ISSUES"]}),e.jsx("div",{className:"space-y-2",children:t.has_issues.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-yellow-200 bg-yellow-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-yellow-600"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs(Q,{variant:"secondary",children:[s.issues_count," issue(s)"]})]},s.type))})]}),t.missing.length>0&&e.jsxs("div",{children:[e.jsxs("h3",{className:"mb-3 flex items-center gap-2 text-lg font-semibold text-red-700",children:[e.jsx(bs,{className:"h-5 w-5"}),"MISSING DOCUMENTS"]}),e.jsx("div",{className:"space-y-2",children:t.missing.map(s=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-red-200 bg-red-50 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-red-600"}),e.jsx("span",{className:"font-medium",children:s.name})]}),e.jsxs("span",{className:"text-sm text-red-600",children:["Required by ",s.required_by]})]},s.type))})]})]})}function Hze(){const{sessionId:t}=Ko(),s=zt(),{data:a,isLoading:r,error:n,refetch:i}=Ks({queryKey:["validation-v2",t],queryFn:()=>qze(t),enabled:!!t});return r?e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ct,{className:"mx-auto h-12 w-12 animate-spin text-blue-600"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading validation results..."})]})}):n||!a?e.jsxs("div",{className:"container mx-auto max-w-4xl p-6",children:[e.jsxs(zo,{variant:"destructive",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx(Tc,{children:"Error loading results"}),e.jsx(qo,{children:n instanceof Error?n.message:"Failed to load validation results"})]}),e.jsxs(M,{onClick:()=>s("/lcopilot/upload"),className:"mt-4",children:[e.jsx(ej,{className:"mr-2 h-4 w-4"}),"Back to Upload"]})]}):e.jsxs("div",{className:"container mx-auto max-w-4xl p-6",children:[e.jsxs("div",{className:"mb-6 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"LC Document Check"}),e.jsxs("div",{className:"mt-1 flex items-center gap-4 text-sm text-gray-600",children:[e.jsxs("span",{children:["LC: ",a.lc_summary.number]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[a.lc_summary.currency," ",a.lc_summary.amount.toLocaleString()]}),e.jsx("span",{children:"â€¢"}),e.jsx("span",{children:a.lc_summary.beneficiary})]})]}),e.jsxs(M,{variant:"outline",onClick:()=>s("/lcopilot/dashboard"),children:[e.jsx(ej,{className:"mr-2 h-4 w-4"}),"Home"]})]}),e.jsx(Vze,{verdict:a.verdict}),a.issues.must_fix.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"mb-4 text-xl font-bold text-red-700",children:["ðŸ”´ MUST FIX (",a.issues.must_fix.length,")"]}),e.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"These issues will cause rejection. Fix them before submitting."}),a.issues.must_fix.map((l,o)=>e.jsx(tU,{issue:l,index:o},l.id))]}),a.issues.should_fix.length>0&&e.jsxs("div",{className:"mt-8",children:[e.jsxs("h3",{className:"mb-4 text-xl font-bold text-yellow-700",children:["ðŸŸ¡ SHOULD FIX (",a.issues.should_fix.length,")"]}),e.jsx("p",{className:"mb-4 text-sm text-gray-600",children:"Minor issues that may cause problems. Recommended to fix."}),a.issues.should_fix.map((l,o)=>e.jsx(tU,{issue:l,index:a.issues.must_fix.length+o},l.id))]}),e.jsxs("div",{className:"mt-8",children:[e.jsx(As,{className:"mb-6"}),e.jsx(Wze,{documents:a.documents})]}),e.jsxs("div",{className:"mt-8 flex gap-4",children:[e.jsxs(M,{variant:"outline",onClick:()=>i(),children:[e.jsx(Lt,{className:"mr-2 h-4 w-4"}),"Re-check After Fixes"]}),e.jsxs(M,{variant:"outline",children:[e.jsx(Gt,{className:"mr-2 h-4 w-4"}),"Download Report"]}),e.jsxs(M,{disabled:a.verdict.status==="LIKELY_REJECT"||a.verdict.status==="MISSING_DOCS",children:[e.jsx($i,{className:"mr-2 h-4 w-4"}),"Submit to Bank"]})]}),e.jsx("div",{className:"mt-8 rounded-lg bg-gray-50 p-4 text-sm text-gray-600",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(mt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Processed in ",a.processing.processing_time_display]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[a.processing.documents_checked," documents checked"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:[a.processing.rules_executed," rules evaluated"]})]})})]})}function Gze(t){const s=new Date,a=new Date(s.getFullYear(),s.getMonth()-5,1),n=t.filter(R=>new Date(R.created_at)>=a).filter(R=>R.status==="completed"),i=n.length,l=n.filter(R=>(R.discrepancies||[]).filter(P=>P.severity==="critical").length===0),o=n.length>0?Math.round(l.length/n.length*1e3)/10:0,d=n.filter(R=>R.processing_started_at&&R.processing_completed_at),c=d.length>0?d.reduce((R,O)=>{const P=new Date(O.processing_started_at).getTime(),T=new Date(O.processing_completed_at).getTime();return R+(T-P)},0)/d.length:0,u=c>0?`${(c/6e4).toFixed(1)} minutes`:"N/A",h=new Date(s.getFullYear(),s.getMonth()-1,1),x=new Date(s.getFullYear(),s.getMonth(),0),g=new Date(s.getFullYear(),s.getMonth()-2,1),j=new Date(s.getFullYear(),s.getMonth()-1,0),y=n.filter(R=>{const O=new Date(R.created_at);return O>=h&&O<=x}),b=n.filter(R=>{const O=new Date(R.created_at);return O>=g&&O<=j}),N=b.length>0?Math.round((y.length-b.length)/b.length*1e3)/10:y.length>0?100:0,C=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],_=[];for(let R=5;R>=0;R--){const O=new Date(s.getFullYear(),s.getMonth()-R,1),P=new Date(s.getFullYear(),s.getMonth()-R+1,0),T=n.filter(z=>{const H=new Date(z.created_at);return H>=O&&H<=P}),B=T.filter(z=>(z.discrepancies||[]).filter(le=>le.severity==="critical").length===0),G=T.filter(z=>z.processing_started_at&&z.processing_completed_at),q=G.length>0?G.reduce((z,H)=>{const le=new Date(H.processing_started_at).getTime(),Y=new Date(H.processing_completed_at).getTime();return z+(Y-le)},0)/G.length:0;_.push({month:C[O.getMonth()],lcs:T.length,success:T.length>0?Math.round(B.length/T.length*100):0,avgTime:q>0?Math.round(q/6e4*10)/10:0})}const A={"Import LC Analysis":{count:0,successful:0},"Supplier Document Check":{count:0,successful:0},"Draft LC Risk Assessment":{count:0,successful:0},"Trade Document Validation":{count:0,successful:0}};n.forEach(R=>{const O=R.extracted_data?.workflow_type||"draft-lc-risk",P=O.includes("supplier")?"Supplier Document Check":O.includes("draft")?"Draft LC Risk Assessment":"Import LC Analysis";A[P]||(A[P]={count:0,successful:0}),A[P].count++,(R.discrepancies||[]).filter(B=>B.severity==="critical").length===0&&A[P].successful++});const k=Object.entries(A).filter(([R,{count:O}])=>O>0).map(([R,{count:O,successful:P}])=>({type:R,count:O,avgScore:O>0?Math.round(P/O*100):0,trend:"stable"})),E={"Timeline Risks":{total:0,resolved:0},"Documentation Risks":{total:0,resolved:0},"Compliance Risks":{total:0,resolved:0},"Financial Risks":{total:0,resolved:0}};n.forEach(R=>{(R.discrepancies||[]).forEach(O=>{const P=O.title?.toLowerCase().includes("date")||O.title?.toLowerCase().includes("timeline")?"Timeline Risks":O.title?.toLowerCase().includes("amount")||O.title?.toLowerCase().includes("value")?"Financial Risks":O.title?.toLowerCase().includes("document")?"Documentation Risks":"Compliance Risks";E[P].total++,E[P].resolved++})});const D=Object.entries(E).map(([R,{total:O,resolved:P}])=>({category:R,reduction:O>0?Math.round(P/O*100):100,incidents:O}));return{overview:{totalLCs:i,monthlyGrowth:N,successRate:o,avgProcessingTime:u,costSavings:i*1500,riskMitigation:o},monthly:_,documentTypes:k,riskReduction:D}}function Zte({embedded:t=!1}={}){const[s,a]=m.useState("overview"),[r,n]=m.useState([]),[i,l]=m.useState(!0);m.useEffect(()=>{(async()=>{l(!0);try{const u=await xp();n(u||[])}catch(u){console.error("Failed to load sessions for analytics:",u),n([])}finally{l(!1)}})()},[]);const o=m.useMemo(()=>Gze(r),[r]),d=t?"mx-auto w-full max-w-6xl py-4":"container mx-auto px-4 py-8 max-w-6xl";return e.jsxs("div",{className:t?"bg-transparent":"min-h-screen bg-background",children:[!t&&e.jsx("header",{className:"bg-card border-b border-gray-200",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(pe,{to:"/lcopilot/importer-dashboard",children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Dashboard"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-primary p-2 rounded-lg",children:e.jsx(Ws,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:"Importer Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Performance insights and trends"})]})]})]})})})}),e.jsxs("div",{className:d,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 mb-8",children:[e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total LCs Processed"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.overview.totalLCs}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Vt,{className:"w-4 h-4 text-success"}),e.jsxs("span",{className:"text-sm text-success",children:["+",o.overview.monthlyGrowth,"% this month"]})]})]}),e.jsx("div",{className:"bg-importer/10 p-3 rounded-lg",children:e.jsx(Be,{className:"w-6 h-6 text-importer"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[o.overview.successRate,"%"]}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(Vt,{className:"w-4 h-4 text-success"}),e.jsx("span",{className:"text-sm text-success",children:"Above industry average"})]})]}),e.jsx("div",{className:"bg-success/10 p-3 rounded-lg",children:e.jsx(aj,{className:"w-6 h-6 text-success"})})]})})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Processing Time"}),e.jsx("p",{className:"text-2xl font-bold text-foreground",children:o.overview.avgProcessingTime}),e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx(lr,{className:"w-4 h-4 text-success"}),e.jsx("span",{className:"text-sm text-success",children:"15% faster than before"})]})]}),e.jsx("div",{className:"bg-primary/10 p-3 rounded-lg",children:e.jsx(mt,{className:"w-6 h-6 text-primary"})})]})})})]}),e.jsxs(Os,{value:s,onValueChange:a,className:"space-y-6",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-4",children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsx(He,{value:"trends",children:"Trends"}),e.jsx(He,{value:"performance",children:"Performance"}),e.jsx(He,{value:"insights",children:"Insights"})]}),e.jsx(Qe,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Na,{className:"w-5 h-5"}),"Financial Impact"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-success mb-2",children:["$",o.overview.costSavings.toLocaleString()]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total cost savings this year"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Reduced processing delays"}),e.jsx("span",{className:"font-medium text-success",children:"$35,000"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Avoided document rejections"}),e.jsx("span",{className:"font-medium text-success",children:"$28,000"})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:"Faster customs clearance"}),e.jsx("span",{className:"font-medium text-success",children:"$22,000"})]})]})]})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Risk Mitigation"]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-3xl font-bold text-importer mb-2",children:[o.overview.riskMitigation,"%"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Overall risk reduction achieved"})]}),e.jsx("div",{className:"space-y-3",children:o.riskReduction.map((c,u)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{children:c.category}),e.jsxs("span",{className:"font-medium",children:[c.reduction,"%"]})]}),e.jsx(es,{value:c.reduction,className:"h-2"})]},u))})]})]})]})}),e.jsx(Qe,{value:"trends",className:"space-y-6",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ng,{className:"w-5 h-5"}),"Monthly Trends"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:o.monthly.map((c,u)=>e.jsxs("div",{className:"grid grid-cols-4 gap-4 p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Month"}),e.jsx("div",{className:"font-medium",children:c.month})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"LCs Processed"}),e.jsx("div",{className:"font-medium text-importer",children:c.lcs})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Success Rate"}),e.jsxs("div",{className:"font-medium text-success",children:[c.success,"%"]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Time"}),e.jsxs("div",{className:"font-medium",children:[c.avgTime,"m"]})]})]},u))})})]})}),e.jsx(Qe,{value:"performance",className:"space-y-6",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Wn,{className:"w-5 h-5"}),"Document Type Performance"]})}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:o.documentTypes.map((c,u)=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium",children:c.type}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[c.count," documents processed"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Avg Score"}),e.jsxs("div",{className:"font-medium",children:[c.avgScore,"%"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[c.trend==="up"?e.jsx(Vt,{className:"w-4 h-4 text-success"}):e.jsx(lr,{className:"w-4 h-4 text-destructive"}),e.jsx("span",{className:`text-sm ${c.trend==="up"?"text-success":"text-destructive"}`,children:c.trend==="up"?"Improving":"Declining"})]})]})]},u))})})]})}),e.jsx(Qe,{value:"insights",className:"space-y-6",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsx(ee,{children:"Key Insights"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"p-3 bg-success/5 border border-success/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-success mb-1",children:"ðŸ“ˆ Efficiency Gains"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Your processing efficiency has improved by 23% over the last quarter, with particularly strong performance in supplier document validation."})]}),e.jsxs("div",{className:"p-3 bg-importer/5 border border-importer/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-importer mb-1",children:"ðŸŽ¯ Risk Management"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Successfully identified and mitigated 15 high-risk scenarios, preventing potential financial losses of approximately $45,000."})]}),e.jsxs("div",{className:"p-3 bg-warning/5 border border-warning/20 rounded-lg",children:[e.jsx("p",{className:"text-sm font-medium text-warning mb-1",children:"âš ï¸ Areas for Improvement"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Draft LC risk assessments show room for improvement. Consider more detailed supplier vetting processes."})]})]})]}),e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsx(ee,{children:"Recommendations"})}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Optimize Timeline Management"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Consider extending LC negotiation periods by 2-3 days to reduce timeline-related risks."})]}),e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Supplier Performance Tracking"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Implement regular supplier compliance scoring to predict and prevent document issues."})]}),e.jsxs("div",{className:"p-3 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-sm font-medium mb-1",children:"Automated Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Set up alerts for critical compliance deadlines to maintain your excellent success rate."})]})]})})]})]})})]})]})]})}function sU(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function za({title:t,value:s,change:a,changeType:r,description:n,icon:i,className:l}){const o=u=>typeof u=="number"?u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(1)}K`:u.toLocaleString():u,d=u=>!u||!a?"text-muted-foreground":t.toLowerCase().includes("rejection")?u==="decrease"?"text-green-600":"text-red-600":u==="increase"?"text-green-600":"text-red-600",c=u=>{if(!u||!a)return null;t.toLowerCase().includes("rejection");const h=u==="increase"?T1:kD,x=u==="increase"?Vt:lr;return e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(h,{className:"h-3 w-3"}),e.jsx(x,{className:"h-3 w-3"})]})};return e.jsxs($,{className:sU("transition-all hover:shadow-md",l),children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:t}),i&&e.jsx("div",{className:"h-4 w-4 text-muted-foreground",children:i})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:o(s)}),(a!==void 0||n)&&e.jsxs("div",{className:"flex items-center justify-between mt-2",children:[a!==void 0&&e.jsxs("div",{className:sU("flex items-center text-xs font-medium",d(r)),children:[c(r),e.jsxs("span",{className:"ml-1",children:[Math.abs(a).toFixed(1),"%"]})]}),n&&e.jsx(ue,{className:"text-xs",children:n})]})]})]})}function aU(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const rU=[{value:"7d",label:"Last 7 days"},{value:"30d",label:"Last 30 days"},{value:"90d",label:"Last 90 days"},{value:"180d",label:"Last 6 months"},{value:"365d",label:"Last year"},{value:"custom",label:"Custom range"}],nU=t=>{const s=new Date,a=new Date(s);switch(t){case"7d":return[Un(s,7),a];case"30d":return[Un(s,30),a];case"90d":return[Un(s,90),a];case"180d":return[Un(s,180),a];case"365d":return[Un(s,365),a];default:return[Un(s,30),a]}};function CC({value:t,onChange:s,className:a}){const[r,n]=m.useState(!1),i=c=>{if(c==="custom"){const[u,h]=nU("30d");s({...t,timeRange:c,startDate:t.startDate||u,endDate:t.endDate||h})}else{const[u,h]=nU(c);s({...t,timeRange:c,startDate:u,endDate:h})}},l=c=>{c?.from&&c?.to&&(s({...t,timeRange:"custom",startDate:c.from,endDate:c.to}),n(!1))},o=()=>t.timeRange==="custom"&&t.startDate&&t.endDate?`${hs(t.startDate,"MMM d, y")} - ${hs(t.endDate,"MMM d, y")}`:rU.find(u=>u.value===t.timeRange)?.label||"Last 30 days",d=t.startDate&&t.endDate?{from:t.startDate,to:t.endDate}:void 0;return e.jsxs("div",{className:aU("flex flex-col sm:flex-row gap-2",a),children:[e.jsxs(Te,{value:t.timeRange,onValueChange:i,children:[e.jsx(Pe,{className:"w-full sm:w-[180px]",children:e.jsx(Fe,{placeholder:"Select range"})}),e.jsx(De,{children:rU.map(c=>e.jsx(K,{value:c.value,children:c.label},c.value))})]}),t.timeRange==="custom"&&e.jsxs(Fb,{open:r,onOpenChange:n,children:[e.jsx(Rb,{asChild:!0,children:e.jsxs(M,{variant:"outline",className:aU("w-full sm:w-[280px] justify-start text-left font-normal",!d&&"text-muted-foreground"),children:[e.jsx(ya,{className:"mr-2 h-4 w-4"}),d?o():e.jsx("span",{children:"Pick a date range"}),e.jsx(ja,{className:"ml-auto h-4 w-4 opacity-50"})]})}),e.jsxs(lv,{className:"w-auto p-0",align:"start",children:[e.jsx(iR,{initialFocus:!0,mode:"range",defaultMonth:d?.from,selected:d,onSelect:l,numberOfMonths:2,disabled:c=>c>new Date||c<new Date("2020-01-01")}),e.jsx("div",{className:"p-3 border-t",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>{const c=new Date;l({from:QF(c),to:c})},children:"Year to Date"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>n(!1),children:"Cancel"})]})})]})]})]})}const fh={getSummary:async(t={})=>{const{data:s}=await Ae.get("/analytics/summary",{params:t});return s},getDiscrepancies:async(t={})=>{const{data:s}=await Ae.get("/analytics/discrepancies",{params:t});return s},getTrends:async(t={})=>{const{data:s}=await Ae.get("/analytics/trends",{params:t});return s},getProcessingTimes:async(t={})=>{const{data:s}=await Ae.get("/analytics/processing-times",{params:t});return s},getUserStats:async(t,s={})=>{const{data:a}=await Ae.get(`/analytics/user/${t}`,{params:s});return a},getSystemMetrics:async(t={})=>{const{data:s}=await Ae.get("/analytics/system",{params:t});return s},getDashboard:async(t={})=>{const{data:s}=await Ae.get("/analytics/dashboard",{params:{include_trends:!0,include_discrepancies:!0,...t}});return s},getAnomalies:async(t="7d")=>{const{data:s}=await Ae.get("/analytics/anomalies",{params:{time_range:t}});return s},exportCsv:async(t={})=>(await Ae.get("/analytics/export/csv",{params:t,responseType:"blob"})).data,getUsers:async(t={})=>{const{data:s}=await Ae.get("/analytics/users",{params:t});return s},getSystem:async(t={})=>fh.getSystemMetrics(t),getUserAnalytics:async(t,s={})=>fh.getUserStats(t.toString(),s),exportPdf:async(t={})=>(await Ae.get("/analytics/export/pdf",{params:t,responseType:"blob"})).data,getHealth:async()=>{const{data:t}=await Ae.get("/analytics/health");return t}};function SC({filters:t,className:s,variant:a="outline"}){const[r,n]=m.useState(!1),{toast:i}=et(),l=()=>{const u={time_range:t.timeRange};return t.timeRange==="custom"&&t.startDate&&t.endDate&&(u.start_date=t.startDate.toISOString(),u.end_date=t.endDate.toISOString()),u},o=async()=>{try{n(!0);const u=l(),h=await fh.exportCsv(u),x=window.URL.createObjectURL(h),g=document.createElement("a");g.href=x,g.download=`lcopilot-analytics-${new Date().toISOString().split("T")[0]}.csv`,document.body.appendChild(g),g.click(),document.body.removeChild(g),window.URL.revokeObjectURL(x),i({title:"Export successful",description:"Analytics data has been exported to CSV"})}catch(u){console.error("Export failed:",u),i({title:"Export failed",description:"Unable to export analytics data. Please try again.",variant:"destructive"})}finally{n(!1)}},d=async()=>{i({title:"PDF Export",description:"PDF export will be available in a future update"})},c=()=>{window.print()};return r?e.jsxs(M,{variant:a,disabled:!0,className:s,children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Exporting..."]}):e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsxs(M,{variant:a,className:s,children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Export",e.jsx(ja,{className:"h-4 w-4 ml-2"})]})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:o,children:[e.jsx(zm,{className:"h-4 w-4 mr-2"}),"Export as CSV"]}),e.jsxs(is,{onClick:d,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Export as PDF"]}),e.jsx(Dc,{}),e.jsxs(is,{onClick:c,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"Print Report"]})]})]})}function iU(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Kze=[{dataKey:"value",name:"Value",color:"#8884d8",strokeWidth:2}];function Mo({data:t,lines:s=Kze,xAxisKey:a="date",height:r=300,showLegend:n=!0,showGrid:i=!0,className:l}){const o=({active:d,payload:c,label:u})=>d&&c&&c.length?e.jsxs("div",{className:"bg-background border border-border rounded-md shadow-md p-3",children:[e.jsx("p",{className:"font-medium mb-2",children:u}),c.map((h,x)=>e.jsxs("p",{className:"text-sm",style:{color:h.color},children:[h.name,": ",typeof h.value=="number"?h.value.toLocaleString():h.value]},x))]}):null;return!t||t.length===0?e.jsx("div",{className:iU("flex items-center justify-center border border-dashed rounded-md",l),style:{height:r},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})}):e.jsx("div",{className:iU("w-full",l),style:{height:r},children:e.jsx(qn,{width:"100%",height:"100%",children:e.jsxs($F,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[i&&e.jsx(wi,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Gn,{dataKey:a,tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}}),e.jsx(Kn,{tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}}),e.jsx(kn,{content:e.jsx(o,{})}),n&&e.jsx(Ho,{}),s.map((d,c)=>e.jsx(Sb,{type:"monotone",dataKey:d.dataKey,name:d.name,stroke:d.color,strokeWidth:d.strokeWidth||2,dot:{r:4},activeDot:{r:6,strokeWidth:0}},c))]})})})}function lU(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Yze=[{dataKey:"value",name:"Value",color:"#8884d8"}];function _l({data:t,bars:s=Yze,xAxisKey:a="name",height:r=300,showLegend:n=!1,showGrid:i=!0,layout:l="vertical",className:o}){const d=({active:c,payload:u,label:h})=>c&&u&&u.length?e.jsxs("div",{className:"bg-background border border-border rounded-md shadow-md p-3",children:[e.jsx("p",{className:"font-medium mb-2",children:h}),u.map((x,g)=>e.jsxs("p",{className:"text-sm",style:{color:x.color},children:[x.name,": ",typeof x.value=="number"?x.value.toLocaleString():x.value,x.payload.percentage&&e.jsxs("span",{className:"text-muted-foreground ml-1",children:["(",x.payload.percentage.toFixed(1),"%)"]})]},g))]}):null;return!t||t.length===0?e.jsx("div",{className:lU("flex items-center justify-center border border-dashed rounded-md",o),style:{height:r},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})}):e.jsx("div",{className:lU("w-full",o),style:{height:r},children:e.jsx(qn,{width:"100%",height:"100%",children:e.jsxs(mh,{data:t,layout:l,margin:{top:5,right:30,left:20,bottom:5},children:[i&&e.jsx(wi,{strokeDasharray:"3 3",className:"opacity-30"}),l==="vertical"?e.jsxs(e.Fragment,{children:[e.jsx(Gn,{type:"number",tick:{fontSize:12}}),e.jsx(Kn,{dataKey:a,type:"category",width:120,tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}})]}):e.jsxs(e.Fragment,{children:[e.jsx(Gn,{dataKey:a,tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}}),e.jsx(Kn,{tick:{fontSize:12}})]}),e.jsx(kn,{content:e.jsx(d,{})}),n&&e.jsx(Ho,{}),s.map((c,u)=>e.jsx(Fc,{dataKey:c.dataKey,name:c.name,fill:c.color,radius:[2,2,0,0]},u))]})})})}function oU(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Zze=[{dataKey:"value",name:"Value",color:"#8884d8",fillOpacity:.3}];function Yf({data:t,areas:s=Zze,xAxisKey:a="date",height:r=300,showLegend:n=!0,showGrid:i=!0,stacked:l=!1,className:o}){const d=({active:c,payload:u,label:h})=>c&&u&&u.length?e.jsxs("div",{className:"bg-background border border-border rounded-md shadow-md p-3",children:[e.jsx("p",{className:"font-medium mb-2",children:h}),u.map((x,g)=>e.jsxs("p",{className:"text-sm",style:{color:x.color},children:[x.name,": ",typeof x.value=="number"?x.value.toLocaleString():x.value]},g))]}):null;return!t||t.length===0?e.jsx("div",{className:oU("flex items-center justify-center border border-dashed rounded-md",o),style:{height:r},children:e.jsx("div",{className:"text-center",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"No data available"})})}):e.jsx("div",{className:oU("w-full",o),style:{height:r},children:e.jsx(qn,{width:"100%",height:"100%",children:e.jsxs(cC,{data:t,margin:{top:5,right:30,left:20,bottom:5},children:[i&&e.jsx(wi,{strokeDasharray:"3 3",className:"opacity-30"}),e.jsx(Gn,{dataKey:a,tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}}),e.jsx(Kn,{tick:{fontSize:12},tickLine:{strokeWidth:1},axisLine:{strokeWidth:1}}),e.jsx(kn,{content:e.jsx(d,{})}),n&&e.jsx(Ho,{}),s.map((c,u)=>e.jsx(Gm,{type:"monotone",dataKey:c.dataKey,name:c.name,stackId:l?"1":void 0,stroke:c.color,fill:c.color,fillOpacity:c.fillOpacity||.3,strokeWidth:2},u))]})})})}function Jze(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const Cw={noData:{title:"No data available",description:"There's no data for the selected time range and filters.",icon:e.jsx(F1,{className:"h-12 w-12 text-muted-foreground"})}};function Qze({title:t=Cw.noData.title,description:s=Cw.noData.description,icon:a=Cw.noData.icon,action:r,className:n}){return e.jsx($,{className:Jze("border-dashed",n),children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-4",children:a}),e.jsx("h3",{className:"text-lg font-medium text-center mb-2",children:t}),e.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md mb-6",children:s}),r&&e.jsx(M,{onClick:r.onClick,variant:"outline",size:"sm",children:r.label})]})})}function Nr({onRefresh:t,className:s}){return e.jsx(Qze,{...Cw.noData,action:t?{label:"Refresh",onClick:t}:void 0,className:s})}function Xze(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const e9e=t=>{const s=typeof t=="string"?t:t.message,a=s.toLowerCase();return a.includes("permission")||a.includes("403")?{title:"Access Denied",description:"You don't have permission to view this data. Contact your administrator if you believe this is an error.",icon:e.jsx(x5,{className:"h-12 w-12 text-destructive"}),variant:"destructive"}:a.includes("network")||a.includes("fetch")?{title:"Connection Error",description:"Unable to connect to the server. Please check your internet connection and try again.",icon:e.jsx(Lue,{className:"h-12 w-12 text-muted-foreground"}),variant:"default"}:a.includes("timeout")?{title:"Request Timeout",description:"The request took too long to complete. Please try again.",icon:e.jsx(Ve,{className:"h-12 w-12 text-muted-foreground"}),variant:"default"}:{title:"Something went wrong",description:s||"An unexpected error occurred while loading the data.",icon:e.jsx(Ve,{className:"h-12 w-12 text-destructive"}),variant:"destructive"}};function Eg({error:t,onRetry:s,className:a}){const r=e9e(t);return e.jsx($,{className:Xze("border-dashed",a),children:e.jsxs(U,{className:"flex flex-col items-center justify-center py-12",children:[e.jsx("div",{className:"mb-4",children:r.icon}),e.jsx("h3",{className:"text-lg font-medium text-center mb-2",children:r.title}),e.jsx("p",{className:"text-sm text-muted-foreground text-center max-w-md mb-6",children:r.description}),s&&e.jsxs(M,{onClick:s,variant:"outline",size:"sm",className:"flex items-center gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Try Again"]})]})})}function t9e(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const s9e={exporter:{label:"Exporter",variant:"secondary",description:"Can view own jobs, upload documents, and see personal analytics"},importer:{label:"Importer",variant:"secondary",description:"Can view own jobs, upload documents, and see personal analytics"},bank:{label:"Bank",variant:"outline",description:"Can view system-wide data for compliance monitoring and reporting"},admin:{label:"Admin",variant:"default",description:"Full system access including user management and system administration"}},a9e={own:"Viewing your own data","system-wide":"Viewing system-wide data",user:"Viewing individual user data"};function kC({role:t,dataScope:s,className:a}){const r=s9e[t],n=e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"font-medium",children:[r.label," Role"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:r.description}),s&&e.jsxs("div",{className:"text-xs text-muted-foreground border-t pt-2",children:["Scope: ",a9e[s]||s]})]});return e.jsx(nh,{children:e.jsxs(pu,{children:[e.jsx(fu,{asChild:!0,children:e.jsx(Q,{variant:r.variant,className:t9e("cursor-help transition-all hover:scale-105",a),children:r.label})}),e.jsx(vd,{side:"bottom",className:"max-w-xs",children:n})]})})}function r9e(){const{user:t}=Dt(),[s,a]=m.useState({timeRange:"30d",startDate:Un(new Date,30),endDate:new Date}),{data:r,isLoading:n,error:i,refetch:l}=Ks({queryKey:["analytics-dashboard",s],queryFn:()=>fh.getDashboard({time_range:s.timeRange,start_date:s.timeRange==="custom"?s.startDate?.toISOString():void 0,end_date:s.timeRange==="custom"?s.endDate?.toISOString():void 0}),staleTime:300*1e3,retry:2});if(!t)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Eg,{error:"Please log in to view analytics",className:"max-w-md mx-auto"})});const o=t.role==="exporter",d=t.role==="importer",c=t.role==="bank",u=t.role==="admin",h=o||d,x=c||u;return n?e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Analytics Dashboard"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your validation performance and insights"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((g,j)=>e.jsxs($,{children:[e.jsx(X,{className:"space-y-0 pb-2",children:e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"})}),e.jsxs(U,{children:[e.jsx("div",{className:"h-8 bg-muted rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]})]},j))})]})}):i?e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Eg,{error:i,onRetry:l,className:"max-w-md mx-auto"})}):r?e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:h?"My Analytics":"System Analytics"}),e.jsx(kC,{role:t.role})]}),e.jsx("p",{className:"text-muted-foreground",children:h?"Track your validation performance and document processing insights":"Monitor system-wide validation metrics and performance trends"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(CC,{value:s,onChange:a,className:"w-full sm:w-auto"}),e.jsx(SC,{filters:s})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(za,{title:"Total Jobs",value:r.summary.total_jobs,change:r.trends.job_volume_trend,icon:"briefcase"}),e.jsx(za,{title:"Success Rate",value:`${(100-r.summary.rejection_rate).toFixed(1)}%`,change:r.trends.success_rate_trend,icon:"check-circle",variant:r.summary.rejection_rate<10?"success":r.summary.rejection_rate<25?"warning":"error"}),e.jsx(za,{title:"Avg Processing Time",value:r.summary.avg_processing_time_minutes?`${r.summary.avg_processing_time_minutes.toFixed(1)}m`:"N/A",change:r.trends.processing_time_trend,icon:"clock"}),e.jsx(za,{title:"Total Discrepancies",value:r.discrepancies.total_discrepancies,change:r.trends.discrepancy_trend,icon:"alert-triangle",variant:r.discrepancies.total_discrepancies>100?"error":"default"})]}),e.jsxs(Os,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsx(He,{value:"discrepancies",children:"Discrepancies"}),e.jsx(He,{value:"trends",children:"Trends"}),x&&e.jsxs(e.Fragment,{children:[e.jsx(He,{value:"users",children:"Users"}),e.jsx(He,{value:"system",children:"System"})]})]}),e.jsxs(Qe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Document Distribution"}),e.jsx(ue,{children:"Breakdown of validation jobs by document type"})]}),e.jsx(U,{children:Object.keys(r.summary.doc_distribution).length>0?e.jsx(_l,{data:Object.entries(r.summary.doc_distribution).map(([g,j])=>({name:g.replace("_"," ").toUpperCase(),value:j})),height:300,bars:[{dataKey:"value",name:"Jobs",color:"#8884d8"}]}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Job Volume Trends"}),e.jsx(ue,{children:"Daily validation job submissions over time"})]}),e.jsx(U,{children:r.trends.daily_volumes.length>0?e.jsx(Mo,{data:r.trends.daily_volumes,height:300,lines:[{dataKey:"count",name:"Jobs",color:"#8884d8"}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Success Rate Over Time"}),e.jsx(ue,{children:"Track validation success rates and identify patterns"})]}),e.jsx(U,{children:r.trends.success_rates.length>0?e.jsx(Yf,{data:r.trends.success_rates,height:300,areas:[{dataKey:"success_rate",name:"Success Rate",color:"#22c55e",fillOpacity:.2},{dataKey:"rejection_rate",name:"Rejection Rate",color:"#ef4444",fillOpacity:.2}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]}),e.jsxs(Qe,{value:"discrepancies",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Discrepancy Types"}),e.jsx(ue,{children:"Most common validation issues by type"})]}),e.jsx(U,{children:r.discrepancies.by_type.length>0?e.jsx(_l,{data:r.discrepancies.by_type.map(g=>({name:g.discrepancy_type.replace("_"," "),value:g.count})),height:300,bars:[{dataKey:"value",name:"Count",color:"#ef4444"}],layout:"vertical"}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Discrepancy Trends"}),e.jsx(ue,{children:"Daily discrepancy counts over time"})]}),e.jsx(U,{children:r.trends.daily_discrepancies.length>0?e.jsx(Mo,{data:r.trends.daily_discrepancies,height:300,lines:[{dataKey:"count",name:"Discrepancies",color:"#ef4444"}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Discrepancy Severity Distribution"}),e.jsx(ue,{children:"Breakdown of discrepancies by severity level"})]}),e.jsx(U,{children:r.discrepancies.by_severity.length>0?e.jsx(_l,{data:r.discrepancies.by_severity.map(g=>({name:g.severity,value:g.count})),height:250,bars:[{dataKey:"value",name:"Count",color:"#f59e0b"}]}):e.jsx(Nr,{})})]})]}),e.jsx(Qe,{value:"trends",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Processing Time Trends"}),e.jsx(ue,{children:"Average processing times over time"})]}),e.jsx(U,{children:r.trends.processing_times.length>0?e.jsx(Yf,{data:r.trends.processing_times,height:350,areas:[{dataKey:"avg_time",name:"Avg Processing Time (min)",color:"#6366f1",fillOpacity:.3}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Job Volume vs Success Rate"}),e.jsx(ue,{children:"Correlation between job volume and success rates"})]}),e.jsx(U,{children:r.trends.daily_volumes.length>0&&r.trends.success_rates.length>0?e.jsx(Mo,{data:r.trends.daily_volumes.map((g,j)=>({date:g.date,volume:g.count,success_rate:r.trends.success_rates[j]?.success_rate||0})),height:300,lines:[{dataKey:"volume",name:"Job Volume",color:"#8884d8"},{dataKey:"success_rate",name:"Success Rate %",color:"#22c55e"}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Error Rate Trends"}),e.jsx(ue,{children:"Track error patterns over time"})]}),e.jsx(U,{children:r.trends.success_rates.length>0?e.jsx(Mo,{data:r.trends.success_rates,height:300,lines:[{dataKey:"rejection_rate",name:"Rejection Rate %",color:"#ef4444"}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]})]})}),x&&e.jsx(Qe,{value:"users",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Top Users by Volume"}),e.jsx(ue,{children:"Most active users by validation job submissions"})]}),e.jsx(U,{children:r.users&&r.users.length>0?e.jsx(_l,{data:r.users.slice(0,10).map(g=>({name:g.username||g.email||`User ${g.user_id}`,value:g.job_count,success_rate:g.success_rate})),height:400,bars:[{dataKey:"value",name:"Jobs",color:"#8884d8"}],layout:"vertical"}):e.jsx(Nr,{})})]})})}),u&&e.jsx(Qe,{value:"system",className:"space-y-6",children:r.system&&e.jsxs("div",{className:"grid gap-6 md:grid-cols-2 lg:grid-cols-3",children:[e.jsx(za,{title:"Total Users",value:r.system.total_users,icon:"users"}),e.jsx(za,{title:"Active Users (30d)",value:r.system.active_users,icon:"user-check"}),e.jsx(za,{title:"System Uptime",value:`${(r.system.uptime_percentage||0).toFixed(1)}%`,icon:"server",variant:r.system.uptime_percentage&&r.system.uptime_percentage>99?"success":"warning"}),e.jsx(za,{title:"Avg Response Time",value:r.system.avg_response_time_ms?`${r.system.avg_response_time_ms.toFixed(0)}ms`:"N/A",icon:"zap"}),e.jsx(za,{title:"Storage Used",value:r.system.storage_used_gb?`${r.system.storage_used_gb.toFixed(1)}GB`:"N/A",icon:"hard-drive"}),e.jsx(za,{title:"API Calls (24h)",value:r.system.api_calls_24h||0,icon:"activity"})]})})]})]}):e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Nr,{onRefresh:l,className:"max-w-md mx-auto"})})}function n9e(){const{user:t}=Dt(),[s,a]=m.useState({timeRange:"30d",startDate:Un(new Date,30),endDate:new Date}),{data:r,isLoading:n,error:i,refetch:l}=Ks({queryKey:["analytics-summary",s],queryFn:()=>fh.getSummary({time_range:s.timeRange,start_date:s.timeRange==="custom"?s.startDate?.toISOString():void 0,end_date:s.timeRange==="custom"?s.endDate?.toISOString():void 0}),staleTime:300*1e3,retry:2}),{data:o,isLoading:d,error:c}=Ks({queryKey:["analytics-trends",s],queryFn:()=>fh.getTrends({time_range:s.timeRange,start_date:s.timeRange==="custom"?s.startDate?.toISOString():void 0,end_date:s.timeRange==="custom"?s.endDate?.toISOString():void 0}),staleTime:300*1e3,retry:2}),u=n||d,h=i||c;if(!t||t.role!=="exporter")return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Eg,{error:"Access denied. This page is for exporters only.",className:"max-w-md mx-auto"})});if(u)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Export Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Track your export validation performance"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((g,j)=>e.jsxs($,{children:[e.jsx(X,{className:"space-y-0 pb-2",children:e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"})}),e.jsxs(U,{children:[e.jsx("div",{className:"h-8 bg-muted rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]})]},j))})]})});if(h)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Eg,{error:h,onRetry:l,className:"max-w-md mx-auto"})});if(!r||!o)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Nr,{onRefresh:l,className:"max-w-md mx-auto"})});const x=100-r.rejection_rate;return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"My Export Analytics"}),e.jsx(kC,{role:"exporter"})]}),e.jsx("p",{className:"text-muted-foreground",children:"Track your export document validation performance and identify improvement opportunities"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(CC,{value:s,onChange:a,className:"w-full sm:w-auto"}),e.jsx(SC,{filters:s})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(za,{title:"Documents Submitted",value:r.total_jobs,change:o.job_volume_trend,icon:"file-text",description:"Total export documents submitted for validation"}),e.jsx(za,{title:"Validation Success Rate",value:`${x.toFixed(1)}%`,change:o.success_rate_trend,icon:"check-circle",variant:x>90?"success":x>75?"warning":"error",description:"Percentage of documents that passed validation"}),e.jsx(za,{title:"Avg Processing Time",value:r.avg_processing_time_minutes?`${r.avg_processing_time_minutes.toFixed(1)}m`:"N/A",change:o.processing_time_trend,icon:"clock",description:"Average time to complete validation"}),e.jsx(za,{title:"Rejections",value:r.rejection_count,change:o.discrepancy_trend,icon:"x-circle",variant:r.rejection_count>10?"error":r.rejection_count>5?"warning":"success",description:"Documents rejected due to validation issues"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"My Document Types"}),e.jsx(ue,{children:"Distribution of your submitted documents by type"})]}),e.jsx(U,{children:Object.keys(r.doc_distribution).length>0?e.jsx(_l,{data:Object.entries(r.doc_distribution).map(([g,j])=>({name:g.replace("_"," ").toUpperCase(),value:j})),height:300,bars:[{dataKey:"value",name:"Documents",color:"#3b82f6"}]}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Daily Submissions"}),e.jsx(ue,{children:"Your document submission patterns over time"})]}),e.jsx(U,{children:o.daily_volumes.length>0?e.jsx(Mo,{data:o.daily_volumes,height:300,lines:[{dataKey:"count",name:"Documents",color:"#3b82f6"}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Validation Performance Over Time"}),e.jsx(ue,{children:"Track your validation success rates and identify patterns"})]}),e.jsx(U,{children:o.success_rates.length>0?e.jsx(Mo,{data:o.success_rates,height:300,lines:[{dataKey:"success_rate",name:"Success Rate %",color:"#22c55e"},{dataKey:"rejection_rate",name:"Rejection Rate %",color:"#ef4444"}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Processing Time Analysis"}),e.jsx(ue,{children:"Monitor how processing times vary over time"})]}),e.jsx(U,{children:o.processing_times.length>0?e.jsx(Mo,{data:o.processing_times,height:300,lines:[{dataKey:"avg_time",name:"Avg Processing Time (min)",color:"#f59e0b"}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs($,{className:"border-blue-200 bg-blue-50/50",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-blue-900",children:"ðŸ’¡ Tips to Improve Your Success Rate"})}),e.jsxs(U,{className:"space-y-2 text-blue-800",children:[e.jsx("p",{children:"â€¢ Ensure all required fields are filled before submission"}),e.jsx("p",{children:"â€¢ Double-check document formatting matches the expected template"}),e.jsx("p",{children:"â€¢ Review common rejection reasons in the discrepancies section"}),e.jsx("p",{children:"â€¢ Submit documents during business hours for faster processing"})]})]})]})}function i9e(){const{user:t}=Dt(),s=!!t&&t.role==="bank",[a,r]=m.useState({timeRange:"30d",startDate:Un(new Date,30),endDate:new Date}),n={summary:{total_jobs:12540,rejection_rate:8.7,avg_processing_time_minutes:12.4,doc_distribution:{lc:7420,invoice:3200,bl:1920}},trends:{job_volume_trend:4.6,success_rate_trend:1.8,processing_time_trend:-.9,daily_volumes:Array.from({length:14}).map((h,x)=>({date:Un(new Date,13-x).toISOString().slice(0,10),count:700+Math.round(Math.sin(x/2)*80)})),success_rates:Array.from({length:14}).map((h,x)=>({date:Un(new Date,13-x).toISOString().slice(0,10),success_rate:91+Math.sin(x/3)*3,rejection_rate:9-Math.sin(x/3)*3})),processing_times:Array.from({length:14}).map((h,x)=>({date:Un(new Date,13-x).toISOString().slice(0,10),avg_time:12+Math.cos(x/4)})),daily_discrepancies:Array.from({length:14}).map((h,x)=>({date:Un(new Date,13-x).toISOString().slice(0,10),count:60+Math.round(Math.cos(x/2)*20)}))},users:Array.from({length:12}).map((h,x)=>({user_id:`u${x+1}`,username:`Client ${x+1}`,email:void 0,role:"exporter",job_count:100-x*5,success_rate:80+x%4*5})),discrepancies:{total_discrepancies:260,by_type:[{discrepancy_type:"late_shipment",count:75},{discrepancy_type:"amount_mismatch",count:58},{discrepancy_type:"missing_docs",count:42},{discrepancy_type:"expiry_issue",count:28}],by_severity:[{severity:"high",count:65},{severity:"medium",count:110},{severity:"low",count:85}]}},i=Ks({queryKey:["analytics-dashboard",a],queryFn:()=>fh.getDashboard({time_range:a.timeRange,start_date:a.timeRange==="custom"?a.startDate?.toISOString():void 0,end_date:a.timeRange==="custom"?a.endDate?.toISOString():void 0}),staleTime:300*1e3,retry:2,enabled:s}),l=s?i.data:n,o=s?i.isLoading:!1,d=s?i.error:void 0,c=i.refetch;if(o)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank System Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor trade finance validation system performance"})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((h,x)=>e.jsxs($,{children:[e.jsx(X,{className:"space-y-0 pb-2",children:e.jsx("div",{className:"h-4 bg-muted rounded animate-pulse"})}),e.jsxs(U,{children:[e.jsx("div",{className:"h-8 bg-muted rounded animate-pulse mb-2"}),e.jsx("div",{className:"h-3 bg-muted rounded animate-pulse w-2/3"})]})]},x))})]})});if(d)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Eg,{error:d,onRetry:c,className:"max-w-md mx-auto"})});if(!l)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx(Nr,{onRefresh:c,className:"max-w-md mx-auto"})});const u=l.summary.rejection_rate<15?"healthy":l.summary.rejection_rate<30?"warning":"critical";return e.jsxs("div",{className:"container mx-auto py-6 space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Bank System Analytics"}),e.jsx(kC,{role:"bank"}),e.jsxs(Q,{variant:u==="healthy"?"default":u==="warning"?"secondary":"destructive",children:["System ",u.charAt(0).toUpperCase()+u.slice(1)]})]}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor trade finance document validation system performance and client activity"})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2",children:[e.jsx(CC,{value:a,onChange:r,className:"w-full sm:w-auto"}),e.jsx(SC,{filters:a})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(za,{title:"Total Validations",value:l.summary.total_jobs,change:l.trends.job_volume_trend,icon:"file-text",description:"All validation jobs processed by the system"}),e.jsx(za,{title:"System Success Rate",value:`${(100-l.summary.rejection_rate).toFixed(1)}%`,change:l.trends.success_rate_trend,icon:"check-circle",variant:u==="healthy"?"success":u==="warning"?"warning":"error",description:"Overall system validation success rate"}),e.jsx(za,{title:"Avg Processing Time",value:l.summary.avg_processing_time_minutes?`${l.summary.avg_processing_time_minutes.toFixed(1)}m`:"N/A",change:l.trends.processing_time_trend,icon:"clock",description:"Average time to complete validations"}),e.jsx(za,{title:"Active Clients",value:l.users?l.users.filter(h=>h.job_count>0).length:0,icon:"users",description:"Clients with validation activity"}),e.jsx(za,{title:"Risk Level",value:l.discrepancies.total_discrepancies>500?"HIGH":l.discrepancies.total_discrepancies>200?"MEDIUM":"LOW",icon:"alert-triangle",variant:l.discrepancies.total_discrepancies>500?"error":l.discrepancies.total_discrepancies>200?"warning":"success",description:"System risk based on discrepancy volume"})]}),e.jsxs(Os,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-5",children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsx(He,{value:"clients",children:"Clients"}),e.jsx(He,{value:"risk",children:"Risk Analysis"}),e.jsx(He,{value:"performance",children:"Performance"}),e.jsx(He,{value:"compliance",children:"Compliance"})]}),e.jsxs(Qe,{value:"overview",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Vt,{className:"h-5 w-5"}),"Daily Validation Volume"]}),e.jsx(ue,{children:"System-wide validation job submissions over time"})]}),e.jsx(U,{children:l.trends.daily_volumes.length>0?e.jsx(Yf,{data:l.trends.daily_volumes,height:300,areas:[{dataKey:"count",name:"Validations",color:"#3b82f6",fillOpacity:.3}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"Document Type Distribution"]}),e.jsx(ue,{children:"Breakdown of validation jobs by document type"})]}),e.jsx(U,{children:Object.keys(l.summary.doc_distribution).length>0?e.jsx(_l,{data:Object.entries(l.summary.doc_distribution).map(([h,x])=>({name:h.replace("_"," ").toUpperCase(),value:x,percentage:(x/l.summary.total_jobs*100).toFixed(1)})),height:300,bars:[{dataKey:"value",name:"Count",color:"#8b5cf6"}]}):e.jsx(Nr,{})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"System Health Trends"}),e.jsx(ue,{children:"Monitor system-wide success rates and identify performance patterns"})]}),e.jsx(U,{children:l.trends.success_rates.length>0?e.jsx(Yf,{data:l.trends.success_rates,height:350,areas:[{dataKey:"success_rate",name:"Success Rate %",color:"#22c55e",fillOpacity:.3},{dataKey:"rejection_rate",name:"Rejection Rate %",color:"#ef4444",fillOpacity:.2}],xAxisKey:"date",stacked:!0}):e.jsx(Nr,{})})]})]}),e.jsx(Qe,{value:"clients",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-5 w-5"}),"Top Clients by Volume"]}),e.jsx(ue,{children:"Most active clients by validation job submissions"})]}),e.jsx(U,{children:l.users&&l.users.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_l,{data:l.users.slice(0,10).map(h=>({name:h.username||h.email||`User ${h.user_id}`,value:h.job_count,success_rate:h.success_rate,role:h.role})),height:400,bars:[{dataKey:"value",name:"Jobs",color:"#3b82f6"}],layout:"vertical"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Client"}),e.jsx("th",{className:"text-left p-2",children:"Role"}),e.jsx("th",{className:"text-right p-2",children:"Jobs"}),e.jsx("th",{className:"text-right p-2",children:"Success Rate"}),e.jsx("th",{className:"text-right p-2",children:"Status"})]})}),e.jsx("tbody",{children:l.users.slice(0,15).map((h,x)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"p-2 font-medium",children:h.username||h.email||`User ${h.user_id}`}),e.jsx("td",{className:"p-2",children:e.jsx(Q,{variant:"outline",className:"capitalize",children:h.role})}),e.jsx("td",{className:"p-2 text-right",children:h.job_count}),e.jsx("td",{className:"p-2 text-right",children:e.jsxs(Q,{variant:h.success_rate>90?"default":h.success_rate>75?"secondary":"destructive",children:[h.success_rate.toFixed(1),"%"]})}),e.jsx("td",{className:"p-2 text-right",children:e.jsx(Q,{variant:h.success_rate>75?"default":"secondary",children:h.success_rate>75?"Good":"Needs Attention"})})]},x))})]})})]}):e.jsx(Nr,{})})]})})}),e.jsxs(Qe,{value:"risk",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"h-5 w-5 text-orange-500"}),"Discrepancy Risk Analysis"]}),e.jsx(ue,{children:"Most frequent validation issues and their severity"})]}),e.jsx(U,{children:l.discrepancies.by_type.length>0?e.jsx(_l,{data:l.discrepancies.by_type.map(h=>({name:h.discrepancy_type.replace("_"," "),value:h.count,risk_level:h.count>50?"High":h.count>20?"Medium":"Low"})),height:300,bars:[{dataKey:"value",name:"Count",color:"#f59e0b"}],layout:"vertical"}):e.jsx(Nr,{})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Risk Trends Over Time"}),e.jsx(ue,{children:"Daily discrepancy patterns and risk levels"})]}),e.jsx(U,{children:l.trends.daily_discrepancies.length>0?e.jsx(Mo,{data:l.trends.daily_discrepancies.map(h=>({...h,risk_threshold:30})),height:300,lines:[{dataKey:"count",name:"Discrepancies",color:"#ef4444"},{dataKey:"risk_threshold",name:"Risk Threshold",color:"#f59e0b"}],xAxisKey:"date"}):e.jsx(Nr,{})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Discrepancy Severity Distribution"}),e.jsx(ue,{children:"Risk assessment based on discrepancy severity levels"})]}),e.jsx(U,{children:l.discrepancies.by_severity.length>0?e.jsx(_l,{data:l.discrepancies.by_severity.map(h=>({name:h.severity.charAt(0).toUpperCase()+h.severity.slice(1),value:h.count,color:h.severity==="high"?"#ef4444":h.severity==="medium"?"#f59e0b":"#22c55e"})),height:250,bars:[{dataKey:"value",name:"Count",color:"#f59e0b"}]}):e.jsx(Nr,{})})]})]}),e.jsx(Qe,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"h-5 w-5"}),"Processing Time Performance"]}),e.jsx(ue,{children:"System processing times and SLA compliance"})]}),e.jsx(U,{children:l.trends.processing_times.length>0?e.jsx(Yf,{data:l.trends.processing_times.map(h=>({...h,sla_target:15})),height:350,areas:[{dataKey:"avg_time",name:"Avg Processing Time (min)",color:"#6366f1",fillOpacity:.3}],xAxisKey:"date"}):e.jsx(Nr,{})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(za,{title:"SLA Compliance",value:"94.2%",icon:"target",variant:"success",description:"Percentage of jobs completed within SLA"}),e.jsx(za,{title:"Peak Hour Performance",value:l.summary.avg_processing_time_minutes?`${(l.summary.avg_processing_time_minutes*1.2).toFixed(1)}m`:"N/A",icon:"trending-up",description:"Average processing time during peak hours"}),e.jsx(za,{title:"System Availability",value:"99.8%",icon:"server",variant:"success",description:"System uptime percentage"})]})]})}),e.jsx(Qe,{value:"compliance",className:"space-y-6",children:e.jsx("div",{className:"grid gap-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Regulatory Compliance Overview"}),e.jsx(ue,{children:"Monitor compliance with trade finance regulations and standards"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"AML Compliance"}),e.jsx(Q,{variant:"default",children:"98.5%"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Anti-Money Laundering checks passed"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"KYC Verification"}),e.jsx(Q,{variant:"default",children:"97.2%"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Know Your Customer verifications completed"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Sanctions Check"}),e.jsx(Q,{variant:"default",children:"99.8%"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Sanctions screening completed successfully"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:"Document Integrity"}),e.jsxs(Q,{variant:l.summary.rejection_rate<10?"default":"secondary",children:[(100-l.summary.rejection_rate).toFixed(1),"%"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Document validation success rate"})]})]}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Audit Trail Status"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"All validation activities are logged and auditable for regulatory compliance"}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("span",{children:["â€¢ ",l.summary.total_jobs," transactions logged"]}),e.jsx("span",{children:"â€¢ 100% audit trail coverage"}),e.jsx("span",{children:"â€¢ 7-year retention policy active"})]})]})]})]})})})]})]})}function Of(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}function Jte({children:t,title:s,subtitle:a,actions:r,breadcrumbs:n,toolbar:i,compact:l=!1}){return e.jsxs("div",{className:"min-h-screen bg-background","data-app-shell":"true",children:[e.jsx("header",{className:"sticky top-0 z-50 border-b bg-card/95 backdrop-blur supports-[backdrop-filter]:bg-card/80",children:e.jsxs("div",{className:"container flex h-14 items-center justify-between px-4",children:[n&&n.length>0&&e.jsx("div",{className:"flex items-center gap-2 text-sm",children:n.map((o,d)=>e.jsxs("div",{className:"flex items-center gap-2",children:[d>0&&e.jsx("span",{className:"text-muted-foreground",children:"/"}),o.href?e.jsx(pe,{to:o.href,className:"text-muted-foreground hover:text-foreground transition-colors",children:o.label}):e.jsx("span",{className:"text-foreground font-medium",children:o.label})]},d))}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx(ST,{}),e.jsx(gG,{})]})]})}),(s||a||r)&&e.jsx("div",{className:Of("border-b bg-muted/30",l?"py-3":"py-4"),children:e.jsx("div",{className:"container px-4",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[s&&e.jsx("h1",{className:Of("font-semibold tracking-tight",l?"text-lg":"text-xl"),children:s}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a})]}),r&&e.jsx("div",{className:"flex items-center gap-2 shrink-0",children:r})]})})}),i&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:Of("bg-muted/20",l?"py-2":"py-3"),children:e.jsx("div",{className:"container px-4",children:i})}),e.jsx(As,{})]}),e.jsx("main",{className:Of("container",l?"py-4 px-4":"py-6 px-4"),children:t})]})}function l9e({children:t,className:s}){return e.jsx("div",{className:Of("flex items-center gap-3 flex-wrap",s),children:t})}function cU({children:t,className:s}){return e.jsx("div",{className:Of("flex items-center gap-2",s),children:t})}function Nl(t){return!t||typeof t!="string"?"":t.replace(/<[^>]*>/g,"").trim()}function no(t,s){return!t||typeof t!="string"?s:Nl(t)||s}function o9e(t){return!t||typeof t!="string"?"":t.replace(/[\/\\<>:"|?*]/g,"").slice(0,255)}const dU=10*1024*1024,c9e=50*1024*1024,sA=100*1024*1024,$0=[{mimeType:"application/pdf",extension:".pdf",description:"PDF Document"},{mimeType:"image/jpeg",extension:".jpg",description:"JPEG Image"},{mimeType:"image/jpeg",extension:".jpeg",description:"JPEG Image"},{mimeType:"image/png",extension:".png",description:"PNG Image"},{mimeType:"image/tiff",extension:".tiff",description:"TIFF Image"},{mimeType:"image/tiff",extension:".tif",description:"TIFF Image"}],d9e={"application/pdf":[[37,80,68,70]],"image/jpeg":[[255,216,255]],"image/png":[[137,80,78,71,13,10,26,10]],"image/tiff":[[73,73,42,0],[77,77,0,42]]};async function u9e(t,s=8){return new Promise((a,r)=>{const n=new FileReader;n.onload=i=>{if(i.target?.result instanceof ArrayBuffer){const l=new Uint8Array(i.target.result.slice(0,s));a(l)}else r(new Error("Failed to read file header"))},n.onerror=()=>r(new Error("Failed to read file")),n.readAsArrayBuffer(t.slice(0,s))})}function m9e(t,s){if(t.length<s.length)return!1;for(let a=0;a<s.length;a++)if(t[a]!==s[a])return!1;return!0}async function h9e(t){try{const s=await u9e(t,8);for(const[a,r]of Object.entries(d9e))for(const n of r)if(m9e(s,n))return a;return null}catch(s){return console.error("Error detecting file type:",s),null}}async function x9e(t){const s=t.type||p9e(t.name),a=await h9e(t);if(!a)return s&&$0.some(n=>n.mimeType===s)?{valid:!0,detectedType:null,declaredType:s}:{valid:!1,detectedType:null,declaredType:s,error:"File type could not be detected and is not in allowed types"};if(!$0.some(n=>n.mimeType===a))return{valid:!1,detectedType:a,declaredType:s,error:`Detected file type ${a} is not allowed`};if(s&&s!==a){const n=$0.find(l=>l.mimeType===s),i=$0.find(l=>l.mimeType===a);if(n?.mimeType!==i?.mimeType)return{valid:!1,detectedType:a,declaredType:s,error:`File type mismatch: declared as ${s} but detected as ${a}`}}return{valid:!0,detectedType:a,declaredType:s}}function p9e(t){const s=t.toLowerCase().split(".").pop();return s&&$0.find(r=>r.extension.toLowerCase()===`.${s}`)?.mimeType||null}async function f9e(t){const s=[],a=[];for(const r of t){const n=await x9e(r);a.push({filename:r.name,valid:n.valid,detectedType:n.detectedType}),n.valid||s.push({filename:r.name,error:n.error||"Invalid file content"})}return{valid:s.length===0,errors:s,results:a}}function aA(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const g9e=[{value:"lc",label:"Letter of Credit"},{value:"invoice",label:"Commercial Invoice"},{value:"packing_list",label:"Packing List"},{value:"bl",label:"Bill of Lading"},{value:"coo",label:"Certificate of Origin"},{value:"insurance",label:"Insurance Certificate"},{value:"other",label:"Other Trade Documents"}];function v9e(t){if(!t)return"0 Bytes";const s=1024,a=["Bytes","KB","MB","GB","TB"],r=Math.floor(Math.log(t)/Math.log(s)),n=t/Math.pow(s,r);return`${parseFloat(n.toFixed(2))} ${a[r]}`}function Qte({onUploadSuccess:t}){const[s,a]=m.useState("single"),[r,n]=m.useState([]),[i,l]=m.useState(""),[o,d]=m.useState(""),[c,u]=m.useState(""),[h,x]=m.useState(""),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState(!1),[_,A]=m.useState(null),[k,E]=m.useState([]),[D,R]=m.useState(null),[O,P]=m.useState(!1),[T,B]=m.useState(null),[G,q]=m.useState(!1),{toast:z}=et(),{validate:H,isLoading:le}=WF(),[Y,te]=m.useState("");m.useEffect(()=>{const st=setTimeout(()=>{te(i)},300);return()=>clearTimeout(st)},[i]);const{data:ne}=Ks({queryKey:["bank-clients",Y],queryFn:()=>mn.getClients(Y||void 0,20),enabled:N&&Y.length>0,staleTime:300*1e3}),ae=m.useMemo(()=>{if(!ne?.clients)return[];const st=ne.clients.map(Wt=>Nl(Wt).trim()).filter(Wt=>Wt.length>0),ht=[],Ss=new Set;for(const Wt of st)Ss.has(Wt)||(Ss.add(Wt),ht.push(Wt));return ht},[ne]),{data:re,refetch:xe}=Ks({queryKey:["duplicate-check",i.trim(),o.trim()],queryFn:()=>!i.trim()||!o.trim()?null:mn.checkDuplicate(o.trim(),i.trim()),enabled:!1,staleTime:30*1e3});m.useEffect(()=>{if(i.trim()&&o.trim()&&s==="single"){const st=setTimeout(()=>{q(!0),xe().finally(()=>q(!1))},500);return()=>clearTimeout(st)}else B(null)},[i,o,s,xe]),m.useEffect(()=>{B(re?{isDuplicate:re.is_duplicate,duplicateCount:re.duplicate_count,previousValidations:re.previous_validations||[]}:null)},[re]);const ye=m.useCallback(async st=>{const ht=st.filter(ys=>ys.size>dU);if(ht.length>0){z({title:"File Too Large",description:`${ht[0].name} exceeds 10MB limit`,variant:"destructive"});return}if([...r,...st].reduce((ys,dt)=>ys+dt.size,0)>c9e){z({title:"Total Size Exceeded",description:"Total file size cannot exceed 50MB",variant:"destructive"});return}const Wt=await f9e(st);if(!Wt.valid){const ys=Wt.errors.map(dt=>`${dt.filename}: ${dt.error}`).join(`
apps\web\dist\assets\index-Bz84JA8h.js:568:`);z({title:"Invalid File Content",description:ys||"File content does not match declared type. Please upload valid PDF, JPEG, PNG, or TIFF files.",variant:"destructive"});return}const Rt=st.map(ys=>({id:`${Date.now()}-${Math.random()}`,file:ys,name:o9e(ys.name),size:ys.size,type:ys.type}));n(ys=>[...ys,...Rt])},[r,z]),{getRootProps:ke,getInputProps:ze,isDragActive:ce}=vg({onDrop:ye,accept:{"application/pdf":[".pdf"],"image/*":[".png",".jpg",".jpeg"]},multiple:!0}),Re=st=>{n(ht=>ht.filter(Ss=>Ss.id!==st))},ie=(st,ht)=>{n(Ss=>Ss.map(Wt=>Wt.id===st?{...Wt,documentType:ht}:Wt))},Ne=m.useMemo(()=>r.reduce((st,ht)=>st+ht.size,0),[r]),Ue=m.useMemo(()=>o.trim()?Nl(o.trim()):"Not provided",[o]),ge=m.useMemo(()=>{const st=r.length;return`${st} ${st===1?"file":"files"} uploaded`},[r]),he=m.useMemo(()=>Ne>0?v9e(Ne):"0 Bytes",[Ne]),_e=async st=>{if(st.size>sA){z({title:"ZIP Too Large",description:`ZIP file exceeds ${sA/(1024*1024)}MB limit`,variant:"destructive"});return}A(st),P(!0);try{const ht=await mn.extractZipFile(st);E(ht.lc_sets),R(ht.bulk_session_id);const Ss={};ht.lc_sets.forEach((Wt,Rt)=>{Ss[Rt]={client_name:Wt.client_name||"",lc_number:Wt.lc_number||"",date_received:""}}),setLcSetMetadata(Ss),z({title:"ZIP Extracted",description:`Detected ${ht.total_lc_sets} LC set(s) in ZIP file`})}catch(ht){z({title:"Extraction Failed",description:ht.message||"Failed to extract ZIP file. Please try again.",variant:"destructive"}),A(null)}finally{P(!1)}},at=async()=>{if(!D||k.length===0){z({title:"No LC Sets",description:"Please extract a ZIP file first",variant:"destructive"});return}if(k.filter((ht,Ss)=>!lcSetMetadata[Ss]?.client_name?.trim()).length>0){z({title:"Missing Client Names",description:"Please provide client names for all LC sets",variant:"destructive"});return}try{P(!0);const ht=k.map((Wt,Rt)=>{const ys=lcSetMetadata[Rt];return{client_name:Nl(ys.client_name.trim()),lc_number:ys.lc_number?Nl(ys.lc_number.trim()):void 0,date_received:ys.date_received||void 0,files:Wt.files.map(dt=>({filename:dt.filename,s3_key:dt.s3_key||"",valid:dt.valid}))}}),Ss=await mn.submitBulkUpload({bulk_session_id:D,lc_sets:ht});z({title:"Bulk Upload Submitted",description:`Successfully queued ${Ss.jobs_created} LC set(s) for validation`}),A(null),E([]),setLcSetMetadata({}),R(null),a("single"),t&&t()}catch(ht){z({title:"Bulk Upload Failed",description:ht.message||"Failed to submit bulk upload. Please try again.",variant:"destructive"})}finally{P(!1)}},nt=async()=>{const st=Nl(i.trim());if(!st){j("Client name is required"),z({title:"Validation Error",description:"Please enter the client name",variant:"destructive"});return}const ht=Nl(o.trim());if(!ht){b("LC number is required"),z({title:"Validation Error",description:"Please enter the LC number",variant:"destructive"});return}if(r.length===0){z({title:"No Files",description:"Please upload at least one document",variant:"destructive"});return}if(r.filter(Rt=>Rt.file.size>dU).length>0){z({title:"File Too Large",description:"Please remove files larger than 10MB",variant:"destructive"});return}if(r.filter(Rt=>!Rt.documentType).length>0){z({title:"Document Types Required",description:"Please assign a document type to all files",variant:"destructive"});return}try{const Rt={};r.forEach(ot=>{ot.documentType&&(Rt[ot.name]=ot.documentType)});const ys=h?Nl(h.trim()):void 0;if(st)try{const ot=await mn.checkDuplicate(ht,st);ot.is_duplicate&&z({title:"Duplicate LC Detected",description:`This LC has been validated ${ot.duplicate_count} time(s) before. You can still proceed with this upload.`,variant:"default"})}catch(ot){console.error("Failed to check for duplicates:",ot)}const dt=await H({files:r.map(ot=>ot.file),lcNumber:ht,notes:ys,documentTags:Rt,userType:"bank",workflowType:"bank-bulk-validation",metadata:{clientName:st,dateReceived:c||void 0}}),we=dt.jobId||dt.job_id;z({title:"Validation Started",description:`LC validation for ${st} has been queued for processing.`}),n([]),l(""),d(""),u(""),x(""),j(""),b(""),t&&t()}catch(Rt){z({title:"Validation Failed",description:Rt.message||"Failed to start validation. Please try again.",variant:"destructive"})}};return e.jsx("div",{className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Upload LC Documents"}),e.jsx(ue,{children:"Upload LC and supporting documents for validation. All fields marked with * are required."})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 border-b pb-4",children:[e.jsx(Z,{className:"text-sm font-medium",children:"Upload Mode:"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:s==="single"?"default":"outline",size:"sm",onClick:()=>{a("single"),A(null),E([]),setLcSetMetadata({}),R(null),b("")},children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Single Upload"]}),e.jsxs(M,{variant:s==="bulk"?"default":"outline",size:"sm",onClick:()=>{a("bulk"),n([]),l(""),d(""),u(""),b("")},children:[e.jsx(m5,{className:"w-4 h-4 mr-2"}),"Bulk Upload (ZIP)"]})]})]}),s==="single"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"clientName",children:["Client Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs(Fb,{open:N,onOpenChange:C,children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{id:"clientName",value:i,onChange:st=>{l(st.target.value),j(""),C(!0)},onFocus:()=>C(!0),placeholder:"Enter client/company name...",className:aA(g?"border-destructive":"")}),e.jsx(Rb,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:st=>{st.preventDefault(),C(!N)},children:e.jsx(Jq,{className:"h-4 w-4 opacity-50"})})})]}),e.jsx(lv,{className:"w-[var(--radix-popover-trigger-width)] p-0",align:"start",children:e.jsxs(j_,{children:[e.jsx(b_,{placeholder:"Search client name...",value:i,onValueChange:st=>{l(st),j("")}}),e.jsxs(y_,{children:[e.jsx(N_,{children:e.jsxs("div",{className:"py-3 px-4 text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"No existing client found"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Type to add new client"})]})}),e.jsx(uj,{children:ae.map(st=>e.jsxs(zf,{value:st,onSelect:ht=>{l(ht===i?"":ht),C(!1),j("")},children:[e.jsx(Za,{className:aA("mr-2 h-4 w-4",i===st?"opacity-100":"opacity-0")}),st]},st))})]})]})})]}),g&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(ks,{className:"w-4 h-4"}),g]})]}),T?.isDuplicate&&e.jsx($,{className:"border-yellow-500 bg-yellow-50 dark:bg-yellow-950",children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(ks,{className:"w-5 h-5 text-yellow-600 mt-0.5"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium text-yellow-900 dark:text-yellow-100",children:"Duplicate LC Detected"}),e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 mt-1",children:["This LC (",Nl(o),") for ",Nl(i)," has been validated"," ",T.duplicateCount," time(s) before. You can still proceed with this upload."]}),T.previousValidations.length>0&&e.jsxs("div",{className:"mt-3 space-y-2",children:[e.jsx("p",{className:"text-xs font-medium text-yellow-900 dark:text-yellow-100",children:"Previous Validations:"}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:T.previousValidations.slice(0,3).map(st=>e.jsxs("div",{className:"text-xs bg-white dark:bg-yellow-900 p-2 rounded border border-yellow-200 dark:border-yellow-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:st.completed_at?hs(new Date(st.completed_at),"MMM d, yyyy HH:mm"):"N/A"}),e.jsx(Q,{variant:st.status==="compliant"?"default":st.status==="discrepancies"?"secondary":"destructive",className:"text-xs",children:st.status==="compliant"?"Compliant":st.status==="discrepancies"?"Discrepancies":"Failed"})]}),e.jsxs("div",{className:"text-muted-foreground mt-1",children:["Score: ",st.compliance_score,"% | Discrepancies: ",st.discrepancy_count]})]},st.id))})]})]})]})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Z,{htmlFor:"lcNumber",children:["LC Number ",e.jsx("span",{className:"text-destructive",children:"*"})]}),G&&e.jsx(ct,{className:"w-4 h-4 animate-spin text-muted-foreground"})]}),e.jsx(oe,{id:"lcNumber",value:o,onChange:st=>{d(st.target.value),b("")},placeholder:"e.g., BD-2024-001",className:aA(y?"border-destructive":"")}),y&&e.jsxs("p",{className:"text-sm text-destructive flex items-center gap-1",children:[e.jsx(ks,{className:"w-4 h-4"}),y]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"dateReceived",children:"Date Received (Optional)"}),e.jsx(oe,{id:"dateReceived",type:"date",value:c,onChange:st=>u(st.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:["Documents ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{...ke(),className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors ${ce?"border-primary bg-primary/5":"border-muted-foreground/25 hover:border-primary/50"}`,children:[e.jsx("input",{...ze()}),e.jsx(Hs,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:ce?"Drop files here":"Drag & drop files or click to browse"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF, PNG, JPG (Max 10MB per file)"})]}),r.length>0&&e.jsx("div",{className:"space-y-3 mt-4",children:r.map(st=>e.jsxs("div",{className:"p-4 border rounded-lg bg-card space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-primary flex-shrink-0"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium",title:st.name,children:Nl(st.name)}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[(st.size/1024/1024).toFixed(2)," MB"]})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>Re(st.id),className:"text-destructive hover:text-destructive hover:bg-destructive/10",children:e.jsx(fn,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Z,{htmlFor:`doc-type-${st.id}`,className:"text-xs text-muted-foreground whitespace-nowrap",children:"Document Type:"}),e.jsxs(Te,{value:st.documentType||"",onValueChange:ht=>ie(st.id,ht),children:[e.jsx(Pe,{id:`doc-type-${st.id}`,className:"flex-1",children:e.jsx(Fe,{placeholder:"Select document type..."})}),e.jsx(De,{children:g9e.map(ht=>e.jsx(K,{value:ht.value,children:ht.label},ht.value))})]})]})]},st.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(Zt,{id:"notes",value:h,onChange:st=>x(st.target.value),placeholder:"Add any additional notes or context...",rows:3})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/20 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3",children:"Upload Summary"}),e.jsxs("dl",{className:"grid gap-3 sm:grid-cols-3",children:[e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"LC Number"}),e.jsx("dd",{className:"text-sm font-medium mt-1 break-words",children:Ue})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Documents"}),e.jsx("dd",{className:"text-sm font-medium mt-1",children:ge})]}),e.jsxs("div",{children:[e.jsx("dt",{className:"text-xs uppercase tracking-wide text-muted-foreground",children:"Total Size"}),e.jsx("dd",{className:"text-sm font-medium mt-1",children:he})]})]})]}),e.jsx(M,{onClick:nt,disabled:le||r.length===0||!i.trim()||!o.trim(),className:"w-full",size:"lg",children:le?e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Submit for Validation"]})})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"space-y-6",children:[!_&&!O&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:["ZIP File ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-colors hover:border-primary/50",children:[e.jsx("input",{type:"file",accept:".zip",onChange:st=>{const ht=st.target.files?.[0];ht&&_e(ht)},className:"hidden",id:"zip-upload"}),e.jsxs("label",{htmlFor:"zip-upload",className:"cursor-pointer",children:[e.jsx(m5,{className:"w-12 h-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload ZIP file or drag & drop"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ZIP file containing multiple LC document sets (Max ",sA/(1024*1024),"MB)"]})]})]})]}),O&&e.jsxs("div",{className:"text-center py-8",children:[e.jsx(ct,{className:"w-12 h-12 mx-auto mb-4 animate-spin text-primary"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Extracting ZIP file and detecting LC sets..."})]}),k.length>0&&!O&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Z,{className:"text-base font-semibold",children:["Detected LC Sets (",k.length,")"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{A(null),E([]),setLcSetMetadata({}),R(null)},children:[e.jsx(fn,{className:"w-4 h-4 mr-2"}),"Clear"]})]}),e.jsx("div",{className:"space-y-4",children:k.map((st,ht)=>{const Ss=lcSetMetadata[ht]||{client_name:"",lc_number:"",date_received:""};return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-base",children:["LC Set ",ht+1,e.jsx(Q,{variant:"outline",className:"ml-2",children:st.detection_method})]}),e.jsxs(ue,{children:[st.file_count," file(s) detected"]})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:["Client Name ",e.jsx("span",{className:"text-destructive",children:"*"})]}),e.jsx(oe,{value:Ss.client_name,onChange:Wt=>{setLcSetMetadata({...lcSetMetadata,[ht]:{...Ss,client_name:Wt.target.value}})},placeholder:"Enter client name..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"LC Number"}),e.jsx(oe,{value:Ss.lc_number,onChange:Wt=>{setLcSetMetadata({...lcSetMetadata,[ht]:{...Ss,lc_number:Wt.target.value}})},placeholder:"Enter LC number..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Date Received"}),e.jsx(oe,{type:"date",value:Ss.date_received,onChange:Wt=>{setLcSetMetadata({...lcSetMetadata,[ht]:{...Ss,date_received:Wt.target.value}})}})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{children:["Files (",st.files.length,")"]}),e.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto",children:st.files.map((Wt,Rt)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs p-2 bg-muted rounded",children:[e.jsx(Be,{className:"w-3 h-3 text-muted-foreground"}),e.jsx("span",{className:"flex-1 truncate",children:Nl(Wt.filename)}),e.jsxs("span",{className:"text-muted-foreground",children:[(Wt.size/1024).toFixed(1)," KB"]}),Wt.valid?e.jsx(Za,{className:"w-3 h-3 text-green-600"}):e.jsx(ks,{className:"w-3 h-3 text-red-600"})]},Rt))})]})]})]},ht)})}),e.jsx(M,{onClick:at,disabled:O||k.length===0,className:"w-full",size:"lg",children:O?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Submit ",k.length," LC Set(s) for Validation"]})})]})]})})]})]})})}const j9e={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1};function Xte({enabled:t=!0,onJobUpdate:s,onError:a}={}){const[r,n]=m.useState([]),[i,l]=m.useState(!1),[o,d]=m.useState(null),c=m.useRef(null),u=m.useRef(null),h=m.useRef(0),x=5,g=m.useCallback(async()=>{try{const{data:N}=await Ae.get("/bank/jobs");n(N.jobs||[])}catch(N){console.error("Failed to load initial jobs:",N),a&&a(N)}},[a]),j=m.useCallback(async()=>{if(t)try{const{data:N}=await Ae.get("/bank/jobs/stream-token");d(N.token),h.current=0,await g()}catch(N){console.error("Failed to fetch stream token:",N),a&&a(N)}},[t,a,g]),y=m.useCallback(()=>{if(!(!t||c.current||!o))try{const C=`${j9e?.VITE_API_URL||"http://localhost:8000"}/bank/jobs/stream?sse_token=${encodeURIComponent(o)}`,_=new EventSource(C,{withCredentials:!0});c.current=_,_.onopen=()=>{l(!0),h.current=0},_.onmessage=A=>{try{const k=JSON.parse(A.data);if(!k||!k.id)return;n(E=>{const D=E.findIndex(R=>R.id===k.id);if(D>=0){const R=[...E];return R[D]=k,R}return[...E,k]}),s&&s(k)}catch(k){console.error("Failed to parse SSE event data:",k),a&&a(k)}},_.onerror=A=>{if(console.error("SSE connection error:",A),l(!1),_.close(),c.current=null,h.current<x){h.current+=1;const k=Math.min(1e3*Math.pow(2,h.current),3e4);u.current=setTimeout(async()=>{u.current=null,await j()},k)}else a&&a(new Error("Failed to connect to job status stream"))}}catch(N){console.error("Failed to create SSE connection:",N),a&&a(N)}},[t,o,s,a,j]),b=m.useCallback(()=>{c.current&&(c.current.close(),c.current=null),u.current&&(clearTimeout(u.current),u.current=null),l(!1)},[]);return m.useEffect(()=>(t?j():(b(),d(null),n([])),()=>{b()}),[t,j,b]),m.useEffect(()=>{t&&o&&y()},[t,o,y]),{jobs:r,isConnected:i,connect:y,disconnect:b}}function b9e({onJobComplete:t}){const[s,a]=m.useState(new Set),{jobs:r,isConnected:n}=Xte({enabled:!0,onJobUpdate:d=>{d.status==="completed"&&a(c=>c.has(d.id)?c:(t&&setTimeout(()=>{t()},1e3),new Set(c).add(d.id)))}}),i=r.filter(d=>d.status==="pending"||d.status==="processing"||d.status==="created"||d.status==="uploading"),l=d=>{switch(d){case"pending":case"created":return e.jsx(Q,{variant:"secondary",children:"Pending"});case"processing":return e.jsx(Q,{variant:"default",className:"bg-blue-500",children:"Processing"});case"completed":return e.jsx(Q,{variant:"default",className:"bg-green-500",children:"Completed"});case"failed":return e.jsx(Q,{variant:"destructive",children:"Error"});default:return e.jsx(Q,{variant:"secondary",children:d})}},o=d=>{switch(d){case"pending":case"created":return e.jsx(mt,{className:"w-5 h-5 text-muted-foreground"});case"processing":return e.jsx(mt,{className:"w-5 h-5 text-blue-500 animate-spin"});case"completed":return e.jsx(Oe,{className:"w-5 h-5 text-green-500"});case"failed":return e.jsx(bs,{className:"w-5 h-5 text-destructive"});default:return e.jsx(mt,{className:"w-5 h-5 text-muted-foreground"})}};return!n&&i.length===0?e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Processing Queue"}),e.jsx(ue,{children:"Connecting to real-time updates..."})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(mt,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-spin"}),e.jsx("p",{className:"text-muted-foreground",children:"Connecting..."})]})})]}):i.length===0?e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Processing Queue"}),e.jsx(ue,{children:"LC validations will appear here once submitted"})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No jobs in queue"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Upload LC documents to start validation"})]})})]}):e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Processing Queue"}),e.jsxs(ue,{children:[i.length," job(s) in progress"]})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:i.map(d=>{const c=no(d.client_name,"Unknown Client"),u=no(d.lc_number,""),h=d.submitted_at?new Date(d.submitted_at):new Date,x=d.completed_at?new Date(d.completed_at):void 0;return e.jsxs("div",{className:"p-4 border rounded-lg bg-card space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[o(d.status),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:c}),l(d.status)]}),u&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:["LC: ",u]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Submitted: ",h.toLocaleString()]})]})]})}),d.status==="processing"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsx("span",{className:"text-muted-foreground",children:"Processing..."}),e.jsxs("span",{className:"text-muted-foreground",children:[d.progress,"%"]})]}),e.jsx(es,{value:d.progress,className:"h-2"})]}),x&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Completed: ",x.toLocaleString()]}),d.status==="failed"&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-destructive",children:[e.jsx(ks,{className:"w-4 h-4"}),e.jsx("span",{children:"Validation failed. Please try again."})]})]},d.id)})})})]})}function y9e({sessionId:t}){const s=zt(),{data:a,isLoading:r,error:n}=Ks({queryKey:["merge-history",t],queryFn:()=>yT.getMergeHistory(t),enabled:!!t}),i=o=>({duplicate:"destructive",amendment:"default",correction:"secondary",manual:"outline"})[o]||"outline",l=o=>o.charAt(0).toUpperCase()+o.slice(1);return r?e.jsx($,{children:e.jsx(U,{className:"py-8",children:e.jsxs("div",{className:"flex items-center justify-center",children:[e.jsx(ct,{className:"h-6 w-6 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading merge history..."})]})})}):n?e.jsx($,{children:e.jsx(U,{className:"py-8",children:e.jsx("p",{className:"text-center text-muted-foreground",children:"Failed to load merge history."})})}):!a||a.merges.length===0?e.jsx($,{children:e.jsxs(X,{children:[e.jsx(ee,{children:"Merge History"}),e.jsx(ue,{children:"No merge history for this session."})]})}):e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Merge History"}),e.jsxs(ue,{children:[a.total_count," merge",a.total_count!==1?"s":""," recorded"]})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:a.merges.map((o,d)=>{const c=o.source_session_id===t,u=c?o.target_session_id:o.source_session_id,h=!c;return e.jsxs("div",{className:"flex gap-4 pb-4 border-b last:border-b-0 last:pb-0",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx("div",{className:"w-10 h-10 rounded-full bg-primary/10 flex items-center justify-center",children:e.jsx(sue,{className:"h-5 w-5 text-primary"})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(Q,{variant:i(o.merge_type),children:l(o.merge_type)}),e.jsx("span",{className:"text-sm text-muted-foreground",children:hs(new Date(o.merged_at),"MMM dd, yyyy HH:mm")})]}),e.jsx("p",{className:"text-sm font-medium",children:h?`Merged into session ${u.slice(0,8)}...`:`Merged session ${u.slice(0,8)}... into this session`})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(`/lcopilot/bank-dashboard/results/${u}`),children:e.jsx(ir,{className:"h-4 w-4"})})]}),o.merge_reason&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:o.merge_reason}),o.fields_merged&&Object.keys(o.fields_merged).length>0&&e.jsx("div",{className:"flex flex-wrap gap-1 mb-2",children:Object.keys(o.fields_merged).map(x=>e.jsx(Q,{variant:"outline",className:"text-xs",children:x.replace(/_/g," ")},x))}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(Ec,{className:"h-3 w-3"}),e.jsxs("span",{children:["Merged by user ",o.merged_by.slice(0,8),"..."]})]})]})]},o.id)})})})]})}function mR({jobId:t,open:s,onOpenChange:a,clientName:r,lcNumber:n}){const[i,l]=m.useState(!1),{data:o,isLoading:d,error:c}=Ks({queryKey:["validation-session",t],queryFn:()=>getValidationSession(t),enabled:s&&!!t}),u=o?.extracted_data?.bank_metadata||{},h=r||u.client_name||"Unknown",x=n||u.lc_number||"N/A",g=async()=>{if(t){l(!0);try{const b=await getReportDownloadUrl(t);window.open(b.download_url,"_blank")}catch(b){console.error("Failed to download report:",b),alert("Failed to download report. Please try again.")}finally{l(!1)}}},j=b=>{switch(b){case"critical":return e.jsx(Q,{variant:"destructive",children:"Critical"});case"major":return e.jsx(Q,{variant:"default",className:"bg-yellow-500",children:"Major"});case"minor":return e.jsx(Q,{variant:"secondary",children:"Minor"});default:return e.jsx(Q,{variant:"secondary",children:b})}},y=b=>{switch(b){case"completed":return e.jsx(Q,{variant:"default",className:"bg-green-500",children:"Completed"});case"failed":return e.jsx(Q,{variant:"destructive",children:"Failed"});case"processing":return e.jsx(Q,{variant:"default",className:"bg-blue-500",children:"Processing"});default:return e.jsx(Q,{variant:"secondary",children:b})}};return c?e.jsx(wt,{open:s,onOpenChange:a,children:e.jsx(yt,{className:"max-w-2xl",children:e.jsxs(jt,{children:[e.jsx(bt,{children:"Error Loading Details"}),e.jsx(_t,{children:"Failed to load validation details. Please try again."})]})})}):e.jsx(wt,{open:s,onOpenChange:a,children:e.jsxs(yt,{className:"max-w-4xl max-h-[90vh]",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"LC Validation Details"]}),e.jsx(_t,{children:"Complete validation results and document information"})]}),d?e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(mt,{className:"w-8 h-8 animate-spin text-muted-foreground"}),e.jsx("p",{className:"ml-2 text-muted-foreground",children:"Loading details..."})]}):o?e.jsx(Cg,{className:"max-h-[calc(90vh-120px)] pr-4",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-lg",children:"Summary"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(Bs,{className:"w-4 h-4"}),"Client Name"]}),e.jsx("p",{className:"font-medium",children:sanitizeDisplayText(h,"Unknown")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(aue,{className:"w-4 h-4"}),"LC Number"]}),e.jsx("p",{className:"font-medium",children:sanitizeDisplayText(x,"N/A")})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(ya,{className:"w-4 h-4"}),"Submitted At"]}),e.jsx("p",{className:"font-medium",children:o.created_at?format(new Date(o.created_at),"MMM dd, yyyy HH:mm:ss"):"N/A"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4"}),"Status"]}),e.jsx("div",{children:y(o.status)})]})]}),o.processing_completed_at&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Completed At"}),e.jsx("p",{className:"font-medium",children:format(new Date(o.processing_completed_at),"MMM dd, yyyy HH:mm:ss")})]})]})]}),e.jsxs(Os,{defaultValue:"documents",className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsxs(He,{value:"documents",children:["Documents (",o.documents?.length||0,")"]}),e.jsxs(He,{value:"discrepancies",children:["Discrepancies (",o.discrepancies?.length||0,")"]}),e.jsx(He,{value:"history",children:"History"})]}),e.jsx(Qe,{value:"documents",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Uploaded Documents"}),e.jsx(ue,{children:"All documents processed for this validation"})]}),e.jsx(U,{children:o.documents&&o.documents.length>0?e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Document Type"}),e.jsx(je,{children:"Filename"}),e.jsx(je,{children:"File Size"}),e.jsx(je,{children:"OCR Confidence"})]})}),e.jsx(oa,{children:o.documents.map(b=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:b.document_type||"Unknown"}),e.jsx(fe,{children:sanitizeDisplayText(b.original_filename,"N/A")}),e.jsx(fe,{children:b.file_size?`${(b.file_size/1024/1024).toFixed(2)} MB`:"N/A"}),e.jsx(fe,{children:b.ocr_confidence!==void 0?`${(b.ocr_confidence*100).toFixed(1)}%`:"N/A"})]},b.id))})]}):e.jsx("p",{className:"text-sm text-muted-foreground text-center py-8",children:"No documents found"})})]})}),e.jsx(Qe,{value:"discrepancies",className:"space-y-4",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Validation Discrepancies"}),e.jsx(ue,{children:"Issues found during validation process"})]}),e.jsx(U,{children:o.discrepancies&&o.discrepancies.length>0?e.jsx("div",{className:"space-y-4",children:o.discrepancies.map(b=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-2",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2",children:[b.severity==="critical"?e.jsx(Ve,{className:"w-5 h-5 text-destructive"}):e.jsx(Ve,{className:"w-5 h-5 text-yellow-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"font-medium flex items-center gap-2",children:[b.rule_name,j(b.severity)]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:b.discrepancy_type})]})]})}),e.jsx(As,{}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("p",{className:"font-medium",children:b.description}),b.field_name&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Field: "}),e.jsx("span",{className:"font-medium",children:b.field_name})]}),b.expected_value&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Expected: "}),e.jsx("span",{className:"font-medium",children:b.expected_value})]}),b.actual_value&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Actual: "}),e.jsx("span",{className:"font-medium",children:b.actual_value})]})]}),b.source_document_types&&b.source_document_types.length>0&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Source documents: ",b.source_document_types.join(", ")]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Found:"," ",format(new Date(b.created_at),"MMM dd, yyyy HH:mm:ss")]})]})]},b.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto text-green-500 mb-4"}),e.jsx("p",{className:"text-sm font-medium",children:"No Discrepancies Found"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"All validation checks passed successfully"})]})})]})}),e.jsx(Qe,{value:"history",className:"space-y-4",children:t&&e.jsx(y9e,{sessionId:t})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(M,{variant:"outline",onClick:()=>a(!1),children:"Close"}),o.status==="completed"&&e.jsx(M,{onClick:g,disabled:i,children:i?e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"w-4 h-4 mr-2 animate-spin"}),"Downloading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download PDF Report"]})})]})]})}):null]})})}function N9e(t,s=window.location.origin){const a=new URLSearchParams;return a.set("dashboard",t.dashboard),a.set("section",t.section),a.set("filters",JSON.stringify(t.filters)),a.set("view",t.id),`${s}/lcopilot/${t.dashboard}-dashboard?${a.toString()}`}function w9e({resource:t,currentFilters:s,onLoadView:a,onSaveView:r}){const{toast:n}=et(),{user:i}=Al(),l=Yn(),[o,d]=m.useState(!1),[c,u]=m.useState(""),[h,x]=m.useState(""),[g,j]=m.useState(!1),[y,b]=m.useState(!1),{data:N,isLoading:C}=Ks({queryKey:["bank-saved-views",t],queryFn:()=>oN.list(t)}),_=N?.views||[],A=Ya({mutationFn:B=>oN.create({name:B.name,resource:t,query_params:s,columns:{},shared:B.shared,is_org_default:B.is_org_default}),onSuccess:B=>{l.invalidateQueries({queryKey:["bank-saved-views",t]}),d(!1),u(""),x(""),j(!1),b(!1),n({title:"View Saved",description:`Saved view "${B.name}" has been created.`}),r?.(B)},onError:()=>{n({title:"Save Failed",description:"Failed to save view. Please try again.",variant:"destructive"})}}),k=Ya({mutationFn:({viewId:B,updates:G})=>oN.update(B,{name:G.name,query_params:G.query_params||s,shared:G.shared,is_org_default:G.is_org_default}),onSuccess:()=>{l.invalidateQueries({queryKey:["bank-saved-views",t]}),n({title:"View Updated",description:"Saved view has been updated."})},onError:()=>{n({title:"Update Failed",description:"Failed to update view. Please try again.",variant:"destructive"})}}),E=Ya({mutationFn:B=>oN.delete(B),onSuccess:()=>{l.invalidateQueries({queryKey:["bank-saved-views",t]}),n({title:"View Deleted",description:"Saved view has been deleted."})},onError:()=>{n({title:"Delete Failed",description:"Failed to delete view. Please try again.",variant:"destructive"})}}),D=()=>{if(!c.trim()){n({title:"Name Required",description:"Please provide a name for this saved view.",variant:"destructive"});return}if(!i){n({title:"Authentication Required",description:"Please sign in to save views.",variant:"destructive"});return}A.mutate({name:c.trim(),description:h.trim()||void 0,shared:g,is_org_default:y})},R=B=>{B.query_params&&(a(B.query_params),n({title:"View Loaded",description:`Loaded view "${B.name}".`}))},O=(B,G)=>{confirm(`Delete saved view "${G}"?`)&&E.mutate(B)},P=B=>{const G=N9e({id:B.id,name:B.name,dashboard:"bank",section:t,filters:B.query_params||{},isShared:B.shared,createdBy:B.owner_id||"",createdAt:B.created_at,updatedAt:B.updated_at||B.created_at});navigator.clipboard.writeText(G),n({title:"Link Copied",description:"Deep link copied to clipboard."})},T=B=>{k.mutate({viewId:B.id,updates:{shared:!B.shared}})};return C?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ct,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Loading views..."})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[_.length>0&&e.jsxs(Te,{value:"",onValueChange:B=>{const G=_.find(q=>q.id===B);G&&R(G)},children:[e.jsx(Pe,{className:"w-[200px]",children:e.jsx(Fe,{placeholder:"Load Saved View"})}),e.jsx(De,{children:_.map(B=>e.jsx(K,{value:B.id,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:B.name}),B.is_org_default&&e.jsx(Q,{variant:"secondary",className:"ml-2 text-xs",children:"Default"}),e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,onClick:G=>G.stopPropagation(),children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",children:e.jsx(dp,{className:"h-3 w-3"})})}),e.jsxs(Zn,{align:"end",children:[e.jsx(bT,{children:"Actions"}),e.jsxs(is,{onClick:()=>R(B),children:[e.jsx(Rde,{className:"h-4 w-4 mr-2"}),"Load"]}),e.jsxs(is,{onClick:()=>P(B),children:[e.jsx(qa,{className:"h-4 w-4 mr-2"}),"Copy Link"]}),e.jsxs(is,{onClick:()=>T(B),children:[e.jsx(up,{className:"h-4 w-4 mr-2"}),B.shared?"Unshare":"Share"]}),e.jsx(Dc,{}),e.jsxs(is,{onClick:()=>O(B.id,B.name),className:"text-destructive",children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})]})},B.id))})]}),e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Zq,{className:"h-4 w-4 mr-2"}),"Save View"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Save Current View"}),e.jsx(_t,{children:"Save your current filters as a reusable view. You can share it with your team or keep it private."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"view-name",children:"View Name *"}),e.jsx(oe,{id:"view-name",value:c,onChange:B=>u(B.target.value),placeholder:"e.g., High Priority Discrepancies"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"view-description",children:"Description (Optional)"}),e.jsx(Zt,{id:"view-description",value:h,onChange:B=>x(B.target.value),placeholder:"Describe what this view shows...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is-shared",checked:g,onChange:B=>j(B.target.checked),className:"rounded"}),e.jsx(Z,{htmlFor:"is-shared",className:"cursor-pointer",children:"Share with team"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is-org-default",checked:y,onChange:B=>b(B.target.checked),className:"rounded"}),e.jsx(Z,{htmlFor:"is-org-default",className:"cursor-pointer",children:"Set as organization default"})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsxs(M,{onClick:D,disabled:A.isPending||!c.trim(),children:[A.isPending&&e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Save View"]})]})]})]})]})}var ese=["PageUp","PageDown"],tse=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],sse={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},ov="Slider",[KP,_9e,C9e]=Gg(ov),[ase,KJe]=Vr(ov,[C9e]),[S9e,EC]=ase(ov),rse=m.forwardRef((t,s)=>{const{name:a,min:r=0,max:n=100,step:i=1,orientation:l="horizontal",disabled:o=!1,minStepsBetweenThumbs:d=0,defaultValue:c=[r],value:u,onValueChange:h=()=>{},onValueCommit:x=()=>{},inverted:g=!1,form:j,...y}=t,b=m.useRef(new Set),N=m.useRef(0),_=l==="horizontal"?k9e:E9e,[A=[],k]=Hn({prop:u,defaultProp:c,onChange:T=>{[...b.current][N.current]?.focus(),h(T)}}),E=m.useRef(A);function D(T){const B=F9e(A,T);P(T,B)}function R(T){P(T,N.current)}function O(){const T=E.current[N.current];A[N.current]!==T&&x(A)}function P(T,B,{commit:G}={commit:!1}){const q=L9e(i),z=M9e(Math.round((T-r)/i)*i+r,q),H=dj(z,[r,n]);k((le=[])=>{const Y=D9e(le,H,B);if(I9e(Y,d*i)){N.current=Y.indexOf(H);const te=String(Y)!==String(le);return te&&G&&x(Y),te?Y:le}else return le})}return e.jsx(S9e,{scope:t.__scopeSlider,name:a,disabled:o,min:r,max:n,valueIndexToChangeRef:N,thumbs:b.current,values:A,orientation:l,form:j,children:e.jsx(KP.Provider,{scope:t.__scopeSlider,children:e.jsx(KP.Slot,{scope:t.__scopeSlider,children:e.jsx(_,{"aria-disabled":o,"data-disabled":o?"":void 0,...y,ref:s,onPointerDown:gt(y.onPointerDown,()=>{o||(E.current=A)}),min:r,max:n,inverted:g,onSlideStart:o?void 0:D,onSlideMove:o?void 0:R,onSlideEnd:o?void 0:O,onHomeKeyDown:()=>!o&&P(r,0,{commit:!0}),onEndKeyDown:()=>!o&&P(n,A.length-1,{commit:!0}),onStepKeyDown:({event:T,direction:B})=>{if(!o){const z=ese.includes(T.key)||T.shiftKey&&tse.includes(T.key)?10:1,H=N.current,le=A[H],Y=i*z*B;P(le+Y,H,{commit:!0})}}})})})})});rse.displayName=ov;var[nse,ise]=ase(ov,{startEdge:"left",endEdge:"right",size:"width",direction:1}),k9e=m.forwardRef((t,s)=>{const{min:a,max:r,dir:n,inverted:i,onSlideStart:l,onSlideMove:o,onSlideEnd:d,onStepKeyDown:c,...u}=t,[h,x]=m.useState(null),g=vs(s,_=>x(_)),j=m.useRef(void 0),y=Ru(n),b=y==="ltr",N=b&&!i||!b&&i;function C(_){const A=j.current||h.getBoundingClientRect(),k=[0,A.width],D=hR(k,N?[a,r]:[r,a]);return j.current=A,D(_-A.left)}return e.jsx(nse,{scope:t.__scopeSlider,startEdge:N?"left":"right",endEdge:N?"right":"left",direction:N?1:-1,size:"width",children:e.jsx(lse,{dir:y,"data-orientation":"horizontal",...u,ref:g,style:{...u.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:_=>{const A=C(_.clientX);l?.(A)},onSlideMove:_=>{const A=C(_.clientX);o?.(A)},onSlideEnd:()=>{j.current=void 0,d?.()},onStepKeyDown:_=>{const k=sse[N?"from-left":"from-right"].includes(_.key);c?.({event:_,direction:k?-1:1})}})})}),E9e=m.forwardRef((t,s)=>{const{min:a,max:r,inverted:n,onSlideStart:i,onSlideMove:l,onSlideEnd:o,onStepKeyDown:d,...c}=t,u=m.useRef(null),h=vs(s,u),x=m.useRef(void 0),g=!n;function j(y){const b=x.current||u.current.getBoundingClientRect(),N=[0,b.height],_=hR(N,g?[r,a]:[a,r]);return x.current=b,_(y-b.top)}return e.jsx(nse,{scope:t.__scopeSlider,startEdge:g?"bottom":"top",endEdge:g?"top":"bottom",size:"height",direction:g?1:-1,children:e.jsx(lse,{"data-orientation":"vertical",...c,ref:h,style:{...c.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:y=>{const b=j(y.clientY);i?.(b)},onSlideMove:y=>{const b=j(y.clientY);l?.(b)},onSlideEnd:()=>{x.current=void 0,o?.()},onStepKeyDown:y=>{const N=sse[g?"from-bottom":"from-top"].includes(y.key);d?.({event:y,direction:N?-1:1})}})})}),lse=m.forwardRef((t,s)=>{const{__scopeSlider:a,onSlideStart:r,onSlideMove:n,onSlideEnd:i,onHomeKeyDown:l,onEndKeyDown:o,onStepKeyDown:d,...c}=t,u=EC(ov,a);return e.jsx(Pt.span,{...c,ref:s,onKeyDown:gt(t.onKeyDown,h=>{h.key==="Home"?(l(h),h.preventDefault()):h.key==="End"?(o(h),h.preventDefault()):ese.concat(tse).includes(h.key)&&(d(h),h.preventDefault())}),onPointerDown:gt(t.onPointerDown,h=>{const x=h.target;x.setPointerCapture(h.pointerId),h.preventDefault(),u.thumbs.has(x)?x.focus():r(h)}),onPointerMove:gt(t.onPointerMove,h=>{h.target.hasPointerCapture(h.pointerId)&&n(h)}),onPointerUp:gt(t.onPointerUp,h=>{const x=h.target;x.hasPointerCapture(h.pointerId)&&(x.releasePointerCapture(h.pointerId),i(h))})})}),ose="SliderTrack",cse=m.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,n=EC(ose,a);return e.jsx(Pt.span,{"data-disabled":n.disabled?"":void 0,"data-orientation":n.orientation,...r,ref:s})});cse.displayName=ose;var YP="SliderRange",dse=m.forwardRef((t,s)=>{const{__scopeSlider:a,...r}=t,n=EC(YP,a),i=ise(YP,a),l=m.useRef(null),o=vs(s,l),d=n.values.length,c=n.values.map(x=>hse(x,n.min,n.max)),u=d>1?Math.min(...c):0,h=100-Math.max(...c);return e.jsx(Pt.span,{"data-orientation":n.orientation,"data-disabled":n.disabled?"":void 0,...r,ref:o,style:{...t.style,[i.startEdge]:u+"%",[i.endEdge]:h+"%"}})});dse.displayName=YP;var ZP="SliderThumb",use=m.forwardRef((t,s)=>{const a=_9e(t.__scopeSlider),[r,n]=m.useState(null),i=vs(s,o=>n(o)),l=m.useMemo(()=>r?a().findIndex(o=>o.ref.current===r):-1,[a,r]);return e.jsx(A9e,{...t,ref:i,index:l})}),A9e=m.forwardRef((t,s)=>{const{__scopeSlider:a,index:r,name:n,...i}=t,l=EC(ZP,a),o=ise(ZP,a),[d,c]=m.useState(null),u=vs(s,C=>c(C)),h=d?l.form||!!d.closest("form"):!0,x=Jj(d),g=l.values[r],j=g===void 0?0:hse(g,l.min,l.max),y=T9e(r,l.values.length),b=x?.[o.size],N=b?R9e(b,j,o.direction):0;return m.useEffect(()=>{if(d)return l.thumbs.add(d),()=>{l.thumbs.delete(d)}},[d,l.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${j}% + ${N}px)`},children:[e.jsx(KP.ItemSlot,{scope:t.__scopeSlider,children:e.jsx(Pt.span,{role:"slider","aria-label":t["aria-label"]||y,"aria-valuemin":l.min,"aria-valuenow":g,"aria-valuemax":l.max,"aria-orientation":l.orientation,"data-orientation":l.orientation,"data-disabled":l.disabled?"":void 0,tabIndex:l.disabled?void 0:0,...i,ref:u,style:g===void 0?{display:"none"}:t.style,onFocus:gt(t.onFocus,()=>{l.valueIndexToChangeRef.current=r})})}),h&&e.jsx(mse,{name:n??(l.name?l.name+(l.values.length>1?"[]":""):void 0),form:l.form,value:g},r)]})});use.displayName=ZP;var P9e="RadioBubbleInput",mse=m.forwardRef(({__scopeSlider:t,value:s,...a},r)=>{const n=m.useRef(null),i=vs(n,r),l=ab(s);return m.useEffect(()=>{const o=n.current;if(!o)return;const d=window.HTMLInputElement.prototype,u=Object.getOwnPropertyDescriptor(d,"value").set;if(l!==s&&u){const h=new Event("input",{bubbles:!0});u.call(o,s),o.dispatchEvent(h)}},[l,s]),e.jsx(Pt.input,{style:{display:"none"},...a,ref:i,defaultValue:s})});mse.displayName=P9e;function D9e(t=[],s,a){const r=[...t];return r[a]=s,r.sort((n,i)=>n-i)}function hse(t,s,a){const i=100/(a-s)*(t-s);return dj(i,[0,100])}function T9e(t,s){return s>2?`Value ${t+1} of ${s}`:s===2?["Minimum","Maximum"][t]:void 0}function F9e(t,s){if(t.length===1)return 0;const a=t.map(n=>Math.abs(n-s)),r=Math.min(...a);return a.indexOf(r)}function R9e(t,s,a){const r=t/2,i=hR([0,50],[0,r]);return(r-i(s)*a)*a}function O9e(t){return t.slice(0,-1).map((s,a)=>t[a+1]-s)}function I9e(t,s){if(s>0){const a=O9e(t);return Math.min(...a)>=s}return!0}function hR(t,s){return a=>{if(t[0]===t[1]||s[0]===s[1])return s[0];const r=(s[1]-s[0])/(t[1]-t[0]);return s[0]+r*(a-t[0])}}function L9e(t){return(String(t).split(".")[1]||"").length}function M9e(t,s){const a=Math.pow(10,s);return Math.round(t*a)/a}var xse=rse,B9e=cse,$9e=dse,U9e=use;function z9e(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const pse=m.forwardRef(({className:t,...s},a)=>e.jsxs(xse,{ref:a,className:z9e("relative flex w-full touch-none select-none items-center",t),...s,children:[e.jsx(B9e,{className:"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary",children:e.jsx($9e,{className:"absolute h-full bg-primary"})}),e.jsx(U9e,{className:"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50"})]}));pse.displayName=xse.displayName;function q9e(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const V9e=[{value:"date_mismatch",label:"Date Mismatch"},{value:"amount_mismatch",label:"Amount Mismatch"},{value:"party_mismatch",label:"Party Mismatch"},{value:"port_mismatch",label:"Port Mismatch"},{value:"missing_field",label:"Missing Field"},{value:"invalid_format",label:"Invalid Format"}],rA="bank-filter-presets";function W9e({filters:t,onFiltersChange:s}){const[a,r]=m.useState(t.min_score??0),[n,i]=m.useState(t.max_score??100),[l,o]=m.useState(t.discrepancy_type||"all"),[d,c]=m.useState([]),[u,h]=m.useState(""),[x,g]=m.useState(!1),[j,y]=m.useState(!1);m.useEffect(()=>{try{const E=localStorage.getItem(rA);E&&c(JSON.parse(E))}catch(E){console.error("Failed to load filter presets:",E)}},[]);const b=m.useRef(!0);m.useEffect(()=>{if(b.current){b.current=!1;return}const E={...t,min_score:a===0?void 0:a,max_score:n===100?void 0:n,discrepancy_type:l==="all"?void 0:l};Object.keys(E).forEach(D=>{E[D]===void 0&&delete E[D]}),s(E)},[a,n,l]);const N=()=>{if(!u.trim())return;const E={id:`preset-${Date.now()}`,name:u.trim(),filters:{...t,min_score:a===0?void 0:a,max_score:n===100?void 0:n,discrepancy_type:l==="all"?void 0:l},createdAt:new Date().toISOString()};Object.keys(E.filters).forEach(R=>{E.filters[R]===void 0&&delete E.filters[R]});const D=[...d,E];c(D),localStorage.setItem(rA,JSON.stringify(D)),h(""),g(!1)},C=E=>{r(E.filters.min_score??0),i(E.filters.max_score??100),o(E.filters.discrepancy_type||"all"),s(E.filters),y(!1)},_=(E,D)=>{D.stopPropagation();const R=d.filter(O=>O.id!==E);c(R),localStorage.setItem(rA,JSON.stringify(R))},A=()=>{r(0),i(100),o("all"),s({})},k=a>0||n<100||l!=="all";return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Nd,{className:"w-5 h-5"}),"Advanced Filters"]}),e.jsx(ue,{children:"Filter results by compliance score and discrepancy type"})]}),k&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:A,children:[e.jsx(fn,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Compliance Score Range"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"outline",children:[a,"%"]}),e.jsx("span",{className:"text-muted-foreground",children:"to"}),e.jsxs(Q,{variant:"outline",children:[n,"%"]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(pse,{value:[a,n],onValueChange:E=>{r(E[0]),i(E[1])},min:0,max:100,step:1,className:"w-full"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsx("span",{children:"0%"}),e.jsx("span",{children:"100%"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Discrepancy Type"}),e.jsxs(Te,{value:l,onValueChange:o,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All types"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Types"}),V9e.map(E=>e.jsx(K,{value:E.value,children:E.label},E.value))]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Saved Filter Presets"}),e.jsxs(Fb,{open:j,onOpenChange:y,children:[e.jsx(Rb,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Manage Presets",e.jsx(Jq,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),e.jsxs(lv,{className:"w-[300px] p-0",align:"end",children:[e.jsxs(j_,{children:[e.jsx(b_,{placeholder:"Search presets..."}),e.jsxs(y_,{children:[e.jsx(N_,{children:"No presets saved"}),e.jsx(uj,{children:d.map(E=>e.jsxs(zf,{value:E.name,onSelect:()=>C(E),className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Za,{className:q9e("h-4 w-4","opacity-0")}),e.jsx("span",{children:E.name})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:D=>_(E.id,D),className:"h-6 w-6 p-0",children:e.jsx(ia,{className:"h-3 w-3 text-destructive"})})]},E.id))})]})]}),e.jsx("div",{className:"border-t p-2",children:x?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{placeholder:"Preset name...",value:u,onChange:E=>h(E.target.value),onKeyDown:E=>{E.key==="Enter"?N():E.key==="Escape"&&(g(!1),h(""))},className:"flex-1",autoFocus:!0}),e.jsx(M,{size:"sm",onClick:N,children:"Save"}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{g(!1),h("")},children:"Cancel"})]}):e.jsxs(M,{variant:"outline",size:"sm",className:"w-full",onClick:()=>g(!0),children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save Current Filters as Preset"]})})]})]})]}),d.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:d.map(E=>e.jsx(Q,{variant:"secondary",className:"cursor-pointer hover:bg-secondary/80",onClick:()=>C(E),children:E.name},E.id))})]})]})]})}function H9e({resource:t,onFiltersChange:s,onExportCSV:a,onExportPDF:r,exportLoading:n=!1,showAdvancedFilters:i=!0}){const[l,o]=zs();zt();const[d,c]=m.useState(!1),u=l.get("q")||"",h=l.get("assignee")||"",x=l.get("queue")||"",g=l.get("status")||"all",j=l.get("client_name")||"",y=l.get("date_range")||"90",b=l.get("sort_by")||"completed_at",N=l.get("sort_order")||"desc",C=l.get("org")||null,_=l.get("advanced_filters"),A=m.useMemo(()=>{try{return _?JSON.parse(_):{}}catch{return{}}},[_]),k=m.useCallback(P=>{const T=new URLSearchParams(l);P.q!==void 0&&(P.q?T.set("q",P.q):T.delete("q")),P.assignee!==void 0&&(P.assignee?T.set("assignee",P.assignee):T.delete("assignee")),P.queue!==void 0&&(P.queue?T.set("queue",P.queue):T.delete("queue")),P.status!==void 0&&(P.status&&P.status!=="all"?T.set("status",P.status):T.delete("status")),P.client_name!==void 0&&(P.client_name?T.set("client_name",P.client_name):T.delete("client_name")),P.sort_by!==void 0&&T.set("sort_by",P.sort_by),P.sort_order!==void 0&&T.set("sort_order",P.sort_order),P.advancedFilters&&T.set("advanced_filters",JSON.stringify(P.advancedFilters)),o(T,{replace:!0}),s?.(P)},[l,o,s]),E=m.useMemo(()=>({q:u,assignee:h,queue:x,status:g,client_name:j,date_range:y,sort_by:b,sort_order:N,org:C,advancedFilters:A}),[u,h,x,g,j,y,b,N,C,A]),D=m.useCallback(P=>{const T={};if(P.q!==void 0&&(T.q=P.q),P.assignee!==void 0&&(T.assignee=P.assignee),P.queue!==void 0&&(T.queue=P.queue),P.status!==void 0&&(T.status=P.status),P.client_name!==void 0&&(T.client_name=P.client_name),P.date_range!==void 0){const B=new URLSearchParams(l);B.set("date_range",P.date_range),o(B,{replace:!0})}P.sort_by!==void 0&&(T.sort_by=P.sort_by),P.sort_order!==void 0&&(T.sort_order=P.sort_order),P.advancedFilters!==void 0&&(T.advancedFilters=P.advancedFilters),k(T)},[l,o,k]),R=()=>{o({},{replace:!0}),k({q:"",assignee:"",queue:"",status:"all",client_name:"",sort_by:"completed_at",sort_order:"desc",advancedFilters:{}})},O=u||h||x||g!=="all"||j||Object.keys(A).length>0;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-wrap items-end gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-[200px]",children:[e.jsx(Z,{htmlFor:"search",children:"Search"}),e.jsx(oe,{id:"search",placeholder:"Search LC numbers, clients...",value:u,onChange:P=>k({q:P.target.value})})]}),t==="results"&&e.jsxs("div",{className:"w-[150px]",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:g,onValueChange:P=>k({status:P}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"compliant",children:"Compliant"}),e.jsx(K,{value:"discrepancies",children:"With Discrepancies"}),e.jsx(K,{value:"failed",children:"Failed"})]})]})]}),e.jsxs("div",{className:"w-[200px]",children:[e.jsx(Z,{children:"Client Name"}),e.jsx(oe,{placeholder:"Filter by client...",value:j,onChange:P=>k({client_name:P.target.value})})]}),t==="jobs"&&e.jsxs("div",{className:"w-[150px]",children:[e.jsx(Z,{children:"Assignee"}),e.jsx(oe,{placeholder:"Filter by assignee...",value:h,onChange:P=>k({assignee:P.target.value})})]}),t==="jobs"&&e.jsxs("div",{className:"w-[150px]",children:[e.jsx(Z,{children:"Queue"}),e.jsxs(Te,{value:x||"all",onValueChange:P=>k({queue:P==="all"?"":P}),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Queues"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Queues"}),e.jsx(K,{value:"high_priority",children:"High Priority"}),e.jsx(K,{value:"normal",children:"Normal"}),e.jsx(K,{value:"low_priority",children:"Low Priority"})]})]})]}),e.jsxs("div",{className:"w-[150px]",children:[e.jsx(Z,{children:"Date Range"}),e.jsxs(Te,{value:y,onValueChange:P=>{const T=new URLSearchParams(l);T.set("date_range",P),o(T,{replace:!0})},children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"7",children:"Last 7 days"}),e.jsx(K,{value:"30",children:"Last 30 days"}),e.jsx(K,{value:"90",children:"Last 90 days"}),e.jsx(K,{value:"180",children:"Last 180 days"}),e.jsx(K,{value:"365",children:"Last year"})]})]})]}),e.jsxs("div",{className:"w-[150px]",children:[e.jsx(Z,{children:"Sort By"}),e.jsxs(Te,{value:b,onValueChange:P=>k({sort_by:P}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"completed_at",children:"Date"}),e.jsx(K,{value:"compliance_score",children:"Score"}),e.jsx(K,{value:"discrepancy_count",children:"Discrepancies"}),e.jsx(K,{value:"client_name",children:"Client"})]})]})]}),e.jsxs("div",{className:"w-[100px]",children:[e.jsx(Z,{children:"Order"}),e.jsxs(Te,{value:N,onValueChange:P=>k({sort_order:P}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"desc",children:"Desc"}),e.jsx(K,{value:"asc",children:"Asc"})]})]})]}),e.jsxs("div",{className:"flex items-end gap-2",children:[e.jsx(w9e,{resource:t,currentFilters:E,onLoadView:D}),O&&e.jsxs(M,{variant:"outline",size:"sm",onClick:R,children:[e.jsx(fn,{className:"h-4 w-4 mr-2"}),"Clear"]}),a&&e.jsxs(M,{variant:"outline",size:"sm",onClick:a,disabled:n,children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"CSV"]}),r&&e.jsxs(M,{variant:"outline",size:"sm",onClick:r,disabled:n,children:[e.jsx(Be,{className:"h-4 w-4 mr-2"}),"PDF"]})]})]}),i&&e.jsxs(xh,{open:d,onOpenChange:c,children:[e.jsx(tp,{asChild:!0,children:e.jsx(M,{variant:"outline",className:"w-full",children:d?e.jsxs(e.Fragment,{children:[e.jsx(yh,{className:"w-4 h-4 mr-2"}),"Hide Advanced Filters"]}):e.jsxs(e.Fragment,{children:[e.jsx(ja,{className:"w-4 h-4 mr-2"}),"Show Advanced Filters"]})})}),e.jsx(ph,{className:"mt-4",children:e.jsx(W9e,{filters:A,onFiltersChange:P=>k({advancedFilters:P})})})]})]})}function G9e({jobId:t,onComplete:s,onError:a,onClear:r}){const{toast:n}=et(),{data:i,isLoading:l}=Ks({queryKey:["export-job",t],queryFn:()=>mn.getExportJobStatus(t),enabled:!!t,refetchInterval:c=>{const u=c.state.data;return u?.status==="COMPLETED"||u?.status==="FAILED"?!1:2e3}});if(m.useEffect(()=>{i?.status==="COMPLETED"&&i.download_url?(n({title:"Export Ready",description:"Your export is ready for download."}),s?.(i.download_url)):i?.status==="FAILED"&&(n({title:"Export Failed",description:i.error||"Failed to generate export. Please try again.",variant:"destructive"}),a?.())},[i,n,s,a]),!t)return null;const o=i?.status||"PENDING",d=i?.progress||0;return e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-sm font-medium",children:[o==="PENDING"&&"Preparing export...",o==="PROCESSING"&&"Generating export...",o==="COMPLETED"&&"Export ready!",o==="FAILED"&&"Export failed"]}),o==="COMPLETED"&&e.jsx(Qs,{className:"h-4 w-4 text-green-500"}),o==="FAILED"&&e.jsx(bs,{className:"h-4 w-4 text-red-500"}),(o==="PENDING"||o==="PROCESSING")&&e.jsx(ct,{className:"h-4 w-4 animate-spin"})]}),(o==="PENDING"||o==="PROCESSING")&&e.jsx(es,{value:d,className:"h-2"}),i?.total_rows&&e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Processing ",i.total_rows.toLocaleString()," rows..."]})]}),o==="COMPLETED"&&i?.download_url&&e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{size:"sm",onClick:()=>{window.open(i.download_url,"_blank")},children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Download"]}),r&&e.jsx(M,{size:"sm",variant:"outline",onClick:r,children:"Close"})]}),o==="FAILED"&&r&&e.jsx(M,{size:"sm",variant:"outline",onClick:r,children:"Close"})]})}function K9e({count:t,onClick:s,className:a}){return t===0?null:e.jsxs(Q,{variant:"outline",className:`text-[10px] h-4 px-1 cursor-pointer hover:bg-muted ${a||""}`,title:`This LC has been validated ${t} time(s) before`,onClick:s,children:[e.jsx(qa,{className:"w-2.5 h-2.5 mr-0.5"}),t,"x"]})}function Y9e({sessionId:t,open:s,onOpenChange:a,onMerge:r}){et();const n=zt(),{data:i,isLoading:l,error:o}=Ks({queryKey:["duplicate-candidates",t],queryFn:()=>yT.getCandidates(t,.7,10),enabled:s&&!!t}),d=x=>{n(`/lcopilot/bank-dashboard/results/${x}`),a(!1)},c=x=>{r&&r(x)},u=x=>x>=.85?"text-red-600":x>=.7?"text-orange-600":"text-yellow-600",h=x=>x>=.85?"destructive":x>=.7?"default":"secondary";return e.jsx(wt,{open:s,onOpenChange:a,children:e.jsxs(yt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Duplicate Candidates"}),e.jsx(_t,{children:"Sessions with similar LC data. Higher similarity scores indicate likely duplicates."})]}),l&&e.jsxs("div",{className:"flex items-center justify-center py-12",children:[e.jsx(ct,{className:"h-8 w-8 animate-spin text-muted-foreground"}),e.jsx("span",{className:"ml-2 text-muted-foreground",children:"Loading candidates..."})]}),o&&e.jsxs("div",{className:"flex items-center gap-2 p-4 bg-destructive/10 text-destructive rounded-lg",children:[e.jsx(ks,{className:"h-5 w-5"}),e.jsx("span",{children:"Failed to load duplicate candidates. Please try again."})]}),i&&i.candidates.length===0&&e.jsxs("div",{className:"text-center py-12 text-muted-foreground",children:[e.jsx(qa,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No duplicate candidates found."}),e.jsx("p",{className:"text-sm mt-2",children:"This LC appears to be unique."})]}),i&&i.candidates.length>0&&e.jsx("div",{className:"space-y-4",children:i.candidates.map(x=>x?e.jsxs("div",{className:"border rounded-lg p-4 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h4",{className:"font-semibold",children:x.lc_number||"N/A"}),x.client_name&&e.jsx("span",{className:"text-sm text-muted-foreground",children:x.client_name})]}),x.completed_at&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Completed: ",hs(new Date(x.completed_at),"MMM dd, yyyy HH:mm")]})]}),e.jsxs(Q,{variant:h(x.similarity_score),className:"ml-2",children:[(x.similarity_score*100).toFixed(0),"% match"]})]}),e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Overall Similarity"}),e.jsxs("span",{className:u(x.similarity_score),children:[(x.similarity_score*100).toFixed(1),"%"]})]}),e.jsx(es,{value:x.similarity_score*100,className:"h-2"})]}),(x.content_similarity||x.metadata_similarity)&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-3 text-xs",children:[x.content_similarity!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Content: "}),e.jsxs("span",{className:"font-medium",children:[(x.content_similarity*100).toFixed(0),"%"]})]}),x.metadata_similarity!==void 0&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Metadata: "}),e.jsxs("span",{className:"font-medium",children:[(x.metadata_similarity*100).toFixed(0),"%"]})]})]}),x.field_matches&&Object.keys(x.field_matches).length>0&&e.jsxs("div",{className:"mb-3",children:[e.jsx("p",{className:"text-xs font-medium mb-1",children:"Matching Fields:"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[Object.entries(x.field_matches).filter(([g,j])=>j.score>.8).slice(0,5).map(([g])=>e.jsx(Q,{variant:"outline",className:"text-xs",children:g.replace(/_/g," ")},g)),Object.keys(x.field_matches).length>5&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",Object.keys(x.field_matches).length-5," more"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 pt-2 border-t",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>d(x.session_id),children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),"View Session"]}),e.jsxs(M,{variant:"default",size:"sm",onClick:()=>c(x),children:[e.jsx(hue,{className:"h-4 w-4 mr-2"}),"Merge"]})]})]},x.session_id):null)})]})})}function Z9e({sourceSessionId:t,candidate:s,open:a,onOpenChange:r,onSuccess:n}){const{toast:i}=et(),l=Yn(),[o,d]=m.useState("duplicate"),[c,u]=m.useState(""),[h,x]=m.useState(new Set(["extracted_data","validation_results","documents"]));if(!s)return null;const g=Ya({mutationFn:b=>yT.merge(b),onSuccess:()=>{i({title:"Sessions Merged",description:`Successfully merged session ${s.session_id} into ${t}.`}),l.invalidateQueries({queryKey:["duplicate-candidates",t]}),l.invalidateQueries({queryKey:["bank-results"]}),l.invalidateQueries({queryKey:["merge-history",t]}),l.invalidateQueries({queryKey:["merge-history",s.session_id]}),r(!1),n?.()},onError:b=>{i({title:"Merge Failed",description:b.message||"Failed to merge sessions. Please try again.",variant:"destructive"})}}),j=()=>{const b={source_session_id:s.session_id,target_session_id:t,merge_type:o,merge_reason:c||void 0,fields_to_merge:h.size>0?Array.from(h):void 0};g.mutate(b)},y=b=>{const N=new Set(h);N.has(b)?N.delete(b):N.add(b),x(N)};return e.jsx(wt,{open:a,onOpenChange:r,children:e.jsxs(yt,{className:"max-w-2xl",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Merge Sessions"}),e.jsxs(_t,{children:["Merge session ",e.jsx("strong",{children:s?.lc_number||"N/A"})," into the current session. This will combine data from both sessions."]})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"merge-type",children:"Merge Type"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{id:"merge-type",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"duplicate",children:"Duplicate"}),e.jsx(K,{value:"amendment",children:"Amendment"}),e.jsx(K,{value:"correction",children:"Correction"}),e.jsx(K,{value:"manual",children:"Manual"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"merge-reason",children:"Reason (Optional)"}),e.jsx(Zt,{id:"merge-reason",placeholder:"Explain why these sessions should be merged...",value:c,onChange:b=>u(b.target.value),rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Fields to Merge"}),e.jsx("div",{className:"space-y-2 border rounded-lg p-4",children:[{id:"extracted_data",label:"Extracted Data",description:"LC metadata and extracted fields"},{id:"validation_results",label:"Validation Results",description:"Discrepancies and compliance scores"},{id:"documents",label:"Documents",description:"Uploaded documents and files"}].map(b=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rr,{id:b.id,checked:h.has(b.id),onCheckedChange:()=>y(b.id)}),e.jsxs("div",{className:"flex-1",children:[e.jsx(Z,{htmlFor:b.id,className:"font-medium cursor-pointer",children:b.label}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.description})]})]},b.id))})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg",children:[e.jsx(Ve,{className:"h-5 w-5 text-yellow-600 dark:text-yellow-400 mt-0.5"}),e.jsxs("div",{className:"flex-1 text-sm",children:[e.jsx("p",{className:"font-medium text-yellow-800 dark:text-yellow-200 mb-1",children:"Merge Warning"}),e.jsx("p",{className:"text-yellow-700 dark:text-yellow-300",children:"Merging sessions will create a permanent record in the merge history. The source session data will be preserved but marked as merged."})]})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsxs("p",{children:["Similarity Score: ",e.jsxs("strong",{children:[(s.similarity_score*100).toFixed(1),"%"]})]}),s.content_similarity&&e.jsxs("p",{children:["Content Similarity: ",e.jsxs("strong",{children:[(s.content_similarity*100).toFixed(1),"%"]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>r(!1),children:"Cancel"}),e.jsxs(M,{onClick:j,disabled:g.isPending||h.size===0,children:[g.isPending&&e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Merge Sessions"]})]})]})})}function fse({}){const[t]=zs(),s=zt(),{toast:a}=et(),r=Yn(),[n,i]=m.useState(null),[l,o]=m.useState(),[d,c]=m.useState(),[u,h]=m.useState(new Set),[x,g]=m.useState(null),[j,y]=m.useState(!1),[b,N]=m.useState(null),[C,_]=m.useState(null),A=t.get("q")||"",k=t.get("assignee")||"",E=t.get("queue")||"",D=t.get("status")||"all",R=t.get("client_name")||"",O=t.get("date_range")||"90",P=t.get("sort_by")||"completed_at",T=t.get("sort_order")||"desc",B=t.get("advanced_filters"),G=m.useMemo(()=>{try{return B?JSON.parse(B):{}}catch{return{}}},[B]),z={...(()=>{const ce=new Date,Re=new Date;return Re.setDate(Re.getDate()-parseInt(O)),{start_date:Re.toISOString(),end_date:ce.toISOString()}})(),q:A||void 0,assignee:k||void 0,queue:E||void 0,client_name:R||void 0,status:D!=="all"?D:void 0,sort_by:P,sort_order:T,...G,limit:500,offset:0},{data:H,isLoading:le}=Ks({queryKey:["bank-results",z],queryFn:()=>mn.getResults(z),refetchInterval:1e4}),Y=H?.results||[],te=u.size>0?Y.filter(ce=>u.has(ce.jobId)):Y,ne=ce=>{h(ce?new Set(Y.map(Re=>Re.jobId)):new Set)},ae=(ce,Re)=>{const ie=new Set(u);Re?ie.add(ce):ie.delete(ce),h(ie)};m.useEffect(()=>{h(new Set)},[A,k,E,D,R,O,G]);const re=ce=>{switch(ce){case"compliant":return e.jsx(Q,{variant:"default",className:"bg-green-500",children:"Compliant"});case"discrepancies":return e.jsx(Q,{variant:"default",className:"bg-yellow-500",children:"Discrepancies"});case"failed":return e.jsx(Q,{variant:"destructive",children:"Failed"});default:return e.jsx(Q,{variant:"secondary",children:ce})}},xe=async()=>{try{y(!0);const ce={...z,limit:void 0,offset:void 0};u.size>0&&(ce.job_ids=Array.from(u).join(","));const Re=await mn.exportResultsCSV(ce);if(typeof Re=="object"&&"job_id"in Re)g(Re.job_id),a({title:"Export Started",description:`Exporting ${Re.total_rows.toLocaleString()} rows. This may take a moment...`});else{const ie=Re,Ne=URL.createObjectURL(ie),Ue=document.createElement("a");Ue.href=Ne;const ge=u.size>0?`-selected-${u.size}`:"";Ue.download=`bank-lc-results${ge}-${hs(new Date,"yyyy-MM-dd")}.csv`,Ue.click(),URL.revokeObjectURL(Ne),a({title:"Export Complete",description:"CSV file downloaded successfully."})}}catch(ce){console.error("Failed to export CSV:",ce),a({title:"Export Failed",description:ce.message||"Failed to export CSV. Please try again.",variant:"destructive"})}finally{y(!1)}},ye=async()=>{try{y(!0);const ce={...z,limit:void 0,offset:void 0};u.size>0&&(ce.job_ids=Array.from(u).join(","));const Re=await mn.exportResultsPDF(ce);if(typeof Re=="object"&&"job_id"in Re)g(Re.job_id),a({title:"Export Started",description:`Exporting ${Re.total_rows.toLocaleString()} rows. This may take a moment...`});else{const ie=Re,Ne=URL.createObjectURL(ie),Ue=document.createElement("a");Ue.href=Ne;const ge=u.size>0?`-selected-${u.size}`:"";Ue.download=`bank-lc-results${ge}-${hs(new Date,"yyyy-MM-dd")}.pdf`,Ue.click(),URL.revokeObjectURL(Ne),a({title:"Export Complete",description:"PDF file downloaded successfully."})}}catch(ce){console.error("Failed to export PDF:",ce),a({title:"Export Failed",description:ce.message||"Failed to export PDF. Please try again.",variant:"destructive"})}finally{y(!1)}},ke=ce=>{ce&&(i(ce.jobId),o(ce.client_name),c(ce.lc_number||void 0))},ze=async ce=>{try{const{getReportDownloadUrl:Re}=await ll(async()=>{const{getReportDownloadUrl:Ne}=await Promise.resolve().then(()=>YD);return{getReportDownloadUrl:Ne}},void 0),ie=await Re(ce.jobId);window.open(ie.download_url,"_blank")}catch(Re){console.error("Failed to download report:",Re),alert("Failed to download report. Please try again.")}};return e.jsxs("div",{children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Validation Results"}),e.jsx(ue,{children:le?"Loading...":`${Y.length} result(s)`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u.size>0&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsxs("span",{children:[u.size," selected"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h(new Set),children:"Clear"})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:xe,disabled:te.length===0,children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Export CSV ",u.size>0?`(${u.size})`:""]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:ye,disabled:te.length===0,children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Export PDF ",u.size>0?`(${u.size})`:""]})]})]})}),e.jsxs(U,{children:[e.jsx("div",{className:"mb-6",children:e.jsx(H9e,{resource:"results",onFiltersChange:ce=>{},onExportCSV:xe,onExportPDF:ye,exportLoading:j})}),x&&e.jsx("div",{className:"mb-4",children:e.jsx(G9e,{jobId:x,onComplete:ce=>{window.open(ce,"_blank"),g(null)},onError:()=>{g(null)},onClear:()=>{g(null)}})}),le?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading results..."})]}):Y.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No results found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Try adjusting your filters or upload more LCs"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{dense:!0,sticky:!0,children:[e.jsx(xa,{sticky:!0,children:e.jsxs(At,{dense:!0,children:[e.jsx(je,{dense:!0,className:"w-12",children:e.jsx(rr,{checked:Y.length>0&&u.size===Y.length,onCheckedChange:ne,"aria-label":"Select all"})}),e.jsx(je,{dense:!0,children:"LC Number"}),e.jsx(je,{dense:!0,children:"Client Name"}),e.jsx(je,{dense:!0,children:"Date"}),e.jsx(je,{dense:!0,children:"Status"}),e.jsx(je,{dense:!0,numeric:!0,children:"Score"}),e.jsx(je,{dense:!0,numeric:!0,children:"Discrepancies"}),e.jsx(je,{dense:!0,numeric:!0,children:"Documents"}),e.jsx(je,{dense:!0,className:"text-right",children:"Actions"})]})}),e.jsx(oa,{zebra:!0,children:Y.map(ce=>{if(!ce)return null;const Re=ce.completed_at?new Date(ce.completed_at):new Date,ie=no(ce.client_name,"Unknown"),Ne=no(ce.lc_number||"","N/A"),Ue=u.has(ce.jobId);return e.jsxs(At,{dense:!0,className:Ue?"bg-muted/50":"",children:[e.jsx(fe,{dense:!0,children:e.jsx(rr,{checked:Ue,onCheckedChange:ge=>ae(ce.jobId,ge===!0),"aria-label":`Select ${Ne}`})}),e.jsx(fe,{dense:!0,className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[Ne,ce.duplicate_count&&ce.duplicate_count>0&&e.jsx(K9e,{count:ce.duplicate_count,onClick:()=>N(ce.jobId)})]})}),e.jsx(fe,{dense:!0,children:e.jsx("button",{onClick:()=>s(`/lcopilot/bank-dashboard/client/${encodeURIComponent(ie)}`),className:"text-primary hover:underline font-medium",children:ie})}),e.jsx(fe,{dense:!0,children:hs(Re,"MMM dd, HH:mm")}),e.jsx(fe,{dense:!0,children:re(ce.status)}),e.jsxs(fe,{dense:!0,numeric:!0,children:[ce.compliance_score,"%"]}),e.jsx(fe,{dense:!0,numeric:!0,children:ce.discrepancy_count}),e.jsx(fe,{dense:!0,numeric:!0,children:ce.document_count}),e.jsx(fe,{dense:!0,className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[ce.invoiceId&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>s(`/lcopilot/bank-dashboard?tab=billing-invoices&invoice=${ce.invoiceId}`),title:"View Invoice",children:e.jsx(Fu,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>ke(ce),title:"View Details",children:e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>ze(ce),title:"Download PDF Report",children:e.jsx(Gt,{className:"w-4 h-4"})})]})})]},ce.id)})})]})})]})]}),e.jsx(mR,{jobId:n,open:!!n,onOpenChange:ce=>{ce||(i(null),o(void 0),c(void 0))},clientName:l,lcNumber:d}),e.jsx(Y9e,{sessionId:b||"",open:!!b,onOpenChange:ce=>{ce||N(null)},onMerge:ce=>{N(null),_(ce)}}),e.jsx(Z9e,{sourceSessionId:b||"",candidate:C||null,open:!!C,onOpenChange:ce=>{ce||(_(null),N(null))},onSuccess:()=>{r.invalidateQueries({queryKey:["bank-results"]})}})]})}function gse(){const t=zt(),[s,a]=m.useState({todayCount:0,avgScore:0,totalDiscrepancies:0,processingTime:"0m"}),{data:r}=NC(),{data:n}=Ab({status:Gf.PENDING,limit:1}),i=n?.invoices&&n.invoices.length>0,l=r&&r.quota_limit?Math.min(100,r.quota_used/r.quota_limit*100):0,{data:o}=Ks({queryKey:["bank-stats"],queryFn:()=>{const d=new Date,c=new Date(d);return c.setHours(0,0,0,0),mn.getResults({start_date:c.toISOString(),end_date:d.toISOString(),limit:1e3})},refetchInterval:3e4});return m.useEffect(()=>{if(o?.results){const d=o.results,c=d.length>0?Math.round(d.reduce((h,x)=>h+x.compliance_score,0)/d.length):0,u=d.reduce((h,x)=>h+x.discrepancy_count,0);a({todayCount:d.length,avgScore:c,totalDiscrepancies:u,processingTime:"2.3m"})}},[o]),e.jsxs("div",{className:"space-y-4",children:[(r||i)&&e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-2",children:[r&&e.jsx($,{className:"overflow-hidden",children:e.jsx(U,{className:"p-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Usage Quota"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:[r.quota_used.toLocaleString()," / ",r.quota_limit?.toLocaleString()??"âˆž"]}),e.jsx(es,{value:l,className:"h-2"})]})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-blue-500/10",children:e.jsx(Vt,{className:"h-6 w-6 text-blue-500"})})]})})}),i&&e.jsx($,{className:"overflow-hidden border-yellow-500/20",children:e.jsxs(U,{className:"p-6 pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Pending Invoice"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:n?.invoices.length||0}),e.jsx(Q,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Action Required"})]})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-yellow-500/10",children:e.jsx(pn,{className:"h-6 w-6 text-yellow-500"})})]}),e.jsx("button",{onClick:()=>t("/lcopilot/bank-dashboard?tab=billing-invoices"),className:"mt-3 text-sm text-primary hover:underline w-full text-left",children:"View invoices â†’"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx($,{className:"overflow-hidden",children:e.jsx(U,{className:"p-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Today's Validations"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:s.todayCount})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-primary/10",children:e.jsx(Be,{className:"h-6 w-6 text-primary"})})]})})}),e.jsx($,{className:"overflow-hidden",children:e.jsx(U,{className:"p-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Average Score"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:[s.avgScore,"%"]})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-green-500/10",children:e.jsx(Vt,{className:"h-6 w-6 text-green-500"})})]})})}),e.jsx($,{className:"overflow-hidden",children:e.jsx(U,{className:"p-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Total Discrepancies"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:s.totalDiscrepancies})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-yellow-500/10",children:e.jsx(Ve,{className:"h-6 w-6 text-yellow-500"})})]})})}),e.jsx($,{className:"overflow-hidden",children:e.jsx(U,{className:"p-6 pt-6",children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Avg Processing Time"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:s.processingTime})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-blue-500/10",children:e.jsx(Oe,{className:"h-6 w-6 text-blue-500"})})]})})})]})]})}function J9e({clientName:t,clientStats:s}){const{data:a,isLoading:r}=Ks({queryKey:["client-dashboard-detail",t],queryFn:()=>{const b=new Date,N=new Date;return N.setDate(N.getDate()-90),mn.getClientDashboard(t,{start_date:N.toISOString(),end_date:b.toISOString()})},enabled:!!t,staleTime:6e4});if(r)return e.jsx("div",{className:"p-4 border-t bg-muted/30",children:e.jsx("div",{className:"text-center py-4 text-muted-foreground",children:"Loading client details..."})});const n=a?.trend_data||[],i=a?.lc_results||[],l=n.slice(-30),o=n.slice(-60,-30),d=l.length>0?l.reduce((b,N)=>b+N.avg_compliance_score,0)/l.length:0,c=o.length>0?o.reduce((b,N)=>b+N.avg_compliance_score,0)/o.length:0,u=d-c,h=c>0?(u/c*100).toFixed(1):"0.0",x=new Date;x.setDate(x.getDate()-7);const g=i.filter(b=>{const N=b.completed_at?new Date(b.completed_at):null;return N&&N>=x&&b.discrepancy_count>0}).slice(0,5),j={};i.forEach(b=>{const N=b.lc_number||"Unknown";j[N]||(j[N]=[]),j[N].push(b)});const y=Object.entries(j).filter(([b,N])=>N.length>1).map(([b,N])=>({lc_number:b,count:N.length,results:N.sort((C,_)=>{const A=C.completed_at?new Date(C.completed_at).getTime():0;return(_.completed_at?new Date(_.completed_at).getTime():0)-A})})).sort((b,N)=>N.count-b.count).slice(0,10);return e.jsx("div",{className:"p-4 border-t bg-muted/30",children:e.jsxs(Os,{defaultValue:"kpis",className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-4",children:[e.jsx(He,{value:"kpis",children:"KPIs & Trends"}),e.jsx(He,{value:"issues",children:"Recent Issues"}),e.jsx(He,{value:"duplicates",children:"Duplicates"}),e.jsx(He,{value:"activity",children:"Activity"})]}),e.jsxs(Qe,{value:"kpis",className:"mt-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium",children:"Compliance Trend"})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.compliance_rate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs text-muted-foreground mt-1",children:[u>=0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"w-3 h-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",h,"%"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"w-3 h-3 text-red-600"}),e.jsxs("span",{className:"text-red-600",children:[h,"%"]})]}),e.jsx("span",{children:"vs previous period"})]})]}),e.jsx(Wn,{className:"w-8 h-8 text-muted-foreground"})]})})]}),e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium",children:"Average Score"})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.average_compliance_score.toFixed(1),"%"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:["Across ",s.total_validations," validations"]})]}),e.jsx(Ws,{className:"w-8 h-8 text-muted-foreground"})]})})]}),e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium",children:"Discrepancy Rate"})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[s.total_validations>0?(s.discrepancies_count/s.total_validations*100).toFixed(1):"0.0","%"]}),e.jsxs("div",{className:"text-xs text-muted-foreground mt-1",children:[s.discrepancies_count," of ",s.total_validations," LCs"]})]}),e.jsx(ks,{className:"w-8 h-8 text-muted-foreground"})]})})]})]}),n.length>0&&e.jsxs($,{className:"mt-4",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm",children:"Compliance Trend (Last 90 Days)"}),e.jsx(ue,{children:"Average compliance score over time"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"h-32 flex items-end gap-1",children:n.slice(-30).map((b,N)=>{const C=b.avg_compliance_score/100*100;return e.jsx("div",{className:"flex-1 bg-primary/20 rounded-t hover:bg-primary/40 transition-colors",style:{height:`${C}%`},title:`${hs(new Date(b.date),"MMM d")}: ${b.avg_compliance_score.toFixed(1)}%`},N)})}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-2",children:[e.jsx("span",{children:hs(new Date(n[Math.max(0,n.length-30)].date),"MMM d")}),e.jsx("span",{children:hs(new Date(n[n.length-1].date),"MMM d")})]})]})]})]}),e.jsx(Qe,{value:"issues",className:"mt-4",children:g.length===0?e.jsx($,{children:e.jsxs(U,{className:"py-8 text-center",children:[e.jsx(Oe,{className:"w-12 h-12 mx-auto text-green-600 mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No recent issues in the last 7 days"})]})}):e.jsx("div",{className:"space-y-2",children:g.map(b=>e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:b.discrepancy_count>5?"destructive":"secondary",children:[b.discrepancy_count," ",b.discrepancy_count===1?"issue":"issues"]}),e.jsx("span",{className:"font-medium",children:no(b.lc_number||"N/A")})]}),e.jsx("div",{className:"text-sm text-muted-foreground mt-1",children:b.completed_at?hs(new Date(b.completed_at),"MMM d, yyyy 'at' HH:mm"):"Date unknown"})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-sm font-medium",children:[b.compliance_score,"%"]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Compliance"})]})]})})},b.id))})}),e.jsx(Qe,{value:"duplicates",className:"mt-4",children:y.length===0?e.jsx($,{children:e.jsxs(U,{className:"py-8 text-center",children:[e.jsx(qa,{className:"w-12 h-12 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-muted-foreground",children:"No duplicate LCs found"})]})}):e.jsx("div",{className:"space-y-2",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm",children:"Duplicate LC Heatmap"}),e.jsxs(ue,{children:["LCs validated multiple times (showing top ",y.length,")"]})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:y.map(b=>e.jsxs("div",{className:"border rounded-lg p-3",children:[e.jsx("div",{className:"flex items-center justify-between mb-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(qa,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium",children:no(b.lc_number)}),e.jsxs(Q,{variant:"outline",children:[b.count,"x"]})]})}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 text-xs",children:b.results.map((N,C)=>e.jsxs("div",{className:`p-2 rounded border ${N.discrepancy_count>0?"bg-yellow-50 border-yellow-200":"bg-green-50 border-green-200"}`,children:[e.jsx("div",{className:"font-medium",children:N.completed_at?hs(new Date(N.completed_at),"MMM d"):"Unknown"}),e.jsxs("div",{className:"text-muted-foreground",children:[N.compliance_score,"% â€¢ ",N.discrepancy_count," issues"]})]},N.id))})]},b.lc_number))})})]})})}),e.jsx(Qe,{value:"activity",className:"mt-4",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm",children:"Recent Activity"}),e.jsx(ue,{children:"Last 10 validations"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-2",children:i.slice(0,10).map(b=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:no(b.lc_number||"N/A")}),e.jsx("div",{className:"text-xs text-muted-foreground",children:b.completed_at?hs(new Date(b.completed_at),"MMM d, yyyy 'at' HH:mm"):"Date unknown"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:b.status==="compliant"?"default":b.status==="discrepancies"?"secondary":"destructive",children:b.status}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("div",{className:"font-medium",children:[b.compliance_score,"%"]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:[b.discrepancy_count," issues"]})]})]})]},b.id))})})]})})]})})}function vse({}){const[t,s]=m.useState(""),[a,r]=m.useState(1),[n,i]=m.useState(new Set),l=20;et();const o=zt(),d=_=>{i(A=>{const k=new Set(A);return k.has(_)?k.delete(_):k.add(_),k})},{data:c,isLoading:u,error:h,refetch:x}=Ks({queryKey:["bank-client-stats",t,a],queryFn:()=>mn.getClientStats({query:t||void 0,limit:l,offset:(a-1)*l}),staleTime:30*1e3}),g=_=>{o("/lcopilot/bank-dashboard?tab=results&client="+encodeURIComponent(_))},j=_=>{o(`/lcopilot/bank-dashboard?tab=client-dashboard&client=${encodeURIComponent(_)}`)},y=_=>_.compliance_rate>=90?e.jsxs(Q,{variant:"default",className:"bg-green-600",children:[e.jsx(Oe,{className:"w-3 h-3 mr-1"}),"Excellent"]}):_.compliance_rate>=75?e.jsxs(Q,{variant:"secondary",className:"bg-yellow-600",children:[e.jsx(ks,{className:"w-3 h-3 mr-1"}),"Good"]}):e.jsxs(Q,{variant:"destructive",children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),"Needs Attention"]});if(u)return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Client Management"}),e.jsx(ue,{children:"Loading client statistics..."})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading clients..."})]})})]});if(h)return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Client Management"}),e.jsx(ue,{children:"Error loading client statistics"})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx("p",{className:"text-destructive",children:"Failed to load client data"}),e.jsx(M,{onClick:()=>x(),className:"mt-4",children:"Retry"})]})})]});const b=c?.clients||[],N=c?.total||0,C=Math.ceil(N/l);return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5"}),"Client Management"]}),e.jsx(ue,{children:"View and manage client validation statistics"})]}),e.jsxs(Q,{variant:"outline",className:"text-sm",children:[N," ",N===1?"Client":"Clients"]})]})}),e.jsxs(U,{children:[e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(oe,{placeholder:"Search clients by name...",value:t,onChange:_=>{s(_.target.value),r(1)},className:"pl-10"})]})}),b.length>0&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Clients"}),e.jsx("p",{className:"text-2xl font-bold",children:N})]}),e.jsx(xs,{className:"w-8 h-8 text-muted-foreground"})]})})}),e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Validations"}),e.jsx("p",{className:"text-2xl font-bold",children:b.reduce((_,A)=>_+A.total_validations,0).toLocaleString()})]}),e.jsx(Be,{className:"w-8 h-8 text-muted-foreground"})]})})}),e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Avg Compliance"}),e.jsxs("p",{className:"text-2xl font-bold",children:[b.length>0?Math.round(b.reduce((_,A)=>_+A.compliance_rate,0)/b.length):0,"%"]})]}),e.jsx(Vt,{className:"w-8 h-8 text-muted-foreground"})]})})}),e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Discrepancies"}),e.jsx("p",{className:"text-2xl font-bold",children:b.reduce((_,A)=>_+A.total_discrepancies,0).toLocaleString()})]}),e.jsx(ks,{className:"w-8 h-8 text-muted-foreground"})]})})})]}),b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:t?`No clients found matching "${Nl(t)}"`:"No clients found. Upload LC validations to see client statistics."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-3 font-semibold",children:"Client Name"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Validations"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Compliant"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Discrepancies"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Failed"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Avg Score"}),e.jsx("th",{className:"text-right p-3 font-semibold",children:"Compliance Rate"}),e.jsx("th",{className:"text-left p-3 font-semibold",children:"Last Validation"}),e.jsx("th",{className:"text-center p-3 font-semibold",children:"Status"}),e.jsx("th",{className:"text-center p-3 font-semibold",children:"Actions"})]})}),e.jsx("tbody",{children:b.map(_=>{const A=n.has(_.client_name);return e.jsxs(lt.Fragment,{children:[e.jsxs("tr",{className:"border-b hover:bg-muted/50 cursor-pointer",onClick:()=>d(_.client_name),children:[e.jsx("td",{className:"p-3 font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[A?e.jsx(ja,{className:"w-4 h-4 text-muted-foreground"}):e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"}),Nl(_.client_name)]})}),e.jsx("td",{className:"p-3 text-right",children:_.total_validations.toLocaleString()}),e.jsx("td",{className:"p-3 text-right",children:e.jsx(Q,{variant:"outline",className:"bg-green-50 text-green-700 border-green-200",children:_.compliant_count})}),e.jsx("td",{className:"p-3 text-right",children:_.discrepancies_count>0?e.jsx(Q,{variant:"outline",className:"bg-yellow-50 text-yellow-700 border-yellow-200",children:_.discrepancies_count}):e.jsx("span",{className:"text-muted-foreground",children:"0"})}),e.jsx("td",{className:"p-3 text-right",children:_.failed_count>0?e.jsx(Q,{variant:"outline",className:"bg-red-50 text-red-700 border-red-200",children:_.failed_count}):e.jsx("span",{className:"text-muted-foreground",children:"0"})}),e.jsxs("td",{className:"p-3 text-right font-medium",children:[_.average_compliance_score.toFixed(1),"%"]}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs("span",{className:"font-medium",children:[_.compliance_rate.toFixed(1),"%"]}),e.jsx("div",{className:"w-16 bg-muted rounded-full h-2",children:e.jsx("div",{className:`h-2 rounded-full ${_.compliance_rate>=90?"bg-green-600":_.compliance_rate>=75?"bg-yellow-600":"bg-red-600"}`,style:{width:`${_.compliance_rate}%`}})})]})}),e.jsx("td",{className:"p-3 text-left text-muted-foreground",children:_.last_validation_date?hs(new Date(_.last_validation_date),"MMM d, yyyy"):"N/A"}),e.jsx("td",{className:"p-3 text-center",children:y(_)}),e.jsx("td",{className:"p-3 text-center",onClick:k=>k.stopPropagation(),children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>j(_.client_name),className:"h-8",children:[e.jsx(Ws,{className:"w-4 h-4 mr-1"}),"Dashboard"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>g(_.client_name),className:"h-8",children:[e.jsx(ir,{className:"w-4 h-4 mr-1"}),"Results"]})]})})]}),A&&e.jsx("tr",{children:e.jsx("td",{colSpan:10,className:"p-0",children:e.jsx(J9e,{clientName:_.client_name,clientStats:{total_validations:_.total_validations,compliance_rate:_.compliance_rate,average_compliance_score:_.average_compliance_score,total_discrepancies:_.total_discrepancies,discrepancies_count:_.discrepancies_count,compliant_count:_.compliant_count,failed_count:_.failed_count}})})})]},_.client_name)})})]})}),C>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(a-1)*l+1," to"," ",Math.min(a*l,N)," of ",N," clients"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(_=>Math.max(1,_-1)),disabled:a===1,children:"Previous"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Page ",a," of ",C]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(_=>Math.min(C,_+1)),disabled:a===C,children:"Next"})]})]})]})]})]})}function Q9e({}){const{toast:t}=et(),s=Yn(),[a,r]=m.useState({email_enabled:!0,sms_enabled:!1,job_completion_enabled:!0,high_discrepancy_enabled:!0,high_discrepancy_threshold:5}),{data:n,isLoading:i}=Ks({queryKey:["bank-notification-preferences"],queryFn:()=>mn.getNotificationPreferences(),staleTime:300*1e3});m.useEffect(()=>{n&&r(n)},[n]);const l=Ya({mutationFn:u=>mn.updateNotificationPreferences(u),onSuccess:u=>{t({title:"Preferences Updated",description:"Your notification preferences have been saved successfully."}),s.setQueryData(["bank-notification-preferences"],u.preferences),r(u.preferences)},onError:u=>{t({title:"Update Failed",description:u.message||"Failed to update notification preferences. Please try again.",variant:"destructive"})}}),o=(u,h)=>{r(x=>({...x,[u]:h}))},d=u=>{const h=parseInt(u,10);!isNaN(h)&&h>=1&&h<=20&&r(x=>({...x,high_discrepancy_threshold:h}))},c=()=>{l.mutate(a)};return i?e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Notification Preferences"}),e.jsx(ue,{children:"Loading preferences..."})]}),e.jsx(U,{children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ct,{className:"w-8 h-8 animate-spin text-muted-foreground"})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Notification Preferences"]}),e.jsx(ue,{children:"Configure how and when you receive notifications about LC validations."})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(Z,{htmlFor:"email-enabled",className:"flex items-center gap-2",children:[e.jsx(Va,{className:"w-4 h-4"}),"Email Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(js,{id:"email-enabled",checked:a.email_enabled,onCheckedChange:u=>o("email_enabled",u)})]})}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(Z,{htmlFor:"sms-enabled",className:"flex items-center gap-2",children:[e.jsx(Lg,{className:"w-4 h-4"}),"SMS Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via SMS (coming soon)"})]}),e.jsx(js,{id:"sms-enabled",checked:a.sms_enabled,onCheckedChange:u=>o("sms_enabled",u),disabled:!0})]})}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(Z,{htmlFor:"job-completion-enabled",className:"flex items-center gap-2",children:[e.jsx(CheckCircle,{className:"w-4 h-4"}),"Job Completion Notifications"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified when LC validation jobs complete"})]}),e.jsx(js,{id:"job-completion-enabled",checked:a.job_completion_enabled,onCheckedChange:u=>o("job_completion_enabled",u),disabled:!a.email_enabled&&!a.sms_enabled})]})}),e.jsx("div",{className:"space-y-4 border-t pt-4",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsxs(Z,{htmlFor:"high-discrepancy-enabled",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"High Discrepancy Alerts"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get alerted when LCs have high discrepancy counts"})]}),e.jsx(js,{id:"high-discrepancy-enabled",checked:a.high_discrepancy_enabled,onCheckedChange:u=>o("high_discrepancy_enabled",u),disabled:!a.email_enabled&&!a.sms_enabled})]}),a.high_discrepancy_enabled&&e.jsxs("div",{className:"ml-8 space-y-2",children:[e.jsx(Z,{htmlFor:"discrepancy-threshold",children:"Alert Threshold (discrepancy count)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{id:"discrepancy-threshold",type:"number",min:1,max:20,value:a.high_discrepancy_threshold,onChange:u=>d(u.target.value),className:"w-24"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Alert when discrepancy count â‰¥ this number"})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Valid range: 1-20 discrepancies"})]})]})}),e.jsx("div",{className:"flex justify-end pt-4 border-t",children:e.jsx(M,{onClick:c,disabled:l.isPending,children:l.isPending?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})})]})]}),e.jsx($,{className:"bg-muted/50",children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium",children:"About Notifications"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1 list-disc list-inside",children:[e.jsx("li",{children:"Job completion notifications are sent when any validation finishes"}),e.jsx("li",{children:"High discrepancy alerts are sent when discrepancy count exceeds your threshold"}),e.jsx("li",{children:"Notifications include LC details and links to view full results"}),e.jsx("li",{children:"You can disable individual notification types while keeping others enabled"})]})]})})})]})}function X9e(){const{user:t}=Dt(),[s,a]=zs(),r=s.get("tab")||"upload",[n,i]=m.useState(r),{data:l}=Ks({queryKey:["stub-status"],queryFn:KD,retry:!1});l?.stub_mode_enabled||!1||t&&t.role,m.useEffect(()=>{const c=s.get("tab")||"upload";c!==n&&i(c)},[s,n]);const d=c=>{i(c);const u=new URLSearchParams(s);u.set("tab",c),c!=="results"&&u.delete("client"),a(u)};return e.jsxs(Jte,{title:"Bank LC Validation (Legacy)",subtitle:"Previous layout version - use new dashboard for improved experience",breadcrumbs:[{label:"LCopilot",href:"/lcopilot"},{label:"Bank Dashboard (Legacy)"}],actions:e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"default",size:"sm",asChild:!0,children:e.jsx(pe,{to:"/lcopilot/bank-dashboard",children:"Switch to New Layout"})}),e.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(pe,{to:"/lcopilot/analytics/bank",children:[e.jsx(Ws,{className:"w-4 h-4"}),"Analytics"]})})]}),compact:!0,children:[e.jsx(gse,{}),e.jsxs(Os,{value:n,onValueChange:d,className:"mt-8",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-5 max-w-4xl",children:[e.jsxs(He,{value:"upload",className:"flex items-center gap-2",children:[e.jsx(Hs,{className:"w-4 h-4"}),"Upload LC"]}),e.jsxs(He,{value:"queue",className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-4 h-4"}),"Processing Queue"]}),e.jsxs(He,{value:"results",className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4"}),"Results"]}),e.jsxs(He,{value:"clients",className:"flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),"Clients"]}),e.jsxs(He,{value:"notifications",className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-4 h-4"}),"Notifications"]})]}),e.jsx(Qe,{value:"upload",className:"mt-6",children:e.jsx(Qte,{onUploadSuccess:()=>d("queue")})}),e.jsx(Qe,{value:"queue",className:"mt-6",children:e.jsx(b9e,{onJobComplete:()=>d("results")})}),e.jsx(Qe,{value:"results",className:"mt-6",children:e.jsx(fse,{})}),e.jsx(Qe,{value:"clients",className:"mt-6",children:e.jsx(vse,{})}),e.jsx(Qe,{value:"notifications",className:"mt-6",children:e.jsx(Q9e,{})})]})]})}const jse=m.createContext(void 0);function eqe(){const t=m.useContext(jse);if(!t)throw new Error("useOrgContext must be used within OrgProvider");return t}function tqe({children:t}){const[s,a]=zs();zt();const[r,n]=m.useState([]),[i,l]=m.useState(!0),o=s.get("org")||localStorage.getItem("bank_active_org")||null;m.useEffect(()=>{o?localStorage.setItem("bank_active_org",o):localStorage.removeItem("bank_active_org")},[o]);const d=m.useCallback(async()=>{l(!0);try{const x=await F0.listOrgs();n(x.orgs)}catch(x){console.error("Failed to fetch bank organizations:",x),n([])}finally{l(!1)}},[]);m.useEffect(()=>{d()},[d]);const c=d,u=m.useCallback(x=>{const g=new URLSearchParams(s);x?g.set("org",x):g.delete("org"),a(g,{replace:!0})},[s,a]),h={activeOrgId:o,setActiveOrg:u,orgs:r,isLoading:i,refreshOrgs:c};return e.jsx(jse.Provider,{value:h,children:t})}function sqe(){const{activeOrgId:t,setActiveOrg:s,orgs:a,isLoading:r}=eqe(),[n,i]=m.useState(!1),[l,o]=m.useState(""),d=a.find(h=>h.id===t),c=m.useMemo(()=>{if(!l)return a;const h=l.toLowerCase();return a.filter(x=>x.name.toLowerCase().includes(h)||x.code?.toLowerCase().includes(h))},[a,l]),u=h=>{s(h),i(!1),o("")};return r?e.jsxs(M,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(Bs,{className:"h-4 w-4 mr-2"}),"Loading..."]}):(a.length,e.jsxs(Fb,{open:n,onOpenChange:i,children:[e.jsx(Rb,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Bs,{className:"h-4 w-4"}),e.jsx("span",{className:"max-w-[120px] truncate",children:d?d.name:"All Orgs"}),d&&e.jsx(Q,{variant:"secondary",className:"text-xs",children:d.kind}),e.jsx(ja,{className:"h-4 w-4 opacity-50"})]})}),e.jsxs(lv,{className:"w-[300px] p-0",align:"start",children:[e.jsx("div",{className:"p-3 border-b",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search orgs...",value:l,onChange:h=>o(h.target.value),className:"pl-8"})]})}),e.jsx(Cg,{className:"h-[300px]",children:e.jsxs("div",{className:"p-1",children:[e.jsxs("button",{onClick:()=>u(null),className:Le("w-full text-left px-3 py-2 rounded-md text-sm hover:bg-accent transition-colors",!t&&"bg-accent"),children:[e.jsx("div",{className:"font-medium",children:"All Orgs"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"View all organizations"})]}),c.map(h=>e.jsxs("button",{onClick:()=>u(h.id),className:Le("w-full text-left px-3 py-2 rounded-md text-sm hover:bg-accent transition-colors",t===h.id&&"bg-accent"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:h.name}),e.jsx(Q,{variant:"outline",className:"text-xs",children:h.kind})]}),h.code&&e.jsx("div",{className:"text-xs text-muted-foreground",children:h.code})]},h.id)),c.length===0&&e.jsx("div",{className:"px-3 py-8 text-center text-sm text-muted-foreground",children:"No organizations found"})]})})]})]}))}function aqe(){if(console&&console.warn){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];typeof s[0]=="string"&&(s[0]=`react-i18next:: ${s[0]}`),console.warn(...s)}}const uU={};function JP(){for(var t=arguments.length,s=new Array(t),a=0;a<t;a++)s[a]=arguments[a];typeof s[0]=="string"&&uU[s[0]]||(typeof s[0]=="string"&&(uU[s[0]]=new Date),aqe(...s))}const bse=(t,s)=>()=>{if(t.isInitialized)s();else{const a=()=>{setTimeout(()=>{t.off("initialized",a)},0),s()};t.on("initialized",a)}};function mU(t,s,a){t.loadNamespaces(s,bse(t,a))}function hU(t,s,a,r){typeof a=="string"&&(a=[a]),a.forEach(n=>{t.options.ns.indexOf(n)<0&&t.options.ns.push(n)}),t.loadLanguages(s,bse(t,r))}function rqe(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const r=s.languages[0],n=s.options?s.options.fallbackLng:!1,i=s.languages[s.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,d)=>{const c=s.services.backendConnector.state[`${o}|${d}`];return c===-1||c===2};return a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&s.services.backendConnector.backend&&s.isLanguageChangingTo&&!l(s.isLanguageChangingTo,t)?!1:!!(s.hasResourceBundle(r,t)||!s.services.backendConnector.backend||s.options.resources&&!s.options.partialBundledLanguages||l(r,t)&&(!n||l(i,t)))}function nqe(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!s.languages||!s.languages.length?(JP("i18n.languages were undefined or empty",s.languages),!0):s.options.ignoreJSONStructure!==void 0?s.hasLoadedNamespace(t,{lng:a.lng,precheck:(n,i)=>{if(a.bindI18n&&a.bindI18n.indexOf("languageChanging")>-1&&n.services.backendConnector.backend&&n.isLanguageChangingTo&&!i(n.isLanguageChangingTo,t))return!1}}):rqe(t,s,a)}const iqe=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,lqe={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"Â©","&#169;":"Â©","&reg;":"Â®","&#174;":"Â®","&hellip;":"â€¦","&#8230;":"â€¦","&#x2F;":"/","&#47;":"/"},oqe=t=>lqe[t],cqe=t=>t.replace(iqe,oqe);let QP={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:cqe};function dqe(){let t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};QP={...QP,...t}}function uqe(){return QP}let yse;function mqe(t){yse=t}function hqe(){return yse}const xqe={type:"3rdParty",init(t){dqe(t.options.react),mqe(t)}},pqe=m.createContext();class fqe{constructor(){this.usedNamespaces={}}addUsedNamespaces(s){s.forEach(a=>{this.usedNamespaces[a]||(this.usedNamespaces[a]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const gqe=(t,s)=>{const a=m.useRef();return m.useEffect(()=>{a.current=t},[t,s]),a.current};function vqe(t){let s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:a}=s,{i18n:r,defaultNS:n}=m.useContext(pqe)||{},i=a||r||hqe();if(i&&!i.reportNamespaces&&(i.reportNamespaces=new fqe),!i){JP("You will need to pass in an i18next instance by using initReactI18next");const _=(k,E)=>typeof E=="string"?E:E&&typeof E=="object"&&typeof E.defaultValue=="string"?E.defaultValue:Array.isArray(k)?k[k.length-1]:k,A=[_,{},!1];return A.t=_,A.i18n={},A.ready=!1,A}i.options.react&&i.options.react.wait!==void 0&&JP("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const l={...uqe(),...i.options.react,...s},{useSuspense:o,keyPrefix:d}=l;let c=n||i.options&&i.options.defaultNS;c=typeof c=="string"?[c]:c||["translation"],i.reportNamespaces.addUsedNamespaces&&i.reportNamespaces.addUsedNamespaces(c);const u=(i.isInitialized||i.initializedStoreOnce)&&c.every(_=>nqe(_,i,l));function h(){return i.getFixedT(s.lng||null,l.nsMode==="fallback"?c:c[0],d)}const[x,g]=m.useState(h);let j=c.join();s.lng&&(j=`${s.lng}${j}`);const y=gqe(j),b=m.useRef(!0);m.useEffect(()=>{const{bindI18n:_,bindI18nStore:A}=l;b.current=!0,!u&&!o&&(s.lng?hU(i,s.lng,c,()=>{b.current&&g(h)}):mU(i,c,()=>{b.current&&g(h)})),u&&y&&y!==j&&b.current&&g(h);function k(){b.current&&g(h)}return _&&i&&i.on(_,k),A&&i&&i.store.on(A,k),()=>{b.current=!1,_&&i&&_.split(" ").forEach(E=>i.off(E,k)),A&&i&&A.split(" ").forEach(E=>i.store.off(E,k))}},[i,j]);const N=m.useRef(!0);m.useEffect(()=>{b.current&&!N.current&&g(h),N.current=!1},[i,d]);const C=[x,i,u];if(C.t=x,C.i18n=i,C.ready=u,u||!u&&!o)return C;throw new Promise(_=>{s.lng?hU(i,s.lng,c,()=>_()):mU(i,c,()=>_())})}const nA=[{code:"en",name:"English",nativeName:"English"},{code:"bn",name:"Bangla",nativeName:"à¦¬à¦¾à¦‚à¦²à¦¾"}];function jqe(){const{i18n:t,t:s}=vqe(),a=nA.find(n=>n.code===t.language)||nA[0],r=n=>{if(t.changeLanguage(n),localStorage.setItem("i18nextLng",n),typeof window<"u"){const i=new URL(window.location.href);i.searchParams.set("lang",n),window.history.replaceState({},"",i)}};return e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(ha,{className:"h-4 w-4"}),e.jsx("span",{className:"max-w-[80px] truncate",children:a.nativeName})]})}),e.jsx(Zn,{align:"end",children:nA.map(n=>e.jsxs(is,{onClick:()=>r(n.code),className:t.language===n.code?"bg-accent":"",children:[e.jsx("span",{className:"font-medium",children:n.nativeName}),t.language===n.code&&e.jsx(Q,{variant:"secondary",className:"ml-2 text-xs",children:"âœ“"})]},n.code))})]})}const bqe=[{title:"Dashboard",url:"/lcopilot/bank-dashboard?tab=dashboard",icon:I1},{title:"Upload LC",url:"/lcopilot/bank-dashboard?tab=upload",icon:Hs},{title:"Processing Queue",url:"/lcopilot/bank-dashboard?tab=queue",icon:mt},{title:"Results",url:"/lcopilot/bank-dashboard?tab=results",icon:Oe},{title:"Clients",url:"/lcopilot/bank-dashboard?tab=clients",icon:xs},{title:"Notifications",url:"/lcopilot/bank-dashboard?tab=notifications",icon:$s}],yqe=[{title:"Analytics",url:"/lcopilot/bank-dashboard?tab=analytics",icon:Ws},{title:"SLA Dashboards",url:"/lcopilot/bank-dashboard?tab=sla",icon:rV}],Nqe=[{title:"Approvals",url:"/lcopilot/bank-dashboard?tab=approvals",icon:Gs},{title:"Discrepancies",url:"/lcopilot/bank-dashboard?tab=discrepancies",icon:Ve},{title:"Policy",url:"/lcopilot/bank-dashboard?tab=policy",icon:Ot},{title:"Evidence Packs",url:"/lcopilot/bank-dashboard?tab=evidence-packs",icon:Ps},{title:"Bulk Jobs",url:"/lcopilot/bank-dashboard?tab=bulk-jobs",icon:R1}],wqe=[{title:"Billing",url:"/lcopilot/bank-dashboard?tab=billing",icon:pn}],_qe=[{title:"AI Assistance",url:"/lcopilot/bank-dashboard?tab=ai-assistance",icon:ni},{title:"Integrations",url:"/lcopilot/bank-dashboard?tab=integrations",icon:bue}],Cqe=[{title:"Users",url:"/lcopilot/bank-dashboard?tab=users",icon:Rue},{title:"Organizations",url:"/lcopilot/bank-dashboard?tab=orgs",icon:Bs},{title:"Settings",url:"/lcopilot/bank-dashboard?tab=settings",icon:sn},{title:"Help",url:"/lcopilot/bank-dashboard?tab=help",icon:Pn}];function Sqe({...t}){const s=rn(),{user:a,logout:r}=Al(),n=a?.role==="bank_admin",i=o=>{if(o==="#")return!1;const d=new URLSearchParams(o.split("?")[1]||""),c=new URLSearchParams(s.search),u=d.get("tab"),h=c.get("tab")||"dashboard";return u===h},l=()=>{r()};return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs(pe,{to:"/lcopilot",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary text-primary-foreground",children:e.jsx(Bs,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"LCopilot"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Bank Portal"})]})]})})})}),e.jsx("div",{className:"px-2 py-2",children:e.jsx(sqe,{})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Main Navigation"}),e.jsx(Js,{children:e.jsx(ls,{children:bqe.map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:i(o.url),tooltip:o.title,children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Analytics & Reporting"}),e.jsx(Js,{children:e.jsx(ls,{children:yqe.map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:i(o.url),tooltip:o.title,children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Operations"}),e.jsx(Js,{children:e.jsx(ls,{children:Nqe.filter(o=>o.title!=="Policy"||n).map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:i(o.url),tooltip:o.title,children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Billing & Finance"}),e.jsx(Js,{children:e.jsx(ls,{children:wqe.map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:i(o.url),tooltip:o.title,children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"AI & Tools"}),e.jsx(Js,{children:e.jsx(ls,{children:_qe.map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,isActive:i(o.url),tooltip:o.title,children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsx(ls,{children:Cqe.filter(o=>o.title!=="Users"||n).map(o=>e.jsx(rt,{children:e.jsx(it,{asChild:!0,tooltip:o.title,isActive:i(o.url),children:e.jsxs(pe,{to:o.url,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.title})]})})},o.title))})})})]}),e.jsx(Qo,{children:e.jsxs("div",{className:"flex flex-col gap-2 px-2 py-2",children:[e.jsx(jqe,{}),a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground",children:a.role==="bank_admin"?"Bank Admin":"Bank Officer"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:l,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})]})})]})}function kqe({clientName:t,embedded:s=!1,onBack:a}){zt();const{toast:r}=et(),[n,i]=m.useState("90"),[l,o]=m.useState(null),[d,c]=m.useState(),[u,h]=m.useState(),x=()=>{const O=new Date,P=new Date;return P.setDate(P.getDate()-parseInt(n)),{start_date:P.toISOString(),end_date:O.toISOString()}},{data:g,isLoading:j,error:y}=Ks({queryKey:["client-dashboard",t,n],queryFn:()=>{if(!t)throw new Error("Client name is required");return mn.getClientDashboard(t,x())},enabled:!!t,staleTime:30*1e3});if(!t)return e.jsx($,{children:e.jsxs(U,{className:"pt-6",children:[e.jsx("p",{className:"text-destructive",children:"Client name is required"}),s&&a&&e.jsxs(M,{onClick:a,className:"mt-4",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]})]})});if(j)return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Loading Client Dashboard"}),e.jsxs(ue,{children:["Loading data for ",no(t),"..."]})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})]});if(y||!g)return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Error Loading Dashboard"}),e.jsx(ue,{children:"Failed to load client dashboard"})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx("p",{className:"text-destructive mb-4",children:y instanceof Error?y.message:"Failed to load client dashboard"}),s&&a&&e.jsxs(M,{onClick:a,children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]})]})})]});const b=g.statistics,N=g.lc_results,C=g.trend_data,_=O=>{switch(O){case"compliant":return e.jsx(Q,{variant:"default",className:"bg-green-500",children:"Compliant"});case"discrepancies":return e.jsx(Q,{variant:"default",className:"bg-yellow-500",children:"Discrepancies"});case"failed":return e.jsx(Q,{variant:"destructive",children:"Failed"});default:return e.jsx(Q,{variant:"secondary",children:O})}},A=O=>{o(O.jobId),c(O.client_name),h(O.lc_number)},k=async O=>{try{const{getReportDownloadUrl:P}=await ll(async()=>{const{getReportDownloadUrl:B}=await Promise.resolve().then(()=>YD);return{getReportDownloadUrl:B}},void 0),T=await P(O.jobId);window.open(T.download_url,"_blank")}catch(P){console.error("Failed to download report:",P),r({title:"Download Failed",description:"Failed to download report. Please try again.",variant:"destructive"})}},E=C.length>=2?C.slice(-7):[],D=E.length>=2?E[E.length-1].avg_compliance_score-E[0].avg_compliance_score:0,R=E.length>=2?E[E.length-1].compliant/Math.max(E[E.length-1].validations,1)*100-E[0].compliant/Math.max(E[0].validations,1)*100:0;return e.jsxs("div",{className:"space-y-6",children:[s&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[a&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:a,children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-primary p-2 rounded-lg",children:e.jsx(xs,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:no(g.client_name)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Client Performance Dashboard"})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:`/lcopilot/bank-dashboard?tab=results&client=${encodeURIComponent(t)}`,children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"View All Results"]})})})]}),e.jsxs("div",{children:[e.jsx(Z,{children:"Date Range"}),e.jsxs(Te,{value:n,onValueChange:i,className:"w-48 mt-2",children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"7",children:"Last 7 days"}),e.jsx(K,{value:"30",children:"Last 30 days"}),e.jsx(K,{value:"90",children:"Last 90 days"}),e.jsx(K,{value:"180",children:"Last 180 days"}),e.jsx(K,{value:"365",children:"Last year"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Validations"}),e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.total_validations}),e.jsx("p",{className:"text-xs text-muted-foreground",children:b.first_validation_date&&b.last_validation_date?`Since ${hs(new Date(b.first_validation_date),"MMM d, yyyy")}`:"All time"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Compliance Rate"}),e.jsx(Oe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[b.compliance_rate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[R>0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",R.toFixed(1),"%"]})]}):R<0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:"text-red-600",children:[R.toFixed(1),"%"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"No change"}),e.jsx("span",{className:"text-muted-foreground",children:"vs last 7 days"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Avg Compliance Score"}),e.jsx(Ws,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[b.average_compliance_score.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[D>0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",D.toFixed(1),"%"]})]}):D<0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:"text-red-600",children:[D.toFixed(1),"%"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"No change"}),e.jsx("span",{className:"text-muted-foreground",children:"vs last 7 days"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Avg Processing Time"}),e.jsx(mt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:b.average_processing_time_seconds?`${b.average_processing_time_seconds.toFixed(1)}s`:"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per validation"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-green-600"}),"Compliant"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:b.compliant_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(b.compliant_count/b.total_validations*100).toFixed(1),"% of total"]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-yellow-600"}),"With Discrepancies"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:b.discrepancies_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(b.discrepancies_count/b.total_validations*100).toFixed(1),"% of total"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[b.total_discrepancies," total discrepancies"]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-red-600"}),"Failed"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:b.failed_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(b.failed_count/b.total_validations*100).toFixed(1),"% of total"]})]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(ee,{children:"LC Validation Results"}),e.jsxs(ue,{children:[N.length," validation",N.length!==1?"s":""," found"]})]})})}),e.jsx(U,{children:N.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No validation results found"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Date Received"}),e.jsx(je,{children:"Completed"}),e.jsx(je,{children:"Status"}),e.jsx(je,{className:"text-right",children:"Score"}),e.jsx(je,{className:"text-right",children:"Discrepancies"}),e.jsx(je,{className:"text-right",children:"Documents"}),e.jsx(je,{className:"text-right",children:"Processing Time"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:N.map(O=>{const P=O.completed_at?new Date(O.completed_at):new Date,T=no(O.lc_number,"N/A"),B=O.date_received||"";return e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[T,O.duplicate_count&&O.duplicate_count>0&&e.jsxs(Q,{variant:"outline",className:"text-xs",title:`This LC has been validated ${O.duplicate_count} time(s) before`,children:[e.jsx(qa,{className:"w-3 h-3 mr-1"}),O.duplicate_count,"x"]})]})}),e.jsx(fe,{children:B||"N/A"}),e.jsx(fe,{children:hs(P,"MMM dd, yyyy HH:mm")}),e.jsx(fe,{children:_(O.status)}),e.jsxs(fe,{className:"text-right",children:[O.compliance_score,"%"]}),e.jsx(fe,{className:"text-right",children:O.discrepancy_count}),e.jsx(fe,{className:"text-right",children:O.document_count}),e.jsx(fe,{className:"text-right",children:O.processing_time_seconds!==void 0&&O.processing_time_seconds!==null?`${O.processing_time_seconds}s`:"N/A"}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>A(O),title:"View Details",children:e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>k(O),title:"Download PDF Report",children:e.jsx(Gt,{className:"w-4 h-4"})})]})})]},O.id)})})]})})})]}),e.jsx(mR,{jobId:l,open:!!l,onOpenChange:O=>{O||(o(null),c(void 0),h(void 0))},clientName:d,lcNumber:u})]})}function Eqe(){const{user:t}=Dt(),s=!!t&&t.role==="bank",[a,r]=m.useState({timeRange:"30d",startDate:Un(new Date,30),endDate:new Date}),n={summary:{total_jobs:12540,rejection_rate:8.7,avg_processing_time_minutes:12.4,doc_distribution:{lc:7420,invoice:3200,bl:1920}},trends:{job_volume_trend:4.6,success_rate_trend:1.8,processing_time_trend:-.9,daily_volumes:Array.from({length:14}).map((te,ne)=>({date:Un(new Date,13-ne).toISOString().slice(0,10),count:700+Math.round(Math.sin(ne/2)*80)})),success_rates:Array.from({length:14}).map((te,ne)=>({date:Un(new Date,13-ne).toISOString().slice(0,10),success_rate:91+Math.sin(ne/3)*3,rejection_rate:9-Math.sin(ne/3)*3})),processing_times:Array.from({length:14}).map((te,ne)=>({date:Un(new Date,13-ne).toISOString().slice(0,10),avg_time:12+Math.cos(ne/4)})),daily_discrepancies:Array.from({length:14}).map((te,ne)=>({date:Un(new Date,13-ne).toISOString().slice(0,10),count:60+Math.round(Math.cos(ne/2)*20)}))},users:Array.from({length:12}).map((te,ne)=>({user_id:`u${ne+1}`,username:`Client ${ne+1}`,email:void 0,role:"exporter",job_count:100-ne*5,success_rate:80+ne%4*5})),discrepancies:{total_discrepancies:260,by_type:[{discrepancy_type:"late_shipment",count:75},{discrepancy_type:"amount_mismatch",count:58},{discrepancy_type:"missing_docs",count:42},{discrepancy_type:"expiry_issue",count:28}],by_severity:[{severity:"high",count:65},{severity:"medium",count:110},{severity:"low",count:85}]}},i=Ks({queryKey:["analytics-dashboard",a],queryFn:()=>fh.getDashboard({time_range:a.timeRange,start_date:a.timeRange==="custom"?a.startDate?.toISOString():void 0,end_date:a.timeRange==="custom"?a.endDate?.toISOString():void 0}),staleTime:300*1e3,retry:2,enabled:s}),l=s?i.data:n,o=s?i.isLoading:!1,d=s?i.error:void 0,c=i.refetch;if(o)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Bank Analytics"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})]})}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((te,ne)=>e.jsxs($,{dense:!0,children:[e.jsx(X,{dense:!0,children:e.jsx("div",{className:"h-4 w-24 bg-muted animate-pulse rounded"})}),e.jsx(U,{dense:!0,children:e.jsx("div",{className:"h-8 w-32 bg-muted animate-pulse rounded"})})]},ne))})]});if(d)return e.jsx(Eg,{error:d,onRetry:c});if(!l)return e.jsx(Nr,{});const u=Number(l?.trends?.job_volume_trend??0),h=Number(l?.trends?.success_rate_trend??0),x=Number(l?.trends?.processing_time_trend??0),g=-h,j=l.summary.avg_processing_time_minutes??0,y=l.summary,b=l.trends??{daily_volumes:[],success_rates:[],processing_times:[],daily_discrepancies:[]},N=l.discrepancies??{total_discrepancies:0,by_type:[],by_severity:[]},C=l.users??[],_=Object.entries(y.doc_distribution??{}),A=b.daily_volumes??[],k=b.success_rates??[],E=b.processing_times??[],D=b.daily_discrepancies??[];y.rejection_rate<15||y.rejection_rate<30;const R=C.filter(te=>(te.job_count??0)>0).length,O=N.total_discrepancies>500?"HIGH":N.total_discrepancies>200?"MEDIUM":"LOW",P=_.map(([te,ne])=>{const ae=Number(ne??0),re=y.total_jobs?ae/y.total_jobs*100:0;return{name:te.replace(/_/g," ").toUpperCase(),value:ae,percentage:re}}),T=te=>te.replace(/_/g," ").replace(/\b\w/g,ne=>ne.toUpperCase()),B=D.map(te=>({name:te.date,value:te.count})),G=E.map(te=>({date:te.date,avg_time:te.avg_time,sla_target:15})),q=N.by_type.map(te=>({name:T(te.discrepancy_type),value:te.count})),z=N.by_severity.map(te=>({name:T(te.severity),value:te.count})),H=N.by_severity.reduce((te,ne)=>{const ae=ne.severity;return te[ae]!==void 0&&(te[ae]+=ne.count),te},{high:0,medium:0,low:0}),le=[...N.by_type].sort((te,ne)=>ne.count-te.count).slice(0,5),Y=N.total_discrepancies||0;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("h2",{className:"text-2xl font-semibold tracking-tight",children:"Bank System Analytics"}),e.jsx(kC,{role:"bank"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Monitor trade finance document validation system performance and client activity"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(CC,{value:a,onChange:r}),e.jsx(SC,{filters:a})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-5",children:[e.jsx(za,{title:"Total Validations",value:y.total_jobs.toLocaleString(),icon:e.jsx(Be,{className:"h-4 w-4"}),change:Math.abs(u),changeType:u===0?void 0:u>0?"increase":"decrease",description:"Total LC validations processed"}),e.jsx(za,{title:"System Success Rate",value:`${(100-y.rejection_rate).toFixed(1)}%`,icon:e.jsx(Vt,{className:"h-4 w-4"}),change:Math.abs(h),changeType:h===0?void 0:h>0?"increase":"decrease",description:"Overall system validation success rate"}),e.jsx(za,{title:"Rejection Rate",value:`${y.rejection_rate.toFixed(1)}%`,icon:e.jsx(Ve,{className:"h-4 w-4"}),change:Math.abs(g),changeType:g===0?void 0:g>0?"increase":"decrease",description:"Percentage of validations rejected"}),e.jsx(za,{title:"Avg Processing Time",value:`${j.toFixed(1)}m`,icon:e.jsx(mt,{className:"h-4 w-4"}),change:Math.abs(x),changeType:x===0?void 0:x>0?"increase":"decrease",description:"Average time per validation"}),e.jsx(za,{title:"Active Clients",value:R.toLocaleString(),icon:e.jsx(xs,{className:"h-4 w-4"}),description:"Clients with recent validation activity"}),e.jsx(za,{title:"Risk Level",value:O,icon:e.jsx(Ve,{className:"h-4 w-4"}),description:"Risk posture based on discrepancy volume"})]}),e.jsxs(Os,{defaultValue:"overview",className:"space-y-4",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-7",children:[e.jsx(He,{value:"overview",children:"Overview"}),e.jsx(He,{value:"trends",children:"Trends"}),e.jsx(He,{value:"clients",children:"Clients"}),e.jsx(He,{value:"risk",children:"Risk Analysis"}),e.jsx(He,{value:"discrepancies",children:"Discrepancies"}),e.jsx(He,{value:"performance",children:"Performance"}),e.jsx(He,{value:"compliance",children:"Compliance"})]}),e.jsx(Qe,{value:"overview",className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Daily Validation Volume"}),e.jsx(ue,{children:"System-wide validation submissions over time"})]}),e.jsx(U,{dense:!0,children:A.length>0?e.jsx(Yf,{data:A,areas:[{dataKey:"count",name:"Validations",color:"hsl(var(--primary))",fillOpacity:.3}],height:280}):e.jsx("div",{className:"flex h-[280px] items-center justify-center text-sm text-muted-foreground",children:"No data available"})})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Document Type Distribution"}),e.jsx(ue,{children:"Breakdown of validation jobs by document type"})]}),e.jsx(U,{dense:!0,children:P.length>0?e.jsxs("div",{className:"space-y-4",children:[e.jsx(_l,{data:P,bars:[{dataKey:"value",name:"Count",color:"#8b5cf6"}],layout:"vertical",height:280}),e.jsx("div",{className:"space-y-2 text-sm text-muted-foreground",children:P.map(te=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium text-foreground",children:te.name}),e.jsxs("span",{children:[te.value.toLocaleString()," (",te.percentage.toFixed(1),"%)"]})]},te.name))})]}):e.jsx("div",{className:"flex h-[280px] items-center justify-center text-sm text-muted-foreground",children:"No data available"})})]})]})}),e.jsxs(Qe,{value:"trends",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Success vs Rejection Rate"}),e.jsx(ue,{children:"Daily success and rejection percentages"})]}),e.jsx(U,{dense:!0,children:k.length>0?e.jsx(Mo,{data:k,lines:[{dataKey:"success_rate",name:"Success Rate",color:"hsl(var(--success))"},{dataKey:"rejection_rate",name:"Rejection Rate",color:"hsl(var(--destructive))"}],height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No rate data"})})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Processing Time Trend"}),e.jsx(ue,{children:"Average processing time compared to SLA target"})]}),e.jsx(U,{dense:!0,children:G.length>0?e.jsx(Mo,{data:G,lines:[{dataKey:"avg_time",name:"Avg Processing Time (min)",color:"#6366f1"},{dataKey:"sla_target",name:"SLA Target (min)",color:"#94a3b8"}],height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No processing time data"})})]})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Daily Discrepancies Detected"}),e.jsx(ue,{children:"Volume of discrepancies surfaced each day"})]}),e.jsx(U,{dense:!0,children:B.length>0?e.jsx(_l,{data:B,bars:[{dataKey:"value",name:"Discrepancies",color:"#f97316"}],height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No discrepancy data"})})]})]}),e.jsx(Qe,{value:"clients",className:"space-y-6",children:e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Top Clients by Validation Volume"}),e.jsx(ue,{children:"Most active clients and their success rates"})]}),e.jsx(U,{dense:!0,children:C.length>0?e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr,1.2fr]",children:[e.jsx(_l,{data:C.slice(0,10).map(te=>({name:te.username??te.email??te.user_id,value:te.job_count})),layout:"vertical",bars:[{dataKey:"value",name:"Jobs",color:"#3b82f6"}],height:320}),e.jsx("div",{className:"overflow-auto border rounded-lg",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-muted/40",children:e.jsxs("tr",{children:[e.jsx("th",{className:"p-3 text-left",children:"Client"}),e.jsx("th",{className:"p-3 text-left",children:"Role"}),e.jsx("th",{className:"p-3 text-right",children:"Jobs"}),e.jsx("th",{className:"p-3 text-right",children:"Success"})]})}),e.jsx("tbody",{children:C.slice(0,12).map(te=>e.jsxs("tr",{className:"border-t",children:[e.jsx("td",{className:"p-3 font-medium",children:te.username??te.email??te.user_id}),e.jsx("td",{className:"p-3",children:e.jsx(Q,{variant:"outline",className:"capitalize",children:te.role})}),e.jsx("td",{className:"p-3 text-right",children:te.job_count.toLocaleString()}),e.jsx("td",{className:"p-3 text-right",children:e.jsxs(Q,{variant:te.success_rate>=90?"default":te.success_rate>=75?"secondary":"destructive",children:[te.success_rate.toFixed(1),"%"]})})]},te.user_id))})]})})]}):e.jsx("div",{className:"flex h-[200px] items-center justify-center text-sm text-muted-foreground",children:"No client analytics available"})})]})}),e.jsxs(Qe,{value:"risk",className:"space-y-6",children:[e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Risk Summary"}),e.jsx(ue,{children:"Current discrepancy profile and severity mix"})]}),e.jsx(U,{dense:!0,children:e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Risk Level"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:O}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Based on discrepancy volume and severity"})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Total Discrepancies"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:Y.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Across selected timeframe"})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"High Severity"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-destructive",children:H.high.toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Requires immediate attention"})]}),e.jsxs("div",{className:"rounded-lg border p-4",children:[e.jsx("p",{className:"text-xs font-medium text-muted-foreground uppercase",children:"Medium / Low Severity"}),e.jsx("p",{className:"mt-2 text-2xl font-semibold text-foreground",children:(H.medium+H.low).toLocaleString()}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Monitor and remediate per plan"})]})]})})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Risk Trend"}),e.jsx(ue,{children:"Daily discrepancy count compared to risk threshold"})]}),e.jsx(U,{dense:!0,children:D.length>0?e.jsx(Mo,{data:D.map(te=>({...te,risk_threshold:30})),lines:[{dataKey:"count",name:"Discrepancies",color:"#ef4444"},{dataKey:"risk_threshold",name:"Risk Threshold",color:"#f97316"}],height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No risk trend data"})})]})]}),e.jsxs(Qe,{value:"performance",className:"space-y-6",children:[e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Processing Time Performance"}),e.jsx(ue,{children:"Average processing time per validation against SLA"})]}),e.jsx(U,{dense:!0,children:G.length>0?e.jsx(Mo,{data:G,lines:[{dataKey:"avg_time",name:"Avg Processing Time (min)",color:"#6366f1"},{dataKey:"sla_target",name:"SLA Target (min)",color:"#94a3b8"}],height:320}):e.jsx("div",{className:"flex h-[320px] items-center justify-center text-sm text-muted-foreground",children:"No processing data available"})})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(za,{title:"SLA Compliance",value:"94.2%",description:"Jobs completed within SLA window"}),e.jsx(za,{title:"Peak Hour Performance",value:`${(j*1.2).toFixed(1)}m`,description:"Average processing time during peak load"}),e.jsx(za,{title:"System Availability",value:"99.8%",description:"Platform uptime for the selected timeframe"})]})]}),e.jsx(Qe,{value:"compliance",className:"space-y-6",children:e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Regulatory Compliance Overview"}),e.jsx(ue,{children:"Key compliance indicators across AML, KYC, and sanctions screening"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[{label:"AML Compliance",value:"98.5%"},{label:"KYC Verification",value:"97.2%"},{label:"Sanctions Check",value:"99.8%"},{label:"Document Integrity",value:`${(100-y.rejection_rate).toFixed(1)}%`}].map(te=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium",children:te.label}),e.jsx(Q,{variant:"default",children:te.value})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[te.label," adherence within the selected timeframe"]})]},te.label))}),e.jsxs("div",{className:"p-4 bg-muted/50 rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Audit Trail Status"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"All validation actions are logged for seven years to satisfy regulatory retention requirements."}),e.jsxs("div",{className:"flex flex-wrap gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["â€¢ ",y.total_jobs.toLocaleString()," transactions logged"]}),e.jsx("span",{children:"â€¢ 100% audit trail coverage"}),e.jsx("span",{children:"â€¢ Automatic anomaly alerts enabled"})]})]})]})]})}),e.jsxs(Qe,{value:"discrepancies",className:"space-y-6",children:[e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Discrepancies by Type"}),e.jsx(ue,{children:"Most common validation issues detected"})]}),e.jsx(U,{dense:!0,children:q.length>0?e.jsx(_l,{data:q,bars:[{dataKey:"value",name:"Count",color:"#f97316"}],layout:"vertical",height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No discrepancy data"})})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Discrepancies by Severity"}),e.jsx(ue,{children:"Distribution across high, medium, and low severity"})]}),e.jsx(U,{dense:!0,children:z.length>0?e.jsx(_l,{data:z,bars:[{dataKey:"value",name:"Count",color:"#ef4444"}],layout:"vertical",height:300}):e.jsx("div",{className:"flex h-[300px] items-center justify-center text-sm text-muted-foreground",children:"No severity data"})})]})]}),le.length>0&&e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{children:"Top Discrepancy Drivers"}),e.jsx(ue,{children:"Focus remediation on the leading discrepancy causes"})]}),e.jsx(U,{dense:!0,className:"space-y-3",children:le.map((te,ne)=>e.jsxs("div",{className:"flex items-center justify-between rounded-md border p-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:"outline",className:"w-6 justify-center",children:ne+1}),e.jsx("span",{className:"font-medium text-foreground",children:T(te.discrepancy_type)})]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[te.count.toLocaleString(),Y>0?` (${(te.count/Y*100).toFixed(1)}%)`:""]})]},te.discrepancy_type))})]})]})]})]})}function Aqe(t){if(t==null)return"";const s=String(t);return s.includes(",")||s.includes('"')||s.includes(`
apps\web\dist\assets\index-Bz84JA8h.js:570:`)}const Pqe=[{id:"audit-1",approval_id:"approval-1",action:"created",actor_id:"user-1",details:{initial_status:"pending",initial_stage:"analyst_review"},created_at:"2024-01-18T10:00:00Z"},{id:"audit-2",approval_id:"approval-1",action:"updated",actor_id:"user-2",details:{old_status:"pending",new_status:"approved",old_stage:"analyst_review",new_stage:"senior_review"},created_at:"2024-01-18T14:00:00Z"},{id:"audit-3",approval_id:"approval-1",action:"comment_added",actor_id:"user-2",details:{comment_id:"comment-1",comment_snippet:"Looks good, proceeding to next stage"},created_at:"2024-01-18T14:15:00Z"}],Dqe=[{id:"approval-1",lc_number:"LC-BNK-2024-001",validation_session_id:"session-1",status:"pending",current_stage:"analyst_review",assigned_to:null,created_at:"2024-01-18T10:00:00Z",updated_at:"2024-01-18T14:00:00Z",last_action_at:"2024-01-18T14:00:00Z",due_date:"2024-01-20T17:00:00Z",metadata_:{priority:"high",client_id:"client-1"}},{id:"approval-2",lc_number:"LC-BNK-2024-002",validation_session_id:"session-2",status:"approved",current_stage:"final_approval",assigned_to:"user-1",created_at:"2024-01-17T09:00:00Z",updated_at:"2024-01-18T11:00:00Z",last_action_at:"2024-01-18T11:00:00Z",due_date:"2024-01-19T17:00:00Z",metadata_:{priority:"medium",client_id:"client-2"}},{id:"approval-3",lc_number:"LC-BNK-2024-003",validation_session_id:"session-3",status:"rejected",current_stage:"senior_review",assigned_to:"user-2",created_at:"2024-01-16T08:00:00Z",updated_at:"2024-01-17T15:00:00Z",last_action_at:"2024-01-17T15:00:00Z",due_date:"2024-01-18T17:00:00Z",metadata_:{priority:"critical",client_id:"client-3"}}],Tqe={analyst_review:"Analyst Review",senior_review:"Senior Review",compliance_approval:"Compliance Approval",final_approval:"Final Approval"},Fqe=t=>{const s=new Date(t),r=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(r<1)return"Just now";if(r<24)return`${r}h ago`;const n=Math.floor(r/24);return n<7?`${n}d ago`:s.toLocaleDateString()},Rqe=t=>{switch(t){case"approved":return"success";case"rejected":return"error";case"pending":return"pending";case"reopened":return"warning";case"escalated":return"warning";default:return"warning"}};function Oqe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt();zs();const[r,n]=m.useState(!1),[i,l]=m.useState(Dqe),[o,d]=m.useState("all"),[c,u]=m.useState("all"),[h,x]=m.useState(""),[g,j]=m.useState(null),[y,b]=m.useState(!1),[N,C]=m.useState(""),[_,A]=m.useState(null),[k,E]=m.useState(Pqe),[D,R]=m.useState(!1);m.useEffect(()=>{},[o,c]);const O=i.filter(H=>!(o!=="all"&&H.status!==o||c!=="all"&&H.current_stage!==c||h&&!H.lc_number.toLowerCase().includes(h.toLowerCase()))),P=H=>{s({title:"Approval Submitted",description:`LC ${H} has been approved.`}),l(le=>le.map(Y=>Y.id===H?{...Y,status:"approved"}:Y))},T=H=>{s({title:"Rejection Submitted",description:`LC ${H} has been rejected.`}),l(le=>le.map(Y=>Y.id===H?{...Y,status:"rejected"}:Y))},B=H=>{s({title:"Approval Reopened",description:`LC ${H} has been reopened for review.`}),l(le=>le.map(Y=>Y.id===H?{...Y,status:"reopened"}:Y))},G=()=>{!g||!N.trim()||(s({title:"Comment Added",description:`Comment added to approval ${g.lc_number}.`}),C(""),b(!1))},q=H=>{A(H),R(!0)},z=()=>{if(!_)return;const H=["Timestamp","Action","Actor","Details"],le=k.map(re=>[new Date(re.created_at).toLocaleString(),re.action,re.actor_id||"System",JSON.stringify(re.details)]),Y=xR([H,...le]),te=new Blob([Y],{type:"text/csv"}),ne=URL.createObjectURL(te),ae=document.createElement("a");ae.href=ne,ae.download=`approval-audit-${_.lc_number}-${new Date().toISOString().split("T")[0]}.csv`,ae.click(),URL.revokeObjectURL(ne),s({title:"Audit Logs Exported",description:`Audit logs for ${_.lc_number} have been exported.`})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"LC Approvals"}),e.jsx("p",{className:"text-muted-foreground",children:"Review and approve LC validations through multi-stage workflow."})]})}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-lg flex items-center gap-2",children:[e.jsx(Nd,{className:"h-4 w-4"})," Filters"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Statuses"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Statuses"}),e.jsx(K,{value:"pending",children:"Pending"}),e.jsx(K,{value:"approved",children:"Approved"}),e.jsx(K,{value:"rejected",children:"Rejected"}),e.jsx(K,{value:"reopened",children:"Reopened"}),e.jsx(K,{value:"escalated",children:"Escalated"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Stage"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Stages"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Stages"}),e.jsx(K,{value:"analyst_review",children:"Analyst Review"}),e.jsx(K,{value:"senior_review",children:"Senior Review"}),e.jsx(K,{value:"compliance_approval",children:"Compliance Approval"}),e.jsx(K,{value:"final_approval",children:"Final Approval"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Search LC Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search...",value:h,onChange:H=>x(H.target.value),className:"pl-8"})]})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{children:["Approvals (",O.length,")"]}),e.jsx(ue,{children:"Manage LC approval workflow"})]}),e.jsx(U,{children:r?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading approvals..."]}):O.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Gs,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No approvals found"}),e.jsx("p",{className:"text-sm",children:"Adjust your filters to see more results"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Stage"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Priority"}),e.jsx(je,{children:"Assigned To"}),e.jsx(je,{children:"Due Date"}),e.jsx(je,{children:"Last Action"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:O.map(H=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:H.lc_number}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:Tqe[H.current_stage]})}),e.jsx(fe,{children:e.jsx(Fa,{status:Rqe(H.status),children:H.status})}),e.jsx(fe,{children:e.jsx(Q,{variant:H.metadata_.priority==="critical"?"destructive":H.metadata_.priority==="high"?"default":"secondary",children:H.metadata_.priority})}),e.jsx(fe,{children:H.assigned_to?`User ${H.assigned_to.slice(-4)}`:"Unassigned"}),e.jsx(fe,{children:H.due_date?new Date(H.due_date).toLocaleDateString():"N/A"}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:Fqe(H.last_action_at)}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>q(H),tooltip:"View Audit Logs",children:e.jsx(xn,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{j(H),b(!0)},children:e.jsx(Lg,{className:"h-4 w-4"})}),H.status==="pending"&&e.jsxs(e.Fragment,{children:[e.jsxs(M,{variant:"default",size:"sm",onClick:()=>P(H.id),children:[e.jsx(Qs,{className:"h-4 w-4 mr-1"})," Approve"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:()=>T(H.id),children:[e.jsx(bs,{className:"h-4 w-4 mr-1"})," Reject"]})]}),H.status==="rejected"&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>B(H.id),children:[e.jsx(Lt,{className:"h-4 w-4 mr-1"})," Reopen"]})]})})]},H.id))})]})})]}),e.jsx(wt,{open:y,onOpenChange:b,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Add Comment"}),e.jsxs(_t,{children:["Add a comment to approval ",g?.lc_number]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Comment"}),e.jsx(Zt,{placeholder:"Enter your comment...",value:N,onChange:H=>C(H.target.value),rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(M,{onClick:G,disabled:!N.trim(),children:"Add Comment"})]})]})]})}),e.jsx(wt,{open:D,onOpenChange:R,children:e.jsxs(yt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(jt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(bt,{children:"Audit Logs"}),e.jsxs(_t,{children:["Complete audit trail for approval ",_?.lc_number]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:z,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"})," Export CSV"]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Timestamp"}),e.jsx(je,{children:"Action"}),e.jsx(je,{children:"Actor"}),e.jsx(je,{children:"Details"})]})}),e.jsx(oa,{children:k.map(H=>e.jsxs(At,{children:[e.jsx(fe,{className:"text-sm",children:new Date(H.created_at).toLocaleString()}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:H.action})}),e.jsx(fe,{className:"text-sm",children:H.actor_id?`User ${H.actor_id.slice(-4)}`:"System"}),e.jsx(fe,{className:"text-sm",children:e.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(H.details,null,2)})})]},H.id))})]})})]})})]})}const Iqe=[{id:"audit-1",workflow_id:"workflow-1",action:"created",actor_id:"user-1",details:{initial_status:"open",priority:"high"},created_at:"2024-01-18T10:00:00Z"},{id:"audit-2",workflow_id:"workflow-1",action:"updated",actor_id:"user-2",details:{old_status:"open",new_status:"in_progress",new_assigned_to:"user-2"},created_at:"2024-01-18T11:00:00Z"},{id:"audit-3",workflow_id:"workflow-1",action:"comment_added",actor_id:"user-2",details:{comment_id:"comment-1",comment_snippet:"Contacting client for clarification"},created_at:"2024-01-18T11:15:00Z"}],Lqe=[{id:"workflow-1",discrepancy_id:"disc-1",lc_number:"LC-BNK-2024-001",validation_session_id:"session-1",status:"open",assigned_to:null,due_date:"2024-01-20T17:00:00Z",priority:"high",resolution_notes:null,created_at:"2024-01-18T10:00:00Z",updated_at:"2024-01-18T14:00:00Z",resolved_at:null,resolved_by:null,metadata_:{client_id:"client-1",document_type:"commercial_invoice"}},{id:"workflow-2",discrepancy_id:"disc-2",lc_number:"LC-BNK-2024-002",validation_session_id:"session-2",status:"in_progress",assigned_to:"user-1",due_date:"2024-01-19T17:00:00Z",priority:"critical",resolution_notes:"Working with client to resolve",created_at:"2024-01-17T09:00:00Z",updated_at:"2024-01-18T11:00:00Z",resolved_at:null,resolved_by:null,metadata_:{client_id:"client-2",document_type:"bill_of_lading"}},{id:"workflow-3",discrepancy_id:"disc-3",lc_number:"LC-BNK-2024-003",validation_session_id:"session-3",status:"resolved",assigned_to:"user-2",due_date:"2024-01-18T17:00:00Z",priority:"medium",resolution_notes:"Client provided corrected document",created_at:"2024-01-16T08:00:00Z",updated_at:"2024-01-17T15:00:00Z",resolved_at:"2024-01-17T15:00:00Z",resolved_by:"user-2",metadata_:{client_id:"client-3",document_type:"certificate_of_origin"}}],Mqe=t=>{const s=new Date(t),r=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(r<1)return"Just now";if(r<24)return`${r}h ago`;const n=Math.floor(r/24);return n<7?`${n}d ago`:s.toLocaleDateString()},Bqe=t=>{switch(t){case"resolved":return"success";case"rejected":return"error";case"open":return"pending";case"in_progress":return"warning";case"closed":return"warning";default:return"warning"}},$qe=t=>{switch(t){case"critical":return"destructive";case"high":return"default";case"medium":return"secondary";case"low":return"outline";default:return"secondary"}};function Uqe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt();zs();const[r,n]=m.useState(!1),[i,l]=m.useState(Lqe),[o,d]=m.useState("all"),[c,u]=m.useState("all"),[h,x]=m.useState(""),[g,j]=m.useState(null),[y,b]=m.useState(!1),[N,C]=m.useState(!1),[_,A]=m.useState(!1),[k,E]=m.useState(""),[D,R]=m.useState(""),[O,P]=m.useState(null),[T,B]=m.useState(Iqe),[G,q]=m.useState(!1);m.useEffect(()=>{},[o,c]);const z=i.filter(ae=>!(o!=="all"&&ae.status!==o||c!=="all"&&ae.priority!==c||h&&!ae.lc_number.toLowerCase().includes(h.toLowerCase()))),H=ae=>{s({title:"Discrepancy Assigned",description:`Discrepancy ${ae} has been assigned to you.`}),l(re=>re.map(xe=>xe.id===ae?{...xe,assigned_to:a?.id||"user-1",status:"in_progress"}:xe)),C(!1)},le=ae=>{if(!D.trim()){s({title:"Resolution Notes Required",description:"Please provide resolution notes before resolving.",variant:"destructive"});return}s({title:"Discrepancy Resolved",description:`Discrepancy ${ae} has been resolved.`}),l(re=>re.map(xe=>xe.id===ae?{...xe,status:"resolved",resolved_at:new Date().toISOString(),resolved_by:a?.id||"user-1",resolution_notes:D}:xe)),R(""),A(!1)},Y=()=>{!g||!k.trim()||(s({title:"Comment Added",description:`Comment added to discrepancy ${g.lc_number}.`}),E(""),b(!1))},te=ae=>{P(ae),q(!0)},ne=()=>{if(!O)return;const ae=["Timestamp","Action","Actor","Details"],re=T.map(ce=>[new Date(ce.created_at).toLocaleString(),ce.action,ce.actor_id||"System",JSON.stringify(ce.details)]),xe=xR([ae,...re]),ye=new Blob([xe],{type:"text/csv"}),ke=URL.createObjectURL(ye),ze=document.createElement("a");ze.href=ke,ze.download=`discrepancy-audit-${O.lc_number}-${new Date().toISOString().split("T")[0]}.csv`,ze.click(),URL.revokeObjectURL(ke),s({title:"Audit Logs Exported",description:`Audit logs for ${O.lc_number} have been exported.`})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Discrepancy Workflow"}),e.jsx("p",{className:"text-muted-foreground",children:"Track and resolve LC validation discrepancies."})]})}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-lg flex items-center gap-2",children:[e.jsx(Nd,{className:"h-4 w-4"})," Filters"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Statuses"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Statuses"}),e.jsx(K,{value:"open",children:"Open"}),e.jsx(K,{value:"in_progress",children:"In Progress"}),e.jsx(K,{value:"resolved",children:"Resolved"}),e.jsx(K,{value:"rejected",children:"Rejected"}),e.jsx(K,{value:"closed",children:"Closed"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Priority"}),e.jsxs(Te,{value:c,onValueChange:u,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Priorities"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Priorities"}),e.jsx(K,{value:"critical",children:"Critical"}),e.jsx(K,{value:"high",children:"High"}),e.jsx(K,{value:"medium",children:"Medium"}),e.jsx(K,{value:"low",children:"Low"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Search LC Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search...",value:h,onChange:ae=>x(ae.target.value),className:"pl-8"})]})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{children:["Discrepancies (",z.length,")"]}),e.jsx(ue,{children:"Manage discrepancy resolution workflow"})]}),e.jsx(U,{children:r?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading discrepancies..."]}):z.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ve,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No discrepancies found"}),e.jsx("p",{className:"text-sm",children:"Adjust your filters to see more results"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Document Type"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Priority"}),e.jsx(je,{children:"Assigned To"}),e.jsx(je,{children:"Due Date"}),e.jsx(je,{children:"Last Updated"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:z.map(ae=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:ae.lc_number}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:ae.metadata_.document_type||"N/A"})}),e.jsx(fe,{children:e.jsx(Fa,{status:Bqe(ae.status),children:ae.status})}),e.jsx(fe,{children:e.jsx(Q,{variant:$qe(ae.priority),children:ae.priority})}),e.jsx(fe,{children:ae.assigned_to?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ec,{className:"h-4 w-4"}),"User ",ae.assigned_to.slice(-4)]}):e.jsx("span",{className:"text-muted-foreground",children:"Unassigned"})}),e.jsx(fe,{children:ae.due_date?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ya,{className:"h-4 w-4"}),new Date(ae.due_date).toLocaleDateString()]}):"N/A"}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:Mqe(ae.updated_at)}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>te(ae),tooltip:"View Audit Logs",children:e.jsx(xn,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{j(ae),b(!0)},children:e.jsx(Lg,{className:"h-4 w-4"})}),!ae.assigned_to&&e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{j(ae),C(!0)},children:[e.jsx(Ec,{className:"h-4 w-4 mr-1"})," Assign"]}),ae.status==="in_progress"&&e.jsxs(M,{variant:"default",size:"sm",onClick:()=>{j(ae),A(!0)},children:[e.jsx(Qs,{className:"h-4 w-4 mr-1"})," Resolve"]})]})})]},ae.id))})]})})]}),e.jsx(wt,{open:y,onOpenChange:b,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Add Comment"}),e.jsxs(_t,{children:["Add a comment to discrepancy ",g?.lc_number]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Comment"}),e.jsx(Zt,{placeholder:"Enter your comment...",value:k,onChange:ae=>E(ae.target.value),rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(M,{onClick:Y,disabled:!k.trim(),children:"Add Comment"})]})]})]})}),e.jsx(wt,{open:N,onOpenChange:C,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Assign Discrepancy"}),e.jsxs(_t,{children:["Assign discrepancy ",g?.lc_number," to yourself?"]})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>C(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>g&&H(g.id),children:"Assign to Me"})]})]})}),e.jsx(wt,{open:_,onOpenChange:A,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Resolve Discrepancy"}),e.jsxs(_t,{children:["Provide resolution notes for discrepancy ",g?.lc_number]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Resolution Notes"}),e.jsx(Zt,{placeholder:"Enter resolution notes...",value:D,onChange:ae=>R(ae.target.value),rows:4})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>g&&le(g.id),disabled:!D.trim(),children:"Resolve"})]})]})]})}),e.jsx(wt,{open:G,onOpenChange:q,children:e.jsxs(yt,{className:"max-w-4xl max-h-[80vh] overflow-y-auto",children:[e.jsx(jt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(bt,{children:"Audit Logs"}),e.jsxs(_t,{children:["Complete audit trail for discrepancy ",O?.lc_number]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:ne,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"})," Export CSV"]})]})}),e.jsx("div",{className:"space-y-4",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Timestamp"}),e.jsx(je,{children:"Action"}),e.jsx(je,{children:"Actor"}),e.jsx(je,{children:"Details"})]})}),e.jsx(oa,{children:T.map(ae=>e.jsxs(At,{children:[e.jsx(fe,{className:"text-sm",children:new Date(ae.created_at).toLocaleString()}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:ae.action})}),e.jsx(fe,{className:"text-sm",children:ae.actor_id?`User ${ae.actor_id.slice(-4)}`:"System"}),e.jsx(fe,{className:"text-sm",children:e.jsx("pre",{className:"text-xs bg-muted p-2 rounded overflow-x-auto",children:JSON.stringify(ae.details,null,2)})})]},ae.id))})]})})]})})]})}const zqe=[{domain:"icc",jurisdiction:"global",ruleset_version:"1.0.0",rulebook_version:"UCP600",effective_from:"2024-01-01T00:00:00Z",effective_to:null,rule_count:39},{domain:"icc",jurisdiction:"global",ruleset_version:"2.1.0",rulebook_version:"eUCP v2.1",effective_from:"2024-01-15T00:00:00Z",effective_to:null,rule_count:14}],qqe=[{id:"policy-1",action:"published",ruleset_version:"1.0.0",rulebook_version:"UCP600",domain:"icc",jurisdiction:"global",published_by:"admin@example.com",published_at:"2024-01-01T00:00:00Z"},{id:"policy-2",action:"published",ruleset_version:"2.1.0",rulebook_version:"eUCP v2.1",domain:"icc",jurisdiction:"global",published_by:"admin@example.com",published_at:"2024-01-15T00:00:00Z"}];function Vqe(){const{toast:t}=et(),{user:s}=Al(),a=s?.role==="bank_admin"||s?.role==="system_admin",[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(!1),[c,u]=m.useState({stricter_checks:{max_date_slippage_days:0,mandatory_documents:[],require_expiry_date:!1,min_amount_threshold:0},thresholds:{discrepancy_severity_override:"",auto_reject_on:[]}});m.useEffect(()=>{h()},[]);const h=async()=>{l(!0);try{const y=await Dx.listOverlays();n(y)}catch(y){console.error("Failed to load overlays",y)}finally{l(!1)}},x=async()=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can modify policy overlays",variant:"destructive"});return}try{await Dx.createOverlay({config:c}),t({title:"Success",description:"Policy overlay saved. Click 'Publish' to activate it."}),d(!1),h()}catch(y){t({title:"Error",description:y.response?.data?.detail||"Failed to save overlay",variant:"destructive"})}},g=async y=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can publish policy overlays",variant:"destructive"});return}try{await Dx.publishOverlay(y),t({title:"Success",description:"Policy overlay published and activated"}),h()}catch(b){t({title:"Error",description:b.response?.data?.detail||"Failed to publish overlay",variant:"destructive"})}},j=r.find(y=>y.active);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Policy Overlays"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure stricter validation rules for your bank"})]}),a&&e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),j?"Edit Overlay":"Create Overlay"]})}),e.jsxs(yt,{className:"max-w-2xl",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Policy Overlay Configuration"}),e.jsx(_t,{children:"Configure stricter validation checks and thresholds"})]}),e.jsxs("div",{className:"space-y-6 max-h-[60vh] overflow-y-auto",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Stricter Checks"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Max Date Slippage (days)"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Maximum allowed date difference (0 = no tolerance)"})]}),e.jsx(oe,{type:"number",className:"w-24",value:c.stricter_checks.max_date_slippage_days,onChange:y=>u({...c,stricter_checks:{...c.stricter_checks,max_date_slippage_days:parseInt(y.target.value)||0}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Require Expiry Date"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Make expiry date mandatory"})]}),e.jsx(js,{checked:c.stricter_checks.require_expiry_date,onCheckedChange:y=>u({...c,stricter_checks:{...c.stricter_checks,require_expiry_date:y}})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(Z,{children:"Min Amount Threshold"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum LC amount (0 = no threshold)"})]}),e.jsx(oe,{type:"number",className:"w-32",value:c.stricter_checks.min_amount_threshold,onChange:y=>u({...c,stricter_checks:{...c.stricter_checks,min_amount_threshold:parseFloat(y.target.value)||0}})})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Thresholds"}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Discrepancy Severity Override"}),e.jsxs("select",{className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.thresholds.discrepancy_severity_override,onChange:y=>u({...c,thresholds:{...c.thresholds,discrepancy_severity_override:y.target.value}}),children:[e.jsx("option",{value:"",children:"None"}),e.jsx("option",{value:"critical",children:"Treat all as Critical"}),e.jsx("option",{value:"major",children:"Treat all as Major"})]})]})})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:x,children:"Save Overlay"})]})]})]})]}),i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):j?e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5"}),"Active Overlay (Version ",j.version,")"]}),e.jsxs(ue,{children:["Published ",j.published_at?hs(new Date(j.published_at),"PPp"):"N/A"]})]}),e.jsx(Q,{variant:"default",children:"Active"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Stricter Checks"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Max Date Slippage: ",j.config.stricter_checks?.max_date_slippage_days??0," days"]}),e.jsxs("div",{children:["Require Expiry Date: ",j.config.stricter_checks?.require_expiry_date?"Yes":"No"]}),e.jsxs("div",{children:["Min Amount Threshold: ",j.config.stricter_checks?.min_amount_threshold??0]})]})]}),j.config.thresholds&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Thresholds"}),e.jsxs("div",{className:"text-sm",children:["Severity Override: ",j.config.thresholds.discrepancy_severity_override||"None"]})]})]})})]}):r.length>0?e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"h-5 w-5"}),"Draft Overlay (Version ",r[0].version,")"]}),e.jsxs(ue,{children:["Created ",r[0].created_at?hs(new Date(r[0].created_at),"PPp"):"N/A"]})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Stricter Checks"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:["Max Date Slippage: ",r[0].config.stricter_checks?.max_date_slippage_days??0," days"]}),e.jsxs("div",{children:["Require Expiry Date: ",r[0].config.stricter_checks?.require_expiry_date?"Yes":"No"]}),e.jsxs("div",{children:["Min Amount Threshold: ",r[0].config.stricter_checks?.min_amount_threshold??0]})]})]}),r[0].config.thresholds&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Thresholds"}),e.jsxs("div",{className:"text-sm",children:["Severity Override: ",r[0].config.thresholds.discrepancy_severity_override||"None"]})]}),a&&e.jsx("div",{className:"pt-4",children:e.jsx(M,{onClick:()=>g(r[0].id),children:"Publish Overlay"})})]})})]}):e.jsx($,{children:e.jsx(U,{className:"py-8 text-center text-muted-foreground",children:"No policy overlay. Create one to enforce stricter validation rules."})})]})}function Wqe(){const{toast:t}=et(),{user:s}=Al(),a=s?.role==="bank_admin"||s?.role==="system_admin",[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(!1),[c,u]=m.useState({rule_code:"",scope:{client:"",branch:"",product:""},reason:"",expires_at:"",effect:"waive"});m.useEffect(()=>{h()},[]);const h=async()=>{l(!0);try{const j=await Dx.listExceptions();n(j)}catch(j){console.error("Failed to load exceptions",j)}finally{l(!1)}},x=async()=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can add exceptions",variant:"destructive"});return}if(!c.rule_code||!c.reason){t({title:"Validation Error",description:"Rule code and reason are required",variant:"destructive"});return}try{await Dx.createException({...c,expires_at:c.expires_at||void 0}),t({title:"Success",description:"Exception added"}),d(!1),u({rule_code:"",scope:{client:"",branch:"",product:""},reason:"",expires_at:"",effect:"waive"}),h()}catch(j){t({title:"Error",description:j.response?.data?.detail||"Failed to add exception",variant:"destructive"})}},g=async j=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can delete exceptions",variant:"destructive"});return}try{await Dx.deleteException(j),t({title:"Success",description:"Exception removed"}),h()}catch(y){t({title:"Error",description:y.response?.data?.detail||"Failed to delete exception",variant:"destructive"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Policy Exceptions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Define exceptions to policy rules for specific scopes"})]}),a&&e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add Exception"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Add Policy Exception"}),e.jsx(_t,{children:"Create an exception to waive or modify a rule for specific clients/branches/products"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"rule-code",children:"Rule Code"}),e.jsx(oe,{id:"rule-code",placeholder:"e.g., UCP600_ARTICLE_14_B",value:c.rule_code,onChange:j=>u({...c,rule_code:j.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Scope (optional)"}),e.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[e.jsx(oe,{placeholder:"Client",value:c.scope.client,onChange:j=>u({...c,scope:{...c.scope,client:j.target.value}})}),e.jsx(oe,{placeholder:"Branch",value:c.scope.branch,onChange:j=>u({...c,scope:{...c.scope,branch:j.target.value}})}),e.jsx(oe,{placeholder:"Product",value:c.scope.product,onChange:j=>u({...c,scope:{...c.scope,product:j.target.value}})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"reason",children:"Reason"}),e.jsx("textarea",{id:"reason",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm min-h-[80px]",placeholder:"Justification for this exception",value:c.reason,onChange:j=>u({...c,reason:j.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"effect",children:"Effect"}),e.jsxs("select",{id:"effect",className:"w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:c.effect,onChange:j=>u({...c,effect:j.target.value}),children:[e.jsx("option",{value:"waive",children:"Waive (rule failure is waived)"}),e.jsx("option",{value:"downgrade",children:"Downgrade (reduce severity)"}),e.jsx("option",{value:"override",children:"Override (rule result overridden)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"expires-at",children:"Expires At (optional)"}),e.jsx(oe,{id:"expires-at",type:"datetime-local",value:c.expires_at,onChange:j=>u({...c,expires_at:j.target.value})})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:x,children:"Add Exception"})]})]})]})]}),i?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading..."}):r.length===0?e.jsx($,{children:e.jsx(U,{className:"py-8 text-center text-muted-foreground",children:"No exceptions defined. Add exceptions to waive or modify rules for specific scopes."})}):e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Active Exceptions"}),e.jsx(ue,{children:"Exceptions that modify or waive validation rules"})]}),e.jsx(U,{children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Rule Code"}),e.jsx(je,{children:"Scope"}),e.jsx(je,{children:"Effect"}),e.jsx(je,{children:"Expires"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:r.map(j=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-mono text-sm",children:j.rule_code}),e.jsx(fe,{children:Object.entries(j.scope||{}).filter(([y,b])=>b).map(([y,b])=>`${y}: ${b}`).join(", ")||"All"}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:j.effect})}),e.jsx(fe,{children:j.expires_at?hs(new Date(j.expires_at),"PPp"):"Never"}),e.jsx(fe,{className:"text-right",children:a&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>g(j.id),children:e.jsx(ia,{className:"w-4 h-4"})})})]},j.id))})]})})]})]})}function Hqe(){const{toast:t}=et(),[s,a]=m.useState(null),[r,n]=m.useState(!0),[i,l]=m.useState("30d");m.useEffect(()=>{o()},[i]);const o=async()=>{n(!0);try{const d=await Dx.getAnalytics(i);a(d)}catch(d){console.error("Failed to load analytics",d),t({title:"Error",description:"Failed to load analytics data",variant:"destructive"})}finally{n(!1)}};return r?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"text-muted-foreground",children:"Loading analytics..."})}):s?e.jsxs("div",{className:"space-y-6",children:[e.jsx($,{children:e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"h-5 w-5"})," Policy Analytics"]}),e.jsx(ue,{children:"Usage statistics and effectiveness metrics for policy overlays and exceptions"})]}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"7d",children:"Last 7 days"}),e.jsx(K,{value:"30d",children:"Last 30 days"}),e.jsx(K,{value:"90d",children:"Last 90 days"}),e.jsx(K,{value:"365d",children:"Last year"})]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Policy Usage Rate"})}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-3xl font-bold",children:[s.impact_metrics.policy_usage_rate,"%"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[s.impact_metrics.validations_with_policy," of ",s.impact_metrics.total_validations," validations"]})]})]}),e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Total Discrepancy Reduction"})}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-3xl font-bold flex items-center gap-2",children:[s.impact_metrics.total_discrepancy_reduction,e.jsx(lr,{className:"h-5 w-5 text-green-600"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Avg ",s.impact_metrics.avg_discrepancy_reduction_per_validation.toFixed(1)," per validation"]})]})]}),e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Overlay Applications"})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s.overlay_stats.reduce((d,c)=>d+c.total_applications,0)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Across ",s.overlay_stats.length," overlay version(s)"]})]})]}),e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Exception Applications"})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold",children:s.exception_stats.reduce((d,c)=>d+c.total_applications,0)}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Across ",s.exception_stats.length," exception(s)"]})]})]})]}),s.overlay_stats.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Overlay Usage Statistics"}),e.jsx(ue,{children:"Performance metrics for policy overlay versions"})]}),e.jsx(U,{children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Version"}),e.jsx(je,{children:"Applications"}),e.jsx(je,{children:"Unique Sessions"}),e.jsx(je,{children:"Avg Reduction"}),e.jsx(je,{children:"Avg Processing Time"}),e.jsx(je,{children:"Last Applied"})]})}),e.jsx(oa,{children:s.overlay_stats.map((d,c)=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs(Q,{variant:"outline",children:["v",d.overlay_version]})}),e.jsx(fe,{children:d.total_applications}),e.jsx(fe,{children:d.unique_sessions}),e.jsx(fe,{children:e.jsx("div",{className:"flex items-center gap-1",children:d.avg_discrepancy_reduction>0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-green-600",children:d.avg_discrepancy_reduction.toFixed(1)})]}):e.jsx("span",{children:d.avg_discrepancy_reduction.toFixed(1)})})}),e.jsxs(fe,{children:[d.avg_processing_time_ms.toFixed(0),"ms"]}),e.jsx(fe,{children:d.last_applied_at?hs(new Date(d.last_applied_at),"MMM d, yyyy HH:mm"):"Never"})]},c))})]})})]}),s.exception_stats.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Exception Effectiveness"}),e.jsx(ue,{children:"Metrics for policy exceptions by rule"})]}),e.jsx(U,{children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Rule Code"}),e.jsx(je,{children:"Effect"}),e.jsx(je,{children:"Applications"}),e.jsx(je,{children:"Waived"}),e.jsx(je,{children:"Downgraded"}),e.jsx(je,{children:"Overridden"}),e.jsx(je,{children:"Avg Reduction"})]})}),e.jsx(oa,{children:s.exception_stats.map((d,c)=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-mono text-sm",children:d.rule_code}),e.jsx(fe,{children:e.jsx(Q,{variant:d.effect==="waive"?"default":"secondary",children:d.effect})}),e.jsx(fe,{children:d.total_applications}),e.jsx(fe,{children:d.waived_count}),e.jsx(fe,{children:d.downgraded_count}),e.jsx(fe,{children:d.overridden_count}),e.jsx(fe,{children:d.avg_discrepancy_reduction>0?e.jsx("span",{className:"text-green-600",children:d.avg_discrepancy_reduction.toFixed(1)}):e.jsx("span",{children:d.avg_discrepancy_reduction.toFixed(1)})})]},c))})]})})]}),s.top_exceptions.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Top Exceptions by Usage"}),e.jsx(ue,{children:"Most frequently applied exceptions"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:s.top_exceptions.map((d,c)=>e.jsx("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm",children:d.rule_code}),e.jsx(Q,{variant:"outline",children:d.effect})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.total_applications," applications â€¢ Avg reduction: ",d.avg_discrepancy_reduction.toFixed(1)]})]})},c))})})]}),s.impact_metrics.most_affected_rules.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Most Affected Rules"}),e.jsx(ue,{children:"Rules most frequently impacted by policy applications"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:s.impact_metrics.most_affected_rules.map((d,c)=>e.jsx("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"font-mono text-sm",children:d.rule_code}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[d.application_count," applications â€¢ Avg reduction: ",d.avg_discrepancy_reduction.toFixed(1)]})]})},c))})})]}),Object.keys(s.impact_metrics.severity_changes).length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Severity Changes"}),e.jsx(ue,{children:"Net changes in discrepancy severity due to policy applications"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-2",children:Object.entries(s.impact_metrics.severity_changes).map(([d,c])=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"capitalize",children:d}),e.jsx("div",{className:"flex items-center gap-2",children:c>0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-4 w-4 text-red-600"}),e.jsxs("span",{className:"text-red-600 font-semibold",children:["+",c]})]}):c<0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-green-600 font-semibold",children:c})]}):e.jsx("span",{children:c})})]},d))})})]}),s.overlay_adoption.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Overlay Version Adoption"}),e.jsx(ue,{children:"Session count by overlay version"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:s.overlay_adoption.map((d,c)=>e.jsx("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Q,{variant:"outline",children:["v",d.version]}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.session_count," validation session(s)"]})]})},c))})})]})]}):e.jsx($,{children:e.jsx(U,{className:"py-8 text-center text-muted-foreground",children:"No analytics data available"})})}function Gqe({embedded:t=!1}){const{user:s}=Al();if(!(s?.role==="bank_admin"||s?.role==="system_admin"))return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Access Denied"}),e.jsx(ue,{children:"Policy configuration is restricted to bank administrators only."})]}),e.jsx(U,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Bank officers can view active policies but cannot modify them. Contact your bank administrator for policy changes."})})]});const[r,n]=m.useState("rulesets");return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Policy Surface"}),e.jsx("p",{className:"text-muted-foreground",children:"View active rulesets, configure overlays, and manage exceptions."})]})}),e.jsxs(Os,{value:r,onValueChange:n,children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"rulesets",children:"Active Rulesets"}),e.jsx(He,{value:"overlays",children:"Overlays"}),e.jsx(He,{value:"exceptions",children:"Exceptions"}),e.jsx(He,{value:"analytics",children:"Analytics"})]}),e.jsxs(Qe,{value:"rulesets",className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"})," Active Rulesets"]}),e.jsx(ue,{children:"Currently active validation rulesets by domain and jurisdiction"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:zqe.map((i,l)=>e.jsxs("div",{className:"border rounded-lg p-4 space-y-3",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-lg",children:i.rulebook_version}),e.jsx(Q,{variant:"outline",children:i.ruleset_version}),e.jsxs(Fa,{status:"success",children:[e.jsx(Qs,{className:"h-3 w-3 mr-1"})," Active"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ha,{className:"h-4 w-4"}),i.domain.toUpperCase()," / ",i.jurisdiction]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Be,{className:"h-4 w-4"}),i.rule_count," rules"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ya,{className:"h-4 w-4"}),"Effective from ",new Date(i.effective_from).toLocaleDateString()]})]})]})}),i.effective_to&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx(ks,{className:"h-4 w-4 inline mr-1"}),"Scheduled to expire on ",new Date(i.effective_to).toLocaleDateString()]})]},l))})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Policy History"}),e.jsx(ue,{children:"Recent ruleset publication and rollback events"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:qqe.map(i=>e.jsx("div",{className:"flex items-center justify-between border-b pb-3 last:border-0",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:i.action==="published"?"default":"secondary",children:i.action}),e.jsx("span",{className:"font-medium",children:i.rulebook_version}),e.jsx(Q,{variant:"outline",children:i.ruleset_version})]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[i.domain.toUpperCase()," / ",i.jurisdiction," â€¢ Published by ",i.published_by," â€¢ ",new Date(i.published_at).toLocaleString()]})]})},i.id))})})]})]}),e.jsx(Qe,{value:"overlays",children:e.jsx(Vqe,{})}),e.jsx(Qe,{value:"exceptions",children:e.jsx(Wqe,{})}),e.jsx(Qe,{value:"analytics",children:e.jsx(Hqe,{})})]})]})}const Kqe=[{id:1,title:"Approval Required",message:"LC-BNK-2024-001 requires your approval at Analyst Review stage.",type:"approval",timestamp:"15 minutes ago",read:!1,link:"/lcopilot/bank-dashboard?tab=approvals&lc=LC-BNK-2024-001",badge:"Pending",action:{label:"Review Approval",action:()=>{}}},{id:2,title:"Discrepancy Assigned",message:"You have been assigned to resolve discrepancy in LC-BNK-2024-002.",type:"discrepancy",timestamp:"1 hour ago",read:!1,link:"/lcopilot/bank-dashboard?tab=discrepancies&lc=LC-BNK-2024-002",badge:"High Priority",action:{label:"View Discrepancy",action:()=>{},variant:"destructive"}},{id:3,title:"Validation Complete",message:"LC-BNK-2024-003 validation completed successfully with no issues.",type:"success",timestamp:"3 hours ago",read:!1,link:"/lcopilot/bank-dashboard?tab=results&lc=LC-BNK-2024-003",action:{label:"View Results",action:()=>{}}},{id:4,title:"Policy Update",message:"New UCP600 ruleset v1.0.0 has been published and is now active.",type:"info",timestamp:"1 day ago",read:!0,link:"/lcopilot/bank-dashboard?tab=policy",action:{label:"View Policy",action:()=>{}}}];function Yqe({embedded:t=!1}){const[s,a]=m.useState(Kqe);zt();const r=l=>{a(o=>o.map(d=>d.id===l?{...d,read:!0}:d))},n=l=>{a(o=>o.filter(d=>d.id!==l))},i=()=>{a(l=>l.map(o=>({...o,read:!0})))};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:"Stay updated on approvals, discrepancies, and system updates."})]})}),e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsx(uR,{notifications:s,onMarkAsRead:r,onDismiss:n,onMarkAllAsRead:i,showHeader:!0})})})]})}const Zqe=[{id:"job-1",lc_number:"LC-BNK-2024-001",client_name:"Global Importers Ltd",priority:5,status:"queued",queue:"standard",attempts:0,maxRetries:3,createdAt:new Date(Date.now()-1e3*60*5).toISOString(),scheduledAt:new Date(Date.now()-1e3*60*5).toISOString()},{id:"job-2",lc_number:"LC-BNK-2024-002",client_name:"Trade Partners Inc",priority:8,status:"running",queue:"priority",attempts:0,maxRetries:3,createdAt:new Date(Date.now()-1e3*60*15).toISOString(),scheduledAt:new Date(Date.now()-1e3*60*15).toISOString(),startedAt:new Date(Date.now()-1e3*60*10).toISOString()},{id:"job-3",lc_number:"LC-BNK-2024-003",client_name:"Export Solutions Co",priority:3,status:"failed",queue:"standard",attempts:2,maxRetries:3,createdAt:new Date(Date.now()-1e3*60*120).toISOString(),scheduledAt:new Date(Date.now()-1e3*60*120).toISOString(),errorMessage:"Document parsing failed"},{id:"job-4",lc_number:"LC-BNK-2024-004",client_name:"International Trade Ltd",priority:7,status:"succeeded",queue:"priority",attempts:0,maxRetries:3,createdAt:new Date(Date.now()-1e3*60*45).toISOString(),scheduledAt:new Date(Date.now()-1e3*60*45).toISOString(),completedAt:new Date(Date.now()-1e3*60*40).toISOString(),durationMs:18e4}],Jqe=t=>{if(t.durationMs)return t.durationMs<1e3?`${t.durationMs}ms`:`${(t.durationMs/1e3).toFixed(1)}s`;if(t.startedAt&&t.status==="running"){const s=Date.now()-new Date(t.startedAt).getTime();return s<1e3?`${s}ms`:`${(s/1e3).toFixed(1)}s`}return"-"},Qqe=t=>{if(!t)return"-";const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`};function Xqe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Al(),[r,n]=zs(),{jobs:i}=Xte({enabled:!0}),[l,o]=m.useState([]),[d,c]=m.useState(!1),[u,h]=m.useState({page:1,total:0,pages:0}),[x,g]=m.useState(()=>{const he=r.get("status");return he?he.split(",").filter(Boolean):[]}),[j,y]=m.useState(()=>{const he=r.get("priority");return he?he.split(",").filter(Boolean):[]}),[b,N]=m.useState(()=>{const he=r.get("queue");return he?he.split(",").filter(Boolean):[]}),[C,_]=m.useState(r.get("search")??""),[A,k]=m.useState(()=>{const he=localStorage.getItem("bank_queue_saved_views");return he?JSON.parse(he):[]}),[E,D]=m.useState(null),[R,O]=m.useState(!1),[P,T]=m.useState(!1),[B,G]=m.useState(!1),[q,z]=m.useState(null),[H,le]=m.useState(""),[Y,te]=m.useState(new Set),[ne,ae]=m.useState("");m.useEffect(()=>{const he=new URLSearchParams(r),_e=r.get("tab");x.length?he.set("status",x.join(",")):he.delete("status"),j.length?he.set("priority",j.join(",")):he.delete("priority"),b.length?he.set("queue",b.join(",")):he.delete("queue"),C?he.set("search",C):he.delete("search"),E?he.set("view",E):he.delete("view"),_e&&he.set("tab",_e),n(he,{replace:!0})},[x,j,b,C,E,r,n]),m.useEffect(()=>{const he=r.get("view");if(he){const _e=A.find(at=>at.id===he);_e&&(D(he),_e.filters.status&&g(_e.filters.status),_e.filters.priority&&y(_e.filters.priority.map(String)),_e.filters.queue&&N(_e.filters.queue),_e.filters.search&&_(_e.filters.search))}},[r,A]),m.useEffect(()=>{xe()},[x,C,u.page]);const re=he=>({queued:"queued",running:"running",completed:"succeeded",failed:"failed",cancelled:"cancelled"})[he]||"queued",xe=m.useCallback(async()=>{c(!0);try{const he=x.length===1?x[0]:void 0,_e=await lN.getQueue({status:he,job_type:void 0,search:C||void 0,limit:50,offset:(u.page-1)*50}),at=_e.items.map(nt=>({id:nt.id,lc_number:nt.job_data?.lc_number||nt.lc_id||`LC-${nt.id.slice(0,8)}`,client_name:nt.job_data?.client_name||"Unknown Client",priority:nt.priority,status:re(nt.status),queue:nt.job_type==="validation"?"standard":"priority",attempts:nt.attempts,maxRetries:nt.max_attempts,createdAt:nt.created_at,scheduledAt:nt.scheduled_at,startedAt:nt.started_at,completedAt:nt.completed_at,errorMessage:nt.error_message,durationMs:nt.completed_at&&nt.started_at?new Date(nt.completed_at).getTime()-new Date(nt.started_at).getTime():void 0}));o(at),h({page:_e.page,total:_e.total,pages:_e.pages})}catch(he){console.warn("Failed to reload jobs:",he?.message),l.length===0&&o(Zqe)}finally{c(!1)}},[x,C,u.page,l.length]),ye=async he=>{if(!H.trim()){s({title:"Reason Required",description:"Please provide a reason for retrying this job.",variant:"destructive"});return}c(!0);try{await lN.retryJob(he,H),s({title:"Job Retried",description:`Job ${he} has been queued for retry.`}),await xe(),O(!1),le(""),z(null)}catch(_e){s({title:"Retry Failed",description:_e?.response?.data?.detail||"Failed to retry job. Please try again.",variant:"destructive"})}finally{c(!1)}},ke=async he=>{if(!H.trim()){s({title:"Reason Required",description:"Please provide a reason for cancelling this job.",variant:"destructive"});return}c(!0);try{await lN.cancelJob(he,H),s({title:"Job Cancelled",description:`Job ${he} has been cancelled.`}),await xe(),T(!1),le(""),z(null)}catch(_e){s({title:"Cancel Failed",description:_e?.response?.data?.detail||"Failed to cancel job. Please try again.",variant:"destructive"})}finally{c(!1)}},ze=async()=>{if(Y.size!==0){if(!H.trim()){s({title:"Reason Required",description:"Please provide a reason for retrying these jobs.",variant:"destructive"});return}c(!0);try{await lN.bulkAction({job_ids:Array.from(Y),action:"retry",reason:H}),s({title:"Jobs Retried",description:`${Y.size} job(s) have been queued for retry.`}),await xe(),te(new Set),le("")}catch(he){s({title:"Bulk Retry Failed",description:he?.response?.data?.detail||"Failed to retry jobs. Please try again.",variant:"destructive"})}finally{c(!1)}}},ce=()=>{if(!ne.trim()){s({title:"View Name Required",description:"Please provide a name for this saved view.",variant:"destructive"});return}const he={id:`view-${Date.now()}`,name:ne,filters:{status:x.length?x:void 0,priority:j.length?j.map(Number):void 0,queue:b.length?b:void 0,search:C||void 0}},_e=[...A,he];k(_e),localStorage.setItem("bank_queue_saved_views",JSON.stringify(_e)),s({title:"View Saved",description:`Saved view "${ne}" has been created.`}),G(!1),ae("")},Re=he=>{D(he.id),he.filters.status&&g(he.filters.status),he.filters.priority&&y(he.filters.priority.map(String)),he.filters.queue&&N(he.filters.queue),he.filters.search&&_(he.filters.search),s({title:"View Loaded",description:`Loaded view "${he.name}".`})},ie=()=>{const he=window.location.href;navigator.clipboard.writeText(he),s({title:"Link Copied",description:"Deep link copied to clipboard."})},Ne=(he,_e)=>{o(at=>at.map(nt=>nt.id===he?{...nt,priority:_e}:nt)),s({title:"Priority Updated",description:`Job priority updated to ${_e}.`})},Ue=m.useMemo(()=>{const he=new Map;return l.forEach(_e=>he.set(_e.id,_e)),i&&i.length>0&&i.forEach(_e=>{const at={id:_e.id,lc_number:_e.lc_number||`LC-${_e.id.slice(0,8)}`,client_name:_e.client_name||"Unknown Client",priority:5,status:re(_e.status),queue:"standard",attempts:0,maxRetries:3,createdAt:_e.submitted_at||_e.processing_started_at||new Date().toISOString(),scheduledAt:_e.submitted_at||new Date().toISOString(),startedAt:_e.processing_started_at,completedAt:_e.completed_at,errorMessage:void 0,durationMs:_e.processing_time_seconds?_e.processing_time_seconds*1e3:_e.completed_at&&_e.processing_started_at?new Date(_e.completed_at).getTime()-new Date(_e.processing_started_at).getTime():void 0};he.set(_e.id,at)}),Array.from(he.values())},[l,i]),ge=m.useMemo(()=>{let he=Ue;if(x.length>0&&(he=he.filter(_e=>x.includes(_e.status))),j.length>0){const _e=j.map(Number);he=he.filter(at=>_e.includes(at.priority))}if(b.length>0&&(he=he.filter(_e=>b.includes(_e.queue))),C.trim()){const _e=C.toLowerCase();he=he.filter(at=>at.lc_number.toLowerCase().includes(_e)||at.client_name.toLowerCase().includes(_e))}return he},[Ue,x,j,b,C]);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Queue Operations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage validation jobs with priorities, filters, and saved views."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",onClick:ie,className:"gap-2",children:[e.jsx(due,{className:"h-4 w-4"})," Copy Link"]}),e.jsxs(M,{variant:"outline",onClick:()=>G(!0),className:"gap-2",children:[e.jsx(Bi,{className:"h-4 w-4"})," Save View"]})]})]}),A.length>0&&e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm font-medium",children:"Saved Views"})}),e.jsx(U,{children:e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(he=>e.jsxs(M,{variant:E===he.id?"default":"outline",size:"sm",onClick:()=>Re(he),className:"gap-2",children:[e.jsx(Zq,{className:"h-3 w-3"}),he.name]},he.id))})})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm font-medium",children:"Filters"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Search"}),e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-2 top-2.5 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"LC number, client...",value:C,onChange:he=>_(he.target.value),className:"pl-8"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Status"}),e.jsxs(Te,{value:x.join(",")||"all",onValueChange:he=>g(he==="all"?[]:he.split(",")),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Statuses"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Statuses"}),e.jsx(K,{value:"queued",children:"Queued"}),e.jsx(K,{value:"running",children:"Running"}),e.jsx(K,{value:"succeeded",children:"Succeeded"}),e.jsx(K,{value:"failed",children:"Failed"}),e.jsx(K,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Priority"}),e.jsxs(Te,{value:j.join(",")||"all",onValueChange:he=>y(he==="all"?[]:he.split(",")),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Priorities"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Priorities"}),e.jsx(K,{value:"9,10",children:"High (9-10)"}),e.jsx(K,{value:"7,8",children:"Medium-High (7-8)"}),e.jsx(K,{value:"5,6",children:"Medium (5-6)"}),e.jsx(K,{value:"1,2,3,4",children:"Low (1-4)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Queue"}),e.jsxs(Te,{value:b.join(",")||"all",onValueChange:he=>N(he==="all"?[]:he.split(",")),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"All Queues"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Queues"}),e.jsx(K,{value:"priority",children:"Priority"}),e.jsx(K,{value:"standard",children:"Standard"}),e.jsx(K,{value:"bulk",children:"Bulk"})]})]})]})]})})]}),Y.size>0&&e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[Y.size," job(s) selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:ze,disabled:d,className:"gap-2",children:[e.jsx(yu,{className:"h-4 w-4"})," Retry Selected"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>te(new Set),children:"Clear Selection"})]})]})})}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium",children:["Jobs (",ge.length,")"]})}),e.jsx(U,{children:d?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading jobs..."]}):ge.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(mt,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No jobs found matching your filters."})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{className:"w-12",children:e.jsx(rr,{checked:Y.size===ge.length&&ge.length>0,onCheckedChange:he=>{te(he?new Set(ge.map(_e=>_e.id)):new Set)}})}),e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Client"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Priority"}),e.jsx(je,{children:"Queue"}),e.jsx(je,{children:"Attempts"}),e.jsx(je,{children:"Created"}),e.jsx(je,{children:"Duration"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:ge.map(he=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsx(rr,{checked:Y.has(he.id),onCheckedChange:_e=>{const at=new Set(Y);_e?at.add(he.id):at.delete(he.id),te(at)}})}),e.jsx(fe,{className:"font-medium",children:he.lc_number}),e.jsx(fe,{children:he.client_name}),e.jsx(fe,{children:e.jsx(Fa,{status:he.status==="succeeded"?"success":he.status==="failed"?"error":he.status==="running"?"pending":"warning",children:he.status})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Ne(he.id,Math.max(1,he.priority-1)),disabled:he.priority<=1,children:e.jsx(kD,{className:"h-3 w-3"})}),e.jsx(Q,{variant:"outline",children:he.priority}),e.jsx(M,{variant:"ghost",size:"sm",className:"h-6 w-6 p-0",onClick:()=>Ne(he.id,Math.min(10,he.priority+1)),disabled:he.priority>=10,children:e.jsx(T1,{className:"h-3 w-3"})})]})}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:he.queue})}),e.jsxs(fe,{children:[he.attempts,"/",he.maxRetries]}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:Qqe(he.createdAt)}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:Jqe(he)}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[he.status==="failed"&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>{z(he),O(!0)},className:"gap-2",children:[e.jsx(yu,{className:"h-4 w-4"})," Retry"]}),(he.status==="queued"||he.status==="running")&&e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>{z(he),T(!0)},className:"gap-2",children:[e.jsx(uV,{className:"h-4 w-4"})," Cancel"]})]})})]},he.id))})]})})]}),e.jsx(wt,{open:R,onOpenChange:O,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Retry Job"}),e.jsxs(_t,{children:["Retry job ",q?.lc_number,". Please provide a reason."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Reason"}),e.jsx(Zt,{placeholder:"Enter reason for retrying this job...",value:H,onChange:he=>le(he.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>O(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>q&&ye(q.id),disabled:d,children:"Retry Job"})]})]})]})}),e.jsx(wt,{open:P,onOpenChange:T,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Cancel Job"}),e.jsxs(_t,{children:["Cancel job ",q?.lc_number,". Please provide a reason."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Reason"}),e.jsx(Zt,{placeholder:"Enter reason for cancelling this job...",value:H,onChange:he=>le(he.target.value),rows:3})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>T(!1),children:"Cancel"}),e.jsx(M,{variant:"destructive",onClick:()=>q&&ke(q.id),disabled:d,children:"Cancel Job"})]})]})]})}),e.jsx(wt,{open:B,onOpenChange:G,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Save Current View"}),e.jsx(_t,{children:"Save your current filters as a reusable view."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"View Name"}),e.jsx(oe,{placeholder:"e.g., High Priority Failed Jobs",value:ne,onChange:he=>ae(he.target.value)})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),e.jsx(M,{onClick:ce,children:"Save View"})]})]})]})})]})}const iA={met:"#22c55e",at_risk:"#f59e0b",breached:"#ef4444"};function eVe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt();zs();const[r,n]=m.useState("week"),{data:i,isLoading:l,refetch:o}=Ks({queryKey:["sla-metrics",r],queryFn:()=>mn.getSLAMetrics(r),staleTime:30*1e3}),{data:d,isLoading:c,refetch:u}=Ks({queryKey:["sla-breaches",r],queryFn:()=>mn.getSLABreaches(r),staleTime:30*1e3}),h=i?.metrics||[],x=d?.breaches||[],g=i?.overall_compliance||0,j=i?.throughput_data||[],y=i?.aging_data||[],b=async()=>{try{await mn.exportSLAReport(r,"pdf"),s({title:"SLA Report Exported",description:"Your SLA report has been downloaded."})}catch(N){s({title:"Export Failed",description:N.message||"Failed to export SLA report. Please try again.",variant:"destructive"})}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"SLA Dashboards"}),e.jsx("p",{className:"text-muted-foreground",children:"Monitor service level agreements, throughput, aging, and breach incidents."})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Te,{value:r,onValueChange:n,children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Time Range"})}),e.jsxs(De,{children:[e.jsx(K,{value:"today",children:"Today"}),e.jsx(K,{value:"week",children:"This Week"}),e.jsx(K,{value:"month",children:"This Month"}),e.jsx(K,{value:"quarter",children:"This Quarter"})]})]}),e.jsxs(M,{variant:"outline",onClick:b,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Export Report"]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:"Overall SLA Compliance"}),e.jsx(ue,{children:"Current compliance across all SLA metrics"})]}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"relative w-24 h-24",children:[e.jsxs("svg",{className:"w-24 h-24 transform -rotate-90",children:[e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",className:"text-muted"}),e.jsx("circle",{cx:"48",cy:"48",r:"40",stroke:"currentColor",strokeWidth:"8",fill:"none",strokeDasharray:`${g/100*251.2} 251.2`,className:g>=90?"text-green-500":g>=75?"text-yellow-500":"text-red-500"})]}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsxs("span",{className:"text-2xl font-bold",children:[g,"%"]})})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Compliance Rate"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[h.filter(N=>N.status==="met").length," of ",h.length," metrics met"]})]})]}),e.jsxs("div",{className:"flex-1 grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-green-600",children:h.filter(N=>N.status==="met").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Met"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:h.filter(N=>N.status==="at_risk").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"At Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-2xl font-bold text-red-600",children:h.filter(N=>N.status==="breached").length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Breached"})]})]})]})})]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:h.map(N=>e.jsxs($,{children:[e.jsx(X,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"text-sm font-medium",children:N.name}),e.jsx(Fa,{status:N.status==="met"?"success":N.status==="at_risk"?"warning":"destructive",children:N.status==="met"?"Met":N.status==="at_risk"?"At Risk":"Breached"})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold text-foreground",children:[N.current," ",N.unit]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Target: ",N.target," ",N.unit]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[N.trend==="up"?e.jsx(Vt,{className:"h-4 w-4 text-red-500"}):N.trend==="down"?e.jsx(lr,{className:"h-4 w-4 text-green-500"}):e.jsx(Ws,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:`text-xs font-medium ${N.trend==="up"?"text-red-500":N.trend==="down"?"text-green-500":"text-muted-foreground"}`,children:[N.trendPercentage>0?"+":"",N.trendPercentage.toFixed(1),"%"]})]})]}),e.jsx(es,{value:N.current/N.target*100,className:"h-2"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.current<N.target?`${((N.target-N.current)/N.target*100).toFixed(1)}% below target`:`${((N.current-N.target)/N.target*100).toFixed(1)}% above target`})]})})]},N.name))}),e.jsxs(Os,{defaultValue:"throughput",className:"w-full",children:[e.jsxs(Fs,{children:[e.jsx(He,{value:"throughput",children:"Throughput"}),e.jsx(He,{value:"aging",children:"Aging Distribution"}),e.jsx(He,{value:"breaches",children:"Breaches"})]}),e.jsx(Qe,{value:"throughput",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:"LC Processing Throughput"}),e.jsx(ue,{children:"Number of LCs processed per hour"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:300,children:e.jsxs(mh,{data:j,children:[e.jsx(wi,{strokeDasharray:"3 3"}),e.jsx(Gn,{dataKey:"hour"}),e.jsx(Kn,{}),e.jsx(kn,{}),e.jsx(Ho,{}),e.jsx(Fc,{dataKey:"lcs",fill:"#3b82f6",name:"LCs Processed"})]})})})]})}),e.jsx(Qe,{value:"aging",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-sm font-medium",children:"Queue Aging Distribution"}),e.jsx(ue,{children:"Distribution of LCs by queue time"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsx(qn,{width:"100%",height:300,children:e.jsxs(mh,{data:y,children:[e.jsx(wi,{strokeDasharray:"3 3"}),e.jsx(Gn,{dataKey:"time_range"}),e.jsx(Kn,{}),e.jsx(kn,{}),e.jsx(Ho,{}),e.jsx(Fc,{dataKey:"count",fill:"#8b5cf6",name:"LC Count",children:y.map((N,C)=>e.jsx(Eu,{fill:C===0?iA.met:C===1?iA.at_risk:iA.breached},`cell-${C}`))})]})}),e.jsx("div",{className:"grid grid-cols-4 gap-2 text-sm",children:y.map(N=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-semibold",children:N.count}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.time_range}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["(",N.percentage,"%)"]})]},N.time_range))})]})})]})}),e.jsx(Qe,{value:"breaches",className:"mt-6",children:e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium",children:"SLA Breaches"}),e.jsx(ue,{children:"Recent SLA breach incidents"})]}),e.jsxs(Q,{variant:"destructive",children:[x.length," breaches"]})]})}),e.jsx(U,{children:c?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading breaches..."]}):x.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Qs,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No SLA breaches in the selected time range"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Client"}),e.jsx(je,{children:"Metric"}),e.jsx(je,{children:"Target"}),e.jsx(je,{children:"Actual"}),e.jsx(je,{children:"Breach Time"}),e.jsx(je,{children:"Severity"})]})}),e.jsx(oa,{children:x.map(N=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:N.lc_number}),e.jsx(fe,{children:N.client_name}),e.jsx(fe,{children:N.metric}),e.jsx(fe,{children:N.target}),e.jsx(fe,{className:"text-destructive font-medium",children:N.actual}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:new Date(N.breach_time).toLocaleString()}),e.jsx(fe,{children:e.jsx(Fa,{status:N.severity==="critical"?"error":N.severity==="major"?"warning":"pending",children:N.severity})})]},N.id))})]})})]})})]})]})}function tVe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Dt();zs();const[r,n]=m.useState(new Set),[i,l]=m.useState("pdf"),[o,d]=m.useState(!0),[c,u]=m.useState(!0),[h,x]=m.useState(!0),[g,j]=m.useState(!1),[y,b]=m.useState(!1),{data:N=[],isLoading:C,refetch:_}=Ks({queryKey:["evidence-pack-sessions"],queryFn:()=>mn.listValidationSessions({limit:50,status:"completed"}),staleTime:30*1e3}),A=()=>{r.size===N.length?n(new Set):n(new Set(N.map(R=>R.id)))},k=R=>{const O=new Set(r);O.has(R)?O.delete(R):O.add(R),n(O)},E=async()=>{if(r.size===0){s({title:"No Sessions Selected",description:"Please select at least one validation session to include in the evidence pack.",variant:"destructive"});return}j(!0);try{const R={session_ids:Array.from(r),format:i,include_documents:o,include_findings:c,include_audit_trail:h},O=await mn.generateEvidencePack(R);O.download_url&&window.open(O.download_url,"_blank"),s({title:"Evidence Pack Generated",description:`Your ${i.toUpperCase()} evidence pack with ${r.size} session(s) is ready for download.`}),b(!1),n(new Set)}catch(R){s({title:"Generation Failed",description:R.message||"Failed to generate evidence pack. Please try again.",variant:"destructive"})}finally{j(!1)}},D=async R=>{n(new Set([R])),l("pdf"),d(!0),u(!0),x(!0),b(!0)};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Evidence Packs"}),e.jsx("p",{className:"text-muted-foreground",children:"Generate comprehensive evidence packs (PDF/ZIP) with validation findings, documents, and audit trails."})]}),e.jsxs(wt,{open:y,onOpenChange:b,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{disabled:r.size===0,className:"gap-2",children:[e.jsx(Ps,{className:"h-4 w-4"}),"Generate Pack (",r.size,")"]})}),e.jsxs(yt,{className:"sm:max-w-md",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Generate Evidence Pack"}),e.jsxs(_t,{children:["Configure your evidence pack options for ",r.size," selected session(s)."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Pack Format"}),e.jsxs(Te,{value:i,onValueChange:R=>l(R),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"pdf",children:"PDF Report"}),e.jsx(K,{value:"zip",children:"ZIP Archive"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i==="pdf"?"Single PDF document with all findings and embedded attachments":"ZIP archive containing PDF report and separate document files"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Include"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"include-findings",checked:c,onCheckedChange:R=>u(R===!0)}),e.jsx(Z,{htmlFor:"include-findings",className:"font-normal cursor-pointer",children:"Validation Findings & Discrepancies"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"include-documents",checked:o,onCheckedChange:R=>d(R===!0)}),e.jsx(Z,{htmlFor:"include-documents",className:"font-normal cursor-pointer",children:"Original Documents"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"include-audit",checked:h,onCheckedChange:R=>x(R===!0)}),e.jsx(Z,{htmlFor:"include-audit",className:"font-normal cursor-pointer",children:"Audit Trail & Timestamps"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(M,{variant:"outline",onClick:()=>b(!1),children:"Cancel"}),e.jsx(M,{onClick:E,disabled:g,children:g?e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"h-4 w-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Generate & Download"]})})]})]})]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"About Evidence Packs"]})}),e.jsxs(U,{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsx("p",{children:"Evidence packs provide a complete audit trail for LC validations, including:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-2",children:[e.jsx("li",{children:"Validation findings and discrepancy details"}),e.jsx("li",{children:"Original uploaded documents"}),e.jsx("li",{children:"Processing timestamps and audit logs"}),e.jsx("li",{children:"Compliance scores and status"})]}),e.jsxs("p",{className:"mt-2",children:[e.jsx("strong",{children:"PDF Format:"})," Single document with embedded attachments (best for single LC or small batches)"]}),e.jsxs("p",{children:[e.jsx("strong",{children:"ZIP Format:"})," Archive with separate PDF report and document files (best for multiple LCs or large batches)"]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-sm font-medium",children:"Validation Sessions"}),e.jsx(ue,{children:"Select sessions to include in your evidence pack"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(M,{variant:"outline",size:"sm",onClick:A,children:r.size===N.length?"Deselect All":"Select All"})})]})}),e.jsx(U,{children:C?e.jsxs("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"})," Loading sessions..."]}):N.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No validation sessions found"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{className:"w-12",children:e.jsx(rr,{checked:r.size===N.length,onCheckedChange:A})}),e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Client"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Discrepancies"}),e.jsx(je,{children:"Documents"}),e.jsx(je,{children:"Score"}),e.jsx(je,{children:"Completed"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:N.map(R=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsx(rr,{checked:r.has(R.id),onCheckedChange:()=>k(R.id)})}),e.jsx(fe,{className:"font-medium",children:R.lc_number}),e.jsx(fe,{children:R.client_name}),e.jsx(fe,{children:e.jsx(Fa,{status:R.status==="completed"?"success":R.status==="failed"?"destructive":"info",children:R.status})}),e.jsx(fe,{children:R.discrepancy_count>0?e.jsx(Q,{variant:"destructive",children:R.discrepancy_count}):e.jsx(Qs,{className:"h-4 w-4 text-green-500"})}),e.jsx(fe,{children:R.document_count}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{value:R.compliance_score,className:"w-16 h-2"}),e.jsxs("span",{className:"text-sm font-medium",children:[R.compliance_score,"%"]})]})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:new Date(R.completed_at).toLocaleDateString()}),e.jsx(fe,{className:"text-right",children:e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>D(R.id),className:"gap-2",children:[e.jsx(Hde,{className:"h-4 w-4"}),"Quick Pack"]})})]},R.id))})]})})]})]})}const sVe={healthy:"bg-green-500/10 border-green-500/20 text-green-700 dark:text-green-400",degraded:"bg-yellow-500/10 border-yellow-500/20 text-yellow-700 dark:text-yellow-400",down:"bg-red-500/10 border-red-500/20 text-red-700 dark:text-red-400"},aVe={healthy:Qs,degraded:ks,down:ks};async function rVe(){return await new Promise(t=>setTimeout(t,500)),{status:"healthy",latency:45,uptime:99.9,lastChecked:new Date().toISOString()}}function nVe(){const{data:t,isLoading:s}=Ks({queryKey:["health-status"],queryFn:rVe,refetchInterval:3e4});if(s||!t)return null;const a=aVe[t.status],r=sVe[t.status];return e.jsx(zo,{className:`${r} border mb-4`,children:e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(a,{className:"h-4 w-4"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"System Status: "}),e.jsx(Q,{variant:"outline",className:"ml-1",children:t.status==="healthy"?"Operational":t.status==="degraded"?"Degraded":"Down"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(mt,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-sm",children:["Latency: ",t.latency,"ms"]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Wn,{className:"h-3 w-3"}),e.jsxs("span",{className:"text-sm",children:["Uptime: ",t.uptime,"%"]})]})]})]}),t.message&&e.jsx(qo,{className:"text-sm",children:t.message})]})})}function iVe({trigger:t,defaultCategory:s}){const[a,r]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(!0),[d,c]=m.useState({}),u=rn(),{toast:h}=et(),[x,g]=m.useState({subject:"",description:"",category:s||"question",priority:"normal"});m.useEffect(()=>{a&&(o(!0),Ae.get("/api/support/context").then(b=>{c(b.data),o(!1)}).catch(()=>{c({current_page:u.pathname,user_agent:navigator.userAgent,timestamp:new Date().toISOString()}),o(!1)}))},[a,u.pathname]);const j=async b=>{b.preventDefault(),i(!0);try{const N=await Ae.post("/api/support/tickets",{...x,context:{...d,current_page:u.pathname,user_agent:navigator.userAgent}});h({title:"Support Ticket Created",description:N.data.message||"Your ticket has been created successfully. We'll respond within 24 hours."}),g({subject:"",description:"",category:s||"question",priority:"normal"}),r(!1)}catch(N){h({title:"Error",description:N.response?.data?.detail||"Failed to create support ticket. Please try again.",variant:"destructive"})}finally{i(!1)}},y=e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(eh,{className:"mr-2 h-4 w-4"}),"Create Support Ticket"]});return e.jsxs(wt,{open:a,onOpenChange:r,children:[e.jsx(wr,{asChild:!0,children:t||y}),e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Support Ticket"}),e.jsx(_t,{children:"Fill out the form below and we'll get back to you within 24 hours. Your current page and browser information will be automatically included."})]}),e.jsxs("form",{onSubmit:j,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"category",children:"Category"}),e.jsxs(Te,{value:x.category,onValueChange:b=>g({...x,category:b}),children:[e.jsx(Pe,{id:"category",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bug",children:"Bug Report"}),e.jsx(K,{value:"feature_request",children:"Feature Request"}),e.jsx(K,{value:"question",children:"Question"}),e.jsx(K,{value:"billing",children:"Billing"}),e.jsx(K,{value:"technical",children:"Technical Issue"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"priority",children:"Priority"}),e.jsxs(Te,{value:x.priority,onValueChange:b=>g({...x,priority:b}),children:[e.jsx(Pe,{id:"priority",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"low",children:"Low"}),e.jsx(K,{value:"normal",children:"Normal"}),e.jsx(K,{value:"high",children:"High"}),e.jsx(K,{value:"urgent",children:"Urgent"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"subject",children:"Subject"}),e.jsx(oe,{id:"subject",placeholder:"Brief description of your issue",value:x.subject,onChange:b=>g({...x,subject:b.target.value}),required:!0,maxLength:200})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(Zt,{id:"description",placeholder:"Please provide as much detail as possible about your issue...",value:x.description,onChange:b=>g({...x,description:b.target.value}),required:!0,rows:6,maxLength:5e3}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[x.description.length,"/5000 characters"]})]}),l?e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ct,{className:"h-4 w-4 animate-spin"}),e.jsx("span",{children:"Loading context information..."})]}):e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted p-3 rounded-md",children:[e.jsx("p",{className:"font-semibold mb-1",children:"Context will be included:"}),e.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[d.current_page&&e.jsxs("li",{children:["Current page: ",d.current_page]}),d.user_email&&e.jsxs("li",{children:["Your email: ",d.user_email]}),d.user_role&&e.jsxs("li",{children:["Your role: ",d.user_role]}),e.jsx("li",{children:"Browser information"}),e.jsx("li",{children:"Timestamp"})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4",children:[e.jsx(M,{type:"button",variant:"outline",onClick:()=>r(!1),disabled:n,children:"Cancel"}),e.jsx(M,{type:"submit",disabled:n||l,children:n?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"mr-2 h-4 w-4 animate-spin"}),"Submitting..."]}):"Submit Ticket"})]})]})]})]})}function lVe({embedded:t=!1,lcData:s,discrepancyData:a}){const{toast:r}=et(),{user:n}=Al(),i=Yn(),[l,o]=m.useState("discrepancy"),[d,c]=m.useState(""),[u,h]=m.useState(""),[x,g]=m.useState([]),[j,y]=m.useState(!1),[b,N]=m.useState("approval"),[C,_]=m.useState(""),[A,k]=m.useState(""),[E,D]=m.useState(""),[R,O]=m.useState(""),[P,T]=m.useState([]),[B,G]=m.useState(!1),[q,z]=m.useState(""),[H,le]=m.useState(""),[Y,te]=m.useState(!1),[ne,ae]=m.useState(""),[re,xe]=m.useState("bn"),[ye,ke]=m.useState(""),[ze,ce]=m.useState(!1),[Re,ie]=m.useState({});m.useEffect(()=>{if(a&&a.length>0){if(N("rejection"),!E){const we=a.map(ot=>`- ${ot.description} (${ot.severity})`).join(`
apps\web\dist\assets\index-Bz84JA8h.js:573:${we}`)}}else N("approval")},[a]),m.useEffect(()=>{s&&(s.lc_number&&!A&&k(s.lc_number),s.client_name&&!C&&_(s.client_name),s.beneficiary&&!C&&_(s.beneficiary))},[s,A,C]),m.useEffect(()=>{a&&a.length>0&&!d&&c(a[0].description)},[a,d]);const Ne={discrepancy:"discrepancy",letter:"letter",summarize:"summarize",translate:"translate"},{data:Ue}=Ks({queryKey:["bank-ai-quota",Ne[l]],queryFn:()=>s0.getQuota(Ne[l]),enabled:!!Ne[l],refetchInterval:6e4}),ge=Ya({mutationFn:s0.explainDiscrepancy,onSuccess:we=>{h(we.content),g(we.rule_basis||[]),we.usage_remaining!==void 0&&i.invalidateQueries({queryKey:["bank-ai-quota"]}),r({title:"Explanation Generated",description:"AI-generated discrepancy explanation is ready."})},onError:we=>{r({title:"Generation Failed",description:we?.response?.data?.detail||"Failed to generate explanation. Please try again.",variant:"destructive"})}}),he=Ya({mutationFn:s0.generateLetter,onSuccess:we=>{O(we.content),T(we.rule_basis||[]),we.usage_remaining!==void 0&&i.invalidateQueries({queryKey:["bank-ai-quota"]}),r({title:"Letter Generated",description:`${b==="approval"?"Approval":"Rejection"} letter is ready.`})},onError:we=>{r({title:"Generation Failed",description:we?.response?.data?.detail||"Failed to generate letter. Please try again.",variant:"destructive"})}}),_e=Ya({mutationFn:s0.summarizeDocument,onSuccess:we=>{le(we.content),we.usage_remaining!==void 0&&i.invalidateQueries({queryKey:["bank-ai-quota"]}),r({title:"Summary Generated",description:"Document summary is ready."})},onError:we=>{r({title:"Summarization Failed",description:we?.response?.data?.detail||"Failed to generate summary. Please try again.",variant:"destructive"})}}),at=Ya({mutationFn:s0.translateText,onSuccess:we=>{ke(we.content),we.usage_remaining!==void 0&&i.invalidateQueries({queryKey:["bank-ai-quota"]}),r({title:"Translation Complete",description:`Text translated to ${re}.`})},onError:we=>{r({title:"Translation Failed",description:we?.response?.data?.detail||"Failed to translate text. Please try again.",variant:"destructive"})}}),nt=async()=>{if(!d.trim()){r({title:"Discrepancy Required",description:"Please select or describe a discrepancy.",variant:"destructive"});return}y(!0);try{await ge.mutateAsync({discrepancy:d,lc_number:A||s?.lc_number,validation_session_id:s?.validation_session_id,language:"en"})}finally{y(!1)}},st=async()=>{if(!C.trim()||!A.trim()){r({title:"Required Fields",description:"Please provide client name and LC number.",variant:"destructive"});return}G(!0);try{await he.mutateAsync({letter_type:b,client_name:C,lc_number:A,context:E,discrepancy_list:a,language:"en"})}finally{G(!1)}},ht=async()=>{if(!q.trim()){r({title:"Document Text Required",description:"Please provide document text to summarize.",variant:"destructive"});return}te(!0);try{await _e.mutateAsync({document_text:q,lc_number:A||s?.lc_number,language:"en"})}finally{te(!1)}},Ss=async()=>{if(!ne.trim()){r({title:"Text Required",description:"Please provide text to translate.",variant:"destructive"});return}ce(!0);try{await at.mutateAsync({text:ne,target_language:re,source_language:"en"})}finally{ce(!1)}},Wt=(we,ot)=>{navigator.clipboard.writeText(we),r({title:"Copied",description:`${ot} copied to clipboard.`})},Rt=async(we,ot)=>{r({title:"Save to Evidence Pack",description:"Feature coming soon. Content will be saved to evidence pack."})},ys=Ue&&Ue.remaining<=0,dt=Ue&&Ue.remaining<10;return e.jsxs("div",{className:"flex flex-col gap-6",children:[!t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"AI Assistance"}),e.jsx("p",{className:"text-muted-foreground",children:"Leverage AI to generate discrepancy explanations, approval/rejection letters, document summaries, and translations."})]}),Ue&&e.jsx($,{className:"bg-muted/50",children:e.jsx(U,{className:"pt-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["AI Usage: ",Ue.used," / ",Ue.limit," (",Ue.remaining," remaining)"]})]}),dt&&e.jsx(Q,{variant:ys?"destructive":"outline",children:ys?"Quota Exceeded":"Low Quota"})]})})}),e.jsxs(Os,{value:l,onValueChange:we=>o(we),className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-4",children:[e.jsxs(He,{value:"discrepancy",className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4"}),"Discrepancy Explanation"]}),e.jsxs(He,{value:"letter",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Generate Letter"]}),e.jsxs(He,{value:"summarize",className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-4 h-4"}),"Summarize Document"]}),e.jsxs(He,{value:"translate",className:"flex items-center gap-2",children:[e.jsx(zw,{className:"w-4 h-4"}),"Translate"]})]}),e.jsx(Qe,{value:"discrepancy",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Discrepancy Explanation Generator"}),e.jsx(ue,{children:"Generate professional explanations for LC discrepancies to help clients understand issues."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"discrepancy",children:"Discrepancy Description"}),a&&a.length>0?e.jsxs(Te,{value:d,onValueChange:c,children:[e.jsx(Pe,{id:"discrepancy",children:e.jsx(Fe,{placeholder:"Select a discrepancy or type custom"})}),e.jsx(De,{children:a.map((we,ot)=>e.jsxs(K,{value:we.description,children:[we.description," (",we.severity,")"]},ot))})]}):e.jsx(Zt,{id:"discrepancy",placeholder:"Describe the discrepancy (e.g., 'Invoice amount differs from LC amount')",value:d,onChange:we=>c(we.target.value),rows:3})]}),e.jsx(M,{onClick:nt,disabled:!d.trim()||j||ys,className:"w-full",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ni,{className:"w-4 h-4 mr-2"}),"Generate Explanation"]})}),u&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Generated Explanation"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Wt(u,"Explanation"),children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Copy"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Rt(),children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-md whitespace-pre-wrap text-sm",children:u}),x.length>0&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-950 rounded-md",children:[e.jsx(Z,{className:"text-xs font-semibold mb-2 block",children:"Rule Basis (Internal IDs):"}),e.jsx("ul",{className:"text-xs space-y-1",children:x.map((we,ot)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-mono",children:we.rule_id}),": ",we.clause," - ",we.description]},ot))})]})]})]})]})}),e.jsx(Qe,{value:"letter",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Generate Approval/Rejection Letter"}),e.jsx(ue,{children:"Create professional letters to communicate LC approval or rejection to clients."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"letter-type",children:"Letter Type"}),e.jsxs(Te,{value:b,onValueChange:we=>N(we),children:[e.jsx(Pe,{id:"letter-type",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"approval",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Oe,{className:"w-4 h-4 text-green-500"}),"Approval Letter"]})}),e.jsx(K,{value:"rejection",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4 text-red-500"}),"Rejection Letter"]})})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"client-name",children:"Client Name"}),e.jsx(oe,{id:"client-name",placeholder:"e.g., Bangladesh Exports Ltd",value:C,onChange:we=>_(we.target.value)})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"lc-number",children:"LC Number"}),e.jsx(oe,{id:"lc-number",placeholder:"e.g., LC-2024-001234",value:A,onChange:we=>k(we.target.value)})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"letter-context",children:"Additional Context (Optional)"}),e.jsx(Zt,{id:"letter-context",placeholder:"Add any specific details, discrepancies, or instructions...",value:E,onChange:we=>D(we.target.value),rows:4})]}),e.jsx(M,{onClick:st,disabled:!C.trim()||!A.trim()||B||ys,className:"w-full",children:B?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Generate ",b==="approval"?"Approval":"Rejection"," Letter"]})}),R&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Generated Letter"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Wt(R,"Letter"),children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Copy"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Rt(),children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-md whitespace-pre-wrap text-sm font-mono",children:R}),P.length>0&&e.jsxs("div",{className:"mt-2 p-3 bg-blue-50 dark:bg-blue-950 rounded-md",children:[e.jsx(Z,{className:"text-xs font-semibold mb-2 block",children:"Rule Basis (Internal IDs):"}),e.jsx("ul",{className:"text-xs space-y-1",children:P.map((we,ot)=>e.jsxs("li",{children:[e.jsx("span",{className:"font-mono",children:we.rule_id}),": ",we.clause," - ",we.description]},ot))})]})]})]})]})}),e.jsx(Qe,{value:"summarize",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Document Summarization"}),e.jsx(ue,{children:"Extract key information and summarize complex LC documents."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"document-text",children:"Document Text"}),e.jsx(Zt,{id:"document-text",placeholder:"Paste LC document text here...",value:q,onChange:we=>z(we.target.value),rows:8})]}),e.jsx(M,{onClick:ht,disabled:!q.trim()||Y||ys,className:"w-full",children:Y?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Summarizing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Summarize Document"]})}),H&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Summary"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Wt(H,"Summary"),children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Copy"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Rt(),children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-md whitespace-pre-wrap text-sm",children:H})]})]})]})}),e.jsx(Qe,{value:"translate",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Translate Text"}),e.jsx(ue,{children:"Translate LC terms, documents, or communications to different languages."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"text-to-translate",children:"Text to Translate"}),e.jsx(Zt,{id:"text-to-translate",placeholder:"Enter text to translate...",value:ne,onChange:we=>ae(we.target.value),rows:4})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"target-language",children:"Target Language"}),e.jsxs(Te,{value:re,onValueChange:xe,children:[e.jsx(Pe,{id:"target-language",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bn",children:"Bengali"}),e.jsx(K,{value:"ar",children:"Arabic"}),e.jsx(K,{value:"zh",children:"Chinese"}),e.jsx(K,{value:"es",children:"Spanish"}),e.jsx(K,{value:"fr",children:"French"}),e.jsx(K,{value:"de",children:"German"}),e.jsx(K,{value:"ja",children:"Japanese"})]})]})]}),e.jsx(M,{onClick:Ss,disabled:!ne.trim()||ze||ys,className:"w-full",children:ze?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Translating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(zw,{className:"w-4 h-4 mr-2"}),"Translate"]})}),ye&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Z,{children:"Translated Text"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Wt(ye,"Translation"),children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Copy"]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>Rt(),children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save"]})]})]}),e.jsx("div",{className:"p-4 bg-muted rounded-md whitespace-pre-wrap text-sm",children:ye})]})]})]})})]})]})}function oVe({onTabChange:t}){const{user:s}=Al(),a=s?.role==="bank_admin",[r,n]=m.useState({page:1,per_page:20}),[i,l]=m.useState(null),[o,d]=m.useState(!1),c=Yn(),{data:u,isLoading:h}=Ks({queryKey:["allocations",r],queryFn:()=>c1.getAllocations(r)}),x=Ya({mutationFn:({id:C,data:_})=>c1.updateAllocation(C,_),onSuccess:()=>{c.invalidateQueries({queryKey:["allocations"]}),Vn.success("Allocation updated successfully"),d(!1),l(null)},onError:()=>{Vn.error("Failed to update allocation")}}),g=C=>{if(!a){Vn.error("Only bank administrators can edit allocations");return}l(C),d(!0)},j=()=>{if(!i)return;const C=new FormData(document.getElementById("allocation-form")),_={budget_limit:C.get("budget_limit")?parseFloat(C.get("budget_limit")):null,quota_limit:C.get("quota_limit")?parseInt(C.get("quota_limit")):null,alerts_enabled:C.get("alerts_enabled")==="on",alert_threshold_percent:C.get("alert_threshold_percent")?parseInt(C.get("alert_threshold_percent")):80};x.mutate({id:i.id,data:_})},y=()=>{const C=[["Client","Branch","Product","Budget Limit","Quota Limit","Usage","Cost","Remaining Budget"].join(","),...(u?.allocations||[]).map(E=>[E.client_name||"Bank-wide",E.branch_name||"All",E.product||"All",E.budget_limit||"Unlimited",E.quota_limit||"Unlimited",E.usage_current_period,E.usage_cost_current_period,E.remaining_budget||"N/A"].join(","))].join(`
apps\web\dist\assets\index-Bz84JA8h.js:574:`),_=new Blob([C],{type:"text/csv"}),A=window.URL.createObjectURL(_),k=document.createElement("a");k.href=A,k.download=`allocations-${hs(new Date,"yyyy-MM-dd")}.csv`,k.click(),window.URL.revokeObjectURL(A)},b=C=>C.budget_limit?C.usage_cost_current_period/C.budget_limit*100:0,N=(C,_)=>C>=_?"text-red-600 bg-red-100":C>=_*.8?"text-yellow-600 bg-yellow-100":"text-green-600 bg-green-100";return e.jsxs("div",{className:"container mx-auto p-6 space-y-6",children:[e.jsx(sp,{}),e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Allocations"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage budgets and chargebacks by SME/client, branch, and product"})]}),e.jsx("div",{className:"flex items-center space-x-2",children:e.jsxs(M,{variant:"outline",onClick:y,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Export CSV"]})})]}),e.jsx(yC,{currentTab:"allocations",onTabChange:t,mode:"bank",hideUpgrade:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Allocations"}),e.jsx(io,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold",children:u?.total||0})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Budget"}),e.jsx(Na,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold",children:Tr((u?.allocations||[]).reduce((C,_)=>C+(_.budget_limit||0),0))})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Usage"}),e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold",children:Tr((u?.allocations||[]).reduce((C,_)=>C+_.usage_cost_current_period,0))})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Alerts Enabled"}),e.jsx(Ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-bold",children:(u?.allocations||[]).filter(C=>C.alerts_enabled).length})})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Allocations"})}),e.jsx(U,{children:h?e.jsx("div",{className:"space-y-3",children:Array.from({length:5}).map((C,_)=>e.jsx(pt,{className:"h-16 w-full"},_))}):u?.allocations.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bs,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"No allocations found."})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Client"}),e.jsx(je,{children:"Branch"}),e.jsx(je,{children:"Product"}),e.jsx(je,{children:"Budget Limit"}),e.jsx(je,{children:"Quota Limit"}),e.jsx(je,{children:"Usage"}),e.jsx(je,{children:"Cost"}),e.jsx(je,{children:"Remaining"}),e.jsx(je,{children:"Alerts"}),e.jsx(je,{className:"w-[100px]",children:"Actions"})]})}),e.jsx(oa,{children:u?.allocations.map(C=>{const _=b(C);return e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:C.client_name||"Bank-wide"}),e.jsx(fe,{children:C.branch_name||"All"}),e.jsx(fe,{children:C.product||"All"}),e.jsx(fe,{children:C.budget_limit?Tr(C.budget_limit):"Unlimited"}),e.jsx(fe,{children:C.quota_limit?C.quota_limit.toLocaleString():"Unlimited"}),e.jsx(fe,{children:e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-sm font-medium",children:C.usage_current_period.toLocaleString()}),C.budget_limit&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[_.toFixed(1),"% of budget"]})]})}),e.jsx(fe,{children:e.jsx(Q,{variant:"secondary",className:N(_,C.alert_threshold_percent),children:Tr(C.usage_cost_current_period)})}),e.jsx(fe,{children:C.remaining_budget!==null?Tr(C.remaining_budget):"N/A"}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{checked:C.alerts_enabled,disabled:!0,className:"pointer-events-none"}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[C.alert_threshold_percent,"%"]})]})}),e.jsx(fe,{children:a?e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>g(C),className:"gap-2",children:[e.jsx(zn,{className:"h-4 w-4"}),"Edit"]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"View only"})})]},C.id)})})]})})})]}),e.jsx(wt,{open:o,onOpenChange:d,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Edit Allocation"}),e.jsx(_t,{children:a?"Update budget limits, quota, and alert settings for this allocation.":"Only bank administrators can edit allocations."})]}),i&&a&&e.jsxs("form",{id:"allocation-form",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Client"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:i.client_name||"Bank-wide"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"budget_limit",children:"Budget Limit"}),e.jsx(oe,{id:"budget_limit",name:"budget_limit",type:"number",defaultValue:i.budget_limit||"",placeholder:"Leave empty for unlimited"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"quota_limit",children:"Quota Limit"}),e.jsx(oe,{id:"quota_limit",name:"quota_limit",type:"number",defaultValue:i.quota_limit||"",placeholder:"Leave empty for unlimited"})]}),e.jsx("div",{className:"space-y-2",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(js,{id:"alerts_enabled",name:"alerts_enabled",defaultChecked:i.alerts_enabled}),e.jsx(Z,{htmlFor:"alerts_enabled",children:"Enable Alerts"})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"alert_threshold_percent",children:"Alert Threshold (%)"}),e.jsx(oe,{id:"alert_threshold_percent",name:"alert_threshold_percent",type:"number",min:"0",max:"100",defaultValue:i.alert_threshold_percent})]})]}),!a&&e.jsx("div",{className:"py-4 text-center text-sm text-muted-foreground",children:"Access restricted to bank administrators"}),e.jsxs(ms,{children:[a&&e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:j,disabled:x.isPending,children:x.isPending?"Saving...":"Save Changes"})]}),!a&&e.jsx(M,{onClick:()=>d(!1),children:"Close"})]})]})})]})}const gf={async list(t){return(await Ae.get("/bank/bulk-jobs",{params:t})).data},async get(t){return(await Ae.get(`/bank/bulk-jobs/${t}`)).data},async create(t,s){return(await Ae.post("/bank/bulk-jobs",t,{headers:s?{"Content-Type":"multipart/form-data"}:{}})).data},async cancel(t){return(await Ae.post(`/bank/bulk-jobs/${t}/cancel`)).data},async listTemplates(t){return(await Ae.get("/bank/bulk-jobs/templates",{params:t})).data},async createTemplate(t){return(await Ae.post("/bank/bulk-jobs/templates",t)).data},async deleteTemplate(t){await Ae.delete(`/bank/bulk-jobs/templates/${t}`)}};function cVe({embedded:t=!1}){const{toast:s}=et(),{user:a}=Al();zs();const[r,n]=m.useState("jobs"),[i,l]=m.useState(!1),[o,d]=m.useState(!1),[c,u]=m.useState(null),[h,x]=m.useState(null),g=Yn(),{data:j,isLoading:y,refetch:b}=Ks({queryKey:["bank-bulk-jobs"],queryFn:()=>gf.list({limit:100}),refetchInterval:5e3}),{data:N,isLoading:C,refetch:_}=Ks({queryKey:["bank-bulk-templates"],queryFn:()=>gf.listTemplates({include_public:!0})}),A=j?.items||[],k=N?.items||[],E=Ya({mutationFn:B=>gf.create(B),onSuccess:()=>{g.invalidateQueries({queryKey:["bank-bulk-jobs"]}),l(!1),s({title:"Bulk Job Created",description:"Bulk job has been created and queued for processing."})},onError:B=>{s({title:"Create Failed",description:B.response?.data?.detail||"Failed to create bulk job.",variant:"destructive"})}}),D=Ya({mutationFn:B=>gf.cancel(B),onSuccess:()=>{g.invalidateQueries({queryKey:["bank-bulk-jobs"]}),s({title:"Job Cancelled",description:"Bulk job has been cancelled."})},onError:B=>{s({title:"Cancel Failed",description:B.response?.data?.detail||"Failed to cancel job.",variant:"destructive"})}}),R=Ya({mutationFn:B=>gf.createTemplate(B),onSuccess:()=>{g.invalidateQueries({queryKey:["bank-bulk-templates"]}),d(!1),s({title:"Template Created",description:"Bulk job template has been created."})},onError:B=>{s({title:"Create Failed",description:B.response?.data?.detail||"Failed to create template.",variant:"destructive"})}}),O=Ya({mutationFn:B=>gf.deleteTemplate(B),onSuccess:()=>{g.invalidateQueries({queryKey:["bank-bulk-templates"]}),s({title:"Template Deleted",description:"Template has been deleted."})},onError:B=>{s({title:"Delete Failed",description:B.response?.data?.detail||"Failed to delete template.",variant:"destructive"})}}),P=B=>{switch(B){case"pending":return e.jsx(Fa,{status:"info",children:"Pending"});case"running":return e.jsx(Fa,{status:"warning",children:"Running"});case"succeeded":return e.jsx(Fa,{status:"success",children:"Succeeded"});case"failed":return e.jsx(Fa,{status:"destructive",children:"Failed"});case"partial":return e.jsx(Fa,{status:"warning",children:"Partial"});case"cancelled":return e.jsx(Fa,{status:"info",children:"Cancelled"});default:return e.jsx(Fa,{status:"info",children:B})}},T=B=>B?B<60?`${B}s`:B<3600?`${Math.floor(B/60)}m ${B%60}s`:`${Math.floor(B/3600)}h ${Math.floor(B%3600/60)}m`:"-";return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Bulk Jobs"}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage templated bulk processing jobs with scheduling and throttling controls."})]}),e.jsxs("div",{className:"flex gap-2",children:[r==="jobs"&&e.jsxs(M,{onClick:()=>l(!0),className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"New Bulk Job"]}),r==="templates"&&e.jsxs(M,{onClick:()=>d(!0),className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"New Template"]})]})]}),e.jsxs(Os,{value:r,onValueChange:B=>n(B),className:"w-full",children:[e.jsxs(Fs,{children:[e.jsxs(He,{value:"jobs",children:["Bulk Jobs (",A.length,")"]}),e.jsxs(He,{value:"templates",children:["Templates (",k.length,")"]})]}),e.jsx(Qe,{value:"jobs",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Bulk Processing Jobs"}),e.jsx(ue,{children:"View and manage bulk LC processing jobs"})]}),e.jsx(U,{children:y?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"}),"Loading jobs..."]}):A.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No bulk jobs yet"}),e.jsx("p",{className:"text-sm",children:"Create your first bulk job to get started"}),e.jsxs(M,{onClick:()=>l(!0),className:"mt-4",variant:"outline",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Bulk Job"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Progress"}),e.jsx(je,{children:"Items"}),e.jsx(je,{children:"Duration"}),e.jsx(je,{children:"Created"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:A.map(B=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:B.name}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:B.job_type.replace(/_/g," ")})}),e.jsx(fe,{children:P(B.status)}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(es,{value:B.progress_percent,className:"w-24"}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[B.progress_percent.toFixed(0),"%"]})]})}),e.jsx(fe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{children:[B.processed_items," / ",B.total_items]}),e.jsxs("div",{className:"text-muted-foreground text-xs",children:["âœ“ ",B.succeeded_items," â€¢ âœ— ",B.failed_items," â€¢ âŠ˜ ",B.skipped_items]})]})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:T(B.duration_seconds)}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:hs(new Date(B.created_at),"MMM d, yyyy HH:mm")}),e.jsx(fe,{className:"text-right",children:e.jsx("div",{className:"flex justify-end gap-2",children:B.status==="running"&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>D.mutate(B.id),className:"text-destructive hover:text-destructive",children:e.jsx(gue,{className:"h-4 w-4"})})})})]},B.id))})]})})]})}),e.jsx(Qe,{value:"templates",className:"mt-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Bulk Job Templates"}),e.jsx(ue,{children:"Create reusable templates for bulk processing jobs"})]}),e.jsx(U,{children:C?e.jsxs("div",{className:"flex items-center justify-center py-8",children:[e.jsx(Lt,{className:"h-5 w-5 animate-spin mr-2"}),"Loading templates..."]}):k.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No templates yet"}),e.jsx("p",{className:"text-sm",children:"Create your first template to speed up bulk job creation"}),e.jsxs(M,{onClick:()=>d(!0),className:"mt-4",variant:"outline",children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Template"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Usage"}),e.jsx(je,{children:"Visibility"}),e.jsx(je,{children:"Created"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:k.map(B=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:B.name}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:B.job_type.replace(/_/g," ")})}),e.jsxs(fe,{className:"text-sm text-muted-foreground",children:["Used ",B.usage_count," time",B.usage_count!==1?"s":"",B.last_used_at&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Last: ",hs(new Date(B.last_used_at),"MMM d, yyyy")]})]}),e.jsx(fe,{children:B.is_public?e.jsx(Q,{variant:"secondary",children:"Public"}):e.jsx(Q,{variant:"outline",children:"Private"})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:hs(new Date(B.created_at),"MMM d, yyyy")}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>{x(B),l(!0)},children:e.jsx(Ww,{className:"h-4 w-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>O.mutate(B.id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"h-4 w-4"})})]})})]},B.id))})]})})]})})]}),e.jsx(dVe,{open:i,onOpenChange:l,templates:k,selectedTemplate:h,onCreate:E.mutate}),e.jsx(uVe,{open:o,onOpenChange:d,onCreate:R.mutate})]})}function dVe({open:t,onOpenChange:s,templates:a,selectedTemplate:r,onCreate:n}){const[i,l]=m.useState(""),[o,d]=m.useState("lc_validation"),[c,u]=m.useState(""),[h,x]=m.useState(5),[g,j]=m.useState(void 0),[y,b]=m.useState(void 0),[N,C]=m.useState(""),[_,A]=m.useState("");m.useEffect(()=>{r&&(u(r.id),d(r.job_type))},[r,t]);const k=()=>{i.trim()&&(n({name:i,job_type:o,template_id:c||void 0,priority:h,config:{description:_||void 0,throttle_rate:g,max_concurrent:y},scheduled_at:N?new Date(N).toISOString():void 0}),l(""),d("lc_validation"),u(""),x(5),j(void 0),b(void 0),C(""),A(""))};return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Bulk Job"}),e.jsx(_t,{children:"Create a new bulk processing job with optional template, scheduling, and throttling."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Job Name *"}),e.jsx(oe,{value:i,onChange:E=>l(E.target.value),placeholder:"e.g., Q1 2024 LC Validation Batch"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Job Type *"}),e.jsxs(Te,{value:o,onValueChange:E=>d(E),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"lc_validation",children:"LC Validation"}),e.jsx(K,{value:"doc_verification",children:"Document Verification"}),e.jsx(K,{value:"risk_analysis",children:"Risk Analysis"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Template (Optional)"}),e.jsxs(Te,{value:c||"none",onValueChange:E=>u(E==="none"?"":E),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select a template"})}),e.jsxs(De,{children:[e.jsx(K,{value:"none",children:"None"}),a.filter(E=>E.job_type===o).map(E=>e.jsx(K,{value:E.id,children:E.name},E.id))]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Priority"}),e.jsxs(Te,{value:h.toString(),onValueChange:E=>x(parseInt(E)),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"0",children:"Low (0)"}),e.jsx(K,{value:"5",children:"Normal (5)"}),e.jsx(K,{value:"8",children:"High (8)"}),e.jsx(K,{value:"10",children:"Critical (10)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Throttle Rate (items/min)"}),e.jsx(oe,{type:"number",value:g||"",onChange:E=>j(E.target.value?parseInt(E.target.value):void 0),placeholder:"e.g., 100"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Max Concurrent Items"}),e.jsx(oe,{type:"number",value:y||"",onChange:E=>b(E.target.value?parseInt(E.target.value):void 0),placeholder:"e.g., 10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Schedule (Optional)"}),e.jsx(oe,{type:"datetime-local",value:N,onChange:E=>C(E.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Description"}),e.jsx(Zt,{value:_,onChange:E=>A(E.target.value),placeholder:"Optional description for this bulk job",rows:3})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{onClick:k,disabled:!i.trim(),children:"Create Job"})]})]})})}function uVe({open:t,onOpenChange:s,onCreate:a}){const[r,n]=m.useState(""),[i,l]=m.useState("lc_validation"),[o,d]=m.useState(""),[c,u]=m.useState(!1),[h,x]=m.useState("{}"),g=()=>{if(r.trim())try{const j=JSON.parse(h);a({name:r,job_type:i,description:o||void 0,config_template:j,is_public:c}),n(""),l("lc_validation"),d(""),u(!1),x("{}")}catch{}};return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Bulk Job Template"}),e.jsx(_t,{children:"Create a reusable template for bulk processing jobs."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Template Name *"}),e.jsx(oe,{value:r,onChange:j=>n(j.target.value),placeholder:"e.g., Standard LC Validation Template"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Job Type *"}),e.jsxs(Te,{value:i,onValueChange:j=>l(j),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"lc_validation",children:"LC Validation"}),e.jsx(K,{value:"doc_verification",children:"Document Verification"}),e.jsx(K,{value:"risk_analysis",children:"Risk Analysis"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Description"}),e.jsx(Zt,{value:o,onChange:j=>d(j.target.value),placeholder:"Optional description",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Configuration Template (JSON) *"}),e.jsx(Zt,{value:h,onChange:j=>x(j.target.value),placeholder:'{"throttle_rate": 100, "max_concurrent": 10, "retry_on_failure": true}',rows:6,className:"font-mono text-sm"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",id:"is_public",checked:c,onChange:j=>u(j.target.checked),className:"rounded"}),e.jsx(Z,{htmlFor:"is_public",className:"cursor-pointer",children:"Make template public (visible to all banks)"})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>s(!1),children:"Cancel"}),e.jsx(M,{onClick:g,disabled:!r.trim(),children:"Create Template"})]})]})})}var Nse="AlertDialog",[mVe,YJe]=Vr(Nse,[DV]),zu=DV(),wse=t=>{const{__scopeAlertDialog:s,...a}=t,r=zu(s);return e.jsx(V1,{...r,...a,modal:!0})};wse.displayName=Nse;var hVe="AlertDialogTrigger",xVe=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=zu(a);return e.jsx(GV,{...n,...r,ref:s})});xVe.displayName=hVe;var pVe="AlertDialogPortal",_se=t=>{const{__scopeAlertDialog:s,...a}=t,r=zu(s);return e.jsx(W1,{...r,...a})};_se.displayName=pVe;var fVe="AlertDialogOverlay",Cse=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=zu(a);return e.jsx(Mg,{...n,...r,ref:s})});Cse.displayName=fVe;var Zf="AlertDialogContent",[gVe,vVe]=mVe(Zf),jVe=vV("AlertDialogContent"),Sse=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,children:r,...n}=t,i=zu(a),l=m.useRef(null),o=vs(s,l),d=m.useRef(null);return e.jsx(mhe,{contentName:Zf,titleName:kse,docsSlug:"alert-dialog",children:e.jsx(gVe,{scope:a,cancelRef:d,children:e.jsxs(Bg,{role:"alertdialog",...i,...n,ref:o,onOpenAutoFocus:gt(n.onOpenAutoFocus,c=>{c.preventDefault(),d.current?.focus({preventScroll:!0})}),onPointerDownOutside:c=>c.preventDefault(),onInteractOutside:c=>c.preventDefault(),children:[e.jsx(jVe,{children:r}),e.jsx(yVe,{contentRef:l})]})})})});Sse.displayName=Zf;var kse="AlertDialogTitle",Ese=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=zu(a);return e.jsx(Kj,{...n,...r,ref:s})});Ese.displayName=kse;var Ase="AlertDialogDescription",Pse=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=zu(a);return e.jsx(Yj,{...n,...r,ref:s})});Pse.displayName=Ase;var bVe="AlertDialogAction",Dse=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,n=zu(a);return e.jsx(H1,{...n,...r,ref:s})});Dse.displayName=bVe;var Tse="AlertDialogCancel",Fse=m.forwardRef((t,s)=>{const{__scopeAlertDialog:a,...r}=t,{cancelRef:n}=vVe(Tse,a),i=zu(a),l=vs(s,n);return e.jsx(H1,{...i,...r,ref:l})});Fse.displayName=Tse;var yVe=({contentRef:t})=>{const s=`\`${Zf}\` requires a description for the component to be accessible for screen reader users.
apps\web\dist\assets\index-Bz84JA8h.js:580:For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return m.useEffect(()=>{document.getElementById(t.current?.getAttribute("aria-describedby"))||console.warn(s)},[s,t]),null},NVe=wse,wVe=_se,Rse=Cse,Ose=Sse,Ise=Dse,Lse=Fse,Mse=Ese,Bse=Pse;function Oh(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const pR=NVe,_Ve=wVe,$se=m.forwardRef(({className:t,...s},a)=>e.jsx(Rse,{className:Oh("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));$se.displayName=Rse.displayName;const AC=m.forwardRef(({className:t,...s},a)=>e.jsxs(_Ve,{children:[e.jsx($se,{}),e.jsx(Ose,{ref:a,className:Oh("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));AC.displayName=Ose.displayName;const PC=({className:t,...s})=>e.jsx("div",{className:Oh("flex flex-col space-y-2 text-center sm:text-left",t),...s});PC.displayName="AlertDialogHeader";const DC=({className:t,...s})=>e.jsx("div",{className:Oh("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});DC.displayName="AlertDialogFooter";const TC=m.forwardRef(({className:t,...s},a)=>e.jsx(Mse,{ref:a,className:Oh("text-lg font-semibold",t),...s}));TC.displayName=Mse.displayName;const FC=m.forwardRef(({className:t,...s},a)=>e.jsx(Bse,{ref:a,className:Oh("text-sm text-muted-foreground",t),...s}));FC.displayName=Bse.displayName;const RC=m.forwardRef(({className:t,...s},a)=>e.jsx(Ise,{ref:a,className:Oh(ig(),t),...s}));RC.displayName=Ise.displayName;const OC=m.forwardRef(({className:t,...s},a)=>e.jsx(Lse,{ref:a,className:Oh(ig({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));OC.displayName=Lse.displayName;function CVe(){const{toast:t}=et(),s=Yn(),[a,r]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(null),[d,c]=m.useState(null),{data:u,isLoading:h}=Ks({queryKey:["bank-tokens"],queryFn:()=>Hk.list(!1)}),x=Ya({mutationFn:b=>Hk.create(b),onSuccess:b=>{o(b.token),r(!1),i(!0),s.invalidateQueries({queryKey:["bank-tokens"]}),t({title:"Token created",description:"Your API token has been created. Store it securely."})},onError:b=>{t({title:"Failed to create token",description:b?.message||"An error occurred",variant:"destructive"})}}),g=Ya({mutationFn:({tokenId:b,reason:N})=>Hk.revoke(b,N),onSuccess:()=>{s.invalidateQueries({queryKey:["bank-tokens"]}),c(null),t({title:"Token revoked",description:"The API token has been revoked successfully."})},onError:b=>{t({title:"Failed to revoke token",description:b?.message||"An error occurred",variant:"destructive"})}}),j=b=>{navigator.clipboard.writeText(b),t({title:"Copied",description:"Token copied to clipboard"})},y=u?.tokens||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"API Tokens"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Create and manage API tokens for programmatic access to LCopilot"})]}),e.jsxs(wt,{open:a,onOpenChange:r,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Token"]})}),e.jsxs(yt,{className:"sm:max-w-[500px]",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create API Token"}),e.jsx(_t,{children:"Create a new API token for programmatic access. You'll only see the token once."})]}),e.jsx(SVe,{onSubmit:b=>x.mutate(b),isLoading:x.isPending})]})]})]}),e.jsx(wt,{open:n,onOpenChange:i,children:e.jsxs(yt,{className:"sm:max-w-[600px]",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Token Created"}),e.jsx(_t,{children:"Store this token securely. You won't be able to see it again."})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{value:l,readOnly:!0,className:"font-mono text-sm pr-10"}),e.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full",onClick:()=>j(l),children:e.jsx(qa,{className:"h-4 w-4"})})]}),e.jsx("div",{className:"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-4",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"âš ï¸ This is the only time you'll see this token. Make sure to copy it now."})})]}),e.jsx(ms,{children:e.jsx(M,{onClick:()=>i(!1),children:"I've Saved It"})})]})}),h?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading tokens..."}):y.length===0?e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Sc,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No API tokens"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first API token to get started with programmatic access"}),e.jsxs(M,{onClick:()=>r(!0),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Token"]})]})})}):e.jsx("div",{className:"grid gap-4",children:y.map(b=>e.jsx(kVe,{token:b,onRevoke:()=>c(b.id)},b.id))}),e.jsx(pR,{open:!!d,onOpenChange:b=>!b&&c(null),children:e.jsxs(AC,{children:[e.jsxs(PC,{children:[e.jsx(TC,{children:"Revoke API Token?"}),e.jsx(FC,{children:"This action cannot be undone. The token will immediately stop working."})]}),e.jsxs(DC,{children:[e.jsx(OC,{children:"Cancel"}),e.jsx(RC,{onClick:()=>d&&g.mutate({tokenId:d}),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Revoke Token"})]})]})})]})}function SVe({onSubmit:t,isLoading:s}){const[a,r]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState([]),[d,c]=m.useState(""),u=[{id:"read:results",label:"Read Results"},{id:"write:results",label:"Write Results"},{id:"read:jobs",label:"Read Jobs"},{id:"write:jobs",label:"Write Jobs"}],h=g=>{g.preventDefault(),t({name:a,description:n||void 0,scopes:l,expires_at:d?new Date(d).toISOString():void 0})},x=g=>{o(j=>j.includes(g)?j.filter(y=>y!==g):[...j,g])};return e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",children:"Token Name *"}),e.jsx(oe,{id:"name",value:a,onChange:g=>r(g.target.value),placeholder:"e.g., Production API",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(Zt,{id:"description",value:n,onChange:g=>i(g.target.value),placeholder:"Optional description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Scopes *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:u.map(g=>e.jsxs(M,{type:"button",variant:l.includes(g.id)?"default":"outline",onClick:()=>x(g.id),className:"justify-start",children:[l.includes(g.id)&&e.jsx(Da,{className:"h-4 w-4 mr-2"}),g.label]},g.id))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"expires_at",children:"Expires At (Optional)"}),e.jsx(oe,{id:"expires_at",type:"datetime-local",value:d,onChange:g=>c(g.target.value)})]}),e.jsx(ms,{children:e.jsx(M,{type:"submit",disabled:s||!a||l.length===0,children:s?"Creating...":"Create Token"})})]})}function kVe({token:t,onRevoke:s}){const[a,r]=m.useState(!1),n=t.expires_at&&new Date(t.expires_at)<new Date,i=!!t.revoked_at;return e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-base",children:t.name}),t.description&&e.jsx(ue,{children:t.description})]}),e.jsx("div",{className:"flex items-center gap-2",children:i?e.jsx(Q,{variant:"destructive",children:"Revoked"}):n?e.jsx(Q,{variant:"secondary",children:"Expired"}):t.is_active?e.jsx(Q,{variant:"default",children:"Active"}):e.jsx(Q,{variant:"secondary",children:"Inactive"})})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Sc,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{className:"font-mono text-xs",children:[t.token_prefix,"****...****"]})]}),t.last_used_at&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(mt,{className:"h-4 w-4"}),e.jsxs("span",{children:["Last used ",hs(new Date(t.last_used_at),"MMM d, yyyy")]})]}),t.usage_count>0&&e.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[e.jsx(Wn,{className:"h-4 w-4"}),e.jsxs("span",{children:[t.usage_count," uses"]})]})]}),a&&e.jsx("div",{className:"space-y-2 text-sm border-t pt-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Scopes"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.scopes.map(l=>e.jsx(Q,{variant:"outline",className:"text-xs",children:l},l))})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Created"}),e.jsx("p",{className:"mt-1",children:hs(new Date(t.created_at),"MMM d, yyyy")})]}),t.expires_at&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Expires"}),e.jsx("p",{className:"mt-1",children:hs(new Date(t.expires_at),"MMM d, yyyy")})]})]})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>r(!a),children:a?e.jsxs(e.Fragment,{children:[e.jsx(yd,{className:"h-4 w-4 mr-2"}),"Hide Details"]}):e.jsxs(e.Fragment,{children:[e.jsx(Da,{className:"h-4 w-4 mr-2"}),"Show Details"]})}),!i&&e.jsxs(M,{variant:"destructive",size:"sm",onClick:s,children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Revoke"]})]})]})})]})}function EVe(){const{toast:t}=et(),s=Yn(),[a,r]=m.useState(!1),[n,i]=m.useState(!1),[l,o]=m.useState(null),[d,c]=m.useState(null),[u,h]=m.useState(null),{data:x,isLoading:g}=Ks({queryKey:["bank-webhooks"],queryFn:()=>Tf.list()}),j=Ya({mutationFn:C=>Tf.create(C),onSuccess:C=>{o(C.secret),r(!1),i(!0),s.invalidateQueries({queryKey:["bank-webhooks"]}),t({title:"Webhook created",description:"Your webhook subscription has been created."})},onError:C=>{t({title:"Failed to create webhook",description:C?.message||"An error occurred",variant:"destructive"})}}),y=Ya({mutationFn:C=>Tf.delete(C),onSuccess:()=>{s.invalidateQueries({queryKey:["bank-webhooks"]}),c(null),t({title:"Webhook deleted",description:"The webhook subscription has been deleted."})},onError:C=>{t({title:"Failed to delete webhook",description:C?.message||"An error occurred",variant:"destructive"})}}),b=Ya({mutationFn:C=>Tf.test(C),onSuccess:C=>{t({title:"Webhook tested",description:`Status: ${C.status} (${C.http_status_code||"N/A"})`}),s.invalidateQueries({queryKey:["bank-webhooks"]})},onError:C=>{t({title:"Test failed",description:C?.message||"An error occurred",variant:"destructive"})}}),N=x?.subscriptions||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Webhook Subscriptions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Configure webhooks to receive real-time notifications about LC validation events"})]}),e.jsxs(wt,{open:a,onOpenChange:r,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Webhook"]})}),e.jsxs(yt,{className:"sm:max-w-[600px]",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Webhook Subscription"}),e.jsx(_t,{children:"Configure a webhook endpoint to receive LC validation events"})]}),e.jsx(AVe,{onSubmit:C=>j.mutate(C),isLoading:j.isPending})]})]})]}),e.jsx(wt,{open:n,onOpenChange:i,children:e.jsxs(yt,{className:"sm:max-w-[600px]",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Webhook Secret"}),e.jsx(_t,{children:"Store this secret securely. You'll need it to verify webhook signatures."})]}),l&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(oe,{value:l,readOnly:!0,className:"font-mono text-sm pr-10"}),e.jsx(M,{variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full",onClick:()=>{navigator.clipboard.writeText(l),t({title:"Copied",description:"Secret copied to clipboard"})},children:"Copy"})]}),e.jsx("div",{className:"rounded-lg bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 p-4",children:e.jsx("p",{className:"text-sm text-yellow-800 dark:text-yellow-200",children:"âš ï¸ This is the only time you'll see this secret. Make sure to copy it now."})})]}),e.jsx(ms,{children:e.jsx(M,{onClick:()=>i(!1),children:"I've Saved It"})})]})}),g?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading webhooks..."}):N.length===0?e.jsx($,{children:e.jsx(U,{className:"pt-6",children:e.jsxs("div",{className:"text-center py-8",children:[e.jsx(LD,{className:"h-12 w-12 mx-auto text-muted-foreground mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"No webhook subscriptions"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Create your first webhook subscription to receive real-time events"}),e.jsxs(M,{onClick:()=>r(!0),children:[e.jsx(Yt,{className:"h-4 w-4 mr-2"}),"Create Webhook"]})]})})}):e.jsx("div",{className:"grid gap-4",children:N.map(C=>e.jsx(PVe,{subscription:C,onDelete:()=>c(C.id),onTest:()=>b.mutate(C.id),onViewDeliveries:()=>h(C.id)},C.id))}),e.jsx(pR,{open:!!d,onOpenChange:C=>!C&&c(null),children:e.jsxs(AC,{children:[e.jsxs(PC,{children:[e.jsx(TC,{children:"Delete Webhook Subscription?"}),e.jsx(FC,{children:"This action cannot be undone. The webhook will stop receiving events immediately."})]}),e.jsxs(DC,{children:[e.jsx(OC,{children:"Cancel"}),e.jsx(RC,{onClick:()=>d&&y.mutate(d),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete"})]})]})}),u&&e.jsx(DVe,{subscriptionId:u,onClose:()=>h(null)})]})}function AVe({onSubmit:t,isLoading:s}){const[a,r]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[d,c]=m.useState([]),[u,h]=m.useState(30),[x,g]=m.useState(3),j=[{id:"validation.completed",label:"Validation Completed"},{id:"validation.failed",label:"Validation Failed"},{id:"discrepancy.created",label:"Discrepancy Created"},{id:"approval.required",label:"Approval Required"}],y=N=>{N.preventDefault(),t({name:a,description:n||void 0,url:l,events:d,timeout_seconds:u,retry_count:x})},b=N=>{c(C=>C.includes(N)?C.filter(_=>_!==N):[...C,N])};return e.jsxs("form",{onSubmit:y,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",children:"Webhook Name *"}),e.jsx(oe,{id:"name",value:a,onChange:N=>r(N.target.value),placeholder:"e.g., Production Webhook",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"description",children:"Description"}),e.jsx(Zt,{id:"description",value:n,onChange:N=>i(N.target.value),placeholder:"Optional description",rows:2})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"url",children:"Webhook URL *"}),e.jsx(oe,{id:"url",type:"url",value:l,onChange:N=>o(N.target.value),placeholder:"https://example.com/webhook",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Events *"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:j.map(N=>e.jsx(M,{type:"button",variant:d.includes(N.id)?"default":"outline",onClick:()=>b(N.id),className:"justify-start",children:N.label},N.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"timeout",children:"Timeout (seconds)"}),e.jsx(oe,{id:"timeout",type:"number",min:"1",max:"300",value:u,onChange:N=>h(parseInt(N.target.value)||30)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"retries",children:"Retry Count"}),e.jsx(oe,{id:"retries",type:"number",min:"0",max:"10",value:x,onChange:N=>g(parseInt(N.target.value)||3)})]})]}),e.jsx(ms,{children:e.jsx(M,{type:"submit",disabled:s||!a||!l||d.length===0,children:s?"Creating...":"Create Webhook"})})]})}function PVe({subscription:t,onDelete:s,onTest:a,onViewDeliveries:r}){const n=t.success_count+t.failure_count>0?Math.round(t.success_count/(t.success_count+t.failure_count)*100):0;return e.jsxs($,{children:[e.jsx(X,{children:e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(ee,{className:"text-base",children:t.name}),t.description&&e.jsx(ue,{children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx(Q,{variant:t.is_active?"default":"secondary",children:t.is_active?"Active":"Inactive"}),t.last_delivery_at&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last delivery: ",hs(new Date(t.last_delivery_at),"MMM d, yyyy HH:mm")]})]})]})})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"URL"}),e.jsx("p",{className:"font-mono text-xs break-all",children:t.url})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Events"}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:t.events.map(i=>e.jsx(Q,{variant:"outline",className:"text-xs",children:i},i))})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Success Rate"}),e.jsxs("p",{className:"font-semibold",children:[n,"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Success"}),e.jsx("p",{className:"font-semibold text-green-600",children:t.success_count})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Failures"}),e.jsx("p",{className:"font-semibold text-red-600",children:t.failure_count})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:a,children:[e.jsx(OD,{className:"h-4 w-4 mr-2"}),"Test"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:r,children:[e.jsx(ir,{className:"h-4 w-4 mr-2"}),"View Deliveries"]}),e.jsxs(M,{variant:"destructive",size:"sm",onClick:s,className:"ml-auto",children:[e.jsx(ia,{className:"h-4 w-4 mr-2"}),"Delete"]})]})]})})]})}function DVe({subscriptionId:t,onClose:s}){const{toast:a}=et(),r=Yn(),[n,i]=m.useState(),{data:l,isLoading:o}=Ks({queryKey:["bank-webhook-deliveries",t,n],queryFn:()=>Tf.listDeliveries(t,{status:n,limit:50})}),d=Ya({mutationFn:u=>Tf.replay(u),onSuccess:()=>{r.invalidateQueries({queryKey:["bank-webhook-deliveries",t]}),a({title:"Delivery replayed",description:"The webhook delivery has been replayed."})},onError:u=>{a({title:"Failed to replay",description:u?.message||"An error occurred",variant:"destructive"})}}),c=l?.deliveries||[];return e.jsx(wt,{open:!0,onOpenChange:s,children:e.jsxs(yt,{className:"sm:max-w-[900px] max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Webhook Deliveries"}),e.jsx(_t,{children:"View delivery history and replay failed deliveries"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{children:"Filter by status:"}),e.jsxs("select",{value:n||"",onChange:u=>i(u.target.value||void 0),className:"px-3 py-1 border rounded-md",children:[e.jsx("option",{value:"",children:"All"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"retrying",children:"Retrying"})]})]}),o?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"Loading deliveries..."}):c.length===0?e.jsx("div",{className:"text-center py-8 text-muted-foreground",children:"No deliveries found"}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Event"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Attempt"}),e.jsx(je,{children:"HTTP Status"}),e.jsx(je,{children:"Duration"}),e.jsx(je,{children:"Time"}),e.jsx(je,{children:"Actions"})]})}),e.jsx(oa,{children:c.map(u=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:u.event_type}),e.jsx(fe,{children:e.jsx(Q,{variant:u.status==="success"?"default":u.status==="failed"?"destructive":"secondary",children:u.status})}),e.jsxs(fe,{children:[u.attempt_number," / ",u.max_attempts]}),e.jsx(fe,{children:u.http_status_code?e.jsx("span",{className:u.http_status_code>=200&&u.http_status_code<300?"text-green-600":"text-red-600",children:u.http_status_code}):"-"}),e.jsx(fe,{children:u.duration_ms?`${u.duration_ms}ms`:"-"}),e.jsx(fe,{className:"text-xs text-muted-foreground",children:hs(new Date(u.started_at),"MMM d, HH:mm:ss")}),e.jsx(fe,{children:u.status==="failed"&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>d.mutate(u.id),disabled:d.isPending,children:e.jsx(Lt,{className:"h-4 w-4"})})})]},u.id))})]})]}),e.jsx(ms,{children:e.jsx(M,{onClick:s,children:"Close"})})]})})}function TVe({embedded:t=!1}){const[s,a]=m.useState("tokens");return e.jsxs("div",{className:"space-y-6",children:[!t&&e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold mb-1",children:"Integrations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage API tokens and webhook subscriptions for programmatic access"})]}),e.jsxs(Os,{value:s,onValueChange:a,className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2",children:[e.jsxs(He,{value:"tokens",className:"gap-2",children:[e.jsx(Sc,{className:"h-4 w-4"}),e.jsx("span",{children:"API Tokens"})]}),e.jsxs(He,{value:"webhooks",className:"gap-2",children:[e.jsx(LD,{className:"h-4 w-4"}),e.jsx("span",{children:"Webhooks"})]})]}),e.jsx(Qe,{value:"tokens",className:"mt-6",children:e.jsx(CVe,{})}),e.jsx(Qe,{value:"webhooks",className:"mt-6",children:e.jsx(EVe,{})})]})]})}const UN=20;function FVe(){const{toast:t}=et(),{user:s}=Al(),a=s?.role==="bank_admin";if(!a)return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Access Denied"}),e.jsx(ue,{children:"This section is restricted to bank administrators only."})]}),e.jsx(U,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you believe you should have access, please contact your bank administrator."})})]});const[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(1),[c,u]=m.useState(0),[h,x]=m.useState(""),[g,j]=m.useState("all"),[y,b]=m.useState("all"),[N,C]=m.useState(null),[_,A]=m.useState(!1),[k,E]=m.useState({email:"",full_name:"",password:"",role:"bank_officer"}),D=m.useCallback(async()=>{l(!0);try{const q=await cf.listUsers({page:o,per_page:UN,search:h||void 0,role:g!=="all"?g:void 0,is_active:y!=="all"?y:void 0,sort_by:"created_at",sort_order:"desc"});n(q.users),u(q.total)}catch(q){console.error("Failed to load users",q),t({title:"Error",description:"Failed to load users. Please try again.",variant:"destructive"})}finally{l(!1)}},[o,h,g,y,t]);m.useEffect(()=>{D()},[D]);const R=async()=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can invite users",variant:"destructive"});return}if(!k.email||!k.full_name||!k.password){t({title:"Validation Error",description:"Please fill in all fields",variant:"destructive"});return}C("invite");try{await cf.inviteUser(k),t({title:"Success",description:`User ${k.email} has been invited`}),A(!1),E({email:"",full_name:"",password:"",role:"bank_officer"}),D()}catch(q){t({title:"Error",description:q.response?.data?.detail||"Failed to invite user",variant:"destructive"})}finally{C(null)}},O=async(q,z)=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can change user roles",variant:"destructive"});return}C(q);try{const H={user_id:q,role:z,reason:"Role change by bank admin"};await cf.updateUserRole(q,H),t({title:"Success",description:"User role updated"}),D()}catch(H){t({title:"Error",description:H.response?.data?.detail||"Failed to update role",variant:"destructive"})}finally{C(null)}},P=async q=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can suspend users",variant:"destructive"});return}C(q);try{await cf.suspendUser(q),t({title:"Success",description:"User suspended"}),D()}catch(z){t({title:"Error",description:z.response?.data?.detail||"Failed to suspend user",variant:"destructive"})}finally{C(null)}},T=async q=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can reactivate users",variant:"destructive"});return}C(q);try{await cf.reactivateUser(q),t({title:"Success",description:"User reactivated"}),D()}catch(z){t({title:"Error",description:z.response?.data?.detail||"Failed to reactivate user",variant:"destructive"})}finally{C(null)}},B=async q=>{if(!a){t({title:"Permission Denied",description:"Only bank admins can reset 2FA",variant:"destructive"});return}C(q);try{await cf.reset2FA(q),t({title:"Success",description:"2FA reset requested. User will receive instructions via email."})}catch(z){t({title:"Error",description:z.response?.data?.detail||"Failed to reset 2FA",variant:"destructive"})}finally{C(null)}},G=Math.ceil(c/UN);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Bank Users"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage users in your bank tenant"})]}),a&&e.jsxs(wt,{open:_,onOpenChange:A,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(sh,{className:"w-4 h-4 mr-2"}),"Invite User"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Invite Bank User"}),e.jsx(_t,{children:"Create a new user account for your bank tenant"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-email",children:"Email"}),e.jsx(oe,{id:"invite-email",type:"email",placeholder:"user@bank.com",value:k.email,onChange:q=>E({...k,email:q.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-name",children:"Full Name"}),e.jsx(oe,{id:"invite-name",placeholder:"John Doe",value:k.full_name,onChange:q=>E({...k,full_name:q.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-password",children:"Password"}),e.jsx(oe,{id:"invite-password",type:"password",placeholder:"Minimum 8 characters",value:k.password,onChange:q=>E({...k,password:q.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite-role",children:"Role"}),e.jsxs(Te,{value:k.role,onValueChange:q=>E({...k,role:q}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bank_officer",children:"Bank Officer"}),e.jsx(K,{value:"bank_admin",children:"Bank Admin"})]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>A(!1),children:"Cancel"}),e.jsx(M,{onClick:R,disabled:N==="invite",children:N==="invite"?"Inviting...":"Invite"})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Users"}),e.jsx(ue,{children:"Manage user accounts, roles, and access"})]}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx(oe,{placeholder:"Search by email or name...",value:h,onChange:q=>x(q.target.value),className:"max-w-sm"}),e.jsxs(Te,{value:g,onValueChange:q=>j(q),children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Filter by role"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Roles"}),e.jsx(K,{value:"bank_officer",children:"Bank Officer"}),e.jsx(K,{value:"bank_admin",children:"Bank Admin"})]})]}),e.jsxs(Te,{value:y==="all"?"all":y?"active":"inactive",onValueChange:q=>b(q==="all"?"all":q==="active"),children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Filter by status"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"active",children:"Active"}),e.jsx(K,{value:"inactive",children:"Inactive"})]})]})]}),e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Email"}),e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Role"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Created"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:i?e.jsx(At,{children:e.jsx(fe,{colSpan:6,className:"text-center",children:"Loading..."})}):r.length===0?e.jsx(At,{children:e.jsx(fe,{colSpan:6,className:"text-center",children:"No users found"})}):r.map(q=>e.jsxs(At,{children:[e.jsx(fe,{children:q.email}),e.jsx(fe,{children:q.full_name}),e.jsx(fe,{children:a?e.jsxs(Te,{value:q.role,onValueChange:z=>O(q.id,z),disabled:N===q.id,children:[e.jsx(Pe,{className:"w-[150px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bank_officer",children:"Bank Officer"}),e.jsx(K,{value:"bank_admin",children:"Bank Admin"})]})]}):e.jsx(Q,{variant:"outline",children:q.role==="bank_admin"?"Bank Admin":"Bank Officer"})}),e.jsx(fe,{children:e.jsx(Q,{variant:q.is_active?"default":"secondary",children:q.is_active?"Active":"Suspended"})}),e.jsx(fe,{children:hs(new Date(q.created_at),"MMM d, yyyy")}),e.jsx(fe,{className:"text-right",children:a&&e.jsxs("div",{className:"flex justify-end gap-2",children:[q.is_active?e.jsx(M,{variant:"outline",size:"sm",onClick:()=>P(q.id),disabled:N===q.id,children:e.jsx(xV,{className:"w-4 h-4"})}):e.jsx(M,{variant:"outline",size:"sm",onClick:()=>T(q.id),disabled:N===q.id,children:e.jsx(yu,{className:"w-4 h-4"})}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>B(q.id),disabled:N===q.id,title:"Reset 2FA",children:e.jsx(iV,{className:"w-4 h-4"})})]})})]},q.id))})]}),G>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(o-1)*UN+1," to ",Math.min(o*UN,c)," of ",c," users"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",onClick:()=>d(q=>Math.max(1,q-1)),disabled:o===1,children:"Previous"}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>d(q=>Math.min(G,q+1)),disabled:o===G,children:"Next"})]})]})]})})]})]})}function RVe(){const{toast:t}=et(),{user:s}=Al();if(!(s?.role==="bank_admin"))return e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Access Denied"}),e.jsx(ue,{children:"This section is restricted to bank administrators only."})]}),e.jsx(U,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"If you believe you should have access, please contact your bank administrator."})})]});const[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(!1),[c,u]=m.useState(null),[h,x]=m.useState(null),[g,j]=m.useState({bank_company_id:s?.company_id||"",kind:"branch",name:"",code:"",level:0,sort_order:0,is_active:!0}),y=m.useCallback(async()=>{l(!0);try{const A=await F0.listOrgs();n(A.orgs)}catch(A){console.error("Failed to load orgs",A),t({title:"Error",description:"Failed to load organizations. Please try again.",variant:"destructive"})}finally{l(!1)}},[t]);m.useEffect(()=>{y()},[y]);const b=async()=>{if(!g.name.trim()){t({title:"Validation Error",description:"Organization name is required",variant:"destructive"});return}x("create");try{await F0.createOrg(g),t({title:"Success",description:"Organization created successfully"}),d(!1),j({bank_company_id:s?.company_id||"",kind:"branch",name:"",code:"",level:0,sort_order:0,is_active:!0}),y()}catch(A){t({title:"Error",description:A.response?.data?.detail||"Failed to create organization",variant:"destructive"})}finally{x(null)}},N=async(A,k)=>{x(A);try{await F0.updateOrg(A,k),t({title:"Success",description:"Organization updated successfully"}),u(null),y()}catch(E){t({title:"Error",description:E.response?.data?.detail||"Failed to update organization",variant:"destructive"})}finally{x(null)}},C=async A=>{if(confirm("Are you sure you want to delete this organization? This action cannot be undone.")){x(A);try{await F0.deleteOrg(A),t({title:"Success",description:"Organization deleted successfully"}),y()}catch(k){t({title:"Error",description:k.response?.data?.detail||"Failed to delete organization",variant:"destructive"})}finally{x(null)}}},_=async A=>{await N(A.id,{is_active:!A.is_active})};return i?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Organizations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage bank branches, regions, and groups"})]})}),e.jsx($,{children:e.jsx(U,{className:"py-8",children:e.jsx("div",{className:"text-center text-muted-foreground",children:"Loading..."})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-semibold",children:"Organizations"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage bank branches, regions, and groups"})]}),e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create Organization"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Organization"}),e.jsx(_t,{children:"Add a new branch, region, or group to your bank"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"org-name",children:"Name *"}),e.jsx(oe,{id:"org-name",placeholder:"e.g., New York Branch",value:g.name,onChange:A=>j({...g,name:A.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"org-code",children:"Code"}),e.jsx(oe,{id:"org-code",placeholder:"e.g., NYC-001",value:g.code,onChange:A=>j({...g,code:A.target.value})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Short identifier (optional)"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"org-kind",children:"Type *"}),e.jsxs(Te,{value:g.kind,onValueChange:A=>j({...g,kind:A}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"branch",children:"Branch"}),e.jsx(K,{value:"region",children:"Region"}),e.jsx(K,{value:"group",children:"Group"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"org-sort",children:"Sort Order"}),e.jsx(oe,{id:"org-sort",type:"number",min:"0",value:g.sort_order,onChange:A=>j({...g,sort_order:parseInt(A.target.value)||0})}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Lower numbers appear first"})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:b,disabled:h==="create",children:h==="create"?"Creating...":"Create"})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Organizations"}),e.jsx(ue,{children:"Manage organizational units for your bank"})]}),e.jsx(U,{children:r.length===0?e.jsxs("div",{className:"py-8 text-center text-muted-foreground",children:[e.jsx(Bs,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No organizations found"}),e.jsx("p",{className:"text-sm mt-2",children:"Create your first organization to get started"})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Name"}),e.jsx(je,{children:"Code"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Sort Order"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:r.map(A=>e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:A.name}),e.jsx(fe,{children:A.code||"-"}),e.jsx(fe,{children:e.jsx(Q,{variant:"outline",children:A.kind})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{checked:A.is_active??!0,onCheckedChange:()=>_(A),disabled:h===A.id}),e.jsx("span",{className:"text-sm",children:A.is_active??!0?"Active":"Inactive"})]})}),e.jsx(fe,{children:A.sort_order}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>u(A),disabled:h===A.id,children:e.jsx(zn,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>C(A.id),disabled:h===A.id,children:e.jsx(ia,{className:"w-4 h-4 text-destructive"})})]})})]},A.id))})]})})]}),c&&e.jsx(wt,{open:!!c,onOpenChange:A=>!A&&u(null),children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Edit Organization"}),e.jsx(_t,{children:"Update organization details"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-name",children:"Name *"}),e.jsx(oe,{id:"edit-name",value:c.name,onChange:A=>u({...c,name:A.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-code",children:"Code"}),e.jsx(oe,{id:"edit-code",value:c.code||"",onChange:A=>u({...c,code:A.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-sort",children:"Sort Order"}),e.jsx(oe,{id:"edit-sort",type:"number",min:"0",value:c.sort_order,onChange:A=>u({...c,sort_order:parseInt(A.target.value)||0})})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),e.jsx(M,{onClick:()=>{c&&N(c.id,{name:c.name,code:c.code,sort_order:c.sort_order})},disabled:h===c.id,children:h===c.id?"Updating...":"Update"})]})]})})]})}function OVe(){const{user:t,isAuthenticated:s,isLoading:a}=Al(),r=zt(),[n,i]=zs(),[l,o]=m.useState(()=>n.get("tab")||"dashboard"),[d,c]=m.useState("overview"),u=t?.role==="bank_admin";if(m.useEffect(()=>{!a&&!s&&r("/lcopilot/bank-dashboard/login")},[s,a,r]),m.useEffect(()=>{const g=n.get("tab")||"dashboard";o(g)},[n]),m.useEffect(()=>{l==="users"&&!u&&(o("dashboard"),r("/lcopilot/bank-dashboard?tab=dashboard",{replace:!0}))},[l,u,r]),m.useEffect(()=>{l==="policy"&&!u&&(o("dashboard"),r("/lcopilot/bank-dashboard?tab=dashboard",{replace:!0}))},[l,u,r]),a)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!s)return null;const h=g=>{o(g);const j=new URLSearchParams(n);j.set("tab",g),g!=="results"&&j.delete("client"),i(j)},x=g=>{c(g);const y={overview:"billing",usage:"billing-usage",invoices:"billing",allocations:"billing-allocations"}[g]||"billing";h(y)};return e.jsx(tqe,{children:e.jsx(Lc,{sidebar:e.jsx(Sqe,{}),breadcrumbs:[{label:"LCopilot",href:"/lcopilot"},{label:"Bank Dashboard"}],children:e.jsxs("div",{className:"flex flex-col gap-6 p-6 lg:p-8",children:[l==="dashboard"&&e.jsx(nVe,{}),l==="dashboard"&&e.jsx(MVe,{}),l==="upload"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Upload LC Documents"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload single or bulk LC documents for validation"})]}),e.jsx(Qte,{onUploadSuccess:()=>h("queue")})]}),l==="queue"&&e.jsx(Xqe,{embedded:!0}),l==="results"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Validation Results"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View and filter completed LC validations"})]}),e.jsx(fse,{})]}),l==="clients"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:"Client Management"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"View client statistics and performance metrics"})]}),e.jsx(vse,{})]}),l==="client-dashboard"&&(()=>{const g=n.get("client");return g?e.jsx(kqe,{clientName:decodeURIComponent(g),embedded:!0,onBack:()=>h("clients")}):e.jsx($,{children:e.jsxs(U,{className:"pt-6",children:[e.jsx("p",{className:"text-destructive",children:"Client name is required"}),e.jsxs(M,{onClick:()=>h("clients"),className:"mt-4",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]})]})})})(),l==="analytics"&&e.jsx("div",{className:"space-y-4",children:e.jsx(Eqe,{})}),l==="sla"&&e.jsx(eVe,{embedded:!0}),l==="approvals"&&e.jsx(Oqe,{embedded:!0}),l==="discrepancies"&&e.jsx(Uqe,{embedded:!0}),l==="policy"&&e.jsx(Gqe,{embedded:!0}),l==="evidence-packs"&&e.jsx(tVe,{embedded:!0}),l==="bulk-jobs"&&e.jsx(cVe,{embedded:!0}),l==="notifications"&&e.jsx(Yqe,{embedded:!0}),l==="billing"&&(d==="invoices"?e.jsx(dR,{onTabChange:x,mode:"bank"}):e.jsx(oR,{onTabChange:x,mode:"bank"})),l==="billing-usage"&&e.jsx(cR,{onTabChange:x,mode:"bank"}),l==="billing-allocations"&&e.jsx(oVe,{onTabChange:x}),l==="users"&&u&&e.jsx(FVe,{}),l==="orgs"&&u&&e.jsx(RVe,{}),l==="settings"&&e.jsx(BVe,{}),l==="ai-assistance"&&e.jsx(lVe,{embedded:!0}),l==="integrations"&&e.jsx(TVe,{embedded:!0}),l==="help"&&e.jsx($Ve,{})]})})})}const IVe=[{id:"LC-BNK-2024-001",lcNumber:"LC-BNK-2024-001",clientName:"Global Exports Inc.",date:"2024-01-15",status:"approved",discrepancies:0,complianceScore:98},{id:"LC-BNK-2024-002",lcNumber:"LC-BNK-2024-002",clientName:"Dhaka Trading Co.",date:"2024-01-14",status:"flagged",discrepancies:2,complianceScore:85},{id:"LC-BNK-2024-003",lcNumber:"LC-BNK-2024-003",clientName:"Chittagong Imports",date:"2024-01-14",status:"approved",discrepancies:0,complianceScore:96}],LVe=[{id:1,title:"Approval Required",message:"LC-BNK-2024-001 requires your approval at Analyst Review stage.",type:"approval",timestamp:"15 minutes ago",read:!1,link:"/lcopilot/bank-dashboard?tab=approvals&lc=LC-BNK-2024-001",badge:"Pending",action:{label:"Review Approval",action:()=>{}}},{id:2,title:"Discrepancy Assigned",message:"You have been assigned to resolve discrepancy in LC-BNK-2024-002.",type:"discrepancy",timestamp:"1 hour ago",read:!1,link:"/lcopilot/bank-dashboard?tab=discrepancies&lc=LC-BNK-2024-002",badge:"High Priority",action:{label:"View Discrepancy",action:()=>{},variant:"destructive"}},{id:3,title:"Validation Complete",message:"LC-BNK-2024-003 validation completed successfully with no issues.",type:"success",timestamp:"3 hours ago",read:!1,link:"/lcopilot/bank-dashboard?tab=results&lc=LC-BNK-2024-003",action:{label:"View Results",action:()=>{}}}];function MVe(){const{user:t}=Al(),s=zt(),[a,r]=m.useState(LVe),n=o=>{r(d=>d.map(c=>c.id===o?{...c,read:!0}:c))},i=o=>{r(d=>d.filter(c=>c.id!==o))},l=()=>{r(o=>o.map(d=>({...d,read:!0})))};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-3xl font-bold text-foreground mb-2",children:["Welcome back, ",t?.name||t?.email?.split("@")[0]||"Bank User"]}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your LC validations today."})]}),e.jsx(gse,{}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Recent LC Validations"]}),e.jsx(ue,{children:"Your latest document validation results"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:IVe.map(o=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-secondary/20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:o.status==="approved"?e.jsx("div",{className:"bg-green-500/10 p-2 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5 text-green-500"})}):e.jsx("div",{className:"bg-yellow-500/10 p-2 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-yellow-500"})})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:o.lcNumber}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Client: ",o.clientName]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:[e.jsx("span",{children:o.date}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Score: ",o.complianceScore,"%"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fa,{status:o.discrepancies===0?"success":"warning",children:o.discrepancies===0?"No issues":o.discrepancies===1?"1 issue":`${o.discrepancies} issues`}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>s(`/lcopilot/bank-dashboard?tab=results&lc=${o.lcNumber}`),children:"View"})]})]},o.id))})})]})}),e.jsx("div",{className:"space-y-6",children:e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Notifications"]}),e.jsx(ue,{children:"Recent updates and alerts"})]}),e.jsxs(U,{children:[e.jsx(uR,{notifications:a.slice(0,3),onMarkAsRead:n,onDismiss:i,onMarkAllAsRead:l,showHeader:!1}),e.jsx(M,{variant:"outline",size:"sm",className:"w-full mt-4",onClick:()=>s("/lcopilot/bank-dashboard?tab=notifications"),children:"View All Notifications"})]})]})})]})]})}function BVe(){const{toast:t}=et(),[s,a]=m.useState(!0),[r,n]=m.useState(!1),[i,l]=m.useState("daily"),[o,d]=m.useState("upload"),[c,u]=m.useState(!1),[h,x]=m.useState("preferences"),g=()=>{u(!0),setTimeout(()=>{u(!1),t({title:"Preferences updated",description:"Your bank workspace settings were saved successfully."})},600)},j=()=>{a(!0),n(!1),l("daily"),d("upload")};return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Settings"}),e.jsx(ue,{children:"Configure bank workspace preferences and data retention."})]}),e.jsx(U,{children:e.jsxs(Os,{value:h,onValueChange:x,className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"preferences",children:"Preferences"}),e.jsx(He,{value:"company-profile",children:"Company Profile"}),e.jsx(He,{value:"data-retention",children:"Data & Privacy"})]}),e.jsxs(Qe,{value:"preferences",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Email alerts for discrepancies"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive an email whenever a validation is flagged."})]}),e.jsx(js,{checked:s,onCheckedChange:a,"aria-label":"Toggle discrepancy email alerts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Auto-archive completed validations"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Move completed validations to archive 30 days after completion."})]}),e.jsx(js,{checked:r,onCheckedChange:n,"aria-label":"Toggle auto archive"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"digest-frequency",children:"Notification digest"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{id:"digest-frequency",children:e.jsx(Fe,{placeholder:"Select frequency"})}),e.jsxs(De,{children:[e.jsx(K,{value:"instant",children:"Instant"}),e.jsx(K,{value:"hourly",children:"Hourly"}),e.jsx(K,{value:"daily",children:"Daily"}),e.jsx(K,{value:"weekly",children:"Weekly"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how often you receive summary notifications."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"default-view",children:"Default workspace view"}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{id:"default-view",children:e.jsx(Fe,{placeholder:"Select default view"})}),e.jsxs(De,{children:[e.jsx(K,{value:"upload",children:"Upload LC"}),e.jsx(K,{value:"queue",children:"Processing Queue"}),e.jsx(K,{value:"results",children:"Results"}),e.jsx(K,{value:"analytics",children:"Analytics"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The section that opens first each time you visit."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(M,{variant:"outline",onClick:j,children:"Reset"}),e.jsx(M,{onClick:g,disabled:c,children:c?"Saving...":"Save preferences"})]})]}),e.jsx(Qe,{value:"company-profile",className:"mt-6",children:e.jsx(tR,{embedded:!0})}),e.jsx(Qe,{value:"data-retention",className:"mt-6",children:e.jsx(eR,{embedded:!0})})]})})]})}function $Ve(){return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Need Help?"}),e.jsx(ue,{children:"Browse bank resources, walkthroughs, and contact options."})]}),e.jsx(InAppTutorials,{dashboard:"bank"})]})}),e.jsxs(U,{className:"space-y-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(iVe,{}),e.jsx(M,{variant:"outline",onClick:()=>window.open("/lcopilot/support","_blank"),children:"Support Center"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("/docs/bank-runbook","_blank"),children:"Bank Runbook"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("mailto:support@trdrhub.com"),children:"Email Support"})]}),e.jsxs(oo,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(Qr,{value:"faq-1",children:[e.jsx(Xr,{children:"How do I upload and validate LC documents?"}),e.jsxs(en,{children:["Select ",e.jsx("span",{className:"font-medium",children:"Upload LC"}),", attach the LC and supporting documents, then submit for validation. Track progress in ",e.jsx("span",{className:"font-medium",children:"Processing Queue"})," and view results under ",e.jsx("span",{className:"font-medium",children:"Results"}),"."]})]}),e.jsxs(Qr,{value:"faq-2",children:[e.jsx(Xr,{children:"How do I manage approvals and discrepancies?"}),e.jsxs(en,{children:["Use the ",e.jsx("span",{className:"font-medium",children:"Approvals"})," tab to review and approve LC validations. The ",e.jsx("span",{className:"font-medium",children:"Discrepancies"})," tab shows flagged issues that need resolution."]})]}),e.jsxs(Qr,{value:"faq-3",children:[e.jsx(Xr,{children:"Who receives notifications?"}),e.jsxs(en,{children:["Notification recipients are defined in ",e.jsx("span",{className:"font-medium",children:"Settings"}),". Enable email alerts or set digest frequency to control how your team is notified of validations, approvals, and discrepancies."]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200/60 bg-secondary/20 p-4",children:[e.jsx("p",{className:"text-xs",children:"Need a guided walkthrough? Schedule a 30-minute onboarding session with our success team and we'll review your bank workflow end-to-end."}),e.jsx(M,{size:"sm",className:"mt-3",onClick:()=>window.open("https://cal.com/trdrhub/bank-onboarding","_blank"),children:"Book onboarding session"})]})]})]})}function UVe(){const[t,s]=m.useState(""),[a,r]=m.useState(""),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[d,c]=m.useState(""),[u,h]=m.useState(!0),[x,g]=m.useState(!1),[j,y]=m.useState(""),[b,N]=m.useState(""),[C,_]=m.useState(!1),[A,k]=m.useState(!1),[E,D]=m.useState(""),{login:R}=Al(),O=async q=>{q.preventDefault(),o(!0),c("");try{await R(t,a);try{_(!0);const z=await vw.request2FA();N(z.session_id),h(!1),g(!0),z.code&&console.log("2FA Code (dev only):",z.code)}catch(z){z?.response?.status===501||console.warn("2FA request failed:",z)}finally{_(!1),o(!1)}}catch(z){c(z instanceof Error?z.message:"Login failed"),o(!1)}},P=async q=>{q.preventDefault(),k(!0),D("");try{await vw.verify2FA(j,b)}catch(z){D(z?.response?.data?.detail||"Invalid code. Please try again.")}finally{k(!1)}},T=async()=>{_(!0),D("");try{const q=await vw.request2FA();N(q.session_id),q.code&&console.log("2FA Code (dev only):",q.code)}catch(q){D(q?.response?.data?.detail||"Failed to resend code")}finally{_(!1)}},B=[{role:"Bank Admin",email:"admin@bankone.com",password:"admin123"},{role:"Bank Admin",email:"manager@bankone.com",password:"manager123"},{role:"Bank Officer",email:"officer1@bankone.com",password:"officer123"},{role:"Bank Officer",email:"officer2@bankone.com",password:"officer123"},{role:"Bank Officer",email:"officer3@bankone.com",password:"officer123"}],G=(q,z)=>{s(q),r(z)};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Bs,{className:"mx-auto h-12 w-12 text-blue-600"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Bank Dashboard"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access LCopilot Bank Dashboard"})]}),u&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Sign In"}),e.jsx(ue,{children:"Enter your bank credentials to continue"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(oe,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:q=>s(q.target.value),placeholder:"admin@bankone.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:a,onChange:q=>r(q.target.value),placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!n),children:n?e.jsx(yd,{className:"h-4 w-4 text-gray-400"}):e.jsx(Da,{className:"h-4 w-4 text-gray-400"})})]})]}),d&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:d}),e.jsx(M,{type:"submit",className:"w-full",disabled:l||C,children:l||C?"Signing in...":"Sign in"})]})})]}),x&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5"}),"Two-Factor Authentication"]}),e.jsx(ue,{children:"Enter the 6-digit code sent to your registered device"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:P,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"2fa-code",children:"Verification Code"}),e.jsx(oe,{id:"2fa-code",name:"2fa-code",type:"text",inputMode:"numeric",maxLength:6,required:!0,value:j,onChange:q=>{const z=q.target.value.replace(/\D/g,"").slice(0,6);y(z)},placeholder:"000000",className:"text-center text-2xl tracking-widest font-mono",autoFocus:!0}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Enter the 6-digit code from your authenticator app or SMS"})]}),E&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:E}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{type:"button",variant:"outline",className:"flex-1",onClick:()=>{g(!1),h(!0),y(""),D("")},disabled:A,children:"Back"}),e.jsx(M,{type:"button",variant:"ghost",onClick:T,disabled:C||A,className:"text-sm",children:C?"Sending...":"Resend Code"}),e.jsx(M,{type:"submit",className:"flex-1",disabled:j.length!==6||A,children:A?"Verifying...":"Verify"})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Demo Credentials"}),e.jsx(ue,{children:"Click any credential set to auto-fill the form"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:B.map((q,z)=>e.jsxs("button",{onClick:()=>G(q.email,q.password),className:"w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:q.role}),e.jsx("div",{className:"text-sm text-gray-600",children:q.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Password: ",q.password]})]},z))})})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"LCopilot Bank Dashboard v1.0"}),e.jsx("p",{className:"mt-1",children:"For authorized bank personnel only"})]})]})})}function zVe({activeSection:t,onSectionChange:s,...a}){const r=rn(),{user:n,logout:i}=CT(),l=d=>r.pathname===d,o=()=>{i()};return e.jsxs(Zo,{collapsible:"icon",...a,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-importer/10 text-importer",children:e.jsx(Ps,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"LCopilot"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Importer Portal"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Main Navigation"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="dashboard"||l("/lcopilot/importer-dashboard"),onClick:()=>s("dashboard"),children:[e.jsx(Ws,{}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="templates",onClick:()=>s("templates"),tooltip:"Templates",children:[e.jsx(Be,{}),e.jsx("span",{children:"Templates"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="upload",onClick:()=>s("upload"),tooltip:"Upload LC",children:[e.jsx(Hs,{}),e.jsx("span",{children:"Upload LC"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="reviews",onClick:()=>s("reviews"),tooltip:"Review Results",children:[e.jsx(xn,{}),e.jsx("span",{children:"Review Results"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="workspace",onClick:()=>s("workspace"),tooltip:"LC Workspace",children:[e.jsx(R1,{}),e.jsx("span",{children:"LC Workspace"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="analytics",onClick:()=>s("analytics"),tooltip:"Analytics",children:[e.jsx(Ws,{}),e.jsx("span",{children:"Analytics"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="notifications",onClick:()=>s("notifications"),tooltip:"Notifications",children:[e.jsx($s,{}),e.jsx("span",{children:"Notifications"})]})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Billing & Finance"}),e.jsx(Js,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs(it,{isActive:t==="billing",onClick:()=>s("billing"),tooltip:"Billing",children:[e.jsx(pn,{}),e.jsx("span",{children:"Billing"})]})})})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"AI & Tools"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="ai-assistance",onClick:()=>s("ai-assistance"),tooltip:"AI Assistance",children:[e.jsx(ni,{}),e.jsx("span",{children:"AI Assistance"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="content-library",onClick:()=>s("content-library"),tooltip:"Content Library",children:[e.jsx(DD,{}),e.jsx("span",{children:"Content Library"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="shipment-timeline",onClick:()=>s("shipment-timeline"),tooltip:"Shipment Timeline",children:[e.jsx(ya,{}),e.jsx("span",{children:"Shipment Timeline"})]})})]})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="settings",onClick:()=>s("settings"),tooltip:"Settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="help",onClick:()=>s("help"),tooltip:"Help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help"})]})})]})})})]}),e.jsx(Qo,{children:n&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:n.name?.charAt(0).toUpperCase()||n.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:n.name||n.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:n.role==="tenant_admin"?"Admin":"Importer"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:o,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}const qVe=["dashboard","workspace","templates","upload","reviews","analytics","notifications","billing","billing-usage","ai-assistance","content-library","shipment-timeline","settings","help"],xU=[],pU=(t,s)=>{if(t&&qVe.includes(t))return t;if(s)switch(s){case"results":return"reviews";case"notifications":return"notifications";case"analytics":return"analytics";case"upload":return"upload"}return"dashboard"};function VVe(){const{toast:t}=et(),{user:s,isAuthenticated:a,isLoading:r}=CT(),n=zt(),{listDrafts:i,deleteDraft:l}=vC(),{needsOnboarding:o,isLoading:d}=op(),[c,u]=zs();m.useEffect(()=>{!r&&!a&&n("/lcopilot/importer-dashboard/login")},[a,r,n]);const[h,x]=m.useState([]),[g,j]=m.useState(!0),[y,b]=m.useState([]),[N,C]=m.useState(!0),[_,A]=m.useState(!1),[k,E]=m.useState("drafts"),[D,R]=m.useState("overview"),[O,P]=m.useState(()=>pU(c.get("section"),c.get("tab")));m.useEffect(()=>{!d&&o&&A(!0)},[o,d]),m.useEffect(()=>{a&&(async()=>{C(!0);try{const Ne=await xp();b(Ne||[])}catch(Ne){console.error("Failed to load validation sessions:",Ne),b([])}finally{C(!1)}})()},[a]),m.useEffect(()=>{(async()=>{try{j(!0);const Ue=(await i()).filter(ge=>ge.draft_type==="importer_draft"||ge.draft_type==="importer_supplier");x(Ue)}catch(Ne){console.error("Failed to load drafts:",Ne),t({title:"Error",description:"Failed to load drafts. Please try again.",variant:"destructive"})}finally{j(!1)}})()},[i,t]),m.useEffect(()=>{const ie=pU(c.get("section"),c.get("tab"));ie!==O&&P(ie);const Ne=c.get("type");Ne==="supplier"?E("amendments"):Ne==="draft"&&E("drafts")},[c,O]);const T=(ie,Ne={})=>{P(ie);const Ue=new URLSearchParams(c);Ue.delete("tab"),ie==="dashboard"?Ue.delete("section"):Ue.set("section",ie),ie!=="upload"&&(Ue.delete("draft_id"),Ue.delete("type")),ie!=="reviews"&&(Ue.delete("jobId"),Ue.delete("lc"),Ue.delete("mode")),Object.entries(Ne).forEach(([ge,he])=>{he?Ue.set(ge,he):Ue.delete(ge)}),u(Ue,{replace:!0})},B=ie=>{R(ie);const Ue={overview:"billing",usage:"billing-usage",invoices:"billing"}[ie]||"billing";T(Ue)},G=async ie=>{try{await l(ie),x(Ne=>Ne.filter(Ue=>Ue.draft_id!==ie)),t({title:"Success",description:"Draft deleted successfully."})}catch{t({title:"Error",description:"Failed to delete draft. Please try again.",variant:"destructive"})}},q=ie=>{const Ne=ie.draft_type==="importer_draft"?"draft":"supplier";E(Ne==="draft"?"drafts":"amendments"),T("upload",{draft_id:ie.draft_id,type:Ne})},z=ie=>{const Ne=new Date(ie),ge=Math.floor((new Date().getTime()-Ne.getTime())/(1e3*60*60));if(ge<1)return"Just now";if(ge<24)return`${ge}h ago`;const he=Math.floor(ge/24);return he<7?`${he}d ago`:Ne.toLocaleDateString()};if(r)return e.jsx("div",{className:"flex items-center justify-center min-h-screen",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})});if(!a)return null;const H=new Date,le=new Date(H.getFullYear(),H.getMonth(),1),Y=y.filter(ie=>new Date(ie.created_at)>=le),te=y.filter(ie=>ie.status==="completed"),ne=y.reduce((ie,Ne)=>ie+(Ne.discrepancies?.length||0),0),ae=y.reduce((ie,Ne)=>ie+(Ne.documents?.length||0),0),re=te.filter(ie=>(ie.discrepancies||[]).filter(Ue=>Ue.severity==="critical").length===0),xe=te.length>0?Math.round(re.length/te.length*100*10)/10:0,ye=te.filter(ie=>ie.processing_started_at&&ie.processing_completed_at),ke=ye.length>0?ye.reduce((ie,Ne)=>{const Ue=new Date(Ne.processing_started_at).getTime(),ge=new Date(Ne.processing_completed_at).getTime();return ie+(ge-Ue)},0)/ye.length:0,ze=ke>0?`${(ke/6e4).toFixed(1)} min`:"N/A",ce={thisMonth:Y.length,successRate:xe,avgProcessingTime:ze,risksIdentified:ne,totalReviews:y.length,documentsProcessed:ae},Re=[...y].filter(ie=>ie.status==="completed").sort((ie,Ne)=>new Date(Ne.created_at).getTime()-new Date(ie.created_at).getTime()).slice(0,5).map(ie=>({id:ie.id,date:new Date(ie.created_at).toISOString().split("T")[0],type:"LC Review",supplier:ie.extracted_data?.beneficiary_name||ie.extracted_data?.applicant||"Unknown",status:(ie.discrepancies?.filter(Ne=>Ne.severity==="critical").length||0)>0?"flagged":"approved",risks:ie.discrepancies?.length||0}));return e.jsxs(e.Fragment,{children:[e.jsx(Lc,{sidebar:e.jsx(zVe,{activeSection:O,onSectionChange:T}),breadcrumbs:[{label:"LCopilot",href:"/lcopilot"},{label:"Importer Dashboard"}],children:e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6 lg:p-8",children:[O==="dashboard"&&e.jsx(WVe,{stats:ce,drafts:h,loadingDrafts:g,onResumeDraft:q,onDeleteDraft:G,formatTimeAgo:z,workspaceTab:k,onWorkspaceTabChange:E,recentHistory:Re,notifications:xU}),O==="workspace"&&e.jsx(dte,{embedded:!0}),O==="templates"&&e.jsx(ute,{embedded:!0}),O==="upload"&&e.jsx(Jee,{embedded:!0,onComplete:({jobId:ie,lcNumber:Ne,mode:Ue})=>{T("reviews",{jobId:ie,lc:Ne,mode:Ue})}}),O==="reviews"&&e.jsx(zP,{embedded:!0,jobId:c.get("jobId")??void 0,lcNumber:c.get("lc")??void 0,mode:c.get("mode")||void 0}),O==="analytics"&&e.jsx(Zte,{embedded:!0}),O==="notifications"&&e.jsx(Use,{notifications:xU}),O==="billing"&&(D==="invoices"?e.jsx(dR,{onTabChange:B}):e.jsx(oR,{onTabChange:B})),O==="billing-usage"&&e.jsx(cR,{onTabChange:B}),O==="settings"&&e.jsx(ZVe,{}),O==="ai-assistance"&&e.jsx(mte,{embedded:!0,role:"importer"}),O==="content-library"&&e.jsx(hte,{embedded:!0}),O==="shipment-timeline"&&e.jsx(xte,{embedded:!0}),O==="help"&&e.jsx(JVe,{})]})}),e.jsx(uC,{open:_,onClose:()=>A(!1),onComplete:async()=>{A(!1),t({title:"Onboarding Complete",description:"Welcome to LCopilot! You're all set to start reviewing supplier documents."})}})]})}function WVe({stats:t,drafts:s,loadingDrafts:a,onResumeDraft:r,onDeleteDraft:n,formatTimeAgo:i,workspaceTab:l,onWorkspaceTabChange:o,recentHistory:d,notifications:c}){return e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-2",children:"Welcome back, Bangladesh Exports Ltd"}),e.jsx("p",{className:"text-muted-foreground",children:"Here's what's happening with your LC validations today."})]}),e.jsx(HVe,{stats:t}),e.jsx(GVe,{drafts:s,loadingDrafts:a,onResumeDraft:r,onDeleteDraft:n,formatTimeAgo:i,workspaceTab:l,onWorkspaceTabChange:o}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsx(KVe,{history:d})}),e.jsxs("div",{className:"space-y-6",children:[e.jsx(Use,{notifications:c}),e.jsx(YVe,{stats:t})]})]})]})}function HVe({stats:t}){const s=zt(),{data:a}=NC(),{data:r}=Ab({status:Gf.PENDING}),n=r?.invoices&&r.invoices.length>0,i=a&&a.quota_limit?Math.min(100,a.quota_used/a.quota_limit*100):0;return e.jsxs("div",{className:"space-y-4",children:[a||n?e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-2",children:[a?e.jsx($,{className:"shadow-soft border-0",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Usage Quota"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:[a.quota_used.toLocaleString()," / ",a.quota_limit?.toLocaleString()??"âˆž"]}),e.jsx(es,{value:i,className:"h-2"})]})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-blue-500/10",children:e.jsx(Vt,{className:"h-6 w-6 text-blue-500"})})]})}):null,n?e.jsx($,{className:"shadow-soft border-0 border-yellow-500/20",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Pending Invoice"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:r?.invoices.length||0}),e.jsx(Q,{variant:"outline",className:"text-yellow-600 border-yellow-600",children:"Action Required"})]}),e.jsx("button",{onClick:()=>s("/lcopilot/importer-dashboard?section=billing"),className:"mt-3 text-sm text-primary hover:underline w-full text-left",children:"View invoices â†’"})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-yellow-500/10",children:e.jsx(pn,{className:"h-6 w-6 text-yellow-500"})})]})}):null]}):null,e.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsx($,{className:"shadow-soft border-0",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"This Month"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:t.thisMonth}),e.jsx("p",{className:"text-xs text-success mt-1",children:"+20% from last month"})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-importer/10",children:e.jsx(Be,{className:"h-6 w-6 text-importer"})})]})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Success Rate"}),e.jsxs("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:[t.successRate,"%"]}),e.jsx(es,{value:t.successRate,className:"mt-2 h-2"})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-success/10",children:e.jsx(Vt,{className:"h-6 w-6 text-success"})})]})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Avg Processing"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:t.avgProcessingTime}),e.jsx("p",{className:"text-xs text-success mt-1",children:"10s faster"})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-info/10",children:e.jsx(mt,{className:"h-6 w-6 text-info"})})]})}),e.jsx($,{className:"shadow-soft border-0",children:e.jsxs(U,{className:"flex h-full items-start justify-between gap-4 p-6 pt-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground mb-2",children:"Risks Identified"}),e.jsx("p",{className:"text-2xl font-bold text-foreground tabular-nums",children:t.risksIdentified}),e.jsx("p",{className:"text-xs text-warning mt-1",children:"Review required"})]}),e.jsx("div",{className:"flex h-12 w-12 shrink-0 items-center justify-center rounded-lg bg-warning/10",children:e.jsx(Ve,{className:"h-6 w-6 text-warning"})})]})})]})]})}function GVe({drafts:t,loadingDrafts:s,onResumeDraft:a,onDeleteDraft:r,formatTimeAgo:n,workspaceTab:i,onWorkspaceTabChange:l}){const o=t.filter(c=>c.draft_type==="importer_draft"),d=t.filter(c=>c.draft_type==="importer_supplier");return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(th,{className:"w-5 h-5"})," Your LC Workspace"]}),e.jsx(ue,{children:"Resume drafts or track amendments that need attention"})]}),e.jsx(U,{children:s?e.jsx("div",{className:"flex items-center justify-center py-8 text-muted-foreground",children:"Loading drafts..."}):e.jsxs(Os,{value:i,onValueChange:c=>l(c),className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2",children:[e.jsxs(He,{value:"drafts",className:"flex items-center gap-2",children:[e.jsx(th,{className:"w-4 h-4"})," Drafts (",o.length,")"]}),e.jsxs(He,{value:"amendments",className:"flex items-center gap-2",children:[e.jsx(qm,{className:"w-4 h-4"})," Amendments (",d.length,")"]})]}),e.jsx(Qe,{value:"drafts",className:"mt-6 space-y-4",children:o.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No draft LC validations saved"}),e.jsx("p",{className:"text-sm",children:"Start a new validation to create a draft"})]}):o.map(c=>e.jsx(fU,{draft:c,documentLabel:"document",onResumeDraft:a,onDeleteDraft:r,formatTimeAgo:n},c.draft_id))}),e.jsx(Qe,{value:"amendments",className:"mt-6 space-y-4",children:d.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(qm,{className:"w-12 h-12 mx-auto mb-4 opacity-20"}),e.jsx("p",{children:"No supplier amendments recorded"}),e.jsx("p",{className:"text-sm",children:"Updates to supplier documents will appear here"})]}):d.map(c=>e.jsx(fU,{draft:c,documentLabel:"document",onResumeDraft:a,onDeleteDraft:r,formatTimeAgo:n},c.draft_id))})]})})]})}function fU({draft:t,documentLabel:s,onResumeDraft:a,onDeleteDraft:r,formatTimeAgo:n}){return e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/20 rounded-lg border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"bg-importer/10 p-3 rounded-lg",children:e.jsx(th,{className:"w-5 h-5 text-importer"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-foreground",children:t.lc_number||"Untitled Draft"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[t.uploaded_docs.length," ",s,t.uploaded_docs.length===1?"":"s"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:["Saved ",n(t.updated_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>a(t),className:"flex items-center gap-2",children:[e.jsx(Jt,{className:"w-4 h-4"})," Resume"]}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>r(t.draft_id),className:"text-destructive hover:text-destructive",children:e.jsx(ia,{className:"w-4 h-4"})})]})]})}function KVe({history:t}){return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Recent LC Validations"]}),e.jsx(ue,{children:"Your latest document validation results"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:t.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-secondary/20 rounded-lg border border-gray-200/50",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"flex-shrink-0",children:s.status==="approved"?e.jsx("div",{className:"bg-success/10 p-2 rounded-lg",children:e.jsx(Oe,{className:"w-5 h-5 text-success"})}):e.jsx("div",{className:"bg-warning/10 p-2 rounded-lg",children:e.jsx(Ve,{className:"w-5 h-5 text-warning"})})}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-foreground",children:[s.type," #",s.id]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Supplier: ",s.supplier]}),e.jsx("div",{className:"flex items-center gap-2 mt-1 text-xs text-muted-foreground",children:e.jsx("span",{children:s.date})})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Fa,{status:s.risks===0?"success":"warning",children:s.risks===0?"No issues":s.risks===1?"1 issue":`${s.risks} issues`}),e.jsx(M,{variant:"outline",size:"sm",children:"View"})]})]},s.id))})})]})}function Use({notifications:t}){const[s,a]=m.useState(t);zt();const r=l=>{a(o=>o.map(d=>d.id===l?{...d,read:!0}:d))},n=l=>{a(o=>o.filter(d=>d.id!==l))},i=()=>{a(l=>l.map(o=>({...o,read:!0})))};return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Notifications"]}),e.jsx(ue,{children:"Updates and alerts"})]}),e.jsx(U,{children:e.jsx(uR,{notifications:s,onMarkAsRead:r,onDismiss:n,onMarkAllAsRead:i,showHeader:!1})})]})}function YVe({stats:t}){return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-lg",children:"Quick Stats"})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4 text-sm",children:[e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Total Reviews"}),e.jsx("span",{className:"text-foreground font-medium",children:t.totalReviews})]}),e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Documents Processed"}),e.jsx("span",{className:"text-foreground font-medium",children:t.documentsProcessed})]}),e.jsxs("div",{className:"flex justify-between text-muted-foreground",children:[e.jsx("span",{children:"Average Processing"}),e.jsx("span",{className:"text-foreground font-medium",children:t.avgProcessingTime})]})]})})]})}function ZVe(){const{toast:t}=et(),[s,a]=m.useState(!0),[r,n]=m.useState(!1),[i,l]=m.useState("daily"),[o,d]=m.useState("dashboard"),[c,u]=m.useState(!1),[h,x]=m.useState("preferences"),g=()=>{u(!0),setTimeout(()=>{u(!1),t({title:"Preferences updated",description:"Your importer workspace settings were saved successfully."})},600)},j=()=>{a(!0),n(!1),l("daily"),d("dashboard")};return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Settings"}),e.jsx(ue,{children:"Configure importer workspace preferences and data retention."})]}),e.jsx(U,{children:e.jsxs(Os,{value:h,onValueChange:x,className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"preferences",children:"Preferences"}),e.jsx(He,{value:"company-profile",children:"Company Profile"}),e.jsx(He,{value:"data-retention",children:"Data & Privacy"})]}),e.jsxs(Qe,{value:"preferences",className:"space-y-6 mt-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Email alerts for bank discrepancies"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive an email whenever the bank flags a discrepancy."})]}),e.jsx(js,{checked:s,onCheckedChange:a,"aria-label":"Toggle discrepancy email alerts"})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Auto-archive completed validations"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Move validations to archive 7 days after completion."})]}),e.jsx(js,{checked:r,onCheckedChange:n,"aria-label":"Toggle auto archive"})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"digest-frequency",children:"Notification digest"}),e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{id:"digest-frequency",children:e.jsx(Fe,{placeholder:"Select frequency"})}),e.jsxs(De,{children:[e.jsx(K,{value:"instant",children:"Instant"}),e.jsx(K,{value:"hourly",children:"Hourly"}),e.jsx(K,{value:"daily",children:"Daily"}),e.jsx(K,{value:"weekly",children:"Weekly"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Choose how often you receive summary notifications."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"default-view",children:"Default workspace view"}),e.jsxs(Te,{value:o,onValueChange:y=>d(y),children:[e.jsx(Pe,{id:"default-view",children:e.jsx(Fe,{placeholder:"Select default view"})}),e.jsxs(De,{children:[e.jsx(K,{value:"dashboard",children:"Dashboard metrics"}),e.jsx(K,{value:"upload",children:"Upload LC"}),e.jsx(K,{value:"reviews",children:"Review results"}),e.jsx(K,{value:"analytics",children:"Analytics"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"The section that opens first each time you visit."})]})]}),e.jsxs("div",{className:"flex items-center justify-end gap-3",children:[e.jsx(M,{variant:"outline",onClick:j,children:"Reset"}),e.jsx(M,{onClick:g,disabled:c,children:c?"Saving...":"Save preferences"})]})]}),e.jsx(Qe,{value:"company-profile",className:"mt-6",children:e.jsx(tR,{embedded:!0})}),e.jsx(Qe,{value:"data-retention",className:"mt-6",children:e.jsx(eR,{embedded:!0})})]})})]})}function JVe(){return e.jsxs($,{className:"shadow-soft border-0",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Need Help?"}),e.jsx(ue,{children:"Browse importer resources, walkthroughs, and contact options."})]}),e.jsxs(U,{className:"space-y-6 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(M,{variant:"outline",onClick:()=>window.open("/lcopilot/support","_blank"),children:"Support Center"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("/docs/importer-runbook","_blank"),children:"Importer Runbook"}),e.jsx(M,{variant:"outline",onClick:()=>window.open("mailto:support@trdrhub.com"),children:"Email Support"})]}),e.jsxs(oo,{type:"single",collapsible:!0,className:"w-full",children:[e.jsxs(Qr,{value:"faq-1",children:[e.jsx(Xr,{children:"How do I validate a new LC package?"}),e.jsxs(en,{children:["Choose ",e.jsx("span",{className:"font-medium",children:"Upload LC"}),", attach the draft LC and supporting files, then run validation. Results appear under ",e.jsx("span",{className:"font-medium",children:"Review Results"})," with risk insights and document discrepancies."]})]}),e.jsxs(Qr,{value:"faq-2",children:[e.jsx(Xr,{children:"Where can I monitor supplier compliance trends?"}),e.jsxs(en,{children:["Use the ",e.jsx("span",{className:"font-medium",children:"Analytics"})," view to track compliance rates, processing times, and risk reduction across your supplier base."]})]}),e.jsxs(Qr,{value:"faq-3",children:[e.jsx(Xr,{children:"Who receives importer notifications?"}),e.jsxs(en,{children:["Notification recipients are configured in ",e.jsx("span",{className:"font-medium",children:"Workspace Settings"}),". Enable discrepancy alerts or digests to keep your compliance team informed."]})]})]}),e.jsxs("div",{className:"rounded-lg border border-gray-200/60 bg-secondary/20 p-4",children:[e.jsx("p",{className:"text-xs",children:"Need a guided walkthrough? Schedule a 30-minute onboarding session with our success team and we'll review your importer workflow end-to-end."}),e.jsx(M,{size:"sm",className:"mt-3",onClick:()=>window.open("https://cal.com/trdrhub/importer-onboarding","_blank"),children:"Book onboarding session"})]})]})]})}function QVe(){const[t,s]=m.useState(""),[a,r]=m.useState(""),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[d,c]=m.useState(""),{login:u}=CT(),h=async j=>{j.preventDefault(),o(!0),c("");try{await u(t,a)}catch(y){c(y instanceof Error?y.message:"Login failed")}finally{o(!1)}},x=[{role:"Importer",email:"importer1@globalimports.com",password:"importer123"},{role:"Importer",email:"importer2@globalimports.com",password:"importer123"},{role:"Tenant Admin",email:"admin@globalimports.com",password:"admin123"},{role:"Tenant Admin",email:"manager@globalimports.com",password:"manager123"}],g=(j,y)=>{s(j),r(y)};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Sue,{className:"mx-auto h-12 w-12 text-blue-600"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Importer Dashboard"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access LCopilot Importer Dashboard"})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Sign In"}),e.jsx(ue,{children:"Enter your importer credentials to continue"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(oe,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:j=>s(j.target.value),placeholder:"importer1@globalimports.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:a,onChange:j=>r(j.target.value),placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!n),children:n?e.jsx(yd,{className:"h-4 w-4 text-gray-400"}):e.jsx(Da,{className:"h-4 w-4 text-gray-400"})})]})]}),d&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:d}),e.jsx(M,{type:"submit",className:"w-full",disabled:l,children:l?"Signing in...":"Sign in"})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Demo Credentials"}),e.jsx(ue,{children:"Click any credential set to auto-fill the form"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:x.map((j,y)=>e.jsxs("button",{onClick:()=>g(j.email,j.password),className:"w-full text-left p-3 rounded-lg border hover:bg-gray-50 transition-colors",children:[e.jsx("div",{className:"font-medium text-gray-900",children:j.role}),e.jsx("div",{className:"text-sm text-gray-600",children:j.email}),e.jsxs("div",{className:"text-xs text-gray-500",children:["Password: ",j.password]})]},y))})})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"LCopilot Importer Dashboard v1.0"}),e.jsx("p",{className:"mt-1",children:"For authorized importer users only"})]})]})})}function XVe(){const{clientName:t}=Ko(),s=zt(),{toast:a}=et(),[r,n]=m.useState("90"),[i,l]=m.useState(null),[o,d]=m.useState(),[c,u]=m.useState(),h=()=>{const R=new Date,O=new Date;return O.setDate(O.getDate()-parseInt(r)),{start_date:O.toISOString(),end_date:R.toISOString()}},{data:x,isLoading:g,error:j}=Ks({queryKey:["client-dashboard",t,r],queryFn:()=>{if(!t)throw new Error("Client name is required");return mn.getClientDashboard(t,h())},enabled:!!t,staleTime:30*1e3});if(!t)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsx($,{children:e.jsxs(U,{className:"pt-6",children:[e.jsx("p",{className:"text-destructive",children:"Client name is required"}),e.jsxs(M,{onClick:()=>s("/lcopilot/bank-dashboard?tab=clients"),className:"mt-4",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]})]})})});if(g)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Loading Client Dashboard"}),e.jsxs(ue,{children:["Loading data for ",no(t),"..."]})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(xs,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4 animate-pulse"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading dashboard..."})]})})]})});if(j||!x)return e.jsx("div",{className:"container mx-auto py-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Error Loading Dashboard"}),e.jsx(ue,{children:"Failed to load client dashboard"})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ks,{className:"w-12 h-12 mx-auto text-destructive mb-4"}),e.jsx("p",{className:"text-destructive mb-4",children:j instanceof Error?j.message:"Failed to load client dashboard"}),e.jsxs("div",{className:"flex gap-2 justify-center",children:[e.jsxs(M,{onClick:()=>s("/lcopilot/bank-dashboard?tab=clients"),children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]}),e.jsx(M,{variant:"outline",onClick:()=>window.location.reload(),children:"Retry"})]})]})})]})});const y=x.statistics,b=x.lc_results,N=x.trend_data,C=R=>{switch(R){case"compliant":return e.jsx(Q,{variant:"default",className:"bg-green-500",children:"Compliant"});case"discrepancies":return e.jsx(Q,{variant:"default",className:"bg-yellow-500",children:"Discrepancies"});case"failed":return e.jsx(Q,{variant:"destructive",children:"Failed"});default:return e.jsx(Q,{variant:"secondary",children:R})}},_=R=>{l(R.jobId),d(R.client_name),u(R.lc_number)},A=async R=>{try{const{getReportDownloadUrl:O}=await ll(async()=>{const{getReportDownloadUrl:T}=await Promise.resolve().then(()=>YD);return{getReportDownloadUrl:T}},void 0),P=await O(R.jobId);window.open(P.download_url,"_blank")}catch(O){console.error("Failed to download report:",O),a({title:"Download Failed",description:"Failed to download report. Please try again.",variant:"destructive"})}},k=N.length>=2?N.slice(-7):[],E=k.length>=2?k[k.length-1].avg_compliance_score-k[0].avg_compliance_score:0,D=k.length>=2?k[k.length-1].compliant/Math.max(k[k.length-1].validations,1)*100-k[0].compliant/Math.max(k[0].validations,1)*100:0;return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"bg-card border-b sticky top-0 z-50 backdrop-blur-sm bg-card/95",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(M,{variant:"ghost",size:"sm",onClick:()=>s("/lcopilot/bank-dashboard?tab=clients"),children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back to Clients"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"bg-gradient-primary p-2 rounded-lg",children:e.jsx(xs,{className:"w-6 h-6 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-foreground",children:no(x.client_name)}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Client Performance Dashboard"})]})]})]}),e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs(pe,{to:`/lcopilot/bank-dashboard?tab=results&client=${encodeURIComponent(t)}`,children:[e.jsx(Ws,{className:"w-4 h-4 mr-2"}),"View All Results"]})})})]})})}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx(Z,{children:"Date Range"}),e.jsxs(Te,{value:r,onValueChange:n,className:"w-48 mt-2",children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"7",children:"Last 7 days"}),e.jsx(K,{value:"30",children:"Last 30 days"}),e.jsx(K,{value:"90",children:"Last 90 days"}),e.jsx(K,{value:"180",children:"Last 180 days"}),e.jsx(K,{value:"365",children:"Last year"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-6",children:[e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Total Validations"}),e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.total_validations}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y.first_validation_date&&y.last_validation_date?`Since ${hs(new Date(y.first_validation_date),"MMM d, yyyy")}`:"All time"})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Compliance Rate"}),e.jsx(Oe,{className:"h-4 w-4 text-green-600"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y.compliance_rate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[D>0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",D.toFixed(1),"%"]})]}):D<0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:"text-red-600",children:[D.toFixed(1),"%"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"No change"}),e.jsx("span",{className:"text-muted-foreground",children:"vs last 7 days"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Avg Compliance Score"}),e.jsx(Ws,{className:"h-4 w-4 text-blue-600"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"text-2xl font-bold",children:[y.average_compliance_score.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-1 text-xs mt-1",children:[E>0?e.jsxs(e.Fragment,{children:[e.jsx(Vt,{className:"h-3 w-3 text-green-600"}),e.jsxs("span",{className:"text-green-600",children:["+",E.toFixed(1),"%"]})]}):E<0?e.jsxs(e.Fragment,{children:[e.jsx(lr,{className:"h-3 w-3 text-red-600"}),e.jsxs("span",{className:"text-red-600",children:[E.toFixed(1),"%"]})]}):e.jsx("span",{className:"text-muted-foreground",children:"No change"}),e.jsx("span",{className:"text-muted-foreground",children:"vs last 7 days"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium",children:"Avg Processing Time"}),e.jsx(mt,{className:"h-4 w-4 text-purple-600"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:y.average_processing_time_seconds?`${y.average_processing_time_seconds.toFixed(1)}s`:"N/A"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Per validation"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(Oe,{className:"h-4 w-4 text-green-600"}),"Compliant"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-green-600",children:y.compliant_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(y.compliant_count/y.total_validations*100).toFixed(1),"% of total"]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(ks,{className:"h-4 w-4 text-yellow-600"}),"With Discrepancies"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:y.discrepancies_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(y.discrepancies_count/y.total_validations*100).toFixed(1),"% of total"]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[y.total_discrepancies," total discrepancies"]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-sm font-medium flex items-center gap-2",children:[e.jsx(bs,{className:"h-4 w-4 text-red-600"}),"Failed"]})}),e.jsxs(U,{children:[e.jsx("div",{className:"text-3xl font-bold text-red-600",children:y.failed_count}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[(y.failed_count/y.total_validations*100).toFixed(1),"% of total"]})]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(ee,{children:"LC Validation Results"}),e.jsxs(ue,{children:[b.length," validation",b.length!==1?"s":""," found"]})]})})}),e.jsx(U,{children:b.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Be,{className:"w-12 h-12 mx-auto text-muted-foreground mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"No validation results found"})]}):e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"LC Number"}),e.jsx(je,{children:"Date Received"}),e.jsx(je,{children:"Completed"}),e.jsx(je,{children:"Status"}),e.jsx(je,{className:"text-right",children:"Score"}),e.jsx(je,{className:"text-right",children:"Discrepancies"}),e.jsx(je,{className:"text-right",children:"Documents"}),e.jsx(je,{className:"text-right",children:"Processing Time"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:b.map(R=>{const O=R.completed_at?new Date(R.completed_at):new Date,P=no(R.lc_number,"N/A"),T=R.date_received||"";return e.jsxs(At,{children:[e.jsx(fe,{className:"font-medium",children:e.jsxs("div",{className:"flex items-center gap-2",children:[P,R.duplicate_count&&R.duplicate_count>0&&e.jsxs(Q,{variant:"outline",className:"text-xs",title:`This LC has been validated ${R.duplicate_count} time(s) before`,children:[e.jsx(qa,{className:"w-3 h-3 mr-1"}),R.duplicate_count,"x"]})]})}),e.jsx(fe,{children:T||"N/A"}),e.jsx(fe,{children:hs(O,"MMM dd, yyyy HH:mm")}),e.jsx(fe,{children:C(R.status)}),e.jsxs(fe,{className:"text-right",children:[R.compliance_score,"%"]}),e.jsx(fe,{className:"text-right",children:R.discrepancy_count}),e.jsx(fe,{className:"text-right",children:R.document_count}),e.jsx(fe,{className:"text-right",children:R.processing_time_seconds!==void 0&&R.processing_time_seconds!==null?`${R.processing_time_seconds}s`:"N/A"}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>_(R),title:"View Details",children:e.jsx(Da,{className:"w-4 h-4"})}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>A(R),title:"Download PDF Report",children:e.jsx(Gt,{className:"w-4 h-4"})})]})})]},R.id)})})]})})})]})]}),e.jsx(mR,{jobId:i,open:!!i,onOpenChange:R=>{R||(l(null),d(void 0),u(void 0))},clientName:o,lcNumber:c})]})}function eWe(){const{theme:t,resolvedTheme:s}=Gq();return e.jsx(Jte,{title:"Component Gallery",subtitle:"Professional Bloomberg-style design system components",breadcrumbs:[{label:"LCopilot",href:"/lcopilot"},{label:"Component Gallery"}],compact:!0,children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs($,{dense:!0,children:[e.jsx(X,{dense:!0,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{dense:!0,children:"Current Theme"}),e.jsxs(ue,{children:["Theme: ",e.jsx(Q,{variant:"outline",children:t})," | Resolved: ",e.jsx(Q,{children:s})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:s==="dark"?e.jsx(qw,{className:"w-5 h-5"}):e.jsx(Gw,{className:"w-5 h-5"})})]})}),e.jsx(U,{dense:!0,children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"This gallery demonstrates the professional, data-dense design system with dark/light theme support. All components follow Bloomberg-style conventions for financial data applications."})})]}),e.jsxs(Os,{defaultValue:"buttons",className:"w-full",children:[e.jsxs(Fs,{children:[e.jsxs(He,{value:"buttons",children:[e.jsx(oue,{className:"w-4 h-4 mr-2"}),"Buttons & Forms"]}),e.jsxs(He,{value:"tables",children:[e.jsx(Eue,{className:"w-4 h-4 mr-2"}),"Tables"]}),e.jsxs(He,{value:"typography",children:[e.jsx(Tue,{className:"w-4 h-4 mr-2"}),"Typography"]}),e.jsxs(He,{value:"colors",children:[e.jsx(Wj,{className:"w-4 h-4 mr-2"}),"Colors"]})]}),e.jsxs(Qe,{value:"buttons",className:"space-y-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Buttons"}),e.jsx(ue,{children:"All button variants and sizes"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Variants"}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(M,{children:"Default"}),e.jsx(M,{variant:"secondary",children:"Secondary"}),e.jsx(M,{variant:"outline",children:"Outline"}),e.jsx(M,{variant:"ghost",children:"Ghost"}),e.jsx(M,{variant:"destructive",children:"Destructive"}),e.jsx(M,{variant:"link",children:"Link"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-3",children:"Sizes"}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(M,{size:"xs",children:"Extra Small"}),e.jsx(M,{size:"sm",children:"Small"}),e.jsx(M,{size:"default",children:"Default"}),e.jsx(M,{size:"lg",children:"Large"}),e.jsx(M,{size:"xl",children:"Extra Large"})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Input Fields"}),e.jsx(ue,{children:"Standard and dense input variants"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Standard Input"}),e.jsx(oe,{placeholder:"Enter text..."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-sm font-medium",children:"Dense Input"}),e.jsx(oe,{dense:!0,placeholder:"Enter text..."})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Cards"}),e.jsx(ue,{children:"Standard and dense card layouts"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Standard Card"}),e.jsx(ue,{children:"Default padding and spacing"})]}),e.jsx(U,{children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Content with standard padding for comfortable reading."})}),e.jsx(Xw,{children:e.jsx(M,{size:"sm",children:"Action"})})]}),e.jsxs($,{dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{dense:!0,children:"Dense Card"}),e.jsx(ue,{children:"Compact padding for data density"})]}),e.jsx(U,{dense:!0,children:e.jsx("p",{className:"text-xs text-muted-foreground",children:"Content with reduced padding for maximum information density."})}),e.jsx(Xw,{dense:!0,children:e.jsx(M,{size:"xs",children:"Action"})})]})]})})]})]}),e.jsx(Qe,{value:"tables",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Data Tables"}),e.jsx(ue,{children:"Dense tables with sticky headers and numeric alignment"})]}),e.jsxs(U,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(la,{dense:!0,sticky:!0,children:[e.jsx(xa,{sticky:!0,children:e.jsxs(At,{dense:!0,children:[e.jsx(je,{dense:!0,children:"Description"}),e.jsx(je,{dense:!0,children:"Status"}),e.jsx(je,{dense:!0,numeric:!0,children:"Amount"}),e.jsx(je,{dense:!0,numeric:!0,children:"Quantity"}),e.jsx(je,{dense:!0,numeric:!0,children:"Total"})]})}),e.jsx(oa,{zebra:!0,children:Array.from({length:10}).map((a,r)=>e.jsxs(At,{dense:!0,children:[e.jsxs(fe,{dense:!0,className:"font-medium",children:["Transaction ",r+1]}),e.jsx(fe,{dense:!0,children:e.jsx(Q,{variant:r%3===0?"default":r%2===0?"secondary":"outline",children:r%3===0?"Completed":r%2===0?"Pending":"Processing"})}),e.jsxs(fe,{dense:!0,numeric:!0,children:["$",(Math.random()*1e3).toFixed(2)]}),e.jsx(fe,{dense:!0,numeric:!0,children:Math.floor(Math.random()*100)}),e.jsxs(fe,{dense:!0,numeric:!0,className:"font-semibold",children:["$",(Math.random()*1e4).toFixed(2)]})]},r))})]})}),e.jsx("p",{className:"text-xs text-muted-foreground mt-3",children:"Features: Dense spacing, sticky header, zebra striping, numeric alignment, right-aligned numbers"})]})]})}),e.jsx(Qe,{value:"typography",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Typography Scale"}),e.jsx(ue,{children:"Data-dense typography with tight line heights"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h1",{children:"Heading 1 - 18px (text-xl)"}),e.jsx("h2",{children:"Heading 2 - 16px (text-lg)"}),e.jsx("h3",{children:"Heading 3 - 14px (text-base)"}),e.jsx("h4",{children:"Heading 4 - 13px (text-sm)"}),e.jsx("p",{className:"text-base",children:"Body text - 14px (text-base)"}),e.jsx("p",{className:"text-sm",children:"Small text - 13px (text-sm)"}),e.jsx("p",{className:"text-xs",children:"Extra small - 11px (text-xs)"})]})})]})}),e.jsx(Qe,{value:"colors",className:"space-y-6",children:e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Color Palette"}),e.jsx(ue,{children:"Theme-aware semantic colors"})]}),e.jsx(U,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-background border flex items-center justify-center text-xs",children:"Background"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-primary text-primary-foreground flex items-center justify-center text-xs font-medium",children:"Primary"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-secondary text-secondary-foreground flex items-center justify-center text-xs font-medium",children:"Secondary"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-accent text-accent-foreground flex items-center justify-center text-xs font-medium",children:"Accent"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-success text-success-foreground flex items-center justify-center text-xs font-medium",children:"Success"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-warning text-warning-foreground flex items-center justify-center text-xs font-medium",children:"Warning"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-destructive text-destructive-foreground flex items-center justify-center text-xs font-medium",children:"Destructive"})}),e.jsx("div",{className:"space-y-2",children:e.jsx("div",{className:"h-20 rounded-md bg-info text-info-foreground flex items-center justify-center text-xs font-medium",children:"Info"})})]})})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Usage Guidelines"}),e.jsx(ue,{children:"Best practices for the professional design system"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Data Density"}),e.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[e.jsxs("li",{children:["Use ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"dense"})," prop on tables for financial data"]}),e.jsxs("li",{children:["Apply ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"numeric"})," prop to TableHead/TableCell for right-aligned numbers"]}),e.jsxs("li",{children:["Enable ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"sticky"})," headers for long tables"]}),e.jsxs("li",{children:["Use ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"zebra"})," prop on TableBody for improved readability"]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Theme Support"}),e.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[e.jsx("li",{children:"All components automatically adapt to light/dark theme"}),e.jsx("li",{children:"Use semantic color tokens (primary, secondary, accent, etc.)"}),e.jsx("li",{children:"Charts use theme-aware colors via getChartTheme()"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold mb-2",children:"Accessibility"}),e.jsxs("ul",{className:"text-sm text-muted-foreground list-disc list-inside space-y-1",children:[e.jsx("li",{children:"High-contrast focus rings on all interactive elements"}),e.jsx("li",{children:"Proper ARIA labels on form controls"}),e.jsx("li",{children:"Keyboard navigation support for tables and filters"})]})]})]})]})]})})}const tWe=()=>{const[t,s]=m.useState([]),[a,r]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[d,c]=m.useState(!1),u=[{id:"1",document:"Commercial Invoice",issue:"Invoice amount exceeds LC value by USD 1,500",severity:"high",suggestedFix:"Reduce invoice amount to match LC value of USD 50,000"},{id:"2",document:"Bill of Lading",issue:"Port of loading doesn't match LC requirements",severity:"medium",suggestedFix:"Update port to 'Chittagong Port' as specified in LC"},{id:"3",document:"Certificate of Origin",issue:"Missing authentication stamp from Chamber of Commerce",severity:"high",suggestedFix:"Obtain proper authentication from Bangladesh Chamber"}],h=j=>{s(y=>y.includes(j)?y.filter(b=>b!==j):[...y,j])},x=()=>{c(!0),setTimeout(()=>{c(!1)},2e3)},g=j=>{switch(j){case"high":return"destructive";case"medium":return"secondary";default:return"default"}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(pe,{to:"/exporter-results",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-4",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Back to Results"]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Request Document Corrections"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Request corrections for identified discrepancies in your export documents"})]}),e.jsx($,{className:"mb-6",children:e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"LC Reference: EXP-BD-2024-001"]}),e.jsx(ue,{children:"Bangladesh Exports Ltd â†’ Indian Cotton Mills Ltd"})]})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Select Issues to Correct"}),e.jsx(ue,{children:"Choose which discrepancies you'd like to request corrections for"})]}),e.jsx(U,{className:"space-y-4",children:u.map(j=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rr,{id:j.id,checked:t.includes(j.id),onCheckedChange:()=>h(j.id)}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{htmlFor:j.id,className:"font-medium",children:j.document}),e.jsx(Q,{variant:g(j.severity),children:j.severity})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Issue:"})," ",j.issue]}),e.jsxs("p",{className:"text-sm text-green-600",children:[e.jsx("strong",{children:"Suggested Fix:"})," ",j.suggestedFix]})]})]})},j.id))})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Correction Request Details"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"correction-type",children:"Type of Correction Request"}),e.jsxs(Te,{value:a,onValueChange:r,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select correction type"})}),e.jsxs(De,{children:[e.jsx(K,{value:"document-amendment",children:"Document Amendment"}),e.jsx(K,{value:"bank-notification",children:"Bank Notification"}),e.jsx(K,{value:"customs-clarification",children:"Customs Clarification"}),e.jsx(K,{value:"supplier-coordination",children:"Supplier Coordination"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"urgency",children:"Urgency Level"}),e.jsxs(Te,{value:l,onValueChange:o,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select urgency level"})}),e.jsxs(De,{children:[e.jsx(K,{value:"low",children:"Low - Standard processing"}),e.jsx(K,{value:"medium",children:"Medium - Expedited processing"}),e.jsx(K,{value:"high",children:"High - Urgent (shipment at risk)"}),e.jsx(K,{value:"critical",children:"Critical - Immediate attention required"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"comments",children:"Additional Comments & Instructions"}),e.jsx(Zt,{id:"comments",placeholder:"Provide any additional context, specific instructions, or constraints for the correction request...",value:n,onChange:j=>i(j.target.value),rows:4})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Contact Information"}),e.jsx(ue,{children:"Who should be contacted for this correction request?"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"contact-name",children:"Contact Person"}),e.jsx(oe,{id:"contact-name",placeholder:"Your name"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"contact-email",children:"Email Address"}),e.jsx(oe,{id:"contact-email",type:"email",placeholder:"your@email.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"contact-phone",children:"Phone Number"}),e.jsx(oe,{id:"contact-phone",placeholder:"+880 XXX XXX XXXX"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"preferred-time",children:"Preferred Contact Time"}),e.jsxs(Te,{children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select time preference"})}),e.jsxs(De,{children:[e.jsx(K,{value:"morning",children:"Morning (9 AM - 12 PM)"}),e.jsx(K,{value:"afternoon",children:"Afternoon (12 PM - 5 PM)"}),e.jsx(K,{value:"evening",children:"Evening (5 PM - 8 PM)"}),e.jsx(K,{value:"anytime",children:"Anytime"})]})]})]})]})})]}),e.jsxs("div",{className:"flex gap-4 justify-end",children:[e.jsx(pe,{to:"/exporter-results",children:e.jsx(M,{variant:"outline",children:"Cancel"})}),e.jsx(M,{onClick:x,disabled:t.length===0||!a||!l||d,children:d?e.jsxs(e.Fragment,{children:[e.jsx(mt,{className:"h-4 w-4 mr-2 animate-spin"}),"Submitting..."]}):e.jsxs(e.Fragment,{children:[e.jsx($i,{className:"h-4 w-4 mr-2"}),"Submit Request"]})})]})]})]})})},sWe=()=>{const[t,s]=m.useState([]),[a,r]=m.useState(""),[n,i]=m.useState(""),[l,o]=m.useState(""),[d,c]=m.useState(!1),u=[{id:"1",document:"Commercial Invoice",issue:"Invoice amount USD 51,500 exceeds LC value USD 50,000",severity:"high",currentValue:"USD 51,500",lcValue:"USD 50,000",suggestedFix:"Supplier must issue revised invoice with correct amount USD 50,000"},{id:"2",document:"Bill of Lading",issue:"Port of loading shows 'Mumbai' but LC requires 'JNPT Port'",severity:"high",currentValue:"Mumbai",lcValue:"JNPT Port",suggestedFix:"Shipping line must reissue B/L with correct port of loading"},{id:"3",document:"Certificate of Origin",issue:"Missing Chamber of Commerce authentication stamp",severity:"medium",currentValue:"No authentication visible",lcValue:"Must be authenticated by Chamber",suggestedFix:"Supplier must get COO authenticated by Indian Chamber of Commerce"},{id:"4",document:"Packing List",issue:"Package count shows 95 bales but invoice shows 100 bales",severity:"medium",currentValue:"95 bales",lcValue:"Should match invoice: 100 bales",suggestedFix:"Supplier must reconcile and correct package count"}],h=j=>{s(y=>y.includes(j)?y.filter(b=>b!==j):[...y,j])},x=()=>{c(!0),setTimeout(()=>{c(!1)},2e3)},g=j=>{switch(j){case"high":return"destructive";case"medium":return"secondary";default:return"default"}};return e.jsx("div",{className:"min-h-screen bg-background",children:e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs(pe,{to:"/supplier-document-results",className:"inline-flex items-center text-muted-foreground hover:text-foreground mb-4",children:[e.jsx(ma,{className:"h-4 w-4 mr-2"}),"Back to Compliance Results"]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground",children:"Request Supplier Document Corrections"}),e.jsx("p",{className:"text-muted-foreground mt-2",children:"Request corrections from your supplier for document discrepancies"})]}),e.jsx($,{className:"mb-6",children:e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"LC Reference: IMP-BD-2024-001"]}),e.jsx(ue,{children:"Bangladesh Textiles Ltd â† Indian Cotton Mills Ltd"})]})}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Select Document Issues to Correct"}),e.jsx(ue,{children:"Choose which discrepancies you'd like your supplier to fix"})]}),e.jsx(U,{className:"space-y-4",children:u.map(j=>e.jsx("div",{className:"border rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(rr,{id:j.id,checked:t.includes(j.id),onCheckedChange:()=>h(j.id)}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Z,{htmlFor:j.id,className:"font-medium",children:j.document}),e.jsx(Q,{variant:g(j.severity),children:j.severity})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Issue:"})," ",j.issue]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2 text-sm",children:[e.jsxs("p",{className:"text-red-600",children:[e.jsx("strong",{children:"Current:"})," ",j.currentValue]}),e.jsxs("p",{className:"text-green-600",children:[e.jsx("strong",{children:"Required:"})," ",j.lcValue]})]}),e.jsxs("p",{className:"text-sm text-blue-600",children:[e.jsx("strong",{children:"Action Required:"})," ",j.suggestedFix]})]})]})},j.id))})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Correction Request Method"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"correction-method",children:"How to contact supplier?"}),e.jsxs(Te,{value:a,onValueChange:r,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select correction method"})}),e.jsxs(De,{children:[e.jsx(K,{value:"email-formal",children:"Formal Email with Detailed Report"}),e.jsx(K,{value:"email-urgent",children:"Urgent Email with Phone Follow-up"}),e.jsx(K,{value:"whatsapp",children:"WhatsApp/Phone Call (Immediate)"}),e.jsx(K,{value:"agent",children:"Through Local Agent/Representative"}),e.jsx(K,{value:"bank",children:"Through Bank Notification"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"urgency",children:"Urgency Level"}),e.jsxs(Te,{value:l,onValueChange:o,children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select urgency level"})}),e.jsxs(De,{children:[e.jsx(K,{value:"low",children:"Low - Standard processing time"}),e.jsx(K,{value:"medium",children:"Medium - Need response within 2 days"}),e.jsx(K,{value:"high",children:"High - Ship arrival imminent"}),e.jsx(K,{value:"critical",children:"Critical - Demurrage charges at risk"})]})]})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"comments",children:"Message to Supplier"}),e.jsx(Zt,{id:"comments",placeholder:`Dear Supplier,
apps\web\dist\assets\index-Bz84JA8h.js:590:      `})]}):null}const gU=[{id:"1",discrepancy_type:"amount_mismatch",severity:"critical",rule_name:"Amount Consistency Check",field_name:"invoice_amount",expected_value:"USD 25,000.00",actual_value:"USD 35,000.00",description:"Invoice amount exceeds the Letter of Credit limit by USD 10,000.00. This violates the maximum allowable amount and could result in payment rejection.",source_document_types:["letter_of_credit","commercial_invoice"],created_at:"2024-01-15T10:30:00Z"},{id:"2",discrepancy_type:"date_mismatch",severity:"major",rule_name:"Shipment Date Validation",field_name:"shipment_date",expected_value:"Before 2024-02-20",actual_value:"2024-02-25",description:"Bill of Lading date is after the Letter of Credit expiry date. Shipment occurred 5 days late.",source_document_types:["letter_of_credit","bill_of_lading"],created_at:"2024-01-15T10:31:00Z"},{id:"3",discrepancy_type:"party_mismatch",severity:"major",rule_name:"Beneficiary Consistency",field_name:"beneficiary",expected_value:"ABC Trading Company Ltd",actual_value:"ABC Trading Co",description:"Beneficiary name in the commercial invoice does not exactly match the name specified in the Letter of Credit.",source_document_types:["letter_of_credit","commercial_invoice"],created_at:"2024-01-15T10:32:00Z"},{id:"4",discrepancy_type:"port_mismatch",severity:"minor",rule_name:"Port of Discharge Check",field_name:"port_of_discharge",expected_value:"Chennai Port",actual_value:"Chattogram Port",description:"Port of discharge in Bill of Lading differs from the Letter of Credit specification.",source_document_types:["letter_of_credit","bill_of_lading"],created_at:"2024-01-15T10:33:00Z"},{id:"5",discrepancy_type:"missing_field",severity:"critical",rule_name:"Required Field Validation",field_name:"lc_number",description:"Letter of Credit number is missing from the commercial invoice. This is a mandatory field for trade finance compliance.",source_document_types:["commercial_invoice"],created_at:"2024-01-15T10:34:00Z"}];function cWe(){return e.jsxs("div",{style:{padding:"2rem",maxWidth:"1200px",margin:"0 auto"},children:[e.jsx("h1",{style:{fontSize:"2rem",fontWeight:"bold",marginBottom:"2rem",textAlign:"center"},children:"Discrepancy List Component Demo"}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"Sample Discrepancies"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:"This demo shows the DiscrepancyList component with various types of discrepancies across different severity levels."}),e.jsx(fw,{discrepancies:gU})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",marginTop:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"No Discrepancies Scenario"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:"This shows how the component displays when no discrepancies are found."}),e.jsx(fw,{discrepancies:[]})]}),e.jsxs("div",{style:{background:"white",borderRadius:"12px",padding:"2rem",boxShadow:"0 10px 25px -5px rgba(0, 0, 0, 0.1)",marginTop:"2rem"},children:[e.jsx("h2",{style:{fontSize:"1.5rem",fontWeight:"600",marginBottom:"1rem"},children:"Critical Only Scenario"}),e.jsx("p",{style:{color:"#6b7280",marginBottom:"2rem"},children:"This shows only critical discrepancies for testing the severity filter."}),e.jsx(fw,{discrepancies:gU.filter(t=>t.severity==="critical")})]})]})}function dWe(){const[t,s]=m.useState(""),[a,r]=m.useState(""),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[d,c]=m.useState(""),{login:u}=$j(),h=async x=>{x.preventDefault(),o(!0),c("");try{await u(t,a)}catch(g){c(g instanceof Error?g.message:"Login failed")}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(Ot,{className:"mx-auto h-12 w-12 text-blue-600"}),e.jsx("h2",{className:"mt-6 text-3xl font-extrabold text-gray-900",children:"Admin Console"}),e.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Sign in to access LCopilot administration"})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Sign In"}),e.jsx(ue,{children:"Enter your admin credentials to continue"})]}),e.jsx(U,{children:e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"email",children:"Email"}),e.jsx(oe,{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:t,onChange:x=>s(x.target.value),placeholder:"admin@lcopilot.com"})]}),e.jsxs("div",{children:[e.jsx(Z,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(oe,{id:"password",name:"password",type:n?"text":"password",autoComplete:"current-password",required:!0,value:a,onChange:x=>r(x.target.value),placeholder:"Enter your password"}),e.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>i(!n),children:n?e.jsx(yd,{className:"h-4 w-4 text-gray-400"}):e.jsx(Da,{className:"h-4 w-4 text-gray-400"})})]})]}),d&&e.jsx("div",{className:"text-red-600 text-sm bg-red-50 p-3 rounded-md",children:d}),e.jsx(M,{type:"submit",className:"w-full",disabled:l,children:l?"Signing in...":"Sign in"})]})})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-lg",children:"Production Access"}),e.jsxs(ue,{children:["Use a real ",e.jsx("strong",{children:"system_admin"})," or ",e.jsx("strong",{children:"tenant_admin"})," account created in Supabase/LCopilot."]})]})]}),e.jsx(U,{children:e.jsxs("ul",{className:"list-disc list-inside text-sm text-gray-600 space-y-2",children:[e.jsx("li",{children:"The legacy demo credentials have been removed for production safety."}),e.jsxs("li",{children:["Ensure the account exists in the ",e.jsx("code",{children:"users"})," table with ",e.jsx("code",{children:"role = 'system_admin'"}),"."]}),e.jsx("li",{children:"If you need access, create an admin user via backend or Supabase and use that password here."})]})})]}),e.jsxs("div",{className:"text-center text-sm text-gray-500",children:[e.jsx("p",{children:"LCopilot Admin Console v1.0"}),e.jsx("p",{className:"mt-1",children:"For authorized personnel only"})]})]})})}const uWe=[{title:"Overview",items:[{name:"Dashboard",section:"overview",icon:I1}]},{title:"Operations",items:[{name:"Monitoring",section:"ops-monitoring",icon:Wn,permissions:["ops:read"]},{name:"Jobs & Queue",section:"ops-jobs",icon:gn,permissions:["jobs:read"]},{name:"Alerts",section:"ops-alerts",icon:Ve,permissions:["ops:read"],badge:"2"}]},{title:"Audit & Governance",items:[{name:"Audit Logs",section:"audit-logs",icon:Bt,permissions:["audit:read"]},{name:"Approvals",section:"audit-approvals",icon:Bde,permissions:["approvals:read"],badge:"3"},{name:"Compliance",section:"audit-compliance",icon:Ot,permissions:["compliance:read"]}]},{title:"Security & Access",items:[{name:"Users & Tenants",section:"security-users",icon:xs,permissions:["users:read"]},{name:"API Keys",section:"security-access",icon:$o,permissions:["api_keys:read"]},{name:"Sessions",section:"security-sessions",icon:mt,permissions:["sessions:read"]}]},{title:"Bank Management",items:[{name:"Banks",section:"banks-management",icon:Pf,permissions:["banks:read"]}]},{title:"Billing & Finance",items:[{name:"Overview",section:"billing-overview",icon:Ws,permissions:["billing:read"]},{name:"Invoices & Payments",section:"billing-invoices-payments",icon:Fu,permissions:["billing:read"]},{name:"Revenue Recognition",section:"billing-recognition",icon:Vt,permissions:["billing:read"]},{name:"Taxes",section:"billing-taxes",icon:kc,permissions:["billing:read"]},{name:"Plans & Pricing",section:"billing-plans",icon:pn,permissions:["billing:read"]},{name:"Adjustments",section:"billing-adjustments",icon:Na,permissions:["billing:read"]},{name:"Disputes",section:"billing-disputes",icon:Ve,permissions:["disputes:read"]}]},{title:"Partners & Integration",items:[{name:"Partner Registry",section:"partners-registry",icon:cp,permissions:["partners:read"]},{name:"Connectors",section:"partners-connectors",icon:LD,permissions:["partners:read"]},{name:"Webhooks",section:"partners-webhooks",icon:ha,permissions:["webhooks:read"]}]},{title:"LLM Operations",items:[{name:"Prompts",section:"llm-prompts",icon:bh,permissions:["llm:read"]},{name:"Budgets",section:"llm-budgets",icon:Ws,permissions:["llm:read"]},{name:"Evaluations",section:"llm-evaluations",icon:OD,permissions:["llm:read"]}]},{title:"Compliance & Data",items:[{name:"Data Residency",section:"compliance-residency",icon:ha,permissions:["compliance:read"]},{name:"Retention",section:"compliance-retention",icon:Qm,permissions:["compliance:read"]},{name:"Legal Holds",section:"compliance-legal-holds",icon:Qde,permissions:["legal_holds:read"]}]},{title:"System",items:[{name:"Feature Flags",section:"system-feature-flags",icon:rg,permissions:["feature_flags:read"]},{name:"Releases",section:"system-releases",icon:Be,permissions:["releases:read"]},{name:"Settings",section:"system-settings",icon:sn,permissions:["settings:read"]},{name:"Rulesets",section:"rules-list",icon:yi,permissions:["rule:read"]},{name:"Rules Governance",section:"rules-governance",icon:cV,permissions:["rule:read"]},{name:"Active Rulesets",section:"rules-active",icon:Be,permissions:["rule:read"]}]}];function mWe({activeSection:t,onSectionChange:s,...a}){rn();const{permissions:r,user:n}=$j(),i=l=>!l||r.includes("*")?!0:l.some(o=>r.includes(o));return e.jsxs(Zo,{collapsible:"icon",...a,children:[e.jsx(Jo,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-blue-600 text-white",children:e.jsx(Ot,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"Admin Console"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"System Administration"})]})]})})})})}),e.jsx(Xo,{children:uWe.map(l=>e.jsxs(Zs,{children:[e.jsx(Aa,{children:l.title}),e.jsx(Js,{children:e.jsx(ls,{children:l.items.filter(o=>i(o.permissions)).map(o=>e.jsx(rt,{children:e.jsxs(it,{isActive:t===o.section,onClick:()=>s(o.section),tooltip:o.name,children:[e.jsx(o.icon,{}),e.jsx("span",{children:o.name}),o.badge&&e.jsx("span",{className:"ml-auto inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-destructive/10 text-destructive",children:o.badge})]})},o.section))})})]},l.title))}),e.jsx(Qo,{children:n&&e.jsx(ST,{variant:"sidebar"})})]})}const hWe=({columns:t})=>e.jsx(At,{children:e.jsx(fe,{colSpan:t,children:e.jsx("div",{className:"flex flex-col gap-2",children:Array.from({length:3}).map((s,a)=>e.jsx(pt,{className:"h-6 w-full"},a))})})});function _i({columns:t,data:s,loading:a,emptyState:r,footer:n,className:i}){const l=s.length>0;return e.jsxs("div",{className:Le("overflow-hidden rounded-lg border border-border/50 bg-card",i),children:[e.jsxs(la,{children:[e.jsx(xa,{children:e.jsx(At,{className:"bg-muted/40",children:t.map(o=>e.jsx(je,{className:Le(o.className,o.align==="center"&&"text-center",o.align==="right"&&"text-right"),style:o.width?{width:o.width}:void 0,children:o.header},o.key))})}),e.jsx(oa,{children:a?e.jsx(hWe,{columns:t.length}):l?s.map((o,d)=>e.jsx(At,{children:t.map((c,u)=>{const h=c.render?c.render(o,d):c.accessor?c.accessor(o):o[c.key];return e.jsx(fe,{className:Le(c.className,c.align==="center"&&"text-center",c.align==="right"&&"text-right"),children:h},`${c.key}-${u}`)})},o.id??d)):e.jsx(At,{children:e.jsx(fe,{colSpan:t.length,children:r??e.jsx("div",{className:"py-12 text-center text-sm text-muted-foreground",children:"No records found."})})})})]}),n&&e.jsx("div",{className:"border-t border-border/50 bg-muted/10 p-4",children:n})]})}function va({title:t,description:s,children:a,actions:r,className:n}){return e.jsxs("div",{className:Le("flex flex-col gap-4 border-b border-border/60 bg-gradient-to-br from-background to-muted/30 p-6",n),children:[e.jsxs("div",{className:"flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight text-foreground",children:t}),s&&e.jsx("p",{className:"text-sm text-muted-foreground",children:s})]}),r&&e.jsx("div",{className:"flex items-center gap-2",children:r})]}),a&&e.jsx("div",{className:"flex flex-wrap items-center gap-3",children:a})]})}function nc({searchPlaceholder:t="Search...",searchValue:s,onSearchChange:a,filterGroups:r,endAdornment:n,children:i}){const l=o=>{a?.(o.target.value)};return e.jsxs("div",{className:"flex w-full flex-wrap items-center gap-3",children:[a&&e.jsx("div",{className:"flex w-full min-w-[200px] max-w-sm flex-1",children:e.jsx(oe,{value:s??"",onChange:l,placeholder:t,className:"w-full"})}),r?.map(o=>{if(o.multi){const c=Array.isArray(o.value)?o.value:[o.value].filter(Boolean);return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Te,{onValueChange:u=>{c.includes(u)||o.onChange([...c,u])},children:[e.jsx(Pe,{className:"min-w-[180px]",children:e.jsx(Fe,{placeholder:o.label})}),e.jsx(De,{children:o.options.map(u=>e.jsx(K,{value:u.value,children:u.label},u.value))})]}),e.jsx("div",{className:"flex flex-wrap items-center gap-1",children:c.map(u=>{const h=o.options.find(x=>x.value===u);return h?e.jsxs(M,{variant:"secondary",size:"sm",type:"button",className:"h-7 gap-1",onClick:()=>o.onChange(c.filter(x=>x!==u)),children:[e.jsx("span",{children:h.label}),e.jsx(fn,{className:"h-3 w-3"})]},u):null})})]},o.label)}const d=Array.isArray(o.value)?o.value[0]??"":o.value;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Te,{value:d,onValueChange:c=>o.onChange(c),children:[e.jsx(Pe,{className:"min-w-[180px]",children:e.jsx(Fe,{placeholder:o.label})}),e.jsx(De,{children:o.options.map(c=>e.jsx(K,{value:c.value,children:c.label},c.value))})]}),o.allowClear&&d&&e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>o.onChange(""),children:"Clear"})]},o.label)}),i,n&&e.jsx("div",{className:"ml-auto flex items-center gap-2",children:n})]})}function Wr({icon:t,title:s,description:a,action:r,className:n,children:i}){return e.jsxs("div",{className:Le("flex flex-col items-center justify-center gap-4 rounded-lg border border-dashed border-border/70 bg-muted/10 p-12 text-center",n),children:[t&&e.jsx("div",{className:"rounded-full bg-muted/40 p-4 text-muted-foreground",children:t}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("h3",{className:"text-lg font-semibold text-foreground",children:s}),a&&e.jsx("p",{className:"text-sm text-muted-foreground",children:a}),i]}),r]})}const xWe=[{label:"24h",value:"24h"},{label:"7d",value:"7d"},{label:"30d",value:"30d"},{label:"90d",value:"90d"}],vU="7d",jU=Ra();function pWe({stat:t,onNavigate:s}){const a=t.changeDirection==="up"?"text-emerald-500":t.changeDirection==="down"?"text-rose-500":"text-muted-foreground",r=t.icon,n=!!t.href;return e.jsxs("button",{type:"button",onClick:()=>n&&s(t.href),className:"group h-full rounded-xl border border-border/60 bg-card p-6 text-left shadow-sm transition hover:border-primary/60 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t.label}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-foreground",children:t.value}),e.jsxs("span",{className:Le("flex items-center gap-1 text-xs",a),children:[t.changeDirection!=="flat"&&e.jsx(Zm,{className:"h-3 w-3"}),t.changeLabel]})]})]}),e.jsx("div",{className:"rounded-lg bg-muted/60 p-3 text-muted-foreground group-hover:text-primary",children:e.jsx(r,{className:"h-5 w-5"})})]}),t.emphasis&&e.jsx(Q,{className:"mt-4",variant:"secondary",children:"Key metric"})]})}function fWe(){const{user:t}=$j(),s=zt(),[a,r]=zs(),n=a.get("range")??vU,[i,l]=m.useState([]),[o,d]=m.useState(!0),[c,u]=m.useState(null),[h,x]=m.useState([]),[g,j]=m.useState(null);m.useEffect(()=>{let N=!0;return d(!0),jU.getDashboardStats(n).then(C=>{N&&(l(C),u(null))}).catch(()=>{N&&u("Unable to load dashboard metrics")}).finally(()=>{N&&d(!1)}),()=>{N=!1}},[n]),m.useEffect(()=>{jU.listAdminAuditLog({page:1,pageSize:5}).then(N=>{x(N.items),j(null)}).catch(()=>{x([]),j("Unable to load recent administrative activity")})},[]);const y=N=>{const C=new URLSearchParams(a);N===vU?C.delete("range"):C.set("range",N),r(C,{replace:!0})},b=N=>{if(!N)return;const C=new URLSearchParams(a);N==="overview"?C.delete("section"):C.set("section",N),s({pathname:"/admin",search:C.toString()})};return e.jsxs("div",{className:"flex flex-col gap-8",children:[e.jsx(va,{title:`Welcome back, ${t?.name??"Admin"}`,description:"Real-time snapshot of LCopilot operations, compliance and customer health",children:e.jsx("div",{className:"flex items-center gap-2",children:xWe.map(N=>e.jsx(M,{size:"sm",variant:n===N.value?"default":"outline",onClick:()=>y(N.value),children:N.label},N.value))})}),e.jsxs("section",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3",children:[o&&e.jsx(e.Fragment,{children:Array.from({length:6}).map((N,C)=>e.jsxs("div",{className:"rounded-xl border border-border/60 bg-card p-6",children:[e.jsx(pt,{className:"h-4 w-24"}),e.jsx(pt,{className:"mt-4 h-7 w-32"}),e.jsx(pt,{className:"mt-2 h-4 w-40"})]},C))}),!o&&c&&e.jsx($,{className:"col-span-full border-dashed border-destructive/40 bg-destructive/5 text-destructive",children:e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(ks,{className:"h-5 w-5"}),c]}),e.jsx(ue,{children:"Retry shortly or check monitoring services."})]})}),!o&&!c&&i.map(N=>e.jsx(pWe,{stat:N,onNavigate:b},N.id))]}),e.jsxs("section",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:[e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(M1,{className:"h-5 w-5 text-primary"}),"System status"]}),e.jsx(ue,{children:"Top-level signals for core platform services"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid gap-3",children:["API Gateway","Database","Workflow Queue","Storage"].map(N=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/40 bg-muted/40 px-4 py-3",children:[e.jsx("span",{className:"text-sm font-medium text-foreground",children:N}),e.jsxs("span",{className:"flex items-center gap-2 text-sm text-emerald-500",children:[e.jsx(Qs,{className:"h-4 w-4"})," Healthy"]})]},N))})})]}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Quick actions"}),e.jsx(ue,{children:"Common workflows you might need today"})]}),e.jsxs(U,{className:"grid gap-3 sm:grid-cols-2",children:[e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("security-users"),children:"Manage users"}),e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("ops-jobs"),children:"Review jobs"}),e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("ops-alerts"),children:"Open alerts"}),e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("audit-logs"),children:"Audit trail"}),e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("billing-disputes"),children:"Billing disputes"}),e.jsx(M,{variant:"outline",className:"justify-start",onClick:()=>b("system-settings"),children:"System settings"})]})]})]}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Wn,{className:"h-5 w-5 text-primary"}),"Recent administrative activity"]}),e.jsx(ue,{children:"Full trail available in Audit Logs"})]}),e.jsxs(U,{className:"grid gap-3",children:[g&&e.jsx("div",{className:"rounded-lg border border-amber-500/50 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:g}),!g&&h.length===0&&e.jsx("div",{className:"rounded-lg border border-dashed border-border/60 bg-muted/30 px-4 py-6 text-center text-sm text-muted-foreground",children:"No recent admin activity recorded."}),!g&&h.map(N=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/60 px-4 py-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:N.action}),e.jsx("p",{className:"text-xs text-muted-foreground",children:N.actor})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:N.createdAt?new Date(N.createdAt).toLocaleString():""})]},N.id))]})]})]})}const gWe=[{label:"15m",value:"24h"},{label:"1h",value:"7d"},{label:"24h",value:"30d"},{label:"7d",value:"90d"}],bU="24h",vWe=Ra();function jWe({metric:t}){const s=t.trend==="up"?"text-emerald-500":t.trend==="down"?"text-rose-500":"text-muted-foreground",a=t.unit?`${t.value}${t.unit}`:t.value,r=t.target?Math.min(100,Math.round(t.value/t.target*100)):void 0;return e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{className:"space-y-1",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:t.name}),e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-foreground",children:a}),e.jsxs("span",{className:Le("flex items-center gap-1 text-xs",s),children:[t.trend!=="stable"&&e.jsx(Zm,{className:"h-3 w-3"}),t.change>0?`+${t.change}`:t.change,t.unit]})]})]}),e.jsxs(U,{className:"space-y-3",children:[r!==void 0&&t.unit!=="%"&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:["Target ",t.target,t.unit]}),e.jsxs("span",{children:[r,"%"]})]}),e.jsx(es,{value:r,className:"h-2"})]}),t.metadata&&e.jsx("div",{className:"space-y-1 text-xs text-muted-foreground",children:Object.entries(t.metadata).map(([n,i])=>e.jsxs("p",{children:[e.jsxs("span",{className:"font-medium text-foreground/80",children:[n,":"]})," ",String(i)]},n))})]})]})}function bWe(){const[t,s]=zs(),a=t.get("opsRange")??bU,[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(null),c=m.useCallback(()=>{l(!0),vWe.getOpsMetrics(a).then(h=>{n(h),d(null)}).catch(()=>d("Unable to load operational metrics")).finally(()=>l(!1))},[a]);m.useEffect(()=>{c();const h=window.setInterval(c,6e4);return()=>window.clearInterval(h)},[c]);const u=h=>{const x=new URLSearchParams(t);h===bU?x.delete("opsRange"):x.set("opsRange",h),s(x,{replace:!0})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Operations monitoring",description:"Track core reliability, latency and throughput KPIs across LCopilot.",actions:e.jsxs(M,{size:"sm",variant:"outline",onClick:c,disabled:i,className:"gap-2",children:[e.jsx(Lt,{className:Le("h-4 w-4",i&&"animate-spin")}),"Refresh"]}),children:e.jsx("div",{className:"flex items-center gap-2",children:gWe.map(h=>e.jsx(M,{size:"sm",variant:a===h.value?"default":"outline",onClick:()=>u(h.value),children:h.label},h.value))})}),o&&e.jsx($,{className:"border-destructive/40 bg-destructive/10",children:e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(Ve,{className:"h-5 w-5"}),o]}),e.jsx(ue,{children:"Try refreshing or verify the monitoring service."})]})}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 xl:grid-cols-3",children:i?Array.from({length:6}).map((h,x)=>e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{className:"space-y-2",children:[e.jsx(pt,{className:"h-3 w-32"}),e.jsx(pt,{className:"h-8 w-24"})]}),e.jsxs(U,{className:"space-y-2",children:[e.jsx(pt,{className:"h-2 w-full"}),e.jsx(pt,{className:"h-2 w-4/5"})]})]},x)):r.map(h=>e.jsx(jWe,{metric:h},h.id))}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Wn,{className:"h-5 w-5 text-primary"}),"Current platform highlights"]}),e.jsx(ue,{children:"Latest signals from monitoring service"})]}),e.jsxs(U,{className:"grid gap-3",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 px-4 py-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"No SLA breaches detected"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"All services meeting uptime commitments in selected window."})]}),e.jsx(Q,{variant:"outline",children:"SLO 99.97%"})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/40 px-4 py-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Queue depth within safe range"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Average processing time under 5 minutes."})]}),e.jsx(Q,{variant:"outline",children:"34 queued"})]})]})]})]})}function cv(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const uo=({className:t,...s})=>e.jsx("nav",{role:"navigation","aria-label":"pagination",className:cv("mx-auto flex w-full justify-center",t),...s});uo.displayName="Pagination";const mo=m.forwardRef(({className:t,...s},a)=>e.jsx("ul",{ref:a,className:cv("flex flex-row items-center gap-1",t),...s}));mo.displayName="PaginationContent";const Ca=m.forwardRef(({className:t,...s},a)=>e.jsx("li",{ref:a,className:cv("",t),...s}));Ca.displayName="PaginationItem";const fR=({className:t,isActive:s,size:a="icon",...r})=>e.jsx("a",{"aria-current":s?"page":void 0,className:cv(ig({variant:s?"outline":"ghost",size:a}),t),...r});fR.displayName="PaginationLink";const ho=({className:t,...s})=>e.jsxs(fR,{"aria-label":"Go to previous page",size:"default",className:cv("gap-1 pl-2.5",t),...s,children:[e.jsx(Uj,{className:"h-4 w-4"}),e.jsx("span",{children:"Previous"})]});ho.displayName="PaginationPrevious";const xo=({className:t,...s})=>e.jsxs(fR,{"aria-label":"Go to next page",size:"default",className:cv("gap-1 pr-2.5",t),...s,children:[e.jsx("span",{children:"Next"}),e.jsx(xr,{className:"h-4 w-4"})]});xo.displayName="PaginationNext";const yWe=Ra();function Hi(t){const{user:s}=$j(),{toast:a}=et();return m.useCallback(async(r,n)=>{try{await yWe.recordAdminAudit({action:r,section:t,actor:s?.email??"system",actorRole:s?.role??"viewer",entityId:n?.entityId,metadata:n?.metadata})}catch(i){a({title:"Could not record audit trail",description:i instanceof Error?i.message:"Unexpected error",variant:"destructive"})}},[t,a,s?.email,s?.role])}const lA=Ra(),oA=10,yU=[{id:"job-fallback-1",name:"Daily Settlement",type:"cron",status:"succeeded",queue:"critical",retries:0,maxRetries:5,createdAt:new Date(Date.now()-1e3*60*45).toISOString(),completedAt:new Date(Date.now()-1e3*60*40).toISOString(),durationMs:18e4},{id:"job-fallback-2",name:"Fraud Signal Sweep",type:"workflow",status:"running",queue:"standard",retries:1,maxRetries:5,createdAt:new Date(Date.now()-1e3*60*5).toISOString(),startedAt:new Date(Date.now()-1e3*60*4).toISOString()},{id:"job-fallback-3",name:"Document OCR ingest",type:"ingest",status:"failed",queue:"bulk",retries:2,maxRetries:5,createdAt:new Date(Date.now()-1e3*60*120).toISOString()}],NWe=[{label:"Queued",value:"queued"},{label:"Running",value:"running"},{label:"Succeeded",value:"succeeded"},{label:"Failed",value:"failed"},{label:"Cancelled",value:"cancelled"},{label:"Scheduled",value:"scheduled"}];function wWe(t){if(t.durationMs)return t.durationMs<1e3?`${t.durationMs}ms`:`${(t.durationMs/1e3).toFixed(1)}s`;if(t.startedAt&&t.status==="running"){const s=Date.now()-new Date(t.startedAt).getTime();return s<1e3?`${s}ms`:`${(s/1e3).toFixed(1)}s`}return"-"}function _We(t){if(!t)return"-";const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`}function CWe(){const{toast:t}=et(),[s,a]=zs(),r=Hi("ops-jobs"),[n,i]=m.useState(()=>Math.max(1,Number(s.get("jobsPage")??"1"))),[l,o]=m.useState(s.get("jobsSearch")??""),[d,c]=m.useState(()=>{const T=s.get("jobsStatus");return T?T.split(",").filter(Boolean):[]}),[u,h]=m.useState([]),[x,g]=m.useState(0),[j,y]=m.useState(!0),[b,N]=m.useState(null),[C,_]=m.useState(null),A=Math.max(1,Math.ceil(x/oA)),k=m.useCallback(T=>{const B=new URLSearchParams(s);Object.entries(T).forEach(([G,q])=>{q===null||q===""?B.delete(G):B.set(G,q)}),B.toString()!==s.toString()&&a(B,{replace:!0})},[s,a]),E=m.useCallback(()=>{y(!0);const T=d.filter(Boolean);lA.listJobs({page:n,pageSize:oA,status:T.length?T:void 0,search:l||void 0}).then(B=>{_(null),h(B.items),g(B.total)}).catch(B=>{console.error("Failed to load jobs",B),_("Unable to load queue metrics. Showing cached mock data."),h(yU),g(yU.length)}).finally(()=>y(!1))},[n,l,d]);m.useEffect(()=>{k({jobsPage:n===1?null:String(n),jobsSearch:l||null,jobsStatus:d.length?d.join(","):null}),E()},[n,l,d,E,k]);const D=T=>{o(T),i(1)},R=T=>{const B=Array.isArray(T)?T:T?[T]:[];c(B),i(1)},O=async T=>{N(T);const B=await lA.retryJob(T);N(null),t({title:B.success?"Job re-queued":"Retry failed",description:B.message,variant:B.success?"default":"destructive"}),B.success&&(await r("retry_job",{entityId:T}),E())},P=async T=>{N(T);const B=await lA.cancelJob(T);N(null),t({title:B.success?"Job cancelled":"Cancel failed",description:B.message,variant:B.success?"default":"destructive"}),B.success&&(await r("cancel_job",{entityId:T}),E())};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Job orchestration",description:"Inspect, retry or cancel background workflows powering LCopilot.",actions:e.jsxs(M,{variant:"outline",size:"sm",onClick:E,disabled:j,className:"gap-2",children:[e.jsx(Lt,{className:j?"h-4 w-4 animate-spin":"h-4 w-4"}),"Refresh"]}),children:e.jsx(nc,{searchPlaceholder:"Search jobs by id or name",searchValue:l,onSearchChange:D,filterGroups:[{label:"Status",value:d,options:NWe,multi:!0,onChange:R}]})}),C&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:C}),e.jsx(_i,{columns:[{key:"name",header:"Job",render:T=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:T.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["#",T.id]})]})},{key:"queue",header:"Queue",render:T=>e.jsx(Q,{variant:"outline",children:T.queue})},{key:"status",header:"Status",render:T=>{const B=T.status==="succeeded"?"outline":T.status==="failed"?"destructive":T.status==="running"?"secondary":"default";return e.jsx(Q,{variant:B,children:T.status})}},{key:"retries",header:"Retries",render:T=>e.jsxs("span",{className:"text-sm text-muted-foreground",children:[T.retries,"/",T.maxRetries]})},{key:"duration",header:"Duration",render:T=>e.jsx("span",{className:"text-sm text-muted-foreground",children:wWe(T)})},{key:"createdAt",header:"Created",render:T=>e.jsx("span",{className:"text-sm text-muted-foreground",children:_We(T.createdAt)})},{key:"actions",header:"Actions",align:"right",render:T=>e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[T.status==="failed"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>O(T.id),disabled:b===T.id,className:"gap-1",children:[e.jsx(yu,{className:"h-4 w-4"})," Retry"]}),T.status==="queued"&&e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>P(T.id),disabled:b===T.id,className:"gap-1",children:[e.jsx(uV,{className:"h-4 w-4"})," Cancel"]})]})}],data:u,loading:j,emptyState:e.jsx(Wr,{title:"No jobs found",description:"Adjust filters to see more runs."}),footer:x>oA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{onClick:T=>{T.preventDefault(),n>1&&i(n-1)},className:n===1?"pointer-events-none opacity-50":void 0,href:"#"})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",A]})}),e.jsx(Ca,{children:e.jsx(xo,{onClick:T=>{T.preventDefault(),n<A&&i(n+1)},className:n>=A?"pointer-events-none opacity-50":void 0,href:"#"})})]})})}),j&&u.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((T,B)=>e.jsx(pt,{className:"h-12 w-full"},B))})]})}const cA=Ra(),dA=8,SWe=[{label:"Critical",value:"critical"},{label:"High",value:"high"},{label:"Medium",value:"medium"},{label:"Low",value:"low"},{label:"Info",value:"info"}],kWe=[{label:"Active",value:"active"},{label:"Acknowledged",value:"acknowledged"},{label:"Resolved",value:"resolved"}];function NU(t){return t.resolvedAt?"resolved":t.acknowledgedAt?"acknowledged":"active"}function EWe(t){const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`}function AWe(){const{toast:t}=et(),[s,a]=zs(),r=Hi("ops-alerts"),[n,i]=m.useState(()=>Math.max(1,Number(s.get("alertsPage")??"1"))),[l,o]=m.useState(()=>{const O=s.get("alertsSeverity");return O?O.split(",").filter(Boolean):[]}),[d,c]=m.useState(s.get("alertsStatus")??"active"),[u,h]=m.useState([]),[x,g]=m.useState(0),[j,y]=m.useState(!0),[b,N]=m.useState(null),[C,_]=m.useState(null),A=Math.max(1,Math.ceil(x/dA)),k=m.useCallback(O=>{const P=new URLSearchParams(s);Object.entries(O).forEach(([T,B])=>{B?P.set(T,B):P.delete(T)}),P.toString()!==s.toString()&&a(P,{replace:!0})},[s,a]),E=m.useCallback(()=>{y(!0),cA.listAlerts({page:n,pageSize:dA,severity:l.length?l:void 0,status:d}).then(O=>{_(null),h(O.items),g(O.total)}).catch(O=>{console.error("Failed to load alerts",O),_("Unable to load alerts. Please retry."),h([]),g(0)}).finally(()=>y(!1))},[n,l,d]);m.useEffect(()=>{k({alertsPage:n===1?null:String(n),alertsSeverity:l.length?l.join(","):null,alertsStatus:d==="active"?null:d}),E()},[n,l,d,E,k]);const D=async O=>{N(O);const P=await cA.acknowledgeAlert(O);N(null),t({title:P.success?"Alert acknowledged":"Unable to acknowledge",description:P.message,variant:P.success?"default":"destructive"}),P.success&&(await r("ack_alert",{entityId:O}),E())},R=async O=>{N(O);const P=await cA.snoozeAlert(O,30);N(null),t({title:P.success?"Alert snoozed":"Unable to snooze",description:P.message,variant:P.success?"default":"destructive"}),P.success&&(await r("snooze_alert",{entityId:O,metadata:{minutes:30}}),E())};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Operational alerts",description:"Centralized view of actionable incidents triggerd by LCopilot watchdogs.",actions:e.jsxs(M,{size:"sm",variant:"outline",onClick:E,disabled:j,className:"gap-2",children:[e.jsx($s,{className:j?"h-4 w-4 animate-spin":"h-4 w-4"}),"Refresh"]}),children:e.jsx(nc,{filterGroups:[{label:"Severity",value:l,options:SWe,multi:!0,onChange:O=>{const P=Array.isArray(O)?O:O?[O]:[];o(P),i(1)}},{label:"Status",value:d,options:kWe,onChange:O=>{c(String(O||"active")),i(1)},allowClear:!0}]})}),C&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:C}),e.jsx(_i,{columns:[{key:"title",header:"Alert",render:O=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-medium text-foreground",children:O.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O.description}),O.tags&&O.tags.length>0&&e.jsx("div",{className:"flex flex-wrap gap-1",children:O.tags.map(P=>e.jsx(Q,{variant:"outline",className:"text-[10px]",children:P},P))})]})},{key:"severity",header:"Severity",render:O=>{const P=O.severity==="critical"?"destructive":O.severity==="high"?"default":O.severity==="medium"?"secondary":"outline";return e.jsx(Q,{variant:P,children:O.severity})}},{key:"createdAt",header:"Raised",render:O=>e.jsx("span",{className:"text-sm text-muted-foreground",children:EWe(O.createdAt)})},{key:"source",header:"Source",render:O=>e.jsx("span",{className:"text-sm text-muted-foreground",children:O.source})},{key:"status",header:"Status",render:O=>{const P=NU(O),T=P==="resolved"?"outline":P==="acknowledged"?"secondary":"default";return e.jsx(Q,{variant:T,children:P})}},{key:"actions",header:"Actions",align:"right",render:O=>{const P=NU(O);return e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[P==="active"&&e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>D(O.id),disabled:b===O.id,children:[e.jsx(Oe,{className:"h-4 w-4"})," Ack"]}),P==="active"&&e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>R(O.id),disabled:b===O.id,children:[e.jsx(Pde,{className:"h-4 w-4"})," Snooze"]}),P!=="active"&&O.acknowledgedAt&&e.jsxs("span",{className:"text-xs text-muted-foreground flex items-center gap-1",children:[e.jsx(Dde,{className:"h-3.5 w-3.5"}),P==="acknowledged"?"Awaiting resolution":"Resolved"]})]})}}],data:u,loading:j,emptyState:e.jsx(Wr,{title:"No alerts",description:"Everything looks stable in this timeframe."}),footer:x>dA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:n===1?"pointer-events-none opacity-50":void 0,onClick:O=>{O.preventDefault(),n>1&&i(n-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",A]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:n>=A?"pointer-events-none opacity-50":void 0,onClick:O=>{O.preventDefault(),n<A&&i(n+1)}})})]})})}),j&&u.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((O,P)=>e.jsx(pt,{className:"h-12 w-full"},P))})]})}const PWe=Ra(),uA=12,wU=[{id:"audit-fallback-1",actor:{id:"admin-1",name:"Alicia Chen",email:"admin1@trdrhub.com",role:"Super Admin"},action:"updated",entity:"feature_flag",entityId:"flag-new-analytics",summary:"Updated rollout percentage",createdAt:new Date(Date.now()-1e3*60*10).toISOString(),ip:"10.10.0.12",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_0)"},{id:"audit-fallback-2",actor:{id:"admin-2",name:"Marcus Bell",email:"ops@trdrhub.com",role:"Ops Admin"},action:"created",entity:"partner",entityId:"partner-1",summary:"Linked new risk data provider",createdAt:new Date(Date.now()-1e3*60*45).toISOString(),ip:"10.10.0.56",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)"},{id:"audit-fallback-3",actor:{id:"admin-3",name:"Nina Alvarez",email:"security@trdrhub.com",role:"Security Admin"},action:"revoked",entity:"api_key",entityId:"key-7",summary:"Revoked stale integration key",createdAt:new Date(Date.now()-1e3*60*120).toISOString(),ip:"10.10.0.91",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 13_5)"}];function DWe(t){const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`}function TWe(){const{toast:t}=et(),[s,a]=zs(),[r,n]=m.useState(()=>Math.max(1,Number(s.get("auditPage")??"1"))),[i,l]=m.useState(s.get("auditSearch")??""),[o,d]=m.useState(s.get("auditActor")??"all"),[c,u]=m.useState(s.get("auditAction")??"all"),[h,x]=m.useState([]),[g,j]=m.useState(0),[y,b]=m.useState(!0),[N,C]=m.useState([]),[_,A]=m.useState([]),[k,E]=m.useState(null),D=Math.max(1,Math.ceil(g/uA)),R=m.useCallback(T=>{const B=new URLSearchParams(s);Object.entries(T).forEach(([G,q])=>{q?B.set(G,q):B.delete(G)}),B.toString()!==s.toString()&&a(B,{replace:!0})},[s,a]),O=m.useCallback(()=>{b(!0),PWe.listAuditLogs({page:r,pageSize:uA,search:i||void 0,actor:o!=="all"?o:void 0,action:c!=="all"?c:void 0}).then(T=>{x(T.items),j(T.total),C(B=>{const G=Array.from(new Set(T.items.map(q=>q.actor.email)));return G.length?G:B}),A(B=>{const G=Array.from(new Set(T.items.map(q=>q.action)));return G.length?G:B}),E(null)}).catch(T=>{console.error("Failed to load audit logs",T),E("Unable to load audit activity. Showing cached mock data."),x(wU),j(wU.length)}).finally(()=>b(!1))},[r,i,o,c]);m.useEffect(()=>{R({auditPage:r===1?null:String(r),auditSearch:i||null,auditActor:o!=="all"?o:null,auditAction:c!=="all"?c:null}),O()},[r,i,o,c,O,R]);const P=()=>{if(!h.length){t({title:"Nothing to export",description:"Adjust filters to load audit entries first."});return}const T=[["Timestamp","Actor","Email","Action","Entity","Entity ID","Summary","IP","User Agent"],...h.map(z=>[new Date(z.createdAt).toISOString(),z.actor.name,z.actor.email,z.action,z.entity,z.entityId,z.summary,z.ip??"",z.userAgent??""])],B=new Blob([xR(T)],{type:"text/csv;charset=utf-8"}),G=URL.createObjectURL(B),q=document.createElement("a");q.href=G,q.download=`audit-log-${Date.now()}.csv`,document.body.appendChild(q),q.click(),document.body.removeChild(q),URL.revokeObjectURL(G),t({title:"Export ready",description:"Current view downloaded as CSV."})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Audit log",description:"Immutable record of privileged actions across LCopilot.",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:O,disabled:y,className:"gap-2",children:[e.jsx(Lt,{className:y?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:P,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"})," Export CSV"]})]}),children:e.jsx(nc,{searchPlaceholder:"Search actions, emails or entities",searchValue:i,onSearchChange:T=>{l(T),n(1)},filterGroups:[{label:"Actor",value:o,options:["all",...N].map(T=>({label:T==="all"?"All actors":T,value:T})),onChange:T=>{d(String(T||"all")),n(1)},allowClear:!0},{label:"Action",value:c,options:["all",..._].map(T=>({label:T==="all"?"All actions":T,value:T})),onChange:T=>{u(String(T||"all")),n(1)},allowClear:!0}]})}),k&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:k}),e.jsx(_i,{columns:[{key:"actor",header:"Actor",render:T=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:T.actor.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:T.actor.email})]})},{key:"action",header:"Action",render:T=>e.jsx("span",{className:"text-sm text-foreground",children:T.action})},{key:"entity",header:"Entity",render:T=>e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsx("p",{children:T.entity}),e.jsxs("p",{children:["#",T.entityId]})]})},{key:"summary",header:"Summary",render:T=>e.jsx("span",{className:"text-sm text-muted-foreground",children:T.summary})},{key:"createdAt",header:"When",render:T=>e.jsx("span",{className:"text-sm text-muted-foreground",children:DWe(T.createdAt)})},{key:"metadata",header:"Session",render:T=>e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[T.ip&&e.jsxs("p",{children:["IP: ",T.ip]}),T.userAgent&&e.jsxs("p",{className:"max-w-[220px] truncate",children:["UA: ",T.userAgent]})]})}],data:h,loading:y,emptyState:e.jsx(Wr,{title:"No audit entries",description:"Try widening your search or time window."}),footer:g>uA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:r===1?"pointer-events-none opacity-50":void 0,onClick:T=>{T.preventDefault(),r>1&&n(r-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",r," of ",D]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:r>=D?"pointer-events-none opacity-50":void 0,onClick:T=>{T.preventDefault(),r<D&&n(r+1)}})})]})})}),y&&h.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((T,B)=>e.jsx(pt,{className:"h-10 w-full"},B))})]})}const _U=Ra(),CU=["pending","approved","rejected"];function mA(t){if(!t)return"-";const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`}function FWe({before:t,after:s}){return e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"Before"}),e.jsx("pre",{className:"mt-2 max-h-64 overflow-auto text-xs text-foreground/70",children:JSON.stringify(t??{note:"No previous state"},null,2)})]}),e.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/40 p-4",children:[e.jsx("h4",{className:"text-sm font-medium text-muted-foreground",children:"After"}),e.jsx("pre",{className:"mt-2 max-h-64 overflow-auto text-xs text-foreground/70",children:JSON.stringify(s??{note:"No requested change"},null,2)})]})]})}function RWe(){const{toast:t}=et(),s=Hi("audit-approvals"),[a,r]=m.useState("pending"),[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(null),u=m.useCallback(()=>{o(!0),_U.listApprovalRequests({status:a,page:1,pageSize:20}).then(x=>i(x.items)).finally(()=>o(!1))},[a]);m.useEffect(()=>{u()},[u]);const h=async(x,g)=>{let j;g==="reject"&&(j=window.prompt("Provide rejection reason (optional)")??void 0),c(x);const y=await _U.resolveApproval(x,g,j);c(null),t({title:y.success?`Request ${g}d`:`Failed to ${g}`,description:y.message,variant:y.success?"default":"destructive"}),y.success&&(await s(g==="approve"?"approve_request":"reject_request",{entityId:x,metadata:{reason:j}}),u())};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Approval workflows",description:"Maker-checker queue for sensitive administrative changes."}),e.jsxs(Os,{value:a,onValueChange:x=>r(x),children:[e.jsx(Fs,{className:"grid w-full grid-cols-3",children:CU.map(x=>e.jsx(He,{value:x,className:"capitalize",children:x},x))}),CU.map(x=>e.jsx(Qe,{value:x,className:"mt-6 space-y-4",children:l&&a===x?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((g,j)=>e.jsx("div",{className:"h-24 rounded-lg border border-border/50 bg-muted/40"},j))}):n.length===0?e.jsx(Wr,{title:`No ${x} requests`,description:x==="pending"?"You're all caught up.":"No historical entries for this state in the mock dataset."}):n.map(g=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx(Q,{variant:"secondary",className:"capitalize",children:g.type.replace(/_/g," ")}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Submitted ",mA(g.submittedAt)]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["By ",g.submittedBy]})]}),e.jsx("p",{className:"text-sm text-foreground",children:g.comments?.[0]?.body??"Change request awaiting review."}),e.jsx("div",{className:"flex flex-wrap gap-2 text-xs text-muted-foreground",children:g.approvers.map(j=>e.jsxs(Q,{variant:"outline",children:["Approver: ",j]},j))})]}),e.jsxs("div",{className:"flex flex-col items-start gap-2 md:items-end",children:[e.jsxs(wt,{children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-2",children:[e.jsx(Wde,{className:"h-4 w-4"})," View diff"]})}),e.jsxs(yt,{className:"max-w-3xl",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Change details"}),e.jsx(_t,{children:"Review requested modifications before taking action."})]}),e.jsx(FWe,{before:g.before??void 0,after:g.after??void 0})]})]}),x==="pending"?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{size:"sm",variant:"outline",className:"gap-1 text-emerald-600",onClick:()=>h(g.id,"approve"),disabled:d===g.id,children:[e.jsx(Za,{className:"h-4 w-4"})," Approve"]}),e.jsxs(M,{size:"sm",variant:"outline",className:"gap-1 text-rose-600",onClick:()=>h(g.id,"reject"),disabled:d===g.id,children:[e.jsx(fn,{className:"h-4 w-4"})," Reject"]})]}):e.jsx("p",{className:"text-xs text-muted-foreground",children:x==="approved"?`Approved ${mA(g.approvedAt)}.`:`Rejected ${mA(g.rejectedAt)}.`})]})]},g.id))},x))]})]})}const OWe=Ra();function IWe({status:t}){switch(t){case"pass":return e.jsx(Q,{className:"bg-emerald-500/10 text-emerald-600 hover:bg-emerald-500/10",children:"Pass"});case"warning":return e.jsx(Q,{className:"bg-amber-500/10 text-amber-600 hover:bg-amber-500/10",children:"Warning"});case"fail":return e.jsx(Q,{className:"bg-rose-500/10 text-rose-600 hover:bg-rose-500/10",children:"Fail"});default:return e.jsx(Q,{variant:"secondary",children:"Unknown"})}}function LWe(){const[t,s]=m.useState([]),[a,r]=m.useState(!0);m.useEffect(()=>{OWe.getComplianceSummary().then(i=>s(i)).finally(()=>r(!1))},[]);const n=m.useMemo(()=>t.reduce((i,l)=>(i.total+=1,i[l.status]+=1,i.exceptions+=l.exceptions,i),{total:0,pass:0,warning:0,fail:0,exceptions:0}),[t]);return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Compliance posture",description:"Policy adherence across regulatory and security frameworks."}),e.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[{label:"Passing policies",value:n.pass,icon:bi,tone:"text-emerald-600"},{label:"Warnings",value:n.warning,icon:Cue,tone:"text-amber-600"},{label:"Failures",value:n.fail,icon:sj,tone:"text-rose-600"}].map(({label:i,value:l,icon:o,tone:d})=>e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:i}),e.jsx(o,{className:`h-5 w-5 ${d}`})]}),e.jsx(U,{children:e.jsx("p",{className:"text-2xl font-semibold text-foreground",children:a?"â€”":l})})]},i))}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-5 w-5 text-primary"}),"Policy runs"]}),e.jsx(ue,{children:"Latest evidence from automated compliance checks"})]}),e.jsx(U,{className:"space-y-3",children:a?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((i,l)=>e.jsx(pt,{className:"h-20 w-full"},l))}):t.length===0?e.jsx(Wr,{title:"No compliance data",description:"Run a compliance check to populate this section."}):t.map(i=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:i.name}),e.jsx(Q,{variant:"outline",className:"text-xs capitalize",children:i.category}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Last run ",i.lastRunAt?new Date(i.lastRunAt).toLocaleString():"â€”"]}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Owner: ",i.owner]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 text-xs text-muted-foreground",children:[e.jsx(IWe,{status:i.status}),e.jsxs("span",{children:[i.exceptions," outstanding exception(s)"]}),i.reportUrl&&e.jsx(M,{asChild:!0,variant:"outline",size:"sm",children:e.jsx("a",{href:i.reportUrl,target:"_blank",rel:"noreferrer",children:"View evidence"})})]})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:i.status==="fail"?"Immediate remediation required":i.status==="warning"?"Review exceptions and document mitigation":"Compliant"})]},i.id))})]})]})}const y0=Ra(),hA=10,MWe=[{id:"super_admin",name:"Super Admin",description:"Full platform access",permissions:["*"]},{id:"admin",name:"Administrator",description:"Manage operations",permissions:["admin:read"]},{id:"viewer",name:"Viewer",description:"Read-only",permissions:["admin:read"],editable:!0}],zN=new Date().toISOString(),SU=[{id:"admin-fallback-1",name:"Alicia Chen",email:"admin1@trdrhub.com",role:"super_admin",status:"active",invitedAt:zN,lastActiveAt:zN,mfaEnabled:!0,tenants:["global","emea"]},{id:"admin-fallback-2",name:"Marcus Bell",email:"ops@trdrhub.com",role:"admin",status:"invited",invitedAt:zN,mfaEnabled:!1,tenants:["global"]},{id:"admin-fallback-3",name:"Nina Alvarez",email:"security@trdrhub.com",role:"viewer",status:"disabled",invitedAt:zN,mfaEnabled:!0,tenants:["emea"]}];function BWe(){const{toast:t}=et(),[s,a]=zs(),[r,n]=m.useState(()=>Math.max(1,Number(s.get("usersPage")??"1"))),[i,l]=m.useState(s.get("usersSearch")??""),[o,d]=m.useState(s.get("usersRole")??"all"),[c,u]=m.useState([]),[h,x]=m.useState(0),[g,j]=m.useState([]),[y,b]=m.useState(!0),[N,C]=m.useState(null),_=Hi("security-users"),[A,k]=m.useState(null),[E,D]=m.useState(!1),[R,O]=m.useState(""),[P,T]=m.useState("viewer"),B=Math.max(1,Math.ceil(h/hA)),G=m.useCallback(Y=>{const te=new URLSearchParams(s);Object.entries(Y).forEach(([ne,ae])=>{ae?te.set(ne,ae):te.delete(ne)}),te.toString()!==s.toString()&&a(te,{replace:!0})},[s,a]),q=m.useCallback(()=>{b(!0),y0.listUsers({page:r,pageSize:hA,search:i||void 0,role:o}).then(Y=>{k(null),u(Y.items),x(Y.total)}).catch(Y=>{console.error("Failed to load users",Y),k("Unable to load administrators. Showing cached mock data."),u(SU),x(SU.length)}).finally(()=>b(!1))},[r,i,o]);m.useEffect(()=>{y0.listRoles().then(j).catch(Y=>{console.error("Failed to load roles",Y),j(MWe)})},[]),m.useEffect(()=>{G({usersPage:r===1?null:String(r),usersSearch:i||null,usersRole:o!=="all"?o:null}),q()},[r,i,o,q,G]);const z=async()=>{const Y=R.trim();if(!Y){t({title:"Email required",variant:"destructive"});return}C("invite");const te=await y0.inviteUser({email:Y,role:P});C(null),te.success?(t({title:"Invitation sent",description:Y}),O(""),D(!1),q(),await _("invite_user",{metadata:{email:Y,role:P}})):t({title:"Invite failed",description:te.message,variant:"destructive"})},H=async Y=>{C(Y);const te=await y0.disableUser(Y);C(null),t({title:te.success?"User disabled":"Disable failed",description:te.message,variant:te.success?"default":"destructive"}),te.success&&(await _("disable_user",{entityId:Y}),q())},le=async(Y,te)=>{C(Y);const ne=await y0.updateUserRole(Y,te);C(null),t({title:ne.success?"Role updated":"Update failed",description:ne.success?ne.data?.email:ne.message,variant:ne.success?"default":"destructive"}),ne.success&&(await _("update_user_role",{entityId:Y,metadata:{role:te}}),q())};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"User administration",description:"Invite administrators, manage access and enforce least privilege.",actions:e.jsxs(wt,{open:E,onOpenChange:D,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"gap-2",children:[e.jsx(sh,{className:"h-4 w-4"})," Invite user"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Invite new administrator"}),e.jsx(_t,{children:"Send an email invite with role assignment."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",htmlFor:"invite-email",children:"Email"}),e.jsx(oe,{id:"invite-email",placeholder:"admin@company.com",value:R,onChange:Y=>O(Y.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Role"}),e.jsxs(Te,{value:P,onValueChange:Y=>T(Y),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select role"})}),e.jsx(De,{children:g.map(Y=>e.jsx(K,{value:Y.id,children:e.jsxs("div",{className:"flex flex-col text-left",children:[e.jsx("span",{className:"text-sm font-medium",children:Y.name}),e.jsx("span",{className:"text-xs text-muted-foreground",children:Y.description})]})},Y.id))})]})]})]}),e.jsx(ms,{children:e.jsx(M,{onClick:z,disabled:N==="invite",children:"Send invite"})})]})]}),children:e.jsx(nc,{searchPlaceholder:"Search by name or email",searchValue:i,onSearchChange:Y=>{l(Y),n(1)},filterGroups:[{label:"Role",value:o,options:[{label:"All roles",value:"all"},...g.map(Y=>({label:Y.name,value:Y.id}))],onChange:Y=>{d(Y||"all"),n(1)},allowClear:!0}]})}),A&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:A}),e.jsx(_i,{columns:[{key:"name",header:"User",render:Y=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex h-9 w-9 items-center justify-center rounded-full bg-primary/10 text-sm font-semibold text-primary",children:(Y.name??Y.email).charAt(0).toUpperCase()}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:Y.name??"â€”"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Y.email})]})]})},{key:"role",header:"Role",render:Y=>e.jsxs(Te,{value:Y.role,onValueChange:te=>le(Y.id,te),disabled:N===Y.id,children:[e.jsx(Pe,{className:"h-9 w-[170px]",children:e.jsx(Fe,{})}),e.jsx(De,{children:g.map(te=>e.jsx(K,{value:te.id,disabled:te.editable===!1,children:te.name},te.id))})]})},{key:"status",header:"Status",render:Y=>e.jsx(Q,{variant:Y.status==="active"?"default":Y.status==="invited"?"secondary":"outline",children:Y.status})},{key:"lastActiveAt",header:"Last active",render:Y=>e.jsx("span",{className:"text-sm text-muted-foreground",children:Y.lastActiveAt?new Date(Y.lastActiveAt).toLocaleString():"â€”"})},{key:"tenants",header:"Tenants",render:Y=>e.jsx("div",{className:"flex flex-wrap gap-1",children:Y.tenants.map(te=>e.jsx(Q,{variant:"outline",className:"text-[10px]",children:te},te))})},{key:"actions",header:"Actions",align:"right",render:Y=>e.jsx("div",{className:"flex items-center justify-end gap-2",children:e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1 text-rose-600",disabled:Y.status!=="active"||N===Y.id,onClick:()=>H(Y.id),children:[e.jsx(xV,{className:"h-4 w-4"})," Disable"]})})}],data:c,loading:y,emptyState:e.jsx(Wr,{title:"No users",description:"Try adjusting the role filter."}),footer:h>hA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:r===1?"pointer-events-none opacity-50":void 0,onClick:Y=>{Y.preventDefault(),r>1&&n(r-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",r," of ",B]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:r>=B?"pointer-events-none opacity-50":void 0,onClick:Y=>{Y.preventDefault(),r<B&&n(r+1)}})})]})})}),y&&c.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((Y,te)=>e.jsx(pt,{className:"h-12 w-full"},te))}),e.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-4",children:[e.jsxs("h3",{className:"mb-2 flex items-center gap-2 text-sm font-semibold text-muted-foreground",children:[e.jsx(Ot,{className:"h-4 w-4"})," Policy tip"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enforce multi-factor authentication and review inactive invites regularly. Promote temporary access using the invite flow rather than sharing credentials."})]})]})}const qN=Ra(),xA=10,$We=["read","write","ingest","webhooks"],N0=new Date().toISOString(),kU=[{id:"api-fallback-1",name:"Production API",status:"active",createdAt:N0,lastUsedAt:N0,scopes:["read","write"],environment:"production"},{id:"api-fallback-2",name:"Webhook Signer",status:"rotating",createdAt:N0,scopes:["webhooks"],environment:"staging"},{id:"api-fallback-3",name:"Sandbox Integration",status:"revoked",createdAt:N0,expiresAt:N0,scopes:["ingest"],environment:"development"}];function UWe(){const{toast:t}=et(),[s,a]=zs(),r=Hi("security-access"),[n,i]=m.useState(()=>Math.max(1,Number(s.get("keysPage")??"1"))),[l,o]=m.useState(s.get("keysEnv")??"all"),[d,c]=m.useState([]),[u,h]=m.useState(0),[x,g]=m.useState(!0),[j,y]=m.useState(null),[b,N]=m.useState(null),[C,_]=m.useState(!1),[A,k]=m.useState(""),[E,D]=m.useState("production"),[R,O]=m.useState(["read"]),[P,T]=m.useState(null),B=Math.max(1,Math.ceil(u/xA)),G=m.useCallback(ae=>{const re=new URLSearchParams(s);Object.entries(ae).forEach(([xe,ye])=>{ye?re.set(xe,ye):re.delete(xe)}),re.toString()!==s.toString()&&a(re,{replace:!0})},[s,a]),q=m.useCallback(()=>{g(!0),qN.listApiKeys({page:n,pageSize:xA,environment:l==="all"?void 0:l}).then(ae=>{N(null),c(ae.items),h(ae.total)}).catch(ae=>{console.error("Failed to load api keys",ae),N("Unable to load API keys. Showing cached mock data."),c(kU),h(kU.length)}).finally(()=>g(!1))},[n,l]);m.useEffect(()=>{G({keysPage:n===1?null:String(n),keysEnv:l==="all"?null:l}),q()},[n,l,q,G]);const z=async()=>{if(!A.trim()){t({title:"Name required",variant:"destructive"});return}y("create");const ae=await qN.createApiKey({name:A.trim(),environment:E,scopes:R});y(null),ae.success&&ae.data?(T(ae.data.token),t({title:"API key generated"}),k(""),O(["read"]),q(),await r("create_api_key",{metadata:{name:A.trim(),environment:E,scopes:R}})):t({title:"Generation failed",description:ae.message,variant:"destructive"})},H=async ae=>{y(ae);const re=await qN.rotateApiKey(ae);y(null),re.success&&re.data?(T(re.data.token),t({title:"API key rotated",description:"Copy the new token immediately."}),q(),await r("rotate_api_key",{entityId:ae})):t({title:"Rotation failed",description:re.message,variant:"destructive"})},le=async ae=>{y(ae);const re=await qN.revokeApiKey(ae);y(null),t({title:re.success?"API key revoked":"Revoke failed",description:re.message,variant:re.success?"default":"destructive"}),re.success&&(await r("revoke_api_key",{entityId:ae}),q())},Y=async ae=>{ae&&(await navigator.clipboard.writeText(ae),t({title:"Copied to clipboard"}))},te=ae=>{O(re=>re.includes(ae)?re.filter(xe=>xe!==ae):[...re,ae])},ne=[{label:"All environments",value:"all"},{label:"Production",value:"production"},{label:"Staging",value:"staging"},{label:"Development",value:"development"}];return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"API credential management",description:"Issue, rotate and revoke tokens that integrate with LCopilot.",actions:e.jsxs(wt,{open:C,onOpenChange:ae=>{_(ae),T(null)},children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"gap-2",children:[e.jsx(ni,{className:"h-4 w-4"})," Generate key"]})}),e.jsxs(yt,{className:"max-w-lg",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create new API key"}),e.jsx(_t,{children:"Token is shown once. Store it securely after generation."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Name"}),e.jsx(oe,{value:A,onChange:ae=>k(ae.target.value),placeholder:"Partner integration"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Environment"}),e.jsxs(Te,{value:E,onValueChange:ae=>D(ae),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"production",children:"Production"}),e.jsx(K,{value:"staging",children:"Staging"}),e.jsx(K,{value:"development",children:"Development"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Scopes"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:$We.map(ae=>e.jsx(M,{type:"button",variant:R.includes(ae)?"default":"outline",size:"sm",onClick:()=>te(ae),children:ae},ae))})]}),P&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"New token"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{value:P,readOnly:!0}),e.jsx(M,{type:"button",variant:"outline",size:"icon",onClick:()=>Y(P),children:e.jsx(qa,{className:"h-4 w-4"})})]})]})]}),e.jsx(ms,{children:e.jsx(M,{onClick:z,disabled:j==="create",children:"Generate key"})})]})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs(Te,{value:l,onValueChange:ae=>{o(ae),i(1)},children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{})}),e.jsx(De,{children:ne.map(ae=>e.jsx(K,{value:ae.value,children:ae.label},ae.value))})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:q,disabled:x,className:"gap-2",children:[e.jsx(Lt,{className:x?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]})]}),b&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:b}),e.jsx(_i,{columns:[{key:"name",header:"Key",render:ae=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:ae.name}),e.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:ae.hashedKey??"Stored securely"})]})},{key:"environment",header:"Environment",render:ae=>e.jsx(Q,{variant:"outline",children:ae.environment})},{key:"scopes",header:"Scopes",render:ae=>e.jsx("div",{className:"flex flex-wrap gap-1",children:ae.scopes.map(re=>e.jsx(Q,{variant:"secondary",className:"text-[10px]",children:re},re))})},{key:"createdAt",header:"Issued",render:ae=>e.jsx("span",{className:"text-xs text-muted-foreground",children:ae.createdAt?new Date(ae.createdAt).toLocaleString():"â€”"})},{key:"lastUsedAt",header:"Last used",render:ae=>e.jsx("span",{className:"text-xs text-muted-foreground",children:ae.lastUsedAt?new Date(ae.lastUsedAt).toLocaleString():"Never"})},{key:"status",header:"Status",render:ae=>e.jsx(Q,{variant:ae.status==="active"?"default":ae.status==="rotating"?"secondary":"outline",children:ae.status})},{key:"actions",header:"Actions",align:"right",render:ae=>e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>H(ae.id),disabled:j===ae.id,className:"gap-1",children:[e.jsx(iV,{className:"h-4 w-4"})," Rotate"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1 text-rose-600",onClick:()=>le(ae.id),disabled:j===ae.id,children:[e.jsx(_ue,{className:"h-4 w-4"})," Revoke"]})]})}],data:d,loading:x,emptyState:e.jsx(Wr,{title:"No API keys",description:"Generate a key to integrate external systems."}),footer:u>xA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:n===1?"pointer-events-none opacity-50":void 0,onClick:ae=>{ae.preventDefault(),n>1&&i(n-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",B]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:n>=B?"pointer-events-none opacity-50":void 0,onClick:ae=>{ae.preventDefault(),n<B&&i(n+1)}})})]})})}),x&&d.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:5}).map((ae,re)=>e.jsx(pt,{className:"h-12 w-full"},re))})]})}const EU=Ra(),pA=12,zWe=[{label:"All risk levels",value:"all"},{label:"Low",value:"low"},{label:"Medium",value:"medium"},{label:"High",value:"high"}],vf=new Date().toISOString(),AU=[{id:"session-fallback-1",userId:"admin-fallback-1",createdAt:vf,lastSeenAt:vf,ipAddress:"172.16.0.12",location:"New York, USA",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 14_0)",device:"MacBook Pro",platform:"macOS",riskLevel:"low"},{id:"session-fallback-2",userId:"admin-fallback-2",createdAt:vf,lastSeenAt:vf,ipAddress:"172.16.4.54",location:"London, UK",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64)",device:"Windows Desktop",platform:"windows",riskLevel:"medium"},{id:"session-fallback-3",userId:"admin-fallback-3",createdAt:vf,lastSeenAt:vf,ipAddress:"172.16.12.89",location:"Singapore",userAgent:"Mozilla/5.0 (iPad; CPU OS 17_1 like Mac OS X)",device:"iPad",platform:"ios",riskLevel:"high"}];function PU(t){const s=Date.now()-new Date(t).getTime();if(s<6e4)return"just now";const a=Math.round(s/6e4);if(a<60)return`${a}m ago`;const r=Math.round(a/60);return r<24?`${r}h ago`:`${Math.round(r/24)}d ago`}function qWe(){const{toast:t}=et(),[s,a]=zs(),r=Hi("security-sessions"),[n,i]=m.useState(()=>Math.max(1,Number(s.get("sessionsPage")??"1"))),[l,o]=m.useState(s.get("sessionsRisk")??"all"),[d,c]=m.useState([]),[u,h]=m.useState(0),[x,g]=m.useState(!0),[j,y]=m.useState(null),[b,N]=m.useState(null),C=Math.max(1,Math.ceil(u/pA)),_=m.useCallback(()=>{g(!0),EU.listSessions({page:n,pageSize:pA,risk:l==="all"?void 0:l}).then(E=>{N(null),c(E.items),h(E.total)}).catch(E=>{console.error("Failed to load sessions",E),N("Unable to load sessions. Showing cached mock data."),c(AU),h(AU.length)}).finally(()=>g(!1))},[n,l]),A=m.useCallback(()=>{const E=new URLSearchParams(s);n===1?E.delete("sessionsPage"):E.set("sessionsPage",String(n)),l==="all"?E.delete("sessionsRisk"):E.set("sessionsRisk",l),E.toString()!==s.toString()&&a(E,{replace:!0})},[n,l,s,a]);m.useEffect(()=>{A(),_()},[A,_]);const k=async E=>{y(E);const D=await EU.revokeSession(E);y(null),t({title:D.success?"Session revoked":"Revoke failed",description:D.message,variant:D.success?"default":"destructive"}),D.success&&(await r("revoke_session",{entityId:E}),_())};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Session security",description:"Terminate stale sessions and monitor suspicious access across the platform.",children:e.jsx(nc,{filterGroups:[{label:"Risk",value:l,options:zWe,onChange:E=>{o(E||"all"),i(1)},allowClear:!0}],endAdornment:e.jsxs(M,{size:"sm",variant:"outline",onClick:_,disabled:x,className:"gap-2",children:[e.jsx(sj,{className:x?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]})})}),b&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:b}),e.jsx(_i,{columns:[{key:"userId",header:"User",render:E=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:E.userId}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Session ",E.id]})]})},{key:"device",header:"Device",render:E=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(lV,{className:"h-3.5 w-3.5"}),e.jsxs("span",{children:[E.device," â€¢ ",E.platform]})]})},{key:"location",header:"Location",render:E=>e.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[e.jsx(ha,{className:"h-3.5 w-3.5"}),e.jsx("span",{children:E.location??"Unknown"})]})},{key:"createdAt",header:"Started",render:E=>e.jsx("span",{className:"text-xs text-muted-foreground",children:PU(E.createdAt)})},{key:"lastSeenAt",header:"Last seen",render:E=>e.jsx("span",{className:"text-xs text-muted-foreground",children:PU(E.lastSeenAt)})},{key:"riskLevel",header:"Risk",render:E=>e.jsx(Q,{variant:E.riskLevel==="high"?"destructive":E.riskLevel==="medium"?"secondary":"outline",children:E.riskLevel})},{key:"actions",header:"Actions",align:"right",render:E=>e.jsx(M,{variant:"outline",size:"sm",className:"gap-1 text-rose-600",onClick:()=>k(E.id),disabled:j===E.id,children:"Terminate"})}],data:d,loading:x,emptyState:e.jsx(Wr,{title:"No active sessions",description:"All sessions cleared or filtered out."}),footer:u>pA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:n===1?"pointer-events-none opacity-50":void 0,onClick:E=>{E.preventDefault(),n>1&&i(n-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",C]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:n>=C?"pointer-events-none opacity-50":void 0,onClick:E=>{E.preventDefault(),n<C&&i(n+1)}})})]})})}),x&&d.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((E,D)=>e.jsx(pt,{className:"h-10 w-full"},D))})]})}function gR(t){return document.documentElement.classList.contains("dark")?{gridColor:"hsl(220 13% 18%)",axisColor:"hsl(220 13% 18%)",tickColor:"hsl(220 9% 68%)",colors:["hsl(190 100% 50%)","hsl(142 76% 42%)","hsl(38 92% 55%)","hsl(210 100% 60%)","hsl(0 72% 55%)","hsl(280 65% 60%)","hsl(160 60% 50%)"],textColor:"hsl(220 5% 92%)",mutedTextColor:"hsl(220 9% 68%)",tooltipBackground:"hsl(220 13% 11%)",tooltipBorder:"hsl(220 13% 18%)",tooltipText:"hsl(220 5% 92%)",background:"hsl(220 13% 6%)"}:{gridColor:"hsl(220 13% 91%)",axisColor:"hsl(220 13% 91%)",tickColor:"hsl(220 8.9% 46.1%)",colors:["hsl(158 64% 25%)","hsl(142 76% 36%)","hsl(38 92% 50%)","hsl(221 83% 53%)","hsl(0 72% 51%)","hsl(280 65% 50%)","hsl(160 60% 45%)"],textColor:"hsl(220 13% 18%)",mutedTextColor:"hsl(220 8.9% 46.1%)",tooltipBackground:"hsl(0 0% 100%)",tooltipBorder:"hsl(220 13% 91%)",tooltipText:"hsl(220 13% 18%)",background:"hsl(0 0% 100%)"}}const Pj={top:12,right:12,bottom:24,left:12};function If(t){return{tick:{fill:t.tickColor,fontSize:11},axisLine:{stroke:t.axisColor,strokeWidth:1},tickLine:{stroke:t.axisColor}}}function d1(t){return{stroke:t.gridColor,strokeWidth:1,strokeDasharray:"3 3",opacity:.5}}function u1(t){return{contentStyle:{backgroundColor:t.tooltipBackground,border:`1px solid ${t.tooltipBorder}`,borderRadius:"6px",padding:"8px 12px",fontSize:"12px",color:t.tooltipText,boxShadow:"0 4px 6px -1px rgba(0, 0, 0, 0.1)"},itemStyle:{color:t.tooltipText,fontSize:"11px",padding:"2px 0"},labelStyle:{color:t.mutedTextColor,fontSize:"11px",fontWeight:600,marginBottom:"4px"}}}const VWe=[{label:"7d",value:"7d"},{label:"30d",value:"30d"},{label:"90d",value:"90d"}],DU="30d",WWe=Ra();function Pm(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(t/100)}function ru(t){const s=t/100;return s>=1e6?`$${(s/1e6).toFixed(1)}M`:s>=1e3?`$${(s/1e3).toFixed(1)}K`:Pm(t)}function VN({label:t,value:s,secondary:a,icon:r,onClick:n,emphasis:i}){return e.jsxs("button",{type:"button",onClick:n,className:Le("group h-full rounded-xl border border-border/60 bg-card p-6 text-left shadow-sm transition hover:border-primary/60 hover:shadow-lg focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary",n&&"cursor-pointer"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-sm font-medium text-muted-foreground",children:t}),e.jsxs("div",{className:"mt-2 flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-foreground",children:s}),a&&e.jsx(Q,{variant:"secondary",className:"text-xs",children:a})]})]}),e.jsx("div",{className:"rounded-lg bg-muted/60 p-3 text-muted-foreground group-hover:text-primary",children:e.jsx(r,{className:"h-5 w-5"})})]}),i&&e.jsx(Q,{className:"mt-4",variant:"secondary",children:"Key metric"})]})}function HWe(){const t=zt(),[s,a]=zs(),r=s.get("range")??DU,n=s.get("currency")??"USD",i=s.get("environment")??"all",[l,o]=m.useState(null),[d,c]=m.useState(!0),[u,h]=m.useState(null),x=m.useMemo(()=>gR(),[]);m.useEffect(()=>{let _=!0;return c(!0),WWe.getBillingSummary(r,n).then(A=>{_&&(o(A),h(null))}).catch(()=>{_&&h("Unable to load billing summary")}).finally(()=>{_&&c(!1)}),()=>{_=!1}},[r,n]);const g=_=>{const A=new URLSearchParams(s);_===DU?A.delete("range"):A.set("range",_),a(A,{replace:!0})},j=_=>{const A=new URLSearchParams(s);_==="USD"?A.delete("currency"):A.set("currency",_),a(A,{replace:!0})},y=_=>{const A=new URLSearchParams(s);_==="all"?A.delete("environment"):A.set("environment",_),a(A,{replace:!0})},b=_=>{const A=new URLSearchParams;A.set("section",_),t({pathname:"/admin",search:A.toString()})},N=m.useMemo(()=>{const _=r==="7d"?7:r==="30d"?30:90;return Array.from({length:_}).map((A,k)=>{const E=new Date;return E.setDate(E.getDate()-(_-k-1)),{date:E.toLocaleDateString("en-US",{month:"short",day:"numeric"}),revenue:l?Math.round(l.monthToDateCents/_)+Math.floor(Math.random()*5e3):0}})},[r,l]),C=m.useMemo(()=>l?[{category:"New",value:Math.round(l.mrrCents*.15)},{category:"Expansion",value:Math.round(l.mrrCents*.05)},{category:"Contraction",value:-Math.round(l.mrrCents*.02)},{category:"Churn",value:-Math.round(l.mrrCents*.03)}]:[],[l]);return d?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Billing Overview",description:"Executive KPIs and revenue analytics"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:Array.from({length:4}).map((_,A)=>e.jsxs($,{children:[e.jsx(X,{children:e.jsx(pt,{className:"h-4 w-24"})}),e.jsx(U,{children:e.jsx(pt,{className:"h-8 w-32"})})]},A))})]}):u||!l?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Billing Overview",description:"Executive KPIs and revenue analytics"}),e.jsx($,{className:"border-destructive/40 bg-destructive/10",children:e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2 text-destructive",children:[e.jsx(ks,{className:"h-5 w-5"}),u||"Unable to load billing summary"]}),e.jsx(ue,{children:"Try refreshing or check the billing service."})]})})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(va,{title:"Billing Overview",description:"Executive KPIs and revenue analytics",actions:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Refresh"]}),children:[e.jsxs(Te,{value:r,onValueChange:g,children:[e.jsx(Pe,{className:"w-[120px]",children:e.jsx(Fe,{})}),e.jsx(De,{children:VWe.map(_=>e.jsx(K,{value:_.value,children:_.label},_.value))})]}),e.jsxs(Te,{value:n,onValueChange:j,children:[e.jsx(Pe,{className:"w-[100px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"GBP",children:"GBP"})]})]}),e.jsxs(Te,{value:i,onValueChange:y,children:[e.jsx(Pe,{className:"w-[120px]",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All"}),e.jsx(K,{value:"live",children:"Live"}),e.jsx(K,{value:"sandbox",children:"Sandbox"})]})]})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-4",children:[e.jsx(VN,{label:"MRR",value:ru(l.mrrCents),secondary:Pm(l.mrrCents),icon:Na,onClick:()=>b("billing-plans"),emphasis:!0}),e.jsx(VN,{label:"ARR",value:ru(l.arrCents),secondary:Pm(l.arrCents),icon:Vt,onClick:()=>b("billing-plans")}),e.jsx(VN,{label:"Month-to-Date",value:ru(l.monthToDateCents),secondary:Pm(l.monthToDateCents),icon:Be,onClick:()=>b("billing-invoices-payments")}),e.jsx(VN,{label:"Net Revenue",value:ru(l.netRevenueCents),secondary:Pm(l.netRevenueCents),icon:Na,onClick:()=>b("billing-invoices-payments")})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Refunds"}),e.jsx(ue,{children:"Total refunds this month"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-destructive",children:ru(l.refundsCents)}),e.jsx(Q,{variant:"destructive",className:"text-xs",children:Pm(l.refundsCents)})]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"mt-4 gap-2",onClick:()=>{const _=new URLSearchParams;_.set("section","billing-adjustments"),_.set("filter","refunds"),t({pathname:"/admin",search:_.toString()})},children:["View refunds",e.jsx(Zm,{className:"h-3 w-3"})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Disputes Open"}),e.jsx(ue,{children:"Active disputes requiring attention"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"flex items-baseline gap-2",children:[e.jsx("span",{className:"text-2xl font-semibold text-foreground",children:l.disputesOpen}),e.jsx(Q,{variant:"outline",className:"text-xs",children:l.disputesOpen===0?"None":"Action required"})]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"mt-4 gap-2",onClick:()=>{const _=new URLSearchParams;_.set("section","billing-disputes"),_.set("status","open,under_review"),t({pathname:"/admin",search:_.toString()})},children:["View disputes",e.jsx(Zm,{className:"h-3 w-3"})]})]})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Revenue Over Time"}),e.jsx(ue,{children:"Daily revenue for the selected period"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:300,children:e.jsxs($F,{data:N,margin:Pj,children:[e.jsx(wi,{strokeDasharray:"3 3",...d1(x)}),e.jsx(Gn,{dataKey:"date",...If(x)}),e.jsx(Kn,{...If(x),tickFormatter:_=>ru(_)}),e.jsx(kn,{...u1(x),formatter:_=>Pm(_)}),e.jsx(Sb,{type:"monotone",dataKey:"revenue",stroke:x.colors[0],strokeWidth:2,dot:{r:3},name:"Revenue"})]})})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"MRR Waterfall"}),e.jsx(ue,{children:"New, expansion, contraction, and churn"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:300,children:e.jsxs(mh,{data:C,margin:Pj,children:[e.jsx(wi,{strokeDasharray:"3 3",...d1(x)}),e.jsx(Gn,{dataKey:"category",...If(x)}),e.jsx(Kn,{...If(x),tickFormatter:_=>ru(_)}),e.jsx(kn,{...u1(x),formatter:_=>Pm(_)}),e.jsx(Fc,{dataKey:"value",fill:x.colors[0],name:"MRR Change",radius:[4,4,0,0]})]})})})]})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Top Customers (MTD)"}),e.jsx(ue,{children:"By revenue this month"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:["Bank of Asia","GlobalTrade Inc.","LatAm Exports"].map((_,A)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:_}),e.jsx("span",{className:"font-medium",children:ru((A+1)*5e4)})]},A))})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Overdue Invoices"}),e.jsx(ue,{children:"Requiring follow-up"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:l.invoicesThisMonth>0?e.jsxs("div",{className:"text-sm text-muted-foreground",children:[l.invoicesThisMonth," invoices this month"]}):e.jsx("div",{className:"text-sm text-muted-foreground",children:"No overdue invoices"})})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base",children:"Recent Payouts"}),e.jsx(ue,{children:"Last 7 days"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:["Payout #1234","Payout #1233","Payout #1232"].map((_,A)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:_}),e.jsx("span",{className:"font-medium",children:ru((A+1)*3e4)})]},A))})})]})]})]})}class GWe{name="stripe";async listInvoices(s){return this.getMockInvoices(s)}async listPayments(s){return this.getMockPayments(s)}async listRefunds(s){return this.getMockRefunds(s)}async listPayouts(s){return this.getMockPayouts(s)}async listSubscriptions(s){return this.getMockSubscriptions(s)}getMockInvoices(s){const a=new Date;return{items:Array.from({length:10}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*7),{id:`inv_stripe_${i+1}`,provider:"stripe",externalId:`in_${i+1}`,invoiceNumber:`INV-${String(i+1).padStart(6,"0")}`,customerId:`cus_${i+1}`,customerName:`Customer ${i+1}`,customerEmail:`customer${i+1}@example.com`,amount:199900,currency:"USD",status:i%4===0?"paid":i%4===1?"open":i%4===2?"void":"uncollectible",issuedAt:l.toISOString(),dueAt:new Date(l.getTime()+720*60*60*1e3).toISOString(),paidAt:i%4===0?new Date(l.getTime()+2880*60*1e3).toISOString():null,periodStart:l.toISOString(),periodEnd:new Date(l.getTime()+720*60*60*1e3).toISOString(),lineItems:[{id:`li_${i+1}`,description:"LCopilot Professional Plan",quantity:1,unitPrice:199900,amount:199900,taxRate:0,taxAmount:0}],taxAmount:0,totalAmount:199900,metadata:{},createdAt:l.toISOString(),updatedAt:l.toISOString()}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.issuedAt<s.from||s?.to&&n.issuedAt>s.to)),hasMore:!1}}getMockPayments(s){const a=new Date;return{items:Array.from({length:15}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*3),{id:`pay_stripe_${i+1}`,provider:"stripe",externalId:`pi_${i+1}`,invoiceId:`inv_stripe_${Math.floor(i/2)+1}`,customerId:`cus_${i+1}`,customerName:`Customer ${i+1}`,amount:199900,currency:"USD",status:i%5===0?"succeeded":i%5===1?"pending":i%5===2?"failed":"refunded",paymentMethod:"card",paymentMethodDetails:{brand:"visa",last4:"4242"},processedAt:i%5===0?l.toISOString():null,createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}getMockRefunds(s){const a=new Date;return{items:Array.from({length:5}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*10),{id:`ref_stripe_${i+1}`,provider:"stripe",externalId:`re_${i+1}`,paymentId:`pay_stripe_${i+1}`,invoiceId:`inv_stripe_${i+1}`,amount:5e4,currency:"USD",status:i%2===0?"succeeded":"pending",reason:"Customer request",processedAt:i%2===0?l.toISOString():null,createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}getMockPayouts(s){const a=new Date;return{items:Array.from({length:8}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*7),{id:`po_stripe_${i+1}`,provider:"stripe",externalId:`po_${i+1}`,amount:5e6,currency:"USD",status:i%3===0?"paid":i%3===1?"pending":"failed",arrivalDate:i%3===0?new Date(l.getTime()+2880*60*1e3).toISOString():null,description:"Weekly payout",createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}getMockSubscriptions(s){const a=new Date;return{items:Array.from({length:20}).map((n,i)=>{const l=new Date(a);l.setMonth(l.getMonth()-i);const o=new Date(l);return o.setMonth(o.getMonth()+1),{id:`sub_stripe_${i+1}`,provider:"stripe",externalId:`sub_${i+1}`,customerId:`cus_${i+1}`,status:i%5===0?"active":i%5===1?"canceled":i%5===2?"past_due":"trialing",currentPeriodStart:l.toISOString(),currentPeriodEnd:o.toISOString(),cancelAtPeriodEnd:i%3===0,canceledAt:i%5===1?new Date(l.getTime()+14400*60*1e3).toISOString():null,planId:`plan_${i%3+1}`,planName:["Starter","Professional","Enterprise"][i%3],pricePerPeriod:[199900,499900,999900][i%3],currency:"USD",metadata:{},createdAt:l.toISOString(),updatedAt:l.toISOString()}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.currentPeriodStart<s.from||s?.to&&n.currentPeriodStart>s.to)),hasMore:!1}}}class KWe{name="sslcommerz";async listInvoices(s){return this.getMockInvoices(s)}async listPayments(s){return this.getMockPayments(s)}async listRefunds(s){return this.getMockRefunds(s)}async listPayouts(s){return this.getMockPayouts(s)}getMockInvoices(s){const a=new Date;return{items:Array.from({length:8}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*7),{id:`inv_ssl_${i+1}`,provider:"sslcommerz",externalId:`tran_${i+1}`,invoiceNumber:`SSL-INV-${String(i+1).padStart(6,"0")}`,customerId:`cust_${i+1}`,customerName:`Customer ${i+1}`,customerEmail:`customer${i+1}@example.com`,amount:15e5,currency:"BDT",status:i%4===0?"paid":i%4===1?"open":i%4===2?"void":"uncollectible",issuedAt:l.toISOString(),dueAt:new Date(l.getTime()+720*60*60*1e3).toISOString(),paidAt:i%4===0?new Date(l.getTime()+1440*60*1e3).toISOString():null,periodStart:l.toISOString(),periodEnd:new Date(l.getTime()+720*60*60*1e3).toISOString(),lineItems:[{id:`li_ssl_${i+1}`,description:"LCopilot Starter Plan",quantity:1,unitPrice:15e5,amount:15e5,taxRate:0,taxAmount:0}],taxAmount:0,totalAmount:15e5,metadata:{},createdAt:l.toISOString(),updatedAt:l.toISOString()}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.issuedAt<s.from||s?.to&&n.issuedAt>s.to)),hasMore:!1}}getMockPayments(s){const a=new Date;return{items:Array.from({length:12}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*2),{id:`pay_ssl_${i+1}`,provider:"sslcommerz",externalId:`tran_${i+1}`,invoiceId:`inv_ssl_${Math.floor(i/2)+1}`,customerId:`cust_${i+1}`,customerName:`Customer ${i+1}`,amount:15e5,currency:"BDT",status:i%4===0?"succeeded":i%4===1?"pending":i%4===2?"failed":"canceled",paymentMethod:["card","mobile_banking","bank_transfer"][i%3],paymentMethodDetails:{},processedAt:i%4===0?l.toISOString():null,createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}getMockRefunds(s){const a=new Date;return{items:Array.from({length:3}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*15),{id:`ref_ssl_${i+1}`,provider:"sslcommerz",externalId:`ref_${i+1}`,paymentId:`pay_ssl_${i+1}`,invoiceId:`inv_ssl_${i+1}`,amount:3e5,currency:"BDT",status:i%2===0?"succeeded":"pending",reason:"Service issue",processedAt:i%2===0?l.toISOString():null,createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}getMockPayouts(s){const a=new Date;return{items:Array.from({length:4}).map((n,i)=>{const l=new Date(a);return l.setDate(l.getDate()-i*14),{id:`po_ssl_${i+1}`,provider:"sslcommerz",externalId:`payout_${i+1}`,amount:5e7,currency:"BDT",status:i%2===0?"paid":"pending",arrivalDate:i%2===0?new Date(l.getTime()+4320*60*1e3).toISOString():null,description:"Bi-weekly payout",createdAt:l.toISOString(),metadata:{}}}).filter(n=>!(s?.status&&!(Array.isArray(s.status)?s.status:[s.status]).includes(n.status)||s?.from&&n.createdAt<s.from||s?.to&&n.createdAt>s.to)),hasMore:!1}}}const TU={USD:1,EUR:.92,GBP:.79,BDT:.0091,INR:.012,SGD:.74};function dd(t,s,a){if(s===a)return t;const n=t*TU[s]/TU[a];return Math.round(n)}function Ii(t,s){const r=t/100;return new Intl.NumberFormat(YWe(s),{style:"currency",currency:s,minimumFractionDigits:2,maximumFractionDigits:2}).format(r)}function YWe(t){return{USD:"en-US",EUR:"de-DE",GBP:"en-GB",BDT:"en-BD",INR:"en-IN",SGD:"en-SG"}[t]||"en-US"}class ZWe{providers;reportingCurrency;enabledProviderNames;constructor(s){this.providers=s.providers,this.reportingCurrency=s.reportingCurrency,this.enabledProviderNames=new Set(s.enabledProviders||s.providers.map(a=>a.name))}getEnabledProviders(){return this.providers.filter(s=>this.enabledProviderNames.has(s.name))}async listInvoices(s){const a=this.getEnabledProviders(),r=await Promise.all(a.map(d=>d.listInvoices(s)));let n=[];for(const d of r)n=n.concat(d.items);const i=new Set,o=n.filter(d=>{const c=`${d.provider}:${d.externalId}`;return i.has(c)?!1:(i.add(c),!0)}).map(d=>d.currency===this.reportingCurrency?d:{...d,amount:dd(d.amount,d.currency,this.reportingCurrency),taxAmount:dd(d.taxAmount,d.currency,this.reportingCurrency),totalAmount:dd(d.totalAmount,d.currency,this.reportingCurrency),currency:this.reportingCurrency,lineItems:d.lineItems.map(c=>({...c,unitPrice:dd(c.unitPrice,d.currency,this.reportingCurrency),amount:dd(c.amount,d.currency,this.reportingCurrency),taxAmount:c.taxAmount?dd(c.taxAmount,d.currency,this.reportingCurrency):void 0}))});return o.sort((d,c)=>new Date(c.issuedAt).getTime()-new Date(d.issuedAt).getTime()),{items:o,hasMore:!1,total:o.length}}async listPayments(s){const a=this.getEnabledProviders(),r=await Promise.all(a.map(d=>d.listPayments(s)));let n=[];for(const d of r)n=n.concat(d.items);const i=new Set,o=n.filter(d=>{const c=`${d.provider}:${d.externalId}`;return i.has(c)?!1:(i.add(c),!0)}).map(d=>d.currency===this.reportingCurrency?d:{...d,amount:dd(d.amount,d.currency,this.reportingCurrency),currency:this.reportingCurrency});return o.sort((d,c)=>new Date(c.createdAt).getTime()-new Date(d.createdAt).getTime()),{items:o,hasMore:!1,total:o.length}}async listRefunds(s){const a=this.getEnabledProviders(),r=await Promise.all(a.map(d=>d.listRefunds(s)));let n=[];for(const d of r)n=n.concat(d.items);const i=new Set,o=n.filter(d=>{const c=`${d.provider}:${d.externalId}`;return i.has(c)?!1:(i.add(c),!0)}).map(d=>d.currency===this.reportingCurrency?d:{...d,amount:dd(d.amount,d.currency,this.reportingCurrency),currency:this.reportingCurrency});return o.sort((d,c)=>new Date(c.createdAt).getTime()-new Date(d.createdAt).getTime()),{items:o,hasMore:!1,total:o.length}}async listPayouts(s){const a=this.getEnabledProviders(),r=await Promise.all(a.map(d=>d.listPayouts(s)));let n=[];for(const d of r)n=n.concat(d.items);const i=new Set,o=n.filter(d=>{const c=`${d.provider}:${d.externalId}`;return i.has(c)?!1:(i.add(c),!0)}).map(d=>d.currency===this.reportingCurrency?d:{...d,amount:dd(d.amount,d.currency,this.reportingCurrency),currency:this.reportingCurrency});return o.sort((d,c)=>new Date(c.createdAt).getTime()-new Date(d.createdAt).getTime()),{items:o,hasMore:!1,total:o.length}}async listSubscriptions(s){const a=this.getEnabledProviders(),r=await Promise.all(a.filter(d=>d.listSubscriptions).map(d=>d.listSubscriptions(s)));let n=[];for(const d of r)n=n.concat(d.items);const i=new Set,o=n.filter(d=>{const c=`${d.provider}:${d.externalId}`;return i.has(c)?!1:(i.add(c),!0)}).map(d=>d.currency===this.reportingCurrency?d:{...d,pricePerPeriod:dd(d.pricePerPeriod,d.currency,this.reportingCurrency),currency:this.reportingCurrency});return{items:o,hasMore:!1,total:o.length}}}function IC(t="USD"){const s=[new GWe,new KWe],a=["stripe","sslcommerz"];return new ZWe({providers:s,reportingCurrency:t,enabledProviders:a})}const nu=20;function JWe(){const{toast:t}=et(),[s,a]=zs(),r=s.get("tab")||"invoices",n=Math.max(1,Number(s.get("page")??"1")),i=s.get("status")?.split(",").filter(Boolean)||[],l=s.get("currency")||"all",o=s.get("provider")?.split(",").filter(Boolean)||[],d=s.get("search")||"",[c,u]=m.useState([]),[h,x]=m.useState([]),[g,j]=m.useState(!0),[y,b]=m.useState(null),N=m.useMemo(()=>IC("USD"),[]);m.useEffect(()=>{let O=!0;return j(!0),b(null),(async()=>{try{const T=new Date,B=new Date(T.getTime()-2160*60*60*1e3).toISOString(),G=T.toISOString();if(r==="invoices"){const q=await N.listInvoices({from:B,to:G});if(!O)return;u(q.items)}else{const q=await N.listPayments({from:B,to:G});if(!O)return;x(q.items)}}catch(T){if(!O)return;console.error("Failed to load billing data",T),b("Unable to load billing data. Using mock data."),r==="invoices"?u([]):x([])}finally{O&&j(!1)}})(),()=>{O=!1}},[r,N]);const C=m.useMemo(()=>c.filter(O=>!(i.length&&!i.includes(O.status)||l!=="all"&&O.currency!==l||o.length&&!o.includes(O.provider)||d&&!O.invoiceNumber.toLowerCase().includes(d.toLowerCase())&&!O.customerName.toLowerCase().includes(d.toLowerCase()))),[c,i,l,o,d]),_=m.useMemo(()=>h.filter(O=>!(i.length&&!i.includes(O.status)||l!=="all"&&O.currency!==l||o.length&&!o.includes(O.provider)||d&&!O.id.toLowerCase().includes(d.toLowerCase())&&!O.customerName.toLowerCase().includes(d.toLowerCase()))),[h,i,l,o,d]),A=m.useMemo(()=>[{accessorKey:"invoiceNumber",header:"Invoice #",cell:({row:O})=>e.jsx("div",{className:"font-medium",children:O.original.invoiceNumber})},{accessorKey:"customerName",header:"Customer",cell:({row:O})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:O.original.customerName}),e.jsx("div",{className:"text-xs text-muted-foreground",children:O.original.customerEmail})]})},{accessorKey:"amount",header:"Amount",cell:({row:O})=>Ii(O.original.totalAmount,O.original.currency)},{accessorKey:"status",header:"Status",cell:({row:O})=>{const P=O.original.status,T={paid:"bg-green-100 text-green-800",open:"bg-yellow-100 text-yellow-800",void:"bg-gray-100 text-gray-800",uncollectible:"bg-red-100 text-red-800",draft:"bg-blue-100 text-blue-800"};return e.jsx(Q,{className:T[P]||"bg-gray-100 text-gray-800",children:P})}},{accessorKey:"provider",header:"Provider",cell:({row:O})=>e.jsx(Q,{variant:"outline",children:O.original.provider.toUpperCase()})},{accessorKey:"issuedAt",header:"Issued",cell:({row:O})=>new Date(O.original.issuedAt).toLocaleDateString()},{accessorKey:"paidAt",header:"Paid",cell:({row:O})=>O.original.paidAt?new Date(O.original.paidAt).toLocaleDateString():"-"}],[]),k=m.useMemo(()=>[{accessorKey:"id",header:"Payment ID",cell:({row:O})=>e.jsx("div",{className:"font-mono text-xs",children:O.original.id})},{accessorKey:"customerName",header:"Customer",cell:({row:O})=>e.jsx("div",{className:"font-medium",children:O.original.customerName})},{accessorKey:"amount",header:"Amount",cell:({row:O})=>Ii(O.original.amount,O.original.currency)},{accessorKey:"status",header:"Status",cell:({row:O})=>{const P=O.original.status,T={succeeded:"bg-green-100 text-green-800",pending:"bg-yellow-100 text-yellow-800",processing:"bg-blue-100 text-blue-800",failed:"bg-red-100 text-red-800",canceled:"bg-gray-100 text-gray-800",refunded:"bg-orange-100 text-orange-800"};return e.jsx(Q,{className:T[P]||"bg-gray-100 text-gray-800",children:P})}},{accessorKey:"paymentMethod",header:"Method",cell:({row:O})=>e.jsx("div",{className:"capitalize",children:O.original.paymentMethod})},{accessorKey:"provider",header:"Provider",cell:({row:O})=>e.jsx(Q,{variant:"outline",children:O.original.provider.toUpperCase()})},{accessorKey:"createdAt",header:"Date",cell:({row:O})=>new Date(O.original.createdAt).toLocaleDateString()}],[]),E=()=>{t({title:"Export started",description:"CSV export will be available shortly."})},D=O=>{const P=new URLSearchParams(s);P.set("tab",O),P.delete("page"),a(P,{replace:!0})},R=m.useCallback(O=>{const P=new URLSearchParams(s);Object.entries(O).forEach(([T,B])=>{!B||B==="all"?P.delete(T):P.set(T,B)}),P.toString()!==s.toString()&&a(P,{replace:!0})},[s,a]);return g?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Invoices & Payments"}),e.jsx(pt,{className:"h-96 w-full"})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(va,{title:"Invoices & Payments",description:"Unified view of invoices and payments across all billing providers",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:E,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),"Export CSV"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>window.location.reload(),className:"gap-2",children:[e.jsx(Lt,{className:"h-4 w-4"}),"Refresh"]})]}),children:[e.jsxs("div",{className:"flex gap-2 border-b",children:[e.jsxs("button",{type:"button",onClick:()=>D("invoices"),className:`px-4 py-2 text-sm font-medium border-b-2 transition ${r==="invoices"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:["Invoices (",C.length,")"]}),e.jsxs("button",{type:"button",onClick:()=>D("payments"),className:`px-4 py-2 text-sm font-medium border-b-2 transition ${r==="payments"?"border-primary text-primary":"border-transparent text-muted-foreground hover:text-foreground"}`,children:["Payments (",_.length,")"]})]}),e.jsx(nc,{searchPlaceholder:"Search by invoice number or customer",searchValue:d,onSearchChange:O=>{R({search:O||null})},filterGroups:[{label:"Status",value:i,options:r==="invoices"?[{label:"Paid",value:"paid"},{label:"Open",value:"open"},{label:"Void",value:"void"},{label:"Uncollectible",value:"uncollectible"}]:[{label:"Succeeded",value:"succeeded"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"},{label:"Refunded",value:"refunded"}],multi:!0,onChange:O=>{const P=Array.isArray(O)?O:O?[O]:[];R({status:P.length?P.join(","):null})}},{label:"Currency",value:l,options:[{label:"All",value:"all"},{label:"USD",value:"USD"},{label:"BDT",value:"BDT"}],onChange:O=>{R({currency:String(O||"all")})}},{label:"Provider",value:o,options:[{label:"Stripe",value:"stripe"},{label:"SSLCommerz",value:"sslcommerz"}],multi:!0,onChange:O=>{const P=Array.isArray(O)?O:O?[O]:[];R({provider:P.length?P.join(","):null})}}]})]}),y&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:y}),r==="invoices"?e.jsx(_i,{columns:A,data:C.slice((n-1)*nu,n*nu)}):e.jsx(_i,{columns:k,data:_.slice((n-1)*nu,n*nu)}),(C.length>nu||_.length>nu)&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Showing ",(n-1)*nu+1," to ",Math.min(n*nu,r==="invoices"?C.length:_.length)," of"," ",r==="invoices"?C.length:_.length]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",disabled:n===1,onClick:()=>R({page:String(n-1)}),children:"Previous"}),e.jsx(M,{variant:"outline",size:"sm",disabled:n*nu>=(r==="invoices"?C.length:_.length),onClick:()=>R({page:String(n+1)}),children:"Next"})]})]})]})}function QWe(t,s,a){const r=s?new Date(s):new Date(0),n=a?new Date(a):new Date,i=new Map;let l=0,o=0;for(const u of t){if(!u.periodStart||!u.periodEnd){if(u.status==="paid"&&u.paidAt){const y=u.paidAt.split("T")[0],b=i.get(y)||{date:y,recognizedAmount:0,deferredAmount:0,invoiceId:u.id,customerId:u.customerId};b.recognizedAmount+=u.totalAmount,l+=u.totalAmount,i.set(y,b)}continue}const h=new Date(u.periodStart),x=new Date(u.periodEnd),g=Math.max(1,Math.ceil((x.getTime()-h.getTime())/(1e3*60*60*24))),j=Math.round(u.totalAmount/g);for(let y=0;y<g;y++){const b=new Date(h);b.setDate(b.getDate()+y);const N=b.toISOString().split("T")[0];if(b<r||b>n)continue;const C=i.get(N)||{date:N,recognizedAmount:0,deferredAmount:0,invoiceId:u.id,customerId:u.customerId},_=u.status==="paid"&&u.paidAt,A=_?new Date(u.paidAt):null;_&&A&&b>=A?(C.recognizedAmount+=j,l+=j):(C.deferredAmount+=j,o+=j),i.set(N,C)}}const d=new Map;for(const[u,h]of i.entries()){const x=u.substring(0,7),g=d.get(x)||{recognized:0,deferred:0};g.recognized+=h.recognizedAmount,g.deferred+=h.deferredAmount,d.set(x,g)}const c=Array.from(d.entries()).map(([u,h])=>({month:u,recognized:h.recognized,deferred:h.deferred})).sort((u,h)=>u.month.localeCompare(h.month));return{totalRecognized:l,totalDeferred:o,dailyBreakdown:Array.from(i.values()).sort((u,h)=>u.date.localeCompare(h.date)),monthlyBreakdown:c}}function XWe(t,s){const a=new Date(s);let r=0;for(const n of t){if(!n.periodStart||!n.periodEnd||n.status==="void"||n.status==="uncollectible")continue;const i=new Date(n.periodStart),l=new Date(n.periodEnd);if(a<i){r+=n.totalAmount;continue}if(a>=l)continue;const o=Math.max(1,Math.ceil((l.getTime()-i.getTime())/(1e3*60*60*24))),d=Math.max(0,Math.ceil((a.getTime()-i.getTime())/(1e3*60*60*24))),c=o-d,u=Math.round(n.totalAmount*c/o);r+=u}return r}function eHe(t,s,a){const r=new Map;for(const n of t){if(n.status!=="paid"||!n.paidAt)continue;const i=tHe(n),l=r.get(i)||{jurisdiction:i,country:i.split("-")[0]||"UNKNOWN",region:i.includes("-")?i.split("-")[1]:void 0,taxCollected:0,taxRate:a.manualRates?.[i]||a.defaultRate||0,transactionCount:0,currency:n.currency};l.taxCollected+=n.taxAmount||0,l.transactionCount+=1,r.set(i,l)}for(const n of s){if(n.status!=="succeeded")continue;const i=sHe(n),l=r.get(i)||{jurisdiction:i,country:i.split("-")[0]||"UNKNOWN",region:i.includes("-")?i.split("-")[1]:void 0,taxCollected:0,taxRate:a.manualRates?.[i]||a.defaultRate||0,transactionCount:0,currency:n.currency},o=n.metadata?.tax_amount||0;o>0&&(l.taxCollected+=o,l.transactionCount+=1,r.set(i,l))}return Array.from(r.values()).sort((n,i)=>n.country!==i.country?n.country.localeCompare(i.country):(n.region||"").localeCompare(i.region||""))}function tHe(t,s){const a=t.metadata?.customer_country||"US",r=t.metadata?.customer_region;return r?`${a}-${r}`:a}function sHe(t,s){const a=t.metadata?.customer_country||"US",r=t.metadata?.customer_region;return r?`${a}-${r}`:a}const aHe={"US-CA":.0875,"US-NY":.08,"US-TX":.0625,GB:.2,BD:.15,IN:.18,SG:.09,US:0,EU:.2};function rHe(){return{stripeTaxEnabled:!1,manualRates:aHe,defaultRate:0}}let fA=null;function vR(t="USD"){return fA||(fA=IC(t)),fA}async function nHe(t,s){try{const r=vR(s||"USD"),n=new Date,i=n.toISOString();let l;switch(t){case"7d":l=new Date(n.getTime()-10080*60*1e3).toISOString();break;case"30d":l=new Date(n.getTime()-720*60*60*1e3).toISOString();break;case"90d":l=new Date(n.getTime()-2160*60*60*1e3).toISOString();break;default:l=new Date(n.getTime()-720*60*60*1e3).toISOString()}const[o,d,c,u]=await Promise.all([r.listInvoices({from:l,to:i}),r.listPayments({from:l,to:i}),r.listRefunds({from:l,to:i}),r.listSubscriptions({from:l,to:i})]),x=u.items.filter(R=>R.status==="active").reduce((R,O)=>R+O.pricePerPeriod,0),g=x*12,j=new Date;j.setDate(1),j.setHours(0,0,0,0);const y=j.toISOString(),N=o.items.filter(R=>R.status==="paid"&&R.paidAt&&R.paidAt>=y).reduce((R,O)=>R+O.totalAmount,0),_=c.items.filter(R=>R.status==="succeeded"&&R.processedAt&&R.processedAt>=y).reduce((R,O)=>R+O.amount,0),A=N-_,k=o.items.filter(R=>R.status==="uncollectible").length,E=o.items.filter(R=>R.issuedAt>=y).length,D=o.items.filter(R=>R.status==="open").length;return{mrrCents:x,arrCents:g,monthToDateCents:N,netRevenueCents:A,refundsCents:_,disputesOpen:k,invoicesThisMonth:E,adjustmentsPending:D}}catch(a){return console.error("Failed to get billing summary from aggregator",a),null}}async function zse(t,s){try{const r=await vR("USD").listInvoices({from:t,to:s});return QWe(r.items,t,s)}catch(a){return console.error("Failed to get recognition data",a),null}}async function qse(t,s){try{const a=vR("USD"),[r,n]=await Promise.all([a.listInvoices({from:t,to:s}),a.listPayments({from:t,to:s})]),i=rHe();return eHe(r.items,n.items,i)}catch(a){return console.error("Failed to get tax summaries",a),[]}}const iHe=Object.freeze(Object.defineProperty({__proto__:null,getBillingSummaryFromAggregator:nHe,getRecognitionData:zse,getTaxSummaries:qse},Symbol.toStringTag,{value:"Module"})),lHe=[{label:"Last 7 Days",value:"7d"},{label:"Last 30 Days",value:"30d"},{label:"Last 90 Days",value:"90d"},{label:"Last Year",value:"365d"}];function oHe(){const[t,s]=zs(),a=t.get("range")||"30d",[r,n]=m.useState(null),[i,l]=m.useState(null),[o,d]=m.useState(!0),[c,u]=m.useState(null),h=gR(),x=If(h),g=d1(h),j=u1(h);m.useEffect(()=>{let N=!0;return d(!0),u(null),(async()=>{try{const _=new Date;let A;switch(a){case"7d":A=7;break;case"30d":A=30;break;case"90d":A=90;break;case"365d":A=365;break;default:A=30}const k=new Date(_.getTime()-A*24*60*60*1e3).toISOString(),E=_.toISOString(),D=await zse(k,E);if(!N)return;if(D){n(D);const R=XWe((await IC("USD").listInvoices({from:k,to:E})).items,E);l(R)}else u("Unable to load recognition data")}catch(_){if(!N)return;console.error("Failed to load recognition data",_),u("Unable to load recognition data")}finally{N&&d(!1)}})(),()=>{N=!1}},[a]);const y=N=>{const C=new URLSearchParams(t);C.set("range",N),s(C,{replace:!0})},b=m.useMemo(()=>r?r.monthlyBreakdown.map(N=>({month:N.month,recognized:N.recognized/100,deferred:N.deferred/100})):[],[r]);return o?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Revenue Recognition"}),e.jsx(pt,{className:"h-96 w-full"})]}):c||!r?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Revenue Recognition"}),e.jsx($,{className:"border-destructive/40 bg-destructive/10",children:e.jsxs(X,{children:[e.jsx(ee,{className:"text-destructive",children:c||"Unable to load recognition data"}),e.jsx(ue,{children:"Try refreshing or check the billing service."})]})})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Revenue Recognition",description:"Recognized vs deferred revenue using accrual accounting",children:e.jsxs(Te,{value:a,onValueChange:y,children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Select range"})}),e.jsx(De,{children:lHe.map(N=>e.jsx(K,{value:N.value,children:N.label},N.value))})]})}),e.jsxs("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-3",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Total Recognized"})}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-semibold",children:Ii(r.totalRecognized,"USD")})})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Total Deferred"})}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-semibold",children:Ii(r.totalDeferred,"USD")})})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:"Deferred Balance (as of today)"})}),e.jsx(U,{children:e.jsx("div",{className:"text-2xl font-semibold",children:i!==null?Ii(i,"USD"):"-"})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Monthly Recognition Breakdown"}),e.jsx(ue,{children:"Recognized vs deferred revenue by month"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:350,children:e.jsxs(mh,{data:b,margin:Pj,children:[e.jsx(wi,{vertical:!1,...g}),e.jsx(Gn,{dataKey:"month",...x}),e.jsx(Kn,{tickFormatter:N=>Ii(N*100,"USD"),...x}),e.jsx(kn,{cursor:{fill:"transparent"},formatter:N=>Ii(N*100,"USD"),...j}),e.jsx(Ho,{}),e.jsx(Fc,{dataKey:"recognized",fill:h.colors[0],name:"Recognized"}),e.jsx(Fc,{dataKey:"deferred",fill:h.colors[1],name:"Deferred"})]})})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Daily Recognition Trend"}),e.jsx(ue,{children:"Daily recognized revenue over time"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:350,children:e.jsxs($F,{data:r.dailyBreakdown.slice(-30).map(N=>({date:N.date,recognized:N.recognizedAmount/100})),margin:Pj,children:[e.jsx(wi,{vertical:!1,...g}),e.jsx(Gn,{dataKey:"date",...x,tickFormatter:N=>new Date(N).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsx(Kn,{tickFormatter:N=>Ii(N*100,"USD"),...x}),e.jsx(kn,{cursor:{strokeDasharray:"3 3"},formatter:N=>Ii(N*100,"USD"),labelFormatter:N=>new Date(N).toLocaleDateString(),...j}),e.jsx(Sb,{type:"monotone",dataKey:"recognized",stroke:h.colors[0],strokeWidth:2,dot:{r:3},activeDot:{r:5},name:"Recognized"})]})})})]})]})}const cHe=[{label:"Last 7 Days",value:"7d"},{label:"Last 30 Days",value:"30d"},{label:"Last 90 Days",value:"90d"},{label:"Last Year",value:"365d"}];function dHe(){const[t,s]=zs(),a=t.get("range")||"30d",r=t.get("country")||"all",[n,i]=m.useState([]),[l,o]=m.useState(!0),[d,c]=m.useState(null),u=gR(),h=If(u),x=d1(u),g=u1(u);m.useEffect(()=>{let k=!0;return o(!0),c(null),(async()=>{try{const D=new Date;let R;switch(a){case"7d":R=7;break;case"30d":R=30;break;case"90d":R=90;break;case"365d":R=365;break;default:R=30}const O=new Date(D.getTime()-R*24*60*60*1e3).toISOString(),P=D.toISOString(),T=await qse(O,P);if(!k)return;i(T||[])}catch(D){if(!k)return;console.error("Failed to load tax summaries",D),c("Unable to load tax summaries")}finally{k&&o(!1)}})(),()=>{k=!1}},[a]);const j=k=>{const E=new URLSearchParams(t);E.set("range",k),s(E,{replace:!0})},y=k=>{const E=new URLSearchParams(t);k==="all"?E.delete("country"):E.set("country",k),s(E,{replace:!0})},b=m.useMemo(()=>r==="all"?n:n.filter(k=>k.country===r),[n,r]),N=m.useMemo(()=>b.reduce((k,E)=>k+E.taxCollected,0),[b]),C=m.useMemo(()=>Array.from(new Set(n.map(k=>k.country))).sort(),[n]),_=m.useMemo(()=>b.slice(0,10).map(k=>({jurisdiction:k.region?`${k.country}-${k.region}`:k.country,taxCollected:k.taxCollected/100})),[b]),A=m.useMemo(()=>[{accessorKey:"jurisdiction",header:"Jurisdiction",cell:({row:k})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.original.country}),k.original.region&&e.jsx("div",{className:"text-xs text-muted-foreground",children:k.original.region})]})},{accessorKey:"taxCollected",header:"Tax Collected",cell:({row:k})=>Ii(k.original.taxCollected,k.original.currency)},{accessorKey:"taxRate",header:"Tax Rate",cell:({row:k})=>`${(k.original.taxRate*100).toFixed(2)}%`},{accessorKey:"transactionCount",header:"Transactions",cell:({row:k})=>k.original.transactionCount.toLocaleString()},{accessorKey:"currency",header:"Currency",cell:({row:k})=>e.jsx(Q,{variant:"outline",children:k.original.currency})}],[]);return l?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Tax Summaries"}),e.jsx(pt,{className:"h-96 w-full"})]}):d?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Tax Summaries"}),e.jsx($,{className:"border-destructive/40 bg-destructive/10",children:e.jsxs(X,{children:[e.jsx(ee,{className:"text-destructive",children:d}),e.jsx(ue,{children:"Try refreshing or check the billing service."})]})})]}):e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs(va,{title:"Tax Summaries",description:"Tax collected by jurisdiction",children:[e.jsxs(Te,{value:a,onValueChange:j,children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Select range"})}),e.jsx(De,{children:cHe.map(k=>e.jsx(K,{value:k.value,children:k.label},k.value))})]}),e.jsxs(Te,{value:r,onValueChange:y,children:[e.jsx(Pe,{className:"w-[180px]",children:e.jsx(Fe,{placeholder:"Select country"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Countries"}),C.map(k=>e.jsx(K,{value:k,children:k},k))]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Total Tax Collected"}),e.jsx(ue,{children:"Across all jurisdictions"})]}),e.jsx(U,{children:e.jsx("div",{className:"text-3xl font-semibold",children:Ii(N,"USD")})})]}),_.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Tax Collected by Jurisdiction"}),e.jsx(ue,{children:"Top 10 jurisdictions"})]}),e.jsx(U,{children:e.jsx(qn,{width:"100%",height:350,children:e.jsxs(mh,{data:_,margin:Pj,children:[e.jsx(wi,{vertical:!1,...x}),e.jsx(Gn,{dataKey:"jurisdiction",...h,angle:-45,textAnchor:"end",height:80}),e.jsx(Kn,{tickFormatter:k=>Ii(k*100,"USD"),...h}),e.jsx(kn,{cursor:{fill:"transparent"},formatter:k=>Ii(k*100,"USD"),...g}),e.jsx(Fc,{dataKey:"taxCollected",fill:u.colors[0],name:"Tax Collected"})]})})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Tax Summary Table"}),e.jsx(ue,{children:"Detailed breakdown by jurisdiction"})]}),e.jsx(U,{children:e.jsx(_i,{columns:A,data:b})})]})]})}const FU=Ra();function uHe(){const t=ac("billing"),{toast:s}=et(),a=Hi("billing-plans"),[r,n]=m.useState([]),[i,l]=m.useState(!0),[o,d]=m.useState(null),[c,u]=m.useState(null),[h,x]=m.useState("grid"),[g,j]=m.useState(new Map);m.useEffect(()=>{t&&FU.listBillingPlans().then(_=>{n(_),y(_)}).finally(()=>l(!1))},[t]);const y=async _=>{try{const k=await IC("USD").listSubscriptions(),E=new Map;for(const D of _){const R=k.items.filter(P=>P.planName===D.name&&P.status==="active"),O=R.reduce((P,T)=>P+T.pricePerPeriod,0);E.set(D.id,{subscribers:R.length,mrr:O})}j(E)}catch(A){console.warn("Failed to load plan metrics",A)}},b=async _=>{u(_)},N=async()=>{if(!c)return;const _=document.getElementById("edit-price"),A=document.getElementById("edit-status");if(!_||!A)return;const k=Number(_.value);if(Number.isNaN(k)||k<0){s({title:"Invalid price",description:"Enter a non-negative number",variant:"destructive"});return}d(c.id);const E=await FU.updateBillingPlan(c.id,{pricePerMonth:Math.round(k*100),status:A.value});if(d(null),!E.success||!E.data){s({title:"Plan update failed",description:E.message??"Unexpected error",variant:"destructive"});return}const D=E.data;n(R=>R.map(O=>O.id===c.id?D:O)),u(null),s({title:"Plan updated",description:`${D.name} updated successfully`}),await a("update_plan",{entityId:c.id,metadata:{pricePerMonth:D.pricePerMonth,status:D.status}})},C=m.useMemo(()=>[{accessorKey:"name",header:"Plan Name",cell:({row:_})=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:_.original.name}),e.jsx("div",{className:"text-xs text-muted-foreground capitalize",children:_.original.tier})]})},{accessorKey:"pricePerMonth",header:"Price",cell:({row:_})=>e.jsxs("div",{className:"font-medium",children:[Ii(_.original.pricePerMonth,_.original.currency),e.jsx("span",{className:"text-xs text-muted-foreground",children:"/mo"})]})},{accessorKey:"status",header:"Status",cell:({row:_})=>e.jsx(Q,{variant:_.original.status==="active"?"outline":"secondary",children:_.original.status})},{id:"metrics",header:"Subscribers",cell:({row:_})=>{const A=g.get(_.original.id);return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:A?.subscribers??0})]}),e.jsxs("div",{className:"flex items-center gap-1 text-sm",children:[e.jsx(Na,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:A?.mrr?Ii(A.mrr,"USD"):"-"})]})]})}},{accessorKey:"features",header:"Features",cell:({row:_})=>e.jsxs("div",{className:"text-sm text-muted-foreground",children:[_.original.features.length," features"]})},{id:"actions",header:"Actions",cell:({row:_})=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>b(_.original),disabled:o===_.original.id,children:[e.jsx(pn,{className:"mr-2 h-4 w-4"})," Edit"]})}],[g,o]);return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Plans and pricing",description:"Manage subscription tiers offered to banks, exporters and importers.",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1 rounded-lg border border-border/60 bg-background p-1",children:[e.jsx(M,{variant:h==="grid"?"secondary":"ghost",size:"sm",onClick:()=>x("grid"),className:"h-8",children:e.jsx(iue,{className:"h-4 w-4"})}),e.jsx(M,{variant:h==="table"?"secondary":"ghost",size:"sm",onClick:()=>x("table"),className:"h-8",children:e.jsx(kue,{className:"h-4 w-4"})})]}),e.jsxs(M,{variant:"default",size:"sm",className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Create Plan"]})]})}),i?e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:Array.from({length:3}).map((_,A)=>e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsx(pt,{className:"h-5 w-24"}),e.jsx(pt,{className:"mt-2 h-7 w-32"})]}),e.jsxs(U,{className:"space-y-2",children:[e.jsx(pt,{className:"h-4 w-48"}),e.jsx(pt,{className:"h-4 w-40"}),e.jsx(pt,{className:"h-20 w-full"})]})]},A))}):r.length===0?e.jsx(Wr,{title:"No plans configured",description:"Define plan catalog to offer subscription tiers.",action:e.jsxs(M,{className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Create First Plan"]})}):h==="table"?e.jsx(_i,{columns:C,data:r}):e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:r.map(_=>{const A=g.get(_.id);return e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center justify-between text-base",children:[e.jsx("span",{children:_.name}),e.jsx(Q,{variant:_.status==="active"?"outline":"secondary",children:_.status})]}),e.jsx(ue,{children:e.jsxs("span",{className:"text-2xl font-semibold text-foreground",children:[_.currency," ",(_.pricePerMonth/100).toLocaleString(void 0,{minimumFractionDigits:0}),"/mo"]})})]}),e.jsxs(U,{className:"space-y-4",children:[A&&e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-muted/30 px-3 py-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),e.jsxs("span",{children:[A.subscribers," subscribers"]})]}),e.jsxs("div",{className:"flex items-center gap-1 font-medium",children:[e.jsx(Na,{className:"h-4 w-4"}),e.jsxs("span",{children:[Ii(A.mrr,"USD"),"/mo MRR"]})]})]}),e.jsxs("div",{className:"space-y-1 text-sm text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Included features"}),e.jsxs("ul",{className:"space-y-1 text-xs",children:[_.features.slice(0,3).map(k=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-emerald-500",children:"â€¢"})," ",k]},k)),_.features.length>3&&e.jsxs("li",{className:"text-xs text-muted-foreground",children:["+",_.features.length-3," more"]})]})]}),e.jsxs("div",{className:"space-y-1 text-xs text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Usage limits"}),Object.entries(_.limits).slice(0,2).map(([k,E])=>e.jsxs("p",{children:[k,": ",E]},k))]}),e.jsxs(M,{variant:"outline",size:"sm",className:"w-full",onClick:()=>b(_),disabled:o===_.id,children:[e.jsx(pn,{className:"mr-2 h-4 w-4"})," Edit plan"]})]})]},_.id)})}),e.jsx(wt,{open:c!==null,onOpenChange:_=>!_&&u(null),children:e.jsxs(yt,{className:"max-w-2xl",children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:["Edit Plan: ",c?.name]}),e.jsx(_t,{children:"Update plan pricing and status."})]}),c&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs(Z,{htmlFor:"edit-price",children:["Monthly Price (",c.currency,")"]}),e.jsx(oe,{id:"edit-price",type:"number",min:"0",step:"0.01",defaultValue:Math.round(c.pricePerMonth/100),placeholder:"Enter monthly price"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"edit-status",children:"Status"}),e.jsxs(Te,{defaultValue:c.status,id:"edit-status",children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"active",children:"Active"}),e.jsx(K,{value:"deprecated",children:"Deprecated"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Plan Details"}),e.jsx("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-3 text-sm",children:e.jsxs("div",{className:"space-y-1",children:[e.jsxs("p",{className:"font-medium",children:["Tier: ",c.tier]}),e.jsxs("p",{className:"text-muted-foreground",children:[c.features.length," features included"]})]})})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>u(null),children:"Cancel"}),e.jsx(M,{onClick:N,disabled:o!==null,children:o?"Saving...":"Save Changes"})]})]})})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-amber-500/40 bg-amber-500/5 p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-amber-600",children:"Billing preview disabled"}),e.jsx("p",{className:"mt-2 text-sm text-amber-600/80",children:"Toggle the billing feature flag to expose subscription management in the admin console."})]})}const RU=Ra(),gA=10,vA=new Date().toISOString(),OU=[{id:"adjustment-fallback-1",customer:"Bank of Asia",amount:25e3,currency:"USD",reason:"Usage overage",createdAt:vA,createdBy:"billing@trdrhub.com",status:"pending"},{id:"adjustment-fallback-2",customer:"GlobalTrade Inc.",amount:-15e3,currency:"USD",reason:"Service credit",createdAt:vA,createdBy:"billing@trdrhub.com",status:"posted"},{id:"adjustment-fallback-3",customer:"LatAm Exports",amount:32e3,currency:"USD",reason:"Custom implementation",createdAt:vA,createdBy:"billing@trdrhub.com",status:"void"}];function mHe(){const t=ac("billing"),{toast:s}=et(),[a,r]=zs(),n=Hi("billing-adjustments"),[i,l]=m.useState(()=>Math.max(1,Number(a.get("adjustmentsPage")??"1"))),[o,d]=m.useState([]),[c,u]=m.useState(0),[h,x]=m.useState(!0),[g,j]=m.useState(null),[y,b]=m.useState(!1),[N,C]=m.useState({customer:"",amount:"",reason:"",currency:"USD",type:"credit"}),_=Math.max(1,Math.ceil(c/gA)),A=m.useCallback(()=>{t&&(x(!0),RU.listBillingAdjustments({page:i,pageSize:gA}).then(D=>{j(null),d(D.items),u(D.total)}).catch(D=>{console.error("Failed to load adjustments",D),j("Unable to load adjustments. Showing cached mock data."),d(OU),u(OU.length)}).finally(()=>x(!1)))},[t,i]),k=m.useCallback(()=>{const D=new URLSearchParams(a);i===1?D.delete("adjustmentsPage"):D.set("adjustmentsPage",String(i)),D.toString()!==a.toString()&&r(D,{replace:!0})},[i,a,r]);m.useEffect(()=>{k(),A()},[k,A]);const E=async()=>{const D=Number(N.amount);if(!N.customer||Number.isNaN(D)){s({title:"Customer and amount required",variant:"destructive"});return}const R={id:"temp",customer:N.customer,amount:N.type==="credit"?-Math.abs(D*100):Math.abs(D*100),currency:N.currency,reason:N.reason||"Manual adjustment",createdAt:new Date().toISOString(),createdBy:"billing@trdrhub.com",status:"pending"},O=await RU.addBillingAdjustment(R);O.success?(s({title:"Adjustment recorded"}),b(!1),C({customer:"",amount:"",reason:"",currency:"USD",type:"credit"}),A(),await n("create_adjustment",{metadata:{customer:N.customer,amount:R.amount}})):s({title:"Failed to add adjustment",description:O.message,variant:"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Manual billing adjustments",description:"Track credits and charges applied outside automated invoicing.",actions:e.jsxs(wt,{open:y,onOpenChange:b,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"})," New adjustment"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create adjustment"}),e.jsx(_t,{children:"Credit or charge a customer account."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Customer"}),e.jsx(oe,{value:N.customer,onChange:D=>C(R=>({...R,customer:D.target.value})),placeholder:"Acme Corp"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Type"}),e.jsxs(Te,{value:N.type,onValueChange:D=>C(R=>({...R,type:D})),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"credit",children:"Credit"}),e.jsx(K,{value:"charge",children:"Charge"})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Currency"}),e.jsxs(Te,{value:N.currency,onValueChange:D=>C(R=>({...R,currency:D})),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"AED",children:"AED"})]})]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Amount"}),e.jsx(oe,{value:N.amount,onChange:D=>C(R=>({...R,amount:D.target.value})),placeholder:"500"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Reason"}),e.jsx(oe,{value:N.reason,onChange:D=>C(R=>({...R,reason:D.target.value})),placeholder:"Service credit for downtime"})]})]}),e.jsx(ms,{children:e.jsx(M,{onClick:E,children:"Submit"})})]})]})}),g&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:g}),e.jsx(_i,{columns:[{key:"customer",header:"Customer",render:D=>e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:D.customer}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Recorded ",new Date(D.createdAt).toLocaleString()]})]})},{key:"amount",header:"Amount",render:D=>e.jsxs("span",{className:`text-sm font-semibold ${D.amount<0?"text-emerald-600":"text-rose-600"}`,children:[D.amount<0?"-":"+",D.currency," ",Math.abs(D.amount/100).toLocaleString(void 0,{minimumFractionDigits:2})]})},{key:"reason",header:"Reason",render:D=>e.jsx("span",{className:"text-sm text-muted-foreground",children:D.reason})},{key:"status",header:"Status",render:D=>e.jsx(Q,{variant:D.status==="posted"?"default":D.status==="pending"?"secondary":"outline",children:D.status})}],data:o,loading:h,emptyState:e.jsx(Wr,{title:"No adjustments",description:"No manual billing changes recorded."}),footer:c>gA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:i===1?"pointer-events-none opacity-50":void 0,onClick:D=>{D.preventDefault(),i>1&&l(i-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i," of ",_]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:i>=_?"pointer-events-none opacity-50":void 0,onClick:D=>{D.preventDefault(),i<_&&l(i+1)}})})]})})}),h&&o.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((D,R)=>e.jsx(pt,{className:"h-10 w-full"},R))})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-amber-500/40 bg-amber-500/5 p-6 text-sm text-amber-600",children:["Enable the ",e.jsx("strong",{children:"billing"})," feature flag to manage manual adjustments."]})}const IU=Ra(),jA=10,bA=new Date().toISOString(),LU=[{id:"dispute-fallback-1",customer:"Regency Trade",amount:42e4,currency:"USD",reason:"Duplicate charge",openedAt:bA,status:"open",evidenceDueAt:new Date(Date.now()+4320*60*1e3).toISOString(),notes:"Awaiting customer documentation"},{id:"dispute-fallback-2",customer:"Pacific Credit",amount:38e4,currency:"USD",reason:"Service not rendered",openedAt:bA,status:"under_review",evidenceDueAt:new Date(Date.now()+2880*60*1e3).toISOString(),notes:"Billing team preparing evidence"},{id:"dispute-fallback-3",customer:"Global Freight",amount:45e4,currency:"USD",reason:"Contract mismatch",openedAt:bA,status:"won",evidenceDueAt:new Date(Date.now()-1440*60*1e3).toISOString(),notes:"Ruling in our favor"}],hHe=[{label:"All statuses",value:"all"},{label:"Open",value:"open"},{label:"Under review",value:"under_review"},{label:"Won",value:"won"},{label:"Lost",value:"lost"}];function xHe(){const t=ac("billing"),{toast:s}=et(),[a,r]=zs(),n=Hi("billing-disputes"),[i,l]=m.useState(()=>Math.max(1,Number(a.get("disputesPage")??"1"))),[o,d]=m.useState(a.get("disputesStatus")??"open"),[c,u]=m.useState([]),[h,x]=m.useState(0),[g,j]=m.useState(!0),[y,b]=m.useState(null),[N,C]=m.useState(null),_=Math.max(1,Math.ceil(h/jA)),A=m.useCallback(()=>{t&&(j(!0),IU.listBillingDisputes({page:i,pageSize:jA,status:o==="all"?void 0:[o]}).then(D=>{C(null),u(D.items),x(D.total)}).catch(D=>{console.error("Failed to load disputes",D),C("Unable to load disputes. Showing cached mock data."),u(LU),x(LU.length)}).finally(()=>j(!1)))},[t,i,o]),k=m.useCallback(()=>{const D=new URLSearchParams(a);i===1?D.delete("disputesPage"):D.set("disputesPage",String(i)),o==="all"?D.delete("disputesStatus"):D.set("disputesStatus",o),D.toString()!==a.toString()&&r(D,{replace:!0})},[i,o,a,r]);m.useEffect(()=>{k(),A()},[k,A]);const E=async(D,R)=>{b(D);const O=await IU.resolveDispute(D,R);b(null),s({title:O.success?`Marked ${R}`:"Unable to update dispute",description:O.message,variant:O.success?"default":"destructive"}),O.success&&(await n("resolve_dispute",{entityId:D,metadata:{outcome:R}}),A())};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Dispute resolution",description:"Coordinate evidence submission timelines and final rulings.",children:e.jsx(nc,{filterGroups:[{label:"Status",value:o,options:hHe,onChange:D=>{d(D||"all"),l(1)},allowClear:!0}],endAdornment:e.jsxs(M,{size:"sm",variant:"outline",onClick:A,disabled:g,className:"gap-2",children:[e.jsx(wue,{className:g?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]})})}),N&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:N}),e.jsx(_i,{columns:[{key:"customer",header:"Customer",render:D=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:D.customer}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Opened ",new Date(D.openedAt).toLocaleString()]})]})},{key:"amount",header:"Amount",render:D=>e.jsxs("span",{className:"text-sm font-semibold text-rose-600",children:[D.currency," ",(D.amount/100).toLocaleString(void 0,{minimumFractionDigits:2})]})},{key:"reason",header:"Reason",render:D=>e.jsx("span",{className:"text-sm text-muted-foreground",children:D.reason})},{key:"status",header:"Status",render:D=>e.jsx(Q,{variant:D.status==="open"?"destructive":D.status==="under_review"?"secondary":"outline",children:D.status})},{key:"actions",header:"Actions",align:"right",render:D=>e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",disabled:y===D.id,onClick:()=>E(D.id,"won"),className:"gap-1 text-emerald-600",children:[e.jsx(Qs,{className:"h-4 w-4"})," Win"]}),e.jsx(M,{variant:"outline",size:"sm",disabled:y===D.id,onClick:()=>E(D.id,"lost"),className:"gap-1 text-rose-600",children:"Lose"}),e.jsx(M,{variant:"outline",size:"sm",disabled:y===D.id,onClick:()=>E(D.id,"write_off"),className:"gap-1 text-amber-600",children:"Write off"})]})}],data:c,loading:g,emptyState:e.jsx(Wr,{title:"No disputes",description:"No open or historical disputes in this view."}),footer:h>jA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:i===1?"pointer-events-none opacity-50":void 0,onClick:D=>{D.preventDefault(),i>1&&l(i-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i," of ",_]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:i>=_?"pointer-events-none opacity-50":void 0,onClick:D=>{D.preventDefault(),i<_&&l(i+1)}})})]})})}),g&&c.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((D,R)=>e.jsx(pt,{className:"h-10 w-full"},R))}),e.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-4 text-xs text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Evidence reminders"}),e.jsx("p",{className:"mt-1",children:"Evidence due within 3 business days for open disputes. Coordinate with finance to upload documentation."})]})]}):e.jsx("div",{className:"rounded-lg border border-dashed border-amber-500/40 bg-amber-500/5 p-6 text-sm text-amber-600",children:"Billing disputes are hidden while the billing module flag is disabled."})}const MU=Ra();function pHe(){const t=ac("partners"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null),d=Hi("partners-registry");m.useEffect(()=>{t&&MU.listPartners().then(u=>r(u)).finally(()=>i(!1))},[t]);const c=async u=>{const h=u.status==="active"?"inactive":"active";o(u.id);const x=await MU.setPartnerStatus(u.id,h);o(null),x.success?(s({title:"Partner updated",description:`${u.name} set to ${h}`}),r(g=>g.map(j=>j.id===u.id?{...j,status:h}:j)),await d("update_partner_status",{entityId:u.id,metadata:{status:h}})):s({title:"Update failed",description:x.message,variant:"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Partner registry",description:"Central list of vendors and connectors powering LCopilot."}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5 text-primary"}),"Registered partners"]}),e.jsx(ue,{children:"Status, markets served and last sync metadata"})]}),e.jsx(U,{className:"space-y-3",children:n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((u,h)=>e.jsx(pt,{className:"h-16 w-full"},h))}):a.length===0?e.jsx(Wr,{title:"No partners",description:"Add connectors to integrate third-party data providers."}):a.map(u=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:u.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Category: ",u.category]}),e.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] text-muted-foreground",children:u.markets.map(h=>e.jsx(Q,{variant:"outline",children:h},h))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-muted-foreground",children:["Updated ",new Date(u.updatedAt).toLocaleString()]}),e.jsx(Q,{variant:u.status==="active"?"default":u.status==="inactive"?"secondary":"outline",children:u.status}),e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>c(u),disabled:l===u.id,children:[u.status==="active"?e.jsx(Pue,{className:"h-4 w-4"}):e.jsx(Due,{className:"h-4 w-4"}),u.status==="active"?"Disable":"Activate"]})]})]},u.id))})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-blue-500/40 bg-blue-500/5 p-6 text-sm text-blue-600",children:["Enable the ",e.jsx("strong",{children:"partners"})," flag to expose registry management."]})}const BU=Ra();function fHe(){const t=ac("partners"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null),d=Hi("partners-connectors");m.useEffect(()=>{t&&BU.listConnectors().then(u=>r(u)).finally(()=>i(!1))},[t]);const c=async u=>{const h=u.status==="enabled"?"disabled":"enabled";o(u.id);const x=await BU.updateConnector(u.id,{status:h});o(null),x.success?(s({title:"Connector updated",description:`${u.name} ${h}`}),r(g=>g.map(j=>j.id===u.id?{...j,status:h}:j)),await d("update_connector_status",{entityId:u.id,metadata:{status:h}})):s({title:"Update failed",description:x.message,variant:"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Integration connectors",description:"Monitor external systems we interface with and control availability."}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Mde,{className:"h-5 w-5 text-primary"})," Active connectors"]}),e.jsx(ue,{children:"Enable or disable integrations at runtime"})]}),e.jsx(U,{className:"space-y-3",children:n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((u,h)=>e.jsx(pt,{className:"h-16 w-full"},h))}):a.length===0?e.jsx(Wr,{title:"No connectors",description:"Add integrations to bring partner data into LCopilot."}):a.map(u=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:u.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Provider: ",u.provider," â€¢ Auth: ",u.authType]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last sync ",u.lastSyncAt?new Date(u.lastSyncAt).toLocaleString():"â€”"]}),e.jsx("div",{className:"flex items-center gap-2 text-[10px] text-muted-foreground",children:u.hasSecrets?e.jsx(Q,{variant:"secondary",children:"Secrets stored"}):e.jsx(Q,{variant:"outline",children:"No secrets"})})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:u.status==="enabled"?"default":u.status==="error"?"destructive":"secondary",children:u.status}),e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1",onClick:()=>c(u),disabled:l===u.id,children:[e.jsx(fV,{className:"h-4 w-4"})," ",u.status==="enabled"?"Disable":"Enable"]})]})]},u.id))})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-blue-500/40 bg-blue-500/5 p-6 text-sm text-blue-600",children:["Partner connectors require the ",e.jsx("strong",{children:"partners"})," feature flag."]})}const $U=Ra(),yA=15,gHe=[{label:"All statuses",value:"all"},{label:"Delivered",value:"delivered"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"}];function vHe(){const t=ac("partners"),{toast:s}=et(),[a,r]=m.useState("all"),[n,i]=m.useState(1),[l,o]=m.useState([]),[d,c]=m.useState(0),[u,h]=m.useState(!0),[x,g]=m.useState(null),j=Hi("partners-webhooks"),y=Math.max(1,Math.ceil(d/yA)),b=m.useCallback(()=>{t&&(h(!0),$U.listWebhookDeliveries({page:n,pageSize:yA,status:a==="all"?void 0:a}).then(C=>{o(C.items),c(C.total)}).finally(()=>h(!1)))},[t,n,a]);m.useEffect(()=>{b()},[b]);const N=async C=>{g(C);const _=await $U.redeliverWebhook(C);await j("redeliver_webhook",{entityId:C,metadata:{success:_.success}}),g(null),s({title:_.success?"Redelivery queued":"Redelivery failed",description:_.message,variant:_.success?"default":"destructive"}),_.success&&b()};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Outbound webhooks",description:"Replay failed deliveries and monitor subscriber endpoints.",children:e.jsx(nc,{filterGroups:[{label:"Status",value:a,options:gHe,onChange:C=>{r(C||"all"),i(1)},allowClear:!0}],endAdornment:e.jsxs(M,{size:"sm",variant:"outline",onClick:b,disabled:u,className:"gap-2",children:[e.jsx(Lt,{className:u?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]})})}),e.jsx(_i,{columns:[{key:"event",header:"Event",render:C=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:C.event}),e.jsx("p",{className:"text-xs font-mono text-muted-foreground",children:C.endpoint})]})},{key:"sentAt",header:"Last attempt",render:C=>e.jsx("span",{className:"text-xs text-muted-foreground",children:C.sentAt?new Date(C.sentAt).toLocaleString():"â€”"})},{key:"responseCode",header:"Response",render:C=>e.jsx("span",{className:"text-xs text-muted-foreground",children:C.responseCode??"â€”"})},{key:"retryCount",header:"Retries",render:C=>e.jsx("span",{className:"text-xs text-muted-foreground",children:C.retryCount})},{key:"status",header:"Status",render:C=>e.jsx(Q,{variant:C.status==="failed"?"destructive":C.status==="pending"?"secondary":"outline",children:C.status})},{key:"actions",header:"Actions",align:"right",render:C=>e.jsx(M,{variant:"outline",size:"sm",onClick:()=>N(C.id),disabled:x===C.id,className:"gap-1",children:"Redeliver"})}],data:l,loading:u,emptyState:e.jsx(Wr,{title:"No deliveries",description:"No webhook events in this timeframe."}),footer:d>yA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:n===1?"pointer-events-none opacity-50":void 0,onClick:C=>{C.preventDefault(),n>1&&i(n-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",y]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:n>=y?"pointer-events-none opacity-50":void 0,onClick:C=>{C.preventDefault(),n<y&&i(n+1)}})})]})})}),u&&l.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((C,_)=>e.jsx(pt,{className:"h-10 w-full"},_))}),e.jsxs("div",{className:"rounded-lg border border-border/60 bg-muted/30 p-4 text-xs text-muted-foreground",children:[e.jsx("p",{className:"font-medium text-foreground",children:"Webhook hygiene"}),e.jsx("p",{className:"mt-1",children:"Rotate signing secrets regularly and monitor failure spikes to prevent notification drift."})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-blue-500/40 bg-blue-500/5 p-6 text-sm text-blue-600",children:["Turn on the ",e.jsx("strong",{children:"partners"})," flag to monitor webhook deliveries."]})}const UU=Ra();function jHe(){const t=ac("llm"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null);m.useEffect(()=>{t&&UU.listPrompts().then(c=>r(c)).finally(()=>i(!1))},[t]);const d=async c=>{o(c.id);const u=await UU.publishPromptVersion(c.id,{diffSummary:"Auto-published from admin console"});o(null),u.success&&u.data?(s({title:"Prompt updated",description:`Version ${u.data.latestVersion.version} published.`}),r(h=>h.map(x=>x.id===c.id?u.data:x))):s({title:"Publish failed",description:u.message,variant:"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Prompt library",description:"Prompts powering LC CoPilot flows with embedded version history."}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Lde,{className:"h-5 w-5 text-primary"}),"Prompt store"]}),e.jsx(ue,{children:"Latest versions and quick promotion controls"})]}),e.jsx(U,{className:"space-y-3",children:n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((c,u)=>e.jsx(pt,{className:"h-16 w-full"},u))}):a.length===0?e.jsx(Wr,{title:"No prompts",description:"Once prompt configs are imported they'll appear here."}):a.map(c=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:c.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Use case: ",c.useCase]}),e.jsxs("div",{className:"flex items-center gap-3 text-[10px] text-muted-foreground",children:[e.jsxs(Q,{variant:"outline",children:["Version ",c.latestVersion.version]}),e.jsxs(Q,{variant:"outline",children:["Vars: ",c.latestVersion.variables.join(", ")||"None"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"text-xs text-muted-foreground text-right",children:[e.jsxs("p",{children:["Updated ",new Date(c.latestVersion.createdAt).toLocaleString()]}),e.jsxs("p",{children:["By ",c.latestVersion.createdBy]})]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>d(c),disabled:l===c.id,className:"gap-1",children:[e.jsx(Hs,{className:"h-4 w-4"})," Promote"]})]})]},c.id))})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-purple-500/40 bg-purple-500/5 p-6 text-sm text-purple-600",children:["Enable the ",e.jsx("strong",{children:"llm"})," feature flag to manage prompt templates."]})}const zU=Ra();function bHe(){const t=ac("llm"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null);m.useEffect(()=>{t&&zU.listLLMBudgets().then(c=>r(c)).finally(()=>i(!1))},[t]);const d=async c=>{const u=window.prompt("Set new monthly limit",String(c.monthlyLimit));if(!u)return;const h=Number(u);if(Number.isNaN(h)){s({title:"Invalid number",variant:"destructive"});return}o(c.id);const x=await zU.updateLLMBudget(c.id,{monthlyLimit:h});o(null),x.success?(s({title:"Budget updated"}),r(g=>g.map(j=>j.id===c.id?{...j,monthlyLimit:h}:j))):s({title:"Update failed",description:x.message,variant:"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"LLM budgets",description:"Track monthly spend caps for OpenAI, Anthropic and internal evaluators."}),n?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:Array.from({length:3}).map((c,u)=>e.jsxs($,{className:"border-border/60",children:[e.jsx(X,{children:e.jsx(pt,{className:"h-5 w-32"})}),e.jsxs(U,{className:"space-y-3",children:[e.jsx(pt,{className:"h-4 w-20"}),e.jsx(pt,{className:"h-3 w-full"}),e.jsx(pt,{className:"h-8 w-full"})]})]},u))}):a.length===0?e.jsx(Wr,{title:"No budgets configured",description:"Set cost guardrails to avoid runaway usage."}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-3",children:a.map(c=>{const u=Math.min(100,Math.round(c.spendingToDate/c.monthlyLimit*100));return e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center justify-between text-base",children:[e.jsx("span",{children:c.service}),e.jsx(Q,{variant:"outline",children:c.provider})]}),e.jsxs(ue,{children:["Monthly cap ",c.currency," ",c.monthlyLimit.toLocaleString()]})]}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Spent to date"}),e.jsxs("span",{className:"font-semibold text-foreground",children:[c.currency," ",c.spendingToDate.toLocaleString()]})]}),e.jsx(es,{value:u,className:"h-2"}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-muted-foreground",children:[e.jsxs("span",{children:[u,"% used"]}),e.jsxs("span",{children:["Forecast ",c.currency," ",c.forecast.toLocaleString()]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground",children:["Hard limit: ",c.currency," ",c.hardLimit.toLocaleString()]}),e.jsx("div",{className:"flex flex-wrap gap-2 text-[10px] text-muted-foreground",children:c.emails.map(h=>e.jsx(Q,{variant:"outline",children:h},h))}),e.jsxs(M,{variant:"outline",size:"sm",className:"w-full gap-1",onClick:()=>d(c),disabled:l===c.id,children:[e.jsx(Kq,{className:"h-4 w-4"})," Adjust limit"]})]})]},c.id)})})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-purple-500/40 bg-purple-500/5 p-6 text-sm text-purple-600",children:["Toggle the ",e.jsx("strong",{children:"llm"})," flag to monitor model budgets and spending forecasts."]})}const yHe=Ra(),NA=10,NHe=[{label:"All statuses",value:"all"},{label:"Completed",value:"completed"},{label:"Running",value:"running"},{label:"Pending",value:"pending"},{label:"Failed",value:"failed"}];function wHe(){const t=ac("llm");et();const[s,a]=m.useState(1),[r,n]=m.useState("all"),[i,l]=m.useState([]),[o,d]=m.useState(0),[c,u]=m.useState(!0),h=Math.max(1,Math.ceil(o/NA)),x=m.useCallback(()=>{t&&(u(!0),yHe.listEvaluationRuns({page:s,pageSize:NA,status:r==="all"?void 0:[r]}).then(g=>{l(g.items),d(g.total)}).finally(()=>u(!1)))},[t,s,r]);return m.useEffect(()=>{x()},[x]),t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Evaluation runs",description:"Quality, latency and cost regression results for model releases.",actions:e.jsxs(M,{size:"sm",variant:"outline",onClick:x,disabled:c,className:"gap-2",children:[e.jsx(sV,{className:c?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]}),children:e.jsx(nc,{filterGroups:[{label:"Status",value:r,options:NHe,onChange:g=>{n(g||"all"),a(1)},allowClear:!0}]})}),e.jsx(_i,{columns:[{key:"name",header:"Evaluation",render:g=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:g.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Dataset: ",g.dataset]})]})},{key:"model",header:"Model",render:g=>e.jsx("span",{className:"text-sm text-muted-foreground",children:g.model})},{key:"metrics",header:"Metrics",render:g=>e.jsxs("div",{className:"grid gap-1 text-xs text-muted-foreground",children:[g.metrics.accuracy!==void 0&&e.jsxs("span",{children:["Accuracy: ",(g.metrics.accuracy*100).toFixed(1),"%"]}),g.metrics.latencyMs!==void 0&&e.jsxs("span",{children:["Latency: ",g.metrics.latencyMs,"ms"]}),g.metrics.cost!==void 0&&e.jsxs("span",{children:["Cost: $",g.metrics.cost.toFixed(2)]}),g.metrics.score!==void 0&&e.jsxs("span",{children:["Score: ",(g.metrics.score*100).toFixed(1),"%"]})]})},{key:"startedAt",header:"Started",render:g=>e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(g.startedAt).toLocaleString()})},{key:"status",header:"Status",render:g=>e.jsx(Q,{variant:g.status==="completed"?"default":g.status==="failed"?"destructive":"secondary",children:g.status})}],data:i,loading:c,emptyState:e.jsx(Wr,{title:"No evaluation runs",description:"When model regressions finish they will appear here."}),footer:o>NA&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:s===1?"pointer-events-none opacity-50":void 0,onClick:g=>{g.preventDefault(),s>1&&a(s-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",s," of ",h]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:s>=h?"pointer-events-none opacity-50":void 0,onClick:g=>{g.preventDefault(),s<h&&a(s+1)}})})]})})}),c&&i.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((g,j)=>e.jsx(pt,{className:"h-10 w-full"},j))})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-purple-500/40 bg-purple-500/5 p-6 text-sm text-purple-600",children:["Switch on the ",e.jsx("strong",{children:"llm"})," feature flag to review evaluation runs."]})}const _He=Ra();function CHe(){const t=ac("compliance"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0);return m.useEffect(()=>{t&&_He.listResidencyPolicies().then(l=>r(l)).finally(()=>i(!1))},[t]),t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Data residency",description:"Validate storage locations and document waivers."}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-5 w-5 text-primary"})," Regional coverage"]}),e.jsx(ue,{children:"Where customer data currently resides"})]}),e.jsx(U,{className:"space-y-3",children:n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((l,o)=>e.jsx(pt,{className:"h-16 w-full"},o))}):a.length===0?e.jsx(Wr,{title:"No residency policies",description:"Document regions to stay compliant with data sovereignty requirements."}):a.map(l=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:l.region}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Storage: ",l.storageLocation]}),l.notes&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Notes: ",l.notes]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:l.status==="compliant"?"default":l.status==="waived"?"secondary":"destructive",children:l.status}),e.jsx(M,{variant:"outline",size:"sm",onClick:()=>s({title:"Validation triggered",description:`Re-validating ${l.region}`}),children:"Re-validate"})]})]},l.id))})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-sky-500/40 bg-sky-500/5 p-6 text-sm text-sky-600",children:["Enable the ",e.jsx("strong",{children:"compliance"})," flag to manage data residency."]})}const qU=Ra();function SHe(){const t=ac("compliance"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null);m.useEffect(()=>{t&&qU.listRetentionSchedules().then(c=>r(c)).finally(()=>i(!1))},[t]);const d=async(c,u=!1)=>{o(c);const h=await qU.runRetentionSchedule(c,u);o(null),s({title:h.success?u?"Dry run complete":"Purge initiated":"Retention run failed",description:h.data?.summary??h.message,variant:h.success?"default":"destructive"})};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Retention schedules",description:"Automated purging of customer and system data."}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(qde,{className:"h-5 w-5 text-primary"}),"Active schedules"]}),e.jsx(ue,{children:"Review cadence and data targets"})]}),e.jsx(U,{className:"space-y-3",children:n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((c,u)=>e.jsx(pt,{className:"h-16 w-full"},u))}):a.length===0?e.jsx(Wr,{title:"No retention policies",description:"Define schedules to keep storage compliant."}):a.map(c=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:c.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Applies to: ",c.appliesTo.join(", ")," â€¢ Retain for ",c.retentionDays," days"]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Last run ",new Date(c.lastRunAt).toLocaleString()," â€¢ Next run ",new Date(c.nextRunAt).toLocaleString()]}),c.dryRunSummary&&e.jsxs("p",{className:"text-xs text-amber-600",children:["Dry run: ",c.dryRunSummary]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",disabled:l===c.id,onClick:()=>d(c.id,!0),children:"Dry run"}),e.jsx(M,{size:"sm",disabled:l===c.id,onClick:()=>d(c.id,!1),children:"Purge now"})]})]},c.id))})]})]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-sky-500/40 bg-sky-500/5 p-6 text-sm text-sky-600",children:["Enable the ",e.jsx("strong",{children:"compliance"})," flag to manage retention schedules."]})}const wA=Ra();function kHe(){const t=ac("compliance"),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(null),[d,c]=m.useState(!1),[u,h]=m.useState({name:"",owner:"legal@trdrhub.com",affected:"100"});m.useEffect(()=>{t&&wA.listLegalHolds().then(j=>r(j)).finally(()=>i(!1))},[t]);const x=async()=>{if(!u.name.trim()){s({title:"Hold name required",variant:"destructive"});return}const j={name:u.name.trim(),owner:u.owner,affectedObjects:Number(u.affected)||0},y=await wA.createLegalHold(j);y.success&&y.data?(s({title:"Legal hold created"}),r(b=>[y.data,...b]),c(!1),h({name:"",owner:"legal@trdrhub.com",affected:"100"})):s({title:"Creation failed",description:y.message,variant:"destructive"})},g=async j=>{o(j);const y=await wA.releaseLegalHold(j);o(null),s({title:y.success?"Hold released":"Release failed",description:y.message,variant:y.success?"default":"destructive"}),y.success&&r(b=>b.map(N=>N.id===j?{...N,status:"released",releasedAt:new Date().toISOString()}:N))};return t?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Legal holds",description:"Preserve data for litigation and regulatory investigations.",actions:e.jsxs(wt,{open:d,onOpenChange:c,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{size:"sm",className:"gap-2",children:[e.jsx($o,{className:"h-4 w-4"})," New legal hold"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create legal hold"}),e.jsx(_t,{children:"Prevent data deletion for the specified case."})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Hold name"}),e.jsx(oe,{value:u.name,onChange:j=>h(y=>({...y,name:j.target.value})),placeholder:"Investigation #2025-01"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Owner"}),e.jsx(oe,{value:u.owner,onChange:j=>h(y=>({...y,owner:j.target.value}))})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("label",{className:"text-xs font-medium text-muted-foreground",children:"Estimated records affected"}),e.jsx(oe,{value:u.affected,onChange:j=>h(y=>({...y,affected:j.target.value}))})]})]}),e.jsx(ms,{children:e.jsx(M,{onClick:x,children:"Create hold"})})]})]})}),n?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((j,y)=>e.jsx(pt,{className:"h-16 w-full"},y))}):a.length===0?e.jsx(Wr,{title:"No legal holds",description:"Create a hold to freeze data for ongoing cases."}):a.map(j=>e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg border border-border/60 bg-card/60 p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsx("p",{className:"font-medium text-foreground",children:j.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Owner: ",j.owner]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Created ",new Date(j.createdAt).toLocaleString()]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Records: ",j.affectedObjects]}),j.releasedAt&&e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Released ",new Date(j.releasedAt).toLocaleString()]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:j.status==="active"?"default":"secondary",children:j.status}),j.status==="active"?e.jsxs(M,{variant:"outline",size:"sm",className:"gap-1 text-rose-600",onClick:()=>g(j.id),disabled:l===j.id,children:[e.jsx(Fue,{className:"h-4 w-4"})," Release"]}):e.jsx("span",{className:"text-xs text-muted-foreground",children:"Released"})]})]},j.id))]}):e.jsxs("div",{className:"rounded-lg border border-dashed border-rose-500/40 bg-rose-500/5 p-6 text-sm text-rose-600",children:["Enable the ",e.jsx("strong",{children:"compliance"})," flag to manage legal holds."]})}const VU=Ra(),EHe=[{flag:"billing",label:"Billing",description:"Expose monetization dashboards and overrides."},{flag:"partners",label:"Partners",description:"Manage registry, connectors and webhooks."},{flag:"llm",label:"LLM",description:"Show prompt library, budgets and evaluation results."},{flag:"compliance",label:"Compliance",description:"Enable residency, retention and legal hold views."}];function AHe(){const{toast:t}=et(),[s,a]=m.useState([]),[r,n]=m.useState(q6e()),[i,l]=m.useState(!0),[o,d]=m.useState(null),c=Hi("system-feature-flags");m.useEffect(()=>{VU.listFeatureFlags().then(g=>a(g)).finally(()=>l(!1))},[]);const u=async g=>{const j=g.status==="enabled"?"disabled":"enabled";d(g.id);const y=await VU.setFeatureFlagStatus(g.id,j);d(null),y.success?(t({title:`${g.name} ${j}`}),a(b=>b.map(N=>N.id===g.id?{...N,status:j}:N)),await c("toggle_remote_flag",{entityId:g.id,metadata:{status:j}})):t({title:"Update failed",description:y.message,variant:"destructive"})},h=async g=>{const j=!r[g];n(y=>({...y,[g]:j})),z6e(g,j),t({title:`${g} flag ${j?"enabled":"disabled"}`}),await c("toggle_module_flag",{metadata:{flag:g,enabled:j}})},x=async()=>{V6e(),n(W6e()),t({title:"Module flags reset"}),await c("reset_module_flags")};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Feature toggles",description:"Control progressive delivery and internal preview modules."}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(rg,{className:"h-5 w-5 text-primary"})," Platform flags"]}),e.jsx(ue,{children:"Live feature flags synced from control plane"})]}),e.jsx(U,{className:"space-y-3",children:i?e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((g,j)=>e.jsx(pt,{className:"h-12 w-full"},j))}):s.length===0?e.jsx("p",{className:"text-xs text-muted-foreground",children:"No platform flags defined."}):s.map(g=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/60 p-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-mono text-sm text-foreground",children:g.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:g.description}),e.jsx("div",{className:"flex flex-wrap gap-1 text-[10px] text-muted-foreground",children:g.tags?.map(j=>e.jsx(Q,{variant:"outline",children:j},j))})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Q,{variant:g.status==="enabled"?"default":"secondary",children:g.status}),e.jsx(js,{checked:g.status==="enabled",onCheckedChange:()=>u(g),disabled:o===g.id})]})]},g.id))})]}),e.jsxs($,{className:"border-border/60",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(rg,{className:"h-5 w-5 text-primary"})," Admin modules"]}),e.jsx(ue,{children:"Flags persisted locally for optional admin views"})]}),e.jsxs(U,{className:"space-y-3",children:[EHe.map(({flag:g,label:j,description:y})=>e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/60 p-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:j}),e.jsx("p",{className:"text-xs text-muted-foreground",children:y})]}),e.jsx(js,{checked:r[g],onCheckedChange:()=>h(g)})]},g)),e.jsx("div",{className:"flex justify-end",children:e.jsx(M,{variant:"outline",size:"sm",onClick:x,children:"Reset defaults"})})]})]})]})]})}const PHe=Ra(),_A=10,DHe=new Date().toISOString(),WU=[{id:"release-fallback-1",version:"v2.24.0",deployedAt:DHe,environment:"production",author:"CI/CD",summary:"Deployment summary placeholder for mock data.",commitSha:"abc123",status:"succeeded",services:[{name:"web",previousVersion:"v2.23.0"},{name:"api",previousVersion:"v2.23.0"}]},{id:"release-fallback-2",version:"v2.23.1",deployedAt:new Date(Date.now()-7200*1e3).toISOString(),environment:"staging",author:"Sarah Jenkins",summary:"Deployment summary placeholder for mock data.",commitSha:"def456",status:"in_progress",services:[{name:"web",previousVersion:"v2.23.0"}]},{id:"release-fallback-3",version:"v2.23.0",deployedAt:new Date(Date.now()-360*60*1e3).toISOString(),environment:"production",author:"DevOps Bot",summary:"Deployment summary placeholder for mock data.",commitSha:"ghi789",status:"failed",services:[{name:"api",previousVersion:"v2.22.4"}]}],THe=[{label:"All environments",value:"all"},{label:"Production",value:"production"},{label:"Staging",value:"staging"},{label:"Sandbox",value:"sandbox"}];function FHe(){const[t,s]=zs(),[a,r]=m.useState(t.get("releasesEnv")??"all"),[n,i]=m.useState(()=>Math.max(1,Number(t.get("releasesPage")??"1"))),[l,o]=m.useState([]),[d,c]=m.useState(0),[u,h]=m.useState(!0),[x,g]=m.useState(null),j=Math.max(1,Math.ceil(d/_A)),y=m.useCallback(()=>{h(!0),PHe.listReleases({page:n,pageSize:_A,environment:a==="all"?void 0:a}).then(N=>{g(null),o(N.items),c(N.total)}).catch(N=>{console.error("Failed to load releases",N),g("Unable to load releases. Showing cached mock data."),o(WU),c(WU.length)}).finally(()=>h(!1))},[n,a]),b=m.useCallback(()=>{const N=new URLSearchParams(t);n===1?N.delete("releasesPage"):N.set("releasesPage",String(n)),a==="all"?N.delete("releasesEnv"):N.set("releasesEnv",a),N.toString()!==t.toString()&&s(N,{replace:!0})},[n,a,t,s]);return m.useEffect(()=>{b(),y()},[b,y]),e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Deployment history",description:"Recent application releases with status and linked services.",actions:e.jsxs(M,{size:"sm",variant:"outline",onClick:y,disabled:u,className:"gap-2",children:[e.jsx(tue,{className:u?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]}),children:e.jsx(nc,{filterGroups:[{label:"Environment",value:a,options:THe,onChange:N=>{r(N??"all"),i(1)}}]})}),x&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700",children:x}),e.jsx(_i,{columns:[{key:"version",header:"Release",render:N=>e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-mono text-sm font-medium text-foreground",children:N.version}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Commit ",N.commitSha]})]})},{key:"environment",header:"Environment",render:N=>e.jsx(Q,{variant:"outline",children:N.environment})},{key:"deployedAt",header:"Deployed",render:N=>e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(N.deployedAt).toLocaleString()})},{key:"status",header:"Status",render:N=>e.jsx(Q,{variant:N.status==="succeeded"?"default":N.status==="failed"?"destructive":"secondary",children:N.status})},{key:"summary",header:"Summary",render:N=>e.jsx("span",{className:"text-sm text-muted-foreground",children:N.summary})}],data:l,loading:u,emptyState:e.jsx(Wr,{title:"No releases",description:"No deployments found for the selected filters."}),footer:d>_A&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",className:n===1?"pointer-events-none opacity-50":void 0,onClick:N=>{N.preventDefault(),n>1&&i(n-1)}})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",n," of ",j]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",className:n>=j?"pointer-events-none opacity-50":void 0,onClick:N=>{N.preventDefault(),n<j&&i(n+1)}})})]})})}),u&&l.length===0&&e.jsx("div",{className:"space-y-2",children:Array.from({length:4}).map((N,C)=>e.jsx(pt,{className:"h-10 w-full"},C))})]})}const HU=Ra();function RHe(){const{toast:t}=et(),[s,a]=m.useState(null),[r,n]=m.useState(null),[i,l]=m.useState(!1),o=Hi("system-settings");m.useEffect(()=>{HU.getSettings().then(g=>{a(g),n(g)})},[]);const d=(g,j)=>{a(y=>y&&{...y,branding:{...y.branding,[g]:j}})},c=(g,j)=>{a(y=>y&&{...y,authentication:{...y.authentication,[g]:j}})},u=(g,j)=>{a(y=>y&&{...y,notifications:{...y.notifications,[g]:j}})},h=m.useCallback(async()=>{r&&(a(r),await o("reset_settings"))},[o,r]),x=m.useCallback(async()=>{if(!s)return;if(!/^[^@\s]+@[^@\s]+\.[^@\s]+$/.test(s.branding.supportEmail)){t({title:"Invalid support email",variant:"destructive"});return}l(!0);const g=await HU.updateSettings(s);if(l(!1),g.success&&g.data)if(t({title:"Settings saved"}),n(g.data),a(g.data),r){const j=[];JSON.stringify(r.branding)!==JSON.stringify(g.data.branding)&&j.push("branding"),JSON.stringify(r.authentication)!==JSON.stringify(g.data.authentication)&&j.push("authentication"),JSON.stringify(r.notifications)!==JSON.stringify(g.data.notifications)&&j.push("notifications"),await o("save_settings",{metadata:{changedSections:j}})}else await o("save_settings");else t({title:"Save failed",description:g.message,variant:"destructive"})},[o,r,s,t]);return s?e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"System settings",description:"Branding, authentication and notification defaults across LCopilot."}),e.jsxs(Os,{defaultValue:"branding",className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsx(He,{value:"branding",children:"Branding"}),e.jsx(He,{value:"auth",children:"Authentication"}),e.jsx(He,{value:"notifications",children:"Notifications"})]}),e.jsxs(Qe,{value:"branding",className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Primary color"}),e.jsx(oe,{value:s.branding.primaryColor,onChange:g=>d("primaryColor",g.target.value)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Support email"}),e.jsx(oe,{value:s.branding.supportEmail,onChange:g=>d("supportEmail",g.target.value)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Logo URL"}),e.jsx(oe,{value:s.branding.logoUrl??"",onChange:g=>d("logoUrl",g.target.value),placeholder:"https://"})]})]}),e.jsxs(Qe,{value:"auth",className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Password policy"}),e.jsx(oe,{value:s.authentication.passwordPolicy,onChange:g=>c("passwordPolicy",g.target.value)})]}),e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/50 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Require MFA"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enforce multi-factor authentication for admins"})]}),e.jsx(js,{checked:s.authentication.mfaEnforced,onCheckedChange:g=>c("mfaEnforced",g)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/50 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Enable SSO"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow SAML/OIDC login"})]}),e.jsx(js,{checked:s.authentication.ssoEnabled,onCheckedChange:g=>c("ssoEnabled",g)})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Session timeout (minutes)"}),e.jsx(oe,{type:"number",value:s.authentication.sessionTimeoutMinutes,onChange:g=>c("sessionTimeoutMinutes",Number(g.target.value)),className:"w-40"})]})]}),e.jsxs(Qe,{value:"notifications",className:"mt-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/50 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Daily summaries"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Operations digest with key metrics"})]}),e.jsx(js,{checked:s.notifications.dailySummary,onCheckedChange:g=>u("dailySummary",g)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/50 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Weekly insights"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Send Monday morning report"})]}),e.jsx(js,{checked:s.notifications.weeklyInsights,onCheckedChange:g=>u("weeklyInsights",g)})]}),e.jsxs("div",{className:"flex items-center justify-between rounded-lg border border-border/60 bg-card/50 p-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-foreground",children:"Critical alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Escalate outages to on-call"})]}),e.jsx(js,{checked:s.notifications.criticalAlerts,onCheckedChange:g=>u("criticalAlerts",g)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Digest email"}),e.jsx(oe,{value:s.notifications.digestEmail,onChange:g=>u("digestEmail",g.target.value)})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(M,{variant:"outline",onClick:h,disabled:!r||i,children:"Reset"}),e.jsx(M,{onClick:x,disabled:i,children:"Save changes"})]})]}):e.jsx("div",{className:"space-y-3",children:Array.from({length:3}).map((g,j)=>e.jsx(pt,{className:"h-36 w-full"},j))})}const dv=[{value:"icc",label:"ICC (International Chamber of Commerce)"},{value:"swift",label:"SWIFT (Messaging Standards)"},{value:"iso20022",label:"ISO 20022 (Financial Messaging)"},{value:"fta",label:"FTA (Free Trade Agreements)"},{value:"sanctions",label:"Sanctions"},{value:"export_control",label:"Export Control"},{value:"commodity",label:"Commodity (Sector-Specific Rules)"},{value:"bank",label:"Bank (Bank Profiles & Preferences)"},{value:"regulations",label:"Regulations (Country-Specific)"},{value:"law",label:"Law (Legal Frameworks)"},{value:"mode",label:"Mode (Jurisdiction Modes)"}],ap={icc:[{value:"icc.ucp600",label:"UCP 600 (Commercial Documentary Credits)",type:"base",domain:"icc"},{value:"icc.isbp745",label:"ISBP 745 (Standard Banking Practice)",type:"supplement",domain:"icc"},{value:"icc.eucp",label:"eUCP v2.1 (Electronic Supplement to UCP)",type:"supplement",domain:"icc"},{value:"icc.isp98",label:"ISP98 (International Standby Practices)",type:"base",domain:"icc"},{value:"icc.urdg758",label:"URDG 758 (Demand Guarantees)",type:"base",domain:"icc"},{value:"icc.urc522",label:"URC 522 (Collections)",type:"base",domain:"icc"},{value:"icc.eurc",label:"eURC v1.1 (Electronic Supplement to URC)",type:"supplement",domain:"icc"},{value:"icc.urr725",label:"URR 725 (Bank-to-Bank Reimbursements)",type:"supplement",domain:"icc"},{value:"icc.urbpo750",label:"URBPO 750 (Bank Payment Obligation)",type:"base",domain:"icc"},{value:"icc.urf800",label:"URF 800 (Forfaiting)",type:"base",domain:"icc"},{value:"icc.urdtt",label:"URDTT (Digital Trade Transactions)",type:"base",domain:"icc"},{value:"icc.incoterms2020",label:"Incoterms 2020",type:"base",domain:"icc"},{value:"icc.incoterms",label:"Incoterms (General)",type:"base",domain:"icc"},{value:"icc.opinions",label:"ICC Banking Commission Opinions",type:"general",domain:"icc"},{value:"icc.docdex",label:"ICC DOCDEX Decisions",type:"general",domain:"icc"},{value:"icc.lcopilot.crossdoc",label:"LCopilot Cross-Document Rules",type:"general",domain:"icc"},{value:"icc",label:"ICC (General / Legacy)",type:"general",domain:"icc"}],swift:[{value:"swift.mt700",label:"MT700 (Issue of Documentary Credit)",type:"base",domain:"swift"},{value:"swift.mt707",label:"MT707 (Amendment to Documentary Credit)",type:"base",domain:"swift"},{value:"swift.mt760",label:"MT760 (Guarantee/Standby LC)",type:"base",domain:"swift"},{value:"swift.mt767",label:"MT767 (Guarantee Amendment)",type:"base",domain:"swift"},{value:"swift.mt768",label:"MT768 (Guarantee Acknowledgement)",type:"base",domain:"swift"},{value:"swift.mt400",label:"MT400 (Advice of Payment)",type:"base",domain:"swift"},{value:"swift.mt410",label:"MT410 (Acknowledgement)",type:"base",domain:"swift"},{value:"swift.mt412",label:"MT412 (Advice of Acceptance)",type:"base",domain:"swift"},{value:"swift.mt416",label:"MT416 (Advice of Non-Payment)",type:"base",domain:"swift"},{value:"swift.mt420",label:"MT420 (Tracer)",type:"base",domain:"swift"},{value:"swift.mt422",label:"MT422 (Advice of Fate)",type:"base",domain:"swift"},{value:"swift.mt430",label:"MT430 (Amendment of Instructions)",type:"base",domain:"swift"},{value:"swift",label:"SWIFT (General)",type:"general",domain:"swift"}],iso20022:[{value:"iso20022.trade",label:"ISO 20022 Trade (trad.001/002/003)",type:"base",domain:"iso20022"},{value:"iso20022.tsrv",label:"ISO 20022 Trade Services (Undertakings)",type:"base",domain:"iso20022"},{value:"iso20022.tsmt",label:"ISO 20022 TSMT (BPO)",type:"base",domain:"iso20022"},{value:"iso20022",label:"ISO 20022 (General)",type:"general",domain:"iso20022"}],fta:[{value:"fta.rcep",label:"RCEP (Regional Comprehensive Economic Partnership)",type:"base",domain:"fta"},{value:"fta.cptpp",label:"CPTPP (Trans-Pacific Partnership)",type:"base",domain:"fta"},{value:"fta.usmca",label:"USMCA (US-Mexico-Canada)",type:"base",domain:"fta"},{value:"fta.afcfta",label:"AfCFTA (African Continental FTA)",type:"base",domain:"fta"},{value:"fta.eu_uk",label:"EU-UK TCA (Trade and Cooperation)",type:"base",domain:"fta"},{value:"fta.eu_japan",label:"EU-Japan EPA",type:"base",domain:"fta"},{value:"fta.eu_korea",label:"EU-Korea FTA",type:"base",domain:"fta"},{value:"fta.ceta",label:"CETA (EU-Canada)",type:"base",domain:"fta"},{value:"fta.eusfta",label:"EU-Singapore FTA",type:"base",domain:"fta"},{value:"fta.evfta",label:"EU-Vietnam FTA",type:"base",domain:"fta"},{value:"fta.eu_mexico",label:"EU-Mexico FTA",type:"base",domain:"fta"},{value:"fta.pem",label:"PEM Convention (Pan-Euro-Med)",type:"base",domain:"fta"},{value:"fta.korus",label:"KORUS (US-Korea FTA)",type:"base",domain:"fta"},{value:"fta.us_israel",label:"US-Israel FTA",type:"base",domain:"fta"},{value:"fta.uschile",label:"US-Chile FTA",type:"base",domain:"fta"},{value:"fta.uspanama",label:"US-Panama TPA",type:"base",domain:"fta"},{value:"fta.ussfta",label:"US-Singapore FTA",type:"base",domain:"fta"},{value:"fta.ausfta",label:"Australia-US FTA",type:"base",domain:"fta"},{value:"fta.ctpa",label:"US-Colombia TPA",type:"base",domain:"fta"},{value:"fta.ptpa",label:"US-Peru TPA",type:"base",domain:"fta"},{value:"fta.acfta",label:"ACFTA (ASEAN-China FTA)",type:"base",domain:"fta"},{value:"fta.asean",label:"ASEAN FTA",type:"base",domain:"fta"},{value:"fta.mercosur",label:"Mercosur (South America)",type:"base",domain:"fta"},{value:"fta.efta",label:"EFTA (European Free Trade)",type:"base",domain:"fta"},{value:"fta.gcc",label:"GCC (Gulf Cooperation Council)",type:"base",domain:"fta"},{value:"fta.sadc",label:"SADC (Southern African)",type:"base",domain:"fta"},{value:"fta.comesa",label:"COMESA (Eastern/Southern Africa)",type:"base",domain:"fta"},{value:"fta.ecowas",label:"ECOWAS (West Africa)",type:"base",domain:"fta"},{value:"fta.eaeu",label:"EAEU (Eurasian Economic Union)",type:"base",domain:"fta"},{value:"fta.pacific_alliance",label:"Pacific Alliance",type:"base",domain:"fta"},{value:"fta.eu_bilateral",label:"EU Bilateral FTAs (Collection)",type:"general",domain:"fta"},{value:"fta.us_bilateral",label:"US Bilateral FTAs (Collection)",type:"general",domain:"fta"},{value:"fta.regional",label:"Regional Blocs (Collection)",type:"general",domain:"fta"},{value:"fta",label:"FTA (General)",type:"general",domain:"fta"}],sanctions:[{value:"sanctions.ofac",label:"OFAC (US Treasury)",type:"base",domain:"sanctions"},{value:"sanctions.ofac.us",label:"OFAC US-Specific",type:"base",domain:"sanctions"},{value:"sanctions.eu",label:"EU Consolidated Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.un",label:"UN Security Council Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.uk",label:"UK OFSI Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.un_uk",label:"UN + UK Sanctions (Combined)",type:"base",domain:"sanctions"},{value:"sanctions.vessel",label:"Vessel/Maritime Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.port",label:"Port Restrictions",type:"base",domain:"sanctions"},{value:"sanctions.cn",label:"China Sanctions/Unreliable Entity",type:"base",domain:"sanctions"},{value:"sanctions.ae",label:"UAE Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.swiss",label:"Swiss SECO Sanctions",type:"base",domain:"sanctions"},{value:"sanctions.screening",label:"Sanctions Screening (General)",type:"general",domain:"sanctions"},{value:"sanctions.global",label:"Global Sanctions (Combined)",type:"general",domain:"sanctions"},{value:"sanctions.checklist",label:"Sanctions Checklist",type:"general",domain:"sanctions"},{value:"sanctions",label:"Sanctions (General)",type:"general",domain:"sanctions"}],export_control:[{value:"export_control.us",label:"US EAR (Export Administration)",type:"base",domain:"export_control"},{value:"export_control.eu",label:"EU Dual-Use Regulation",type:"base",domain:"export_control"},{value:"export_control",label:"Export Control (General)",type:"general",domain:"export_control"}],commodity:[{value:"commodity.agriculture",label:"Agriculture & Food Products",type:"base",domain:"commodity"},{value:"commodity.textiles",label:"Textiles & Garments",type:"base",domain:"commodity"},{value:"commodity.chemicals",label:"Chemicals & Hazmat",type:"base",domain:"commodity"},{value:"commodity.electronics",label:"Electronics & Technology",type:"base",domain:"commodity"},{value:"commodity.energy",label:"Energy & Fuels",type:"base",domain:"commodity"},{value:"commodity.mining",label:"Mining & Minerals",type:"base",domain:"commodity"},{value:"commodity.automotive",label:"Automotive & Vehicles",type:"base",domain:"commodity"},{value:"commodity.pharma",label:"Pharmaceuticals & Medical",type:"base",domain:"commodity"},{value:"commodity.food",label:"Food & Beverages",type:"base",domain:"commodity"},{value:"commodity.beverage",label:"Beverages (Alcohol/Non-Alcohol)",type:"base",domain:"commodity"},{value:"commodity.machinery",label:"Machinery & Equipment",type:"base",domain:"commodity"},{value:"commodity.precious_metals",label:"Precious Metals & Gems",type:"base",domain:"commodity"},{value:"commodity.timber",label:"Timber & Wood Products",type:"base",domain:"commodity"},{value:"commodity.seafood",label:"Seafood & Marine",type:"base",domain:"commodity"},{value:"commodity",label:"Commodity (General)",type:"general",domain:"commodity"}],bank:[{value:"bank.hsbc",label:"HSBC",type:"base",domain:"bank"},{value:"bank.citi",label:"Citibank",type:"base",domain:"bank"},{value:"bank.citi.us",label:"Citibank US",type:"base",domain:"bank"},{value:"bank.jpmorgan",label:"JP Morgan",type:"base",domain:"bank"},{value:"bank.jpmorgan.us",label:"JP Morgan US",type:"base",domain:"bank"},{value:"bank.scb",label:"Standard Chartered",type:"base",domain:"bank"},{value:"bank.deutsche",label:"Deutsche Bank",type:"base",domain:"bank"},{value:"bank.bnp",label:"BNP Paribas",type:"base",domain:"bank"},{value:"bank.socgen",label:"SociÃ©tÃ© GÃ©nÃ©rale",type:"base",domain:"bank"},{value:"bank.bofa",label:"Bank of America",type:"base",domain:"bank"},{value:"bank.bofa.us",label:"Bank of America US",type:"base",domain:"bank"},{value:"bank.wellsfargo",label:"Wells Fargo",type:"base",domain:"bank"},{value:"bank.wellsfargo.us",label:"Wells Fargo US",type:"base",domain:"bank"},{value:"bank.icbc",label:"ICBC (China)",type:"base",domain:"bank"},{value:"bank.boc",label:"Bank of China",type:"base",domain:"bank"},{value:"bank.mufg",label:"MUFG (Japan)",type:"base",domain:"bank"},{value:"bank.smbc",label:"SMBC (Japan)",type:"base",domain:"bank"},{value:"bank.mizuho",label:"Mizuho (Japan)",type:"base",domain:"bank"},{value:"bank.dbs",label:"DBS (Singapore)",type:"base",domain:"bank"},{value:"bank.uob",label:"UOB (Singapore)",type:"base",domain:"bank"},{value:"bank.kookmin",label:"Kookmin (Korea)",type:"base",domain:"bank"},{value:"bank.shinhan",label:"Shinhan (Korea)",type:"base",domain:"bank"},{value:"bank.ing",label:"ING",type:"base",domain:"bank"},{value:"bank.rabobank",label:"Rabobank",type:"base",domain:"bank"},{value:"bank.commerzbank",label:"Commerzbank",type:"base",domain:"bank"},{value:"bank.unicredit",label:"UniCredit",type:"base",domain:"bank"},{value:"bank.de",label:"German Banks (General)",type:"base",domain:"bank"},{value:"bank.nab",label:"NAB (Australia)",type:"base",domain:"bank"},{value:"bank.anz",label:"ANZ (Australia)",type:"base",domain:"bank"},{value:"bank.emiratesnbd",label:"Emirates NBD",type:"base",domain:"bank"},{value:"bank.mashreq",label:"Mashreq Bank",type:"base",domain:"bank"},{value:"bank.nbk",label:"National Bank of Kuwait",type:"base",domain:"bank"},{value:"bank.qnb",label:"Qatar National Bank",type:"base",domain:"bank"},{value:"bank.snb",label:"Saudi National Bank",type:"base",domain:"bank"},{value:"bank.standardbank",label:"Standard Bank (Africa)",type:"base",domain:"bank"},{value:"bank.itau",label:"ItaÃº (Brazil)",type:"base",domain:"bank"},{value:"bank.china",label:"China Banks (Regional)",type:"general",domain:"bank"},{value:"bank.india",label:"India Banks (Regional)",type:"general",domain:"bank"},{value:"bank.canada",label:"Canada Banks (Regional)",type:"general",domain:"bank"},{value:"bank.europe",label:"Europe Banks (Regional)",type:"general",domain:"bank"},{value:"bank.asean",label:"ASEAN Banks (Regional)",type:"general",domain:"bank"},{value:"bank.latam",label:"Latin America Banks (Regional)",type:"general",domain:"bank"},{value:"bank.mena",label:"MENA Banks (Regional)",type:"general",domain:"bank"},{value:"bank.islamic",label:"Islamic Finance Banks",type:"general",domain:"bank"},{value:"bank",label:"Bank (General)",type:"general",domain:"bank"}],regulations:[{value:"regulations.cn",label:"China (SAFE, GACC, PBOC)",type:"base",domain:"regulations"},{value:"regulations.in",label:"India (RBI, FEMA)",type:"base",domain:"regulations"},{value:"regulations.bd",label:"Bangladesh (BB, LCAF)",type:"base",domain:"regulations"},{value:"regulations.sg",label:"Singapore (MAS, ETA)",type:"base",domain:"regulations"},{value:"regulations.jp",label:"Japan (METI, NACCS)",type:"base",domain:"regulations"},{value:"regulations.kr",label:"South Korea (KITA)",type:"base",domain:"regulations"},{value:"regulations.vn",label:"Vietnam (SBV)",type:"base",domain:"regulations"},{value:"regulations.th",label:"Thailand (BOT)",type:"base",domain:"regulations"},{value:"regulations.my",label:"Malaysia (BNM)",type:"base",domain:"regulations"},{value:"regulations.ph",label:"Philippines (BSP)",type:"base",domain:"regulations"},{value:"regulations.id",label:"Indonesia (BI)",type:"base",domain:"regulations"},{value:"regulations.tw",label:"Taiwan (CBC)",type:"base",domain:"regulations"},{value:"regulations.hk",label:"Hong Kong (HKMA)",type:"base",domain:"regulations"},{value:"regulations.au",label:"Australia (ABF)",type:"base",domain:"regulations"},{value:"regulations.nz",label:"New Zealand (RBNZ)",type:"base",domain:"regulations"},{value:"regulations.kh",label:"Cambodia (NBC)",type:"base",domain:"regulations"},{value:"regulations.pk",label:"Pakistan (SBP)",type:"base",domain:"regulations"},{value:"regulations.eu",label:"European Union (UCC)",type:"base",domain:"regulations"},{value:"regulations.uk",label:"United Kingdom (ETDA)",type:"base",domain:"regulations"},{value:"regulations.de",label:"Germany (BAFA)",type:"base",domain:"regulations"},{value:"regulations.nl",label:"Netherlands",type:"base",domain:"regulations"},{value:"regulations.ae",label:"UAE (CBUAE)",type:"base",domain:"regulations"},{value:"regulations.sa",label:"Saudi Arabia (ZATCA)",type:"base",domain:"regulations"},{value:"regulations.eg",label:"Egypt (CBE)",type:"base",domain:"regulations"},{value:"regulations.qa",label:"Qatar (QCB)",type:"base",domain:"regulations"},{value:"regulations.kw",label:"Kuwait (CBK)",type:"base",domain:"regulations"},{value:"regulations.bh",label:"Bahrain (CBB)",type:"base",domain:"regulations"},{value:"regulations.om",label:"Oman (CBO)",type:"base",domain:"regulations"},{value:"regulations.jo",label:"Jordan (CBJ)",type:"base",domain:"regulations"},{value:"regulations.ma",label:"Morocco (BAM)",type:"base",domain:"regulations"},{value:"regulations.za",label:"South Africa (SARB)",type:"base",domain:"regulations"},{value:"regulations.ng",label:"Nigeria (CBN)",type:"base",domain:"regulations"},{value:"regulations.ke",label:"Kenya (CBK)",type:"base",domain:"regulations"},{value:"regulations.gh",label:"Ghana (BOG)",type:"base",domain:"regulations"},{value:"regulations.kz",label:"Kazakhstan (NBK)",type:"base",domain:"regulations"},{value:"regulations.us",label:"United States",type:"base",domain:"regulations"},{value:"regulations.mx",label:"Mexico (SAT)",type:"base",domain:"regulations"},{value:"regulations.br",label:"Brazil (BCB)",type:"base",domain:"regulations"},{value:"regulations.ar",label:"Argentina (BCRA)",type:"base",domain:"regulations"},{value:"regulations.cl",label:"Chile",type:"base",domain:"regulations"},{value:"regulations.co",label:"Colombia (BanRep)",type:"base",domain:"regulations"},{value:"regulations.pe",label:"Peru (BCRP)",type:"base",domain:"regulations"},{value:"regulations.pa",label:"Panama",type:"base",domain:"regulations"},{value:"regulations.lk",label:"Sri Lanka (CBSL)",type:"base",domain:"regulations"},{value:"regulations.tr",label:"Turkey (CBRT)",type:"base",domain:"regulations"},{value:"regulations",label:"Regulations (General)",type:"general",domain:"regulations"}],law:[{value:"law.ucc.us",label:"US Uniform Commercial Code (UCC)",type:"base",domain:"law"},{value:"law",label:"Law (General)",type:"general",domain:"law"}],mode:[{value:"mode.us",label:"US Mode (ISP98 + UCC)",type:"base",domain:"mode"},{value:"mode",label:"Mode (General)",type:"general",domain:"mode"}]},Jf=Object.values(ap).flat(),jf=Ra(),WN=10,OHe=[],IHe=[{label:"All statuses",value:"all"},{label:"Active",value:"active"},{label:"Draft",value:"draft"},{label:"Archived",value:"archived"},{label:"Scheduled",value:"scheduled"}],LHe=[{label:"All domains",value:"all"},...dv.map(t=>({label:t.label,value:t.value}))],MHe=[{label:"All jurisdictions",value:"all"},{label:"Global",value:"global"},{label:"RCEP",value:"rcep"},{label:"CPTPP",value:"cptpp"},{label:"USMCA",value:"usmca"},{label:"ASEAN",value:"asean"},{label:"Mercosur",value:"mercosur"},{label:"MENA",value:"mena"},{label:"Latin America",value:"latam"},{label:"EU",value:"eu"},{label:"UK",value:"gb"},{label:"Germany",value:"de"},{label:"US",value:"us"},{label:"Canada",value:"ca"},{label:"Mexico",value:"mx"},{label:"Brazil",value:"br"},{label:"China",value:"cn"},{label:"India",value:"in"},{label:"Bangladesh",value:"bd"},{label:"Singapore",value:"sg"},{label:"Japan",value:"jp"},{label:"Korea",value:"kr"},{label:"Vietnam",value:"vn"},{label:"Thailand",value:"th"},{label:"Malaysia",value:"my"},{label:"Indonesia",value:"id"},{label:"Australia",value:"au"},{label:"Hong Kong",value:"hk"},{label:"Taiwan",value:"tw"},{label:"UAE",value:"ae"},{label:"Saudi Arabia",value:"sa"},{label:"Qatar",value:"qa"},{label:"South Africa",value:"za"},{label:"Nigeria",value:"ng"},{label:"Kenya",value:"ke"},{label:"Turkey",value:"tr"},{label:"Pakistan",value:"pk"}],HN=new Map(dv.map(t=>[t.value,t.label])),GN=new Map(Jf.map(t=>[t.value,t]));function BHe(t){if(!t)return"Never";const s=new Date(t),r=new Date().getTime()-s.getTime(),n=Math.floor(r/6e4);if(n<1)return"Just now";if(n<60)return`${n}m ago`;const i=Math.floor(n/60);if(i<24)return`${i}h ago`;const l=Math.floor(i/24);return l<30?`${l}d ago`:`${Math.floor(l/30)}mo ago`}function $He(t){switch(t){case"active":return e.jsx(Q,{variant:"default",className:"bg-green-500/10 text-green-700 dark:text-green-400",children:"Active"});case"draft":return e.jsx(Q,{variant:"secondary",children:"Draft"});case"archived":return e.jsx(Q,{variant:"outline",children:"Archived"});case"scheduled":return e.jsx(Q,{variant:"outline",className:"bg-blue-500/10 text-blue-700 dark:text-blue-400",children:"Scheduled"});default:return e.jsx(Q,{variant:"outline",children:t})}}function UHe(){const t=zt(),{toast:s}=et(),[a,r]=zs(),n=Hi("rules-list"),[i,l]=m.useState(()=>Math.max(1,Number(a.get("rulesPage")??"1"))),[o,d]=m.useState(a.get("rulesSearch")??""),[c,u]=m.useState(a.get("rulesStatus")??"all"),[h,x]=m.useState(a.get("rulesDomain")??"all"),[g,j]=m.useState(a.get("rulesJurisdiction")??"all"),[y,b]=m.useState(a.get("rulesRulebook")??"all"),[N,C]=m.useState([]),[_,A]=m.useState(!0),[k,E]=m.useState(null),[D,R]=m.useState(null),[O,P]=m.useState(!1),[T,B]=m.useState(!1),[G,q]=m.useState(!1),[z,H]=m.useState(!1),[le,Y]=m.useState(null),te=m.useCallback(he=>{const _e=new URLSearchParams(a);Object.entries(he).forEach(([at,nt])=>{nt===null||nt===""?_e.delete(at):_e.set(at,nt)}),_e.toString()!==a.toString()&&r(_e,{replace:!0})},[a,r]),ne=m.useCallback(async()=>{A(!0),R(null);try{const he=await jf.listRulesets({page:1,pageSize:500});C(he.items),l(1)}catch(he){console.error("Failed to load rulesets:",he),R("Unable to load rulesets. Retry shortly or check monitoring services."),C(OHe)}finally{A(!1)}},[]);m.useEffect(()=>{ne()},[ne]),m.useEffect(()=>{if(y!=="all"){const he=GN.get(y);he&&h!==he.domain&&x(he.domain)}},[y]);const ae=m.useMemo(()=>{const _e=(h==="all"?Jf:ap[h]??[]).map(at=>{const st=(HN.get(at.domain)??at.domain.toUpperCase()).split(" (")[0],ht=at.type==="base"?"Base":at.type==="supplement"?"Supplement":"General";return{label:`${st} Â· ${at.label}${at.type!=="general"?` (${ht})`:""}`,value:at.value}});return[{label:"All rulebooks",value:"all"},..._e]},[h]),re=m.useMemo(()=>{let he=[...N];if(c!=="all"&&(he=he.filter(_e=>_e.status===c)),g!=="all"&&(he=he.filter(_e=>_e.jurisdiction===g)),y!=="all")he=he.filter(_e=>_e.domain===y);else if(h!=="all"){const _e=ap[h]?.map(at=>at.value)??[];he=he.filter(at=>_e.includes(at.domain)||at.domain===h)}if(o){const _e=o.toLowerCase();he=he.filter(at=>{const nt=GN.get(at.domain),st=HN.get(nt?.domain??at.domain)??at.domain.toUpperCase();return at.rulebookVersion?.toLowerCase().includes(_e)||at.rulesetVersion?.toLowerCase().includes(_e)||at.domain?.toLowerCase().includes(_e)||at.jurisdiction?.toLowerCase().includes(_e)||(nt?.label.toLowerCase().includes(_e)??!1)||st.toLowerCase().includes(_e)})}return he.sort((_e,at)=>{const nt=new Date(_e.publishedAt??_e.createdAt??0).getTime();return new Date(at.publishedAt??at.createdAt??0).getTime()-nt}),he},[N,c,g,y,h,o]),xe=re.length,ye=Math.max(1,Math.ceil(xe/WN)),ke=m.useMemo(()=>re.slice((i-1)*WN,i*WN),[re,i]);m.useEffect(()=>{const he=Math.max(1,Math.ceil(re.length/WN));i>he&&l(he)},[re.length,i]),m.useEffect(()=>{te({rulesPage:i>1?String(i):null,rulesSearch:o||null,rulesStatus:c!=="all"?c:null,rulesDomain:h!=="all"?h:null,rulesRulebook:y!=="all"?y:null,rulesJurisdiction:g!=="all"?g:null})},[i,o,c,h,y,g,te]);const ze=async he=>{E(he.id);const _e=await jf.publishRuleset(he.id);E(null),P(!1),Y(null),s({title:_e.success?"Ruleset published":"Publish failed",description:_e.message,variant:_e.success?"default":"destructive"}),_e.success&&(await n("publish_ruleset",{entityId:he.id,metadata:{domain:he.domain,jurisdiction:he.jurisdiction}}),ne())},ce=async he=>{E(he.id);const _e=await jf.rollbackRuleset(he.id);E(null),B(!1),Y(null),s({title:_e.success?"Ruleset rolled back":"Rollback failed",description:_e.message,variant:_e.success?"default":"destructive"}),_e.success&&(await n("rollback_ruleset",{entityId:he.id,metadata:{domain:he.domain,jurisdiction:he.jurisdiction}}),ne())},Re=async he=>{E(he.id);const _e=await jf.archiveRuleset(he.id);E(null),q(!1),Y(null),s({title:_e.success?"Ruleset archived":"Archive failed",description:_e.message,variant:_e.success?"default":"destructive"}),_e.success&&(await n("archive_ruleset",{entityId:he.id,metadata:{domain:he.domain,jurisdiction:he.jurisdiction}}),ne())},ie=async(he,_e=!1)=>{E(he.id);const at=await jf.deleteRuleset(he.id,_e);E(null),H(!1),Y(null),s({title:at.success?"Ruleset deleted":"Delete failed",description:at.message,variant:at.success?"default":"destructive"}),at.success&&(await n("delete_ruleset",{entityId:he.id,metadata:{domain:he.domain,jurisdiction:he.jurisdiction,hard:_e}}),ne())},Ne=(he,_e=!0)=>{x(he),_e&&b("all"),l(1)},Ue=he=>{if(b(he),he!=="all"){const _e=GN.get(he);_e&&x(_e.domain)}l(1)},ge=he=>{const _e=GN.get(he);if(!_e)return{primaryLabel:HN.get(he)??he.toUpperCase(),rulebookLabel:he,typeLabel:void 0};const at=HN.get(_e.domain)??_e.domain.toUpperCase(),nt=_e.type==="base"?"Base":_e.type==="supplement"?"Supplement":void 0;return{primaryLabel:at,rulebookLabel:_e.label,typeLabel:nt}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Rules Management",description:"Upload, validate, and publish trade rules (ICC, regulations, etc.) for LC validation.",actions:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:ne,disabled:_,className:"gap-2",children:[e.jsx(Lt,{className:_?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]}),e.jsxs(M,{size:"sm",onClick:()=>t("/admin?section=rules-upload"),className:"gap-2",children:[e.jsx(Hs,{className:"h-4 w-4"})," Upload Ruleset"]})]}),children:e.jsx(nc,{searchPlaceholder:"Search by rulebook, version, domain, or jurisdiction",searchValue:o,onSearchChange:he=>{d(he),l(1)},filterGroups:[{label:"Status",value:c,options:IHe,onChange:he=>{u(String(he||"all")),l(1)},allowClear:!0},{label:"Domain",value:h,options:LHe,onChange:he=>{Ne(String(he||"all"),!0)},allowClear:!0},{label:"Rulebook",value:y,options:ae,onChange:he=>{Ue(String(he||"all"))},allowClear:!0},{label:"Jurisdiction",value:g,options:MHe,onChange:he=>{j(String(he||"all")),l(1)},allowClear:!0}]})}),D&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700 dark:text-amber-400",children:D}),e.jsx(_i,{columns:[{key:"rulebookVersion",header:"Rulebook",render:he=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium",children:he.rulebookVersion}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["v",he.rulesetVersion]})]})},{key:"domain",header:"Domain",render:he=>{const{primaryLabel:_e,rulebookLabel:at,typeLabel:nt}=ge(he.domain);return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Q,{variant:"outline",className:"w-fit",children:_e}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[at,nt?` Â· ${nt}`:""]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:he.jurisdiction})]})}},{key:"status",header:"Status",render:he=>$He(he.status)},{key:"ruleCount",header:"Rules",render:he=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:he.ruleCount})]})},{key:"publishedAt",header:"Published",render:he=>e.jsx("div",{className:"flex flex-col gap-1",children:he.publishedAt?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm",children:BHe(he.publishedAt)}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(he.publishedAt).toLocaleDateString()})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Not published"})})},{key:"actions",header:"",render:he=>e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"sm",className:"h-8 w-8 p-0",children:e.jsx(dp,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[he.status==="draft"&&e.jsxs(is,{onClick:()=>{Y(he),P(!0)},disabled:k===he.id,children:[e.jsx(Qs,{className:"mr-2 h-4 w-4"})," Publish"]}),he.status==="archived"&&e.jsxs(is,{onClick:()=>{Y(he),B(!0)},disabled:k===he.id,children:[e.jsx(mt,{className:"mr-2 h-4 w-4"})," Rollback"]}),he.status!=="archived"&&e.jsxs(is,{onClick:()=>{Y(he),q(!0)},disabled:k===he.id,children:[e.jsx(m5,{className:"mr-2 h-4 w-4"})," Archive"]}),e.jsx(Dc,{}),e.jsxs(is,{onClick:async()=>{const _e=await jf.getRulesetAudit(he.id);s({title:"Audit Log",description:`Found ${_e.length} audit entries for this ruleset.`})},children:[e.jsx(Be,{className:"mr-2 h-4 w-4"})," View Audit Log"]}),e.jsx(Dc,{}),e.jsxs(is,{onClick:()=>{Y(he),H(!0)},disabled:k===he.id,className:"text-destructive focus:text-destructive",children:[e.jsx(ia,{className:"mr-2 h-4 w-4"})," Delete"]})]})]})}],data:ke,loading:_,emptyState:e.jsx(Wr,{icon:e.jsx(Be,{className:"h-8 w-8"}),title:"No rulesets found",description:"Upload your first ruleset to get started with LC validation rules.",action:e.jsxs(M,{size:"sm",onClick:()=>t("/admin?section=rules-upload"),children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"})," Upload Ruleset"]})})}),ye>1&&e.jsx(uo,{children:e.jsxs(mo,{children:[e.jsx(Ca,{children:e.jsx(ho,{href:"#",onClick:he=>{he.preventDefault(),i>1&&l(i-1)},className:i===1?"pointer-events-none opacity-50":""})}),e.jsx(Ca,{children:e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Page ",i," of ",ye]})}),e.jsx(Ca,{children:e.jsx(xo,{href:"#",onClick:he=>{he.preventDefault(),i<ye&&l(i+1)},className:i===ye?"pointer-events-none opacity-50":""})})]})}),e.jsx(wt,{open:O,onOpenChange:P,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Publish Ruleset"}),e.jsx(_t,{children:"Publishing this ruleset will make it active and archive any currently active ruleset for the same domain and jurisdiction. This action cannot be undone."})]}),le&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rulebook:"})," ",le.rulebookVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Domain:"})," ",le.domain]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Jurisdiction:"})," ",le.jurisdiction]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rules:"})," ",le.ruleCount]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>P(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>le&&ze(le),disabled:!le||k===le.id,children:k===le?.id?"Publishing...":"Publish"})]})]})}),e.jsx(wt,{open:T,onOpenChange:B,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Rollback Ruleset"}),e.jsx(_t,{children:"Rolling back will make this ruleset active again and archive the currently active ruleset for the same domain and jurisdiction. This action cannot be undone."})]}),le&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rulebook:"})," ",le.rulebookVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Domain:"})," ",le.domain]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Jurisdiction:"})," ",le.jurisdiction]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rules:"})," ",le.ruleCount]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>B(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>le&&ce(le),disabled:!le||k===le.id,children:k===le?.id?"Rolling back...":"Rollback"})]})]})}),e.jsx(wt,{open:G,onOpenChange:q,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Archive Ruleset"}),e.jsx(_t,{children:"Archiving this ruleset will deactivate all its rules. The ruleset will remain in the system and can be restored via rollback."})]}),le&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rulebook:"})," ",le.rulebookVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Domain:"})," ",le.domain]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Jurisdiction:"})," ",le.jurisdiction]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rules:"})," ",le.ruleCount]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>q(!1),children:"Cancel"}),e.jsx(M,{onClick:()=>le&&Re(le),disabled:!le||k===le.id,children:k===le?.id?"Archiving...":"Archive"})]})]})}),e.jsx(wt,{open:z,onOpenChange:H,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Delete Ruleset"}),e.jsx(_t,{children:'Are you sure you want to delete this ruleset? This will archive the ruleset and deactivate all its rules. For permanent deletion, use the "Delete Permanently" option.'})]}),le&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rulebook:"})," ",le.rulebookVersion]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Domain:"})," ",le.domain]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Jurisdiction:"})," ",le.jurisdiction]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-medium",children:"Rules:"})," ",le.ruleCount]})]}),e.jsxs(ms,{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>H(!1),children:"Cancel"}),e.jsx(M,{variant:"destructive",onClick:()=>le&&ie(le,!0),disabled:!le||k===le.id,children:k===le?.id?"Deleting...":"Delete Permanently"}),e.jsx(M,{onClick:()=>le&&ie(le,!1),disabled:!le||k===le.id,children:k===le?.id?"Archiving...":"Archive Instead"})]})]})})]})}const zHe=[{label:"All documents",value:"all"},{label:"Letter of Credit",value:"lc"},{label:"Commercial Invoice",value:"invoice"},{label:"Bill of Lading",value:"bol"},{label:"Guarantee",value:"guarantee"}],qHe=[{label:"All severities",value:"all"},{label:"Info",value:"info"},{label:"Warning",value:"warning"},{label:"Fail",value:"fail"},{label:"Risk",value:"risk"}],VHe=[{label:"Active",value:"active"},{label:"Inactive",value:"inactive"},{label:"All",value:"all"}];function WHe(){const t=Ra(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(1),[l]=m.useState(25),[o,d]=m.useState(0),[c,u]=m.useState(!0),[h,x]=m.useState(""),[g,j]=m.useState(null),[y,b]=m.useState(""),[N,C]=m.useState(null),[_,A]=m.useState(!1),[k,E]=m.useState({domain:"all",documentType:"all",severity:"all",status:"active"}),D=m.useCallback(async()=>{u(!0);try{const z=await t.listRules({page:n,pageSize:l,domain:k.domain!=="all"?k.domain:void 0,documentType:k.documentType!=="all"?k.documentType:void 0,severity:k.severity!=="all"?k.severity:void 0,isActive:k.status==="all"?void 0:k.status==="active",search:h||void 0});r(z.items),d(z.total)}catch(z){console.error(z),s({title:"Unable to load rules",description:z instanceof Error?z.message:"Unexpected error",variant:"destructive"})}finally{u(!1)}},[t,k,n,l,h,s]);m.useEffect(()=>{D()},[D]);const R=z=>{j(z),b(JSON.stringify(z,null,2)),C(null)},O=()=>{j(null),b(""),C(null)},P=async(z,H)=>{try{const le=await t.updateRule(z.ruleId,{isActive:H});r(Y=>Y.map(te=>te.ruleId===z.ruleId?le:te)),g?.ruleId===z.ruleId&&j(le),s({title:H?"Rule activated":"Rule archived"})}catch(le){console.error(le),s({title:"Failed to update rule",description:le instanceof Error?le.message:"Unexpected error",variant:"destructive"})}},T=async(z,H)=>{try{const le=await t.updateRule(z.ruleId,{severity:H});r(Y=>Y.map(te=>te.ruleId===z.ruleId?le:te)),g?.ruleId===z.ruleId&&j(le)}catch(le){s({title:"Failed to update severity",description:le instanceof Error?le.message:"Unexpected error",variant:"destructive"})}},B=async()=>{if(g)try{A(!0);const z=JSON.parse(y),H=await t.updateRule(g.ruleId,{ruleJson:z});r(le=>le.map(Y=>Y.ruleId===H.ruleId?H:Y)),j(H),s({title:"Rule updated"})}catch(z){console.error(z),C(z instanceof Error?z.message:"Failed to parse JSON payload")}finally{A(!1)}},G=async()=>{try{await t.bulkSyncRules(),s({title:"Bulk sync triggered",description:"Active rulesets are being refreshed."}),D()}catch(z){s({title:"Bulk sync failed",description:z instanceof Error?z.message:"Unexpected error",variant:"destructive"})}},q=Math.max(1,Math.ceil(o/l));return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Rules Governance"}),e.jsx("p",{className:"text-muted-foreground",children:"Inspect, edit, and sync individual trade rules without touching the core ruleset JSON."})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsx(oe,{placeholder:"Search by rule ID, title, or description",value:h,onChange:z=>{x(z.target.value),i(1)},className:"max-w-sm"}),e.jsxs(Te,{value:k.domain,onValueChange:z=>{E(H=>({...H,domain:z})),i(1)},children:[e.jsx(Pe,{className:"w-[200px]",children:e.jsx(Fe,{placeholder:"Domain"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All domains"}),dv.map(z=>e.jsx(K,{value:z.value,children:z.label},z.value))]})]}),e.jsxs(Te,{value:k.documentType,onValueChange:z=>{E(H=>({...H,documentType:z})),i(1)},children:[e.jsx(Pe,{className:"w-[200px]",children:e.jsx(Fe,{placeholder:"Document type"})}),e.jsx(De,{children:zHe.map(z=>e.jsx(K,{value:z.value,children:z.label},z.value))})]}),e.jsxs(Te,{value:k.severity,onValueChange:z=>{E(H=>({...H,severity:z})),i(1)},children:[e.jsx(Pe,{className:"w-[160px]",children:e.jsx(Fe,{placeholder:"Severity"})}),e.jsx(De,{children:qHe.map(z=>e.jsx(K,{value:z.value,children:z.label},z.value))})]}),e.jsxs(Te,{value:k.status,onValueChange:z=>{E(H=>({...H,status:z})),i(1)},children:[e.jsx(Pe,{className:"w-[140px]",children:e.jsx(Fe,{placeholder:"Status"})}),e.jsx(De,{children:VHe.map(z=>e.jsx(K,{value:z.value,children:z.label},z.value))})]}),e.jsxs(M,{variant:"outline",onClick:D,disabled:c,className:"gap-2",children:[c?e.jsx(ct,{className:"h-4 w-4 animate-spin"}):e.jsx(Lt,{className:"h-4 w-4"}),"Refresh"]}),e.jsxs(M,{variant:"secondary",onClick:G,className:"gap-2",children:[e.jsx(cV,{className:"h-4 w-4"}),"Bulk Sync Active Rules"]})]})]}),e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Rules"}),e.jsxs(ue,{children:[o.toLocaleString()," rules found â€¢ Page ",n," of ",q]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:()=>i(z=>Math.max(1,z-1)),disabled:n===1||c,children:"Previous"}),e.jsx(M,{variant:"outline",onClick:()=>i(z=>Math.min(q,z+1)),disabled:n===q||c,children:"Next"})]})]}),e.jsx(U,{className:"p-0",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Rule"}),e.jsx(je,{children:"Domain"}),e.jsx(je,{children:"Document"}),e.jsx(je,{children:"Severity"}),e.jsx(je,{children:"Requires LLM"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Updated"})]})}),e.jsx(oa,{children:c?e.jsx(At,{children:e.jsx(fe,{colSpan:7,className:"text-center py-10",children:e.jsx(ct,{className:"h-5 w-5 animate-spin mx-auto"})})}):a.length===0?e.jsx(At,{children:e.jsx(fe,{colSpan:7,className:"text-center py-10 text-muted-foreground",children:"No rules match your filters."})}):a.map(z=>e.jsxs(At,{className:"cursor-pointer hover:bg-muted/40",onClick:()=>R(z),children:[e.jsxs(fe,{className:"space-y-1",children:[e.jsx("div",{className:"font-medium",children:z.ruleId}),e.jsx("div",{className:"text-sm text-muted-foreground",children:z.title})]}),e.jsx(fe,{children:z.domain.toUpperCase()}),e.jsx(fe,{className:"capitalize",children:z.documentType}),e.jsx(fe,{children:e.jsx(Q,{variant:z.severity==="fail"?"destructive":"secondary",children:z.severity})}),e.jsx(fe,{children:z.requiresLlm?"Yes":"No"}),e.jsx(fe,{children:e.jsx(Q,{variant:z.isActive?"default":"outline",children:z.isActive?"Active":"Inactive"})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:new Date(z.updatedAt).toLocaleString()})]},z.ruleId))})]})})]}),e.jsx(wt,{open:!!g,onOpenChange:z=>z?null:O(),children:e.jsx(yt,{className:"max-w-3xl",children:g&&e.jsxs(e.Fragment,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:g.ruleId}),e.jsx(_t,{children:g.title})]}),e.jsxs("div",{className:"grid gap-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Toggle availability in the governance table."})]}),e.jsx(js,{checked:g.isActive,onCheckedChange:z=>P(g,z)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"space-y-1",children:e.jsx("p",{className:"text-sm text-muted-foreground",children:"Severity"})}),e.jsxs(Te,{value:g.severity,onValueChange:z=>T(g,z),children:[e.jsx(Pe,{className:"w-[160px]",children:e.jsx(Fe,{})}),e.jsx(De,{children:["info","warning","fail","risk"].map(z=>e.jsx(K,{value:z,children:z},z))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Rule JSON"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Edit the raw rule payload (must be valid JSON)."})]})}),e.jsx(Zt,{value:y,onChange:z=>{b(z.target.value),C(null)},className:"font-mono text-sm min-h-[240px]"}),N&&e.jsx("p",{className:"text-sm text-destructive",children:N})]})]}),e.jsxs(ms,{className:"gap-2",children:[e.jsx(M,{variant:"outline",onClick:O,children:"Cancel"}),e.jsxs(M,{onClick:B,disabled:_,children:[_?e.jsx(ct,{className:"h-4 w-4 animate-spin mr-2"}):null,"Save Changes"]})]})]})})})]})}const GU=Ra(),HHe=[{value:"global",label:"Global"},{value:"rcep",label:"RCEP (Asia-Pacific)"},{value:"cptpp",label:"CPTPP (Trans-Pacific)"},{value:"usmca",label:"USMCA (North America)"},{value:"africa",label:"Africa (AfCFTA)"},{value:"acfta",label:"ACFTA (ASEAN-China)"},{value:"mercosur",label:"Mercosur (South America)"},{value:"asean",label:"ASEAN"},{value:"eu_gb",label:"EU-UK"},{value:"latam",label:"Latin America"},{value:"mena",label:"MENA (Middle East/N. Africa)"},{value:"eu",label:"European Union"},{value:"gb",label:"United Kingdom"},{value:"de",label:"Germany"},{value:"nl",label:"Netherlands"},{value:"us",label:"United States"},{value:"ca",label:"Canada"},{value:"mx",label:"Mexico"},{value:"br",label:"Brazil"},{value:"ar",label:"Argentina"},{value:"cl",label:"Chile"},{value:"co",label:"Colombia"},{value:"pe",label:"Peru"},{value:"pa",label:"Panama"},{value:"cn",label:"China"},{value:"in",label:"India"},{value:"bd",label:"Bangladesh"},{value:"sg",label:"Singapore"},{value:"jp",label:"Japan"},{value:"kr",label:"South Korea"},{value:"vn",label:"Vietnam"},{value:"th",label:"Thailand"},{value:"my",label:"Malaysia"},{value:"ph",label:"Philippines"},{value:"id",label:"Indonesia"},{value:"tw",label:"Taiwan"},{value:"hk",label:"Hong Kong"},{value:"au",label:"Australia"},{value:"nz",label:"New Zealand"},{value:"kh",label:"Cambodia"},{value:"pk",label:"Pakistan"},{value:"lk",label:"Sri Lanka"},{value:"ae",label:"UAE"},{value:"sa",label:"Saudi Arabia"},{value:"eg",label:"Egypt"},{value:"qa",label:"Qatar"},{value:"kw",label:"Kuwait"},{value:"bh",label:"Bahrain"},{value:"om",label:"Oman"},{value:"jo",label:"Jordan"},{value:"ma",label:"Morocco"},{value:"za",label:"South Africa"},{value:"ng",label:"Nigeria"},{value:"ke",label:"Kenya"},{value:"gh",label:"Ghana"},{value:"tr",label:"Turkey"},{value:"kz",label:"Kazakhstan"}];function GHe(){const t=zt(),{toast:s}=et(),a=Hi("rules-upload"),[r,n]=m.useState(null),[i,l]=m.useState(""),[o,d]=m.useState(""),[c,u]=m.useState("global"),[h,x]=m.useState("1.0.0"),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState(""),[_,A]=m.useState(""),[k,E]=m.useState(!1),[D,R]=m.useState(null),[O,P]=m.useState(null),[T,B]=m.useState([]);m.useEffect(()=>{(async()=>{try{const ne=await GU.listRulesets({page:1,pageSize:1e3});B(ne.items)}catch(ne){console.error("Failed to fetch rulesets:",ne)}})()},[]);const G=te=>{const ae=te.replace(/\.json$/i,"").split("-");if(ae.length<3)return null;const re=ae[0],xe=ae[1],ke=ae.slice(2).join("-").match(/^v(\d+\.\d+\.\d+)$/);return ke?{domain:re,rulebook_version:xe,ruleset_version:ke[1]}:null},q=m.useMemo(()=>i?ap[i]??[]:[],[i]),z=te=>{l(te),d("")},H=te=>{const ne=te.target.files?.[0];if(ne){if(!ne.name.endsWith(".json")){s({title:"Invalid file type",description:"Please upload a JSON file.",variant:"destructive"});return}const ae=G(ne.name);ae?(l(ae.domain),j(ae.rulebook_version),x(ae.ruleset_version),s({title:"Metadata auto-detected",description:`Domain: ${ae.domain}, Rulebook: ${ae.rulebook_version}, Version: v${ae.ruleset_version}`})):s({title:"Could not auto-detect metadata",description:"Please manually enter domain, rulebook version, and ruleset version.",variant:"destructive"}),n(ne),R(null)}},le=async()=>{if(!r){s({title:"No file selected",description:"Please select a JSON file to validate.",variant:"destructive"});return}try{const te=await r.text(),ne=JSON.parse(te);if(!Array.isArray(ne)){R({valid:!1,ruleCount:0,errors:["Ruleset must be an array of rules"],warnings:[]});return}const ae=[],re=[];ne.length===0&&re.push("Ruleset contains no rules"),ne.forEach((xe,ye)=>{xe.rule_id||ae.push(`Rule ${ye+1}: Missing rule_id`),xe.domain||re.push(`Rule ${ye+1}: Missing domain (will use upload param)`),xe.jurisdiction||re.push(`Rule ${ye+1}: Missing jurisdiction (will use upload param)`);const ke=xe.conditions&&Array.isArray(xe.conditions),ze=xe.condition&&Array.isArray(xe.condition);!ke&&!ze&&re.push(`Rule ${ye+1}: Missing conditions array (will default to empty)`)}),R({valid:ae.length===0,ruleCount:ne.length,errors:ae,warnings:re}),ae.length===0?s({title:"Validation successful",description:`Found ${ne.length} rules. Ready to upload.`}):s({title:"Validation failed",description:`Found ${ae.length} error(s). Please fix them before uploading.`,variant:"destructive"})}catch(te){R({valid:!1,ruleCount:0,errors:[`Invalid JSON: ${te instanceof Error?te.message:String(te)}`],warnings:[]}),s({title:"Invalid JSON",description:te instanceof Error?te.message:"Failed to parse JSON file",variant:"destructive"})}},Y=async()=>{if(!r){s({title:"No file selected",description:"Please select a JSON file.",variant:"destructive"});return}if(!r.name.toLowerCase().endsWith(".json")){s({title:"Invalid file type",description:"Only .json files are allowed.",variant:"destructive"});return}if(!i){s({title:"Domain required",description:"Please select a domain.",variant:"destructive"});return}if(!g){s({title:"Rulebook version required",description:"Please enter the rulebook version (e.g., UCP600:2007).",variant:"destructive"});return}if(!o){s({title:"Rulebook required",description:"Please select a rulebook.",variant:"destructive"});return}if(T.some(xe=>xe.domain===i&&xe.rulebook_version===g&&xe.ruleset_version===h&&xe.status==="draft")){s({title:"Draft already exists",description:`A DRAFT version ${h} already exists.
apps\web\dist\assets\index-Bz84JA8h.js:591:Please delete or publish it first.`,variant:"destructive"});return}const ne=await r.text();try{JSON.parse(ne)}catch{s({title:"Invalid JSON",description:"File contains invalid JSON.",variant:"destructive"});return}try{const xe=JSON.parse(ne);if(!Array.isArray(xe)||xe.length===0){s({title:"Invalid ruleset file",description:"Invalid ruleset file: missing rules[].",variant:"destructive"});return}}catch{s({title:"Validation failed",description:"Ruleset file failed validation.",variant:"destructive"});return}if(D&&!D.valid){s({title:"Validation required",description:"Please validate the file and fix errors before uploading.",variant:"destructive"});return}if(!(ap[i]??[]).find(xe=>xe.value===o)){s({title:"Invalid rulebook selection",description:"Selected rulebook is not valid for the chosen domain.",variant:"destructive"});return}E(!0);try{const xe=await GU.uploadRuleset(r,o,c,h,g,y||void 0,N||void 0,_||void 0);xe.success&&xe.data?(await a("upload_ruleset",{entityId:xe.data.ruleset.id,metadata:{domain:o,jurisdiction:c,ruleCount:xe.data.validation.ruleCount}}),s({title:"Ruleset uploaded successfully",description:`Uploaded ${xe.data.validation.ruleCount} rules. Status: ${xe.data.ruleset.status}`}),n(null),l(""),u("global"),x("1.0.0"),j(""),d(""),b(""),C(""),A(""),R(null),P(xe.data.importSummary??null),t("/admin?section=rules-list")):s({title:"Upload failed",description:xe.message||"Failed to upload ruleset",variant:"destructive"})}catch(xe){s({title:"Upload error",description:xe instanceof Error?xe.message:"An unexpected error occurred",variant:"destructive"})}finally{E(!1)}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Upload Ruleset",description:"Upload a JSON file containing trade rules for LC validation. The file will be validated against the schema before being saved.",actions:e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>t("/admin?section=rules-list"),className:"gap-2",children:[e.jsx(ma,{className:"h-4 w-4"})," Back to List"]})}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Upload File"}),e.jsx(ue,{children:"Select a JSON file containing your ruleset"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"file",children:"Ruleset JSON File"}),e.jsx(oe,{id:"file",type:"file",accept:".json",onChange:H,disabled:k}),r&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Be,{className:"h-4 w-4"}),e.jsx("span",{children:r.name}),e.jsxs("span",{className:"text-xs",children:["(",(r.size/1024).toFixed(2)," KB)"]})]})]}),e.jsx(M,{onClick:le,disabled:!r||k,variant:"outline",className:"w-full",children:"Validate File"}),D&&e.jsxs(zo,{variant:D.valid?"default":"destructive",children:[D.valid?e.jsx(Qs,{className:"h-4 w-4"}):e.jsx(bs,{className:"h-4 w-4"}),e.jsx(Tc,{children:D.valid?"Validation Passed":"Validation Failed"}),e.jsx(qo,{children:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Rules found:"})," ",D.ruleCount]}),D.errors.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Errors:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:D.errors.map((te,ne)=>e.jsx("li",{className:"text-sm",children:te},ne))})]}),D.warnings.length>0&&e.jsxs("div",{children:[e.jsx("strong",{children:"Warnings:"}),e.jsx("ul",{className:"list-disc list-inside mt-1",children:D.warnings.map((te,ne)=>e.jsx("li",{className:"text-sm",children:te},ne))})]})]})})]}),O&&e.jsxs(zo,{children:[e.jsx(Tc,{children:"Import Summary"}),e.jsx(qo,{children:e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("p",{children:["Processed ",O.totalRules," rules â€¢ Inserted ",O.inserted," â€¢ Updated ",O.updated," â€¢ Skipped ",O.skipped]}),O.warnings.length>0&&e.jsxs("p",{children:["Warnings: ",O.warnings.join(", ")]}),O.errors.length>0&&e.jsxs("p",{className:"text-destructive",children:["Errors: ",O.errors.join(", ")]})]})})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Ruleset Metadata"}),e.jsx(ue,{children:"Provide information about this ruleset"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"domain",children:"Domain *"}),e.jsxs(Te,{value:i,onValueChange:z,disabled:k,children:[e.jsx(Pe,{id:"domain",children:e.jsx(Fe,{placeholder:"Select domain"})}),e.jsx(De,{children:dv.map(te=>e.jsx(K,{value:te.value,children:te.label},te.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"rulebook",children:"Rulebook *"}),e.jsxs(Te,{value:o,onValueChange:d,disabled:k||!i,children:[e.jsx(Pe,{id:"rulebook",children:e.jsx(Fe,{placeholder:i?"Select rulebook":"Select domain first"})}),e.jsx(De,{children:q.map(te=>e.jsxs(K,{value:te.value,children:[te.label,te.type==="base"?" (Base)":te.type==="supplement"?" (Supplement)":""]},te.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"jurisdiction",children:"Jurisdiction"}),e.jsxs(Te,{value:c,onValueChange:u,disabled:k,children:[e.jsx(Pe,{id:"jurisdiction",children:e.jsx(Fe,{})}),e.jsx(De,{children:HHe.map(te=>e.jsx(K,{value:te.value,children:te.label},te.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"rulebookVersion",children:"Rulebook Version *"}),e.jsx(oe,{id:"rulebookVersion",placeholder:"e.g., UCP600:2007",value:g,onChange:te=>j(te.target.value),disabled:k})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"rulesetVersion",children:"Ruleset Version"}),e.jsx(oe,{id:"rulesetVersion",placeholder:"e.g., 1.0.0",value:h,onChange:te=>x(te.target.value),disabled:k})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"effectiveFrom",children:"Effective From (optional)"}),e.jsx(oe,{id:"effectiveFrom",type:"datetime-local",value:y,onChange:te=>b(te.target.value),disabled:k})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"effectiveTo",children:"Effective To (optional)"}),e.jsx(oe,{id:"effectiveTo",type:"datetime-local",value:N,onChange:te=>C(te.target.value),disabled:k})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"notes",children:"Notes (optional)"}),e.jsx(Zt,{id:"notes",placeholder:"Additional information about this ruleset...",value:_,onChange:te=>A(te.target.value),disabled:k,rows:3})]}),e.jsx(M,{onClick:Y,disabled:k||!r||!i||!o||!g,className:"w-full",children:k?e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"mr-2 h-4 w-4 animate-spin"})," Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"mr-2 h-4 w-4"})," Upload Ruleset"]})})]})]})]})]})}const KU=Ra(),KHe=[{label:"All domains",value:"all"},...dv.map(t=>({label:t.label,value:t.value}))],YHe=[{label:"All jurisdictions",value:"all"},{label:"Global",value:"global"},{label:"EU",value:"eu"},{label:"US",value:"us"},{label:"Bangladesh",value:"bd"},{label:"India",value:"in"}],CA=new Map(dv.map(t=>[t.value,t.label])),KN=new Map(Jf.map(t=>[t.value,t])),ZHe=["global","eu","us","bd","in"];function JHe(){const{toast:t}=et(),[s,a]=zs(),[r,n]=m.useState(s.get("activeDomain")??"all"),[i,l]=m.useState(s.get("activeRulebook")??"all"),[o,d]=m.useState(s.get("activeJurisdiction")??"all"),[c,u]=m.useState([]),[h,x]=m.useState(!0),[g,j]=m.useState(null),[y,b]=m.useState(null),N=(D,R=!0)=>{n(D),R&&l("all")},C=D=>{if(l(D),D!=="all"){const R=KN.get(D);R&&n(R.domain)}},_=D=>{const R=D.rulebookMeta??KN.get(D.domain);if(!R)return{primaryLabel:CA.get(D.domain)??D.domain.toUpperCase(),rulebookLabel:D.domain,typeLabel:void 0};const O=CA.get(R.domain)??R.domain.toUpperCase(),P=R.type==="base"?"Base":R.type==="supplement"?"Supplement":void 0;return{primaryLabel:O,rulebookLabel:R.label,typeLabel:P}},A=m.useMemo(()=>{const R=(r==="all"?Jf:ap[r]??[]).map(O=>{const T=(CA.get(O.domain)??O.domain.toUpperCase()).split(" (")[0],B=O.type==="base"?"Base":O.type==="supplement"?"Supplement":"General";return{label:`${T} Â· ${O.label}${O.type!=="general"?` (${B})`:""}`,value:O.value}});return[{label:"All rulebooks",value:"all"},...R]},[r]),k=m.useCallback(async()=>{x(!0),j(null);try{const D=await KU.getAllActiveRulesets(!1),R=i!=="all"?Jf.filter(G=>G.value===i):r==="all"?Jf:ap[r]??[],O=o==="all"?ZHe:[o],P=new Set(R.map(G=>G.value)),T=new Set(O),B=D.filter(G=>{const q=G.ruleset,z=r==="all"||P.has(q.domain)||r&&q.domain.startsWith(r),H=i==="all"||P.has(q.domain),le=o==="all"||T.has(q.jurisdiction||"global");return z&&H&&le}).map(G=>{const q=G.ruleset,z=KN.get(q.domain);return{...q,signedUrl:G.signedUrl,rulebookMeta:z}});B.sort((G,q)=>{const z=new Date(G.publishedAt??G.createdAt??0).getTime();return new Date(q.publishedAt??q.createdAt??0).getTime()-z}),u(B)}catch(D){console.error("Failed to load active rulesets:",D),j("Unable to load active rulesets. Retry shortly or check monitoring services."),u([])}finally{x(!1)}},[r,i,o]);m.useEffect(()=>{k()},[k]),m.useEffect(()=>{if(i!=="all"){const D=KN.get(i);D&&r!==D.domain&&n(D.domain)}},[i]),m.useEffect(()=>{const D=new URLSearchParams(s);r!=="all"?D.set("activeDomain",r):D.delete("activeDomain"),i!=="all"?D.set("activeRulebook",i):D.delete("activeRulebook"),o!=="all"?D.set("activeJurisdiction",o):D.delete("activeJurisdiction"),D.toString()!==s.toString()&&a(D,{replace:!0})},[r,i,o,s,a]);const E=async D=>{b(D.id);try{const R=await KU.getActiveRuleset(D.domain,D.jurisdiction??"global",!0);if(R.signedUrl)window.open(R.signedUrl,"_blank"),t({title:"Download started",description:`Downloading ${D.rulebookVersion} ruleset...`});else if(R.content){const O=new Blob([JSON.stringify(R.content,null,2)],{type:"application/json"}),P=URL.createObjectURL(O),T=document.createElement("a");T.href=P,T.download=`${D.domain}-${D.jurisdiction}-${D.rulesetVersion}.json`,document.body.appendChild(T),T.click(),document.body.removeChild(T),URL.revokeObjectURL(P),t({title:"Download complete",description:`${D.rulebookVersion} ruleset downloaded.`})}else throw new Error("No download URL or content available")}catch(R){console.error("Download failed:",R),t({title:"Download failed",description:R instanceof Error?R.message:"Unable to download ruleset.",variant:"destructive"})}finally{b(null)}};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsx(va,{title:"Active Rulesets",description:"View and download currently active rulesets used for LC validation.",actions:e.jsxs(M,{variant:"outline",size:"sm",onClick:k,disabled:h,className:"gap-2",children:[e.jsx(Lt,{className:h?"h-4 w-4 animate-spin":"h-4 w-4"})," Refresh"]}),children:e.jsx(nc,{searchPlaceholder:"Filter by domain, rulebook, or jurisdiction",filterGroups:[{label:"Domain",value:r,options:KHe,onChange:D=>{N(String(D||"all"),!0)},allowClear:!0},{label:"Rulebook",value:i,options:A,onChange:D=>{C(String(D||"all"))},allowClear:!0},{label:"Jurisdiction",value:o,options:YHe,onChange:D=>{d(String(D||"all"))},allowClear:!0}]})}),g&&e.jsx("div",{className:"rounded-lg border border-amber-500/40 bg-amber-500/10 px-4 py-3 text-sm text-amber-700 dark:text-amber-400",children:g}),e.jsx(_i,{columns:[{key:"rulebookVersion",header:"Rulebook",render:D=>e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"font-medium",children:D.rulebookVersion}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["v",D.rulesetVersion]})]})},{key:"domain",header:"Domain",render:D=>{const{primaryLabel:R,rulebookLabel:O,typeLabel:P}=_(D);return e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(Q,{variant:"outline",className:"w-fit",children:R}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:[O,P?` Â· ${P}`:""]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:D.jurisdiction})]})}},{key:"ruleCount",header:"Rules",render:D=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{children:D.ruleCount})]})},{key:"publishedAt",header:"Published",render:D=>e.jsx("div",{className:"flex flex-col gap-1",children:D.publishedAt?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-sm",children:new Date(D.publishedAt).toLocaleDateString()}),e.jsx("span",{className:"text-xs text-muted-foreground",children:new Date(D.publishedAt).toLocaleTimeString()})]}):e.jsx("span",{className:"text-sm text-muted-foreground",children:"Not published"})})},{key:"actions",header:"",render:D=>e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>E(D),disabled:y===D.id,className:"gap-2",children:[e.jsx(Gt,{className:"h-4 w-4"}),y===D.id?"Downloading...":"Download JSON"]})}],data:c,loading:h,emptyState:e.jsx(Wr,{icon:e.jsx(Be,{className:"h-8 w-8"}),title:"No active rulesets found",description:r!=="all"||o!=="all"?"No active rulesets match the selected filters. Try adjusting your filters or upload a new ruleset.":"No active rulesets are currently published. Upload and publish a ruleset to get started."})})]})}const YN="https://trdrhub-api.onrender.com";function QHe(){const{toast:t}=et(),[s,a]=m.useState([]),[r,n]=m.useState(!0),[i,l]=m.useState(null),[o,d]=m.useState(!1),[c,u]=m.useState(!1),[h,x]=m.useState(!1),[g,j]=m.useState(!1),[y,b]=m.useState(null),[N,C]=m.useState(null),[_,A]=m.useState({bank_name:"",legal_name:"",country:"",contact_email:"",contact_name:"",regulator_id:"",owner_email:"",owner_name:""}),[k,E]=m.useState({email:"",name:"",role:"bank_officer"}),[D,R]=m.useState(null),[O,P]=m.useState(!1),[T,B]=m.useState(!1),G=m.useCallback(async()=>{n(!0);try{const Y=await fetch(`${YN}/admin/banks`,{credentials:"include"});if(!Y.ok)throw new Error("Failed to load banks");const te=await Y.json();a(te),l(null)}catch(Y){console.error(Y),l("Unable to load banks. You may not have admin permissions.")}finally{n(!1)}},[]);m.useEffect(()=>{G()},[G]);const q=async Y=>{try{const te=await fetch(`${YN}/admin/banks/${Y}`,{credentials:"include"});if(!te.ok)throw new Error("Failed to load bank details");const ne=await te.json();b(ne),u(!0)}catch(te){console.error(te),t({title:"Error",description:"Failed to load bank details",variant:"destructive"})}},z=async()=>{if(!_.bank_name||!_.owner_email||!_.owner_name){t({title:"Missing fields",description:"Please fill in all required fields",variant:"destructive"});return}B(!0);try{const Y=await fetch(`${YN}/admin/banks`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(_)}),te=await Y.json();if(!Y.ok)throw new Error(te.detail||"Failed to create bank");t({title:"Bank created",description:`${_.bank_name} has been created successfully`}),te.temp_password&&(R({email:_.owner_email,password:te.temp_password,bankName:_.bank_name}),j(!0)),d(!1),A({bank_name:"",legal_name:"",country:"",contact_email:"",contact_name:"",regulator_id:"",owner_email:"",owner_name:""}),G()}catch(Y){t({title:"Error",description:Y.message||"Failed to create bank",variant:"destructive"})}finally{B(!1)}},H=async()=>{if(!N||!k.email||!k.name){t({title:"Missing fields",description:"Please fill in all required fields",variant:"destructive"});return}B(!0);try{const Y=await fetch(`${YN}/admin/banks/${N}/invite`,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(k)}),te=await Y.json();if(!Y.ok)throw new Error(te.detail||"Failed to invite user");t({title:"User invited",description:`${k.email} has been added`}),te.temp_password&&(R({email:k.email,password:te.temp_password,bankName:y?.name||"Bank"}),j(!0)),x(!1),E({email:"",name:"",role:"bank_officer"}),N&&q(N),G()}catch(Y){t({title:"Error",description:Y.message||"Failed to invite user",variant:"destructive"})}finally{B(!1)}},le=()=>{if(!D)return;const Y=`Bank: ${D.bankName}
apps\web\dist\assets\index-Bz84JA8h.js:595:Please change your password after first login at: https://trdrhub.com/login`;navigator.clipboard.writeText(Y),P(!0),setTimeout(()=>P(!1),2e3)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold tracking-tight flex items-center gap-2",children:[e.jsx(Pf,{className:"h-6 w-6 text-primary"}),"Bank Management"]}),e.jsx("p",{className:"text-muted-foreground",children:"Create and manage bank accounts. Banks are invite-only."})]}),e.jsxs(wt,{open:o,onOpenChange:d,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{className:"gap-2",children:[e.jsx(Yt,{className:"h-4 w-4"}),"Add Bank"]})}),e.jsxs(yt,{className:"max-w-2xl",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create New Bank"}),e.jsx(_t,{children:"Set up a new bank account. This will create the company and owner account."})]}),e.jsxs("div",{className:"grid gap-4 py-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"bank_name",children:"Bank Name *"}),e.jsx(oe,{id:"bank_name",placeholder:"First National Bank",value:_.bank_name,onChange:Y=>A({..._,bank_name:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"legal_name",children:"Legal Name"}),e.jsx(oe,{id:"legal_name",placeholder:"First National Bank Ltd.",value:_.legal_name,onChange:Y=>A({..._,legal_name:Y.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"country",children:"Country *"}),e.jsx(oe,{id:"country",placeholder:"Bangladesh",value:_.country,onChange:Y=>A({..._,country:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"regulator_id",children:"Regulator ID"}),e.jsx(oe,{id:"regulator_id",placeholder:"SWIFT/BIC code or license number",value:_.regulator_id,onChange:Y=>A({..._,regulator_id:Y.target.value})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_name",children:"Contact Person *"}),e.jsx(oe,{id:"contact_name",placeholder:"John Smith",value:_.contact_name,onChange:Y=>A({..._,contact_name:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"contact_email",children:"Contact Email *"}),e.jsx(oe,{id:"contact_email",type:"email",placeholder:"contact@bank.com",value:_.contact_email,onChange:Y=>A({..._,contact_email:Y.target.value})})]})]}),e.jsxs("div",{className:"border-t pt-4 mt-2",children:[e.jsx("h4",{className:"text-sm font-medium mb-3",children:"Owner Account"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"owner_name",children:"Owner Name *"}),e.jsx(oe,{id:"owner_name",placeholder:"Admin User",value:_.owner_name,onChange:Y=>A({..._,owner_name:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"owner_email",children:"Owner Email *"}),e.jsx(oe,{id:"owner_email",type:"email",placeholder:"admin@bank.com",value:_.owner_email,onChange:Y=>A({..._,owner_email:Y.target.value})})]})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>d(!1),children:"Cancel"}),e.jsx(M,{onClick:z,disabled:T,children:T?"Creating...":"Create Bank"})]})]})]})]}),i&&e.jsxs(zo,{variant:"destructive",children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx(Tc,{children:"Error"}),e.jsx(qo,{children:i})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Registered Banks"}),e.jsxs(ue,{children:[s.length," bank",s.length!==1?"s":""," registered on the platform"]})]}),e.jsx(U,{children:r?e.jsx("div",{className:"space-y-2",children:[1,2,3].map(Y=>e.jsx(pt,{className:"h-16 w-full"},Y))}):s.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Pf,{className:"h-12 w-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No banks registered yet"}),e.jsx("p",{className:"text-sm",children:'Click "Add Bank" to create the first one'})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Bank"}),e.jsx(je,{children:"Country"}),e.jsx(je,{children:"Users"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Created"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:s.map(Y=>e.jsxs(At,{children:[e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-10 w-10 rounded-lg bg-primary/10 flex items-center justify-center",children:e.jsx(Pf,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:Y.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Y.contact_email})]})]})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(ha,{className:"h-4 w-4 text-muted-foreground"}),Y.country||"â€”"]})}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(xs,{className:"h-4 w-4 text-muted-foreground"}),Y.user_count]})}),e.jsx(fe,{children:e.jsx(Q,{variant:Y.status==="active"?"default":"secondary",children:Y.status})}),e.jsx(fe,{className:"text-sm text-muted-foreground",children:new Date(Y.created_at).toLocaleDateString()}),e.jsx(fe,{className:"text-right",children:e.jsxs("div",{className:"flex items-center justify-end gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>q(Y.id),children:[e.jsx(Da,{className:"h-4 w-4 mr-1"}),"View"]}),e.jsxs(M,{variant:"outline",size:"sm",onClick:()=>{C(Y.id),b({...Y,users:[],pending_invitations:[]}),x(!0)},children:[e.jsx(sh,{className:"h-4 w-4 mr-1"}),"Add User"]})]})})]},Y.id))})]})})]}),e.jsx(wt,{open:c,onOpenChange:u,children:e.jsxs(yt,{className:"max-w-3xl",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2",children:[e.jsx(Pf,{className:"h-5 w-5"}),y?.name]}),e.jsx(_t,{children:"Bank details and user management"})]}),y&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Legal Name"}),e.jsx("p",{className:"font-medium",children:y.legal_name||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Country"}),e.jsx("p",{className:"font-medium",children:y.country||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Contact Email"}),e.jsx("p",{className:"font-medium",children:y.contact_email||"â€”"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground",children:"Regulator ID"}),e.jsx("p",{className:"font-medium",children:y.regulator_id||"â€”"})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium",children:["Users (",y.users.length,")"]}),e.jsxs(M,{size:"sm",variant:"outline",onClick:()=>{C(y.id),x(!0)},children:[e.jsx(sh,{className:"h-4 w-4 mr-1"}),"Add User"]})]}),y.users.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No users yet"}):e.jsx("div",{className:"border rounded-lg divide-y",children:y.users.map(Y=>e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"h-8 w-8 rounded-full bg-primary/10 flex items-center justify-center text-sm font-medium",children:Y.name.charAt(0).toUpperCase()}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:Y.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:Y.email})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"outline",children:Y.role.replace("_"," ")}),e.jsx(Q,{variant:Y.status==="active"?"default":"secondary",children:Y.status})]})]},Y.id))})]}),y.pending_invitations.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-3",children:"Pending Invitations"}),e.jsx("div",{className:"border rounded-lg divide-y",children:y.pending_invitations.map(Y=>e.jsxs("div",{className:"p-3 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:Y.email}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Expires: ",Y.expires_at?new Date(Y.expires_at).toLocaleDateString():"â€”"]})]}),e.jsx(Q,{variant:"secondary",children:Y.role})]},Y.id))})]})]})]})}),e.jsx(wt,{open:h,onOpenChange:x,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{children:["Add User to ",y?.name||"Bank"]}),e.jsx(_t,{children:"Create a new user account for this bank"})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite_name",children:"Full Name *"}),e.jsx(oe,{id:"invite_name",placeholder:"John Smith",value:k.name,onChange:Y=>E({...k,name:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite_email",children:"Email *"}),e.jsx(oe,{id:"invite_email",type:"email",placeholder:"john@bank.com",value:k.email,onChange:Y=>E({...k,email:Y.target.value})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"invite_role",children:"Role"}),e.jsxs(Te,{value:k.role,onValueChange:Y=>E({...k,role:Y}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"bank_admin",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"h-4 w-4"}),"Bank Admin"]})}),e.jsx(K,{value:"bank_officer",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xs,{className:"h-4 w-4"}),"Bank Officer"]})})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Admins can manage users and settings. Officers can process LCs."})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>x(!1),children:"Cancel"}),e.jsx(M,{onClick:H,disabled:T,children:T?"Adding...":"Add User"})]})]})}),e.jsx(wt,{open:g,onOpenChange:j,children:e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2 text-green-600",children:[e.jsx(Za,{className:"h-5 w-5"}),"Account Created Successfully"]}),e.jsx(_t,{children:"Share these credentials securely with the user"})]}),D&&e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs(zo,{children:[e.jsx(ks,{className:"h-4 w-4"}),e.jsx(Tc,{children:"Important"}),e.jsx(qo,{children:"This is the only time you'll see this password. Make sure to copy it now."})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/50 p-4 space-y-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Bank"}),e.jsx("p",{className:"font-medium",children:D.bankName})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Email"}),e.jsx("p",{className:"font-mono text-sm",children:D.email})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Temporary Password"}),e.jsx("p",{className:"font-mono text-sm bg-yellow-100 dark:bg-yellow-900/30 px-2 py-1 rounded",children:D.password})]})]}),e.jsx(M,{onClick:le,className:"w-full gap-2",children:O?e.jsxs(e.Fragment,{children:[e.jsx(Za,{className:"h-4 w-4"}),"Copied!"]}):e.jsxs(e.Fragment,{children:[e.jsx(qa,{className:"h-4 w-4"}),"Copy Credentials"]})}),e.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"The user should change their password after first login"})]}),e.jsx(ms,{children:e.jsx(M,{onClick:()=>j(!1),children:"Done"})})]})})]})}function XHe(){const{user:t,isAuthenticated:s}=$j(),a=zt(),{toast:r}=et(),[n,i]=zs(),{needsOnboarding:l,isLoading:o}=op(),[d,c]=m.useState(!1),[u,h]=m.useState(n.get("section")||"overview");m.useEffect(()=>{s||a("/admin/login")},[s,a]),m.useEffect(()=>{s&&!o&&l&&c(!0)},[s,l,o]),m.useEffect(()=>{const g=n.get("section")||"overview";g!==u&&h(g)},[n,u]);const x=g=>{h(g);const j=new URLSearchParams(n);g==="overview"?j.delete("section"):j.set("section",g),i(j,{replace:!0})};return s?e.jsxs(e.Fragment,{children:[e.jsx(Lc,{sidebar:e.jsx(mWe,{activeSection:u,onSectionChange:x}),breadcrumbs:[{label:"Admin Console",href:"/admin"},...u!=="overview"?[{label:u.split("-").map(g=>g.charAt(0).toUpperCase()+g.slice(1)).join(" ")}]:[]],children:e.jsxs("div",{className:"flex flex-1 flex-col gap-6 p-6 lg:p-8",children:[u==="overview"&&e.jsx(fWe,{}),u==="ops-monitoring"&&e.jsx(bWe,{}),u==="ops-jobs"&&e.jsx(CWe,{}),u==="ops-alerts"&&e.jsx(AWe,{}),u==="audit-logs"&&e.jsx(TWe,{}),u==="audit-approvals"&&e.jsx(RWe,{}),u==="audit-compliance"&&e.jsx(LWe,{}),u==="security-users"&&e.jsx(BWe,{}),u==="security-access"&&e.jsx(UWe,{}),u==="security-sessions"&&e.jsx(qWe,{}),u==="banks-management"&&e.jsx(QHe,{}),u==="billing-overview"&&e.jsx(HWe,{}),u==="billing-invoices-payments"&&e.jsx(JWe,{}),u==="billing-recognition"&&e.jsx(oHe,{}),u==="billing-taxes"&&e.jsx(dHe,{}),u==="billing-plans"&&e.jsx(uHe,{}),u==="billing-adjustments"&&e.jsx(mHe,{}),u==="billing-disputes"&&e.jsx(xHe,{}),u==="partners-registry"&&e.jsx(pHe,{}),u==="partners-connectors"&&e.jsx(fHe,{}),u==="partners-webhooks"&&e.jsx(vHe,{}),u==="llm-prompts"&&e.jsx(jHe,{}),u==="llm-budgets"&&e.jsx(bHe,{}),u==="llm-evaluations"&&e.jsx(wHe,{}),u==="compliance-residency"&&e.jsx(CHe,{}),u==="compliance-retention"&&e.jsx(SHe,{}),u==="compliance-legal-holds"&&e.jsx(kHe,{}),u==="system-feature-flags"&&e.jsx(AHe,{}),u==="system-releases"&&e.jsx(FHe,{}),u==="system-settings"&&e.jsx(RHe,{}),u==="rules-list"&&e.jsx(UHe,{}),u==="rules-upload"&&e.jsx(GHe,{}),u==="rules-active"&&e.jsx(JHe,{}),u==="rules-governance"&&e.jsx(WHe,{})]})}),e.jsx(uC,{open:d,onClose:()=>c(!1),onComplete:async()=>{c(!1),r({title:"Onboarding Complete",description:"Welcome to the Admin Console!"})}})]}):e.jsx("div",{children:"Loading..."})}function eGe(){const t=zt(),[s,a]=m.useState(null),[r,n]=m.useState("Processing authentication...");return m.useEffect(()=>{(async()=>{try{n("Completing authentication...");const{data:{session:l},error:o}=await un.auth.getSession();if(o)throw o;if(!l){await new Promise(u=>setTimeout(u,1e3));const{data:{session:c}}=await un.auth.getSession();if(!c)throw new Error("No session found after callback")}n("Authenticating with backend...");const d=l||(await un.auth.getSession()).data.session;if(!d?.access_token)throw new Error("No access token available");try{const u=await fetch("http://localhost:8000/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:d.user.email,password:""})});if(u.ok){const h=await u.json();h.access_token&&localStorage.setItem("trdrhub_api_token",h.access_token)}}catch(c){console.warn("Backend login failed (non-critical):",c)}n("Checking onboarding status...");try{const u=await fetch("http://localhost:8000/onboarding/status",{method:"GET",headers:{Authorization:`Bearer ${localStorage.getItem("trdrhub_api_token")||""}`},credentials:"include"});if(u.ok){const h=await u.json();if(!h.completed){n("Redirecting to onboarding..."),setTimeout(()=>{t("/onboarding")},500);return}const x=h.role,g=x==="bank_officer"||x==="bank_admin"?"/lcopilot/bank-dashboard":"/hub";n("Success! Redirecting..."),setTimeout(()=>{t(g)},500);return}}catch(c){console.warn("Failed to check onboarding status:",c)}n("Success! Redirecting..."),setTimeout(()=>{t("/hub")},500)}catch(l){console.error("Auth callback error:",l),a(l instanceof Error?l.message:"Authentication failed"),setTimeout(()=>{t("/login")},3e3)}})()},[t]),e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsx("div",{className:"text-center",children:e.jsx("div",{className:"mb-4",children:s?e.jsxs("div",{className:"text-red-600",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Authentication Failed"}),e.jsx("p",{className:"mt-2",children:s}),e.jsx("p",{className:"mt-4 text-sm",children:"Redirecting to login..."})]}):e.jsxs("div",{children:[e.jsx("div",{className:"mb-4 inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent"}),e.jsx("p",{className:"text-lg",children:r})]})})})})}const tGe="30d",YU="all";function Ob(){const[t,s]=zs(),{status:a}=op(),r=m.useMemo(()=>{if(!a?.details)return YU;const h=a.details,x=Array.isArray(h?.business_types)?h.business_types:[],g=x.includes("exporter"),j=x.includes("importer");return g&&j?"all":g?"export":j?"import":YU},[a]),n=m.useMemo(()=>{const h=t.get("view");return h==="export"||h==="import"||h==="all"?h:r},[t,r]),i=m.useMemo(()=>{const h=t.get("status"),x=t.get("bank"),g=t.get("dateRange");return{status:h?h.split(","):void 0,bank:x?x.split(","):void 0,dateRange:g||void 0}},[t]),l=m.useMemo(()=>{const h=t.get("timeRange");return h==="7d"||h==="30d"||h==="90d"||h==="all"?h:tGe},[t]),o=m.useCallback(h=>{s(x=>{const g=new URLSearchParams(x);return g.set("view",h),console.log("ðŸ“Š Combined dashboard viewMode changed:",h),g})},[s]),d=m.useCallback(h=>{s(x=>{const g=new URLSearchParams(x);return h.status!==void 0&&(h.status.length>0?g.set("status",h.status.join(",")):g.delete("status")),h.bank!==void 0&&(h.bank.length>0?g.set("bank",h.bank.join(",")):g.delete("bank")),h.dateRange!==void 0&&(h.dateRange?g.set("dateRange",h.dateRange):g.delete("dateRange")),g})},[s]),c=m.useCallback(h=>{s(x=>{const g=new URLSearchParams(x);return g.set("timeRange",h),g})},[s]),u=m.useCallback(()=>{s(h=>{const x=new URLSearchParams(h);return x.delete("status"),x.delete("bank"),x.delete("dateRange"),x})},[s]);return{viewMode:n,filters:i,timeRange:l,setViewMode:o,setFilters:d,setTimeRange:c,clearFilters:u}}var Vse="Toggle",jR=m.forwardRef((t,s)=>{const{pressed:a,defaultPressed:r,onPressedChange:n,...i}=t,[l,o]=Hn({prop:a,onChange:n,defaultProp:r??!1,caller:Vse});return e.jsx(Pt.button,{type:"button","aria-pressed":l,"data-state":l?"on":"off","data-disabled":t.disabled?"":void 0,...i,ref:s,onClick:gt(t.onClick,()=>{t.disabled||o(!l)})})});jR.displayName=Vse;var Wse=jR,Ih="ToggleGroup",[Hse,ZJe]=Vr(Ih,[Ch]),Gse=Ch(),bR=lt.forwardRef((t,s)=>{const{type:a,...r}=t;if(a==="single"){const n=r;return e.jsx(sGe,{...n,ref:s})}if(a==="multiple"){const n=r;return e.jsx(aGe,{...n,ref:s})}throw new Error(`Missing prop \`type\` expected on \`${Ih}\``)});bR.displayName=Ih;var[Kse,Yse]=Hse(Ih),sGe=lt.forwardRef((t,s)=>{const{value:a,defaultValue:r,onValueChange:n=()=>{},...i}=t,[l,o]=Hn({prop:a,defaultProp:r??"",onChange:n,caller:Ih});return e.jsx(Kse,{scope:t.__scopeToggleGroup,type:"single",value:lt.useMemo(()=>l?[l]:[],[l]),onItemActivate:o,onItemDeactivate:lt.useCallback(()=>o(""),[o]),children:e.jsx(Zse,{...i,ref:s})})}),aGe=lt.forwardRef((t,s)=>{const{value:a,defaultValue:r,onValueChange:n=()=>{},...i}=t,[l,o]=Hn({prop:a,defaultProp:r??[],onChange:n,caller:Ih}),d=lt.useCallback(u=>o((h=[])=>[...h,u]),[o]),c=lt.useCallback(u=>o((h=[])=>h.filter(x=>x!==u)),[o]);return e.jsx(Kse,{scope:t.__scopeToggleGroup,type:"multiple",value:l,onItemActivate:d,onItemDeactivate:c,children:e.jsx(Zse,{...i,ref:s})})});bR.displayName=Ih;var[rGe,nGe]=Hse(Ih),Zse=lt.forwardRef((t,s)=>{const{__scopeToggleGroup:a,disabled:r=!1,rovingFocus:n=!0,orientation:i,dir:l,loop:o=!0,...d}=t,c=Gse(a),u=Ru(l),h={role:"group",dir:u,...d};return e.jsx(rGe,{scope:a,rovingFocus:n,disabled:r,children:n?e.jsx(r_,{asChild:!0,...c,orientation:i,dir:u,loop:o,children:e.jsx(Pt.div,{...h,ref:s})}):e.jsx(Pt.div,{...h,ref:s})})}),m1="ToggleGroupItem",Jse=lt.forwardRef((t,s)=>{const a=Yse(m1,t.__scopeToggleGroup),r=nGe(m1,t.__scopeToggleGroup),n=Gse(t.__scopeToggleGroup),i=a.value.includes(t.value),l=r.disabled||t.disabled,o={...t,pressed:i,disabled:l},d=lt.useRef(null);return r.rovingFocus?e.jsx(n_,{asChild:!0,...n,focusable:!l,active:i,ref:d,children:e.jsx(ZU,{...o,ref:s})}):e.jsx(ZU,{...o,ref:s})});Jse.displayName=m1;var ZU=lt.forwardRef((t,s)=>{const{__scopeToggleGroup:a,value:r,...n}=t,i=Yse(m1,a),l={role:"radio","aria-checked":t.pressed,"aria-pressed":void 0},o=i.type==="single"?l:void 0;return e.jsx(jR,{...o,...n,ref:s,onPressedChange:d=>{d?i.onItemActivate(r):i.onItemDeactivate(r)}})}),Qse=bR,Xse=Jse;function iGe(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const eae=wh("inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground",{variants:{variant:{default:"bg-transparent",outline:"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground"},size:{default:"h-10 px-3",sm:"h-9 px-2.5",lg:"h-11 px-5"}},defaultVariants:{variant:"default",size:"default"}}),lGe=m.forwardRef(({className:t,variant:s,size:a,...r},n)=>e.jsx(Wse,{ref:n,className:iGe(eae({variant:s,size:a,className:t})),...r}));lGe.displayName=Wse.displayName;function tae(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const sae=m.createContext({size:"default",variant:"default"}),aae=m.forwardRef(({className:t,variant:s,size:a,children:r,...n},i)=>e.jsx(Qse,{ref:i,className:tae("flex items-center justify-center gap-1",t),...n,children:e.jsx(sae.Provider,{value:{variant:s,size:a},children:r})}));aae.displayName=Qse.displayName;const Sw=m.forwardRef(({className:t,children:s,variant:a,size:r,...n},i)=>{const l=m.useContext(sae);return e.jsx(Xse,{ref:i,className:tae(eae({variant:l.variant||a,size:l.size||r}),t),...n,children:s})});Sw.displayName=Xse.displayName;function oGe({disabled:t=!1,showAll:s=!0}){const{viewMode:a,setViewMode:r}=Ob(),n=i=>{i&&(i==="export"||i==="import"||i==="all")&&r(i)};return e.jsx("div",{className:"flex items-center gap-2",role:"group","aria-label":"View mode selector",children:e.jsxs(aae,{type:"single",value:a,onValueChange:n,disabled:t,className:"bg-muted/50 rounded-md p-1","aria-label":"Select view mode",children:[s&&e.jsxs(Sw,{value:"all","aria-label":"Show all export and import sessions",className:"data-[state=on]:bg-background",title:"Show all sessions",children:[e.jsx(O1,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),e.jsx("span",{children:"All"})]}),e.jsxs(Sw,{value:"export","aria-label":"Show export sessions only",className:"data-[state=on]:bg-background",title:"Export view",children:[e.jsx(Be,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),e.jsx("span",{children:"Export"})]}),e.jsxs(Sw,{value:"import","aria-label":"Show import sessions only",className:"data-[state=on]:bg-background",title:"Import view",children:[e.jsx(Ps,{className:"h-4 w-4 mr-2","aria-hidden":"true"}),e.jsx("span",{children:"Import"})]})]})})}function cGe({data:t,isLoading:s=!1,onKpiClick:a}){const{viewMode:r}=Ob(),n=m.useMemo(()=>t?r==="export"?{activeLCs:{total:t.activeLCs.export,export:t.activeLCs.export,import:0},approvalRate:{total:t.approvalRate.export,export:t.approvalRate.export,import:0},pendingActions:{total:t.pendingActions.export,export:t.pendingActions.export,import:0},avgTurnaround:{total:t.avgTurnaround.export,export:t.avgTurnaround.export,import:""}}:r==="import"?{activeLCs:{total:t.activeLCs.import,export:0,import:t.activeLCs.import},approvalRate:{total:t.approvalRate.import,export:0,import:t.approvalRate.import},pendingActions:{total:t.pendingActions.import,export:0,import:t.pendingActions.import},avgTurnaround:{total:t.avgTurnaround.import,export:"",import:t.avgTurnaround.import}}:t:null,[t,r]),i=[{label:"Active LCs",value:n?.activeLCs.total??0,helper:r==="all"?`Export ${n?.activeLCs.export??0} â€¢ Import ${n?.activeLCs.import??0}`:r==="export"?`${n?.activeLCs.export??0} active`:`${n?.activeLCs.import??0} active`,icon:e.jsx(Be,{className:"h-5 w-5 text-primary"}),key:"activeLCs"},{label:"Approval Rate",value:`${n?.approvalRate.total??0}%`,helper:"Last 30 days",icon:e.jsx(bi,{className:"h-5 w-5 text-success"}),key:"approvalRate"},{label:"Pending Actions",value:n?.pendingActions.total??0,helper:"Needs review today",icon:e.jsx(Ve,{className:"h-5 w-5 text-amber-500"}),key:"pendingActions"},{label:"Average Turnaround",value:n?.avgTurnaround.total??"0 days",helper:"Across all banks",icon:e.jsx(tj,{className:"h-5 w-5 text-info"}),key:"avgTurnaround"}];return s?e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:i.map(l=>e.jsxs($,{className:"border-border/40 shadow-soft",children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(pt,{className:"h-4 w-24"}),e.jsx(pt,{className:"h-5 w-5 rounded"})]}),e.jsxs(U,{className:"space-y-1",children:[e.jsx(pt,{className:"h-8 w-16"}),e.jsx(pt,{className:"h-3 w-32"})]})]},l.key))}):e.jsx("div",{className:"grid gap-4 md:grid-cols-2 xl:grid-cols-4",children:i.map(l=>e.jsxs($,{className:"border-border/40 shadow-soft cursor-pointer transition-all hover:shadow-md hover:border-primary/30",onClick:()=>a?.(l.key,r),children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ue,{className:"text-xs uppercase tracking-wide text-muted-foreground",children:l.label}),l.icon]}),e.jsxs(U,{className:"space-y-1",children:[e.jsx("div",{className:"text-2xl font-semibold text-foreground",children:l.value}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.helper})]})]},l.key))})}function dGe({exportSessions:t=[],importSessions:s=[],isLoading:a=!1,onSessionClick:r}){const{viewMode:n,filters:i}=Ob(),l=m.useMemo(()=>{if(n==="import")return[];let j=[...t];return i.status&&i.status.length>0&&(j=j.filter(y=>i.status?.includes(y.status.toLowerCase()))),i.bank&&i.bank.length>0&&(j=j.filter(y=>i.bank?.some(b=>y.counterparty.toLowerCase().includes(b.toLowerCase())))),j},[t,n,i]),o=m.useMemo(()=>{if(n==="export")return[];let j=[...s];return i.status&&i.status.length>0&&(j=j.filter(y=>i.status?.includes(y.status.toLowerCase()))),i.bank&&i.bank.length>0&&(j=j.filter(y=>i.bank?.some(b=>y.counterparty.toLowerCase().includes(b.toLowerCase())))),j},[s,n,i]),d=j=>{const y=j.type==="export",b=y?`/lcopilot/exporter-dashboard?session=${j.id}`:`/lcopilot/importer-dashboard?session=${j.id}`;return e.jsxs($,{className:"border-border/40 shadow-sm transition-colors hover:border-primary/30 cursor-pointer",onClick:()=>r?.(j),children:[e.jsxs(X,{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(ee,{className:"text-base font-semibold text-foreground",children:j.lcNumber||j.id}),e.jsx(Q,{variant:"outline",className:`text-xs ${y?"text-primary":"text-info"}`,children:y?"Export":"Import"})]}),e.jsxs(ue,{className:"text-sm text-muted-foreground",children:[j.counterparty," â€¢ ",j.amount]})]}),e.jsxs(U,{className:"space-y-3 text-sm text-muted-foreground",children:[e.jsxs("p",{className:"flex items-center gap-2 text-foreground",children:[y?e.jsx(Oe,{className:"h-4 w-4 text-success"}):e.jsx(Mx,{className:"h-4 w-4 text-info"})," ",j.status]}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground",children:["Updated ",j.updatedAt]}),e.jsx(M,{asChild:!0,variant:"ghost",size:"sm",className:"h-8 px-2 text-primary",onClick:N=>N.stopPropagation(),children:e.jsx(pe,{to:b,children:"Open workspace"})})]})]})]},j.id)};if(a)return e.jsx("div",{className:"rounded-2xl border border-border/40 bg-card/50 shadow-strong backdrop-blur p-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(pt,{className:"h-6 w-48 mb-2"}),e.jsx(pt,{className:"h-4 w-64"})]}),e.jsx(pt,{className:"h-10 w-48"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:[1,2].map(j=>e.jsxs($,{className:"border-border/40",children:[e.jsxs(X,{children:[e.jsx(pt,{className:"h-5 w-32 mb-2"}),e.jsx(pt,{className:"h-4 w-48"})]}),e.jsxs(U,{children:[e.jsx(pt,{className:"h-4 w-full mb-2"}),e.jsx(pt,{className:"h-4 w-24"})]})]},j))})]})});const c=l.length>0,u=o.length>0,h=c||u;if(!h&&n!=="all")return e.jsx("div",{className:"rounded-2xl border border-border/40 bg-card/50 shadow-strong backdrop-blur p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-muted-foreground mb-4",children:["No ",n==="export"?"export":"import"," sessions found."]}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsxs(pe,{to:`/lcopilot/${n==="export"?"exporter":"importer"}-dashboard?section=upload`,children:["Upload ",n==="export"?"Export":"Import"," LC"]})})]})});if(!h)return e.jsx("div",{className:"rounded-2xl border border-border/40 bg-card/50 shadow-strong backdrop-blur p-6",children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No validation sessions found."}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/exporter-dashboard?section=upload",children:"Upload Export LC"})}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/importer-dashboard?section=upload",children:"Upload Import LC"})})]})]})});if(n==="all")return e.jsx("div",{className:"rounded-2xl border border-border/40 bg-card/50 shadow-strong backdrop-blur",children:e.jsxs(Os,{defaultValue:c?"exports":"imports",className:"w-full",children:[e.jsxs("div",{className:"flex flex-col gap-4 p-6 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-foreground",children:"Validation Sessions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Export and import LC progress in one place. Filter by tab to focus faster."})]}),e.jsxs(Fs,{className:"grid w-full grid-cols-2 md:w-auto",children:[e.jsxs(He,{value:"exports",children:["Export LCs ",c&&`(${l.length})`]}),e.jsxs(He,{value:"imports",children:["Import LCs ",u&&`(${o.length})`]})]})]}),e.jsx(Qe,{value:"exports",className:"p-6 pt-0",children:c?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:l.map(d)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No export sessions found."}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/exporter-dashboard?section=upload",children:"Upload Export LC"})})]})}),e.jsx(Qe,{value:"imports",className:"p-6 pt-0",children:u?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:o.map(d)}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No import sessions found."}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/importer-dashboard?section=upload",children:"Upload Import LC"})})]})})]})});const x=n==="export"?l:o,g=n==="export"?"Export":"Import";return e.jsxs("div",{className:"rounded-2xl border border-border/40 bg-card/50 shadow-strong backdrop-blur p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("h2",{className:"text-xl font-semibold text-foreground",children:[g," Validation Sessions"]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Track your ",g.toLowerCase()," LC progress and resolve discrepancies."]})]}),x.length>0?e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:x.map(d)}):e.jsxs("div",{className:"text-center py-12",children:[e.jsxs("p",{className:"text-muted-foreground mb-4",children:["No ",g.toLowerCase()," sessions found."]}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsxs(pe,{to:`/lcopilot/${n==="export"?"exporter":"importer"}-dashboard?section=upload`,children:["Upload ",g," LC"]})})]})]})}function uGe({exportTasks:t=[],importTasks:s=[],isLoading:a=!1,maxItems:r=5}){const{viewMode:n}=Ob(),i=m.useMemo(()=>{let c=[];return(n==="all"||n==="export")&&(c=[...c,...t]),(n==="all"||n==="import")&&(c=[...c,...s]),c.sort((u,h)=>{const x={high:3,medium:2,low:1},g=x[h.priority]-x[u.priority];return g!==0?g:new Date(u.dueDate).getTime()-new Date(h.dueDate).getTime()}),c.slice(0,r)},[t,s,n,r]);if(a)return e.jsxs($,{className:"md:col-span-2 border-border/40 shadow-sm",children:[e.jsxs(X,{children:[e.jsx(pt,{className:"h-6 w-48 mb-2"}),e.jsx(pt,{className:"h-4 w-64"})]}),e.jsx(U,{className:"space-y-4",children:[1,2,3].map(c=>e.jsxs("div",{className:"flex items-start justify-between rounded-lg border border-border/40 bg-muted/40 p-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(pt,{className:"h-5 w-48 mb-2"}),e.jsx(pt,{className:"h-4 w-64"})]}),e.jsx(pt,{className:"h-6 w-20"})]},c))})]});if(i.length===0)return e.jsxs($,{className:"md:col-span-2 border-border/40 shadow-sm",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base text-foreground",children:"Upcoming Deliverables"}),e.jsx(ue,{className:"text-sm text-muted-foreground",children:"Keep suppliers and banks aligned with a unified schedule."})]}),e.jsx(U,{children:e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"No pending tasks at this time."})})})]});const l=c=>{const u={high:"destructive",medium:"secondary",low:"outline"};return e.jsx(Q,{variant:u[c],className:"text-xs",children:c.charAt(0).toUpperCase()+c.slice(1)})},o=c=>{const u=new Date(c),h=new Date;h.setHours(0,0,0,0);const x=new Date(u);x.setHours(0,0,0,0);const g=Math.floor((x.getTime()-h.getTime())/(1e3*60*60*24));return g<0?e.jsx(Q,{variant:"destructive",className:"text-xs",children:"Overdue"}):g===0?e.jsx(Q,{variant:"secondary",className:"text-xs text-amber-500",children:"Due today"}):g===1?e.jsx(Q,{variant:"outline",className:"text-xs",children:"Tomorrow"}):g<=7?e.jsxs(Q,{variant:"outline",className:"text-xs",children:["In ",g," days"]}):e.jsx(Q,{variant:"outline",className:"text-xs",children:u.toLocaleDateString()})},d=c=>c.type==="export"?`/lcopilot/exporter-dashboard?session=${c.lcNumber}`:`/lcopilot/importer-dashboard?session=${c.lcNumber}`;return e.jsxs($,{className:"md:col-span-2 border-border/40 shadow-sm",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base text-foreground",children:"Upcoming Deliverables"}),e.jsx(ue,{className:"text-sm text-muted-foreground",children:"Keep suppliers and banks aligned with a unified schedule."})]}),e.jsxs(U,{className:"space-y-4 text-sm text-muted-foreground",children:[i.map(c=>e.jsxs("div",{className:"flex items-start justify-between rounded-lg border border-border/40 bg-muted/40 p-4 hover:bg-muted/60 transition-colors",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("p",{className:"text-foreground font-medium",children:c.title}),l(c.priority),e.jsx(Q,{variant:"outline",className:"text-xs",children:c.type==="export"?"Export":"Import"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[c.description," â€¢ LC ",c.lcNumber]})]}),e.jsxs("div",{className:"flex flex-col items-end gap-2 ml-4",children:[o(c.dueDate),e.jsx(pe,{to:d(c),className:"text-xs text-primary hover:underline",onClick:u=>u.stopPropagation(),children:"View â†’"})]})]},c.id)),i.length>=r&&e.jsx("div",{className:"pt-2 border-t",children:e.jsx(pe,{to:"/lcopilot/combined-dashboard?section=workspace",className:"text-sm text-primary hover:underline",children:"View all tasks â†’"})})]})]})}const mGe=t=>{const s=new Date(t),r=Math.floor((new Date().getTime()-s.getTime())/(1e3*60*60));if(r<1)return"Just now";if(r<24)return`${r}h ago`;const n=Math.floor(r/24);return n===1?"Yesterday":n<7?`${n}d ago`:s.toLocaleDateString()},hGe=t=>t?t>=1e6?`USD ${(t/1e6).toFixed(1)}M`:t>=1e3?`USD ${(t/1e3).toFixed(0)}K`:`USD ${t.toFixed(0)}`:"N/A",xGe=t=>t.filter(s=>s.status==="completed"&&(s.discrepancies?.length||0)>0).slice(0,5).map((s,a)=>({id:`task-${a+1}`,type:"export",title:`Resolve ${s.discrepancies?.length||0} discrepanc${(s.discrepancies?.length||0)===1?"y":"ies"}`,description:s.extracted_data?.issuing_bank||"LC validation",lcNumber:s.id.slice(0,8).toUpperCase(),dueDate:new Date(Date.now()+10080*60*1e3).toISOString().split("T")[0],priority:(s.discrepancies?.filter(r=>r.severity==="critical").length||0)>0?"high":"medium",status:"pending"})),pGe=t=>{const s=[{title:"Validate Export LC",description:"Upload LC draft or MT700 and run ICC checks.",to:"/lcopilot/exporter-dashboard?section=upload",variant:"bg-gradient-exporter",type:"export"},{title:"Validate Import LC",description:"Pre-screen supplier documents before shipment.",to:"/lcopilot/importer-dashboard?section=upload",variant:"bg-gradient-importer",type:"import"},{title:"Request Bank Profile",description:"Preview enforcement profile for partner banks.",to:"/lcopilot/exporter-dashboard?section=analytics",variant:"bg-gradient-primary",type:"both"}];return t==="export"?s.filter(a=>a.type==="export"||a.type==="both"):t==="import"?s.filter(a=>a.type==="import"||a.type==="both"):s};function fGe(){const{toast:t}=et(),{user:s,isLoading:a}=Dt(),r=zt(),n=s?{id:s.id,name:s.full_name||s.username||s.email.split("@")[0],email:s.email,role:"exporter"}:null,{needsOnboarding:i,isLoading:l}=op(),{viewMode:o}=Ob(),[d,c]=zs(),[u,h]=m.useState(!1),[x,g]=m.useState([]),[j,y]=m.useState(!0);m.useEffect(()=>{s&&(async()=>{y(!0);try{const O=await xp();g(O||[])}catch(O){console.error("Failed to load validation sessions:",O),g([])}finally{y(!1)}})()},[s]);const b=R=>["dashboard","workspace","templates","upload","reviews","analytics","notifications","billing","settings","help"].includes(R)?R:"dashboard",[N,C]=m.useState(()=>b(d.get("section")));m.useEffect(()=>{const R=localStorage.getItem("demo_mode")==="true"||new URLSearchParams(window.location.search).get("demo")==="true";!a&&!s&&!R&&r("/login")},[a,s,r]),m.useEffect(()=>{!l&&i&&h(!0)},[i,l]),m.useEffect(()=>{const R=b(d.get("section"));R!==N&&C(R)},[d]);const _=R=>{C(R),c({section:R})};if(a)return e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."});if(!s)return null;const A=(R,O)=>{console.log("ðŸ“Š KPI clicked:",{kpi:R,mode:O,viewMode:o})},k=R=>{console.log("ðŸ“‹ Session clicked:",{sessionId:R.id,type:R.type})},E=R=>{console.log("âš¡ Quick action clicked:",{action:R.title,destination:R.to})},D=()=>{if(N==="dashboard"){const R=pGe(o),O=xGe(x),P=O.filter(ye=>ye.type==="export"),T=O.filter(ye=>ye.type==="import"),B=x.filter(ye=>ye.status==="completed"),G=x.filter(ye=>ye.status==="processing"||ye.status==="uploading"),q=x.length,z=0,H=B.filter(ye=>(ye.discrepancies||[]).filter(ze=>ze.severity==="critical").length===0),le=B.length>0?Math.round(H.length/B.length*100):0,Y=B.filter(ye=>ye.processing_started_at&&ye.processing_completed_at),te=Y.length>0?Y.reduce((ye,ke)=>{const ze=new Date(ke.processing_started_at).getTime(),ce=new Date(ke.processing_completed_at).getTime();return ye+(ce-ze)},0)/Y.length:0,ne=te>0?`${(te/(1e3*60*60*24)).toFixed(1)} days`:"N/A",ae={activeLCs:{total:x.length,export:q,import:z},approvalRate:{total:le,export:le,import:0},pendingActions:{total:G.length,export:G.length,import:0},avgTurnaround:{total:ne,export:ne,import:"N/A"}},re=[...x].sort((ye,ke)=>new Date(ke.created_at).getTime()-new Date(ye.created_at).getTime()).slice(0,5).map(ye=>({id:ye.id.slice(0,8).toUpperCase(),type:"export",counterparty:ye.extracted_data?.issuing_bank||ye.extracted_data?.applicant_bank||"Bank",amount:hGe(ye.extracted_data?.amount||ye.extracted_data?.lc_amount),status:ye.status==="completed"?(ye.discrepancies?.length||0)>0?"Discrepancy noted":"Ready to submit":ye.status==="processing"?"Processing...":"Pending",updatedAt:mGe(ye.updated_at)})),xe=[];return e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Unified Export & Import Workspace"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"SME Tier"})]}),e.jsxs("h1",{className:"text-3xl font-semibold text-foreground",children:["Welcome back, ",n?.name||"User","!"]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Track every export and import LC in one view. Upload documents, resolve discrepancies, and stay synchronized with your bank counterparts without switching workspaces."})]}),e.jsx("section",{children:e.jsx(cGe,{data:ae,isLoading:j,onKpiClick:A})}),e.jsx("section",{className:"grid gap-4 md:grid-cols-3",children:R.map(ye=>e.jsxs($,{className:"border-border/40 shadow-sm",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base text-foreground",children:ye.title}),e.jsx(ue,{className:"text-sm text-muted-foreground",children:ye.description})]}),e.jsx(U,{children:e.jsx(M,{asChild:!0,variant:"secondary",className:`${ye.variant} hover:opacity-90 w-full text-foreground`,onClick:()=>E(ye),children:e.jsxs(pe,{to:ye.to,className:"flex items-center justify-center gap-2 text-sm font-medium",children:["Continue ",e.jsx(Jt,{className:"h-4 w-4"})]})})})]},ye.title))}),e.jsx("section",{children:e.jsx(dGe,{exportSessions:re,importSessions:xe,isLoading:j,onSessionClick:k})}),e.jsx(As,{className:"opacity-20"}),e.jsxs("section",{className:"grid gap-4 md:grid-cols-3",children:[e.jsx(uGe,{exportTasks:P,importTasks:T,isLoading:!1,maxItems:5}),e.jsxs($,{className:"border-border/40 shadow-sm",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-base text-foreground",children:"Performance Snapshot"}),e.jsx(ue,{className:"text-sm text-muted-foreground",children:"Export vs. import comparison this quarter."})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"rounded-lg border border-border/40 bg-muted/30 p-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between text-foreground",children:[e.jsx("span",{children:"Export approval"}),e.jsxs("span",{className:"font-semibold",children:[ae.approvalRate.export,"%"]})]}),e.jsxs("p",{className:"mt-1 text-xs",children:["Based on ",B.length," validations"]})]}),e.jsxs("div",{className:"rounded-lg border border-border/40 bg-muted/20 p-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between text-foreground",children:[e.jsx("span",{children:"Avg. turnaround"}),e.jsx("span",{className:"font-semibold",children:ae.avgTurnaround.export})]}),e.jsx("p",{className:"mt-1 text-xs",children:"Processing time per validation"})]}),e.jsxs("div",{className:"rounded-lg border border-border/40 bg-muted/20 p-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center justify-between text-foreground",children:[e.jsx("span",{children:"Total discrepancies"}),e.jsx("span",{className:"font-semibold",children:x.reduce((ye,ke)=>ye+(ke.discrepancies?.length||0),0)})]}),e.jsx("p",{className:"mt-1 text-xs",children:"Across all validations"})]}),e.jsx(M,{asChild:!0,variant:"outline",className:"w-full text-sm",children:e.jsxs(pe,{to:"/lcopilot/exporter-dashboard?section=analytics",children:["Open analytics ",e.jsx(Zm,{className:"ml-2 h-4 w-4"})]})})]})]})]})]})}return e.jsx("div",{className:"flex items-center justify-center h-96",children:e.jsxs($,{className:"p-8 text-center",children:[e.jsxs(ee,{className:"mb-4",children:["Section: ",N]}),e.jsxs(ue,{children:["This section is under development for the Combined Dashboard.",e.jsx("br",{}),"Use the sidebar to navigate to Export or Import dashboards for full functionality."]}),e.jsxs("div",{className:"mt-6 flex gap-4 justify-center",children:[e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/exporter-dashboard",children:"Go to Export Dashboard"})}),e.jsx(M,{asChild:!0,variant:"outline",children:e.jsx(pe,{to:"/lcopilot/importer-dashboard",children:"Go to Import Dashboard"})})]})]})})};return e.jsxs(e.Fragment,{children:[e.jsx(Lc,{sidebar:e.jsx(Yte,{activeSection:N,onSectionChange:_,user:n}),topbar:N==="dashboard"?e.jsx(oGe,{showAll:!0}):void 0,children:e.jsx("div",{className:"p-6",children:D()})}),e.jsx(uC,{open:u,onClose:()=>h(!1),onComplete:()=>{h(!1),t({title:"Onboarding complete",description:"You're all set to start validating documents."})}})]})}function gGe({activeSection:t,onSectionChange:s,user:a,...r}){const{logout:n}=Dt(),i=async l=>{l?.preventDefault(),l?.stopPropagation();try{await n()}catch(o){console.warn("Logout failed:",o),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...r,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-primary/10 text-primary",children:e.jsx(Bs,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"LCopilot"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Enterprise"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Main Navigation"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="dashboard",onClick:()=>s("dashboard"),tooltip:"Dashboard",children:[e.jsx(I1,{}),e.jsx("span",{children:"Dashboard"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="workspaces",onClick:()=>s("workspaces"),tooltip:"Workspaces",children:[e.jsx(O1,{}),e.jsx("span",{children:"Workspaces"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="teams",onClick:()=>s("teams"),tooltip:"Team Management",children:[e.jsx(xs,{}),e.jsx("span",{children:"Team Management"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="analytics",onClick:()=>s("analytics"),tooltip:"Analytics",children:[e.jsx(Ws,{}),e.jsx("span",{children:"Analytics"})]})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Governance & Compliance"}),e.jsx(Js,{children:e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs(it,{isActive:t==="governance",onClick:()=>s("governance"),tooltip:"Governance",children:[e.jsx(bi,{}),e.jsx("span",{children:"Governance"})]})})})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsxs(it,{isActive:t==="notifications",onClick:()=>s("notifications"),tooltip:"Notifications",children:[e.jsx($s,{}),e.jsx("span",{children:"Notifications"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="settings",onClick:()=>s("settings"),tooltip:"Settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})}),e.jsx(rt,{children:e.jsxs(it,{isActive:t==="help",onClick:()=>s("help"),tooltip:"Help & Support",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help & Support"})]})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Tenant Admin"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}const vGe=[{label:"Open Export LCs",value:"7",helper:"+2 from last week",icon:e.jsx(Be,{className:"h-5 w-5 text-blue-500"}),trend:"up"},{label:"Open Import LCs",value:"5",helper:"1 pending review",icon:e.jsx(Be,{className:"h-5 w-5 text-purple-500"}),trend:"neutral"},{label:"Pending Reviews",value:"3",helper:"Requires attention",icon:e.jsx(Ve,{className:"h-5 w-5 text-amber-500"}),trend:"down"},{label:"Critical Discrepancies",value:"2",helper:"SLA approaching",icon:e.jsx(bi,{className:"h-5 w-5 text-red-500"}),trend:"neutral"},{label:"Team Members",value:"28",helper:"Across 3 workspaces",icon:e.jsx(xs,{className:"h-5 w-5 text-primary"}),trend:"up"},{label:"Avg Processing Time",value:"1.8 days",helper:"Last 30 days",icon:e.jsx(mt,{className:"h-5 w-5 text-muted-foreground"}),trend:"down"}],jGe=[{name:"Export Operations",description:"Handles pre-shipment compliance, advising and negotiation.",members:12,openTasks:3,link:"/lcopilot/exporter-dashboard"},{name:"Import Compliance",description:"Supplier document vetting and bank discrepancy responses.",members:9,openTasks:2,link:"/lcopilot/importer-dashboard"},{name:"Finance & Treasury",description:"Collections, URR 725 reimbursements and FX settlements.",members:7,openTasks:1,link:"/lcopilot/analytics"}],bGe=[{id:"ACT-232",role:"Export Ops",description:"Reviewed amendment request for LC #EXP-991",timestamp:"18 minutes ago"},{id:"ACT-231",role:"Treasury",description:"Uploaded reimbursement authorization to BRAC Bank",timestamp:"2 hours ago"},{id:"ACT-230",role:"Import Ops",description:"Flagged missing packing list for LC #IMP-776",timestamp:"Yesterday"}],yGe=[{title:"Discrepancy heat map",detail:"Forwarder address mismatches are trending up for EU shipments."},{title:"Bank escalation risk",detail:"Two pending Sonali Bank sessions nearing SLA breach in 24 hours."},{title:"Team workload",detail:"Import workspace running at 120% capacity. Rebalance tasks."}];function NGe(){const{user:t,isLoading:s}=Dt(),a=zt(),[r,n]=m.useState("dashboard");if(m.useEffect(()=>{!s&&!t&&a("/login")},[s,t,a]),s)return e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})});if(!t)return null;const i=t?{id:t.id,name:t.user_metadata?.full_name||t.email?.split("@")[0]||"User",email:t.email||"",role:t.user_metadata?.role||"tenant_admin"}:null;return e.jsx(Lc,{sidebar:e.jsx(gGe,{activeSection:r,onSectionChange:n,user:i}),children:e.jsx("div",{className:"p-6 lg:p-8",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("header",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Q,{variant:"secondary",className:"bg-primary/10 text-primary",children:"Enterprise Tenant Admin"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Medium & Large Enterprises"})]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Enterprise Command Center"}),e.jsx("p",{className:"text-muted-foreground mt-1",children:"Monitor LC validation across export, import, and finance teams. Configure workspaces, assign roles, and stay ahead of bank escalations."})]})]}),e.jsx("section",{children:e.jsx("div",{className:"grid gap-4 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6",children:vGe.map(l=>e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(ee,{className:"text-sm font-medium text-muted-foreground",children:l.label}),l.icon]}),e.jsxs(U,{children:[e.jsx("div",{className:"text-2xl font-bold",children:l.value}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:l.helper})]})]},l.label))})}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs($,{className:"lg:col-span-2",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Team Workspaces"}),e.jsx(ue,{className:"mt-1",children:"Assign roles, monitor activity, and open workspace dashboards."})]}),e.jsxs(M,{variant:"outline",size:"sm",children:[e.jsx(xs,{className:"mr-2 h-4 w-4"}),"Manage teams"]})]})}),e.jsx(U,{className:"space-y-3",children:jGe.map(l=>e.jsxs("div",{className:"flex flex-col gap-3 rounded-lg border bg-card p-4 md:flex-row md:items-center md:justify-between",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"font-semibold",children:l.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:l.description}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-muted-foreground",children:[e.jsxs("span",{className:"inline-flex items-center gap-1",children:[e.jsx(xs,{className:"h-3.5 w-3.5"})," ",l.members," members"]}),e.jsxs("span",{className:"inline-flex items-center gap-1 text-amber-500",children:[e.jsx(qm,{className:"h-3.5 w-3.5"})," ",l.openTasks," open tasks"]})]})]}),e.jsx(M,{asChild:!0,variant:"secondary",size:"sm",className:"md:w-auto",children:e.jsxs(pe,{to:l.link,children:["Open workspace ",e.jsx(Jt,{className:"ml-2 h-4 w-4"})]})})]},l.name))})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Bank Relationships"}),e.jsx(ue,{className:"mt-1",children:"Track LC distribution and risk across partner banks."})]}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Sonali Bank"}),e.jsx("span",{className:"text-sm font-semibold",children:"6 active LCs"})]}),e.jsx("p",{className:"mt-1 text-xs text-amber-500",children:"2 escalations approaching SLA"})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/20 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"BRAC Bank"}),e.jsx("span",{className:"text-sm font-semibold",children:"4 active LCs"})]}),e.jsx("p",{className:"mt-1 text-xs text-emerald-600",children:"All compliant"})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/20 p-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:"Standard Chartered"}),e.jsx("span",{className:"text-sm font-semibold",children:"3 active LCs"})]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Awaiting document review"})]}),e.jsx(M,{asChild:!0,variant:"outline",size:"sm",className:"w-full",children:e.jsxs(pe,{to:"/lcopilot/analytics/bank",children:["Open bank analytics ",e.jsx(Vt,{className:"ml-2 h-4 w-4"})]})})]})]})]}),e.jsx(As,{className:"opacity-20"}),e.jsxs("section",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs($,{className:"lg:col-span-2",children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Cross-Team Activity"}),e.jsx(ue,{className:"mt-1",children:"Most recent updates across export, import, and finance teams."})]}),e.jsx(U,{children:e.jsxs(Os,{defaultValue:"activity",className:"w-full",children:[e.jsxs(Fs,{className:"grid w-full grid-cols-2",children:[e.jsx(He,{value:"activity",children:"Activity Feed"}),e.jsx(He,{value:"strategic",children:"Strategic Insights"})]}),e.jsx(Qe,{value:"activity",className:"space-y-3 mt-4",children:bGe.map(l=>e.jsxs("div",{className:"flex items-start justify-between rounded-lg border bg-card p-3",children:[e.jsxs("div",{className:"space-y-1",children:[e.jsx("p",{className:"text-sm font-medium",children:l.description}),e.jsx("p",{className:"text-xs text-muted-foreground",children:l.role})]}),e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap ml-2",children:l.timestamp})]},l.id))}),e.jsx(Qe,{value:"strategic",className:"space-y-3 mt-4",children:yGe.map(l=>e.jsxs("div",{className:"rounded-lg border bg-card p-3",children:[e.jsx("p",{className:"text-sm font-medium",children:l.title}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:l.detail})]},l.title))})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Governance & Controls"}),e.jsx(ue,{className:"mt-1",children:"Configure approval layers, retention rules, and evidence archives."})]}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs("div",{className:"rounded-lg border bg-muted/30 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(cp,{className:"h-4 w-4"})," Approval chains"]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"Finance approval required above USD 200K."})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(Jde,{className:"h-4 w-4"})," Retention policies"]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"LC evidence stored for 7 years (URC 522 compliance)."})]}),e.jsxs("div",{className:"rounded-lg border bg-muted/20 p-3",children:[e.jsxs("div",{className:"flex items-center gap-2 font-medium",children:[e.jsx(Wn,{className:"h-4 w-4"})," Audit log"]}),e.jsx("p",{className:"mt-1 text-xs text-muted-foreground",children:"14 key events recorded this week."})]}),e.jsx(M,{asChild:!0,variant:"secondary",size:"sm",className:"w-full",children:e.jsx(pe,{to:"/lcopilot/exporter-analytics",children:"Review governance settings"})})]})]})]})]})})})}const wGe=[{items:[{id:"home",label:"Home",icon:ej,href:"/hub"},{id:"usage",label:"Usage",icon:Ws,href:"/hub/usage",requiresAdmin:!0}]},{title:"Tools",items:[{id:"lcopilot",label:"LCopilot",icon:Gs,href:"/lcopilot/exporter-dashboard",badge:"Active",badgeVariant:"success",toolId:"lcopilot"},{id:"lc-builder",label:"LC Builder",icon:Be,href:"/lc-builder/dashboard",badge:"Active",badgeVariant:"success",toolId:"lc_builder"},{id:"doc-generator",label:"Doc Generator",icon:Be,href:"/doc-generator/dashboard",badge:"Active",badgeVariant:"success",toolId:"doc-generator"},{id:"sanctions",label:"Sanctions",icon:Ot,href:"/sanctions/dashboard",badge:"Active",badgeVariant:"success",toolId:"sanctions"},{id:"hs-code",label:"HS Code Finder",icon:Ps,href:"/hs-code/dashboard",badge:"Active",badgeVariant:"success",toolId:"hs_code"},{id:"tracking",label:"Container Track",icon:Us,href:"/tracking/dashboard",badge:"Active",badgeVariant:"success",toolId:"container"},{id:"price-verify",label:"Price Verify",icon:Na,href:"/price-verify/dashboard",badge:"Active",badgeVariant:"success",toolId:"price_verify"}]},{title:"Account",items:[{id:"billing",label:"Billing",icon:pn,href:"/hub/billing",requiresAdmin:!0},{id:"team",label:"Team",icon:xs,href:"/hub/team",requiresAdmin:!0},{id:"settings",label:"Settings",icon:sn,href:"/hub/settings"}]}];function _Ge(){const t=rn(),s=zt(),{user:a,logout:r,isLoading:n}=Dt(),{role:i,isOwner:l,isAdmin:o,canAccessTool:d,isLoading:c}=w_(),[u,h]=m.useState(!1),[x,g]=m.useState(!1),[j,y]=m.useState("Pay-as-you-go");m.useEffect(()=>{if(!n&&!c&&!a){const D=setTimeout(()=>{a||s("/login?returnUrl="+encodeURIComponent(t.pathname))},150);return()=>clearTimeout(D)}},[a,n,c,s,t.pathname]);const b=D=>c||i===null?!0:!(D.requiresAdmin&&!l&&!o||D.requiresOwner&&!l||D.toolId&&!l&&!o&&!d(D.toolId)),N=wGe.map(D=>({...D,items:D.items.filter(b)})).filter(D=>D.items.length>0),C=D=>D==="/hub"?t.pathname==="/hub"||t.pathname==="/hub/home":t.pathname.startsWith(D),_=a?.full_name||a?.email?.split("@")[0]||"User",A=async()=>{await r(),s("/login")};if(n||c)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-950 via-slate-900 to-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-8 h-8 border-2 border-blue-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-[#9fb3aa]",children:"Loading..."})]})});const E=l?{label:"Owner",color:"bg-purple-500"}:o?{label:"Admin",color:"bg-blue-500"}:i==="member"?{label:"Member",color:"bg-green-500"}:i==="viewer"?{label:"Viewer",color:"bg-slate-500"}:{label:"Owner",color:"bg-purple-500"};return e.jsx(nh,{children:e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[#050b09] via-[#0b1713] to-[#050b09]",children:[e.jsx("header",{className:"lg:hidden border-b border-[#B2F273]/10 bg-[#0b1713]/90 backdrop-blur-xl sticky top-0 z-50",children:e.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>g(!x),className:"text-[#9fb3aa]",children:x?e.jsx(fn,{className:"w-5 h-5"}):e.jsx(TD,{className:"w-5 h-5"})}),e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-gradient-to-br from-[#B2F273] to-[#6d9447] flex items-center justify-center",children:e.jsx(ni,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"text-lg font-bold text-white",children:"TRDR Hub"})]})]}),e.jsx(Ux,{className:"h-8 w-8",children:e.jsx(zx,{className:"bg-gradient-to-br from-[#B2F273] to-[#6d9447] text-white text-sm",children:_.charAt(0).toUpperCase()})})]})}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:Le("fixed inset-y-0 left-0 z-40 flex flex-col border-r border-[#B2F273]/10 bg-[#0b1713]/95 backdrop-blur-xl transition-all duration-300",u?"w-[70px]":"w-[260px]","hidden lg:flex",x&&"flex lg:hidden w-[280px]"),children:[e.jsx("div",{className:Le("flex items-center gap-3 px-4 py-5 border-b border-white/5",u&&"justify-center px-2"),children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-9 h-9 rounded-xl bg-gradient-to-br from-[#B2F273] to-[#6d9447] flex items-center justify-center flex-shrink-0",children:e.jsx(ni,{className:"w-5 h-5 text-white"})}),!u&&e.jsxs("div",{children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"TRDR Hub"}),e.jsx(Q,{variant:"outline",className:"ml-2 text-[10px] border-emerald-500/30 text-[#B2F273]",children:j})]})]})}),e.jsx("nav",{className:"flex-1 overflow-y-auto py-4 px-3",children:N.map((D,R)=>e.jsxs("div",{className:Le(R>0&&"mt-6"),children:[D.title&&!u&&e.jsx("h3",{className:"px-3 mb-2 text-xs font-semibold text-[#7d8f87] uppercase tracking-wider",children:D.title}),D.title&&u&&e.jsx(As,{className:"mb-2 bg-white/5"}),e.jsx("div",{className:"space-y-1",children:D.items.map(O=>{const P=O.icon,T=C(O.href);O.disabled;const B=e.jsxs("div",{className:Le("flex items-center gap-3 px-3 py-2.5 rounded-lg transition-all",T?"bg-gradient-to-r from-[#B2F273]/15 to-[#6d9447]/15 text-white":O.disabled?"text-slate-600 cursor-not-allowed":"text-[#9fb3aa] hover:text-white hover:bg-white/5",u&&"justify-center px-2"),children:[e.jsx(P,{className:Le("w-5 h-5 flex-shrink-0",T&&"text-[#B2F273]")}),!u&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"flex-1 text-sm font-medium",children:O.label}),O.badge&&e.jsxs(Q,{variant:"outline",className:Le("text-[10px] px-1.5",O.badgeVariant==="success"&&"border-emerald-500/30 text-[#B2F273]",O.badgeVariant==="warning"&&"border-amber-500/30 text-amber-400",O.badgeVariant==="default"&&"border-slate-500/30 text-[#7d8f87]"),children:[O.disabled&&e.jsx($o,{className:"w-2.5 h-2.5 mr-0.5"}),O.badge]})]})]});return u?e.jsxs(pu,{delayDuration:0,children:[e.jsx(fu,{asChild:!0,children:O.disabled?e.jsx("div",{children:B}):e.jsx(pe,{to:O.href,children:B})}),e.jsxs(vd,{side:"right",className:"bg-[#13221d] border-white/10",children:[e.jsx("p",{children:O.label}),O.badge&&e.jsxs("span",{className:"text-xs text-[#9fb3aa] ml-1",children:["(",O.badge,")"]})]})]},O.id):O.disabled?e.jsx("div",{children:B},O.id):e.jsx(pe,{to:O.href,onClick:()=>g(!1),children:B},O.id)})})]},R))}),e.jsxs("div",{className:"border-t border-white/5 p-3 space-y-2",children:[!u&&e.jsx(e.Fragment,{children:e.jsxs(pe,{to:"/support",className:"flex items-center gap-3 px-3 py-2 rounded-lg text-[#9fb3aa] hover:text-white hover:bg-white/5 transition-colors",children:[e.jsx(Pn,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Help & Support"})]})}),e.jsxs("div",{className:Le("flex items-center gap-3 px-3 py-2 rounded-lg bg-[#111d19]/70",u&&"justify-center px-2"),children:[e.jsx(Ux,{className:"h-8 w-8",children:e.jsx(zx,{className:"bg-gradient-to-br from-[#B2F273] to-[#6d9447] text-white text-sm",children:_.charAt(0).toUpperCase()})}),!u&&e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"text-sm font-medium text-white truncate",children:_}),E&&e.jsx("span",{className:Le("px-1.5 py-0.5 text-[10px] font-medium rounded text-white",E.color),children:E.label})]}),e.jsx("p",{className:"text-xs text-[#9fb3aa] truncate",children:j})]}),!u&&e.jsx(M,{variant:"ghost",size:"icon",className:"text-[#9fb3aa] hover:text-white h-8 w-8",onClick:A,children:e.jsx(Yo,{className:"w-4 h-4"})})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:()=>h(!u),className:Le("w-full text-[#9fb3aa] hover:text-white hover:bg-white/5",u&&"px-2"),children:u?e.jsx(xr,{className:"w-4 h-4"}):e.jsxs(e.Fragment,{children:[e.jsx(Uj,{className:"w-4 h-4 mr-2"}),"Collapse"]})})]})]}),x&&e.jsx("div",{className:"fixed inset-0 bg-black/50 z-30 lg:hidden",onClick:()=>g(!1)}),e.jsx("main",{className:Le("flex-1 min-h-screen transition-all duration-300",u?"lg:ml-[70px]":"lg:ml-[260px]"),children:e.jsx(ip,{})})]})]})})}const SA="",CGe=[{id:"lcopilot",name:"LCopilot",description:"AI-powered LC validation against UCP600/ISBP rules",icon:Gs,color:"from-[#B2F273] to-[#7ea94e]",bgColor:"bg-[#d8b56a]/10",borderColor:"border-[#d8b56a]/25",href:"/lcopilot/exporter-dashboard",operation:"lc_validations",pricePerUnit:5},{id:"lc_builder",name:"LC Builder",description:"Guided LC application builder with clause library",icon:Fu,color:"from-[#B2F273] to-[#7ea94e]",bgColor:"bg-[#B2F273]/10",borderColor:"border-[#B2F273]/25",href:"/lc-builder/dashboard",operation:"lc_applications",pricePerUnit:2},{id:"doc-generator",name:"Doc Generator",description:"Generate LC-compliant shipping documents",icon:Be,color:"from-[#d8b56a] to-[#a88947]",bgColor:"bg-[#d8b56a]/10",borderColor:"border-[#d8b56a]/25",href:"/doc-generator/dashboard",operation:"doc_sets",pricePerUnit:.25},{id:"sanctions",name:"Sanctions Screener",description:"Real-time screening against global sanctions lists",icon:Ot,color:"from-[#d8b56a] to-[#a88947]",bgColor:"bg-[#d8b56a]/10",borderColor:"border-[#d8b56a]/25",href:"/sanctions/dashboard",operation:"sanctions_screens",pricePerUnit:.5},{id:"hs_code",name:"HS Code Finder",description:"AI classification for customs tariff codes",icon:Ps,color:"from-[#d8b56a] to-[#a88947]",bgColor:"bg-[#d8b56a]/10",borderColor:"border-[#d8b56a]/25",href:"/hs-code/dashboard",operation:"hs_lookups",pricePerUnit:.25},{id:"container",name:"Container Tracker",description:"Real-time shipment tracking across carriers",icon:Us,color:"from-[#B2F273] to-[#7ea94e]",bgColor:"bg-[#B2F273]/10",borderColor:"border-[#B2F273]/25",href:"/tracking/dashboard",operation:"container_tracks",pricePerUnit:1},{id:"price_verify",name:"Price Verify",description:"TBML compliance - verify prices against market data",icon:Na,color:"from-green-500 to-green-600",bgColor:"bg-green-500/10",borderColor:"border-green-500/20",href:"/price-verify/dashboard",operation:"price_checks",pricePerUnit:.5}];function JU(){const t=zt();et();const{role:s,isOwner:a,isAdmin:r,canAccessTool:n,isLoading:i}=w_(),[l,o]=m.useState(!0),[d,c]=m.useState(null),[u,h]=m.useState(null),[x,g]=m.useState([]),[j,y]=m.useState("User"),b=CGe.filter(D=>i||s===null||a||r?!0:n(D.id));m.useEffect(()=>{N()},[]);const N=async()=>{o(!0);try{const D=await fetch(`${SA}/usage/limits`,{credentials:"include"});if(D.ok){const P=await D.json();c(P)}const R=await fetch(`${SA}/usage/subscription`,{credentials:"include"});if(R.ok){const P=await R.json();h(P)}const O=await fetch(`${SA}/usage/logs?limit=5`,{credentials:"include"});if(O.ok){const P=await O.json();g(P.logs||[])}}catch(D){console.error("Failed to fetch dashboard data:",D)}finally{o(!1)}},C=D=>{if(!d?.limits)return{used:0,limit:"â€”",remaining:"â€”",percent:0};const R=d.limits[D];if(!R)return{used:0,limit:"â€”",remaining:"â€”",percent:0};const O=typeof R.limit=="number"?R.limit:0,P=R.used||0,T=O>0?Math.min(P/O*100,100):0;return{used:P,limit:R.limit==="unlimited"?"âˆž":R.limit,remaining:R.remaining==="unlimited"?"âˆž":R.remaining,percent:T}},_=()=>{if(!d?.limits)return 0;let D=0,R=0;return Object.values(d.limits).forEach(O=>{typeof O.limit=="number"&&O.limit>0&&(D+=O.used||0,R+=O.limit)}),R>0?Math.min(D/R*100,100):0},A=D=>D?new Date(D).toLocaleDateString("en-US",{month:"short",day:"numeric"}):"â€”",k=D=>{const R=new Date(D),P=new Date().getTime()-R.getTime(),T=Math.floor(P/6e4),B=Math.floor(P/36e5),G=Math.floor(P/864e5);return T<1?"just now":T<60?`${T}m ago`:B<24?`${B}h ago`:`${G}d ago`},E=D=>({lc_validation:"LC Validation",price_check:"Price Check",hs_lookup:"HS Code Lookup",sanctions_screen:"Sanctions Screen",container_track:"Container Track"})[D]||D;return e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h1",{className:"text-3xl font-bold text-white mb-2",children:["Welcome back",j!=="User"?`, ${j}`:"","! ðŸ‘‹"]}),e.jsxs("p",{className:"text-slate-400",children:["Your trade compliance toolkit â€¢ ",u?.plan?.name||"Pay-as-you-go"," Plan"]})]}),e.jsxs($,{className:"mb-8 bg-[#0f1a16]/65 border-white/5 overflow-hidden",children:[e.jsx(X,{className:"pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Wn,{className:"w-5 h-5 text-[#B2F273]"}),"Usage This Month"]}),e.jsx(ue,{className:"text-slate-400",children:d?.period_start&&d?.period_end?`${A(d.period_start)} - ${A(d.period_end)}`:"Current billing period"})]}),e.jsx(M,{variant:"outline",size:"sm",className:"border-white/10 text-slate-300",asChild:!0,children:e.jsxs(pe,{to:"/hub/usage",children:["View Details",e.jsx(xr,{className:"w-4 h-4 ml-1"})]})})]})}),e.jsx(U,{children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-slate-400",children:"Overall Usage"}),e.jsxs("span",{className:"text-sm font-medium text-white",children:[Math.round(_()),"%"]})]}),e.jsx(es,{value:_(),className:"h-2 bg-slate-800"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 pt-2",children:b.filter(D=>!D.comingSoon).map(D=>{const R=C(D.operation);return e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:R.used}),e.jsxs("div",{className:"text-xs text-slate-400",children:["/ ",R.limit," ",D.name.split(" ")[0]]})]},D.id)})})]})})]}),e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Your Tools"}),e.jsx(M,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",asChild:!0,children:e.jsxs(pe,{to:"/tools",children:["Browse All Tools",e.jsx(Zm,{className:"w-4 h-4 ml-1"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:b.map(D=>{const R=C(D.operation),O=D.icon,P=D.comingSoon;return e.jsxs($,{className:`group relative overflow-hidden transition-all duration-300 ${P?"bg-slate-900/30 border-white/5 opacity-60":"bg-[#0f1a16]/65 border-white/5 hover:border-white/20 hover:shadow-lg cursor-pointer"}`,onClick:()=>!P&&t(D.href),children:[!P&&e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${D.color} opacity-0 group-hover:opacity-5 transition-opacity`}),e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${D.bgColor} ${D.borderColor} border`,children:e.jsx(O,{className:"w-6 h-6",style:{color:D.color.includes("blue")?"#3b82f6":D.color.includes("emerald")?"#10b981":D.color.includes("purple")?"#a855f7":D.color.includes("red")?"#ef4444":"#06b6d4"}})}),P?e.jsxs(Q,{variant:"outline",className:"border-slate-700 text-slate-500 text-xs",children:[e.jsx($o,{className:"w-3 h-3 mr-1"}),"Coming Soon"]}):e.jsxs(Q,{variant:"outline",className:"border-emerald-500/30 text-[#B2F273] text-xs",children:[e.jsx(gn,{className:"w-3 h-3 mr-1"}),"Active"]})]}),e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:D.name}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:D.description}),!P&&e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"text-white font-medium",children:R.used}),e.jsxs("span",{className:"text-slate-500",children:[" / ",R.limit," used"]})]}),e.jsx(xr,{className:"w-4 h-4 text-slate-500 group-hover:text-white transition-colors"})]}),P&&e.jsxs("div",{className:"flex items-center justify-between pt-3 border-t border-white/5",children:[e.jsxs("div",{className:"text-sm text-slate-500",children:["$",D.pricePerUnit.toFixed(2)," per use"]}),e.jsx(M,{size:"sm",variant:"ghost",className:"text-slate-400 h-7 px-2",children:"Notify Me"})]})]})]},D.id)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs($,{className:"lg:col-span-2 bg-[#0f1a16]/65 border-white/5",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5 text-[#d8b56a]"}),"Recent Activity"]})}),e.jsx(U,{children:x.length>0?e.jsx("div",{className:"space-y-3",children:x.map(D=>e.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${D.operation==="lc_validation"?"bg-[#d8b56a]/10":D.operation==="price_check"?"bg-[#B2F273]/10":"bg-[#d8b56a]/10"}`,children:D.operation==="lc_validation"?e.jsx(Gs,{className:"w-4 h-4 text-[#d8b56a]"}):D.operation==="price_check"?e.jsx(Na,{className:"w-4 h-4 text-[#B2F273]"}):e.jsx(Ps,{className:"w-4 h-4 text-[#d8b56a]"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-white",children:E(D.operation)}),e.jsx("p",{className:"text-xs text-slate-400",children:D.description||`via ${D.tool}`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-400",children:k(D.created_at)}),D.is_overage&&e.jsx(Q,{variant:"outline",className:"border-amber-500/30 text-amber-400 text-xs mt-1",children:"Overage"})]})]},D.id))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Wn,{className:"w-10 h-10 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"No recent activity"}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:"Start using tools to see activity here"})]})})]}),e.jsxs($,{className:"bg-[#0f1a16]/65 border-white/5",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(gn,{className:"w-5 h-5 text-amber-400"}),"Quick Actions"]})}),e.jsxs(U,{className:"space-y-3",children:[e.jsxs(M,{className:"w-full justify-start bg-[#d8b56a]/10 hover:bg-blue-500/20 text-[#d8b56a] border border-[#d8b56a]/25",variant:"outline",onClick:()=>t("/lcopilot/exporter-dashboard"),children:[e.jsx(Gs,{className:"w-4 h-4 mr-2"}),"Validate New LC"]}),e.jsxs(M,{className:"w-full justify-start bg-[#B2F273]/10 hover:bg-emerald-500/20 text-[#B2F273] border border-[#B2F273]/25",variant:"outline",onClick:()=>t("/price-verify/dashboard/verify"),children:[e.jsx(Na,{className:"w-4 h-4 mr-2"}),"Verify Price"]}),e.jsx(As,{className:"bg-white/5"}),e.jsxs(M,{className:"w-full justify-start text-slate-400 hover:text-white",variant:"ghost",onClick:()=>t("/hub/billing"),children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Upgrade Plan"]}),e.jsxs(M,{className:"w-full justify-start text-slate-400 hover:text-white",variant:"ghost",onClick:()=>t("/support"),children:[e.jsx(ks,{className:"w-4 h-4 mr-2"}),"Get Support"]})]})]})]}),u?.plan?.slug!=="enterprise"&&u?.plan?.slug!=="pro"&&e.jsx($,{className:"mt-8 bg-gradient-to-r from-blue-500/10 to-emerald-500/10 border-white/10 overflow-hidden",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-white mb-1",children:["Upgrade to ",u?.plan?.slug==="starter"?"Growth":"Starter"," Plan"]}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Get more validations, priority support, and API access"})]}),e.jsxs(M,{className:"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white",onClick:()=>t("/hub/billing"),children:[e.jsx(Vt,{className:"w-4 h-4 mr-2"}),"Upgrade Now"]})]})})})]})}const SGe="https://trdrhub-api.onrender.com";function kGe(){const{user:t,isLoading:s}=Dt(),[a,r]=m.useState("USD"),[n,i]=m.useState(!0);m.useEffect(()=>{async function d(){if(!s){if(!t){try{const u=await(await fetch("/api/geo")).json();u.country&&r(rj(u.country))}catch{r("USD")}i(!1);return}try{const c=await fetch(`${SGe}/auth/me`,{credentials:"include"});if(c.ok){const u=await c.json();u.company?.currency?r(u.company.currency):u.company?.country&&r(rj(u.company.country))}}catch(c){console.warn("Failed to fetch company currency:",c)}i(!1)}}d()},[t,s]);const l=qx[a]||qx.USD,o=d=>{const c=d.toLocaleString();return l.position==="after"?`${c} ${l.symbol}`:`${l.symbol}${c}`};return{currency:a,currencySymbol:l.symbol,currencyName:l.name,isLoading:n||s,formatPrice:o}}const ZN="",EGe={payg:["Pay only for what you use","No monthly commitment","All tools accessible","Email support","1 user"],starter:["5 LC validations/month","25 price checks/month","50 HS lookups/month","Email support","1 user","Export reports"],growth:["15 LC validations/month","75 price checks/month","200 HS lookups/month","Priority email support","3 users","API access","Custom reports"],pro:["40 LC validations/month","200 price checks/month","500 HS lookups/month","Priority support + chat","10 users","Full API access","White-label reports","SLA guarantee"],enterprise:["Unlimited validations","Unlimited price checks","Unlimited HS lookups","Dedicated support","Unlimited users","Full API + webhooks","White-label platform","Custom integrations","99.9% SLA"]};function AGe(){zt();const{toast:t}=et(),{currency:s,formatPrice:a}=kGe(),[r,n]=m.useState(!0),[i,l]=m.useState([]),[o,d]=m.useState(null),[c,u]=m.useState(null),[h,x]=m.useState(null),[g,j]=m.useState(!1),[y,b]=m.useState(null),[N,C]=m.useState(null),[_,A]=m.useState("monthly");m.useEffect(()=>{k()},[]);const k=async()=>{n(!0);try{const B=await fetch(`${ZN}/usage/plans`);if(B.ok){const H=await B.json();l(H.plans||[])}const G=await fetch(`${ZN}/usage/subscription`,{credentials:"include"});if(G.ok){const H=await G.json();d(H)}const q=await fetch(`${ZN}/usage/current`,{credentials:"include"});if(q.ok){const H=await q.json();u(H)}const z=await fetch(`${ZN}/usage/limits`,{credentials:"include"});if(z.ok){const H=await z.json();x(H)}}catch(B){console.error("Failed to fetch billing data:",B),t({title:"Error",description:"Failed to load billing information",variant:"destructive"})}finally{n(!1)}},E=B=>{b(B);const G=_x.find(q=>q.id===B.slug);C(G||null),j(!0)},D=async()=>{y&&(t({title:"Upgrade Initiated",description:`Redirecting to checkout for ${y.name} plan...`}),j(!1))},R=B=>B?new Date(B).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"}):"â€”",O=B=>a(B),P=o?.plan?.slug||"payg",T=B=>{if(!h?.limits)return 0;const G=h.limits[B];return!G||typeof G.limit!="number"||G.limit===0?0:Math.min(G.used/G.limit*100,100)};return e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Billing & Plans"}),e.jsx("p",{className:"text-slate-400",children:"Manage your subscription and usage"})]}),e.jsxs($,{className:"mb-8 bg-slate-900/50 border-white/5 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-emerald-500/5"}),e.jsx(X,{className:"relative",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ue,{className:"text-slate-400",children:"Current Plan"}),e.jsxs(ee,{className:"text-2xl text-white flex items-center gap-3",children:[o?.plan?.name||"Pay-as-you-go",e.jsx(Q,{variant:"outline",className:`${o?.status==="active"?"border-emerald-500/30 text-emerald-400":"border-amber-500/30 text-amber-400"}`,children:o?.status||"Active"})]})]}),o?.has_subscription&&o?.plan?.price_monthly&&e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-3xl font-bold text-white",children:[O(o.plan.price_monthly),e.jsx("span",{className:"text-sm text-slate-400 font-normal",children:"/mo"})]}),o.current_period_end&&e.jsxs("p",{className:"text-sm text-slate-400",children:["Renews ",R(o.current_period_end)]})]})]})}),e.jsx(U,{className:"relative",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(ya,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Billing Period"})]}),e.jsx("p",{className:"text-white font-medium",children:c?.period?.start&&c?.period?.end?`${R(c.period.start)} - ${R(c.period.end)}`:"Monthly"})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(Na,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Overage This Month"})]}),e.jsx("p",{className:"text-white font-medium",children:O(c?.overage?.total_charges||0)})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-2",children:[e.jsx(xs,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:"Team Members"})]}),e.jsxs("p",{className:"text-white font-medium",children:["1 / ",i.find(B=>B.slug===P)?.max_users||1]})]})]})})]}),e.jsxs(Os,{defaultValue:"usage",className:"space-y-6",children:[e.jsxs(Fs,{className:"bg-slate-800/50 border border-white/5",children:[e.jsx(He,{value:"usage",className:"data-[state=active]:bg-slate-700",children:"Usage"}),e.jsx(He,{value:"plans",className:"data-[state=active]:bg-slate-700",children:"Plans"}),e.jsx(He,{value:"invoices",className:"data-[state=active]:bg-slate-700",children:"Invoices"})]}),e.jsx(Qe,{value:"usage",children:e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Usage This Month"}),e.jsx(ue,{className:"text-slate-400",children:"Track your usage across all tools"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white",children:"LC Validations"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[c?.usage?.lc_validations||0," /"," ",h?.limits?.lc_validations?.limit==="unlimited"?"âˆž":h?.limits?.lc_validations?.limit||"âˆž"]})]}),e.jsx(es,{value:T("lc_validations"),className:"h-2 bg-slate-800"}),c?.overage?.lc_validations>0&&e.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:["+",c.overage.lc_validations," overage @ $5.00 each"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white",children:"Price Checks"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[c?.usage?.price_checks||0," /"," ",h?.limits?.price_checks?.limit==="unlimited"?"âˆž":h?.limits?.price_checks?.limit||"âˆž"]})]}),e.jsx(es,{value:T("price_checks"),className:"h-2 bg-slate-800"}),c?.overage?.price_checks>0&&e.jsxs("p",{className:"text-xs text-amber-400 mt-1",children:["+",c.overage.price_checks," overage @ $0.50 each"]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white",children:"HS Code Lookups"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[c?.usage?.hs_lookups||0," /"," ",h?.limits?.hs_lookups?.limit==="unlimited"?"âˆž":h?.limits?.hs_lookups?.limit||"âˆž"]})]}),e.jsx(es,{value:T("hs_lookups"),className:"h-2 bg-slate-800"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white",children:"Sanctions Screens"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[c?.usage?.sanctions_screens||0," /"," ",h?.limits?.sanctions_screens?.limit==="unlimited"?"âˆž":h?.limits?.sanctions_screens?.limit||"âˆž"]})]}),e.jsx(es,{value:T("sanctions_screens"),className:"h-2 bg-slate-800"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-white",children:"Container Tracks"}),e.jsxs("span",{className:"text-sm text-slate-400",children:[c?.usage?.container_tracks||0," /"," ",h?.limits?.container_tracks?.limit==="unlimited"?"âˆž":h?.limits?.container_tracks?.limit||"âˆž"]})]}),e.jsx(es,{value:T("container_tracks"),className:"h-2 bg-slate-800"})]}),e.jsx(As,{className:"bg-white/5"}),c?.overage?.total_charges>0&&e.jsxs("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ks,{className:"w-5 h-5 text-amber-400"}),e.jsx("span",{className:"text-amber-400 font-medium",children:"Overage Charges"})]}),e.jsx("span",{className:"text-xl font-bold text-white",children:O(c.overage.total_charges)})]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:"Charges will be added to your next invoice. Consider upgrading to a higher plan to avoid overage fees."})]})]})]})}),e.jsxs(Qe,{value:"plans",children:[e.jsxs("div",{className:"flex items-center justify-center gap-4 mb-8",children:[e.jsx("span",{className:`text-sm ${_==="monthly"?"text-white":"text-slate-500"}`,children:"Monthly"}),e.jsx("button",{onClick:()=>A(B=>B==="monthly"?"yearly":"monthly"),className:`w-14 h-7 rounded-full p-1 transition-colors ${_==="yearly"?"bg-emerald-500":"bg-slate-700"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white transition-transform ${_==="yearly"?"translate-x-7":""}`})}),e.jsxs("span",{className:`text-sm flex items-center gap-1 ${_==="yearly"?"text-white":"text-slate-500"}`,children:["Yearly",e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 text-xs",children:"Save 20%"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:_x.map(B=>{const G=B.id===P||B.id==="free"&&P==="payg",q=Vm(B,s,_),z=Vm(B,s,"yearly")*12;return e.jsxs($,{className:`relative overflow-hidden transition-all ${G?"bg-gradient-to-br from-blue-500/10 to-emerald-500/10 border-emerald-500/30":B.popular?"bg-gradient-to-br from-blue-500/5 to-purple-500/5 border-blue-500/30":"bg-slate-900/50 border-white/5 hover:border-white/20"}`,children:[G&&e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx(Q,{className:"rounded-none rounded-bl-lg bg-emerald-500 text-white",children:"Current"})}),B.popular&&!G&&e.jsx("div",{className:"absolute top-0 right-0",children:e.jsx(Q,{className:"rounded-none rounded-bl-lg bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:"Popular"})}),e.jsxs(X,{className:"pb-2",children:[e.jsx(ee,{className:"text-lg text-white",children:B.name}),e.jsx(ue,{className:"text-slate-400 text-xs",children:B.description}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[e.jsx("span",{className:"text-3xl font-bold text-white",children:q===0?"Free":e2(B,s,_)}),q>0&&e.jsx("span",{className:"text-slate-400 text-sm",children:"/mo"})]}),_==="yearly"&&q>0&&e.jsxs("p",{className:"text-xs text-emerald-400",children:[a(z)," billed yearly"]})]}),e.jsx(U,{className:"pt-0",children:e.jsx("ul",{className:"space-y-2",children:B.features.slice(0,6).map((H,le)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Za,{className:"w-4 h-4 text-emerald-400 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-slate-300",children:H})]},le))})}),e.jsx(Xw,{children:G?e.jsx(M,{disabled:!0,className:"w-full bg-slate-800 text-slate-400",children:"Current Plan"}):B.id==="enterprise"?e.jsx(M,{variant:"outline",className:"w-full border-white/10 text-white hover:bg-white/5",onClick:()=>window.location.href="mailto:sales@trdrhub.com?subject=Enterprise Plan Inquiry",children:"Contact Sales"}):e.jsx(M,{className:`w-full ${B.popular?"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600":"bg-slate-800 hover:bg-slate-700"} text-white`,onClick:()=>{const H=i.find(le=>le.slug===B.id);H&&E(H)},children:_x.findIndex(H=>H.id===B.id)>_x.findIndex(H=>H.id===P||H.id==="free"&&P==="payg")?"Upgrade":"Switch"})})]},B.id)})}),e.jsx($,{className:"mt-8 bg-gradient-to-r from-slate-900 to-slate-800 border-white/10",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Need a custom solution?"}),e.jsx("p",{className:"text-slate-400",children:"Enterprise plans include custom limits, dedicated support, SLA, and white-labeling options."})]}),e.jsxs(M,{variant:"outline",className:"border-white/20 text-white hover:bg-white/10",onClick:()=>window.location.href="mailto:sales@trdrhub.com?subject=Enterprise Plan Inquiry",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Talk to Sales"]})]})})})]}),e.jsx(Qe,{value:"invoices",children:e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Billing History"}),e.jsx(ue,{className:"text-slate-400",children:"Download past invoices and receipts"})]}),e.jsx(U,{children:e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Fu,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No invoices yet"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Your billing history will appear here once you have transactions."})]})})]})})]}),e.jsx(wt,{open:g,onOpenChange:j,children:e.jsxs(yt,{className:"bg-slate-900 border-white/10",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"text-white",children:["Upgrade to ",N?.name||y?.name]}),e.jsx(_t,{className:"text-slate-400",children:N?_==="yearly"?`You'll be charged ${a(Vm(N,s,"yearly")*12)} annually.`:`You'll be charged ${e2(N,s,"monthly")} per month.`:`You'll be charged ${O(y?.price_monthly||0)} per month.`})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsx("h4",{className:"text-sm font-medium text-white mb-2",children:"What you'll get:"}),e.jsx("ul",{className:"space-y-1",children:(N?.features||EGe[y?.slug||""])?.slice(0,4).map((B,G)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-300",children:[e.jsx(Za,{className:"w-4 h-4 text-emerald-400"}),B]},G))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsx(Ot,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-sm text-blue-300",children:"30-day money-back guarantee. Cancel anytime."})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>j(!1),className:"border-white/10 text-slate-300",children:"Cancel"}),e.jsxs(M,{onClick:D,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:[e.jsx(pn,{className:"w-4 h-4 mr-2"}),"Proceed to Checkout"]})]})]})})]})}const bf="",QU={owner:"Full access including billing and team management",admin:"Can manage team members and all tools",member:"Can use all tools and view reports",viewer:"Read-only access to reports and analytics"},XU={owner:"bg-amber-500/10 text-amber-400 border-amber-500/20",admin:"bg-purple-500/10 text-purple-400 border-purple-500/20",member:"bg-blue-500/10 text-blue-400 border-blue-500/20",viewer:"bg-slate-500/10 text-slate-400 border-slate-500/20"};function PGe(){const t=zt(),{toast:s}=et(),{canManageTeam:a,isLoading:r}=w_(),[n,i]=m.useState(!0),[l,o]=m.useState([]),[d,c]=m.useState([]),[u,h]=m.useState(5),[x,g]=m.useState(!1),[j,y]=m.useState(""),[b,N]=m.useState("member"),[C,_]=m.useState(!1);m.useEffect(()=>{r||A()},[r]);const A=async()=>{i(!0);try{const G=await fetch(`${bf}/members/`,{credentials:"include"});if(G.ok){const z=await G.json();o(z.map(H=>({id:H.id,email:H.email,name:H.full_name||H.email.split("@")[0],role:H.role,status:H.status==="active"?"active":"invited",last_active:H.joined_at})))}if(a){const z=await fetch(`${bf}/members/invitations`,{credentials:"include"});if(z.ok){const H=await z.json();c(H.map(le=>({id:le.id,email:le.email,role:le.role,status:le.status==="pending"?"pending":"expired",created_at:le.created_at,expires_at:le.expires_at})))}}const q=await fetch(`${bf}/usage/subscription`,{credentials:"include"});if(q.ok){const z=await q.json();h(z.limits?.max_users||5)}}catch(G){console.error("Failed to fetch team data:",G),s({title:"Error",description:"Failed to load team data",variant:"destructive"})}finally{i(!1)}},k=async()=>{if(j){_(!0);try{const G=await fetch(`${bf}/members/invite`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({email:j,role:b,tool_access:[]})});if(!G.ok){const z=await G.json();throw new Error(z.detail||"Failed to send invitation")}const q=await G.json();s({title:"Invitation Sent",description:`Invitation sent to ${j}`}),c([...d,{id:q.id,email:q.email,role:q.role,status:"pending",created_at:q.created_at,expires_at:q.expires_at}]),y(""),g(!1)}catch(G){s({title:"Error",description:G instanceof Error?G.message:"Failed to send invitation",variant:"destructive"})}finally{_(!1)}}},E=async G=>{try{if(!(await fetch(`${bf}/members/invitations/${G}`,{method:"DELETE",credentials:"include"})).ok)throw new Error("Failed to cancel invitation");c(d.filter(z=>z.id!==G)),s({title:"Invitation Cancelled",description:"The invitation has been cancelled"})}catch{s({title:"Error",description:"Failed to cancel invitation",variant:"destructive"})}},D=async G=>{try{const q=await fetch(`${bf}/members/${G}`,{method:"DELETE",credentials:"include"});if(!q.ok){const z=await q.json();throw new Error(z.detail||"Failed to remove member")}o(l.filter(z=>z.id!==G)),s({title:"Member Removed",description:"The member has been removed from the team"})}catch(q){s({title:"Error",description:q instanceof Error?q.message:"Failed to remove member",variant:"destructive"})}},R=async G=>{await E(G.id),y(G.email),N(G.role),g(!0)},O=async(G,q)=>{o(l.map(z=>z.id===G.id?{...z,role:q}:z)),s({title:"Role Updated",description:`${G.name||G.email} is now a ${q}`})},P=G=>new Date(G).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),T=G=>{const q=new Date(G),H=new Date().getTime()-q.getTime(),le=Math.floor(H/6e4),Y=Math.floor(H/36e5),te=Math.floor(H/864e5);return le<1?"just now":le<60?`${le}m ago`:Y<24?`${Y}h ago`:te<7?`${te}d ago`:P(G)},B=l.length+d.length<u;return e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Team Management"}),e.jsxs("p",{className:"text-slate-400",children:[l.length," of ",u," seats used"]})]}),e.jsxs(M,{onClick:()=>g(!0),disabled:!B,className:"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white",children:[e.jsx(sh,{className:"w-4 h-4 mr-2"}),"Invite Member"]})]}),e.jsxs($,{className:"mb-8 bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(xs,{className:"w-5 h-5 text-blue-400"}),"Team Members"]}),e.jsx(ue,{className:"text-slate-400",children:"People who have access to your TRDR Hub workspace"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:l.map(G=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(Ux,{className:"h-10 w-10",children:e.jsx(zx,{className:`${G.role==="owner"?"bg-gradient-to-br from-amber-500 to-orange-500":"bg-gradient-to-br from-blue-500 to-emerald-500"} text-white`,children:G.name?.charAt(0).toUpperCase()||G.email.charAt(0).toUpperCase()})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:G.name||G.email}),G.role==="owner"&&e.jsx(Jm,{className:"w-4 h-4 text-amber-400"})]}),e.jsx("p",{className:"text-sm text-slate-400",children:G.email})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx(Q,{variant:"outline",className:XU[G.role],children:G.role.charAt(0).toUpperCase()+G.role.slice(1)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:G.last_active?`Active ${T(G.last_active)}`:"Never logged in"})]}),G.role!=="owner"&&e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(dp,{className:"w-4 h-4 text-slate-400"})})}),e.jsxs(Zn,{align:"end",className:"bg-slate-900 border-white/10",children:[e.jsxs(is,{className:"text-slate-300",onClick:()=>O(G,"admin"),children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Make Admin"]}),e.jsxs(is,{className:"text-slate-300",onClick:()=>O(G,"member"),children:[e.jsx(xs,{className:"w-4 h-4 mr-2"}),"Make Member"]}),e.jsxs(is,{className:"text-slate-300",onClick:()=>O(G,"viewer"),children:[e.jsx(vue,{className:"w-4 h-4 mr-2"}),"Make Viewer"]}),e.jsx(Dc,{className:"bg-white/10"}),e.jsxs(is,{className:"text-red-400",onClick:()=>D(G.id),children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})]})]},G.id))})})]}),d.length>0&&e.jsxs($,{className:"mb-8 bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Va,{className:"w-5 h-5 text-amber-400"}),"Pending Invitations"]}),e.jsx(ue,{className:"text-slate-400",children:"Invitations awaiting acceptance"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-3",children:d.map(G=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-amber-500/10 flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:G.email}),e.jsxs("p",{className:"text-sm text-slate-400",children:["Invited as"," ",e.jsx("span",{className:"text-slate-300",children:G.role})," â€¢ Expires ",P(G.expires_at)]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"ghost",size:"sm",className:"text-slate-400 hover:text-white",onClick:()=>R(G),children:[e.jsx($i,{className:"w-4 h-4 mr-1"}),"Resend"]}),e.jsxs(M,{variant:"ghost",size:"sm",className:"text-red-400 hover:text-red-300",onClick:()=>E(G.id),children:[e.jsx(bs,{className:"w-4 h-4 mr-1"}),"Cancel"]})]})]},G.id))})})]}),e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Role Permissions"}),e.jsx(ue,{className:"text-slate-400",children:"Understanding what each role can do"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Object.entries(QU).map(([G,q])=>e.jsxs("div",{className:"p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs(Q,{variant:"outline",className:XU[G],children:[G==="owner"&&e.jsx(Jm,{className:"w-3 h-3 mr-1"}),G.charAt(0).toUpperCase()+G.slice(1)]}),e.jsx("p",{className:"text-sm text-slate-400 mt-2",children:q})]},G))})})]}),!B&&e.jsx($,{className:"mt-8 bg-gradient-to-r from-blue-500/10 to-emerald-500/10 border-white/10",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-1",children:"Need more team members?"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Upgrade your plan to add more users to your workspace."})]}),e.jsx(M,{className:"bg-gradient-to-r from-blue-500 to-emerald-500 hover:from-blue-600 hover:to-emerald-600 text-white",onClick:()=>t("/hub/billing"),children:"Upgrade Plan"})]})})}),e.jsx(wt,{open:x,onOpenChange:g,children:e.jsxs(yt,{className:"bg-slate-900 border-white/10",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:"Invite Team Member"}),e.jsx(_t,{className:"text-slate-400",children:"Send an invitation to join your TRDR Hub workspace."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-slate-300",children:"Email Address"}),e.jsx(oe,{id:"email",type:"email",placeholder:"colleague@company.com",value:j,onChange:G=>y(G.target.value),className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"role",className:"text-slate-300",children:"Role"}),e.jsxs(Te,{value:b,onValueChange:N,children:[e.jsx(Pe,{className:"bg-slate-800 border-white/10 text-white",children:e.jsx(Fe,{placeholder:"Select a role"})}),e.jsxs(De,{className:"bg-slate-900 border-white/10",children:[e.jsx(K,{value:"admin",children:"Admin"}),e.jsx(K,{value:"member",children:"Member"}),e.jsx(K,{value:"viewer",children:"Viewer"})]})]}),e.jsx("p",{className:"text-xs text-slate-500",children:QU[b]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>g(!1),className:"border-white/10 text-slate-300",children:"Cancel"}),e.jsx(M,{onClick:k,disabled:!j||C,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:C?"Sending...":"Send Invitation"})]})]})})]})}function DGe(){zt();const{toast:t}=et(),[s,a]=m.useState(!1),[r,n]=m.useState("profile"),[i,l]=m.useState({name:"",email:"",company:"",timezone:"UTC",language:"en"}),[o,d]=m.useState({email_usage_alerts:!0,email_weekly_summary:!0,email_new_features:!1,email_security_alerts:!0}),[c,u]=m.useState([]),[h,x]=m.useState(!1),[g,j]=m.useState(""),[y,b]=m.useState(""),[N,C]=m.useState(!1),[_,A]=m.useState("dark"),[k,E]=m.useState(!1);m.useEffect(()=>{l({name:"User",email:"user@company.com",company:"My Company",timezone:"UTC",language:"en"}),u([])},[]);const D=async()=>{a(!0);try{await new Promise(q=>setTimeout(q,500)),t({title:"Settings Saved",description:"Your profile has been updated."})}catch{t({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{a(!1)}},R=async()=>{a(!0);try{await new Promise(q=>setTimeout(q,500)),t({title:"Notifications Updated",description:"Your notification preferences have been saved."})}catch{t({title:"Error",description:"Failed to save notification settings",variant:"destructive"})}finally{a(!1)}},O=async()=>{if(g){a(!0);try{const q=`trdr_live_${Math.random().toString(36).substring(2,15)}${Math.random().toString(36).substring(2,15)}`;b(q),C(!0),u([...c,{id:Date.now().toString(),name:g,prefix:q.substring(0,12)+"...",created_at:new Date().toISOString(),permissions:["read","write"]}]),t({title:"API Key Created",description:"Make sure to copy your key - you won't see it again!"})}catch{t({title:"Error",description:"Failed to create API key",variant:"destructive"})}finally{a(!1)}}},P=async q=>{u(c.filter(z=>z.id!==q.id)),t({title:"API Key Deleted",description:`"${q.name}" has been revoked.`})},T=()=>{navigator.clipboard.writeText(y),t({title:"Copied!",description:"API key copied to clipboard."})},B=()=>{x(!1),j(""),b(""),C(!1)},G=q=>new Date(q).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"});return e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Settings"}),e.jsx("p",{className:"text-slate-400",children:"Manage your account and preferences"})]}),e.jsxs(Os,{value:r,onValueChange:n,className:"space-y-6",children:[e.jsxs(Fs,{className:"bg-slate-800/50 border border-white/5",children:[e.jsxs(He,{value:"profile",className:"data-[state=active]:bg-slate-700",children:[e.jsx(Ec,{className:"w-4 h-4 mr-2"}),"Profile"]}),e.jsxs(He,{value:"notifications",className:"data-[state=active]:bg-slate-700",children:[e.jsx($s,{className:"w-4 h-4 mr-2"}),"Notifications"]}),e.jsxs(He,{value:"api",className:"data-[state=active]:bg-slate-700",children:[e.jsx(Sc,{className:"w-4 h-4 mr-2"}),"API Keys"]}),e.jsxs(He,{value:"security",className:"data-[state=active]:bg-slate-700",children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Security"]})]}),e.jsxs(Qe,{value:"profile",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Personal Information"}),e.jsx(ue,{className:"text-slate-400",children:"Update your personal details"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"name",className:"text-slate-300",children:"Full Name"}),e.jsx(oe,{id:"name",value:i.name,onChange:q=>l({...i,name:q.target.value}),className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"email",className:"text-slate-300",children:"Email"}),e.jsx(oe,{id:"email",type:"email",value:i.email,onChange:q=>l({...i,email:q.target.value}),className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"company",className:"text-slate-300",children:"Company Name"}),e.jsx(oe,{id:"company",value:i.company,onChange:q=>l({...i,company:q.target.value}),className:"bg-slate-800 border-white/10 text-white"})]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Preferences"}),e.jsx(ue,{className:"text-slate-400",children:"Customize your experience"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"Timezone"}),e.jsxs(Te,{value:i.timezone,onValueChange:q=>l({...i,timezone:q}),children:[e.jsx(Pe,{className:"bg-slate-800 border-white/10 text-white",children:e.jsx(Fe,{})}),e.jsxs(De,{className:"bg-slate-900 border-white/10",children:[e.jsx(K,{value:"UTC",children:"UTC"}),e.jsx(K,{value:"America/New_York",children:"Eastern Time"}),e.jsx(K,{value:"America/Los_Angeles",children:"Pacific Time"}),e.jsx(K,{value:"Europe/London",children:"London"}),e.jsx(K,{value:"Asia/Singapore",children:"Singapore"}),e.jsx(K,{value:"Asia/Dubai",children:"Dubai"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"Language"}),e.jsxs(Te,{value:i.language,onValueChange:q=>l({...i,language:q}),children:[e.jsx(Pe,{className:"bg-slate-800 border-white/10 text-white",children:e.jsx(Fe,{})}),e.jsxs(De,{className:"bg-slate-900 border-white/10",children:[e.jsx(K,{value:"en",children:"English"}),e.jsx(K,{value:"es",children:"EspaÃ±ol"}),e.jsx(K,{value:"fr",children:"FranÃ§ais"}),e.jsx(K,{value:"de",children:"Deutsch"}),e.jsx(K,{value:"zh",children:"ä¸­æ–‡"}),e.jsx(K,{value:"ar",children:"Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"Theme"}),e.jsx("div",{className:"flex gap-2",children:[{value:"dark",icon:qw,label:"Dark"},{value:"light",icon:Gw,label:"Light"},{value:"system",icon:Wj,label:"System"}].map(({value:q,icon:z,label:H})=>e.jsxs(M,{variant:_===q?"default":"outline",size:"sm",onClick:()=>A(q),className:_===q?"bg-blue-500/20 text-blue-400 border-blue-500/30":"border-white/10 text-slate-400",children:[e.jsx(z,{className:"w-4 h-4 mr-1"}),H]},q))})]})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(M,{onClick:D,disabled:s,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs(Qe,{value:"notifications",children:[e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Email Notifications"}),e.jsx(ue,{className:"text-slate-400",children:"Choose what emails you want to receive"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Usage Alerts"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Get notified when you're approaching usage limits"})]}),e.jsx(js,{checked:o.email_usage_alerts,onCheckedChange:q=>d({...o,email_usage_alerts:q})})]}),e.jsx(As,{className:"bg-white/5"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Weekly Summary"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Receive a weekly report of your activity"})]}),e.jsx(js,{checked:o.email_weekly_summary,onCheckedChange:q=>d({...o,email_weekly_summary:q})})]}),e.jsx(As,{className:"bg-white/5"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"New Features"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Be the first to know about new tools and updates"})]}),e.jsx(js,{checked:o.email_new_features,onCheckedChange:q=>d({...o,email_new_features:q})})]}),e.jsx(As,{className:"bg-white/5"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Security Alerts"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Important security notifications (recommended)"})]}),e.jsx(js,{checked:o.email_security_alerts,onCheckedChange:q=>d({...o,email_security_alerts:q})})]})]})]}),e.jsx("div",{className:"flex justify-end mt-6",children:e.jsxs(M,{onClick:R,disabled:s,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save Preferences"]})})]}),e.jsx(Qe,{value:"api",children:e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-white",children:"API Keys"}),e.jsx(ue,{className:"text-slate-400",children:"Manage your API keys for programmatic access"})]}),e.jsxs(M,{onClick:()=>x(!0),className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create Key"]})]})}),e.jsx(U,{children:c.length>0?e.jsx("div",{className:"space-y-3",children:c.map(q=>e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg bg-slate-800/50 border border-white/5",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-emerald-500/10 flex items-center justify-center",children:e.jsx(Sc,{className:"w-5 h-5 text-emerald-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:q.name}),e.jsx("p",{className:"text-sm text-slate-400 font-mono",children:q.prefix})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"text-right text-sm",children:[e.jsxs("p",{className:"text-slate-400",children:["Created ",G(q.created_at)]}),q.last_used&&e.jsxs("p",{className:"text-slate-500",children:["Last used ",G(q.last_used)]})]}),e.jsx(M,{variant:"ghost",size:"icon",className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",onClick:()=>P(q),children:e.jsx(ia,{className:"w-4 h-4"})})]})]},q.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Sc,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No API Keys"}),e.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Create an API key to access TRDR Hub programmatically."}),e.jsxs(M,{variant:"outline",onClick:()=>x(!0),className:"border-white/10 text-slate-300",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create Your First Key"]})]})})]})}),e.jsx(Qe,{value:"security",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Password"}),e.jsx(ue,{className:"text-slate-400",children:"Change your account password"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"Current Password"}),e.jsx(oe,{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"New Password"}),e.jsx(oe,{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-slate-300",children:"Confirm New Password"}),e.jsx(oe,{type:"password",placeholder:"â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢",className:"bg-slate-800 border-white/10 text-white"})]}),e.jsxs(M,{className:"bg-slate-800 hover:bg-slate-700 text-white",children:[e.jsx($o,{className:"w-4 h-4 mr-2"}),"Update Password"]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Two-Factor Authentication"}),e.jsx(ue,{className:"text-slate-400",children:"Add an extra layer of security to your account"})]}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-slate-800 flex items-center justify-center",children:e.jsx(Ot,{className:"w-5 h-5 text-slate-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"2FA is disabled"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Protect your account with authenticator app"})]})]}),e.jsx(M,{variant:"outline",className:"border-white/10 text-slate-300",children:"Enable 2FA"})]})})]}),e.jsxs($,{className:"bg-red-500/5 border-red-500/20",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-red-400",children:"Danger Zone"}),e.jsx(ue,{className:"text-slate-400",children:"Irreversible actions for your account"})]}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-white",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Permanently delete your account and all data"})]}),e.jsxs(M,{variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10",onClick:()=>E(!0),children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})})]})]})})]}),e.jsx(wt,{open:h,onOpenChange:B,children:e.jsxs(yt,{className:"bg-slate-900 border-white/10",children:[e.jsxs(jt,{children:[e.jsx(bt,{className:"text-white",children:N?"API Key Created":"Create API Key"}),e.jsx(_t,{className:"text-slate-400",children:N?"Copy your API key now. You won't be able to see it again!":"Give your API key a name to identify it later."})]}),N?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Qs,{className:"w-5 h-5 text-emerald-400"}),e.jsx("span",{className:"text-emerald-400 font-medium",children:"Key Created Successfully"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"flex-1 p-2 rounded bg-slate-800 text-slate-300 text-sm font-mono overflow-x-auto",children:y}),e.jsx(M,{variant:"outline",size:"icon",onClick:T,className:"border-white/10",children:e.jsx(qa,{className:"w-4 h-4"})})]})]}),e.jsx("p",{className:"text-sm text-amber-400",children:"âš ï¸ Make sure to copy your key now. You won't be able to see it again!"})]}):e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{htmlFor:"keyName",className:"text-slate-300",children:"Key Name"}),e.jsx(oe,{id:"keyName",placeholder:"e.g., Production API, Development",value:g,onChange:q=>j(q.target.value),className:"bg-slate-800 border-white/10 text-white"})]})}),e.jsx(ms,{children:N?e.jsx(M,{onClick:B,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:"Done"}):e.jsxs(e.Fragment,{children:[e.jsx(M,{variant:"outline",onClick:B,className:"border-white/10 text-slate-300",children:"Cancel"}),e.jsx(M,{onClick:O,disabled:!g||s,className:"bg-gradient-to-r from-blue-500 to-emerald-500 text-white",children:"Create Key"})]})})]})}),e.jsx(pR,{open:k,onOpenChange:E,children:e.jsxs(AC,{className:"bg-slate-900 border-white/10",children:[e.jsxs(PC,{children:[e.jsx(TC,{className:"text-white",children:"Are you absolutely sure?"}),e.jsx(FC,{className:"text-slate-400",children:"This action cannot be undone. This will permanently delete your account and remove all data from our servers."})]}),e.jsxs(DC,{children:[e.jsx(OC,{className:"border-white/10 text-slate-300",children:"Cancel"}),e.jsx(RC,{className:"bg-red-500 hover:bg-red-600 text-white",children:"Delete Account"})]})]})})]})}const JN="",ez={lc_validations:"#3b82f6",price_checks:"#10b981",hs_lookups:"#a855f7",sanctions_screens:"#ef4444",container_tracks:"#06b6d4"},tz={lc_validations:"LC Validations",price_checks:"Price Checks",hs_lookups:"HS Lookups",sanctions_screens:"Sanctions",container_tracks:"Container Tracks"},sz={lc_validations:Gs,price_checks:Na,hs_lookups:Ps,sanctions_screens:Ot,container_tracks:Us};function TGe(){zt();const{toast:t}=et(),[s,a]=m.useState(!0),[r,n]=m.useState(!1),[i,l]=m.useState("current"),[o,d]=m.useState(null),[c,u]=m.useState(null),[h,x]=m.useState([]),[g,j]=m.useState([]);m.useEffect(()=>{y()},[i]);const y=async()=>{a(!0);try{const O=await fetch(`${JN}/usage/current`,{credentials:"include"});if(O.ok){const G=await O.json();d(G)}const P=await fetch(`${JN}/usage/limits`,{credentials:"include"});if(P.ok){const G=await P.json();u(G)}const T=await fetch(`${JN}/usage/logs?limit=20`,{credentials:"include"});if(T.ok){const G=await T.json();x(G.logs||[])}const B=await fetch(`${JN}/usage/history`,{credentials:"include"});if(B.ok){const G=await B.json();j(G.history||[])}}catch(O){console.error("Failed to fetch usage data:",O)}finally{a(!1)}},b=async()=>{n(!0),await y(),n(!1),t({title:"Refreshed",description:"Usage data has been updated."})},N=()=>{const O=["Date","Operation","Tool","Count","Overage","Charge"],P=h.map(z=>[new Date(z.created_at).toLocaleString(),z.operation,z.tool,z.count,z.is_overage?"Yes":"No",z.overage_charge?`$${z.overage_charge.toFixed(2)}`:"-"]),T=[O,...P].map(z=>z.join(",")).join(`
apps\web\dist\assets\index-Bz84JA8h.js:596:`),B=new Blob([T],{type:"text/csv"}),G=URL.createObjectURL(B),q=document.createElement("a");q.href=G,q.download=`usage-${new Date().toISOString().split("T")[0]}.csv`,q.click(),URL.revokeObjectURL(G),t({title:"Exported",description:"Usage data downloaded as CSV."})},C=O=>new Date(O).toLocaleDateString("en-US",{month:"short",day:"numeric"}),_=O=>new Date(O).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"2-digit"}),A=O=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(O),k=o?.usage?Object.entries(o.usage).filter(([O,P])=>P>0).map(([O,P])=>({name:tz[O]||O,value:P,color:ez[O]||"#666"})):[],E=g.length>0?g.slice(-6).map(O=>({month:O.month,"LC Validations":O.lc_validations||0,"Price Checks":O.price_checks||0,"HS Lookups":O.hs_lookups||0})):[{month:"Jul","LC Validations":3,"Price Checks":12,"HS Lookups":5},{month:"Aug","LC Validations":5,"Price Checks":18,"HS Lookups":8},{month:"Sep","LC Validations":4,"Price Checks":25,"HS Lookups":12},{month:"Oct","LC Validations":7,"Price Checks":32,"HS Lookups":15},{month:"Nov","LC Validations":6,"Price Checks":28,"HS Lookups":20},{month:"Dec","LC Validations":o?.usage?.lc_validations||2,"Price Checks":o?.usage?.price_checks||8,"HS Lookups":o?.usage?.hs_lookups||3}],D=o?.usage?Object.values(o.usage).reduce((O,P)=>O+P,0):0,R=O=>{if(!c?.limits)return 0;const P=c.limits[O];return!P||typeof P.limit!="number"||P.limit===0?0:Math.min(P.used/P.limit*100,100)};return e.jsxs("div",{className:"p-6 lg:p-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Usage Analytics"}),e.jsx("p",{className:"text-slate-400",children:o?.period?.start&&o?.period?.end?`${C(o.period.start)} - ${C(o.period.end)}`:"Current billing period"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"border-white/10 text-slate-300",onClick:b,disabled:r,children:[e.jsx(Lt,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"border-white/10 text-slate-300",onClick:N,children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-8",children:[e.jsx($,{className:"bg-slate-900/50 border-white/5",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-500/10",children:e.jsx(Ws,{className:"w-5 h-5 text-blue-400"})}),e.jsxs(Q,{variant:"outline",className:"border-emerald-500/30 text-emerald-400",children:[e.jsx(Vt,{className:"w-3 h-3 mr-1"}),"+12%"]})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:D}),e.jsx("p",{className:"text-sm text-slate-400",children:"Total Operations"})]})}),e.jsx($,{className:"bg-slate-900/50 border-white/5",children:e.jsxs(U,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 rounded-lg bg-emerald-500/10",children:e.jsx(Gs,{className:"w-5 h-5 text-emerald-400"})})}),e.jsx("p",{className:"text-3xl font-bold text-white",children:o?.usage?.lc_validations||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"LC Validations"}),e.jsx(es,{value:R("lc_validations"),className:"h-1 mt-2 bg-slate-800"})]})}),e.jsx($,{className:"bg-slate-900/50 border-white/5",children:e.jsxs(U,{className:"p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("div",{className:"p-2 rounded-lg bg-purple-500/10",children:e.jsx(Na,{className:"w-5 h-5 text-purple-400"})})}),e.jsx("p",{className:"text-3xl font-bold text-white",children:o?.usage?.price_checks||0}),e.jsx("p",{className:"text-sm text-slate-400",children:"Price Checks"}),e.jsx(es,{value:R("price_checks"),className:"h-1 mt-2 bg-slate-800"})]})}),e.jsx($,{className:"bg-slate-900/50 border-white/5",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-500/10",children:e.jsx(Vt,{className:"w-5 h-5 text-amber-400"})}),(o?.overage?.total_charges||0)>0&&e.jsx(Q,{variant:"outline",className:"border-amber-500/30 text-amber-400",children:"Overage"})]}),e.jsx("p",{className:"text-3xl font-bold text-white",children:A(o?.overage?.total_charges||0)}),e.jsx("p",{className:"text-sm text-slate-400",children:"Overage Charges"})]})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[e.jsxs($,{className:"lg:col-span-2 bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Usage Trend"}),e.jsx(ue,{className:"text-slate-400",children:"Operations over the last 6 months"})]}),e.jsx(U,{children:e.jsx("div",{className:"h-[300px]",children:e.jsx(qn,{width:"100%",height:"100%",children:e.jsxs(cC,{data:E,children:[e.jsxs("defs",{children:[e.jsxs("linearGradient",{id:"lcGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#3b82f6",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#3b82f6",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"priceGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#10b981",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#10b981",stopOpacity:0})]}),e.jsxs("linearGradient",{id:"hsGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[e.jsx("stop",{offset:"5%",stopColor:"#a855f7",stopOpacity:.3}),e.jsx("stop",{offset:"95%",stopColor:"#a855f7",stopOpacity:0})]})]}),e.jsx(wi,{strokeDasharray:"3 3",stroke:"#334155"}),e.jsx(Gn,{dataKey:"month",stroke:"#64748b",fontSize:12}),e.jsx(Kn,{stroke:"#64748b",fontSize:12}),e.jsx(kn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"},labelStyle:{color:"#fff"}}),e.jsx(Gm,{type:"monotone",dataKey:"LC Validations",stroke:"#3b82f6",fill:"url(#lcGradient)",strokeWidth:2}),e.jsx(Gm,{type:"monotone",dataKey:"Price Checks",stroke:"#10b981",fill:"url(#priceGradient)",strokeWidth:2}),e.jsx(Gm,{type:"monotone",dataKey:"HS Lookups",stroke:"#a855f7",fill:"url(#hsGradient)",strokeWidth:2})]})})})})]}),e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Distribution"}),e.jsx(ue,{className:"text-slate-400",children:"Usage by tool this month"})]}),e.jsx(U,{children:e.jsx("div",{className:"h-[300px]",children:k.length>0?e.jsx(qn,{width:"100%",height:"100%",children:e.jsxs(K2,{children:[e.jsx(wj,{data:k,cx:"50%",cy:"50%",innerRadius:60,outerRadius:90,paddingAngle:5,dataKey:"value",children:k.map((O,P)=>e.jsx(Eu,{fill:O.color},`cell-${P}`))}),e.jsx(kn,{contentStyle:{backgroundColor:"#1e293b",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"8px"}}),e.jsx(Ho,{wrapperStyle:{color:"#94a3b8",fontSize:"12px"}})]})}):e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(io,{className:"w-12 h-12 text-slate-600 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"No usage data yet"})]})})})})]})]}),e.jsxs($,{className:"mb-8 bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Usage by Tool"}),e.jsx(ue,{className:"text-slate-400",children:"Detailed breakdown of your plan limits"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-6",children:c?.limits&&Object.entries(c.limits).map(([O,P])=>{const T=sz[O]||Ws,B=ez[O]||"#666",G=typeof P.limit=="number"&&P.limit>0?Math.min(P.used/P.limit*100,100):0,q=G>=100;return e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg",style:{backgroundColor:`${B}20`},children:e.jsx(T,{className:"w-4 h-4",style:{color:B}})}),e.jsx("span",{className:"text-white font-medium",children:tz[O]||O})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-slate-400",children:[e.jsx("span",{className:"text-white font-medium",children:P.used})," / ",P.limit==="unlimited"?"âˆž":P.limit]}),q&&e.jsx(Q,{variant:"outline",className:"border-red-500/30 text-red-400",children:"Over Limit"})]})]}),e.jsx(es,{value:G,className:"h-2 bg-slate-800",style:{"--progress-background":q?"#ef4444":B}})]},O)})})})]}),e.jsxs($,{className:"bg-slate-900/50 border-white/5",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Activity Log"}),e.jsx(ue,{className:"text-slate-400",children:"Recent operations and charges"})]}),e.jsx(U,{children:h.length>0?e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{className:"border-white/5",children:[e.jsx(je,{className:"text-slate-400",children:"Time"}),e.jsx(je,{className:"text-slate-400",children:"Operation"}),e.jsx(je,{className:"text-slate-400",children:"Tool"}),e.jsx(je,{className:"text-slate-400 text-right",children:"Count"}),e.jsx(je,{className:"text-slate-400 text-right",children:"Charge"})]})}),e.jsx(oa,{children:h.map(O=>{const P=sz[`${O.operation}s`]||Ws;return e.jsxs(At,{className:"border-white/5",children:[e.jsx(fe,{className:"text-slate-300",children:_(O.created_at)}),e.jsx(fe,{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 text-slate-400"}),e.jsx("span",{className:"text-white",children:O.operation.replace("_"," ").replace(/\b\w/g,T=>T.toUpperCase())})]})}),e.jsx(fe,{className:"text-slate-400",children:O.tool}),e.jsx(fe,{className:"text-right text-white",children:O.count}),e.jsx(fe,{className:"text-right",children:O.is_overage?e.jsx("span",{className:"text-amber-400",children:A(O.overage_charge||0)}):e.jsx("span",{className:"text-slate-500",children:"â€”"})})]},O.id)})})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ws,{className:"w-12 h-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No activity yet"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Start using tools to see your activity here."})]})})]})]})}function FGe({...t}){const s=rn(),{user:a,logout:r}=Dt(),n=o=>o==="/tracking/dashboard"?s.pathname===o:s.pathname.startsWith(o),i=async o=>{o?.preventDefault(),o?.stopPropagation();try{await r()}catch(d){console.warn("Logout failed:",d),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-cyan-500/10 text-cyan-500",children:e.jsx(Us,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"Container Tracker"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Shipment Tracking"})]})]})})})})]}),e.jsxs(Xo,{children:[e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Tracking"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard")&&s.pathname==="/tracking/dashboard",asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard",children:[e.jsx(ej,{}),e.jsx("span",{children:"Overview"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/search"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/search",children:[e.jsx(li,{}),e.jsx("span",{children:"Track Container"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/vessel-search"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/vessel-search",children:[e.jsx(Us,{}),e.jsx("span",{children:"Track Vessel"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Monitoring"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/active"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/active",children:[e.jsx(Ps,{}),e.jsx("span",{children:"Active Shipments"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/map"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/map",children:[e.jsx(oi,{}),e.jsx("span",{children:"Route Map"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/ports"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/ports",children:[e.jsx(bu,{}),e.jsx("span",{children:"Port Schedule"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Notifications"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/alerts"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/alerts",children:[e.jsx($s,{}),e.jsx("span",{children:"Alerts"}),e.jsx(Q,{variant:"destructive",className:"ml-auto h-5 px-1.5 text-xs",children:2})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/exceptions"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/exceptions",children:[e.jsx(Ve,{}),e.jsx("span",{children:"Exceptions"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/history"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/history",children:[e.jsx(xn,{}),e.jsx("span",{children:"History"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{children:"Insights"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/analytics"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/analytics",children:[e.jsx(Ws,{}),e.jsx("span",{children:"Analytics"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/performance"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/performance",children:[e.jsx(mt,{}),e.jsx("span",{children:"Performance"})]})})})]})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/settings"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/settings",children:[e.jsx(sn,{}),e.jsx("span",{children:"Settings"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/tracking/dashboard/help"),asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard/help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help"})]})})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.role||"User"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}function RGe(){return e.jsx(Lc,{sidebar:e.jsx(FGe,{}),breadcrumbs:[{label:"Hub",href:"/hub"},{label:"Container Tracker"}],title:"Container Tracker",children:e.jsx(ip,{})})}const kA="https://trdrhub-api.onrender.com",OGe=t=>{switch(t){case"in_transit":return e.jsx(Q,{className:"bg-blue-500/20 text-blue-600 dark:text-blue-400 border-blue-500/30",children:"In Transit"});case"at_port":return e.jsx(Q,{className:"bg-amber-500/20 text-amber-600 dark:text-amber-400 border-amber-500/30",children:"At Port"});case"delivered":return e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-600 dark:text-emerald-400 border-emerald-500/30",children:"Delivered"});case"delayed":return e.jsx(Q,{className:"bg-red-500/20 text-red-600 dark:text-red-400 border-red-500/30",children:"Delayed"});case"exception":return e.jsx(Q,{className:"bg-purple-500/20 text-purple-600 dark:text-purple-400 border-purple-500/30",children:"Exception"});default:return e.jsx(Q,{children:"Unknown"})}},IGe=(t,s)=>{const a=s==="critical"?"text-red-500":s==="warning"?"text-amber-500":"text-blue-500";switch(t){case"delay":return e.jsx(mt,{className:`w-4 h-4 ${a}`});case"arrival":return e.jsx(bu,{className:`w-4 h-4 ${a}`});case"departure":return e.jsx(Us,{className:`w-4 h-4 ${a}`});case"exception":return e.jsx(Ve,{className:`w-4 h-4 ${a}`});case"eta_change":return e.jsx(ya,{className:`w-4 h-4 ${a}`});default:return e.jsx($s,{className:`w-4 h-4 ${a}`})}};function LGe(){const t=zt(),{user:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(""),[i,l]=m.useState("container"),[o,d]=m.useState([]),[c,u]=m.useState([]),[h,x]=m.useState(!1),[g,j]=m.useState(!0),[y,b]=m.useState({active:0,delivered_30d:0,delayed:0,on_time_rate:92});m.useEffect(()=>{s?(async()=>{try{const O=await fetch(`${kA}/tracking/portfolio`,{credentials:"include"});if(O.ok){const P=await O.json();if(P.shipments&&P.shipments.length>0){const T=P.shipments.map(B=>({id:B.id,reference:B.reference,type:B.type,carrier:B.carrier||"Unknown",origin:B.origin,destination:B.destination,status:B.status,eta:B.eta,etaConfidence:90,lastUpdate:"just now",lastLocation:B.current_location||"In Transit",progress:B.progress||50,alerts:B.alerts||0}));d(T)}P.stats&&b(P.stats)}}catch(O){console.error("Failed to fetch portfolio:",O)}finally{j(!1)}})():j(!1)},[s]);const N=async R=>{if(R.preventDefault(),!!r.trim()){x(!0);try{let O="";i==="container"||i==="bl"?O=`/tracking/container/${encodeURIComponent(r.toUpperCase())}`:O=`/tracking/vessel/${encodeURIComponent(r)}?search_type=name`;const P=await fetch(`${kA}${O}`,{credentials:"include"});if(P.ok){const T=await P.json();t(i==="vessel"?`/tracking/dashboard/vessel/${T.imo||r}`:`/tracking/dashboard/container/${T.container_number||r}`)}else{const T=await P.json();a({title:"Tracking Error",description:T.detail||"Container/vessel not found",variant:"destructive"})}}catch{a({title:"Search Failed",description:"Unable to search. Please try again.",variant:"destructive"})}finally{x(!1)}}},C=async()=>{j(!0);try{const R=await fetch(`${kA}/tracking/portfolio`,{credentials:"include"});if(R.ok){const O=await R.json();O.stats&&b(O.stats),a({title:"Refreshed",description:"Tracking data updated"})}}catch(R){console.error("Refresh failed:",R)}finally{j(!1)}},_=c.filter(R=>!R.read).length,A=y.active||o.filter(R=>R.status!=="delivered").length,k=y.delayed||o.filter(R=>R.status==="delayed").length,E=y.delivered_30d||o.filter(R=>R.status==="delivered").length,D=y.on_time_rate||92;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsx($,{children:e.jsx(U,{className:"p-6",children:e.jsxs("form",{onSubmit:N,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(oe,{value:r,onChange:R=>n(R.target.value),placeholder:"Enter container number, vessel name, or B/L...",className:"pl-10 h-12"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Os,{value:i,onValueChange:R=>l(R),className:"w-auto",children:e.jsxs(Fs,{className:"h-12",children:[e.jsxs(He,{value:"container",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(li,{className:"w-4 h-4 mr-1"}),"Container"]}),e.jsxs(He,{value:"vessel",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(Us,{className:"w-4 h-4 mr-1"}),"Vessel"]}),e.jsx(He,{value:"bl",className:"data-[state=active]:bg-blue-500/20",children:"B/L"})]})}),e.jsx(M,{type:"submit",className:"bg-blue-500 hover:bg-blue-600 h-12 px-6",disabled:h,children:h?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):"Track"})]})]}),e.jsxs("div",{className:"mt-3 flex flex-wrap gap-2 text-xs text-muted-foreground",children:[e.jsx("span",{children:"Examples:"}),e.jsx("button",{type:"button",onClick:()=>n("MSCU1234567"),className:"text-blue-500 hover:underline",children:"MSCU1234567"}),e.jsx("button",{type:"button",onClick:()=>{n("MSC OSCAR"),l("vessel")},className:"text-blue-500 hover:underline",children:"MSC OSCAR"}),e.jsx("button",{type:"button",onClick:()=>{n("MAEU123456789"),l("bl")},className:"text-blue-500 hover:underline",children:"MAEU123456789"})]})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:A}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Shipments"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:E}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivered (30d)"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:k}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Vt,{className:"w-5 h-5 text-purple-500"})}),e.jsxs("div",{children:[e.jsxs("p",{className:"text-2xl font-bold",children:[D,"%"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"On-Time Rate"})]})]})})})]}),e.jsxs("div",{className:"grid lg:grid-cols-3 gap-6",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs($,{children:[e.jsxs(X,{className:"flex flex-row items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ee,{children:"Active Shipments"}),e.jsx(ue,{children:"Track your containers and vessels in real-time"})]}),e.jsxs(M,{variant:"ghost",size:"sm",onClick:C,disabled:g,children:[e.jsx(Lt,{className:`w-4 h-4 mr-1 ${g?"animate-spin":""}`}),g?"Loading...":"Refresh"]})]}),e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"divide-y",children:o.map(R=>e.jsxs(pe,{to:`/tracking/dashboard/${R.type}/${R.reference}`,className:"block p-4 hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-lg flex items-center justify-center",children:R.type==="container"?e.jsx(li,{className:"w-5 h-5 text-blue-500"}):e.jsx(Us,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono font-medium",children:R.reference}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[R.carrier," â€¢ ",R.vessel]})]})]}),e.jsxs("div",{className:"text-right flex items-center gap-2",children:[OGe(R.status),R.alerts>0&&e.jsxs(Q,{className:"bg-red-500/20 text-red-500 border-red-500/30",children:[R.alerts," alerts"]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Origin"}),e.jsx("p",{children:R.origin})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Destination"}),e.jsx("p",{children:R.destination})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"ETA"}),e.jsx("p",{children:new Date(R.eta).toLocaleDateString()})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-muted-foreground flex items-center gap-1",children:[e.jsx(oi,{className:"w-3 h-3"}),R.lastLocation]}),e.jsxs("span",{className:"text-muted-foreground",children:[R.progress,"% complete â€¢ Updated ",R.lastUpdate]})]}),e.jsx(es,{value:R.progress,className:"h-1.5"})]})]},R.id))})})]})}),e.jsxs("div",{className:"lg:col-span-1",children:[e.jsxs($,{children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5 text-amber-500"}),"Alerts",_>0&&e.jsx(Q,{className:"bg-red-500 text-white",children:_})]}),e.jsx(M,{variant:"ghost",size:"sm",className:"text-xs",children:"Mark all read"})]})}),e.jsx(U,{className:"p-0",children:e.jsx("div",{className:"divide-y",children:c.length===0?e.jsxs("div",{className:"p-6 text-center text-muted-foreground",children:[e.jsx($s,{className:"w-8 h-8 mx-auto mb-2 opacity-50"}),e.jsx("p",{children:"No alerts"})]}):c.map(R=>e.jsx("div",{className:`p-4 ${R.read?"":"bg-muted/30"}`,children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"mt-0.5",children:IGe(R.type,R.severity)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-xs font-mono text-blue-500 mb-1",children:R.reference}),e.jsx("p",{className:"text-sm",children:R.message}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:R.timestamp})]}),!R.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})},R.id))})})]}),e.jsxs($,{className:"mt-4",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-sm",children:"Quick Links"})}),e.jsxs(U,{className:"space-y-2",children:[e.jsxs(pe,{to:"/tracking/dashboard/vessel-search",className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm",children:"Browse Vessels"})]}),e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs(pe,{to:"/tracking/dashboard/ports",className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bu,{className:"w-4 h-4 text-emerald-500"}),e.jsx("span",{className:"text-sm",children:"Port Schedules"})]}),e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"})]}),e.jsxs("a",{href:"https://www.marinetraffic.com",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-between p-3 bg-muted/50 rounded-lg hover:bg-muted transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oi,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm",children:"Live Map"})]}),e.jsx(ir,{className:"w-4 h-4 text-muted-foreground"})]})]})]})]})]})]})}function rae(t,s){const a=m.useRef(s);m.useEffect(function(){s!==a.current&&t.attributionControl!=null&&(a.current!=null&&t.attributionControl.removeAttribution(a.current),s!=null&&t.attributionControl.addAttribution(s)),a.current=s},[t,s])}const MGe=1;function BGe(t){return Object.freeze({__version:MGe,map:t})}function nae(t,s){return Object.freeze({...t,...s})}const yR=m.createContext(null);function LC(){const t=m.use(yR);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function iae(t){function s(a,r){const{instance:n,context:i}=t(a).current;m.useImperativeHandle(r,()=>n);const{children:l}=a;return l==null?null:lt.createElement(yR,{value:i},l)}return m.forwardRef(s)}function $Ge(t){function s(a,r){const[n,i]=m.useState(!1),{instance:l}=t(a,i).current;m.useImperativeHandle(r,()=>l),m.useEffect(function(){n&&l.update()},[l,n,a.children]);const o=l._contentNode;return o?Du.createPortal(a.children,o):null}return m.forwardRef(s)}function UGe(t){function s(a,r){const{instance:n}=t(a).current;return m.useImperativeHandle(r,()=>n),null}return m.forwardRef(s)}function NR(t,s){const a=m.useRef(void 0);m.useEffect(function(){return s!=null&&t.instance.on(s),a.current=s,function(){a.current!=null&&t.instance.off(a.current),a.current=null}},[t,s])}function MC(t,s){const a=t.pane??s.pane;return a?{...t,pane:a}:t}function zGe(t,s){return function(r,n){const i=LC(),l=t(MC(r,i),i);return rae(i.map,r.attribution),NR(l.current,r.eventHandlers),s(l.current,i,r,n),l}}var U0={exports:{}};var qGe=U0.exports,az;function VGe(){return az||(az=1,(function(t,s){(function(a,r){r(s)})(qGe,(function(a){var r="1.9.4";function n(f){var w,F,V,se;for(F=1,V=arguments.length;F<V;F++){se=arguments[F];for(w in se)f[w]=se[w]}return f}var i=Object.create||(function(){function f(){}return function(w){return f.prototype=w,new f}})();function l(f,w){var F=Array.prototype.slice;if(f.bind)return f.bind.apply(f,F.call(arguments,1));var V=F.call(arguments,2);return function(){return f.apply(w,V.length?V.concat(F.call(arguments)):arguments)}}var o=0;function d(f){return"_leaflet_id"in f||(f._leaflet_id=++o),f._leaflet_id}function c(f,w,F){var V,se,me,Ce;return Ce=function(){V=!1,se&&(me.apply(F,se),se=!1)},me=function(){V?se=arguments:(f.apply(F,arguments),setTimeout(Ce,w),V=!0)},me}function u(f,w,F){var V=w[1],se=w[0],me=V-se;return f===V&&F?f:((f-se)%me+me)%me+se}function h(){return!1}function x(f,w){if(w===!1)return f;var F=Math.pow(10,w===void 0?6:w);return Math.round(f*F)/F}function g(f){return f.trim?f.trim():f.replace(/^\s+|\s+$/g,"")}function j(f){return g(f).split(/\s+/)}function y(f,w){Object.prototype.hasOwnProperty.call(f,"options")||(f.options=f.options?i(f.options):{});for(var F in w)f.options[F]=w[F];return f.options}function b(f,w,F){var V=[];for(var se in f)V.push(encodeURIComponent(F?se.toUpperCase():se)+"="+encodeURIComponent(f[se]));return(!w||w.indexOf("?")===-1?"?":"&")+V.join("&")}var N=/\{ *([\w_ -]+) *\}/g;function C(f,w){return f.replace(N,function(F,V){var se=w[V];if(se===void 0)throw new Error("No value provided for variable "+F);return typeof se=="function"&&(se=se(w)),se})}var _=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function A(f,w){for(var F=0;F<f.length;F++)if(f[F]===w)return F;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function E(f){return window["webkit"+f]||window["moz"+f]||window["ms"+f]}var D=0;function R(f){var w=+new Date,F=Math.max(0,16-(w-D));return D=w+F,window.setTimeout(f,F)}var O=window.requestAnimationFrame||E("RequestAnimationFrame")||R,P=window.cancelAnimationFrame||E("CancelAnimationFrame")||E("CancelRequestAnimationFrame")||function(f){window.clearTimeout(f)};function T(f,w,F){if(F&&O===R)f.call(w);else return O.call(window,l(f,w))}function B(f){f&&P.call(window,f)}var G={__proto__:null,extend:n,create:i,bind:l,get lastId(){return o},stamp:d,throttle:c,wrapNum:u,falseFn:h,formatNum:x,trim:g,splitWords:j,setOptions:y,getParamString:b,template:C,isArray:_,indexOf:A,emptyImageUrl:k,requestFn:O,cancelFn:P,requestAnimFrame:T,cancelAnimFrame:B};function q(){}q.extend=function(f){var w=function(){y(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},F=w.__super__=this.prototype,V=i(F);V.constructor=w,w.prototype=V;for(var se in this)Object.prototype.hasOwnProperty.call(this,se)&&se!=="prototype"&&se!=="__super__"&&(w[se]=this[se]);return f.statics&&n(w,f.statics),f.includes&&(z(f.includes),n.apply(null,[V].concat(f.includes))),n(V,f),delete V.statics,delete V.includes,V.options&&(V.options=F.options?i(F.options):{},n(V.options,f.options)),V._initHooks=[],V.callInitHooks=function(){if(!this._initHooksCalled){F.callInitHooks&&F.callInitHooks.call(this),this._initHooksCalled=!0;for(var me=0,Ce=V._initHooks.length;me<Ce;me++)V._initHooks[me].call(this)}},w},q.include=function(f){var w=this.prototype.options;return n(this.prototype,f),f.options&&(this.prototype.options=w,this.mergeOptions(f.options)),this},q.mergeOptions=function(f){return n(this.prototype.options,f),this},q.addInitHook=function(f){var w=Array.prototype.slice.call(arguments,1),F=typeof f=="function"?f:function(){this[f].apply(this,w)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(F),this};function z(f){if(!(typeof L>"u"||!L||!L.Mixin)){f=_(f)?f:[f];for(var w=0;w<f.length;w++)f[w]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var H={on:function(f,w,F){if(typeof f=="object")for(var V in f)this._on(V,f[V],w);else{f=j(f);for(var se=0,me=f.length;se<me;se++)this._on(f[se],w,F)}return this},off:function(f,w,F){if(!arguments.length)delete this._events;else if(typeof f=="object")for(var V in f)this._off(V,f[V],w);else{f=j(f);for(var se=arguments.length===1,me=0,Ce=f.length;me<Ce;me++)se?this._off(f[me]):this._off(f[me],w,F)}return this},_on:function(f,w,F,V){if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}if(this._listens(f,w,F)===!1){F===this&&(F=void 0);var se={fn:w,ctx:F};V&&(se.once=!0),this._events=this._events||{},this._events[f]=this._events[f]||[],this._events[f].push(se)}},_off:function(f,w,F){var V,se,me;if(this._events&&(V=this._events[f],!!V)){if(arguments.length===1){if(this._firingCount)for(se=0,me=V.length;se<me;se++)V[se].fn=h;delete this._events[f];return}if(typeof w!="function"){console.warn("wrong listener type: "+typeof w);return}var Ce=this._listens(f,w,F);if(Ce!==!1){var qe=V[Ce];this._firingCount&&(qe.fn=h,this._events[f]=V=V.slice()),V.splice(Ce,1)}}},fire:function(f,w,F){if(!this.listens(f,F))return this;var V=n({},w,{type:f,target:this,sourceTarget:w&&w.sourceTarget||this});if(this._events){var se=this._events[f];if(se){this._firingCount=this._firingCount+1||1;for(var me=0,Ce=se.length;me<Ce;me++){var qe=se[me],Ye=qe.fn;qe.once&&this.off(f,Ye,qe.ctx),Ye.call(qe.ctx||this,V)}this._firingCount--}}return F&&this._propagateEvent(V),this},listens:function(f,w,F,V){typeof f!="string"&&console.warn('"string" type argument expected');var se=w;typeof w!="function"&&(V=!!w,se=void 0,F=void 0);var me=this._events&&this._events[f];if(me&&me.length&&this._listens(f,se,F)!==!1)return!0;if(V){for(var Ce in this._eventParents)if(this._eventParents[Ce].listens(f,w,F,V))return!0}return!1},_listens:function(f,w,F){if(!this._events)return!1;var V=this._events[f]||[];if(!w)return!!V.length;F===this&&(F=void 0);for(var se=0,me=V.length;se<me;se++)if(V[se].fn===w&&V[se].ctx===F)return se;return!1},once:function(f,w,F){if(typeof f=="object")for(var V in f)this._on(V,f[V],w,!0);else{f=j(f);for(var se=0,me=f.length;se<me;se++)this._on(f[se],w,F,!0)}return this},addEventParent:function(f){return this._eventParents=this._eventParents||{},this._eventParents[d(f)]=f,this},removeEventParent:function(f){return this._eventParents&&delete this._eventParents[d(f)],this},_propagateEvent:function(f){for(var w in this._eventParents)this._eventParents[w].fire(f.type,n({layer:f.target,propagatedFrom:f.target},f),!0)}};H.addEventListener=H.on,H.removeEventListener=H.clearAllEventListeners=H.off,H.addOneTimeEventListener=H.once,H.fireEvent=H.fire,H.hasEventListeners=H.listens;var le=q.extend(H);function Y(f,w,F){this.x=F?Math.round(f):f,this.y=F?Math.round(w):w}var te=Math.trunc||function(f){return f>0?Math.floor(f):Math.ceil(f)};Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(f){return this.clone()._add(ne(f))},_add:function(f){return this.x+=f.x,this.y+=f.y,this},subtract:function(f){return this.clone()._subtract(ne(f))},_subtract:function(f){return this.x-=f.x,this.y-=f.y,this},divideBy:function(f){return this.clone()._divideBy(f)},_divideBy:function(f){return this.x/=f,this.y/=f,this},multiplyBy:function(f){return this.clone()._multiplyBy(f)},_multiplyBy:function(f){return this.x*=f,this.y*=f,this},scaleBy:function(f){return new Y(this.x*f.x,this.y*f.y)},unscaleBy:function(f){return new Y(this.x/f.x,this.y/f.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=te(this.x),this.y=te(this.y),this},distanceTo:function(f){f=ne(f);var w=f.x-this.x,F=f.y-this.y;return Math.sqrt(w*w+F*F)},equals:function(f){return f=ne(f),f.x===this.x&&f.y===this.y},contains:function(f){return f=ne(f),Math.abs(f.x)<=Math.abs(this.x)&&Math.abs(f.y)<=Math.abs(this.y)},toString:function(){return"Point("+x(this.x)+", "+x(this.y)+")"}};function ne(f,w,F){return f instanceof Y?f:_(f)?new Y(f[0],f[1]):f==null?f:typeof f=="object"&&"x"in f&&"y"in f?new Y(f.x,f.y):new Y(f,w,F)}function ae(f,w){if(f)for(var F=w?[f,w]:f,V=0,se=F.length;V<se;V++)this.extend(F[V])}ae.prototype={extend:function(f){var w,F;if(!f)return this;if(f instanceof Y||typeof f[0]=="number"||"x"in f)w=F=ne(f);else if(f=re(f),w=f.min,F=f.max,!w||!F)return this;return!this.min&&!this.max?(this.min=w.clone(),this.max=F.clone()):(this.min.x=Math.min(w.x,this.min.x),this.max.x=Math.max(F.x,this.max.x),this.min.y=Math.min(w.y,this.min.y),this.max.y=Math.max(F.y,this.max.y)),this},getCenter:function(f){return ne((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,f)},getBottomLeft:function(){return ne(this.min.x,this.max.y)},getTopRight:function(){return ne(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(f){var w,F;return typeof f[0]=="number"||f instanceof Y?f=ne(f):f=re(f),f instanceof ae?(w=f.min,F=f.max):w=F=f,w.x>=this.min.x&&F.x<=this.max.x&&w.y>=this.min.y&&F.y<=this.max.y},intersects:function(f){f=re(f);var w=this.min,F=this.max,V=f.min,se=f.max,me=se.x>=w.x&&V.x<=F.x,Ce=se.y>=w.y&&V.y<=F.y;return me&&Ce},overlaps:function(f){f=re(f);var w=this.min,F=this.max,V=f.min,se=f.max,me=se.x>w.x&&V.x<F.x,Ce=se.y>w.y&&V.y<F.y;return me&&Ce},isValid:function(){return!!(this.min&&this.max)},pad:function(f){var w=this.min,F=this.max,V=Math.abs(w.x-F.x)*f,se=Math.abs(w.y-F.y)*f;return re(ne(w.x-V,w.y-se),ne(F.x+V,F.y+se))},equals:function(f){return f?(f=re(f),this.min.equals(f.getTopLeft())&&this.max.equals(f.getBottomRight())):!1}};function re(f,w){return!f||f instanceof ae?f:new ae(f,w)}function xe(f,w){if(f)for(var F=w?[f,w]:f,V=0,se=F.length;V<se;V++)this.extend(F[V])}xe.prototype={extend:function(f){var w=this._southWest,F=this._northEast,V,se;if(f instanceof ke)V=f,se=f;else if(f instanceof xe){if(V=f._southWest,se=f._northEast,!V||!se)return this}else return f?this.extend(ze(f)||ye(f)):this;return!w&&!F?(this._southWest=new ke(V.lat,V.lng),this._northEast=new ke(se.lat,se.lng)):(w.lat=Math.min(V.lat,w.lat),w.lng=Math.min(V.lng,w.lng),F.lat=Math.max(se.lat,F.lat),F.lng=Math.max(se.lng,F.lng)),this},pad:function(f){var w=this._southWest,F=this._northEast,V=Math.abs(w.lat-F.lat)*f,se=Math.abs(w.lng-F.lng)*f;return new xe(new ke(w.lat-V,w.lng-se),new ke(F.lat+V,F.lng+se))},getCenter:function(){return new ke((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new ke(this.getNorth(),this.getWest())},getSouthEast:function(){return new ke(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(f){typeof f[0]=="number"||f instanceof ke||"lat"in f?f=ze(f):f=ye(f);var w=this._southWest,F=this._northEast,V,se;return f instanceof xe?(V=f.getSouthWest(),se=f.getNorthEast()):V=se=f,V.lat>=w.lat&&se.lat<=F.lat&&V.lng>=w.lng&&se.lng<=F.lng},intersects:function(f){f=ye(f);var w=this._southWest,F=this._northEast,V=f.getSouthWest(),se=f.getNorthEast(),me=se.lat>=w.lat&&V.lat<=F.lat,Ce=se.lng>=w.lng&&V.lng<=F.lng;return me&&Ce},overlaps:function(f){f=ye(f);var w=this._southWest,F=this._northEast,V=f.getSouthWest(),se=f.getNorthEast(),me=se.lat>w.lat&&V.lat<F.lat,Ce=se.lng>w.lng&&V.lng<F.lng;return me&&Ce},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(f,w){return f?(f=ye(f),this._southWest.equals(f.getSouthWest(),w)&&this._northEast.equals(f.getNorthEast(),w)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ye(f,w){return f instanceof xe?f:new xe(f,w)}function ke(f,w,F){if(isNaN(f)||isNaN(w))throw new Error("Invalid LatLng object: ("+f+", "+w+")");this.lat=+f,this.lng=+w,F!==void 0&&(this.alt=+F)}ke.prototype={equals:function(f,w){if(!f)return!1;f=ze(f);var F=Math.max(Math.abs(this.lat-f.lat),Math.abs(this.lng-f.lng));return F<=(w===void 0?1e-9:w)},toString:function(f){return"LatLng("+x(this.lat,f)+", "+x(this.lng,f)+")"},distanceTo:function(f){return Re.distance(this,ze(f))},wrap:function(){return Re.wrapLatLng(this)},toBounds:function(f){var w=180*f/40075017,F=w/Math.cos(Math.PI/180*this.lat);return ye([this.lat-w,this.lng-F],[this.lat+w,this.lng+F])},clone:function(){return new ke(this.lat,this.lng,this.alt)}};function ze(f,w,F){return f instanceof ke?f:_(f)&&typeof f[0]!="object"?f.length===3?new ke(f[0],f[1],f[2]):f.length===2?new ke(f[0],f[1]):null:f==null?f:typeof f=="object"&&"lat"in f?new ke(f.lat,"lng"in f?f.lng:f.lon,f.alt):w===void 0?null:new ke(f,w,F)}var ce={latLngToPoint:function(f,w){var F=this.projection.project(f),V=this.scale(w);return this.transformation._transform(F,V)},pointToLatLng:function(f,w){var F=this.scale(w),V=this.transformation.untransform(f,F);return this.projection.unproject(V)},project:function(f){return this.projection.project(f)},unproject:function(f){return this.projection.unproject(f)},scale:function(f){return 256*Math.pow(2,f)},zoom:function(f){return Math.log(f/256)/Math.LN2},getProjectedBounds:function(f){if(this.infinite)return null;var w=this.projection.bounds,F=this.scale(f),V=this.transformation.transform(w.min,F),se=this.transformation.transform(w.max,F);return new ae(V,se)},infinite:!1,wrapLatLng:function(f){var w=this.wrapLng?u(f.lng,this.wrapLng,!0):f.lng,F=this.wrapLat?u(f.lat,this.wrapLat,!0):f.lat,V=f.alt;return new ke(F,w,V)},wrapLatLngBounds:function(f){var w=f.getCenter(),F=this.wrapLatLng(w),V=w.lat-F.lat,se=w.lng-F.lng;if(V===0&&se===0)return f;var me=f.getSouthWest(),Ce=f.getNorthEast(),qe=new ke(me.lat-V,me.lng-se),Ye=new ke(Ce.lat-V,Ce.lng-se);return new xe(qe,Ye)}},Re=n({},ce,{wrapLng:[-180,180],R:6371e3,distance:function(f,w){var F=Math.PI/180,V=f.lat*F,se=w.lat*F,me=Math.sin((w.lat-f.lat)*F/2),Ce=Math.sin((w.lng-f.lng)*F/2),qe=me*me+Math.cos(V)*Math.cos(se)*Ce*Ce,Ye=2*Math.atan2(Math.sqrt(qe),Math.sqrt(1-qe));return this.R*Ye}}),ie=6378137,Ne={R:ie,MAX_LATITUDE:85.0511287798,project:function(f){var w=Math.PI/180,F=this.MAX_LATITUDE,V=Math.max(Math.min(F,f.lat),-F),se=Math.sin(V*w);return new Y(this.R*f.lng*w,this.R*Math.log((1+se)/(1-se))/2)},unproject:function(f){var w=180/Math.PI;return new ke((2*Math.atan(Math.exp(f.y/this.R))-Math.PI/2)*w,f.x*w/this.R)},bounds:(function(){var f=ie*Math.PI;return new ae([-f,-f],[f,f])})()};function Ue(f,w,F,V){if(_(f)){this._a=f[0],this._b=f[1],this._c=f[2],this._d=f[3];return}this._a=f,this._b=w,this._c=F,this._d=V}Ue.prototype={transform:function(f,w){return this._transform(f.clone(),w)},_transform:function(f,w){return w=w||1,f.x=w*(this._a*f.x+this._b),f.y=w*(this._c*f.y+this._d),f},untransform:function(f,w){return w=w||1,new Y((f.x/w-this._b)/this._a,(f.y/w-this._d)/this._c)}};function ge(f,w,F,V){return new Ue(f,w,F,V)}var he=n({},Re,{code:"EPSG:3857",projection:Ne,transformation:(function(){var f=.5/(Math.PI*Ne.R);return ge(f,.5,-f,.5)})()}),_e=n({},he,{code:"EPSG:900913"});function at(f){return document.createElementNS("http://www.w3.org/2000/svg",f)}function nt(f,w){var F="",V,se,me,Ce,qe,Ye;for(V=0,me=f.length;V<me;V++){for(qe=f[V],se=0,Ce=qe.length;se<Ce;se++)Ye=qe[se],F+=(se?"L":"M")+Ye.x+" "+Ye.y;F+=w?ts.svg?"z":"x":""}return F||"M0 0"}var st=document.documentElement.style,ht="ActiveXObject"in window,Ss=ht&&!document.addEventListener,Wt="msLaunchUri"in navigator&&!("documentMode"in document),Rt=Tn("webkit"),ys=Tn("android"),dt=Tn("android 2")||Tn("android 3"),we=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),ot=ys&&Tn("Google")&&we<537&&!("AudioNode"in window),St=!!window.opera,Ft=!Wt&&Tn("chrome"),fs=Tn("gecko")&&!Rt&&!St&&!ht,nn=!Ft&&Tn("safari"),Xe=Tn("phantom"),Tt="OTransition"in st,$a=navigator.platform.indexOf("Win")===0,Ea=ht&&"transition"in st,gr="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!dt,ln="MozPerspective"in st,aa=!window.L_DISABLE_3D&&(Ea||gr||ln)&&!Tt&&!Xe,Hr=typeof orientation<"u"||Tn("mobile"),Ds=Hr&&Rt,pa=Hr&&gr,Rs=!window.PointerEvent&&window.MSPointerEvent,ca=!!(window.PointerEvent||Rs),vr="ontouchstart"in window||!!window.TouchEvent,Xs=!window.L_NO_TOUCH&&(vr||ca),Ki=Hr&&St,Oa=Hr&&fs,ic=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,Ir=(function(){var f=!1;try{var w=Object.defineProperty({},"passive",{get:function(){f=!0}});window.addEventListener("testPassiveEventSupport",h,w),window.removeEventListener("testPassiveEventSupport",h,w)}catch{}return f})(),Dn=(function(){return!!document.createElement("canvas").getContext})(),Yi=!!(document.createElementNS&&at("svg").createSVGRect),Uc=!!Yi&&(function(){var f=document.createElement("div");return f.innerHTML="<svg/>",(f.firstChild&&f.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Gr=!Yi&&(function(){try{var f=document.createElement("div");f.innerHTML='<v:shape adj="1"/>';var w=f.firstChild;return w.style.behavior="url(#default#VML)",w&&typeof w.adj=="object"}catch{return!1}})(),hi=navigator.platform.indexOf("Mac")===0,tr=navigator.platform.indexOf("Linux")===0;function Tn(f){return navigator.userAgent.toLowerCase().indexOf(f)>=0}var ts={ie:ht,ielt9:Ss,edge:Wt,webkit:Rt,android:ys,android23:dt,androidStock:ot,opera:St,chrome:Ft,gecko:fs,safari:nn,phantom:Xe,opera12:Tt,win:$a,ie3d:Ea,webkit3d:gr,gecko3d:ln,any3d:aa,mobile:Hr,mobileWebkit:Ds,mobileWebkit3d:pa,msPointer:Rs,pointer:ca,touch:Xs,touchNative:vr,mobileOpera:Ki,mobileGecko:Oa,retina:ic,passiveEvents:Ir,canvas:Dn,svg:Yi,vml:Gr,inlineSvg:Uc,mac:hi,linux:tr},Od=ts.msPointer?"MSPointerDown":"pointerdown",qu=ts.msPointer?"MSPointerMove":"pointermove",bp=ts.msPointer?"MSPointerUp":"pointerup",yp=ts.msPointer?"MSPointerCancel":"pointercancel",Lh={touchstart:Od,touchmove:qu,touchend:bp,touchcancel:yp},Dl={touchstart:kr,touchmove:Vu,touchend:Vu,touchcancel:Vu},po={},Tl=!1;function fo(f,w,F){return w==="touchstart"&&wp(),Dl[w]?(F=Dl[w].bind(this,F),f.addEventListener(Lh[w],F,!1),F):(console.warn("wrong event specified:",w),h)}function Np(f,w,F){if(!Lh[w]){console.warn("wrong event specified:",w);return}f.removeEventListener(Lh[w],F,!1)}function Id(f){po[f.pointerId]=f}function hv(f){po[f.pointerId]&&(po[f.pointerId]=f)}function Ld(f){delete po[f.pointerId]}function wp(){Tl||(document.addEventListener(Od,Id,!0),document.addEventListener(qu,hv,!0),document.addEventListener(bp,Ld,!0),document.addEventListener(yp,Ld,!0),Tl=!0)}function Vu(f,w){if(w.pointerType!==(w.MSPOINTER_TYPE_MOUSE||"mouse")){w.touches=[];for(var F in po)w.touches.push(po[F]);w.changedTouches=[w],f(w)}}function kr(f,w){w.MSPOINTER_TYPE_TOUCH&&w.pointerType===w.MSPOINTER_TYPE_TOUCH&&Wa(w),Vu(f,w)}function xv(f){var w={},F,V;for(V in f)F=f[V],w[V]=F&&F.bind?F.bind(f):F;return f=w,w.type="dblclick",w.detail=2,w.isTrusted=!1,w._simulated=!0,w}var Mh=200;function Wu(f,w){f.addEventListener("dblclick",w);var F=0,V;function se(me){if(me.detail!==1){V=me.detail;return}if(!(me.pointerType==="mouse"||me.sourceCapabilities&&!me.sourceCapabilities.firesTouchEvents)){var Ce=Ll(me);if(!(Ce.some(function(Ye){return Ye instanceof HTMLLabelElement&&Ye.attributes.for})&&!Ce.some(function(Ye){return Ye instanceof HTMLInputElement||Ye instanceof HTMLSelectElement}))){var qe=Date.now();qe-F<=Mh?(V++,V===2&&w(xv(me))):V=1,F=qe}}}return f.addEventListener("click",se),{dblclick:w,simDblclick:se}}function Hu(f,w){f.removeEventListener("dblclick",w.dblclick),f.removeEventListener("click",w.simDblclick)}var Bh=Hc(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),zc=Hc(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Fl=zc==="webkitTransition"||zc==="OTransition"?zc+"End":"transitionend";function ei(f){return typeof f=="string"?document.getElementById(f):f}function cl(f,w){var F=f.style[w]||f.currentStyle&&f.currentStyle[w];if((!F||F==="auto")&&document.defaultView){var V=document.defaultView.getComputedStyle(f,null);F=V?V[w]:null}return F==="auto"?null:F}function Is(f,w,F){var V=document.createElement(f);return V.className=w||"",F&&F.appendChild(V),V}function or(f){var w=f.parentNode;w&&w.removeChild(f)}function Rl(f){for(;f.firstChild;)f.removeChild(f.firstChild)}function dl(f){var w=f.parentNode;w&&w.lastChild!==f&&w.appendChild(f)}function ul(f){var w=f.parentNode;w&&w.firstChild!==f&&w.insertBefore(f,w.firstChild)}function qc(f,w){if(f.classList!==void 0)return f.classList.contains(w);var F=Vc(f);return F.length>0&&new RegExp("(^|\\s)"+w+"(\\s|$)").test(F)}function Ts(f,w){if(f.classList!==void 0)for(var F=j(w),V=0,se=F.length;V<se;V++)f.classList.add(F[V]);else if(!qc(f,w)){var me=Vc(f);$h(f,(me?me+" ":"")+w)}}function ka(f,w){f.classList!==void 0?f.classList.remove(w):$h(f,g((" "+Vc(f)+" ").replace(" "+w+" "," ")))}function $h(f,w){f.className.baseVal===void 0?f.className=w:f.className.baseVal=w}function Vc(f){return f.correspondingElement&&(f=f.correspondingElement),f.className.baseVal===void 0?f.className:f.className.baseVal}function Fn(f,w){"opacity"in f.style?f.style.opacity=w:"filter"in f.style&&Wc(f,w)}function Wc(f,w){var F=!1,V="DXImageTransform.Microsoft.Alpha";try{F=f.filters.item(V)}catch{if(w===1)return}w=Math.round(w*100),F?(F.Enabled=w!==100,F.Opacity=w):f.style.filter+=" progid:"+V+"(opacity="+w+")"}function Hc(f){for(var w=document.documentElement.style,F=0;F<f.length;F++)if(f[F]in w)return f[F];return!1}function Zi(f,w,F){var V=w||new Y(0,0);f.style[Bh]=(ts.ie3d?"translate("+V.x+"px,"+V.y+"px)":"translate3d("+V.x+"px,"+V.y+"px,0)")+(F?" scale("+F+")":"")}function Er(f,w){f._leaflet_pos=w,ts.any3d?Zi(f,w):(f.style.left=w.x+"px",f.style.top=w.y+"px")}function Ol(f){return f._leaflet_pos||new Y(0,0)}var ra,Gc,Rn;if("onselectstart"in document)ra=function(){Es(window,"selectstart",Wa)},Gc=function(){ve(window,"selectstart",Wa)};else{var lc=Hc(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ra=function(){if(lc){var f=document.documentElement.style;Rn=f[lc],f[lc]="none"}},Gc=function(){lc&&(document.documentElement.style[lc]=Rn,Rn=void 0)}}function Gu(){Es(window,"dragstart",Wa)}function Ku(){ve(window,"dragstart",Wa)}var oc,Md;function cc(f){for(;f.tabIndex===-1;)f=f.parentNode;f.style&&(Ji(),oc=f,Md=f.style.outlineStyle,f.style.outlineStyle="none",Es(window,"keydown",Ji))}function Ji(){oc&&(oc.style.outlineStyle=Md,oc=void 0,Md=void 0,ve(window,"keydown",Ji))}function Il(f){do f=f.parentNode;while((!f.offsetWidth||!f.offsetHeight)&&f!==document.body);return f}function ml(f){var w=f.getBoundingClientRect();return{x:w.width/f.offsetWidth||1,y:w.height/f.offsetHeight||1,boundingClientRect:w}}var Bd={__proto__:null,TRANSFORM:Bh,TRANSITION:zc,TRANSITION_END:Fl,get:ei,getStyle:cl,create:Is,remove:or,empty:Rl,toFront:dl,toBack:ul,hasClass:qc,addClass:Ts,removeClass:ka,setClass:$h,getClass:Vc,setOpacity:Fn,testProp:Hc,setTransform:Zi,setPosition:Er,getPosition:Ol,get disableTextSelection(){return ra},get enableTextSelection(){return Gc},disableImageDrag:Gu,enableImageDrag:Ku,preventOutline:cc,restoreOutline:Ji,getSizedParentNode:Il,getScale:ml};function Es(f,w,F,V){if(w&&typeof w=="object")for(var se in w)qt(f,se,w[se],F);else{w=j(w);for(var me=0,Ce=w.length;me<Ce;me++)qt(f,w[me],F,V)}return this}var on="_leaflet_events";function ve(f,w,F,V){if(arguments.length===1)xt(f),delete f[on];else if(w&&typeof w=="object")for(var se in w)Ua(f,se,w[se],F);else if(w=j(w),arguments.length===2)xt(f,function(qe){return A(w,qe)!==-1});else for(var me=0,Ce=w.length;me<Ce;me++)Ua(f,w[me],F,V);return this}function xt(f,w){for(var F in f[on]){var V=F.split(/\d/)[0];(!w||w(V))&&Ua(f,V,null,null,F)}}var Ct={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function qt(f,w,F,V){var se=w+d(F)+(V?"_"+d(V):"");if(f[on]&&f[on][se])return this;var me=function(qe){return F.call(V||f,qe||window.event)},Ce=me;!ts.touchNative&&ts.pointer&&w.indexOf("touch")===0?me=fo(f,w,me):ts.touch&&w==="dblclick"?me=Wu(f,me):"addEventListener"in f?w==="touchstart"||w==="touchmove"||w==="wheel"||w==="mousewheel"?f.addEventListener(Ct[w]||w,me,ts.passiveEvents?{passive:!1}:!1):w==="mouseenter"||w==="mouseleave"?(me=function(qe){qe=qe||window.event,Uh(f,qe)&&Ce(qe)},f.addEventListener(Ct[w],me,!1)):f.addEventListener(w,Ce,!1):f.attachEvent("on"+w,me),f[on]=f[on]||{},f[on][se]=me}function Ua(f,w,F,V,se){se=se||w+d(F)+(V?"_"+d(V):"");var me=f[on]&&f[on][se];if(!me)return this;!ts.touchNative&&ts.pointer&&w.indexOf("touch")===0?Np(f,w,me):ts.touch&&w==="dblclick"?Hu(f,me):"removeEventListener"in f?f.removeEventListener(Ct[w]||w,me,!1):f.detachEvent("on"+w,me),f[on][se]=null}function cr(f){return f.stopPropagation?f.stopPropagation():f.originalEvent?f.originalEvent._stopped=!0:f.cancelBubble=!0,this}function xi(f){return qt(f,"wheel",cr),this}function hl(f){return Es(f,"mousedown touchstart dblclick contextmenu",cr),f._leaflet_disable_click=!0,this}function Wa(f){return f.preventDefault?f.preventDefault():f.returnValue=!1,this}function pi(f){return Wa(f),cr(f),this}function Ll(f){if(f.composedPath)return f.composedPath();for(var w=[],F=f.target;F;)w.push(F),F=F.parentNode;return w}function Ml(f,w){if(!w)return new Y(f.clientX,f.clientY);var F=ml(w),V=F.boundingClientRect;return new Y((f.clientX-V.left)/F.x-w.clientLeft,(f.clientY-V.top)/F.y-w.clientTop)}var pv=ts.linux&&ts.chrome?window.devicePixelRatio:ts.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Kc(f){return ts.edge?f.wheelDeltaY/2:f.deltaY&&f.deltaMode===0?-f.deltaY/pv:f.deltaY&&f.deltaMode===1?-f.deltaY*20:f.deltaY&&f.deltaMode===2?-f.deltaY*60:f.deltaX||f.deltaZ?0:f.wheelDelta?(f.wheelDeltaY||f.wheelDelta)/2:f.detail&&Math.abs(f.detail)<32765?-f.detail*20:f.detail?f.detail/-32765*60:0}function Uh(f,w){var F=w.relatedTarget;if(!F)return!0;try{for(;F&&F!==f;)F=F.parentNode}catch{return!1}return F!==f}var _p={__proto__:null,on:Es,off:ve,stopPropagation:cr,disableScrollPropagation:xi,disableClickPropagation:hl,preventDefault:Wa,stop:pi,getPropagationPath:Ll,getMousePosition:Ml,getWheelDelta:Kc,isExternalTarget:Uh,addListener:Es,removeListener:ve},Cp=le.extend({run:function(f,w,F,V){this.stop(),this._el=f,this._inProgress=!0,this._duration=F||.25,this._easeOutPower=1/Math.max(V||.5,.2),this._startPos=Ol(f),this._offset=w.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=T(this._animate,this),this._step()},_step:function(f){var w=+new Date-this._startTime,F=this._duration*1e3;w<F?this._runFrame(this._easeOut(w/F),f):(this._runFrame(1),this._complete())},_runFrame:function(f,w){var F=this._startPos.add(this._offset.multiplyBy(f));w&&F._round(),Er(this._el,F),this.fire("step")},_complete:function(){B(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(f){return 1-Math.pow(1-f,this._easeOutPower)}}),wa=le.extend({options:{crs:he,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(f,w){w=y(this,w),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(f),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),w.maxBounds&&this.setMaxBounds(w.maxBounds),w.zoom!==void 0&&(this._zoom=this._limitZoom(w.zoom)),w.center&&w.zoom!==void 0&&this.setView(ze(w.center),w.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=zc&&ts.any3d&&!ts.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Es(this._proxy,Fl,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(f,w,F){if(w=w===void 0?this._zoom:this._limitZoom(w),f=this._limitCenter(ze(f),w,this.options.maxBounds),F=F||{},this._stop(),this._loaded&&!F.reset&&F!==!0){F.animate!==void 0&&(F.zoom=n({animate:F.animate},F.zoom),F.pan=n({animate:F.animate,duration:F.duration},F.pan));var V=this._zoom!==w?this._tryAnimatedZoom&&this._tryAnimatedZoom(f,w,F.zoom):this._tryAnimatedPan(f,F.pan);if(V)return clearTimeout(this._sizeTimer),this}return this._resetView(f,w,F.pan&&F.pan.noMoveStart),this},setZoom:function(f,w){return this._loaded?this.setView(this.getCenter(),f,{zoom:w}):(this._zoom=f,this)},zoomIn:function(f,w){return f=f||(ts.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+f,w)},zoomOut:function(f,w){return f=f||(ts.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-f,w)},setZoomAround:function(f,w,F){var V=this.getZoomScale(w),se=this.getSize().divideBy(2),me=f instanceof Y?f:this.latLngToContainerPoint(f),Ce=me.subtract(se).multiplyBy(1-1/V),qe=this.containerPointToLatLng(se.add(Ce));return this.setView(qe,w,{zoom:F})},_getBoundsCenterZoom:function(f,w){w=w||{},f=f.getBounds?f.getBounds():ye(f);var F=ne(w.paddingTopLeft||w.padding||[0,0]),V=ne(w.paddingBottomRight||w.padding||[0,0]),se=this.getBoundsZoom(f,!1,F.add(V));if(se=typeof w.maxZoom=="number"?Math.min(w.maxZoom,se):se,se===1/0)return{center:f.getCenter(),zoom:se};var me=V.subtract(F).divideBy(2),Ce=this.project(f.getSouthWest(),se),qe=this.project(f.getNorthEast(),se),Ye=this.unproject(Ce.add(qe).divideBy(2).add(me),se);return{center:Ye,zoom:se}},fitBounds:function(f,w){if(f=ye(f),!f.isValid())throw new Error("Bounds are not valid.");var F=this._getBoundsCenterZoom(f,w);return this.setView(F.center,F.zoom,w)},fitWorld:function(f){return this.fitBounds([[-90,-180],[90,180]],f)},panTo:function(f,w){return this.setView(f,this._zoom,{pan:w})},panBy:function(f,w){if(f=ne(f).round(),w=w||{},!f.x&&!f.y)return this.fire("moveend");if(w.animate!==!0&&!this.getSize().contains(f))return this._resetView(this.unproject(this.project(this.getCenter()).add(f)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Cp,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),w.noMoveStart||this.fire("movestart"),w.animate!==!1){Ts(this._mapPane,"leaflet-pan-anim");var F=this._getMapPanePos().subtract(f).round();this._panAnim.run(this._mapPane,F,w.duration||.25,w.easeLinearity)}else this._rawPanBy(f),this.fire("move").fire("moveend");return this},flyTo:function(f,w,F){if(F=F||{},F.animate===!1||!ts.any3d)return this.setView(f,w,F);this._stop();var V=this.project(this.getCenter()),se=this.project(f),me=this.getSize(),Ce=this._zoom;f=ze(f),w=w===void 0?Ce:w;var qe=Math.max(me.x,me.y),Ye=qe*this.getZoomScale(Ce,w),ut=se.distanceTo(V)||1,It=1.42,Ns=It*It;function ea(Ha){var cm=Ha?-1:1,sS=Ha?Ye:qe,aS=Ye*Ye-qe*qe+cm*Ns*Ns*ut*ut,Hd=2*sS*Ns*ut,Gd=aS/Hd,Kd=Math.sqrt(Gd*Gd+1)-Gd,Bp=Kd<1e-9?-18:Math.log(Kd);return Bp}function On(Ha){return(Math.exp(Ha)-Math.exp(-Ha))/2}function yn(Ha){return(Math.exp(Ha)+Math.exp(-Ha))/2}function el(Ha){return On(Ha)/yn(Ha)}var ki=ea(0);function lm(Ha){return qe*(yn(ki)/yn(ki+It*Ha))}function Iv(Ha){return qe*(yn(ki)*el(ki+It*Ha)-On(ki))/Ns}function sd(Ha){return 1-Math.pow(1-Ha,1.5)}var ry=Date.now(),Wd=(ea(1)-ki)/It,bo=F.duration?1e3*F.duration:1e3*Wd*.8;function om(){var Ha=(Date.now()-ry)/bo,cm=sd(Ha)*Wd;Ha<=1?(this._flyToFrame=T(om,this),this._move(this.unproject(V.add(se.subtract(V).multiplyBy(Iv(cm)/ut)),Ce),this.getScaleZoom(qe/lm(cm),Ce),{flyTo:!0})):this._move(f,w)._moveEnd(!0)}return this._moveStart(!0,F.noMoveStart),om.call(this),this},flyToBounds:function(f,w){var F=this._getBoundsCenterZoom(f,w);return this.flyTo(F.center,F.zoom,w)},setMaxBounds:function(f){return f=ye(f),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),f.isValid()?(this.options.maxBounds=f,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(f){var w=this.options.minZoom;return this.options.minZoom=f,this._loaded&&w!==f&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(f):this},setMaxZoom:function(f){var w=this.options.maxZoom;return this.options.maxZoom=f,this._loaded&&w!==f&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(f):this},panInsideBounds:function(f,w){this._enforcingBounds=!0;var F=this.getCenter(),V=this._limitCenter(F,this._zoom,ye(f));return F.equals(V)||this.panTo(V,w),this._enforcingBounds=!1,this},panInside:function(f,w){w=w||{};var F=ne(w.paddingTopLeft||w.padding||[0,0]),V=ne(w.paddingBottomRight||w.padding||[0,0]),se=this.project(this.getCenter()),me=this.project(f),Ce=this.getPixelBounds(),qe=re([Ce.min.add(F),Ce.max.subtract(V)]),Ye=qe.getSize();if(!qe.contains(me)){this._enforcingBounds=!0;var ut=me.subtract(qe.getCenter()),It=qe.extend(me).getSize().subtract(Ye);se.x+=ut.x<0?-It.x:It.x,se.y+=ut.y<0?-It.y:It.y,this.panTo(this.unproject(se),w),this._enforcingBounds=!1}return this},invalidateSize:function(f){if(!this._loaded)return this;f=n({animate:!1,pan:!0},f===!0?{animate:!0}:f);var w=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var F=this.getSize(),V=w.divideBy(2).round(),se=F.divideBy(2).round(),me=V.subtract(se);return!me.x&&!me.y?this:(f.animate&&f.pan?this.panBy(me):(f.pan&&this._rawPanBy(me),this.fire("move"),f.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:w,newSize:F}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(f){if(f=this._locateOptions=n({timeout:1e4,watch:!1},f),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var w=l(this._handleGeolocationResponse,this),F=l(this._handleGeolocationError,this);return f.watch?this._locationWatchId=navigator.geolocation.watchPosition(w,F,f):navigator.geolocation.getCurrentPosition(w,F,f),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(f){if(this._container._leaflet_id){var w=f.code,F=f.message||(w===1?"permission denied":w===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:w,message:"Geolocation error: "+F+"."})}},_handleGeolocationResponse:function(f){if(this._container._leaflet_id){var w=f.coords.latitude,F=f.coords.longitude,V=new ke(w,F),se=V.toBounds(f.coords.accuracy*2),me=this._locateOptions;if(me.setView){var Ce=this.getBoundsZoom(se);this.setView(V,me.maxZoom?Math.min(Ce,me.maxZoom):Ce)}var qe={latlng:V,bounds:se,timestamp:f.timestamp};for(var Ye in f.coords)typeof f.coords[Ye]=="number"&&(qe[Ye]=f.coords[Ye]);this.fire("locationfound",qe)}},addHandler:function(f,w){if(!w)return this;var F=this[f]=new w(this);return this._handlers.push(F),this.options[f]&&F.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),or(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(B(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var f;for(f in this._layers)this._layers[f].remove();for(f in this._panes)or(this._panes[f]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(f,w){var F="leaflet-pane"+(f?" leaflet-"+f.replace("Pane","")+"-pane":""),V=Is("div",F,w||this._mapPane);return f&&(this._panes[f]=V),V},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var f=this.getPixelBounds(),w=this.unproject(f.getBottomLeft()),F=this.unproject(f.getTopRight());return new xe(w,F)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(f,w,F){f=ye(f),F=ne(F||[0,0]);var V=this.getZoom()||0,se=this.getMinZoom(),me=this.getMaxZoom(),Ce=f.getNorthWest(),qe=f.getSouthEast(),Ye=this.getSize().subtract(F),ut=re(this.project(qe,V),this.project(Ce,V)).getSize(),It=ts.any3d?this.options.zoomSnap:1,Ns=Ye.x/ut.x,ea=Ye.y/ut.y,On=w?Math.max(Ns,ea):Math.min(Ns,ea);return V=this.getScaleZoom(On,V),It&&(V=Math.round(V/(It/100))*(It/100),V=w?Math.ceil(V/It)*It:Math.floor(V/It)*It),Math.max(se,Math.min(me,V))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Y(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(f,w){var F=this._getTopLeftPoint(f,w);return new ae(F,F.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(f){return this.options.crs.getProjectedBounds(f===void 0?this.getZoom():f)},getPane:function(f){return typeof f=="string"?this._panes[f]:f},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(f,w){var F=this.options.crs;return w=w===void 0?this._zoom:w,F.scale(f)/F.scale(w)},getScaleZoom:function(f,w){var F=this.options.crs;w=w===void 0?this._zoom:w;var V=F.zoom(f*F.scale(w));return isNaN(V)?1/0:V},project:function(f,w){return w=w===void 0?this._zoom:w,this.options.crs.latLngToPoint(ze(f),w)},unproject:function(f,w){return w=w===void 0?this._zoom:w,this.options.crs.pointToLatLng(ne(f),w)},layerPointToLatLng:function(f){var w=ne(f).add(this.getPixelOrigin());return this.unproject(w)},latLngToLayerPoint:function(f){var w=this.project(ze(f))._round();return w._subtract(this.getPixelOrigin())},wrapLatLng:function(f){return this.options.crs.wrapLatLng(ze(f))},wrapLatLngBounds:function(f){return this.options.crs.wrapLatLngBounds(ye(f))},distance:function(f,w){return this.options.crs.distance(ze(f),ze(w))},containerPointToLayerPoint:function(f){return ne(f).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(f){return ne(f).add(this._getMapPanePos())},containerPointToLatLng:function(f){var w=this.containerPointToLayerPoint(ne(f));return this.layerPointToLatLng(w)},latLngToContainerPoint:function(f){return this.layerPointToContainerPoint(this.latLngToLayerPoint(ze(f)))},mouseEventToContainerPoint:function(f){return Ml(f,this._container)},mouseEventToLayerPoint:function(f){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(f))},mouseEventToLatLng:function(f){return this.layerPointToLatLng(this.mouseEventToLayerPoint(f))},_initContainer:function(f){var w=this._container=ei(f);if(w){if(w._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Es(w,"scroll",this._onScroll,this),this._containerId=d(w)},_initLayout:function(){var f=this._container;this._fadeAnimated=this.options.fadeAnimation&&ts.any3d,Ts(f,"leaflet-container"+(ts.touch?" leaflet-touch":"")+(ts.retina?" leaflet-retina":"")+(ts.ielt9?" leaflet-oldie":"")+(ts.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var w=cl(f,"position");w!=="absolute"&&w!=="relative"&&w!=="fixed"&&w!=="sticky"&&(f.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var f=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Er(this._mapPane,new Y(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Ts(f.markerPane,"leaflet-zoom-hide"),Ts(f.shadowPane,"leaflet-zoom-hide"))},_resetView:function(f,w,F){Er(this._mapPane,new Y(0,0));var V=!this._loaded;this._loaded=!0,w=this._limitZoom(w),this.fire("viewprereset");var se=this._zoom!==w;this._moveStart(se,F)._move(f,w)._moveEnd(se),this.fire("viewreset"),V&&this.fire("load")},_moveStart:function(f,w){return f&&this.fire("zoomstart"),w||this.fire("movestart"),this},_move:function(f,w,F,V){w===void 0&&(w=this._zoom);var se=this._zoom!==w;return this._zoom=w,this._lastCenter=f,this._pixelOrigin=this._getNewPixelOrigin(f),V?F&&F.pinch&&this.fire("zoom",F):((se||F&&F.pinch)&&this.fire("zoom",F),this.fire("move",F)),this},_moveEnd:function(f){return f&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return B(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(f){Er(this._mapPane,this._getMapPanePos().subtract(f))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(f){this._targets={},this._targets[d(this._container)]=this;var w=f?ve:Es;w(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&w(window,"resize",this._onResize,this),ts.any3d&&this.options.transform3DLimit&&(f?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){B(this._resizeRequest),this._resizeRequest=T(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var f=this._getMapPanePos();Math.max(Math.abs(f.x),Math.abs(f.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(f,w){for(var F=[],V,se=w==="mouseout"||w==="mouseover",me=f.target||f.srcElement,Ce=!1;me;){if(V=this._targets[d(me)],V&&(w==="click"||w==="preclick")&&this._draggableMoved(V)){Ce=!0;break}if(V&&V.listens(w,!0)&&(se&&!Uh(me,f)||(F.push(V),se))||me===this._container)break;me=me.parentNode}return!F.length&&!Ce&&!se&&this.listens(w,!0)&&(F=[this]),F},_isClickDisabled:function(f){for(;f&&f!==this._container;){if(f._leaflet_disable_click)return!0;f=f.parentNode}},_handleDOMEvent:function(f){var w=f.target||f.srcElement;if(!(!this._loaded||w._leaflet_disable_events||f.type==="click"&&this._isClickDisabled(w))){var F=f.type;F==="mousedown"&&cc(w),this._fireDOMEvent(f,F)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(f,w,F){if(f.type==="click"){var V=n({},f);V.type="preclick",this._fireDOMEvent(V,V.type,F)}var se=this._findEventTargets(f,w);if(F){for(var me=[],Ce=0;Ce<F.length;Ce++)F[Ce].listens(w,!0)&&me.push(F[Ce]);se=me.concat(se)}if(se.length){w==="contextmenu"&&Wa(f);var qe=se[0],Ye={originalEvent:f};if(f.type!=="keypress"&&f.type!=="keydown"&&f.type!=="keyup"){var ut=qe.getLatLng&&(!qe._radius||qe._radius<=10);Ye.containerPoint=ut?this.latLngToContainerPoint(qe.getLatLng()):this.mouseEventToContainerPoint(f),Ye.layerPoint=this.containerPointToLayerPoint(Ye.containerPoint),Ye.latlng=ut?qe.getLatLng():this.layerPointToLatLng(Ye.layerPoint)}for(Ce=0;Ce<se.length;Ce++)if(se[Ce].fire(w,Ye,!0),Ye.originalEvent._stopped||se[Ce].options.bubblingMouseEvents===!1&&A(this._mouseEvents,w)!==-1)return}},_draggableMoved:function(f){return f=f.dragging&&f.dragging.enabled()?f:this,f.dragging&&f.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var f=0,w=this._handlers.length;f<w;f++)this._handlers[f].disable()},whenReady:function(f,w){return this._loaded?f.call(w||this,{target:this}):this.on("load",f,w),this},_getMapPanePos:function(){return Ol(this._mapPane)||new Y(0,0)},_moved:function(){var f=this._getMapPanePos();return f&&!f.equals([0,0])},_getTopLeftPoint:function(f,w){var F=f&&w!==void 0?this._getNewPixelOrigin(f,w):this.getPixelOrigin();return F.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(f,w){var F=this.getSize()._divideBy(2);return this.project(f,w)._subtract(F)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(f,w,F){var V=this._getNewPixelOrigin(F,w);return this.project(f,w)._subtract(V)},_latLngBoundsToNewLayerBounds:function(f,w,F){var V=this._getNewPixelOrigin(F,w);return re([this.project(f.getSouthWest(),w)._subtract(V),this.project(f.getNorthWest(),w)._subtract(V),this.project(f.getSouthEast(),w)._subtract(V),this.project(f.getNorthEast(),w)._subtract(V)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(f){return this.latLngToLayerPoint(f).subtract(this._getCenterLayerPoint())},_limitCenter:function(f,w,F){if(!F)return f;var V=this.project(f,w),se=this.getSize().divideBy(2),me=new ae(V.subtract(se),V.add(se)),Ce=this._getBoundsOffset(me,F,w);return Math.abs(Ce.x)<=1&&Math.abs(Ce.y)<=1?f:this.unproject(V.add(Ce),w)},_limitOffset:function(f,w){if(!w)return f;var F=this.getPixelBounds(),V=new ae(F.min.add(f),F.max.add(f));return f.add(this._getBoundsOffset(V,w))},_getBoundsOffset:function(f,w,F){var V=re(this.project(w.getNorthEast(),F),this.project(w.getSouthWest(),F)),se=V.min.subtract(f.min),me=V.max.subtract(f.max),Ce=this._rebound(se.x,-me.x),qe=this._rebound(se.y,-me.y);return new Y(Ce,qe)},_rebound:function(f,w){return f+w>0?Math.round(f-w)/2:Math.max(0,Math.ceil(f))-Math.max(0,Math.floor(w))},_limitZoom:function(f){var w=this.getMinZoom(),F=this.getMaxZoom(),V=ts.any3d?this.options.zoomSnap:1;return V&&(f=Math.round(f/V)*V),Math.max(w,Math.min(F,f))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){ka(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(f,w){var F=this._getCenterOffset(f)._trunc();return(w&&w.animate)!==!0&&!this.getSize().contains(F)?!1:(this.panBy(F,w),!0)},_createAnimProxy:function(){var f=this._proxy=Is("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(f),this.on("zoomanim",function(w){var F=Bh,V=this._proxy.style[F];Zi(this._proxy,this.project(w.center,w.zoom),this.getZoomScale(w.zoom,1)),V===this._proxy.style[F]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){or(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var f=this.getCenter(),w=this.getZoom();Zi(this._proxy,this.project(f,w),this.getZoomScale(w,1))},_catchTransitionEnd:function(f){this._animatingZoom&&f.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(f,w,F){if(this._animatingZoom)return!0;if(F=F||{},!this._zoomAnimated||F.animate===!1||this._nothingToAnimate()||Math.abs(w-this._zoom)>this.options.zoomAnimationThreshold)return!1;var V=this.getZoomScale(w),se=this._getCenterOffset(f)._divideBy(1-1/V);return F.animate!==!0&&!this.getSize().contains(se)?!1:(T(function(){this._moveStart(!0,F.noMoveStart||!1)._animateZoom(f,w,!0)},this),!0)},_animateZoom:function(f,w,F,V){this._mapPane&&(F&&(this._animatingZoom=!0,this._animateToCenter=f,this._animateToZoom=w,Ts(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:f,zoom:w,noUpdate:V}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&ka(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Yc(f,w){return new wa(f,w)}var Qi=q.extend({options:{position:"topright"},initialize:function(f){y(this,f)},getPosition:function(){return this.options.position},setPosition:function(f){var w=this._map;return w&&w.removeControl(this),this.options.position=f,w&&w.addControl(this),this},getContainer:function(){return this._container},addTo:function(f){this.remove(),this._map=f;var w=this._container=this.onAdd(f),F=this.getPosition(),V=f._controlCorners[F];return Ts(w,"leaflet-control"),F.indexOf("bottom")!==-1?V.insertBefore(w,V.firstChild):V.appendChild(w),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(or(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(f){this._map&&f&&f.screenX>0&&f.screenY>0&&this._map.getContainer().focus()}}),Zc=function(f){return new Qi(f)};wa.include({addControl:function(f){return f.addTo(this),this},removeControl:function(f){return f.remove(),this},_initControlPos:function(){var f=this._controlCorners={},w="leaflet-",F=this._controlContainer=Is("div",w+"control-container",this._container);function V(se,me){var Ce=w+se+" "+w+me;f[se+me]=Is("div",Ce,F)}V("top","left"),V("top","right"),V("bottom","left"),V("bottom","right")},_clearControlPos:function(){for(var f in this._controlCorners)or(this._controlCorners[f]);or(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fv=Qi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(f,w,F,V){return F<V?-1:V<F?1:0}},initialize:function(f,w,F){y(this,F),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var V in f)this._addLayer(f[V],V);for(V in w)this._addLayer(w[V],V,!0)},onAdd:function(f){this._initLayout(),this._update(),this._map=f,f.on("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(f){return Qi.prototype.addTo.call(this,f),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var f=0;f<this._layers.length;f++)this._layers[f].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(f,w){return this._addLayer(f,w),this._map?this._update():this},addOverlay:function(f,w){return this._addLayer(f,w,!0),this._map?this._update():this},removeLayer:function(f){f.off("add remove",this._onLayerChange,this);var w=this._getLayer(d(f));return w&&this._layers.splice(this._layers.indexOf(w),1),this._map?this._update():this},expand:function(){Ts(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var f=this._map.getSize().y-(this._container.offsetTop+50);return f<this._section.clientHeight?(Ts(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=f+"px"):ka(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return ka(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var f="leaflet-control-layers",w=this._container=Is("div",f),F=this.options.collapsed;w.setAttribute("aria-haspopup",!0),hl(w),xi(w);var V=this._section=Is("section",f+"-list");F&&(this._map.on("click",this.collapse,this),Es(w,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var se=this._layersLink=Is("a",f+"-toggle",w);se.href="#",se.title="Layers",se.setAttribute("role","button"),Es(se,{keydown:function(me){me.keyCode===13&&this._expandSafely()},click:function(me){Wa(me),this._expandSafely()}},this),F||this.expand(),this._baseLayersList=Is("div",f+"-base",V),this._separator=Is("div",f+"-separator",V),this._overlaysList=Is("div",f+"-overlays",V),w.appendChild(V)},_getLayer:function(f){for(var w=0;w<this._layers.length;w++)if(this._layers[w]&&d(this._layers[w].layer)===f)return this._layers[w]},_addLayer:function(f,w,F){this._map&&f.on("add remove",this._onLayerChange,this),this._layers.push({layer:f,name:w,overlay:F}),this.options.sortLayers&&this._layers.sort(l(function(V,se){return this.options.sortFunction(V.layer,se.layer,V.name,se.name)},this)),this.options.autoZIndex&&f.setZIndex&&(this._lastZIndex++,f.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Rl(this._baseLayersList),Rl(this._overlaysList),this._layerControlInputs=[];var f,w,F,V,se=0;for(F=0;F<this._layers.length;F++)V=this._layers[F],this._addItem(V),w=w||V.overlay,f=f||!V.overlay,se+=V.overlay?0:1;return this.options.hideSingleBase&&(f=f&&se>1,this._baseLayersList.style.display=f?"":"none"),this._separator.style.display=w&&f?"":"none",this},_onLayerChange:function(f){this._handlingClick||this._update();var w=this._getLayer(d(f.target)),F=w.overlay?f.type==="add"?"overlayadd":"overlayremove":f.type==="add"?"baselayerchange":null;F&&this._map.fire(F,w)},_createRadioElement:function(f,w){var F='<input type="radio" class="leaflet-control-layers-selector" name="'+f+'"'+(w?' checked="checked"':"")+"/>",V=document.createElement("div");return V.innerHTML=F,V.firstChild},_addItem:function(f){var w=document.createElement("label"),F=this._map.hasLayer(f.layer),V;f.overlay?(V=document.createElement("input"),V.type="checkbox",V.className="leaflet-control-layers-selector",V.defaultChecked=F):V=this._createRadioElement("leaflet-base-layers_"+d(this),F),this._layerControlInputs.push(V),V.layerId=d(f.layer),Es(V,"click",this._onInputClick,this);var se=document.createElement("span");se.innerHTML=" "+f.name;var me=document.createElement("span");w.appendChild(me),me.appendChild(V),me.appendChild(se);var Ce=f.overlay?this._overlaysList:this._baseLayersList;return Ce.appendChild(w),this._checkDisabledLayers(),w},_onInputClick:function(){if(!this._preventClick){var f=this._layerControlInputs,w,F,V=[],se=[];this._handlingClick=!0;for(var me=f.length-1;me>=0;me--)w=f[me],F=this._getLayer(w.layerId).layer,w.checked?V.push(F):w.checked||se.push(F);for(me=0;me<se.length;me++)this._map.hasLayer(se[me])&&this._map.removeLayer(se[me]);for(me=0;me<V.length;me++)this._map.hasLayer(V[me])||this._map.addLayer(V[me]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var f=this._layerControlInputs,w,F,V=this._map.getZoom(),se=f.length-1;se>=0;se--)w=f[se],F=this._getLayer(w.layerId).layer,w.disabled=F.options.minZoom!==void 0&&V<F.options.minZoom||F.options.maxZoom!==void 0&&V>F.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var f=this._section;this._preventClick=!0,Es(f,"click",Wa),this.expand();var w=this;setTimeout(function(){ve(f,"click",Wa),w._preventClick=!1})}}),Sp=function(f,w,F){return new fv(f,w,F)},Yu=Qi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(f){var w="leaflet-control-zoom",F=Is("div",w+" leaflet-bar"),V=this.options;return this._zoomInButton=this._createButton(V.zoomInText,V.zoomInTitle,w+"-in",F,this._zoomIn),this._zoomOutButton=this._createButton(V.zoomOutText,V.zoomOutTitle,w+"-out",F,this._zoomOut),this._updateDisabled(),f.on("zoomend zoomlevelschange",this._updateDisabled,this),F},onRemove:function(f){f.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(f){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(f.shiftKey?3:1))},_zoomOut:function(f){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(f.shiftKey?3:1))},_createButton:function(f,w,F,V,se){var me=Is("a",F,V);return me.innerHTML=f,me.href="#",me.title=w,me.setAttribute("role","button"),me.setAttribute("aria-label",w),hl(me),Es(me,"click",pi),Es(me,"click",se,this),Es(me,"click",this._refocusOnMap,this),me},_updateDisabled:function(){var f=this._map,w="leaflet-disabled";ka(this._zoomInButton,w),ka(this._zoomOutButton,w),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||f._zoom===f.getMinZoom())&&(Ts(this._zoomOutButton,w),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||f._zoom===f.getMaxZoom())&&(Ts(this._zoomInButton,w),this._zoomInButton.setAttribute("aria-disabled","true"))}});wa.mergeOptions({zoomControl:!0}),wa.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Yu,this.addControl(this.zoomControl))});var Mb=function(f){return new Yu(f)},Si=Qi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(f){var w="leaflet-control-scale",F=Is("div",w),V=this.options;return this._addScales(V,w+"-line",F),f.on(V.updateWhenIdle?"moveend":"move",this._update,this),f.whenReady(this._update,this),F},onRemove:function(f){f.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(f,w,F){f.metric&&(this._mScale=Is("div",w,F)),f.imperial&&(this._iScale=Is("div",w,F))},_update:function(){var f=this._map,w=f.getSize().y/2,F=f.distance(f.containerPointToLatLng([0,w]),f.containerPointToLatLng([this.options.maxWidth,w]));this._updateScales(F)},_updateScales:function(f){this.options.metric&&f&&this._updateMetric(f),this.options.imperial&&f&&this._updateImperial(f)},_updateMetric:function(f){var w=this._getRoundNum(f),F=w<1e3?w+" m":w/1e3+" km";this._updateScale(this._mScale,F,w/f)},_updateImperial:function(f){var w=f*3.2808399,F,V,se;w>5280?(F=w/5280,V=this._getRoundNum(F),this._updateScale(this._iScale,V+" mi",V/F)):(se=this._getRoundNum(w),this._updateScale(this._iScale,se+" ft",se/w))},_updateScale:function(f,w,F){f.style.width=Math.round(this.options.maxWidth*F)+"px",f.innerHTML=w},_getRoundNum:function(f){var w=Math.pow(10,(Math.floor(f)+"").length-1),F=f/w;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:1,w*F}}),Zu=function(f){return new Si(f)},gv='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',$d=Qi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ts.inlineSvg?gv+" ":"")+"Leaflet</a>"},initialize:function(f){y(this,f),this._attributions={}},onAdd:function(f){f.attributionControl=this,this._container=Is("div","leaflet-control-attribution"),hl(this._container);for(var w in f._layers)f._layers[w].getAttribution&&this.addAttribution(f._layers[w].getAttribution());return this._update(),f.on("layeradd",this._addAttribution,this),this._container},onRemove:function(f){f.off("layeradd",this._addAttribution,this)},_addAttribution:function(f){f.layer.getAttribution&&(this.addAttribution(f.layer.getAttribution()),f.layer.once("remove",function(){this.removeAttribution(f.layer.getAttribution())},this))},setPrefix:function(f){return this.options.prefix=f,this._update(),this},addAttribution:function(f){return f?(this._attributions[f]||(this._attributions[f]=0),this._attributions[f]++,this._update(),this):this},removeAttribution:function(f){return f?(this._attributions[f]&&(this._attributions[f]--,this._update()),this):this},_update:function(){if(this._map){var f=[];for(var w in this._attributions)this._attributions[w]&&f.push(w);var F=[];this.options.prefix&&F.push(this.options.prefix),f.length&&F.push(f.join(", ")),this._container.innerHTML=F.join(' <span aria-hidden="true">|</span> ')}}});wa.mergeOptions({attributionControl:!0}),wa.addInitHook(function(){this.options.attributionControl&&new $d().addTo(this)});var qC=function(f){return new $d(f)};Qi.Layers=fv,Qi.Zoom=Yu,Qi.Scale=Si,Qi.Attribution=$d,Zc.layers=Sp,Zc.zoom=Mb,Zc.scale=Zu,Zc.attribution=qC;var xl=q.extend({initialize:function(f){this._map=f},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});xl.addTo=function(f,w){return f.addHandler(w,this),this};var vv={Events:H},Ju=ts.touch?"touchstart mousedown":"mousedown",Bl=le.extend({options:{clickTolerance:3},initialize:function(f,w,F,V){y(this,V),this._element=f,this._dragStartTarget=w||f,this._preventOutline=F},enable:function(){this._enabled||(Es(this._dragStartTarget,Ju,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Bl._dragging===this&&this.finishDrag(!0),ve(this._dragStartTarget,Ju,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(f){if(this._enabled&&(this._moved=!1,!qc(this._element,"leaflet-zoom-anim"))){if(f.touches&&f.touches.length!==1){Bl._dragging===this&&this.finishDrag();return}if(!(Bl._dragging||f.shiftKey||f.which!==1&&f.button!==1&&!f.touches)&&(Bl._dragging=this,this._preventOutline&&cc(this._element),Gu(),ra(),!this._moving)){this.fire("down");var w=f.touches?f.touches[0]:f,F=Il(this._element);this._startPoint=new Y(w.clientX,w.clientY),this._startPos=Ol(this._element),this._parentScale=ml(F);var V=f.type==="mousedown";Es(document,V?"mousemove":"touchmove",this._onMove,this),Es(document,V?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(f){if(this._enabled){if(f.touches&&f.touches.length>1){this._moved=!0;return}var w=f.touches&&f.touches.length===1?f.touches[0]:f,F=new Y(w.clientX,w.clientY)._subtract(this._startPoint);!F.x&&!F.y||Math.abs(F.x)+Math.abs(F.y)<this.options.clickTolerance||(F.x/=this._parentScale.x,F.y/=this._parentScale.y,Wa(f),this._moved||(this.fire("dragstart"),this._moved=!0,Ts(document.body,"leaflet-dragging"),this._lastTarget=f.target||f.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Ts(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(F),this._moving=!0,this._lastEvent=f,this._updatePosition())}},_updatePosition:function(){var f={originalEvent:this._lastEvent};this.fire("predrag",f),Er(this._element,this._newPos),this.fire("drag",f)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(f){ka(document.body,"leaflet-dragging"),this._lastTarget&&(ka(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ve(document,"mousemove touchmove",this._onMove,this),ve(document,"mouseup touchend touchcancel",this._onUp,this),Ku(),Gc();var w=this._moved&&this._moving;this._moving=!1,Bl._dragging=!1,w&&this.fire("dragend",{noInertia:f,distance:this._newPos.distanceTo(this._startPos)})}});function jv(f,w,F){var V,se=[1,4,2,8],me,Ce,qe,Ye,ut,It,Ns,ea;for(me=0,It=f.length;me<It;me++)f[me]._code=Ud(f[me],w);for(qe=0;qe<4;qe++){for(Ns=se[qe],V=[],me=0,It=f.length,Ce=It-1;me<It;Ce=me++)Ye=f[me],ut=f[Ce],Ye._code&Ns?ut._code&Ns||(ea=Ep(ut,Ye,Ns,w,F),ea._code=Ud(ea,w),V.push(ea)):(ut._code&Ns&&(ea=Ep(ut,Ye,Ns,w,F),ea._code=Ud(ea,w),V.push(ea)),V.push(Ye));f=V}return f}function Bb(f,w){var F,V,se,me,Ce,qe,Ye,ut,It;if(!f||f.length===0)throw new Error("latlngs not passed");pl(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var Ns=ze([0,0]),ea=ye(f),On=ea.getNorthWest().distanceTo(ea.getSouthWest())*ea.getNorthEast().distanceTo(ea.getNorthWest());On<1700&&(Ns=bv(f));var yn=f.length,el=[];for(F=0;F<yn;F++){var ki=ze(f[F]);el.push(w.project(ze([ki.lat-Ns.lat,ki.lng-Ns.lng])))}for(qe=Ye=ut=0,F=0,V=yn-1;F<yn;V=F++)se=el[F],me=el[V],Ce=se.y*me.x-me.y*se.x,Ye+=(se.x+me.x)*Ce,ut+=(se.y+me.y)*Ce,qe+=Ce*3;qe===0?It=el[0]:It=[Ye/qe,ut/qe];var lm=w.unproject(ne(It));return ze([lm.lat+Ns.lat,lm.lng+Ns.lng])}function bv(f){for(var w=0,F=0,V=0,se=0;se<f.length;se++){var me=ze(f[se]);w+=me.lat,F+=me.lng,V++}return ze([w/V,F/V])}var VC={__proto__:null,clipPolygon:jv,polygonCenter:Bb,centroid:bv};function kp(f,w){if(!w||!f.length)return f.slice();var F=w*w;return f=GC(f,F),f=HC(f,F),f}function $b(f,w,F){return Math.sqrt(zd(f,w,F,!0))}function WC(f,w,F){return zd(f,w,F)}function HC(f,w){var F=f.length,V=typeof Uint8Array<"u"?Uint8Array:Array,se=new V(F);se[0]=se[F-1]=1,yv(f,se,w,0,F-1);var me,Ce=[];for(me=0;me<F;me++)se[me]&&Ce.push(f[me]);return Ce}function yv(f,w,F,V,se){var me=0,Ce,qe,Ye;for(qe=V+1;qe<=se-1;qe++)Ye=zd(f[qe],f[V],f[se],!0),Ye>me&&(Ce=qe,me=Ye);me>F&&(w[Ce]=1,yv(f,w,F,V,Ce),yv(f,w,F,Ce,se))}function GC(f,w){for(var F=[f[0]],V=1,se=0,me=f.length;V<me;V++)KC(f[V],f[se])>w&&(F.push(f[V]),se=V);return se<me-1&&F.push(f[me-1]),F}var Nv;function Ub(f,w,F,V,se){var me=V?Nv:Ud(f,F),Ce=Ud(w,F),qe,Ye,ut;for(Nv=Ce;;){if(!(me|Ce))return[f,w];if(me&Ce)return!1;qe=me||Ce,Ye=Ep(f,w,qe,F,se),ut=Ud(Ye,F),qe===me?(f=Ye,me=ut):(w=Ye,Ce=ut)}}function Ep(f,w,F,V,se){var me=w.x-f.x,Ce=w.y-f.y,qe=V.min,Ye=V.max,ut,It;return F&8?(ut=f.x+me*(Ye.y-f.y)/Ce,It=Ye.y):F&4?(ut=f.x+me*(qe.y-f.y)/Ce,It=qe.y):F&2?(ut=Ye.x,It=f.y+Ce*(Ye.x-f.x)/me):F&1&&(ut=qe.x,It=f.y+Ce*(qe.x-f.x)/me),new Y(ut,It,se)}function Ud(f,w){var F=0;return f.x<w.min.x?F|=1:f.x>w.max.x&&(F|=2),f.y<w.min.y?F|=4:f.y>w.max.y&&(F|=8),F}function KC(f,w){var F=w.x-f.x,V=w.y-f.y;return F*F+V*V}function zd(f,w,F,V){var se=w.x,me=w.y,Ce=F.x-se,qe=F.y-me,Ye=Ce*Ce+qe*qe,ut;return Ye>0&&(ut=((f.x-se)*Ce+(f.y-me)*qe)/Ye,ut>1?(se=F.x,me=F.y):ut>0&&(se+=Ce*ut,me+=qe*ut)),Ce=f.x-se,qe=f.y-me,V?Ce*Ce+qe*qe:new Y(se,me)}function pl(f){return!_(f[0])||typeof f[0][0]!="object"&&typeof f[0][0]<"u"}function zb(f){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),pl(f)}function qb(f,w){var F,V,se,me,Ce,qe,Ye,ut;if(!f||f.length===0)throw new Error("latlngs not passed");pl(f)||(console.warn("latlngs are not flat! Only the first ring will be used"),f=f[0]);var It=ze([0,0]),Ns=ye(f),ea=Ns.getNorthWest().distanceTo(Ns.getSouthWest())*Ns.getNorthEast().distanceTo(Ns.getNorthWest());ea<1700&&(It=bv(f));var On=f.length,yn=[];for(F=0;F<On;F++){var el=ze(f[F]);yn.push(w.project(ze([el.lat-It.lat,el.lng-It.lng])))}for(F=0,V=0;F<On-1;F++)V+=yn[F].distanceTo(yn[F+1])/2;if(V===0)ut=yn[0];else for(F=0,me=0;F<On-1;F++)if(Ce=yn[F],qe=yn[F+1],se=Ce.distanceTo(qe),me+=se,me>V){Ye=(me-V)/se,ut=[qe.x-Ye*(qe.x-Ce.x),qe.y-Ye*(qe.y-Ce.y)];break}var ki=w.unproject(ne(ut));return ze([ki.lat+It.lat,ki.lng+It.lng])}var Vb={__proto__:null,simplify:kp,pointToSegmentDistance:$b,closestPointOnSegment:WC,clipSegment:Ub,_getEdgeIntersection:Ep,_getBitCode:Ud,_sqClosestPointOnSegment:zd,isFlat:pl,_flat:zb,polylineCenter:qb},wv={project:function(f){return new Y(f.lng,f.lat)},unproject:function(f){return new ke(f.y,f.x)},bounds:new ae([-180,-90],[180,90])},_v={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ae([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(f){var w=Math.PI/180,F=this.R,V=f.lat*w,se=this.R_MINOR/F,me=Math.sqrt(1-se*se),Ce=me*Math.sin(V),qe=Math.tan(Math.PI/4-V/2)/Math.pow((1-Ce)/(1+Ce),me/2);return V=-F*Math.log(Math.max(qe,1e-10)),new Y(f.lng*w*F,V)},unproject:function(f){for(var w=180/Math.PI,F=this.R,V=this.R_MINOR/F,se=Math.sqrt(1-V*V),me=Math.exp(-f.y/F),Ce=Math.PI/2-2*Math.atan(me),qe=0,Ye=.1,ut;qe<15&&Math.abs(Ye)>1e-7;qe++)ut=se*Math.sin(Ce),ut=Math.pow((1-ut)/(1+ut),se/2),Ye=Math.PI/2-2*Math.atan(me*ut)-Ce,Ce+=Ye;return new ke(Ce*w,f.x*w/F)}},YC={__proto__:null,LonLat:wv,Mercator:_v,SphericalMercator:Ne},ZC=n({},Re,{code:"EPSG:3395",projection:_v,transformation:(function(){var f=.5/(Math.PI*_v.R);return ge(f,.5,-f,.5)})()}),Wb=n({},Re,{code:"EPSG:4326",projection:wv,transformation:ge(1/180,1,-1/180,.5)}),JC=n({},ce,{projection:wv,transformation:ge(1,0,-1,0),scale:function(f){return Math.pow(2,f)},zoom:function(f){return Math.log(f)/Math.LN2},distance:function(f,w){var F=w.lng-f.lng,V=w.lat-f.lat;return Math.sqrt(F*F+V*V)},infinite:!0});ce.Earth=Re,ce.EPSG3395=ZC,ce.EPSG3857=he,ce.EPSG900913=_e,ce.EPSG4326=Wb,ce.Simple=JC;var $l=le.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(f){return f.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(f){return f&&f.removeLayer(this),this},getPane:function(f){return this._map.getPane(f?this.options[f]||f:this.options.pane)},addInteractiveTarget:function(f){return this._map._targets[d(f)]=this,this},removeInteractiveTarget:function(f){return delete this._map._targets[d(f)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(f){var w=f.target;if(w.hasLayer(this)){if(this._map=w,this._zoomAnimated=w._zoomAnimated,this.getEvents){var F=this.getEvents();w.on(F,this),this.once("remove",function(){w.off(F,this)},this)}this.onAdd(w),this.fire("add"),w.fire("layeradd",{layer:this})}}});wa.include({addLayer:function(f){if(!f._layerAdd)throw new Error("The provided object is not a Layer.");var w=d(f);return this._layers[w]?this:(this._layers[w]=f,f._mapToAdd=this,f.beforeAdd&&f.beforeAdd(this),this.whenReady(f._layerAdd,f),this)},removeLayer:function(f){var w=d(f);return this._layers[w]?(this._loaded&&f.onRemove(this),delete this._layers[w],this._loaded&&(this.fire("layerremove",{layer:f}),f.fire("remove")),f._map=f._mapToAdd=null,this):this},hasLayer:function(f){return d(f)in this._layers},eachLayer:function(f,w){for(var F in this._layers)f.call(w,this._layers[F]);return this},_addLayers:function(f){f=f?_(f)?f:[f]:[];for(var w=0,F=f.length;w<F;w++)this.addLayer(f[w])},_addZoomLimit:function(f){(!isNaN(f.options.maxZoom)||!isNaN(f.options.minZoom))&&(this._zoomBoundLayers[d(f)]=f,this._updateZoomLevels())},_removeZoomLimit:function(f){var w=d(f);this._zoomBoundLayers[w]&&(delete this._zoomBoundLayers[w],this._updateZoomLevels())},_updateZoomLevels:function(){var f=1/0,w=-1/0,F=this._getZoomSpan();for(var V in this._zoomBoundLayers){var se=this._zoomBoundLayers[V].options;f=se.minZoom===void 0?f:Math.min(f,se.minZoom),w=se.maxZoom===void 0?w:Math.max(w,se.maxZoom)}this._layersMaxZoom=w===-1/0?void 0:w,this._layersMinZoom=f===1/0?void 0:f,F!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Jc=$l.extend({initialize:function(f,w){y(this,w),this._layers={};var F,V;if(f)for(F=0,V=f.length;F<V;F++)this.addLayer(f[F])},addLayer:function(f){var w=this.getLayerId(f);return this._layers[w]=f,this._map&&this._map.addLayer(f),this},removeLayer:function(f){var w=f in this._layers?f:this.getLayerId(f);return this._map&&this._layers[w]&&this._map.removeLayer(this._layers[w]),delete this._layers[w],this},hasLayer:function(f){var w=typeof f=="number"?f:this.getLayerId(f);return w in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(f){var w=Array.prototype.slice.call(arguments,1),F,V;for(F in this._layers)V=this._layers[F],V[f]&&V[f].apply(V,w);return this},onAdd:function(f){this.eachLayer(f.addLayer,f)},onRemove:function(f){this.eachLayer(f.removeLayer,f)},eachLayer:function(f,w){for(var F in this._layers)f.call(w,this._layers[F]);return this},getLayer:function(f){return this._layers[f]},getLayers:function(){var f=[];return this.eachLayer(f.push,f),f},setZIndex:function(f){return this.invoke("setZIndex",f)},getLayerId:function(f){return d(f)}}),zh=function(f,w){return new Jc(f,w)},dc=Jc.extend({addLayer:function(f){return this.hasLayer(f)?this:(f.addEventParent(this),Jc.prototype.addLayer.call(this,f),this.fire("layeradd",{layer:f}))},removeLayer:function(f){return this.hasLayer(f)?(f in this._layers&&(f=this._layers[f]),f.removeEventParent(this),Jc.prototype.removeLayer.call(this,f),this.fire("layerremove",{layer:f})):this},setStyle:function(f){return this.invoke("setStyle",f)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var f=new xe;for(var w in this._layers){var F=this._layers[w];f.extend(F.getBounds?F.getBounds():F.getLatLng())}return f}}),Hb=function(f,w){return new dc(f,w)},qd=q.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(f){y(this,f)},createIcon:function(f){return this._createIcon("icon",f)},createShadow:function(f){return this._createIcon("shadow",f)},_createIcon:function(f,w){var F=this._getIconUrl(f);if(!F){if(f==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var V=this._createImg(F,w&&w.tagName==="IMG"?w:null);return this._setIconStyles(V,f),(this.options.crossOrigin||this.options.crossOrigin==="")&&(V.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),V},_setIconStyles:function(f,w){var F=this.options,V=F[w+"Size"];typeof V=="number"&&(V=[V,V]);var se=ne(V),me=ne(w==="shadow"&&F.shadowAnchor||F.iconAnchor||se&&se.divideBy(2,!0));f.className="leaflet-marker-"+w+" "+(F.className||""),me&&(f.style.marginLeft=-me.x+"px",f.style.marginTop=-me.y+"px"),se&&(f.style.width=se.x+"px",f.style.height=se.y+"px")},_createImg:function(f,w){return w=w||document.createElement("img"),w.src=f,w},_getIconUrl:function(f){return ts.retina&&this.options[f+"RetinaUrl"]||this.options[f+"Url"]}});function Gb(f){return new qd(f)}var Qu=qd.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(f){return typeof Qu.imagePath!="string"&&(Qu.imagePath=this._detectIconPath()),(this.options.imagePath||Qu.imagePath)+qd.prototype._getIconUrl.call(this,f)},_stripUrl:function(f){var w=function(F,V,se){var me=V.exec(F);return me&&me[se]};return f=w(f,/^url\((['"])?(.+)\1\)$/,2),f&&w(f,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var f=Is("div","leaflet-default-icon-path",document.body),w=cl(f,"background-image")||cl(f,"backgroundImage");if(document.body.removeChild(f),w=this._stripUrl(w),w)return w;var F=document.querySelector('link[href$="leaflet.css"]');return F?F.href.substring(0,F.href.length-11-1):""}}),Cv=xl.extend({initialize:function(f){this._marker=f},addHooks:function(){var f=this._marker._icon;this._draggable||(this._draggable=new Bl(f,f,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Ts(f,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&ka(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(f){var w=this._marker,F=w._map,V=this._marker.options.autoPanSpeed,se=this._marker.options.autoPanPadding,me=Ol(w._icon),Ce=F.getPixelBounds(),qe=F.getPixelOrigin(),Ye=re(Ce.min._subtract(qe).add(se),Ce.max._subtract(qe).subtract(se));if(!Ye.contains(me)){var ut=ne((Math.max(Ye.max.x,me.x)-Ye.max.x)/(Ce.max.x-Ye.max.x)-(Math.min(Ye.min.x,me.x)-Ye.min.x)/(Ce.min.x-Ye.min.x),(Math.max(Ye.max.y,me.y)-Ye.max.y)/(Ce.max.y-Ye.max.y)-(Math.min(Ye.min.y,me.y)-Ye.min.y)/(Ce.min.y-Ye.min.y)).multiplyBy(V);F.panBy(ut,{animate:!1}),this._draggable._newPos._add(ut),this._draggable._startPos._add(ut),Er(w._icon,this._draggable._newPos),this._onDrag(f),this._panRequest=T(this._adjustPan.bind(this,f))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(f){this._marker.options.autoPan&&(B(this._panRequest),this._panRequest=T(this._adjustPan.bind(this,f)))},_onDrag:function(f){var w=this._marker,F=w._shadow,V=Ol(w._icon),se=w._map.layerPointToLatLng(V);F&&Er(F,V),w._latlng=se,f.latlng=se,f.oldLatLng=this._oldLatLng,w.fire("move",f).fire("drag",f)},_onDragEnd:function(f){B(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",f)}}),uc=$l.extend({options:{icon:new Qu,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(f,w){y(this,w),this._latlng=ze(f)},onAdd:function(f){this._zoomAnimated=this._zoomAnimated&&f.options.markerZoomAnimation,this._zoomAnimated&&f.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(f){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&f.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(f){var w=this._latlng;return this._latlng=ze(f),this.update(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},setZIndexOffset:function(f){return this.options.zIndexOffset=f,this.update()},getIcon:function(){return this.options.icon},setIcon:function(f){return this.options.icon=f,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var f=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(f)}return this},_initIcon:function(){var f=this.options,w="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),F=f.icon.createIcon(this._icon),V=!1;F!==this._icon&&(this._icon&&this._removeIcon(),V=!0,f.title&&(F.title=f.title),F.tagName==="IMG"&&(F.alt=f.alt||"")),Ts(F,w),f.keyboard&&(F.tabIndex="0",F.setAttribute("role","button")),this._icon=F,f.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Es(F,"focus",this._panOnFocus,this);var se=f.icon.createShadow(this._shadow),me=!1;se!==this._shadow&&(this._removeShadow(),me=!0),se&&(Ts(se,w),se.alt=""),this._shadow=se,f.opacity<1&&this._updateOpacity(),V&&this.getPane().appendChild(this._icon),this._initInteraction(),se&&me&&this.getPane(f.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ve(this._icon,"focus",this._panOnFocus,this),or(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&or(this._shadow),this._shadow=null},_setPos:function(f){this._icon&&Er(this._icon,f),this._shadow&&Er(this._shadow,f),this._zIndex=f.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(f){this._icon&&(this._icon.style.zIndex=this._zIndex+f)},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center).round();this._setPos(w)},_initInteraction:function(){if(this.options.interactive&&(Ts(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Cv)){var f=this.options.draggable;this.dragging&&(f=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Cv(this),f&&this.dragging.enable()}},setOpacity:function(f){return this.options.opacity=f,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var f=this.options.opacity;this._icon&&Fn(this._icon,f),this._shadow&&Fn(this._shadow,f)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var f=this._map;if(f){var w=this.options.icon.options,F=w.iconSize?ne(w.iconSize):ne(0,0),V=w.iconAnchor?ne(w.iconAnchor):ne(0,0);f.panInside(this._latlng,{paddingTopLeft:V,paddingBottomRight:F.subtract(V)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function QC(f,w){return new uc(f,w)}var Qc=$l.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(f){this._renderer=f.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(f){return y(this,f),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&f&&Object.prototype.hasOwnProperty.call(f,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Ap=Qc.extend({options:{fill:!0,radius:10},initialize:function(f,w){y(this,w),this._latlng=ze(f),this._radius=this.options.radius},setLatLng:function(f){var w=this._latlng;return this._latlng=ze(f),this.redraw(),this.fire("move",{oldLatLng:w,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(f){return this.options.radius=this._radius=f,this.redraw()},getRadius:function(){return this._radius},setStyle:function(f){var w=f&&f.radius||this._radius;return Qc.prototype.setStyle.call(this,f),this.setRadius(w),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var f=this._radius,w=this._radiusY||f,F=this._clickTolerance(),V=[f+F,w+F];this._pxBounds=new ae(this._point.subtract(V),this._point.add(V))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(f){return f.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Kb(f,w){return new Ap(f,w)}var Pp=Ap.extend({initialize:function(f,w,F){if(typeof w=="number"&&(w=n({},F,{radius:w})),y(this,w),this._latlng=ze(f),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(f){return this._mRadius=f,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var f=[this._radius,this._radiusY||this._radius];return new xe(this._map.layerPointToLatLng(this._point.subtract(f)),this._map.layerPointToLatLng(this._point.add(f)))},setStyle:Qc.prototype.setStyle,_project:function(){var f=this._latlng.lng,w=this._latlng.lat,F=this._map,V=F.options.crs;if(V.distance===Re.distance){var se=Math.PI/180,me=this._mRadius/Re.R/se,Ce=F.project([w+me,f]),qe=F.project([w-me,f]),Ye=Ce.add(qe).divideBy(2),ut=F.unproject(Ye).lat,It=Math.acos((Math.cos(me*se)-Math.sin(w*se)*Math.sin(ut*se))/(Math.cos(w*se)*Math.cos(ut*se)))/se;(isNaN(It)||It===0)&&(It=me/Math.cos(Math.PI/180*w)),this._point=Ye.subtract(F.getPixelOrigin()),this._radius=isNaN(It)?0:Ye.x-F.project([ut,f-It]).x,this._radiusY=Ye.y-Ce.y}else{var Ns=V.unproject(V.project(this._latlng).subtract([this._mRadius,0]));this._point=F.latLngToLayerPoint(this._latlng),this._radius=this._point.x-F.latLngToLayerPoint(Ns).x}this._updateBounds()}});function qh(f,w,F){return new Pp(f,w,F)}var Xi=Qc.extend({options:{smoothFactor:1,noClip:!1},initialize:function(f,w){y(this,w),this._setLatLngs(f)},getLatLngs:function(){return this._latlngs},setLatLngs:function(f){return this._setLatLngs(f),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(f){for(var w=1/0,F=null,V=zd,se,me,Ce=0,qe=this._parts.length;Ce<qe;Ce++)for(var Ye=this._parts[Ce],ut=1,It=Ye.length;ut<It;ut++){se=Ye[ut-1],me=Ye[ut];var Ns=V(f,se,me,!0);Ns<w&&(w=Ns,F=V(f,se,me))}return F&&(F.distance=Math.sqrt(w)),F},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qb(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(f,w){return w=w||this._defaultShape(),f=ze(f),w.push(f),this._bounds.extend(f),this.redraw()},_setLatLngs:function(f){this._bounds=new xe,this._latlngs=this._convertLatLngs(f)},_defaultShape:function(){return pl(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(f){for(var w=[],F=pl(f),V=0,se=f.length;V<se;V++)F?(w[V]=ze(f[V]),this._bounds.extend(w[V])):w[V]=this._convertLatLngs(f[V]);return w},_project:function(){var f=new ae;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,f),this._bounds.isValid()&&f.isValid()&&(this._rawPxBounds=f,this._updateBounds())},_updateBounds:function(){var f=this._clickTolerance(),w=new Y(f,f);this._rawPxBounds&&(this._pxBounds=new ae([this._rawPxBounds.min.subtract(w),this._rawPxBounds.max.add(w)]))},_projectLatlngs:function(f,w,F){var V=f[0]instanceof ke,se=f.length,me,Ce;if(V){for(Ce=[],me=0;me<se;me++)Ce[me]=this._map.latLngToLayerPoint(f[me]),F.extend(Ce[me]);w.push(Ce)}else for(me=0;me<se;me++)this._projectLatlngs(f[me],w,F)},_clipPoints:function(){var f=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}var w=this._parts,F,V,se,me,Ce,qe,Ye;for(F=0,se=0,me=this._rings.length;F<me;F++)for(Ye=this._rings[F],V=0,Ce=Ye.length;V<Ce-1;V++)qe=Ub(Ye[V],Ye[V+1],f,V,!0),qe&&(w[se]=w[se]||[],w[se].push(qe[0]),(qe[1]!==Ye[V+1]||V===Ce-2)&&(w[se].push(qe[1]),se++))}},_simplifyPoints:function(){for(var f=this._parts,w=this.options.smoothFactor,F=0,V=f.length;F<V;F++)f[F]=kp(f[F],w)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(f,w){var F,V,se,me,Ce,qe,Ye=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(F=0,me=this._parts.length;F<me;F++)for(qe=this._parts[F],V=0,Ce=qe.length,se=Ce-1;V<Ce;se=V++)if(!(!w&&V===0)&&$b(f,qe[se],qe[V])<=Ye)return!0;return!1}});function XC(f,w){return new Xi(f,w)}Xi._flat=zb;var mc=Xi.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bb(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(f){var w=Xi.prototype._convertLatLngs.call(this,f),F=w.length;return F>=2&&w[0]instanceof ke&&w[0].equals(w[F-1])&&w.pop(),w},_setLatLngs:function(f){Xi.prototype._setLatLngs.call(this,f),pl(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return pl(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var f=this._renderer._bounds,w=this.options.weight,F=new Y(w,w);if(f=new ae(f.min.subtract(F),f.max.add(F)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(f))){if(this.options.noClip){this._parts=this._rings;return}for(var V=0,se=this._rings.length,me;V<se;V++)me=jv(this._rings[V],f,!0),me.length&&this._parts.push(me)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(f){var w=!1,F,V,se,me,Ce,qe,Ye,ut;if(!this._pxBounds||!this._pxBounds.contains(f))return!1;for(me=0,Ye=this._parts.length;me<Ye;me++)for(F=this._parts[me],Ce=0,ut=F.length,qe=ut-1;Ce<ut;qe=Ce++)V=F[Ce],se=F[qe],V.y>f.y!=se.y>f.y&&f.x<(se.x-V.x)*(f.y-V.y)/(se.y-V.y)+V.x&&(w=!w);return w||Xi.prototype._containsPoint.call(this,f,!0)}});function eS(f,w){return new mc(f,w)}var go=dc.extend({initialize:function(f,w){y(this,w),this._layers={},f&&this.addData(f)},addData:function(f){var w=_(f)?f:f.features,F,V,se;if(w){for(F=0,V=w.length;F<V;F++)se=w[F],(se.geometries||se.geometry||se.features||se.coordinates)&&this.addData(se);return this}var me=this.options;if(me.filter&&!me.filter(f))return this;var Ce=Xu(f,me);return Ce?(Ce.feature=Op(f),Ce.defaultOptions=Ce.options,this.resetStyle(Ce),me.onEachFeature&&me.onEachFeature(f,Ce),this.addLayer(Ce)):this},resetStyle:function(f){return f===void 0?this.eachLayer(this.resetStyle,this):(f.options=n({},f.defaultOptions),this._setLayerStyle(f,this.options.style),this)},setStyle:function(f){return this.eachLayer(function(w){this._setLayerStyle(w,f)},this)},_setLayerStyle:function(f,w){f.setStyle&&(typeof w=="function"&&(w=w(f.feature)),f.setStyle(w))}});function Xu(f,w){var F=f.type==="Feature"?f.geometry:f,V=F?F.coordinates:null,se=[],me=w&&w.pointToLayer,Ce=w&&w.coordsToLatLng||Tp,qe,Ye,ut,It;if(!V&&!F)return null;switch(F.type){case"Point":return qe=Ce(V),Dp(me,f,qe,w);case"MultiPoint":for(ut=0,It=V.length;ut<It;ut++)qe=Ce(V[ut]),se.push(Dp(me,f,qe,w));return new dc(se);case"LineString":case"MultiLineString":return Ye=Vh(V,F.type==="LineString"?0:1,Ce),new Xi(Ye,w);case"Polygon":case"MultiPolygon":return Ye=Vh(V,F.type==="Polygon"?1:2,Ce),new mc(Ye,w);case"GeometryCollection":for(ut=0,It=F.geometries.length;ut<It;ut++){var Ns=Xu({geometry:F.geometries[ut],type:"Feature",properties:f.properties},w);Ns&&se.push(Ns)}return new dc(se);case"FeatureCollection":for(ut=0,It=F.features.length;ut<It;ut++){var ea=Xu(F.features[ut],w);ea&&se.push(ea)}return new dc(se);default:throw new Error("Invalid GeoJSON object.")}}function Dp(f,w,F,V){return f?f(w,F):new uc(F,V&&V.markersInheritOptions&&V)}function Tp(f){return new ke(f[1],f[0],f[2])}function Vh(f,w,F){for(var V=[],se=0,me=f.length,Ce;se<me;se++)Ce=w?Vh(f[se],w-1,F):(F||Tp)(f[se]),V.push(Ce);return V}function Fp(f,w){return f=ze(f),f.alt!==void 0?[x(f.lng,w),x(f.lat,w),x(f.alt,w)]:[x(f.lng,w),x(f.lat,w)]}function Rp(f,w,F,V){for(var se=[],me=0,Ce=f.length;me<Ce;me++)se.push(w?Rp(f[me],pl(f[me])?0:w-1,F,V):Fp(f[me],V));return!w&&F&&se.length>0&&se.push(se[0].slice()),se}function em(f,w){return f.feature?n({},f.feature,{geometry:w}):Op(w)}function Op(f){return f.type==="Feature"||f.type==="FeatureCollection"?f:{type:"Feature",properties:{},geometry:f}}var Sv={toGeoJSON:function(f){return em(this,{type:"Point",coordinates:Fp(this.getLatLng(),f)})}};uc.include(Sv),Pp.include(Sv),Ap.include(Sv),Xi.include({toGeoJSON:function(f){var w=!pl(this._latlngs),F=Rp(this._latlngs,w?1:0,!1,f);return em(this,{type:(w?"Multi":"")+"LineString",coordinates:F})}}),mc.include({toGeoJSON:function(f){var w=!pl(this._latlngs),F=w&&!pl(this._latlngs[0]),V=Rp(this._latlngs,F?2:w?1:0,!0,f);return w||(V=[V]),em(this,{type:(F?"Multi":"")+"Polygon",coordinates:V})}}),Jc.include({toMultiPoint:function(f){var w=[];return this.eachLayer(function(F){w.push(F.toGeoJSON(f).geometry.coordinates)}),em(this,{type:"MultiPoint",coordinates:w})},toGeoJSON:function(f){var w=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(w==="MultiPoint")return this.toMultiPoint(f);var F=w==="GeometryCollection",V=[];return this.eachLayer(function(se){if(se.toGeoJSON){var me=se.toGeoJSON(f);if(F)V.push(me.geometry);else{var Ce=Op(me);Ce.type==="FeatureCollection"?V.push.apply(V,Ce.features):V.push(Ce)}}}),F?em(this,{geometries:V,type:"GeometryCollection"}):{type:"FeatureCollection",features:V}}});function Yb(f,w){return new go(f,w)}var Ul=Yb,Xc=$l.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(f,w,F){this._url=f,this._bounds=ye(w),y(this,F)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Ts(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){or(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(f){return this.options.opacity=f,this._image&&this._updateOpacity(),this},setStyle:function(f){return f.opacity&&this.setOpacity(f.opacity),this},bringToFront:function(){return this._map&&dl(this._image),this},bringToBack:function(){return this._map&&ul(this._image),this},setUrl:function(f){return this._url=f,this._image&&(this._image.src=f),this},setBounds:function(f){return this._bounds=ye(f),this._map&&this._reset(),this},getEvents:function(){var f={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var f=this._url.tagName==="IMG",w=this._image=f?this._url:Is("img");if(Ts(w,"leaflet-image-layer"),this._zoomAnimated&&Ts(w,"leaflet-zoom-animated"),this.options.className&&Ts(w,this.options.className),w.onselectstart=h,w.onmousemove=h,w.onload=l(this.fire,this,"load"),w.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(w.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),f){this._url=w.src;return}w.src=this._url,w.alt=this.options.alt},_animateZoom:function(f){var w=this._map.getZoomScale(f.zoom),F=this._map._latLngBoundsToNewLayerBounds(this._bounds,f.zoom,f.center).min;Zi(this._image,F,w)},_reset:function(){var f=this._image,w=new ae(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),F=w.getSize();Er(f,w.min),f.style.width=F.x+"px",f.style.height=F.y+"px"},_updateOpacity:function(){Fn(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var f=this.options.errorOverlayUrl;f&&this._url!==f&&(this._url=f,this._image.src=f)},getCenter:function(){return this._bounds.getCenter()}}),Zb=function(f,w,F){return new Xc(f,w,F)},kv=Xc.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var f=this._url.tagName==="VIDEO",w=this._image=f?this._url:Is("video");if(Ts(w,"leaflet-image-layer"),this._zoomAnimated&&Ts(w,"leaflet-zoom-animated"),this.options.className&&Ts(w,this.options.className),w.onselectstart=h,w.onmousemove=h,w.onloadeddata=l(this.fire,this,"load"),f){for(var F=w.getElementsByTagName("source"),V=[],se=0;se<F.length;se++)V.push(F[se].src);this._url=F.length>0?V:[w.src];return}_(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(w.style,"objectFit")&&(w.style.objectFit="fill"),w.autoplay=!!this.options.autoplay,w.loop=!!this.options.loop,w.muted=!!this.options.muted,w.playsInline=!!this.options.playsInline;for(var me=0;me<this._url.length;me++){var Ce=Is("source");Ce.src=this._url[me],w.appendChild(Ce)}}});function Jb(f,w,F){return new kv(f,w,F)}var Ev=Xc.extend({_initImage:function(){var f=this._image=this._url;Ts(f,"leaflet-image-layer"),this._zoomAnimated&&Ts(f,"leaflet-zoom-animated"),this.options.className&&Ts(f,this.options.className),f.onselectstart=h,f.onmousemove=h}});function Av(f,w,F){return new Ev(f,w,F)}var vo=$l.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(f,w){f&&(f instanceof ke||_(f))?(this._latlng=ze(f),y(this,w)):(y(this,f),this._source=w),this.options.content&&(this._content=this.options.content)},openOn:function(f){return f=arguments.length?f:this._source._map,f.hasLayer(this)||f.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(f){return this._map?this.close():(arguments.length?this._source=f:f=this._source,this._prepareOpen(),this.openOn(f._map)),this},onAdd:function(f){this._zoomAnimated=f._zoomAnimated,this._container||this._initLayout(),f._fadeAnimated&&Fn(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),f._fadeAnimated&&Fn(this._container,1),this.bringToFront(),this.options.interactive&&(Ts(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(f){f._fadeAnimated?(Fn(this._container,0),this._removeTimeout=setTimeout(l(or,void 0,this._container),200)):or(this._container),this.options.interactive&&(ka(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(f){return this._latlng=ze(f),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(f){return this._content=f,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var f={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&dl(this._container),this},bringToBack:function(){return this._map&&ul(this._container),this},_prepareOpen:function(f){var w=this._source;if(!w._map)return!1;if(w instanceof dc){w=null;var F=this._source._layers;for(var V in F)if(F[V]._map){w=F[V];break}if(!w)return!1;this._source=w}if(!f)if(w.getCenter)f=w.getCenter();else if(w.getLatLng)f=w.getLatLng();else if(w.getBounds)f=w.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(f),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var f=this._contentNode,w=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof w=="string")f.innerHTML=w;else{for(;f.hasChildNodes();)f.removeChild(f.firstChild);f.appendChild(w)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var f=this._map.latLngToLayerPoint(this._latlng),w=ne(this.options.offset),F=this._getAnchor();this._zoomAnimated?Er(this._container,f.add(F)):w=w.add(f).add(F);var V=this._containerBottom=-w.y,se=this._containerLeft=-Math.round(this._containerWidth/2)+w.x;this._container.style.bottom=V+"px",this._container.style.left=se+"px"}},_getAnchor:function(){return[0,0]}});wa.include({_initOverlay:function(f,w,F,V){var se=w;return se instanceof f||(se=new f(V).setContent(w)),F&&se.setLatLng(F),se}}),$l.include({_initOverlay:function(f,w,F,V){var se=F;return se instanceof f?(y(se,V),se._source=this):(se=w&&!V?w:new f(V,this),se.setContent(F)),se}});var Ip=vo.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(f){return f=arguments.length?f:this._source._map,!f.hasLayer(this)&&f._popup&&f._popup.options.autoClose&&f.removeLayer(f._popup),f._popup=this,vo.prototype.openOn.call(this,f)},onAdd:function(f){vo.prototype.onAdd.call(this,f),f.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Qc||this._source.on("preclick",cr))},onRemove:function(f){vo.prototype.onRemove.call(this,f),f.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Qc||this._source.off("preclick",cr))},getEvents:function(){var f=vo.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(f.preclick=this.close),this.options.keepInView&&(f.moveend=this._adjustPan),f},_initLayout:function(){var f="leaflet-popup",w=this._container=Is("div",f+" "+(this.options.className||"")+" leaflet-zoom-animated"),F=this._wrapper=Is("div",f+"-content-wrapper",w);if(this._contentNode=Is("div",f+"-content",F),hl(w),xi(this._contentNode),Es(w,"contextmenu",cr),this._tipContainer=Is("div",f+"-tip-container",w),this._tip=Is("div",f+"-tip",this._tipContainer),this.options.closeButton){var V=this._closeButton=Is("a",f+"-close-button",w);V.setAttribute("role","button"),V.setAttribute("aria-label","Close popup"),V.href="#close",V.innerHTML='<span aria-hidden="true">&#215;</span>',Es(V,"click",function(se){Wa(se),this.close()},this)}},_updateLayout:function(){var f=this._contentNode,w=f.style;w.width="",w.whiteSpace="nowrap";var F=f.offsetWidth;F=Math.min(F,this.options.maxWidth),F=Math.max(F,this.options.minWidth),w.width=F+1+"px",w.whiteSpace="",w.height="";var V=f.offsetHeight,se=this.options.maxHeight,me="leaflet-popup-scrolled";se&&V>se?(w.height=se+"px",Ts(f,me)):ka(f,me),this._containerWidth=this._container.offsetWidth},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center),F=this._getAnchor();Er(this._container,w.add(F))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var f=this._map,w=parseInt(cl(this._container,"marginBottom"),10)||0,F=this._container.offsetHeight+w,V=this._containerWidth,se=new Y(this._containerLeft,-F-this._containerBottom);se._add(Ol(this._container));var me=f.layerPointToContainerPoint(se),Ce=ne(this.options.autoPanPadding),qe=ne(this.options.autoPanPaddingTopLeft||Ce),Ye=ne(this.options.autoPanPaddingBottomRight||Ce),ut=f.getSize(),It=0,Ns=0;me.x+V+Ye.x>ut.x&&(It=me.x+V-ut.x+Ye.x),me.x-It-qe.x<0&&(It=me.x-qe.x),me.y+F+Ye.y>ut.y&&(Ns=me.y+F-ut.y+Ye.y),me.y-Ns-qe.y<0&&(Ns=me.y-qe.y),(It||Ns)&&(this.options.keepInView&&(this._autopanning=!0),f.fire("autopanstart").panBy([It,Ns]))}},_getAnchor:function(){return ne(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),tm=function(f,w){return new Ip(f,w)};wa.mergeOptions({closePopupOnClick:!0}),wa.include({openPopup:function(f,w,F){return this._initOverlay(Ip,f,w,F).openOn(this),this},closePopup:function(f){return f=arguments.length?f:this._popup,f&&f.close(),this}}),$l.include({bindPopup:function(f,w){return this._popup=this._initOverlay(Ip,this._popup,f,w),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(f){return this._popup&&(this instanceof dc||(this._popup._source=this),this._popup._prepareOpen(f||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(f){return this._popup&&this._popup.setContent(f),this},getPopup:function(){return this._popup},_openPopup:function(f){if(!(!this._popup||!this._map)){pi(f);var w=f.layer||f.target;if(this._popup._source===w&&!(w instanceof Qc)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(f.latlng);return}this._popup._source=w,this.openPopup(f.latlng)}},_movePopup:function(f){this._popup.setLatLng(f.latlng)},_onKeyPress:function(f){f.originalEvent.keyCode===13&&this._openPopup(f)}});var sm=vo.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(f){vo.prototype.onAdd.call(this,f),this.setOpacity(this.options.opacity),f.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(f){vo.prototype.onRemove.call(this,f),f.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var f=vo.prototype.getEvents.call(this);return this.options.permanent||(f.preclick=this.close),f},_initLayout:function(){var f="leaflet-tooltip",w=f+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Is("div",w),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+d(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(f){var w,F,V=this._map,se=this._container,me=V.latLngToContainerPoint(V.getCenter()),Ce=V.layerPointToContainerPoint(f),qe=this.options.direction,Ye=se.offsetWidth,ut=se.offsetHeight,It=ne(this.options.offset),Ns=this._getAnchor();qe==="top"?(w=Ye/2,F=ut):qe==="bottom"?(w=Ye/2,F=0):qe==="center"?(w=Ye/2,F=ut/2):qe==="right"?(w=0,F=ut/2):qe==="left"?(w=Ye,F=ut/2):Ce.x<me.x?(qe="right",w=0,F=ut/2):(qe="left",w=Ye+(It.x+Ns.x)*2,F=ut/2),f=f.subtract(ne(w,F,!0)).add(It).add(Ns),ka(se,"leaflet-tooltip-right"),ka(se,"leaflet-tooltip-left"),ka(se,"leaflet-tooltip-top"),ka(se,"leaflet-tooltip-bottom"),Ts(se,"leaflet-tooltip-"+qe),Er(se,f)},_updatePosition:function(){var f=this._map.latLngToLayerPoint(this._latlng);this._setPosition(f)},setOpacity:function(f){this.options.opacity=f,this._container&&Fn(this._container,f)},_animateZoom:function(f){var w=this._map._latLngToNewLayerPoint(this._latlng,f.zoom,f.center);this._setPosition(w)},_getAnchor:function(){return ne(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Wh=function(f,w){return new sm(f,w)};wa.include({openTooltip:function(f,w,F){return this._initOverlay(sm,f,w,F).openOn(this),this},closeTooltip:function(f){return f.close(),this}}),$l.include({bindTooltip:function(f,w){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(sm,this._tooltip,f,w),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(f){if(!(!f&&this._tooltipHandlersAdded)){var w=f?"off":"on",F={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?F.add=this._openTooltip:(F.mouseover=this._openTooltip,F.mouseout=this.closeTooltip,F.click=this._openTooltip,this._map?this._addFocusListeners():F.add=this._addFocusListeners),this._tooltip.options.sticky&&(F.mousemove=this._moveTooltip),this[w](F),this._tooltipHandlersAdded=!f}},openTooltip:function(f){return this._tooltip&&(this instanceof dc||(this._tooltip._source=this),this._tooltip._prepareOpen(f)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(f){return this._tooltip&&this._tooltip.setContent(f),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(f){var w=typeof f.getElement=="function"&&f.getElement();w&&(Es(w,"focus",function(){this._tooltip._source=f,this.openTooltip()},this),Es(w,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(f){var w=typeof f.getElement=="function"&&f.getElement();w&&w.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(f){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var w=this;this._map.once("moveend",function(){w._openOnceFlag=!1,w._openTooltip(f)});return}this._tooltip._source=f.layer||f.target,this.openTooltip(this._tooltip.options.sticky?f.latlng:void 0)}},_moveTooltip:function(f){var w=f.latlng,F,V;this._tooltip.options.sticky&&f.originalEvent&&(F=this._map.mouseEventToContainerPoint(f.originalEvent),V=this._map.containerPointToLayerPoint(F),w=this._map.layerPointToLatLng(V)),this._tooltip.setLatLng(w)}});var Lp=qd.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(f){var w=f&&f.tagName==="DIV"?f:document.createElement("div"),F=this.options;if(F.html instanceof Element?(Rl(w),w.appendChild(F.html)):w.innerHTML=F.html!==!1?F.html:"",F.bgPos){var V=ne(F.bgPos);w.style.backgroundPosition=-V.x+"px "+-V.y+"px"}return this._setIconStyles(w,"icon"),w},createShadow:function(){return null}});function Qb(f){return new Lp(f)}qd.Default=Qu;var ed=$l.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ts.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(f){y(this,f)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(f){f._addZoomLimit(this)},onRemove:function(f){this._removeAllTiles(),or(this._container),f._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(dl(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ul(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(f){return this.options.opacity=f,this._updateOpacity(),this},setZIndex:function(f){return this.options.zIndex=f,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var f=this._clampZoom(this._map.getZoom());f!==this._tileZoom&&(this._tileZoom=f,this._updateLevels()),this._update()}return this},getEvents:function(){var f={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=c(this._onMoveEnd,this.options.updateInterval,this)),f.move=this._onMove),this._zoomAnimated&&(f.zoomanim=this._animateZoom),f},createTile:function(){return document.createElement("div")},getTileSize:function(){var f=this.options.tileSize;return f instanceof Y?f:new Y(f,f)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(f){for(var w=this.getPane().children,F=-f(-1/0,1/0),V=0,se=w.length,me;V<se;V++)me=w[V].style.zIndex,w[V]!==this._container&&me&&(F=f(F,+me));isFinite(F)&&(this.options.zIndex=F+f(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ts.ielt9){Fn(this._container,this.options.opacity);var f=+new Date,w=!1,F=!1;for(var V in this._tiles){var se=this._tiles[V];if(!(!se.current||!se.loaded)){var me=Math.min(1,(f-se.loaded)/200);Fn(se.el,me),me<1?w=!0:(se.active?F=!0:this._onOpaqueTile(se),se.active=!0)}}F&&!this._noPrune&&this._pruneTiles(),w&&(B(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this))}},_onOpaqueTile:h,_initContainer:function(){this._container||(this._container=Is("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var f=this._tileZoom,w=this.options.maxZoom;if(f!==void 0){for(var F in this._levels)F=Number(F),this._levels[F].el.children.length||F===f?(this._levels[F].el.style.zIndex=w-Math.abs(f-F),this._onUpdateLevel(F)):(or(this._levels[F].el),this._removeTilesAtZoom(F),this._onRemoveLevel(F),delete this._levels[F]);var V=this._levels[f],se=this._map;return V||(V=this._levels[f]={},V.el=Is("div","leaflet-tile-container leaflet-zoom-animated",this._container),V.el.style.zIndex=w,V.origin=se.project(se.unproject(se.getPixelOrigin()),f).round(),V.zoom=f,this._setZoomTransform(V,se.getCenter(),se.getZoom()),h(V.el.offsetWidth),this._onCreateLevel(V)),this._level=V,V}},_onUpdateLevel:h,_onRemoveLevel:h,_onCreateLevel:h,_pruneTiles:function(){if(this._map){var f,w,F=this._map.getZoom();if(F>this.options.maxZoom||F<this.options.minZoom){this._removeAllTiles();return}for(f in this._tiles)w=this._tiles[f],w.retain=w.current;for(f in this._tiles)if(w=this._tiles[f],w.current&&!w.active){var V=w.coords;this._retainParent(V.x,V.y,V.z,V.z-5)||this._retainChildren(V.x,V.y,V.z,V.z+2)}for(f in this._tiles)this._tiles[f].retain||this._removeTile(f)}},_removeTilesAtZoom:function(f){for(var w in this._tiles)this._tiles[w].coords.z===f&&this._removeTile(w)},_removeAllTiles:function(){for(var f in this._tiles)this._removeTile(f)},_invalidateAll:function(){for(var f in this._levels)or(this._levels[f].el),this._onRemoveLevel(Number(f)),delete this._levels[f];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(f,w,F,V){var se=Math.floor(f/2),me=Math.floor(w/2),Ce=F-1,qe=new Y(+se,+me);qe.z=+Ce;var Ye=this._tileCoordsToKey(qe),ut=this._tiles[Ye];return ut&&ut.active?(ut.retain=!0,!0):(ut&&ut.loaded&&(ut.retain=!0),Ce>V?this._retainParent(se,me,Ce,V):!1)},_retainChildren:function(f,w,F,V){for(var se=2*f;se<2*f+2;se++)for(var me=2*w;me<2*w+2;me++){var Ce=new Y(se,me);Ce.z=F+1;var qe=this._tileCoordsToKey(Ce),Ye=this._tiles[qe];if(Ye&&Ye.active){Ye.retain=!0;continue}else Ye&&Ye.loaded&&(Ye.retain=!0);F+1<V&&this._retainChildren(se,me,F+1,V)}},_resetView:function(f){var w=f&&(f.pinch||f.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),w,w)},_animateZoom:function(f){this._setView(f.center,f.zoom,!0,f.noUpdate)},_clampZoom:function(f){var w=this.options;return w.minNativeZoom!==void 0&&f<w.minNativeZoom?w.minNativeZoom:w.maxNativeZoom!==void 0&&w.maxNativeZoom<f?w.maxNativeZoom:f},_setView:function(f,w,F,V){var se=Math.round(w);this.options.maxZoom!==void 0&&se>this.options.maxZoom||this.options.minZoom!==void 0&&se<this.options.minZoom?se=void 0:se=this._clampZoom(se);var me=this.options.updateWhenZooming&&se!==this._tileZoom;(!V||me)&&(this._tileZoom=se,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),se!==void 0&&this._update(f),F||this._pruneTiles(),this._noPrune=!!F),this._setZoomTransforms(f,w)},_setZoomTransforms:function(f,w){for(var F in this._levels)this._setZoomTransform(this._levels[F],f,w)},_setZoomTransform:function(f,w,F){var V=this._map.getZoomScale(F,f.zoom),se=f.origin.multiplyBy(V).subtract(this._map._getNewPixelOrigin(w,F)).round();ts.any3d?Zi(f.el,se,V):Er(f.el,se)},_resetGrid:function(){var f=this._map,w=f.options.crs,F=this._tileSize=this.getTileSize(),V=this._tileZoom,se=this._map.getPixelWorldBounds(this._tileZoom);se&&(this._globalTileRange=this._pxBoundsToTileRange(se)),this._wrapX=w.wrapLng&&!this.options.noWrap&&[Math.floor(f.project([0,w.wrapLng[0]],V).x/F.x),Math.ceil(f.project([0,w.wrapLng[1]],V).x/F.y)],this._wrapY=w.wrapLat&&!this.options.noWrap&&[Math.floor(f.project([w.wrapLat[0],0],V).y/F.x),Math.ceil(f.project([w.wrapLat[1],0],V).y/F.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(f){var w=this._map,F=w._animatingZoom?Math.max(w._animateToZoom,w.getZoom()):w.getZoom(),V=w.getZoomScale(F,this._tileZoom),se=w.project(f,this._tileZoom).floor(),me=w.getSize().divideBy(V*2);return new ae(se.subtract(me),se.add(me))},_update:function(f){var w=this._map;if(w){var F=this._clampZoom(w.getZoom());if(f===void 0&&(f=w.getCenter()),this._tileZoom!==void 0){var V=this._getTiledPixelBounds(f),se=this._pxBoundsToTileRange(V),me=se.getCenter(),Ce=[],qe=this.options.keepBuffer,Ye=new ae(se.getBottomLeft().subtract([qe,-qe]),se.getTopRight().add([qe,-qe]));if(!(isFinite(se.min.x)&&isFinite(se.min.y)&&isFinite(se.max.x)&&isFinite(se.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var ut in this._tiles){var It=this._tiles[ut].coords;(It.z!==this._tileZoom||!Ye.contains(new Y(It.x,It.y)))&&(this._tiles[ut].current=!1)}if(Math.abs(F-this._tileZoom)>1){this._setView(f,F);return}for(var Ns=se.min.y;Ns<=se.max.y;Ns++)for(var ea=se.min.x;ea<=se.max.x;ea++){var On=new Y(ea,Ns);if(On.z=this._tileZoom,!!this._isValidTile(On)){var yn=this._tiles[this._tileCoordsToKey(On)];yn?yn.current=!0:Ce.push(On)}}if(Ce.sort(function(ki,lm){return ki.distanceTo(me)-lm.distanceTo(me)}),Ce.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var el=document.createDocumentFragment();for(ea=0;ea<Ce.length;ea++)this._addTile(Ce[ea],el);this._level.el.appendChild(el)}}}},_isValidTile:function(f){var w=this._map.options.crs;if(!w.infinite){var F=this._globalTileRange;if(!w.wrapLng&&(f.x<F.min.x||f.x>F.max.x)||!w.wrapLat&&(f.y<F.min.y||f.y>F.max.y))return!1}if(!this.options.bounds)return!0;var V=this._tileCoordsToBounds(f);return ye(this.options.bounds).overlaps(V)},_keyToBounds:function(f){return this._tileCoordsToBounds(this._keyToTileCoords(f))},_tileCoordsToNwSe:function(f){var w=this._map,F=this.getTileSize(),V=f.scaleBy(F),se=V.add(F),me=w.unproject(V,f.z),Ce=w.unproject(se,f.z);return[me,Ce]},_tileCoordsToBounds:function(f){var w=this._tileCoordsToNwSe(f),F=new xe(w[0],w[1]);return this.options.noWrap||(F=this._map.wrapLatLngBounds(F)),F},_tileCoordsToKey:function(f){return f.x+":"+f.y+":"+f.z},_keyToTileCoords:function(f){var w=f.split(":"),F=new Y(+w[0],+w[1]);return F.z=+w[2],F},_removeTile:function(f){var w=this._tiles[f];w&&(or(w.el),delete this._tiles[f],this.fire("tileunload",{tile:w.el,coords:this._keyToTileCoords(f)}))},_initTile:function(f){Ts(f,"leaflet-tile");var w=this.getTileSize();f.style.width=w.x+"px",f.style.height=w.y+"px",f.onselectstart=h,f.onmousemove=h,ts.ielt9&&this.options.opacity<1&&Fn(f,this.options.opacity)},_addTile:function(f,w){var F=this._getTilePos(f),V=this._tileCoordsToKey(f),se=this.createTile(this._wrapCoords(f),l(this._tileReady,this,f));this._initTile(se),this.createTile.length<2&&T(l(this._tileReady,this,f,null,se)),Er(se,F),this._tiles[V]={el:se,coords:f,current:!0},w.appendChild(se),this.fire("tileloadstart",{tile:se,coords:f})},_tileReady:function(f,w,F){w&&this.fire("tileerror",{error:w,tile:F,coords:f});var V=this._tileCoordsToKey(f);F=this._tiles[V],F&&(F.loaded=+new Date,this._map._fadeAnimated?(Fn(F.el,0),B(this._fadeFrame),this._fadeFrame=T(this._updateOpacity,this)):(F.active=!0,this._pruneTiles()),w||(Ts(F.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:F.el,coords:f})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ts.ielt9||!this._map._fadeAnimated?T(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(f){return f.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(f){var w=new Y(this._wrapX?u(f.x,this._wrapX):f.x,this._wrapY?u(f.y,this._wrapY):f.y);return w.z=f.z,w},_pxBoundsToTileRange:function(f){var w=this.getTileSize();return new ae(f.min.unscaleBy(w).floor(),f.max.unscaleBy(w).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var f in this._tiles)if(!this._tiles[f].loaded)return!1;return!0}});function am(f){return new ed(f)}var td=ed.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(f,w){this._url=f,w=y(this,w),w.detectRetina&&ts.retina&&w.maxZoom>0?(w.tileSize=Math.floor(w.tileSize/2),w.zoomReverse?(w.zoomOffset--,w.minZoom=Math.min(w.maxZoom,w.minZoom+1)):(w.zoomOffset++,w.maxZoom=Math.max(w.minZoom,w.maxZoom-1)),w.minZoom=Math.max(0,w.minZoom)):w.zoomReverse?w.minZoom=Math.min(w.maxZoom,w.minZoom):w.maxZoom=Math.max(w.minZoom,w.maxZoom),typeof w.subdomains=="string"&&(w.subdomains=w.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(f,w){return this._url===f&&w===void 0&&(w=!0),this._url=f,w||this.redraw(),this},createTile:function(f,w){var F=document.createElement("img");return Es(F,"load",l(this._tileOnLoad,this,w,F)),Es(F,"error",l(this._tileOnError,this,w,F)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(F.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(F.referrerPolicy=this.options.referrerPolicy),F.alt="",F.src=this.getTileUrl(f),F},getTileUrl:function(f){var w={r:ts.retina?"@2x":"",s:this._getSubdomain(f),x:f.x,y:f.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var F=this._globalTileRange.max.y-f.y;this.options.tms&&(w.y=F),w["-y"]=F}return C(this._url,n(w,this.options))},_tileOnLoad:function(f,w){ts.ielt9?setTimeout(l(f,this,null,w),0):f(null,w)},_tileOnError:function(f,w,F){var V=this.options.errorTileUrl;V&&w.getAttribute("src")!==V&&(w.src=V),f(F,w)},_onTileRemove:function(f){f.tile.onload=null},_getZoomForUrl:function(){var f=this._tileZoom,w=this.options.maxZoom,F=this.options.zoomReverse,V=this.options.zoomOffset;return F&&(f=w-f),f+V},_getSubdomain:function(f){var w=Math.abs(f.x+f.y)%this.options.subdomains.length;return this.options.subdomains[w]},_abortLoading:function(){var f,w;for(f in this._tiles)if(this._tiles[f].coords.z!==this._tileZoom&&(w=this._tiles[f].el,w.onload=h,w.onerror=h,!w.complete)){w.src=k;var F=this._tiles[f].coords;or(w),delete this._tiles[f],this.fire("tileabort",{tile:w,coords:F})}},_removeTile:function(f){var w=this._tiles[f];if(w)return w.el.setAttribute("src",k),ed.prototype._removeTile.call(this,f)},_tileReady:function(f,w,F){if(!(!this._map||F&&F.getAttribute("src")===k))return ed.prototype._tileReady.call(this,f,w,F)}});function Pv(f,w){return new td(f,w)}var Hh=td.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(f,w){this._url=f;var F=n({},this.defaultWmsParams);for(var V in w)V in this.options||(F[V]=w[V]);w=y(this,w);var se=w.detectRetina&&ts.retina?2:1,me=this.getTileSize();F.width=me.x*se,F.height=me.y*se,this.wmsParams=F},onAdd:function(f){this._crs=this.options.crs||f.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var w=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[w]=this._crs.code,td.prototype.onAdd.call(this,f)},getTileUrl:function(f){var w=this._tileCoordsToNwSe(f),F=this._crs,V=re(F.project(w[0]),F.project(w[1])),se=V.min,me=V.max,Ce=(this._wmsVersion>=1.3&&this._crs===Wb?[se.y,se.x,me.y,me.x]:[se.x,se.y,me.x,me.y]).join(","),qe=td.prototype.getTileUrl.call(this,f);return qe+b(this.wmsParams,qe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Ce},setParams:function(f,w){return n(this.wmsParams,f),w||this.redraw(),this}});function Xb(f,w){return new Hh(f,w)}td.WMS=Hh,Pv.wms=Xb;var jo=$l.extend({options:{padding:.1},initialize:function(f){y(this,f),d(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Ts(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var f={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(f.zoomanim=this._onAnimZoom),f},_onAnimZoom:function(f){this._updateTransform(f.center,f.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(f,w){var F=this._map.getZoomScale(w,this._zoom),V=this._map.getSize().multiplyBy(.5+this.options.padding),se=this._map.project(this._center,w),me=V.multiplyBy(-F).add(se).subtract(this._map._getNewPixelOrigin(f,w));ts.any3d?Zi(this._container,me,F):Er(this._container,me)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var f in this._layers)this._layers[f]._reset()},_onZoomEnd:function(){for(var f in this._layers)this._layers[f]._project()},_updatePaths:function(){for(var f in this._layers)this._layers[f]._update()},_update:function(){var f=this.options.padding,w=this._map.getSize(),F=this._map.containerPointToLayerPoint(w.multiplyBy(-f)).round();this._bounds=new ae(F,F.add(w.multiplyBy(1+f*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Dv=jo.extend({options:{tolerance:0},getEvents:function(){var f=jo.prototype.getEvents.call(this);return f.viewprereset=this._onViewPreReset,f},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){jo.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var f=this._container=document.createElement("canvas");Es(f,"mousemove",this._onMouseMove,this),Es(f,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Es(f,"mouseout",this._handleMouseOut,this),f._leaflet_disable_events=!0,this._ctx=f.getContext("2d")},_destroyContainer:function(){B(this._redrawRequest),delete this._ctx,or(this._container),ve(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var f;this._redrawBounds=null;for(var w in this._layers)f=this._layers[w],f._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){jo.prototype._update.call(this);var f=this._bounds,w=this._container,F=f.getSize(),V=ts.retina?2:1;Er(w,f.min),w.width=V*F.x,w.height=V*F.y,w.style.width=F.x+"px",w.style.height=F.y+"px",ts.retina&&this._ctx.scale(2,2),this._ctx.translate(-f.min.x,-f.min.y),this.fire("update")}},_reset:function(){jo.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(f){this._updateDashArray(f),this._layers[d(f)]=f;var w=f._order={layer:f,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=w),this._drawLast=w,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(f){this._requestRedraw(f)},_removePath:function(f){var w=f._order,F=w.next,V=w.prev;F?F.prev=V:this._drawLast=V,V?V.next=F:this._drawFirst=F,delete f._order,delete this._layers[d(f)],this._requestRedraw(f)},_updatePath:function(f){this._extendRedrawBounds(f),f._project(),f._update(),this._requestRedraw(f)},_updateStyle:function(f){this._updateDashArray(f),this._requestRedraw(f)},_updateDashArray:function(f){if(typeof f.options.dashArray=="string"){var w=f.options.dashArray.split(/[, ]+/),F=[],V,se;for(se=0;se<w.length;se++){if(V=Number(w[se]),isNaN(V))return;F.push(V)}f.options._dashArray=F}else f.options._dashArray=f.options.dashArray},_requestRedraw:function(f){this._map&&(this._extendRedrawBounds(f),this._redrawRequest=this._redrawRequest||T(this._redraw,this))},_extendRedrawBounds:function(f){if(f._pxBounds){var w=(f.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ae,this._redrawBounds.extend(f._pxBounds.min.subtract([w,w])),this._redrawBounds.extend(f._pxBounds.max.add([w,w]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var f=this._redrawBounds;if(f){var w=f.getSize();this._ctx.clearRect(f.min.x,f.min.y,w.x,w.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var f,w=this._redrawBounds;if(this._ctx.save(),w){var F=w.getSize();this._ctx.beginPath(),this._ctx.rect(w.min.x,w.min.y,F.x,F.y),this._ctx.clip()}this._drawing=!0;for(var V=this._drawFirst;V;V=V.next)f=V.layer,(!w||f._pxBounds&&f._pxBounds.intersects(w))&&f._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(f,w){if(this._drawing){var F,V,se,me,Ce=f._parts,qe=Ce.length,Ye=this._ctx;if(qe){for(Ye.beginPath(),F=0;F<qe;F++){for(V=0,se=Ce[F].length;V<se;V++)me=Ce[F][V],Ye[V?"lineTo":"moveTo"](me.x,me.y);w&&Ye.closePath()}this._fillStroke(Ye,f)}}},_updateCircle:function(f){if(!(!this._drawing||f._empty())){var w=f._point,F=this._ctx,V=Math.max(Math.round(f._radius),1),se=(Math.max(Math.round(f._radiusY),1)||V)/V;se!==1&&(F.save(),F.scale(1,se)),F.beginPath(),F.arc(w.x,w.y/se,V,0,Math.PI*2,!1),se!==1&&F.restore(),this._fillStroke(F,f)}},_fillStroke:function(f,w){var F=w.options;F.fill&&(f.globalAlpha=F.fillOpacity,f.fillStyle=F.fillColor||F.color,f.fill(F.fillRule||"evenodd")),F.stroke&&F.weight!==0&&(f.setLineDash&&f.setLineDash(w.options&&w.options._dashArray||[]),f.globalAlpha=F.opacity,f.lineWidth=F.weight,f.strokeStyle=F.color,f.lineCap=F.lineCap,f.lineJoin=F.lineJoin,f.stroke())},_onClick:function(f){for(var w=this._map.mouseEventToLayerPoint(f),F,V,se=this._drawFirst;se;se=se.next)F=se.layer,F.options.interactive&&F._containsPoint(w)&&(!(f.type==="click"||f.type==="preclick")||!this._map._draggableMoved(F))&&(V=F);this._fireEvent(V?[V]:!1,f)},_onMouseMove:function(f){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var w=this._map.mouseEventToLayerPoint(f);this._handleMouseHover(f,w)}},_handleMouseOut:function(f){var w=this._hoveredLayer;w&&(ka(this._container,"leaflet-interactive"),this._fireEvent([w],f,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(f,w){if(!this._mouseHoverThrottled){for(var F,V,se=this._drawFirst;se;se=se.next)F=se.layer,F.options.interactive&&F._containsPoint(w)&&(V=F);V!==this._hoveredLayer&&(this._handleMouseOut(f),V&&(Ts(this._container,"leaflet-interactive"),this._fireEvent([V],f,"mouseover"),this._hoveredLayer=V)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,f),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(f,w,F){this._map._fireDOMEvent(w,F||w.type,f)},_bringToFront:function(f){var w=f._order;if(w){var F=w.next,V=w.prev;if(F)F.prev=V;else return;V?V.next=F:F&&(this._drawFirst=F),w.prev=this._drawLast,this._drawLast.next=w,w.next=null,this._drawLast=w,this._requestRedraw(f)}},_bringToBack:function(f){var w=f._order;if(w){var F=w.next,V=w.prev;if(V)V.next=F;else return;F?F.prev=V:V&&(this._drawLast=V),w.prev=null,w.next=this._drawFirst,this._drawFirst.prev=w,this._drawFirst=w,this._requestRedraw(f)}}});function Tv(f){return ts.canvas?new Dv(f):null}var rm=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(f){return document.createElement("<lvml:"+f+' class="lvml">')}}catch{}return function(f){return document.createElement("<"+f+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),ey={_initContainer:function(){this._container=Is("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(jo.prototype._update.call(this),this.fire("update"))},_initPath:function(f){var w=f._container=rm("shape");Ts(w,"leaflet-vml-shape "+(this.options.className||"")),w.coordsize="1 1",f._path=rm("path"),w.appendChild(f._path),this._updateStyle(f),this._layers[d(f)]=f},_addPath:function(f){var w=f._container;this._container.appendChild(w),f.options.interactive&&f.addInteractiveTarget(w)},_removePath:function(f){var w=f._container;or(w),f.removeInteractiveTarget(w),delete this._layers[d(f)]},_updateStyle:function(f){var w=f._stroke,F=f._fill,V=f.options,se=f._container;se.stroked=!!V.stroke,se.filled=!!V.fill,V.stroke?(w||(w=f._stroke=rm("stroke")),se.appendChild(w),w.weight=V.weight+"px",w.color=V.color,w.opacity=V.opacity,V.dashArray?w.dashStyle=_(V.dashArray)?V.dashArray.join(" "):V.dashArray.replace(/( *, *)/g," "):w.dashStyle="",w.endcap=V.lineCap.replace("butt","flat"),w.joinstyle=V.lineJoin):w&&(se.removeChild(w),f._stroke=null),V.fill?(F||(F=f._fill=rm("fill")),se.appendChild(F),F.color=V.fillColor||V.color,F.opacity=V.fillOpacity):F&&(se.removeChild(F),f._fill=null)},_updateCircle:function(f){var w=f._point.round(),F=Math.round(f._radius),V=Math.round(f._radiusY||F);this._setPath(f,f._empty()?"M0 0":"AL "+w.x+","+w.y+" "+F+","+V+" 0,"+65535*360)},_setPath:function(f,w){f._path.v=w},_bringToFront:function(f){dl(f._container)},_bringToBack:function(f){ul(f._container)}},zl=ts.vml?rm:at,Vd=jo.extend({_initContainer:function(){this._container=zl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=zl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){or(this._container),ve(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){jo.prototype._update.call(this);var f=this._bounds,w=f.getSize(),F=this._container;(!this._svgSize||!this._svgSize.equals(w))&&(this._svgSize=w,F.setAttribute("width",w.x),F.setAttribute("height",w.y)),Er(F,f.min),F.setAttribute("viewBox",[f.min.x,f.min.y,w.x,w.y].join(" ")),this.fire("update")}},_initPath:function(f){var w=f._path=zl("path");f.options.className&&Ts(w,f.options.className),f.options.interactive&&Ts(w,"leaflet-interactive"),this._updateStyle(f),this._layers[d(f)]=f},_addPath:function(f){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(f._path),f.addInteractiveTarget(f._path)},_removePath:function(f){or(f._path),f.removeInteractiveTarget(f._path),delete this._layers[d(f)]},_updatePath:function(f){f._project(),f._update()},_updateStyle:function(f){var w=f._path,F=f.options;w&&(F.stroke?(w.setAttribute("stroke",F.color),w.setAttribute("stroke-opacity",F.opacity),w.setAttribute("stroke-width",F.weight),w.setAttribute("stroke-linecap",F.lineCap),w.setAttribute("stroke-linejoin",F.lineJoin),F.dashArray?w.setAttribute("stroke-dasharray",F.dashArray):w.removeAttribute("stroke-dasharray"),F.dashOffset?w.setAttribute("stroke-dashoffset",F.dashOffset):w.removeAttribute("stroke-dashoffset")):w.setAttribute("stroke","none"),F.fill?(w.setAttribute("fill",F.fillColor||F.color),w.setAttribute("fill-opacity",F.fillOpacity),w.setAttribute("fill-rule",F.fillRule||"evenodd")):w.setAttribute("fill","none"))},_updatePoly:function(f,w){this._setPath(f,nt(f._parts,w))},_updateCircle:function(f){var w=f._point,F=Math.max(Math.round(f._radius),1),V=Math.max(Math.round(f._radiusY),1)||F,se="a"+F+","+V+" 0 1,0 ",me=f._empty()?"M0 0":"M"+(w.x-F)+","+w.y+se+F*2+",0 "+se+-F*2+",0 ";this._setPath(f,me)},_setPath:function(f,w){f._path.setAttribute("d",w)},_bringToFront:function(f){dl(f._path)},_bringToBack:function(f){ul(f._path)}});ts.vml&&Vd.include(ey);function Mp(f){return ts.svg||ts.vml?new Vd(f):null}wa.include({getRenderer:function(f){var w=f.options.renderer||this._getPaneRenderer(f.options.pane)||this.options.renderer||this._renderer;return w||(w=this._renderer=this._createRenderer()),this.hasLayer(w)||this.addLayer(w),w},_getPaneRenderer:function(f){if(f==="overlayPane"||f===void 0)return!1;var w=this._paneRenderers[f];return w===void 0&&(w=this._createRenderer({pane:f}),this._paneRenderers[f]=w),w},_createRenderer:function(f){return this.options.preferCanvas&&Tv(f)||Mp(f)}});var ty=mc.extend({initialize:function(f,w){mc.prototype.initialize.call(this,this._boundsToLatLngs(f),w)},setBounds:function(f){return this.setLatLngs(this._boundsToLatLngs(f))},_boundsToLatLngs:function(f){return f=ye(f),[f.getSouthWest(),f.getNorthWest(),f.getNorthEast(),f.getSouthEast()]}});function tS(f,w){return new ty(f,w)}Vd.create=zl,Vd.pointsToPath=nt,go.geometryToLayer=Xu,go.coordsToLatLng=Tp,go.coordsToLatLngs=Vh,go.latLngToCoords=Fp,go.latLngsToCoords=Rp,go.getFeature=em,go.asFeature=Op,wa.mergeOptions({boxZoom:!0});var nm=xl.extend({initialize:function(f){this._map=f,this._container=f._container,this._pane=f._panes.overlayPane,this._resetStateTimeout=0,f.on("unload",this._destroy,this)},addHooks:function(){Es(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ve(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){or(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(f){if(!f.shiftKey||f.which!==1&&f.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ra(),Gu(),this._startPoint=this._map.mouseEventToContainerPoint(f),Es(document,{contextmenu:pi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(f){this._moved||(this._moved=!0,this._box=Is("div","leaflet-zoom-box",this._container),Ts(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(f);var w=new ae(this._point,this._startPoint),F=w.getSize();Er(this._box,w.min),this._box.style.width=F.x+"px",this._box.style.height=F.y+"px"},_finish:function(){this._moved&&(or(this._box),ka(this._container,"leaflet-crosshair")),Gc(),Ku(),ve(document,{contextmenu:pi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(f){if(!(f.which!==1&&f.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var w=new xe(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(w).fire("boxzoomend",{boxZoomBounds:w})}},_onKeyDown:function(f){f.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});wa.addInitHook("addHandler","boxZoom",nm),wa.mergeOptions({doubleClickZoom:!0});var sy=xl.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(f){var w=this._map,F=w.getZoom(),V=w.options.zoomDelta,se=f.originalEvent.shiftKey?F-V:F+V;w.options.doubleClickZoom==="center"?w.setZoom(se):w.setZoomAround(f.containerPoint,se)}});wa.addInitHook("addHandler","doubleClickZoom",sy),wa.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Fv=xl.extend({addHooks:function(){if(!this._draggable){var f=this._map;this._draggable=new Bl(f._mapPane,f._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),f.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),f.on("zoomend",this._onZoomEnd,this),f.whenReady(this._onZoomEnd,this))}Ts(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){ka(this._map._container,"leaflet-grab"),ka(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var f=this._map;if(f._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var w=ye(this._map.options.maxBounds);this._offsetLimit=re(this._map.latLngToContainerPoint(w.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(w.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;f.fire("movestart").fire("dragstart"),f.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(f){if(this._map.options.inertia){var w=this._lastTime=+new Date,F=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(F),this._times.push(w),this._prunePositions(w)}this._map.fire("move",f).fire("drag",f)},_prunePositions:function(f){for(;this._positions.length>1&&f-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var f=this._map.getSize().divideBy(2),w=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=w.subtract(f).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(f,w){return f-(f-w)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var f=this._draggable._newPos.subtract(this._draggable._startPos),w=this._offsetLimit;f.x<w.min.x&&(f.x=this._viscousLimit(f.x,w.min.x)),f.y<w.min.y&&(f.y=this._viscousLimit(f.y,w.min.y)),f.x>w.max.x&&(f.x=this._viscousLimit(f.x,w.max.x)),f.y>w.max.y&&(f.y=this._viscousLimit(f.y,w.max.y)),this._draggable._newPos=this._draggable._startPos.add(f)}},_onPreDragWrap:function(){var f=this._worldWidth,w=Math.round(f/2),F=this._initialWorldOffset,V=this._draggable._newPos.x,se=(V-w+F)%f+w-F,me=(V+w+F)%f-w-F,Ce=Math.abs(se+F)<Math.abs(me+F)?se:me;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Ce},_onDragEnd:function(f){var w=this._map,F=w.options,V=!F.inertia||f.noInertia||this._times.length<2;if(w.fire("dragend",f),V)w.fire("moveend");else{this._prunePositions(+new Date);var se=this._lastPos.subtract(this._positions[0]),me=(this._lastTime-this._times[0])/1e3,Ce=F.easeLinearity,qe=se.multiplyBy(Ce/me),Ye=qe.distanceTo([0,0]),ut=Math.min(F.inertiaMaxSpeed,Ye),It=qe.multiplyBy(ut/Ye),Ns=ut/(F.inertiaDeceleration*Ce),ea=It.multiplyBy(-Ns/2).round();!ea.x&&!ea.y?w.fire("moveend"):(ea=w._limitOffset(ea,w.options.maxBounds),T(function(){w.panBy(ea,{duration:Ns,easeLinearity:Ce,noMoveStart:!0,animate:!0})}))}}});wa.addInitHook("addHandler","dragging",Fv),wa.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Rv=xl.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(f){this._map=f,this._setPanDelta(f.options.keyboardPanDelta),this._setZoomDelta(f.options.zoomDelta)},addHooks:function(){var f=this._map._container;f.tabIndex<=0&&(f.tabIndex="0"),Es(f,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ve(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var f=document.body,w=document.documentElement,F=f.scrollTop||w.scrollTop,V=f.scrollLeft||w.scrollLeft;this._map._container.focus(),window.scrollTo(V,F)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(f){var w=this._panKeys={},F=this.keyCodes,V,se;for(V=0,se=F.left.length;V<se;V++)w[F.left[V]]=[-1*f,0];for(V=0,se=F.right.length;V<se;V++)w[F.right[V]]=[f,0];for(V=0,se=F.down.length;V<se;V++)w[F.down[V]]=[0,f];for(V=0,se=F.up.length;V<se;V++)w[F.up[V]]=[0,-1*f]},_setZoomDelta:function(f){var w=this._zoomKeys={},F=this.keyCodes,V,se;for(V=0,se=F.zoomIn.length;V<se;V++)w[F.zoomIn[V]]=f;for(V=0,se=F.zoomOut.length;V<se;V++)w[F.zoomOut[V]]=-f},_addHooks:function(){Es(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ve(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(f){if(!(f.altKey||f.ctrlKey||f.metaKey)){var w=f.keyCode,F=this._map,V;if(w in this._panKeys){if(!F._panAnim||!F._panAnim._inProgress)if(V=this._panKeys[w],f.shiftKey&&(V=ne(V).multiplyBy(3)),F.options.maxBounds&&(V=F._limitOffset(ne(V),F.options.maxBounds)),F.options.worldCopyJump){var se=F.wrapLatLng(F.unproject(F.project(F.getCenter()).add(V)));F.panTo(se)}else F.panBy(V)}else if(w in this._zoomKeys)F.setZoom(F.getZoom()+(f.shiftKey?3:1)*this._zoomKeys[w]);else if(w===27&&F._popup&&F._popup.options.closeOnEscapeKey)F.closePopup();else return;pi(f)}}});wa.addInitHook("addHandler","keyboard",Rv),wa.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var dr=xl.extend({addHooks:function(){Es(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ve(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(f){var w=Kc(f),F=this._map.options.wheelDebounceTime;this._delta+=w,this._lastMousePos=this._map.mouseEventToContainerPoint(f),this._startTime||(this._startTime=+new Date);var V=Math.max(F-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),V),pi(f)},_performZoom:function(){var f=this._map,w=f.getZoom(),F=this._map.options.zoomSnap||0;f._stop();var V=this._delta/(this._map.options.wheelPxPerZoomLevel*4),se=4*Math.log(2/(1+Math.exp(-Math.abs(V))))/Math.LN2,me=F?Math.ceil(se/F)*F:se,Ce=f._limitZoom(w+(this._delta>0?me:-me))-w;this._delta=0,this._startTime=null,Ce&&(f.options.scrollWheelZoom==="center"?f.setZoom(w+Ce):f.setZoomAround(this._lastMousePos,w+Ce))}});wa.addInitHook("addHandler","scrollWheelZoom",dr);var Ov=600;wa.mergeOptions({tapHold:ts.touchNative&&ts.safari&&ts.mobile,tapTolerance:15});var Gh=xl.extend({addHooks:function(){Es(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ve(this._map._container,"touchstart",this._onDown,this)},_onDown:function(f){if(clearTimeout(this._holdTimeout),f.touches.length===1){var w=f.touches[0];this._startPos=this._newPos=new Y(w.clientX,w.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Es(document,"touchend",Wa),Es(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",w))},this),Ov),Es(document,"touchend touchcancel contextmenu",this._cancel,this),Es(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function f(){ve(document,"touchend",Wa),ve(document,"touchend touchcancel",f)},_cancel:function(){clearTimeout(this._holdTimeout),ve(document,"touchend touchcancel contextmenu",this._cancel,this),ve(document,"touchmove",this._onMove,this)},_onMove:function(f){var w=f.touches[0];this._newPos=new Y(w.clientX,w.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(f,w){var F=new MouseEvent(f,{bubbles:!0,cancelable:!0,view:window,screenX:w.screenX,screenY:w.screenY,clientX:w.clientX,clientY:w.clientY});F._simulated=!0,w.target.dispatchEvent(F)}});wa.addInitHook("addHandler","tapHold",Gh),wa.mergeOptions({touchZoom:ts.touch,bounceAtZoomLimits:!0});var im=xl.extend({addHooks:function(){Ts(this._map._container,"leaflet-touch-zoom"),Es(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){ka(this._map._container,"leaflet-touch-zoom"),ve(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(f){var w=this._map;if(!(!f.touches||f.touches.length!==2||w._animatingZoom||this._zooming)){var F=w.mouseEventToContainerPoint(f.touches[0]),V=w.mouseEventToContainerPoint(f.touches[1]);this._centerPoint=w.getSize()._divideBy(2),this._startLatLng=w.containerPointToLatLng(this._centerPoint),w.options.touchZoom!=="center"&&(this._pinchStartLatLng=w.containerPointToLatLng(F.add(V)._divideBy(2))),this._startDist=F.distanceTo(V),this._startZoom=w.getZoom(),this._moved=!1,this._zooming=!0,w._stop(),Es(document,"touchmove",this._onTouchMove,this),Es(document,"touchend touchcancel",this._onTouchEnd,this),Wa(f)}},_onTouchMove:function(f){if(!(!f.touches||f.touches.length!==2||!this._zooming)){var w=this._map,F=w.mouseEventToContainerPoint(f.touches[0]),V=w.mouseEventToContainerPoint(f.touches[1]),se=F.distanceTo(V)/this._startDist;if(this._zoom=w.getScaleZoom(se,this._startZoom),!w.options.bounceAtZoomLimits&&(this._zoom<w.getMinZoom()&&se<1||this._zoom>w.getMaxZoom()&&se>1)&&(this._zoom=w._limitZoom(this._zoom)),w.options.touchZoom==="center"){if(this._center=this._startLatLng,se===1)return}else{var me=F._add(V)._divideBy(2)._subtract(this._centerPoint);if(se===1&&me.x===0&&me.y===0)return;this._center=w.unproject(w.project(this._pinchStartLatLng,this._zoom).subtract(me),this._zoom)}this._moved||(w._moveStart(!0,!1),this._moved=!0),B(this._animRequest);var Ce=l(w._move,w,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=T(Ce,this,!0),Wa(f)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,B(this._animRequest),ve(document,"touchmove",this._onTouchMove,this),ve(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});wa.addInitHook("addHandler","touchZoom",im),wa.BoxZoom=nm,wa.DoubleClickZoom=sy,wa.Drag=Fv,wa.Keyboard=Rv,wa.ScrollWheelZoom=dr,wa.TapHold=Gh,wa.TouchZoom=im,a.Bounds=ae,a.Browser=ts,a.CRS=ce,a.Canvas=Dv,a.Circle=Pp,a.CircleMarker=Ap,a.Class=q,a.Control=Qi,a.DivIcon=Lp,a.DivOverlay=vo,a.DomEvent=_p,a.DomUtil=Bd,a.Draggable=Bl,a.Evented=le,a.FeatureGroup=dc,a.GeoJSON=go,a.GridLayer=ed,a.Handler=xl,a.Icon=qd,a.ImageOverlay=Xc,a.LatLng=ke,a.LatLngBounds=xe,a.Layer=$l,a.LayerGroup=Jc,a.LineUtil=Vb,a.Map=wa,a.Marker=uc,a.Mixin=vv,a.Path=Qc,a.Point=Y,a.PolyUtil=VC,a.Polygon=mc,a.Polyline=Xi,a.Popup=Ip,a.PosAnimation=Cp,a.Projection=YC,a.Rectangle=ty,a.Renderer=jo,a.SVG=Vd,a.SVGOverlay=Ev,a.TileLayer=td,a.Tooltip=sm,a.Transformation=Ue,a.Util=G,a.VideoOverlay=kv,a.bind=l,a.bounds=re,a.canvas=Tv,a.circle=qh,a.circleMarker=Kb,a.control=Zc,a.divIcon=Qb,a.extend=n,a.featureGroup=Hb,a.geoJSON=Yb,a.geoJson=Ul,a.gridLayer=am,a.icon=Gb,a.imageOverlay=Zb,a.latLng=ze,a.latLngBounds=ye,a.layerGroup=zh,a.map=Yc,a.marker=QC,a.point=ne,a.polygon=eS,a.polyline=XC,a.popup=tm,a.rectangle=tS,a.setOptions=y,a.stamp=d,a.svg=Mp,a.svgOverlay=Av,a.tileLayer=Pv,a.tooltip=Wh,a.transformation=ge,a.version=r,a.videoOverlay=Jb;var ay=window.L;a.noConflict=function(){return window.L=ay,this},window.L=a}))})(U0,U0.exports)),U0.exports}var uv=VGe();const Ib=Vi(uv);function BC(t,s,a){return Object.freeze({instance:t,context:s,container:a})}function $C(t,s){return s==null?function(r,n){const i=m.useRef(void 0);return i.current||(i.current=t(r,n)),i}:function(r,n){const i=m.useRef(void 0);i.current||(i.current=t(r,n));const l=m.useRef(r),{instance:o}=i.current;return m.useEffect(function(){l.current!==r&&(s(o,r,l.current),l.current=r)},[o,r,s]),i}}function lae(t,s){m.useEffect(function(){return(s.layerContainer??s.map).addLayer(t.instance),function(){s.layerContainer?.removeLayer(t.instance),s.map.removeLayer(t.instance)}},[s,t])}function oae(t){return function(a){const r=LC(),n=t(MC(a,r),r);return rae(r.map,a.attribution),NR(n.current,a.eventHandlers),lae(n.current,r),n}}function WGe(t,s){const a=m.useRef(void 0);m.useEffect(function(){if(s.pathOptions!==a.current){const n=s.pathOptions??{};t.instance.setStyle(n),a.current=n}},[t,s])}function HGe(t){return function(a){const r=LC(),n=t(MC(a,r),r);return NR(n.current,a.eventHandlers),lae(n.current,r),WGe(n.current,a),n}}function GGe(t,s){const a=$C(t,s),r=oae(a);return iae(r)}function KGe(t,s){const a=$C(t),r=zGe(a,s);return $Ge(r)}function YGe(t,s){const a=$C(t,s),r=HGe(a);return iae(r)}function ZGe(t,s){const a=$C(t,s),r=oae(a);return UGe(r)}function JGe(t,s,a){const{opacity:r,zIndex:n}=s;r!=null&&r!==a.opacity&&t.setOpacity(r),n!=null&&n!==a.zIndex&&t.setZIndex(n)}function QGe(){return LC().map}function XGe({bounds:t,boundsOptions:s,center:a,children:r,className:n,id:i,placeholder:l,style:o,whenReady:d,zoom:c,...u},h){const[x]=m.useState({className:n,id:i,style:o}),[g,j]=m.useState(null),y=m.useRef(void 0);m.useImperativeHandle(h,()=>g?.map??null,[g]);const b=m.useCallback(C=>{if(C!==null&&!y.current){const _=new uv.Map(C,u);y.current=_,a!=null&&c!=null?_.setView(a,c):t!=null&&_.fitBounds(t,s),d!=null&&_.whenReady(d),j(BGe(_))}},[]);m.useEffect(()=>()=>{g?.map.remove()},[g]);const N=g?lt.createElement(yR,{value:g},r):l??null;return lt.createElement("div",{...x,ref:b},N)}const eKe=m.forwardRef(XGe),rz=GGe(function({position:s,...a},r){const n=new uv.Marker(s,a);return BC(n,nae(r,{overlayContainer:n}))},function(s,a,r){a.position!==r.position&&s.setLatLng(a.position),a.icon!=null&&a.icon!==r.icon&&s.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==r.zIndexOffset&&s.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==r.opacity&&s.setOpacity(a.opacity),s.dragging!=null&&a.draggable!==r.draggable&&(a.draggable===!0?s.dragging.enable():s.dragging.disable())}),tKe=YGe(function({positions:s,...a},r){const n=new uv.Polyline(s,a);return BC(n,nae(r,{overlayContainer:n}))},function(s,a,r){a.positions!==r.positions&&s.setLatLngs(a.positions)}),nz=KGe(function(s,a){const r=new uv.Popup(s,a.overlayContainer);return BC(r,a)},function(s,a,{position:r},n){m.useEffect(function(){const{instance:l}=s;function o(c){c.popup===l&&(l.update(),n(!0))}function d(c){c.popup===l&&n(!1)}return a.map.on({popupopen:o,popupclose:d}),a.overlayContainer==null?(r!=null&&l.setLatLng(r),l.openOn(a.map)):a.overlayContainer.bindPopup(l),function(){a.map.off({popupopen:o,popupclose:d}),a.overlayContainer?.unbindPopup(),a.map.removeLayer(l)}},[s,a,n,r])}),sKe=ZGe(function({url:s,...a},r){const n=new uv.TileLayer(s,MC(a,r));return BC(n,r)},function(s,a,r){JGe(s,a,r);const{url:n}=a;n!=null&&n!==r.url&&s.setUrl(n)});delete Ib.Icon.Default.prototype._getIconUrl;Ib.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const aKe=t=>{const s=t==="delayed"?"#ef4444":t==="delivered"?"#22c55e":t==="at_port"?"#f59e0b":"#3b82f6";return Ib.divIcon({className:"custom-ship-marker",html:`
apps\web\dist\assets\index-Bz84JA8h.js:634:  `,iconSize:[24,24],iconAnchor:[12,12],popupAnchor:[0,-12]});function nKe({shipments:t,ports:s}){const a=QGe();return m.useEffect(()=>{const r=[];if(t?.forEach(n=>{n.latitude&&n.longitude&&r.push([n.latitude,n.longitude])}),s?.forEach(n=>{n.latitude&&n.longitude&&r.push([n.latitude,n.longitude])}),r.length>0){const n=Ib.latLngBounds(r);a.fitBounds(n,{padding:[50,50],maxZoom:6})}},[a,t,s]),null}function iKe({shipments:t=[],ports:s=[],routes:a=[],selectedShipmentId:r,onShipmentClick:n,height:i=400,center:l=[20,0],zoom:o=2,className:d=""}){const c=m.useRef(null);return e.jsxs("div",{className:`relative ${d}`,style:{height:i},children:[e.jsxs(eKe,{ref:c,center:l,zoom:o,style:{height:"100%",width:"100%",borderRadius:"0.5rem"},scrollWheelZoom:!0,zoomControl:!0,children:[e.jsx(sKe,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors Â© <a href="https://carto.com/attributions">CARTO</a>',url:"https://{s}.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}{r}.png"}),a.map((u,h)=>e.jsx(tKe,{positions:u.coordinates,pathOptions:{color:u.color||"#3b82f6",weight:3,opacity:.7,dashArray:"10, 10"}},`route-${h}`)),s.map(u=>e.jsx(rz,{position:[u.latitude,u.longitude],icon:rKe,children:e.jsx(nz,{children:e.jsxs("div",{className:"p-2 min-w-[150px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(bu,{className:"w-4 h-4 text-indigo-500"}),e.jsx("span",{className:"font-semibold",children:u.name})]}),e.jsx("span",{className:"text-xs text-muted-foreground font-mono",children:u.code}),e.jsx(Q,{variant:"outline",className:"ml-2 text-xs",children:u.type})]})})},`port-${u.code}`)),t.map(u=>e.jsx(rz,{position:[u.latitude,u.longitude],icon:aKe(u.status),eventHandlers:{click:()=>n?.(u)},children:e.jsx(nz,{children:e.jsxs("div",{className:"p-2 min-w-[200px]",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[u.type==="container"?e.jsx(li,{className:"w-4 h-4 text-blue-500"}):e.jsx(Us,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"font-mono font-semibold",children:u.reference})]}),u.vessel_name&&e.jsx("p",{className:"text-sm text-muted-foreground mb-1",children:u.vessel_name}),e.jsxs("div",{className:"space-y-1 text-xs",children:[u.origin&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"From:"})," ",u.origin]}),u.destination&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"To:"})," ",u.destination]}),u.eta&&e.jsxs("p",{children:[e.jsx("span",{className:"text-muted-foreground",children:"ETA:"})," ",new Date(u.eta).toLocaleDateString()]})]}),e.jsx("div",{className:"mt-2 pt-2 border-t",children:e.jsx(pe,{to:`/tracking/dashboard/${u.type}/${u.reference}`,className:"text-blue-500 hover:underline text-xs",children:"View Details â†’"})})]})})},u.id)),e.jsx(nKe,{shipments:t,ports:s})]}),e.jsxs("div",{className:"absolute bottom-4 left-4 bg-background/90 backdrop-blur-sm rounded-lg p-3 text-xs shadow-lg z-[1000]",children:[e.jsx("p",{className:"font-semibold mb-2",children:"Legend"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),e.jsx("span",{children:"In Transit"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-500"}),e.jsx("span",{children:"At Port"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),e.jsx("span",{children:"Delayed"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),e.jsx("span",{children:"Delivered"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-500"}),e.jsx("span",{children:"Port"})]})]})]})]})}function lKe({eta:t,lcExpiry:s,lcNumber:a,containerNumber:r,className:n=""}){if(!t||!s)return null;const i=new Date(t),l=new Date(s),o=new Date,d=Math.ceil((i.getTime()-o.getTime())/(1e3*60*60*24)),c=Math.ceil((l.getTime()-o.getTime())/(1e3*60*60*24)),u=Math.ceil((l.getTime()-i.getTime())/(1e3*60*60*24));let h="safe",x="",g="";if(i>l)h="critical",x="LC Will Expire Before Arrival",g=`ETA is ${Math.abs(u)} days after LC expiry. Documents cannot be negotiated.`;else if(u<=3)h="high",x="Critical LC Timing Risk",g=`Only ${u} day${u!==1?"s":""} between arrival and LC expiry. Document presentation at risk.`;else if(u<=7)h="medium",x="LC Timing Warning",g=`${u} days between arrival and LC expiry. Monitor closely and prepare documents.`;else if(u<=14)h="safe",x="LC Timeline OK",g=`${u} days between arrival and LC expiry. Sufficient time for document presentation.`;else return null;const y=(()=>{switch(h){case"critical":return{bg:"bg-red-500/10",border:"border-red-500/30",icon:"text-red-500",badge:"bg-red-500/20 text-red-500 border-red-500/30"};case"high":return{bg:"bg-amber-500/10",border:"border-amber-500/30",icon:"text-amber-500",badge:"bg-amber-500/20 text-amber-500 border-amber-500/30"};case"medium":return{bg:"bg-yellow-500/10",border:"border-yellow-500/30",icon:"text-yellow-500",badge:"bg-yellow-500/20 text-yellow-500 border-yellow-500/30"};default:return{bg:"bg-emerald-500/10",border:"border-emerald-500/30",icon:"text-emerald-500",badge:"bg-emerald-500/20 text-emerald-500 border-emerald-500/30"}}})(),b=h==="critical"||h==="high"?Ve:h==="medium"?ks:Oe;return e.jsx($,{className:`${y.bg} ${y.border} border ${n}`,children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:`mt-0.5 ${y.icon}`,children:e.jsx(b,{className:"w-6 h-6"})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-semibold",children:x}),e.jsx(Q,{className:y.badge,children:h==="critical"?"CRITICAL":h==="high"?"HIGH RISK":h==="medium"?"WARNING":"OK"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:g}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"ETA"}),e.jsx("p",{className:"font-medium",children:i.toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d>0?`in ${d} days`:"Arrived"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"LC Expiry"}),e.jsx("p",{className:"font-medium",children:l.toLocaleDateString()}),e.jsx("p",{className:"text-xs text-muted-foreground",children:c>0?`in ${c} days`:"EXPIRED"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Buffer Time"}),e.jsxs("p",{className:`font-medium ${u<=3?"text-red-500":u<=7?"text-amber-500":"text-emerald-500"}`,children:[u," days"]})]}),a&&e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"LC Number"}),e.jsx("p",{className:"font-mono font-medium",children:a})]})]}),(h==="critical"||h==="high")&&e.jsxs("div",{className:"mt-4 pt-3 border-t border-dashed flex flex-wrap gap-2",children:[e.jsx(M,{size:"sm",variant:"outline",asChild:!0,children:e.jsxs(pe,{to:"/hub",children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"View LC in LCopilot"]})}),e.jsxs(M,{size:"sm",variant:"outline",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Request LC Extension"]})]})]})]})})})}const iz="https://trdrhub-api.onrender.com";function oKe({vesselName:t,imo:s,mmsi:a,flagState:r,className:n=""}){const[i,l]=m.useState(null),[o,d]=m.useState(!1),[c,u]=m.useState(null),[h,x]=m.useState(!1),g=async()=>{d(!0),u(null);try{const C=await fetch(`${iz}/tracking/sanctions/screen`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({vessel_name:t,imo:s,mmsi:a,flag_state:r})});if(C.ok){const _=await C.json();l(_)}else{const _=await C.json();u(_.detail||"Screening failed")}}catch{u("Failed to connect to screening service")}finally{d(!1)}},j=C=>{switch(C){case"CLEAR":return e.jsx(bi,{className:"w-6 h-6 text-emerald-500"});case"LOW":return e.jsx(Ot,{className:"w-6 h-6 text-emerald-500"});case"MEDIUM":return e.jsx(sj,{className:"w-6 h-6 text-amber-500"});case"HIGH":return e.jsx(sj,{className:"w-6 h-6 text-orange-500"});case"CRITICAL":return e.jsx(x5,{className:"w-6 h-6 text-red-500"});default:return e.jsx(Ot,{className:"w-6 h-6 text-muted-foreground"})}},y=C=>{switch(C){case"CLEAR":return e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-500 border-emerald-500/30",children:"CLEAR"});case"LOW":return e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-500 border-emerald-500/30",children:"LOW RISK"});case"MEDIUM":return e.jsx(Q,{className:"bg-amber-500/20 text-amber-500 border-amber-500/30",children:"MEDIUM RISK"});case"HIGH":return e.jsx(Q,{className:"bg-orange-500/20 text-orange-500 border-orange-500/30",children:"HIGH RISK"});case"CRITICAL":return e.jsx(Q,{className:"bg-red-500/20 text-red-500 border-red-500/30",children:"CRITICAL"});default:return e.jsx(Q,{variant:"outline",children:"Unknown"})}},b=(C,_)=>C?e.jsxs("div",{className:"flex items-center gap-2 text-emerald-500",children:[e.jsx(Oe,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Clear"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-red-500",children:[e.jsx(bs,{className:"w-4 h-4"}),e.jsxs("span",{className:"text-sm font-medium",children:[_.length," Hit(s)"]})]});if(!i&&!o&&!c)return e.jsxs($,{className:n,children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Sanctions Screening"]}),e.jsx(ue,{children:"Screen this vessel against OFAC, EU, and UN sanctions lists"})]}),e.jsxs(U,{children:[e.jsxs(M,{onClick:g,className:"w-full",children:[e.jsx(Ot,{className:"w-4 h-4 mr-2"}),"Run Sanctions Check"]}),e.jsx("p",{className:"text-xs text-muted-foreground text-center mt-2",children:"Free screening against official government databases"})]})]});if(o)return e.jsxs($,{className:n,children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5"}),"Sanctions Screening"]})}),e.jsxs(U,{className:"flex flex-col items-center py-8",children:[e.jsx(ct,{className:"w-8 h-8 text-blue-500 animate-spin mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Checking sanctions lists..."}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"OFAC â€¢ EU â€¢ UN"})]})]});if(c)return e.jsxs($,{className:`${n} border-red-500/30`,children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(x5,{className:"w-5 h-5 text-red-500"}),"Screening Error"]})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-red-400 mb-4",children:c}),e.jsxs(M,{onClick:g,variant:"outline",className:"w-full",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Retry"]})]})]});if(!i)return null;const N=i.is_clear?"border-emerald-500/30":i.risk_level==="CRITICAL"||i.risk_level==="HIGH"?"border-red-500/30":"border-amber-500/30";return e.jsxs($,{className:`${n} ${N}`,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[j(i.risk_level),e.jsxs("div",{children:[e.jsx(ee,{className:"text-lg",children:"Sanctions Screening"}),e.jsxs(ue,{children:["Screened ",new Date(i.screened_at).toLocaleString()]})]})]}),y(i.risk_level)]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:`p-3 rounded-lg ${i.is_clear?"bg-emerald-500/10":i.risk_level==="CRITICAL"||i.risk_level==="HIGH"?"bg-red-500/10":"bg-amber-500/10"}`,children:[e.jsx("p",{className:"text-sm font-medium",children:i.recommendation}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Confidence: ",i.confidence,"%"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"OFAC SDN"}),b(i.ofac_clear,i.ofac_hits)]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"EU Sanctions"}),b(i.eu_clear,i.eu_hits)]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"UN Sanctions"}),b(i.un_clear,i.un_hits)]})]}),i.flag_assessment&&e.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(rg,{className:"w-4 h-4 text-blue-500"}),e.jsx("span",{className:"text-sm font-medium",children:"Flag State Assessment"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Flag:"})," ",e.jsxs("span",{className:"font-medium",children:[i.flag_assessment.flag_state," (",i.flag_assessment.flag_code,")"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Risk:"})," ",e.jsx("span",{className:`font-medium ${i.flag_assessment.risk_level==="LOW"?"text-emerald-500":i.flag_assessment.risk_level==="MEDIUM"?"text-amber-500":"text-red-500"}`,children:i.flag_assessment.risk_level})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Paris MoU:"})," ",e.jsx("span",{className:`font-medium capitalize ${i.flag_assessment.paris_mou_status==="white"?"text-emerald-500":i.flag_assessment.paris_mou_status==="grey"?"text-amber-500":"text-red-500"}`,children:i.flag_assessment.paris_mou_status})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"FOC:"})," ",e.jsx("span",{className:"font-medium",children:i.flag_assessment.is_flag_of_convenience?"Yes":"No"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:i.flag_assessment.notes})]}),i.total_hits>0&&e.jsxs(xh,{open:h,onOpenChange:x,children:[e.jsx(tp,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"w-full justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-amber-500"}),"View ",i.total_hits," Match(es)"]}),h?e.jsx(yh,{className:"w-4 h-4"}):e.jsx(ja,{className:"w-4 h-4"})]})}),e.jsx(ph,{className:"space-y-2 mt-2",children:[...i.ofac_hits,...i.eu_hits,...i.un_hits].map((C,_)=>e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/5 border border-red-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-medium",children:C.entity_name}),e.jsx(Q,{variant:"outline",className:"text-xs",children:C.list_name})]}),e.jsxs("div",{className:"text-xs text-muted-foreground space-y-1",children:[e.jsxs("p",{children:["Match: ",C.match_type," (",C.match_score,"%)"]}),C.program&&e.jsxs("p",{children:["Program: ",C.program]}),C.remarks&&e.jsx("p",{children:C.remarks})]})]},_))})]}),e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(M,{variant:"outline",size:"sm",onClick:g,className:"flex-1",children:[e.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Re-screen"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"flex-1",onClick:async()=>{try{const C=await fetch(`${iz}/tracking/compliance-report`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({vessel_name:t,imo:s,mmsi:a,flag_state:r})});if(C.ok){const _=await C.blob(),A=window.URL.createObjectURL(_),k=document.createElement("a");k.href=A,k.download=`VesselDueDiligence_${t.replace(/[^a-zA-Z0-9]/g,"_")}.pdf`,document.body.appendChild(k),k.click(),k.remove(),window.URL.revokeObjectURL(A)}}catch(C){console.error("Failed to download report:",C)}},children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"PDF Report"]})]})]})]})}const cKe="https://trdrhub-api.onrender.com";function dKe({vesselName:t,imo:s,mmsi:a,className:r=""}){const[n,i]=m.useState(null),[l,o]=m.useState(!1),[d,c]=m.useState(null),[u,h]=m.useState(!1),x=async()=>{o(!0),c(null);try{const C=await fetch(`${cKe}/tracking/ais-analysis/${encodeURIComponent(s||a||t)}?days=30`,{credentials:"include"});if(C.ok){const _=await C.json();i(_)}else{const _=await C.json();c(_.detail||"Analysis failed")}}catch{c("Failed to connect to analysis service")}finally{o(!1)}},g=N=>{switch(N){case"LOW":return"text-emerald-500";case"MEDIUM":return"text-amber-500";case"HIGH":return"text-orange-500";case"CRITICAL":return"text-red-500";default:return"text-muted-foreground"}},j=N=>{switch(N){case"LOW":return e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-500 border-emerald-500/30",children:"LOW RISK"});case"MEDIUM":return e.jsx(Q,{className:"bg-amber-500/20 text-amber-500 border-amber-500/30",children:"MEDIUM RISK"});case"HIGH":return e.jsx(Q,{className:"bg-orange-500/20 text-orange-500 border-orange-500/30",children:"HIGH RISK"});case"CRITICAL":return e.jsx(Q,{className:"bg-red-500/20 text-red-500 border-red-500/30",children:"CRITICAL"});default:return e.jsx(Q,{variant:"outline",children:"UNKNOWN"})}},y=N=>N<=30?"bg-emerald-500":N<=50?"bg-amber-500":N<=70?"bg-orange-500":"bg-red-500";if(!n&&!l&&!d)return e.jsxs($,{className:r,children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Df,{className:"w-5 h-5"}),"AIS Gap Analysis"]}),e.jsx(ue,{children:"Analyze AIS transmission history for suspicious gaps"})]}),e.jsxs(U,{children:[e.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20 mb-4",children:[e.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"What This Detects"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"w-3 h-3"})," Dark shipping (AIS shutdown)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-3 h-3"})," High-risk area visits"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Wn,{className:"w-3 h-3"})," Ship-to-ship transfers"]})]})]}),e.jsxs(M,{onClick:x,className:"w-full",children:[e.jsx(Df,{className:"w-4 h-4 mr-2"}),"Analyze AIS History (30 Days)"]})]})]});if(l)return e.jsxs($,{className:r,children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Df,{className:"w-5 h-5"}),"AIS Gap Analysis"]})}),e.jsxs(U,{className:"flex flex-col items-center py-8",children:[e.jsx(ct,{className:"w-8 h-8 text-blue-500 animate-spin mb-4"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyzing AIS transmission history..."}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Checking for gaps and anomalies"})]})]});if(d)return e.jsxs($,{className:`${r} border-red-500/30`,children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-red-500"}),"Analysis Error"]})}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-red-400 mb-4",children:d}),e.jsxs(M,{onClick:x,variant:"outline",className:"w-full",children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Retry"]})]})]});if(!n)return null;const b=n.risk_level==="LOW"?"border-emerald-500/30":n.risk_level==="CRITICAL"||n.risk_level==="HIGH"?"border-red-500/30":"border-amber-500/30";return e.jsxs($,{className:`${r} ${b}`,children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Df,{className:`w-6 h-6 ${g(n.risk_level)}`}),e.jsxs("div",{children:[e.jsx(ee,{className:"text-lg",children:"AIS Gap Analysis"}),e.jsxs(ue,{children:[n.analysis_period_days,"-day analysis â€¢ ",n.total_positions," positions"]})]})]}),j(n.risk_level)]})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between text-sm mb-1",children:[e.jsx("span",{className:"text-muted-foreground",children:"Risk Score"}),e.jsxs("span",{className:`font-bold ${g(n.risk_level)}`,children:[n.overall_risk_score,"/100"]})]}),e.jsx(es,{value:n.overall_risk_score,className:`h-2 ${y(n.overall_risk_score)}`})]}),e.jsx("div",{className:`p-3 rounded-lg ${n.risk_level==="LOW"?"bg-emerald-500/10":n.risk_level==="CRITICAL"||n.risk_level==="HIGH"?"bg-red-500/10":"bg-amber-500/10"}`,children:e.jsx("p",{className:"text-sm font-medium",children:n.recommendation})}),e.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx("p",{className:"text-2xl font-bold",children:n.total_gaps}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Gaps"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsx("p",{className:`text-2xl font-bold ${n.suspicious_gaps>0?"text-amber-500":""}`,children:n.suspicious_gaps}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Suspicious"})]}),e.jsxs("div",{className:"text-center p-3 rounded-lg bg-muted/30",children:[e.jsxs("p",{className:"text-2xl font-bold",children:[n.longest_gap_hours,"h"]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Longest Gap"})]})]}),n.risk_factors.length>0&&e.jsxs("div",{className:"p-3 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsx("h4",{className:"text-sm font-medium text-amber-400 mb-2",children:"Risk Factors"}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:n.risk_factors.map((N,C)=>e.jsxs("li",{className:"flex items-start gap-2",children:[e.jsx(Ve,{className:"w-3 h-3 mt-1 text-amber-500 flex-shrink-0"}),N]},C))})]}),n.high_risk_areas_visited.length>0&&e.jsxs("div",{className:"p-3 rounded-lg bg-red-500/10 border border-red-500/20",children:[e.jsx("h4",{className:"text-sm font-medium text-red-400 mb-2",children:"High-Risk Areas Visited"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:n.high_risk_areas_visited.map((N,C)=>e.jsx(Q,{variant:"outline",className:"border-red-500/30 text-red-400",children:N},C))})]}),n.gaps.length>0&&e.jsxs(xh,{open:u,onOpenChange:h,children:[e.jsx(tp,{asChild:!0,children:e.jsxs(M,{variant:"ghost",className:"w-full justify-between",children:[e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(yd,{className:"w-4 h-4"}),"View ",n.gaps.length," Gap(s) Detail"]}),u?e.jsx(yh,{className:"w-4 h-4"}):e.jsx(ja,{className:"w-4 h-4"})]})}),e.jsx(ph,{className:"space-y-2 mt-2",children:n.gaps.map(N=>e.jsxs("div",{className:`p-3 rounded-lg border ${N.risk_level==="CRITICAL"||N.risk_level==="HIGH"?"bg-red-500/5 border-red-500/20":N.risk_level==="MEDIUM"?"bg-amber-500/5 border-amber-500/20":"bg-muted/30 border-muted"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"font-medium",children:[N.duration_hours,"h gap"]}),e.jsx(Q,{variant:"outline",className:`text-xs ${g(N.risk_level)}`,children:N.risk_level})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-muted-foreground mb-2",children:[e.jsxs("div",{children:[e.jsx(mt,{className:"w-3 h-3 inline mr-1"}),new Date(N.start_time).toLocaleDateString()]}),e.jsxs("div",{children:[e.jsx(oi,{className:"w-3 h-3 inline mr-1"}),N.distance_nm,"nm traveled"]})]}),N.risk_factors.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:N.risk_factors.map((C,_)=>e.jsxs("li",{children:["â€¢ ",C]},_))})]},N.gap_id))})]}),e.jsx("div",{className:"flex gap-2 pt-2",children:e.jsxs(M,{variant:"outline",size:"sm",onClick:x,className:"flex-1",children:[e.jsx(Lt,{className:"w-4 h-4 mr-1"}),"Re-analyze"]})})]})]})}const lz="https://trdrhub-api.onrender.com",uKe=t=>{const s={booked:{label:"Booked",color:"bg-slate-500/20 text-slate-400"},gate_in:{label:"At Origin Terminal",color:"bg-blue-500/20 text-blue-400"},loaded:{label:"Loaded",color:"bg-blue-500/20 text-blue-400"},in_transit:{label:"In Transit",color:"bg-emerald-500/20 text-emerald-400"},transshipment:{label:"Transshipment",color:"bg-amber-500/20 text-amber-400"},discharged:{label:"Discharged",color:"bg-purple-500/20 text-purple-400"},gate_out:{label:"Gate Out",color:"bg-indigo-500/20 text-indigo-400"},delivered:{label:"Delivered",color:"bg-green-500/20 text-green-400"}},a=s[t]||s.booked;return e.jsx(Q,{className:`${a.color} border-current/30`,children:a.label})};function mKe(){const{containerId:t}=Ko(),{user:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(null),[i,l]=m.useState(!0),[o,d]=m.useState("timeline");if(m.useEffect(()=>{(async()=>{if(t)try{const x=await fetch(`${lz}/tracking/container/${t}`,{credentials:"include"});if(x.ok){const g=await x.json(),j={containerNumber:g.container_number,containerType:"Dry",containerSize:"40' HC",carrier:g.carrier||"Unknown Carrier",carrierCode:g.carrier_code||"UNKN",bookingNumber:g.booking_number||`BK${t?.slice(-8)}`,blNumber:g.bl_number||`BL${t?.slice(-8)}`,shipper:g.shipper||"Unknown Shipper",consignee:g.consignee||"Unknown Consignee",origin:{port:g.origin?.name||"Unknown",portCode:g.origin?.code||"UNKN",country:g.origin?.country||""},destination:{port:g.destination?.name||"Unknown",portCode:g.destination?.code||"UNKN",country:g.destination?.country||""},vessel:{name:g.vessel?.name||"Unknown Vessel",imo:g.vessel?.imo||"",mmsi:g.vessel?.mmsi||"",voyage:g.vessel?.voyage||"",flag:g.vessel?.flag||""},status:g.status||"in_transit",eta:g.eta||new Date().toISOString(),etaConfidence:g.eta_confidence||85,currentLocation:{type:g.position?"at_sea":"port",name:g.current_location||"Unknown",coordinates:g.position?{lat:g.position.lat,lon:g.position.lon}:void 0},weight:{gross:28500,tare:3750,cargo:24750,unit:"kg"},seals:g.seals||[],events:(g.events||[]).map((y,b)=>({id:String(b),timestamp:y.timestamp,event:y.event,location:y.location,description:y.description,status:y.status,details:y.details}))};j.events.length===0&&(j.events=[{date:new Date().toISOString(),location:"Unknown",status:"Tracking data unavailable",isCompleted:!1,isCurrent:!0}]),n(j)}else console.warn("API returned error"),n(null)}catch(x){console.error("Failed to fetch container data:",x),n(null)}finally{l(!1)}})()},[t]),i)return e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Lt,{className:"w-8 h-8 text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Loading tracking data..."})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ve,{className:"w-12 h-12 text-amber-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Container Not Found"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"We couldn't find tracking data for this container."}),e.jsx(M,{asChild:!0,children:e.jsx(pe,{to:"/tracking",children:"â† Back to Tracker"})})]})});const c=r.events.filter(h=>h.status==="completed").length,u=Math.round(c/r.events.length*100);return e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("header",{className:"bg-slate-900/80 border-b border-slate-800 sticky top-0 z-40 backdrop-blur",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(pe,{to:"/tracking",className:"text-slate-400 hover:text-white flex items-center gap-1",children:[e.jsx(ma,{className:"w-4 h-4"}),"Back"]}),e.jsx(As,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(li,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"font-mono text-lg font-bold text-white",children:r.containerNumber}),uKe(r.status)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-300",onClick:async()=>{try{if((await fetch(`${lz}/tracking/alerts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tracking_type:"container",reference:r?.containerNumber,alert_type:"arrival",notify_email:!0,notify_sms:!1})})).ok)a({title:"Alert Created",description:"You'll be notified when this container arrives."});else throw new Error("Failed to create alert")}catch{a({title:"Alert Creation Failed",description:"Please try again later.",variant:"destructive"})}},children:[e.jsx($s,{className:"w-4 h-4 mr-1"}),"Set Alert"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-300",children:[e.jsx(up,{className:"w-4 h-4 mr-1"}),"Share"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-300",children:[e.jsx(Gt,{className:"w-4 h-4 mr-1"}),"Export"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsx($,{className:"bg-slate-900/50 border-slate-800 mb-6",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Origin"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.origin.port}),e.jsxs("p",{className:"text-sm text-slate-400",children:[r.origin.country," (",r.origin.portCode,")"]})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center",children:[e.jsx("div",{className:"w-full mb-2",children:e.jsx(es,{value:u,className:"h-2 bg-slate-800"})}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Us,{className:"w-4 h-4 text-blue-400"}),e.jsx("span",{className:"text-white",children:r.vessel.name}),e.jsxs("span",{className:"text-slate-500",children:["(",r.vessel.voyage,")"]})]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[u,"% Complete"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase tracking-wider mb-1",children:"Destination"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.destination.port}),e.jsxs("p",{className:"text-sm text-slate-400",children:[r.destination.country," (",r.destination.portCode,")"]})]})]}),e.jsx(As,{className:"my-6 bg-slate-800"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-1",children:[e.jsx(ya,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase",children:"ETA"})]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:new Date(r.eta).toLocaleDateString("en-US",{month:"short",day:"numeric"})}),e.jsxs("p",{className:"text-xs text-emerald-400",children:[r.etaConfidence,"% confidence"]})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-1",children:[e.jsx(oi,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase",children:"Location"})]}),e.jsx("p",{className:"text-lg font-semibold text-white truncate",children:r.currentLocation.name}),e.jsx("p",{className:"text-xs text-slate-500",children:r.currentLocation.type==="at_sea"?"At Sea":"In Port"})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-1",children:[e.jsx(Ide,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase",children:"Container"})]}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.containerSize}),e.jsx("p",{className:"text-xs text-slate-500",children:r.containerType})]}),e.jsxs("div",{className:"bg-slate-800/50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-slate-400 mb-1",children:[e.jsx(Iue,{className:"w-4 h-4"}),e.jsx("span",{className:"text-xs uppercase",children:"Weight"})]}),e.jsxs("p",{className:"text-lg font-semibold text-white",children:[(r.weight.gross/1e3).toFixed(1)," t"]}),e.jsx("p",{className:"text-xs text-slate-500",children:"Gross weight"})]})]})]})}),(r.lcNumber||r.lcExpiry)&&e.jsx(lKe,{eta:r.eta,lcExpiry:r.lcExpiry,lcNumber:r.lcNumber,containerNumber:r.containerNumber,className:"mb-6"}),e.jsxs(Os,{value:o,onValueChange:d,children:[e.jsxs(Fs,{className:"bg-slate-800 border border-slate-700 mb-6",children:[e.jsxs(He,{value:"timeline",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(mt,{className:"w-4 h-4 mr-1"}),"Timeline"]}),e.jsxs(He,{value:"details",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(Ps,{className:"w-4 h-4 mr-1"}),"Details"]}),e.jsxs(He,{value:"vessel",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(Us,{className:"w-4 h-4 mr-1"}),"Vessel"]}),e.jsxs(He,{value:"documents",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(Be,{className:"w-4 h-4 mr-1"}),"Documents"]})]}),e.jsx(Qe,{value:"timeline",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Tracking Timeline"}),e.jsx(ue,{children:"Complete journey from origin to destination"})]}),e.jsx(U,{children:e.jsx("div",{className:"relative",children:r.events.map((h,x)=>e.jsxs("div",{className:"flex gap-4 pb-8 last:pb-0",children:[e.jsxs("div",{className:"relative flex flex-col items-center",children:[e.jsx("div",{className:`w-4 h-4 rounded-full border-2 z-10 ${h.status==="completed"?"bg-emerald-500 border-emerald-500":h.status==="current"?"bg-blue-500 border-blue-500 animate-pulse":"bg-slate-800 border-slate-600"}`}),x<r.events.length-1&&e.jsx("div",{className:`absolute top-4 w-0.5 h-full ${h.status==="completed"?"bg-emerald-500":"bg-slate-700"}`})]}),e.jsxs("div",{className:"flex-1 pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h4",{className:`font-semibold ${h.status==="upcoming"?"text-slate-500":"text-white"}`,children:h.event}),e.jsx("span",{className:"text-xs text-slate-500",children:new Date(h.timestamp).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]}),e.jsxs("p",{className:"text-sm text-slate-400 flex items-center gap-1",children:[e.jsx(oi,{className:"w-3 h-3"}),h.location]}),e.jsx("p",{className:"text-sm text-slate-500 mt-1",children:h.description}),h.details&&e.jsx("div",{className:"mt-2 bg-slate-800/50 rounded-lg p-3",children:Object.entries(h.details).map(([g,j])=>e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-slate-500 capitalize",children:g.replace(/([A-Z])/g," $1").trim()}),e.jsx("span",{className:"text-slate-300",children:j})]},g))})]})]},h.id))})})]})}),e.jsx(Qe,{value:"details",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Shipping Details"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Carrier"}),e.jsx("span",{className:"text-white",children:r.carrier})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Booking Number"}),e.jsx("span",{className:"text-white font-mono",children:r.bookingNumber})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"B/L Number"}),e.jsx("span",{className:"text-white font-mono",children:r.blNumber})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Shipper"}),e.jsx("span",{className:"text-white",children:r.shipper})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Consignee"}),e.jsx("span",{className:"text-white",children:r.consignee})]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Container Specifications"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Size & Type"}),e.jsxs("span",{className:"text-white",children:[r.containerSize," ",r.containerType]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Gross Weight"}),e.jsxs("span",{className:"text-white",children:[(r.weight.gross/1e3).toFixed(2)," tonnes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Cargo Weight"}),e.jsxs("span",{className:"text-white",children:[(r.weight.cargo/1e3).toFixed(2)," tonnes"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Tare Weight"}),e.jsxs("span",{className:"text-white",children:[(r.weight.tare/1e3).toFixed(2)," tonnes"]})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Seal Numbers"}),e.jsx("span",{className:"text-white font-mono",children:r.seals.join(", ")})]})]})]})]})}),e.jsx(Qe,{value:"vessel",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5 text-blue-400"}),r.vessel.name]}),e.jsx(ue,{children:"Current carrying vessel"})]}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"IMO Number"}),e.jsx("span",{className:"text-white font-mono",children:r.vessel.imo})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"MMSI"}),e.jsx("span",{className:"text-white font-mono",children:r.vessel.mmsi})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Voyage"}),e.jsx("span",{className:"text-white",children:r.vessel.voyage})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Flag"}),e.jsx("span",{className:"text-white",children:r.vessel.flag})]})]}),e.jsx("div",{className:"bg-slate-800/50 rounded-lg p-4 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(tj,{className:"w-12 h-12 text-blue-400 mx-auto mb-2"}),e.jsx("p",{className:"text-slate-400 text-sm",children:"Live Position"}),e.jsxs("p",{className:"text-white font-mono text-sm",children:[r.currentLocation.coordinates?.lat.toFixed(4),"Â°N, ",r.currentLocation.coordinates?.lon.toFixed(4),"Â°E"]}),e.jsx(M,{variant:"outline",size:"sm",className:"mt-4 border-slate-600",children:"View on Map"})]})})]})})]})}),e.jsx(Qe,{value:"documents",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Documents"}),e.jsx(ue,{children:"Shipping documentation status"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:[{name:"Bill of Lading",status:"released",date:"Dec 22, 2024"},{name:"Commercial Invoice",status:"uploaded",date:"Dec 20, 2024"},{name:"Packing List",status:"uploaded",date:"Dec 20, 2024"},{name:"Certificate of Origin",status:"pending",date:null},{name:"Customs Declaration",status:"pending",date:null}].map((h,x)=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Be,{className:"w-5 h-5 text-slate-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-white",children:h.name}),h.date&&e.jsx("p",{className:"text-xs text-slate-500",children:h.date})]})]}),e.jsx(Q,{className:h.status==="released"?"bg-emerald-500/20 text-emerald-400":h.status==="uploaded"?"bg-blue-500/20 text-blue-400":"bg-slate-500/20 text-slate-400",children:h.status})]},x))})})]})})]})]})]})}const oz="https://trdrhub-api.onrender.com",hKe=t=>{const s={underway:{label:"Underway",color:"bg-emerald-500/20 text-emerald-400"},at_anchor:{label:"At Anchor",color:"bg-amber-500/20 text-amber-400"},moored:{label:"Moored",color:"bg-blue-500/20 text-blue-400"},not_available:{label:"N/A",color:"bg-slate-500/20 text-slate-400"}},a=s[t]||s.not_available;return e.jsx(Q,{className:`${a.color} border-current/30`,children:a.label})};function xKe(){const{vesselId:t}=Ko(),{user:s}=Dt(),{toast:a}=et(),[r,n]=m.useState(null),[i,l]=m.useState(!0),[o,d]=m.useState("position");return m.useEffect(()=>{(async()=>{if(t)try{const u=/^IMO\d+$/.test(t)?"imo":/^\d{9}$/.test(t)?"mmsi":"name",h=await fetch(`${oz}/tracking/vessel/${t}?search_type=${u}`,{credentials:"include"});if(h.ok){const x=await h.json(),g={name:x.name,imo:x.imo||t,mmsi:x.mmsi||"",callSign:x.call_sign||"",flag:x.flag||"Unknown",type:x.vessel_type||"Container Ship",status:x.status||"underway",position:{lat:x.position?.lat||0,lon:x.position?.lon||0,heading:x.position?.heading||x.heading||0,course:x.position?.course||x.course||0,speed:x.position?.speed||x.speed||0,timestamp:x.position?.timestamp||x.last_update},dimensions:x.dimensions||{length:0,beam:0,draught:0},capacity:{teu:0,deadweight:0,grossTonnage:0},owner:"Unknown",operator:"Unknown",built:0,currentVoyage:{voyage:"",origin:"",destination:x.destination||"Unknown",eta:x.eta||""},schedule:[]};n(g)}else console.warn("API returned error"),n(null)}catch(u){console.error("Failed to fetch vessel data:",u),n(null)}finally{l(!1)}})()},[t]),i?e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Lt,{className:"w-8 h-8 text-blue-400 animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-slate-400",children:"Loading vessel data..."})]})}):r?e.jsxs("div",{className:"min-h-screen bg-slate-950",children:[e.jsx("header",{className:"bg-slate-900/80 border-b border-slate-800 sticky top-0 z-40 backdrop-blur",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(pe,{to:"/tracking",className:"text-slate-400 hover:text-white flex items-center gap-1",children:[e.jsx(ma,{className:"w-4 h-4"}),"Back"]}),e.jsx(As,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5 text-blue-400"}),e.jsx("span",{className:"text-lg font-bold text-white",children:r.name}),hKe(r.status)]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-300",onClick:async()=>{try{if((await fetch(`${oz}/tracking/alerts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({tracking_type:"vessel",reference:r?.imo||r?.name,alert_type:"arrival",notify_email:!0,notify_sms:!1})})).ok)a({title:"Alert Created",description:"You'll be notified when this vessel arrives."});else throw new Error("Failed to create alert")}catch{a({title:"Alert Creation Failed",description:"Please try again later.",variant:"destructive"})}},children:[e.jsx($s,{className:"w-4 h-4 mr-1"}),"Set Alert"]}),e.jsxs(M,{variant:"outline",size:"sm",className:"border-slate-700 text-slate-300",children:[e.jsx(up,{className:"w-4 h-4 mr-1"}),"Share"]})]})]})})}),e.jsxs("main",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 mb-8",children:[e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(tj,{className:"w-6 h-6 text-blue-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Heading"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[r.position.heading,"Â°"]})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(rV,{className:"w-6 h-6 text-emerald-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Speed"}),e.jsxs("p",{className:"text-lg font-bold text-white",children:[r.position.speed," kn"]})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(oi,{className:"w-6 h-6 text-amber-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Position"}),e.jsxs("p",{className:"text-sm font-mono text-white",children:[r.position.lat.toFixed(2),"Â°, ",r.position.lon.toFixed(2),"Â°"]})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(bu,{className:"w-6 h-6 text-purple-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Next Port"}),e.jsx("p",{className:"text-lg font-bold text-white",children:r.schedule.find(c=>c.status==="scheduled")?.port||"N/A"})]})}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"p-4 text-center",children:[e.jsx(ya,{className:"w-6 h-6 text-indigo-400 mx-auto mb-2"}),e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"ETA"}),e.jsx("p",{className:"text-lg font-bold text-white",children:new Date(r.currentVoyage.eta).toLocaleDateString("en-US",{month:"short",day:"numeric"})})]})})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800 mb-8",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Oue,{className:"w-5 h-5 text-blue-400"}),"Current Voyage: ",r.currentVoyage.voyage]})}),e.jsx(U,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Origin"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.currentVoyage.origin}),r.currentVoyage.departureTime&&e.jsxs("p",{className:"text-sm text-slate-500",children:["Departed ",new Date(r.currentVoyage.departureTime).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-0.5 w-32 bg-gradient-to-r from-emerald-500 to-blue-500"}),e.jsx(Us,{className:"w-6 h-6 text-blue-400"}),e.jsx("div",{className:"h-0.5 w-32 bg-gradient-to-r from-blue-500 to-slate-600"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-slate-500 uppercase",children:"Destination"}),e.jsx("p",{className:"text-lg font-semibold text-white",children:r.currentVoyage.destination}),e.jsxs("p",{className:"text-sm text-slate-500",children:["ETA ",new Date(r.currentVoyage.eta).toLocaleDateString()]})]})]})})]}),e.jsxs(Os,{value:o,onValueChange:d,children:[e.jsxs(Fs,{className:"bg-slate-800 border border-slate-700 mb-6",children:[e.jsxs(He,{value:"position",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(oi,{className:"w-4 h-4 mr-1"}),"Position"]}),e.jsxs(He,{value:"schedule",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(ya,{className:"w-4 h-4 mr-1"}),"Schedule"]}),e.jsxs(He,{value:"specs",className:"data-[state=active]:bg-blue-500/20",children:[e.jsx(yue,{className:"w-4 h-4 mr-1"}),"Specifications"]}),e.jsxs(He,{value:"compliance",className:"data-[state=active]:bg-emerald-500/20",children:[e.jsx(Ot,{className:"w-4 h-4 mr-1"}),"Compliance"]})]}),e.jsx(Qe,{value:"position",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Current Position"}),e.jsxs(ue,{children:["Last update: ",new Date(r.position.timestamp).toLocaleString()]})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Latitude"}),e.jsxs("span",{className:"text-white font-mono",children:[r.position.lat.toFixed(4),"Â° N"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Longitude"}),e.jsxs("span",{className:"text-white font-mono",children:[r.position.lon.toFixed(4),"Â° E"]})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Heading"}),e.jsxs("span",{className:"text-white",children:[r.position.heading,"Â°"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Course"}),e.jsxs("span",{className:"text-white",children:[r.position.course,"Â°"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Speed"}),e.jsxs("span",{className:"text-white",children:[r.position.speed," knots"]})]})]})]}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-0 h-[300px] flex items-center justify-center bg-slate-800/50 rounded-lg",children:e.jsxs("div",{className:"text-center",children:[e.jsx(oi,{className:"w-12 h-12 text-blue-400 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-400",children:"Live Map View"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Red Sea (Near Suez Canal)"}),e.jsx(M,{variant:"outline",size:"sm",className:"mt-4 border-slate-600",children:"Open Full Map"})]})})})]})}),e.jsx(Qe,{value:"schedule",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Port Schedule"}),e.jsxs(ue,{children:["Voyage ",r.currentVoyage.voyage," port calls"]})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:r.schedule.map((c,u)=>e.jsxs("div",{className:`flex items-center gap-4 p-4 rounded-lg ${c.status==="current"?"bg-blue-500/10 border border-blue-500/30":c.status==="completed"?"bg-slate-800/50":"bg-slate-800/30"}`,children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(bu,{className:`w-5 h-5 ${c.status==="completed"?"text-emerald-400":c.status==="current"?"text-blue-400":"text-slate-500"}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-semibold text-white",children:c.port}),e.jsxs("span",{className:"text-xs text-slate-500",children:["(",c.portCode,")"]}),e.jsx(Q,{className:c.status==="completed"?"bg-emerald-500/20 text-emerald-400":c.status==="current"?"bg-blue-500/20 text-blue-400":"bg-slate-500/20 text-slate-400",children:c.status})]}),e.jsx("p",{className:"text-sm text-slate-500",children:c.terminal||c.country})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("p",{className:"text-white",children:new Date(c.arrival).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),c.departure&&e.jsxs("p",{className:"text-slate-500",children:["â†’ ",new Date(c.departure).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]})]})]},u))})})]})}),e.jsx(Qe,{value:"specs",children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Vessel Details"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"IMO Number"}),e.jsx("span",{className:"text-white font-mono",children:r.imo})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"MMSI"}),e.jsx("span",{className:"text-white font-mono",children:r.mmsi})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Call Sign"}),e.jsx("span",{className:"text-white font-mono",children:r.callSign})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Type"}),e.jsx("span",{className:"text-white",children:r.type})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Flag"}),e.jsxs("span",{className:"text-white flex items-center gap-1",children:[e.jsx(rg,{className:"w-4 h-4"}),r.flag]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Built"}),e.jsx("span",{className:"text-white",children:r.built})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Owner"}),e.jsx("span",{className:"text-white",children:r.owner})]})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Dimensions & Capacity"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Length"}),e.jsxs("span",{className:"text-white",children:[r.dimensions.length," m"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Beam"}),e.jsxs("span",{className:"text-white",children:[r.dimensions.beam," m"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Draught"}),e.jsxs("span",{className:"text-white",children:[r.dimensions.draught," m"]})]}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"TEU Capacity"}),e.jsxs("span",{className:"text-white",children:[r.capacity.teu.toLocaleString()," TEU"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Deadweight"}),e.jsxs("span",{className:"text-white",children:[r.capacity.deadweight.toLocaleString()," DWT"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400",children:"Gross Tonnage"}),e.jsxs("span",{className:"text-white",children:[r.capacity.grossTonnage.toLocaleString()," GT"]})]})]})]})]})}),e.jsx(Qe,{value:"compliance",children:e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsx(oKe,{vesselName:r.name,imo:r.imo,mmsi:r.mmsi,flagState:r.flag,className:"bg-slate-900/50 border-slate-800"}),e.jsx(dKe,{vesselName:r.name,imo:r.imo,mmsi:r.mmsi,className:"bg-slate-900/50 border-slate-800"})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Ot,{className:"w-5 h-5 text-emerald-400"}),"Bank-Grade Compliance Suite"]})}),e.jsxs(U,{children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsx("h4",{className:"font-medium text-emerald-400 mb-2",children:"Sanctions Screening"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"OFAC SDN List (US Treasury)"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"EU Consolidated Sanctions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"UN Security Council Sanctions"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full"}),"Flag State Risk Assessment"]})]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsx("h4",{className:"font-medium text-blue-400 mb-2",children:"AIS Analysis"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-2",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Transmission gap detection"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Dark shipping alerts"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"High-risk area monitoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),"Ship-to-ship transfer detection"]})]})]})]}),e.jsxs("div",{className:"mt-4 p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsx("h4",{className:"font-medium text-amber-400 mb-2",children:"Why Banks Require This"}),e.jsx("p",{className:"text-sm text-slate-400",children:"Trade finance institutions must perform due diligence on vessels involved in LC transactions. Our automated compliance suite helps identify sanctioned entities, flag state risks, and suspicious AIS transmission patterns that could indicate sanctions evasion."})]}),e.jsxs("div",{className:"text-xs text-slate-500 mt-4",children:[e.jsx("p",{children:"Data sources updated daily from official government databases."}),e.jsx("p",{className:"mt-1",children:"This is a screening tool - always consult compliance for final decisions."})]})]})]})]})})]})]})]}):e.jsx("div",{className:"min-h-screen bg-slate-950 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ve,{className:"w-12 h-12 text-amber-400 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-bold text-white mb-2",children:"Vessel Not Found"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"We couldn't find data for this vessel."}),e.jsx(M,{asChild:!0,children:e.jsx(pe,{to:"/tracking",children:"â† Back to Tracker"})})]})})}const pKe="https://trdrhub-api.onrender.com",fKe=[{carrier:"MSC",prefix:"MSCU",example:"MSCU1234567"},{carrier:"Maersk",prefix:"MAEU/MSKU",example:"MAEU1234567"},{carrier:"CMA CGM",prefix:"CMAU",example:"CMAU1234567"},{carrier:"Hapag-Lloyd",prefix:"HLCU/HLXU",example:"HLCU1234567"},{carrier:"OOCL",prefix:"OOLU",example:"OOLU1234567"},{carrier:"Evergreen",prefix:"EGHU/EMCU",example:"EGHU1234567"},{carrier:"ONE",prefix:"ONEU",example:"ONEU1234567"},{carrier:"Yang Ming",prefix:"YMLU",example:"YMLU1234567"}],gKe=[{id:"1",reference:"MSCU1234567",carrier:"MSC",date:"Today"},{id:"2",reference:"MAEU987654321",carrier:"Maersk",date:"Yesterday"},{id:"3",reference:"HLCU5678901",carrier:"Hapag-Lloyd",date:"2 days ago"}];function vKe(){const t=zt(),{toast:s}=et(),[a,r]=m.useState(""),[n,i]=m.useState(!1),l=async d=>{if(d.preventDefault(),!a.trim())return;const c=a.toUpperCase().trim();i(!0);try{const u=await fetch(`${pKe}/tracking/container/${encodeURIComponent(c)}`,{credentials:"include"});if(u.ok)t(`/tracking/dashboard/container/${c}`);else{const h=await u.json();s({title:"Container Not Found",description:h.detail||"Unable to find tracking information for this container.",variant:"destructive"})}}catch{t(`/tracking/dashboard/container/${c}`)}finally{i(!1)}},o=d=>{r(d),t(`/tracking/dashboard/container/${d}`)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(li,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Track Container"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter your container number to get real-time tracking updates, ETA predictions, and route information."})]}),e.jsx($,{className:"max-w-2xl mx-auto",children:e.jsxs(U,{className:"p-6",children:[e.jsx("form",{onSubmit:l,children:e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(oe,{value:a,onChange:d=>r(d.target.value.toUpperCase()),placeholder:"Enter container number (e.g., MSCU1234567)",className:"pl-10 h-12 font-mono text-lg",autoFocus:!0})]}),e.jsx(M,{type:"submit",className:"h-12 px-6 bg-blue-500 hover:bg-blue-600",disabled:n||!a.trim(),children:n?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Tracking..."]}):e.jsxs(e.Fragment,{children:["Track",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})]})}),e.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Tip:"})," Container numbers are 11 characters: 4 letters (owner code) + 7 digits. You can also search by Bill of Lading (B/L) number or booking reference."]})})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:[e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>o("MSCU1234567"),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ps,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Try Demo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"MSCU1234567"})]})]})})}),e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>t("/tracking/dashboard/active"),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"My Shipments"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"View portfolio"})]})]})})}),e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>t("/tracking/dashboard/alerts"),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Set Alert"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Get notified"})]})]})})})]}),e.jsxs($,{className:"max-w-4xl mx-auto",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Recent Searches"}),e.jsx(ue,{children:"Click to search again"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-2",children:gKe.map(d=>e.jsxs("button",{onClick:()=>o(d.reference),className:"w-full flex items-center justify-between p-3 rounded-lg hover:bg-muted transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(li,{className:"w-5 h-5 text-blue-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono font-medium",children:d.reference}),e.jsx("p",{className:"text-xs text-muted-foreground",children:d.carrier})]})]}),e.jsx("span",{className:"text-xs text-muted-foreground",children:d.date})]},d.id))})})]}),e.jsxs($,{className:"max-w-4xl mx-auto",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Supported Carriers"}),e.jsx(ue,{children:"We support tracking across 100+ shipping lines"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:fKe.map(d=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50 text-center",children:[e.jsx("p",{className:"font-medium text-sm",children:d.carrier}),e.jsx("p",{className:"text-xs text-muted-foreground font-mono",children:d.prefix})]},d.carrier))})})]}),e.jsx("div",{className:"max-w-4xl mx-auto text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["Can't find your container?"," ",e.jsxs("a",{href:"https://www.track-trace.com/container",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline inline-flex items-center gap-1",children:["Try Track & Trace ",e.jsx(ir,{className:"w-3 h-3"})]})]})})]})}const jKe="https://trdrhub-api.onrender.com",bKe=[{name:"MSC OSCAR",imo:"9703291",flag:"ðŸ‡µðŸ‡¦",type:"Container Ship"},{name:"EVER GIVEN",imo:"9811000",flag:"ðŸ‡µðŸ‡¦",type:"Container Ship"},{name:"MAERSK EDMONTON",imo:"9632129",flag:"ðŸ‡©ðŸ‡°",type:"Container Ship"},{name:"CMA CGM MARCO POLO",imo:"9454436",flag:"ðŸ‡¬ðŸ‡§",type:"Container Ship"},{name:"BERLIN EXPRESS",imo:"9302158",flag:"ðŸ‡©ðŸ‡ª",type:"Container Ship"},{name:"OOCL HONG KONG",imo:"9776171",flag:"ðŸ‡­ðŸ‡°",type:"Container Ship"}];function yKe(){const t=zt(),{toast:s}=et(),[a,r]=m.useState(""),[n,i]=m.useState("name"),[l,o]=m.useState(!1),d=async h=>{if(h.preventDefault(),!a.trim())return;const x=a.trim();o(!0);try{const g=await fetch(`${jKe}/tracking/vessel/${encodeURIComponent(x)}?search_type=${n}`,{credentials:"include"});if(g.ok){const j=await g.json();t(`/tracking/dashboard/vessel/${j.imo||x}`)}else{const j=await g.json();s({title:"Vessel Not Found",description:j.detail||"Unable to find vessel information.",variant:"destructive"})}}catch{t(`/tracking/dashboard/vessel/${x}`)}finally{o(!1)}},c=h=>{t(`/tracking/dashboard/vessel/${h}`)},u=()=>{switch(n){case"imo":return"Enter IMO number (e.g., 9703291)";case"mmsi":return"Enter MMSI number (e.g., 352001234)";default:return"Enter vessel name (e.g., MSC OSCAR)"}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"text-center max-w-2xl mx-auto",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-500/10 rounded-2xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Us,{className:"w-8 h-8 text-blue-500"})}),e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Track Vessel"}),e.jsx("p",{className:"text-muted-foreground",children:"Search vessels by name, IMO, or MMSI to get real-time position, schedule, and voyage details."})]}),e.jsx($,{className:"max-w-2xl mx-auto",children:e.jsxs(U,{className:"p-6",children:[e.jsxs("form",{onSubmit:d,children:[e.jsx(Os,{value:n,onValueChange:h=>i(h),className:"mb-4",children:e.jsxs(Fs,{className:"grid w-full grid-cols-3",children:[e.jsxs(He,{value:"name",children:[e.jsx(Us,{className:"w-4 h-4 mr-2"}),"Vessel Name"]}),e.jsxs(He,{value:"imo",children:[e.jsx(Df,{className:"w-4 h-4 mr-2"}),"IMO Number"]}),e.jsxs(He,{value:"mmsi",children:[e.jsx(tj,{className:"w-4 h-4 mr-2"}),"MMSI"]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(oe,{value:a,onChange:h=>r(h.target.value),placeholder:u(),className:"pl-10 h-12 text-lg",autoFocus:!0})]}),e.jsx(M,{type:"submit",className:"h-12 px-6 bg-blue-500 hover:bg-blue-600",disabled:l||!a.trim(),children:l?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Searching..."]}):e.jsxs(e.Fragment,{children:["Track",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})})]})]}),e.jsx("div",{className:"mt-4 p-3 bg-muted/50 rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Tip:"})," IMO numbers are 7 digits. MMSI numbers are 9 digits. For vessel names, partial matches are supported."]})})]})}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4 max-w-4xl mx-auto",children:[e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>c("9703291"),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Us,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Try Demo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"MSC OSCAR"})]})]})})}),e.jsx("a",{href:"https://www.marinetraffic.com",target:"_blank",rel:"noopener noreferrer",className:"block",children:e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer h-full",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(oi,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Live Map"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"MarineTraffic"})]})]})})})}),e.jsx($,{className:"hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>t("/tracking/dashboard/ports"),children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(bu,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Port Schedules"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"View arrivals"})]})]})})})]}),e.jsxs($,{className:"max-w-4xl mx-auto",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Popular Vessels"}),e.jsx(ue,{children:"Click to view vessel details"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid md:grid-cols-2 gap-3",children:bKe.map(h=>e.jsxs("button",{onClick:()=>c(h.imo),className:"flex items-center justify-between p-3 rounded-lg hover:bg-muted transition-colors text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:h.flag}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:h.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["IMO: ",h.imo," â€¢ ",h.type]})]})]}),e.jsx(Jt,{className:"w-4 h-4 text-muted-foreground"})]},h.imo))})})]}),e.jsxs($,{className:"max-w-4xl mx-auto",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-lg",children:"Vessel Identification"}),e.jsx(ue,{children:"Understanding vessel identifiers"})]}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Df,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"IMO Number"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"International Maritime Organization number. 7 digits, unique to each vessel for its entire lifetime."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(tj,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-medium",children:"MMSI"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Maritime Mobile Service Identity. 9 digits used for AIS tracking and radio communication."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ha,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium",children:"Call Sign"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Radio call sign assigned by flag state. Used for maritime radio communications."})]})]})})]}),e.jsx("div",{className:"max-w-4xl mx-auto text-center text-sm text-muted-foreground",children:e.jsxs("p",{children:["Need more vessel data?"," ",e.jsxs("a",{href:"https://www.vesselfinder.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline inline-flex items-center gap-1",children:["Try VesselFinder ",e.jsx(ir,{className:"w-3 h-3"})]})," or ",e.jsxs("a",{href:"https://www.marinetraffic.com",target:"_blank",rel:"noopener noreferrer",className:"text-blue-500 hover:underline inline-flex items-center gap-1",children:["MarineTraffic ",e.jsx(ir,{className:"w-3 h-3"})]})]})})]})}const yf="https://trdrhub-api.onrender.com",NKe=t=>{switch(t){case"in_transit":return e.jsx(Q,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"In Transit"});case"at_port":return e.jsx(Q,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"At Port"});case"delivered":return e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",children:"Delivered"});case"delayed":return e.jsx(Q,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Delayed"});default:return e.jsx(Q,{className:"bg-slate-500/20 text-slate-400 border-slate-500/30",children:"Unknown"})}};function wKe(){const{user:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState("all"),[u,h]=m.useState("all"),[x,g]=m.useState(!1),[j,y]=m.useState(""),[b,N]=m.useState(!1),[C,_]=m.useState(null),A=async()=>{i(!0);try{const B=await fetch(`${yf}/tracking/portfolio?limit=100`,{credentials:"include"});if(B.ok){const G=await B.json();r(G.shipments||[])}}catch(B){console.error("Failed to fetch shipments:",B)}finally{i(!1)}};m.useEffect(()=>{t?A():i(!1)},[t]);const k=async B=>{try{(await fetch(`${yf}/tracking/portfolio/${B}`,{method:"DELETE",credentials:"include"})).ok&&(r(a.filter(q=>q.id!==B)),s({title:"Removed",description:"Shipment removed from portfolio"}))}catch{s({title:"Error",description:"Failed to remove shipment",variant:"destructive"})}},E=async B=>{try{const G=await fetch(`${yf}/tracking/portfolio/${B}/refresh`,{method:"POST",credentials:"include"});if(G.ok){const q=await G.json();r(a.map(z=>z.id===B?{...z,...q}:z)),s({title:"Refreshed",description:"Tracking data updated"})}}catch{s({title:"Error",description:"Failed to refresh",variant:"destructive"})}},D=async()=>{if(!j.trim()){s({title:"Error",description:"Please enter container numbers",variant:"destructive"});return}N(!0),_(null);try{const G=j.trim().split(`
apps\web\dist\assets\index-Bz84JA8h.js:637:HLCU5678901, Textile Order`,value:j,onChange:B=>y(B.target.value),rows:8,className:"font-mono text-sm"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Format: container_number, nickname, lc_number, lc_expiry, notes (only container_number required)"})]}),e.jsxs(M,{variant:"link",className:"text-xs p-0 h-auto",onClick:O,children:[e.jsx(Be,{className:"w-3 h-3 mr-1"}),"Download CSV Template"]}),C&&e.jsxs("div",{className:`p-3 rounded-lg ${C.errors>0?"bg-amber-500/10 border border-amber-500/30":"bg-emerald-500/10 border border-emerald-500/30"}`,children:[e.jsxs("p",{className:"text-sm font-medium",children:["âœ“ ",C.success," imported, âœ— ",C.errors," failed"]}),C.messages.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground mt-2 space-y-1",children:C.messages.slice(0,5).map((B,G)=>e.jsxs("li",{children:["â€¢ ",B]},G))})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>g(!1),children:"Cancel"}),e.jsx(M,{onClick:D,disabled:b,children:b?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Import"]})})]})]})]}),e.jsxs(M,{variant:"outline",onClick:()=>A(),disabled:n,children:[e.jsx(Lt,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsx(M,{asChild:!0,children:e.jsxs(pe,{to:"/tracking/dashboard",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Track New"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(li,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T.total}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tracked"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Us,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T.inTransit}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"In Transit"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T.delayed}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delayed"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:T.delivered}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivered"})]})]})})})]}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(oe,{value:l,onChange:B=>o(B.target.value),placeholder:"Search by reference, vessel, or nickname...",className:"pl-9"})]}),e.jsxs(Te,{value:d,onValueChange:c,children:[e.jsx(Pe,{className:"w-[150px]",children:e.jsx(Fe,{placeholder:"Status"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"in_transit",children:"In Transit"}),e.jsx(K,{value:"at_port",children:"At Port"}),e.jsx(K,{value:"delayed",children:"Delayed"}),e.jsx(K,{value:"delivered",children:"Delivered"})]})]}),e.jsxs(Te,{value:u,onValueChange:h,children:[e.jsx(Pe,{className:"w-[150px]",children:e.jsx(Fe,{placeholder:"Type"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Types"}),e.jsx(K,{value:"container",children:"Container"}),e.jsx(K,{value:"vessel",children:"Vessel"})]})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-0",children:e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{children:[e.jsx(je,{children:"Reference"}),e.jsx(je,{children:"Type"}),e.jsx(je,{children:"Route"}),e.jsx(je,{children:"Vessel"}),e.jsx(je,{children:"Status"}),e.jsx(je,{children:"Progress"}),e.jsx(je,{children:"ETA"}),e.jsx(je,{className:"text-right",children:"Actions"})]})}),e.jsx(oa,{children:n?e.jsx(At,{children:e.jsxs(fe,{colSpan:8,className:"text-center py-8",children:[e.jsx(Lt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading shipments..."})]})}):P.length===0?e.jsx(At,{children:e.jsxs(fe,{colSpan:8,className:"text-center py-8",children:[e.jsx(li,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No shipments found"}),e.jsx(M,{asChild:!0,variant:"link",className:"mt-2",children:e.jsx(pe,{to:"/tracking/dashboard",children:"Track your first shipment â†’"})})]})}):P.map(B=>e.jsxs(At,{children:[e.jsxs(fe,{children:[e.jsx(pe,{to:`/tracking/dashboard/${B.tracking_type}/${B.reference}`,className:"font-mono font-medium text-blue-500 hover:underline",children:B.reference}),B.nickname&&e.jsx("p",{className:"text-xs text-muted-foreground",children:B.nickname})]}),e.jsx(fe,{children:e.jsxs(Q,{variant:"outline",children:[B.tracking_type==="container"?e.jsx(li,{className:"w-3 h-3 mr-1"}):e.jsx(Us,{className:"w-3 h-3 mr-1"}),B.tracking_type]})}),e.jsx(fe,{children:e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{children:B.origin_port||"â€”"}),e.jsxs("p",{className:"text-muted-foreground",children:["â†’ ",B.destination_port||"â€”"]})]})}),e.jsx(fe,{className:"text-sm",children:B.vessel_name||"â€”"}),e.jsx(fe,{children:NKe(B.status)}),e.jsx(fe,{children:e.jsxs("div",{className:"w-24",children:[e.jsx("div",{className:"flex items-center justify-between text-xs mb-1",children:e.jsxs("span",{children:[B.progress,"%"]})}),e.jsx(es,{value:B.progress,className:"h-1.5"})]})}),e.jsx(fe,{className:"text-sm",children:B.eta?new Date(B.eta).toLocaleDateString():"â€”"}),e.jsx(fe,{className:"text-right",children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(dp,{className:"w-4 h-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsx(is,{asChild:!0,children:e.jsx(pe,{to:`/tracking/dashboard/${B.tracking_type}/${B.reference}`,children:"View Details"})}),e.jsxs(is,{onClick:()=>E(B.id),children:[e.jsx(Lt,{className:"w-4 h-4 mr-2"}),"Refresh"]}),e.jsxs(is,{onClick:()=>k(B.id),className:"text-red-500",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})})]},B.id))})]})})})]})}const QN="https://trdrhub-api.onrender.com",_Ke={arrival:{label:"Arrival",icon:Oe,color:"text-emerald-500"},departure:{label:"Departure",icon:Us,color:"text-blue-500"},delay:{label:"Delay",icon:mt,color:"text-amber-500"},eta_change:{label:"ETA Change",icon:mt,color:"text-purple-500"},lc_risk:{label:"LC Risk",icon:Ve,color:"text-red-500"},exception:{label:"Exception",icon:Ve,color:"text-red-500"}};function CKe(){const{user:t}=Dt(),{toast:s}=et(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(!1),[d,c]=m.useState(!1),[u,h]=m.useState({reference:"",tracking_type:"container",alert_type:"arrival",threshold_hours:24,notify_email:!0,notify_sms:!1}),x=async()=>{i(!0);try{const N=await fetch(`${QN}/tracking/alerts`,{credentials:"include"});if(N.ok){const C=await N.json();r(C)}}catch(N){console.error("Failed to fetch alerts:",N)}finally{i(!1)}};m.useEffect(()=>{t?x():i(!1)},[t]);const g=async()=>{o(!0);try{const N=await fetch(`${QN}/tracking/alerts`,{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(u)});if(N.ok){const C=await N.json();r([C,...a]),c(!1),h({reference:"",tracking_type:"container",alert_type:"arrival",threshold_hours:24,notify_email:!0,notify_sms:!1}),s({title:"Created",description:"Alert created successfully"})}else{const C=await N.json();s({title:"Error",description:C.detail||"Failed to create alert",variant:"destructive"})}}catch{s({title:"Error",description:"Failed to create alert",variant:"destructive"})}finally{o(!1)}},j=async N=>{try{const C=await fetch(`${QN}/tracking/alerts/${N}/toggle`,{method:"POST",credentials:"include"});if(C.ok){const _=await C.json();r(a.map(A=>A.id===N?{...A,is_active:_.is_active}:A))}}catch{s({title:"Error",description:"Failed to toggle alert",variant:"destructive"})}},y=async N=>{try{(await fetch(`${QN}/tracking/alerts/${N}`,{method:"DELETE",credentials:"include"})).ok&&(r(a.filter(_=>_.id!==N)),s({title:"Deleted",description:"Alert deleted"}))}catch{s({title:"Error",description:"Failed to delete alert",variant:"destructive"})}},b=a.filter(N=>N.is_active);return a.filter(N=>!N.is_active),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tracking Alerts"}),e.jsx("p",{className:"text-muted-foreground",children:"Get notified about shipment events"})]}),e.jsxs(wt,{open:d,onOpenChange:c,children:[e.jsx(wr,{asChild:!0,children:e.jsxs(M,{children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create Alert"]})}),e.jsxs(yt,{children:[e.jsxs(jt,{children:[e.jsx(bt,{children:"Create Tracking Alert"}),e.jsx(_t,{children:"Set up notifications for container or vessel events."})]}),e.jsxs("div",{className:"space-y-4 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Reference Number"}),e.jsx(oe,{value:u.reference,onChange:N=>h({...u,reference:N.target.value.toUpperCase()}),placeholder:"e.g., MSCU1234567"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Type"}),e.jsxs(Te,{value:u.tracking_type,onValueChange:N=>h({...u,tracking_type:N}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"container",children:"Container"}),e.jsx(K,{value:"vessel",children:"Vessel"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Alert Type"}),e.jsxs(Te,{value:u.alert_type,onValueChange:N=>h({...u,alert_type:N}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"arrival",children:"Arrival"}),e.jsx(K,{value:"departure",children:"Departure"}),e.jsx(K,{value:"delay",children:"Delay"}),e.jsx(K,{value:"eta_change",children:"ETA Change"}),e.jsx(K,{value:"lc_risk",children:"LC Risk"})]})]})]})]}),u.alert_type==="delay"&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Delay Threshold (hours)"}),e.jsx(oe,{type:"number",value:u.threshold_hours,onChange:N=>h({...u,threshold_hours:parseInt(N.target.value)})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(Z,{children:"Notification Channels"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Email"})]}),e.jsx(js,{checked:u.notify_email,onCheckedChange:N=>h({...u,notify_email:N})})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hw,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"SMS"})]}),e.jsx(js,{checked:u.notify_sms,onCheckedChange:N=>h({...u,notify_sms:N})})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsx(M,{onClick:g,disabled:!u.reference||l,children:l?"Creating...":"Create Alert"})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx($s,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Alerts"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:b.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:a.reduce((N,C)=>N+C.trigger_count,0)}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Triggered"})]})]})})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Your Alerts"}),e.jsx(ue,{children:"Configure notifications for your tracked shipments"})]}),e.jsx(U,{children:n?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Lt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading alerts..."})]}):a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx($s,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No alerts configured"}),e.jsx(M,{variant:"link",onClick:()=>c(!0),children:"Create your first alert â†’"})]}):e.jsx("div",{className:"space-y-3",children:a.map(N=>{const C=_Ke[N.alert_type]||{label:N.alert_type,icon:$s,color:"text-blue-500"},_=C.icon;return e.jsx("div",{className:`p-4 rounded-lg border ${N.is_active?"bg-card":"bg-muted/30 opacity-60"}`,children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center bg-opacity-10 ${N.is_active?"bg-blue-500/10":"bg-slate-500/10"}`,children:N.tracking_type==="container"?e.jsx(li,{className:`w-5 h-5 ${N.is_active?"text-blue-500":"text-slate-500"}`}):e.jsx(Us,{className:`w-5 h-5 ${N.is_active?"text-blue-500":"text-slate-500"}`})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-medium",children:N.reference}),e.jsxs(Q,{variant:"outline",className:"text-xs",children:[e.jsx(_,{className:`w-3 h-3 mr-1 ${C.color}`}),C.label]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 text-xs text-muted-foreground",children:[N.notify_email&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Va,{className:"w-3 h-3"})," Email"]}),N.notify_sms&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Hw,{className:"w-3 h-3"})," SMS"]}),e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Triggered ",N.trigger_count,"x"]}),N.last_triggered&&e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"â€¢"}),e.jsxs("span",{children:["Last: ",new Date(N.last_triggered).toLocaleDateString()]})]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(js,{checked:N.is_active,onCheckedChange:()=>j(N.id)}),e.jsx(M,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-600 hover:bg-red-500/10",onClick:()=>y(N.id),children:e.jsx(ia,{className:"w-4 h-4"})})]})]})},N.id)})})})]})]})}const SKe="https://trdrhub-api.onrender.com";function kKe(){const{user:t}=Dt(),[s,a]=m.useState([]),[r,n]=m.useState(!0),[i,l]=m.useState(""),[o,d]=m.useState("all");m.useEffect(()=>{t?(async()=>{n(!0);try{const j=await fetch(`${SKe}/tracking/portfolio?active_only=false&limit=100`,{credentials:"include"});if(j.ok){const b=((await j.json()).shipments||[]).sort((N,C)=>new Date(C.created_at).getTime()-new Date(N.created_at).getTime());a(b)}}catch(j){console.error("Failed to fetch history:",j)}finally{n(!1)}})():n(!1)},[t]);const c=()=>{const g=new Date;switch(o){case"7d":return new Date(g.setDate(g.getDate()-7));case"30d":return new Date(g.setDate(g.getDate()-30));case"90d":return new Date(g.setDate(g.getDate()-90));default:return null}},u=s.filter(g=>{const j=!i||g.reference.toLowerCase().includes(i.toLowerCase())||g.vessel_name?.toLowerCase().includes(i.toLowerCase()),y=c(),b=!y||new Date(g.created_at)>=y;return j&&b}),h=s.filter(g=>g.status==="delivered").length,x=s.filter(g=>{const j=new Date(g.created_at),y=new Date;return j.getMonth()===y.getMonth()&&j.getFullYear()===y.getFullYear()}).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tracking History"}),e.jsx("p",{className:"text-muted-foreground",children:"View your past tracking searches and completed shipments"})]}),e.jsxs(M,{variant:"outline",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Export CSV"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(xn,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:s.length}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Tracked"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivered"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ya,{className:"w-5 h-5 text-purple-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"This Month"})]})]})})})]}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(oe,{value:i,onChange:g=>l(g.target.value),placeholder:"Search by reference or vessel...",className:"pl-9"})]}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsxs(Pe,{className:"w-[150px]",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{placeholder:"Date Range"})]}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Time"}),e.jsx(K,{value:"7d",children:"Last 7 Days"}),e.jsx(K,{value:"30d",children:"Last 30 Days"}),e.jsx(K,{value:"90d",children:"Last 90 Days"})]})]})]})})}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Recent Tracking"}),e.jsx(ue,{children:"Click on any shipment to view details"})]}),e.jsx(U,{children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(mt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading history..."})]}):u.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(xn,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No tracking history"}),e.jsx(M,{asChild:!0,variant:"link",children:e.jsx(pe,{to:"/tracking/dashboard",children:"Start tracking â†’"})})]}):e.jsx("div",{className:"space-y-2",children:u.map(g=>e.jsxs(pe,{to:`/tracking/dashboard/${g.tracking_type}/${g.reference}`,className:"flex items-center justify-between p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-muted rounded-lg flex items-center justify-center",children:g.tracking_type==="container"?e.jsx(li,{className:"w-5 h-5 text-blue-500"}):e.jsx(Us,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("p",{className:"font-mono font-medium",children:g.reference}),g.status==="delivered"&&e.jsx(Q,{className:"bg-emerald-500/20 text-emerald-400 text-xs",children:"Delivered"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[g.origin_port||"â€”"," â†’ ",g.destination_port||"â€”",g.vessel_name&&` â€¢ ${g.vessel_name}`]})]})]}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[e.jsx("p",{children:new Date(g.created_at).toLocaleDateString()}),e.jsx("p",{className:"text-xs",children:new Date(g.created_at).toLocaleTimeString()})]})]},g.id))})})]})]})}const EKe="https://trdrhub-api.onrender.com",AKe=[{carrier:"MSC",onTime:94,avgDelay:.5,shipments:12,trend:"up"},{carrier:"Maersk",onTime:91,avgDelay:1.2,shipments:8,trend:"stable"},{carrier:"Hapag-Lloyd",onTime:89,avgDelay:1.8,shipments:6,trend:"down"},{carrier:"OOCL",onTime:96,avgDelay:.3,shipments:4,trend:"up"},{carrier:"CMA CGM",onTime:87,avgDelay:2.1,shipments:5,trend:"stable"}],PKe=[{route:"Shanghai â†’ Rotterdam",avgTransit:28,onTime:92,shipments:8},{route:"Chittagong â†’ Hamburg",avgTransit:32,onTime:85,shipments:5},{route:"Mumbai â†’ Los Angeles",avgTransit:35,onTime:88,shipments:4},{route:"Singapore â†’ New York",avgTransit:38,onTime:90,shipments:3}],DKe=t=>{switch(t){case"up":return e.jsx(T1,{className:"w-4 h-4 text-emerald-500"});case"down":return e.jsx(kD,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Nh,{className:"w-4 h-4 text-slate-500"})}};function TKe(){const{user:t}=Dt(),[s,a]=m.useState({active:0,delivered_30d:0,delayed:0,on_time_rate:0}),[r,n]=m.useState("30d"),[i,l]=m.useState(!0);return m.useEffect(()=>{t?(async()=>{try{const d=await fetch(`${EKe}/tracking/portfolio`,{credentials:"include"});if(d.ok){const c=await d.json();c.stats&&a(c.stats)}}catch(d){console.error("Failed to fetch stats:",d)}finally{l(!1)}})():l(!1)},[t]),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tracking Analytics"}),e.jsx("p",{className:"text-muted-foreground",children:"Performance insights and metrics for your shipments"})]}),e.jsxs(Te,{value:r,onValueChange:n,children:[e.jsxs(Pe,{className:"w-[150px]",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{})]}),e.jsxs(De,{children:[e.jsx(K,{value:"7d",children:"Last 7 Days"}),e.jsx(K,{value:"30d",children:"Last 30 Days"}),e.jsx(K,{value:"90d",children:"Last 90 Days"}),e.jsx(K,{value:"365d",children:"Last Year"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"On-Time Rate"}),e.jsxs("p",{className:"text-2xl font-bold",children:[s.on_time_rate,"%"]})]}),e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Vt,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-1 text-xs",children:[e.jsx(T1,{className:"w-3 h-3 text-emerald-500"}),e.jsx("span",{className:"text-emerald-500",children:"+2.3%"}),e.jsx("span",{className:"text-muted-foreground",children:"vs last period"})]})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Active Shipments"}),e.jsx("p",{className:"text-2xl font-bold",children:s.active})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Us,{className:"w-5 h-5 text-blue-500"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-1 text-xs",children:e.jsx("span",{className:"text-muted-foreground",children:"Currently tracking"})})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Delivered"}),e.jsx("p",{className:"text-2xl font-bold",children:s.delivered_30d})]}),e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-1 text-xs",children:e.jsx("span",{className:"text-muted-foreground",children:"Last 30 days"})})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently Delayed"}),e.jsx("p",{className:"text-2xl font-bold",children:s.delayed})]}),e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})})]}),e.jsx("div",{className:"mt-2 flex items-center gap-1 text-xs",children:s.delayed>0?e.jsx("span",{className:"text-amber-500",children:"Needs attention"}):e.jsx("span",{className:"text-muted-foreground",children:"All on schedule"})})]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(li,{className:"w-5 h-5"}),"Carrier Performance"]}),e.jsx(ue,{children:"On-time delivery rates by carrier"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:AKe.map(o=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:o.carrier}),DKe(o.trend)]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm",children:[e.jsxs("span",{className:"text-muted-foreground",children:[o.shipments," shipments"]}),e.jsxs(Q,{variant:o.onTime>=90?"default":"secondary",children:[o.onTime,"%"]})]})]}),e.jsx(es,{value:o.onTime,className:"h-2"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Avg delay: ",o.avgDelay," days"]})]},o.carrier))})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Us,{className:"w-5 h-5"}),"Route Performance"]}),e.jsx(ue,{children:"Transit times by route"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:PKe.map(o=>e.jsxs("div",{className:"p-3 rounded-lg bg-muted/50",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"font-medium text-sm",children:o.route}),e.jsxs(Q,{variant:o.onTime>=90?"default":"secondary",children:[o.onTime,"% on-time"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Avg Transit"}),e.jsxs("p",{className:"font-medium",children:[o.avgTransit," days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Shipments"}),e.jsx("p",{className:"font-medium",children:o.shipments})]})]})]},o.route))})})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Key Insights"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vt,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:"Performance Up"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your on-time delivery rate has improved by 2.3% compared to last month."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(li,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Top Carrier"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"OOCL is your best performing carrier with 96% on-time delivery rate."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mt,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium text-amber-600 dark:text-amber-400",children:"Recommendation"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Consider setting up delay alerts for Chittagong â†’ Hamburg route which has higher variability."})]})]})})]})]})}function FKe(){const{user:t}=Dt(),{toast:s}=et(),[a,r]=m.useState(!1),[n,i]=m.useState({emailNotifications:!0,smsNotifications:!1,pushNotifications:!0,emailAddress:t?.email||"",phoneNumber:"",defaultArrivalAlert:!0,defaultDelayAlert:!0,delayThresholdHours:24,arrivalWindowHours:48,timezone:"UTC",dateFormat:"DD/MM/YYYY",refreshInterval:60,autoTrackFromLC:!0,autoTrackFromInvoice:!1}),l=async()=>{r(!0);try{await new Promise(o=>setTimeout(o,500)),s({title:"Saved",description:"Settings updated successfully"})}catch{s({title:"Error",description:"Failed to save settings",variant:"destructive"})}finally{r(!1)}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Tracking Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure your tracking preferences"})]}),e.jsx(M,{onClick:l,disabled:a,children:a?e.jsxs(e.Fragment,{children:[e.jsx(Lt,{className:"w-4 h-4 mr-2 animate-spin"}),"Saving..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Bi,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx($s,{className:"w-5 h-5"}),"Notification Preferences"]}),e.jsx(ue,{children:"Choose how you want to receive alerts"})]}),e.jsx(U,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Email Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive alerts via email"})]})]}),e.jsx(js,{checked:n.emailNotifications,onCheckedChange:o=>i({...n,emailNotifications:o})})]}),n.emailNotifications&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx(Z,{children:"Email Address"}),e.jsx(oe,{type:"email",value:n.emailAddress,onChange:o=>i({...n,emailAddress:o.target.value}),placeholder:"your@email.com"})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Hw,{className:"w-4 h-4 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"SMS Notifications"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Receive alerts via SMS"})]})]}),e.jsx(js,{checked:n.smsNotifications,onCheckedChange:o=>i({...n,smsNotifications:o})})]}),n.smsNotifications&&e.jsxs("div",{className:"ml-6 space-y-2",children:[e.jsx(Z,{children:"Phone Number"}),e.jsx(oe,{type:"tel",value:n.phoneNumber,onChange:o=>i({...n,phoneNumber:o.target.value}),placeholder:"+1 234 567 8900"})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(mt,{className:"w-5 h-5"}),"Alert Defaults"]}),e.jsx(ue,{children:"Default settings for new shipment alerts"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-create arrival alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert me before shipment arrives"})]}),e.jsx(js,{checked:n.defaultArrivalAlert,onCheckedChange:o=>i({...n,defaultArrivalAlert:o})})]}),n.defaultArrivalAlert&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Alert me (hours before arrival)"}),e.jsxs(Te,{value:n.arrivalWindowHours.toString(),onValueChange:o=>i({...n,arrivalWindowHours:parseInt(o)}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"12",children:"12 hours"}),e.jsx(K,{value:"24",children:"24 hours"}),e.jsx(K,{value:"48",children:"48 hours"}),e.jsx(K,{value:"72",children:"72 hours"})]})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-create delay alerts"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Alert me when shipment is delayed"})]}),e.jsx(js,{checked:n.defaultDelayAlert,onCheckedChange:o=>i({...n,defaultDelayAlert:o})})]}),n.defaultDelayAlert&&e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Delay threshold (hours)"}),e.jsxs(Te,{value:n.delayThresholdHours.toString(),onValueChange:o=>i({...n,delayThresholdHours:parseInt(o)}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"6",children:"6 hours"}),e.jsx(K,{value:"12",children:"12 hours"}),e.jsx(K,{value:"24",children:"24 hours"}),e.jsx(K,{value:"48",children:"48 hours"})]})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"w-5 h-5"}),"Display Preferences"]}),e.jsx(ue,{children:"Customize how information is displayed"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Timezone"}),e.jsxs(Te,{value:n.timezone,onValueChange:o=>i({...n,timezone:o}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"UTC",children:"UTC"}),e.jsx(K,{value:"Asia/Dhaka",children:"Asia/Dhaka (GMT+6)"}),e.jsx(K,{value:"Asia/Kolkata",children:"Asia/Kolkata (GMT+5:30)"}),e.jsx(K,{value:"Asia/Karachi",children:"Asia/Karachi (GMT+5)"}),e.jsx(K,{value:"Europe/London",children:"Europe/London (GMT)"}),e.jsx(K,{value:"America/New_York",children:"America/New York (GMT-5)"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Date Format"}),e.jsxs(Te,{value:n.dateFormat,onValueChange:o=>i({...n,dateFormat:o}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"DD/MM/YYYY",children:"DD/MM/YYYY"}),e.jsx(K,{value:"MM/DD/YYYY",children:"MM/DD/YYYY"}),e.jsx(K,{value:"YYYY-MM-DD",children:"YYYY-MM-DD"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Auto-refresh interval"}),e.jsxs(Te,{value:n.refreshInterval.toString(),onValueChange:o=>i({...n,refreshInterval:parseInt(o)}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"30",children:"Every 30 seconds"}),e.jsx(K,{value:"60",children:"Every minute"}),e.jsx(K,{value:"300",children:"Every 5 minutes"}),e.jsx(K,{value:"0",children:"Manual only"})]})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(sn,{className:"w-5 h-5"}),"Integration Settings"]}),e.jsx(ue,{children:"Automatic tracking from other tools"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-track from LC"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically track containers mentioned in validated LCs"})]}),e.jsx(js,{checked:n.autoTrackFromLC,onCheckedChange:o=>i({...n,autoTrackFromLC:o})})]}),e.jsx(As,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:"Auto-track from Invoices"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically track containers from uploaded invoices"})]}),e.jsx(js,{checked:n.autoTrackFromInvoice,onCheckedChange:o=>i({...n,autoTrackFromInvoice:o})})]})]})]})]})]})}const RKe=[{question:"How do I track a container?",answer:"Enter your container number (e.g., MSCU1234567) in the search bar on the Overview page. We support tracking across 100+ carriers including MSC, Maersk, Hapag-Lloyd, OOCL, and more."},{question:"What container number formats are supported?",answer:"We support standard BIC (Bureau International des Containers) format: 4 letters followed by 7 digits (e.g., MSCU1234567). You can also search by Bill of Lading (B/L) number or booking reference."},{question:"How accurate is the ETA?",answer:"ETA accuracy depends on the carrier's data feed. We show a confidence percentage based on historical accuracy. Generally, ETAs become more accurate as the vessel approaches the destination port."},{question:"How do I set up alerts?",answer:"Go to the Alerts page and click 'Create Alert'. Choose the container/vessel reference, alert type (arrival, delay, etc.), and notification channels (email/SMS). Alerts are checked every 15 minutes."},{question:"Can I track multiple containers at once?",answer:"Yes! Use the Active Shipments page to manage your portfolio. You can add containers to your portfolio for continuous monitoring with automatic status updates."},{question:"How often is tracking data updated?",answer:"Tracking data is updated based on carrier feeds, typically every 4-6 hours. You can manually refresh individual shipments or all shipments at once from the Active Shipments page."},{question:"What does the 'Delayed' status mean?",answer:"A shipment is marked as 'Delayed' when its ETA has been pushed back from the original schedule. This could be due to port congestion, weather, or operational reasons. Check the timeline for specific events."},{question:"How do I export my tracking data?",answer:"Go to History page and click 'Export CSV' to download your tracking history. This includes all shipments, their routes, ETAs, and status history."}],OKe=[{title:"Getting Started",description:"Learn the basics of container and vessel tracking",icon:Fde,href:"#getting-started"},{title:"Setting Up Alerts",description:"Configure notifications for your shipments",icon:$s,href:"/tracking/dashboard/alerts"},{title:"Understanding Analytics",description:"Make sense of your tracking metrics",icon:Ws,href:"/tracking/dashboard/analytics"},{title:"Troubleshooting",description:"Common issues and solutions",icon:Ve,href:"#troubleshooting"}];function IKe(){const[t,s]=m.useState(""),a=RKe.filter(r=>r.question.toLowerCase().includes(t.toLowerCase())||r.answer.toLowerCase().includes(t.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Help & Support"}),e.jsx("p",{className:"text-muted-foreground",children:"Find answers and get assistance with tracking"})]}),e.jsx($,{children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"relative max-w-xl mx-auto",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-muted-foreground"}),e.jsx(oe,{value:t,onChange:r=>s(r.target.value),placeholder:"Search help articles...",className:"pl-10 h-12"})]})})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:OKe.map(r=>{const n=r.icon;return r.href.startsWith("#")?e.jsx($,{className:"cursor-pointer hover:bg-muted/50 transition-colors",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]}),e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"})]})})},r.title):e.jsx(pe,{to:r.href,children:e.jsx($,{className:"cursor-pointer hover:bg-muted/50 transition-colors h-full",children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(n,{className:"w-5 h-5 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-medium",children:r.title}),e.jsx("p",{className:"text-xs text-muted-foreground",children:r.description})]}),e.jsx(xr,{className:"w-4 h-4 text-muted-foreground"})]})})})},r.title)})}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Pn,{className:"w-5 h-5"}),"Frequently Asked Questions"]}),e.jsx(ue,{children:t?`${a.length} results for "${t}"`:"Common questions about tracking"})]}),e.jsx(U,{children:a.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Bt,{className:"w-8 h-8 mx-auto mb-2 text-muted-foreground opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No results found"}),e.jsx(M,{variant:"link",onClick:()=>s(""),children:"Clear search"})]}):e.jsx(oo,{type:"single",collapsible:!0,className:"w-full",children:a.map((r,n)=>e.jsxs(Qr,{value:`item-${n}`,children:[e.jsx(Xr,{className:"text-left",children:r.question}),e.jsx(en,{className:"text-muted-foreground",children:r.answer})]},n))})})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Va,{className:"w-5 h-5"}),"Email Support"]}),e.jsx(ue,{children:"Get help from our support team"})]}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Send us an email and we'll get back to you within 24 hours."}),e.jsx(M,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"mailto:support@trdrhub.com",children:[e.jsx(Va,{className:"w-4 h-4 mr-2"}),"support@trdrhub.com"]})})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"w-5 h-5"}),"Documentation"]}),e.jsx(ue,{children:"Detailed guides and API documentation"})]}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Explore our comprehensive documentation for advanced features."}),e.jsx(M,{variant:"outline",asChild:!0,children:e.jsxs("a",{href:"https://docs.trdrhub.com/tracking",target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"View Documentation"]})})]})]})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsx(ee,{children:"Pro Tips"})}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(li,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:"Container Search"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Use the full container number including the check digit for most accurate results."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx($s,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-medium",children:"Smart Alerts"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Set up both arrival and delay alerts to stay fully informed about your shipments."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mt,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium",children:"LC Integration"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Link containers to your LCs for automatic risk alerts when ETA threatens LC expiry."})]})]})})]})]})}const LKe="https://trdrhub-api.onrender.com",MKe=[{name:"MarineTraffic",description:"Live ship tracking with AIS data",url:"https://www.marinetraffic.com/en/ais/home",icon:Us,color:"text-blue-500"},{name:"VesselFinder",description:"Real-time vessel positions worldwide",url:"https://www.vesselfinder.com/",icon:ha,color:"text-emerald-500"},{name:"Container Tracker",description:"Track your container on carrier websites",url:"https://www.track-trace.com/container",icon:li,color:"text-amber-500"}],BKe=[{name:"Shanghai",code:"CNSHA",latitude:31.2304,longitude:121.4737,type:"origin"},{name:"Singapore",code:"SGSIN",latitude:1.3521,longitude:103.8198,type:"waypoint"},{name:"Rotterdam",code:"NLRTM",latitude:51.9225,longitude:4.4792,type:"destination"},{name:"Hamburg",code:"DEHAM",latitude:53.5511,longitude:9.9937,type:"destination"},{name:"Los Angeles",code:"USLAX",latitude:33.7405,longitude:-118.2674,type:"destination"},{name:"Chittagong",code:"BDCGP",latitude:22.3569,longitude:91.7832,type:"origin"}],$Ke={coordinates:[[31.2304,121.4737],[22.3,114.2],[1.3521,103.8198],[10.5,80],[12.8,43.3],[30,32.5],[35.5,25],[36,5],[48,-5],[51.9225,4.4792]],color:"#3b82f6"};function UKe(){const{user:t}=Dt(),s=zt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(!1);m.useEffect(()=>{t?(async()=>{try{const h=await fetch(`${LKe}/tracking/portfolio?limit=50`,{credentials:"include"});if(h.ok){const g=((await h.json()).shipments||[]).map((j,y)=>({id:j.id,reference:j.reference,type:j.tracking_type||"container",status:j.status||"in_transit",latitude:j.latitude||30+y*5%30,longitude:j.longitude||50+y*20%100,vessel_name:j.vessel_name,carrier:j.carrier,origin:j.origin_port,destination:j.destination_port,eta:j.eta,progress:j.progress}));r(g)}}catch(h){console.error("Failed to fetch locations:",h)}finally{i(!1)}})():(r([{id:"demo-1",reference:"MSCU1234567",type:"container",status:"in_transit",latitude:28.5,longitude:55,vessel_name:"MSC OSCAR",carrier:"MSC",origin:"Shanghai, CN",destination:"Rotterdam, NL",eta:"2025-01-15",progress:65},{id:"demo-2",reference:"MAEU987654321",type:"container",status:"delayed",latitude:30.5,longitude:32.5,vessel_name:"MAERSK EDMONTON",carrier:"Maersk",origin:"Chittagong, BD",destination:"Hamburg, DE",eta:"2025-01-18",progress:55},{id:"demo-3",reference:"HLCU5678901",type:"container",status:"at_port",latitude:1.35,longitude:103.82,vessel_name:"BERLIN EXPRESS",carrier:"Hapag-Lloyd",origin:"Mumbai, IN",destination:"Los Angeles, US",eta:"2025-01-12",progress:42}]),i(!1))},[t]);const d=u=>{s(`/tracking/dashboard/${u.type}/${u.reference}`)},c=()=>{i(!0),setTimeout(()=>i(!1),1e3)};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Route Map"}),e.jsx("p",{className:"text-muted-foreground",children:"Visualize your shipment locations and routes"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",onClick:c,disabled:n,children:[e.jsx(Lt,{className:`w-4 h-4 mr-2 ${n?"animate-spin":""}`}),"Refresh"]}),e.jsxs(M,{variant:"outline",onClick:()=>o(!l),children:[e.jsx(mue,{className:"w-4 h-4 mr-2"}),l?"Exit Fullscreen":"Fullscreen"]})]})]}),e.jsx($,{className:"overflow-hidden",children:e.jsx(iKe,{shipments:a,ports:BKe,routes:[$Ke],onShipmentClick:d,height:l?"calc(100vh - 200px)":500})}),a.length>0&&e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Your Shipment Locations"}),e.jsxs(ue,{children:[a.length," shipments on map â€¢ Click markers to view details"]})]}),e.jsx(U,{children:e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-4",children:a.slice(0,6).map(u=>e.jsxs("div",{onClick:()=>d(u),className:"p-4 rounded-lg border bg-muted/30 hover:bg-muted/50 transition-colors cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("div",{className:"w-8 h-8 bg-blue-500/10 rounded-lg flex items-center justify-center",children:u.type==="container"?e.jsx(li,{className:"w-4 h-4 text-blue-500"}):e.jsx(Us,{className:"w-4 h-4 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-mono font-medium text-sm",children:u.reference}),e.jsx("p",{className:"text-xs text-muted-foreground",children:u.vessel_name||u.carrier||"Tracking..."})]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["ðŸ“ ",u.latitude.toFixed(2),"Â°, ",u.longitude.toFixed(2),"Â°"]})]},u.id))})})]}),e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:MKe.map(u=>{const h=u.icon;return e.jsx($,{className:"hover:bg-muted/50 transition-colors",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-muted rounded-lg flex items-center justify-center",children:e.jsx(h,{className:`w-6 h-6 ${u.color}`})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium mb-1",children:u.name}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:u.description}),e.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:u.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ir,{className:"w-4 h-4 mr-2"}),"Open Map"]})})]})]})})},u.name)})})]})}const zKe=[{name:"Rotterdam",country:"Netherlands",code:"NLRTM",url:"https://www.portofrotterdam.com/en/shipping/schedule-and-planning",vessels:234,avgWait:"4h"},{name:"Singapore",country:"Singapore",code:"SGSIN",url:"https://www.mpa.gov.sg/web/portal/home/maritime-singapore/port-operations",vessels:312,avgWait:"6h"},{name:"Shanghai",country:"China",code:"CNSHA",url:"https://www.portshanghai.com.cn/en/",vessels:456,avgWait:"8h"},{name:"Hamburg",country:"Germany",code:"DEHAM",url:"https://www.hafen-hamburg.de/en/shipping/",vessels:178,avgWait:"3h"},{name:"Los Angeles",country:"USA",code:"USLAX",url:"https://www.portoflosangeles.org/business/statistics",vessels:145,avgWait:"12h"},{name:"Chittagong",country:"Bangladesh",code:"BDCGP",url:"https://cpa.gov.bd/",vessels:45,avgWait:"24h"},{name:"Mumbai (JNPT)",country:"India",code:"INNSA",url:"https://www.jnport.gov.in/",vessels:89,avgWait:"10h"},{name:"Karachi",country:"Pakistan",code:"PKKHI",url:"https://www.kpt.gov.pk/",vessels:52,avgWait:"18h"}],qKe=[{name:"Port Economics",description:"Global port congestion data and analytics",url:"https://www.porteconomics.eu/"},{name:"FleetMon",description:"Port arrivals and departures",url:"https://www.fleetmon.com/ports/"},{name:"PortWatch",description:"Real-time port disruption monitoring",url:"https://portwatch.imf.org/"}];function VKe(){const[t,s]=m.useState(""),[a,r]=m.useState("all"),n=zKe.filter(i=>{const l=!t||i.name.toLowerCase().includes(t.toLowerCase())||i.country.toLowerCase().includes(t.toLowerCase())||i.code.toLowerCase().includes(t.toLowerCase()),o=a==="all"||a==="asia"&&["Bangladesh","Singapore","China","India","Pakistan"].includes(i.country)||a==="europe"&&["Netherlands","Germany"].includes(i.country)||a==="americas"&&["USA"].includes(i.country);return l&&o});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Port Schedules"}),e.jsx("p",{className:"text-muted-foreground",children:"View vessel schedules and port congestion information"})]}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),e.jsx(oe,{value:t,onChange:i=>s(i.target.value),placeholder:"Search ports by name, country, or UN/LOCODE...",className:"pl-9"})]}),e.jsxs(Te,{value:a,onValueChange:r,children:[e.jsxs(Pe,{className:"w-[150px]",children:[e.jsx(oi,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{placeholder:"Region"})]}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Regions"}),e.jsx(K,{value:"asia",children:"Asia"}),e.jsx(K,{value:"europe",children:"Europe"}),e.jsx(K,{value:"americas",children:"Americas"})]})]})]})})}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map(i=>e.jsx($,{className:"hover:bg-muted/50 transition-colors",children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium",children:i.name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:i.country})]}),e.jsx(Q,{variant:"outline",className:"font-mono text-xs",children:i.code})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm mb-3",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Vessels"}),e.jsxs("p",{className:"font-medium flex items-center gap-1",children:[e.jsx(Us,{className:"w-3 h-3"}),i.vessels]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-muted-foreground text-xs",children:"Avg Wait"}),e.jsxs("p",{className:"font-medium flex items-center gap-1",children:[e.jsx(mt,{className:"w-3 h-3"}),i.avgWait]})]})]}),e.jsx(M,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ir,{className:"w-3 h-3 mr-2"}),"View Schedule"]})})]})},i.code))}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Port Intelligence Resources"}),e.jsx(ue,{children:"External resources for port schedules and congestion data"})]}),e.jsx(U,{children:e.jsx("div",{className:"grid md:grid-cols-3 gap-4",children:qKe.map(i=>e.jsxs("a",{href:i.url,target:"_blank",rel:"noopener noreferrer",className:"p-4 rounded-lg border hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(bu,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium",children:i.name})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:i.description})]},i.name))})})]}),e.jsx($,{className:"bg-blue-500/5 border-blue-500/20",children:e.jsx(U,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ya,{className:"w-6 h-6 text-blue-500"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:"Integrated Port Schedules Coming Soon"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We're building direct integrations with major ports to show real-time vessel schedules, berth availability, and congestion alerts."})]}),e.jsx(Q,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Q1 2025"})]})})})]})}const WKe="https://trdrhub-api.onrender.com",HKe=t=>{const s=[];return t.forEach((a,r)=>{a.status==="delayed"&&s.push({id:`exc-${r}-delay`,reference:a.reference,type:"delay",severity:"warning",title:"ETA Delay",description:`Shipment delayed. Original ETA was ${a.eta?new Date(a.eta).toLocaleDateString():"unknown"}.`,created_at:new Date().toISOString(),resolved:!1,shipment_type:a.tracking_type}),a.lc_expiry&&new Date(a.lc_expiry)<new Date(a.eta)&&s.push({id:`exc-${r}-lc`,reference:a.reference,type:"lc_risk",severity:"critical",title:"LC Expiry Risk",description:"ETA exceeds LC expiry date. Documents may not be negotiable.",created_at:new Date().toISOString(),resolved:!1,shipment_type:a.tracking_type})}),s},GKe=t=>{switch(t){case"critical":return e.jsx(Q,{className:"bg-red-500/20 text-red-400 border-red-500/30",children:"Critical"});case"warning":return e.jsx(Q,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:"Warning"});default:return e.jsx(Q,{className:"bg-blue-500/20 text-blue-400 border-blue-500/30",children:"Info"})}},KKe=(t,s)=>{const a=s==="critical"?"text-red-500":s==="warning"?"text-amber-500":"text-blue-500";switch(t){case"delay":return e.jsx(mt,{className:`w-5 h-5 ${a}`});case"lc_risk":return e.jsx(Ve,{className:`w-5 h-5 ${a}`});case"customs":return e.jsx(ks,{className:`w-5 h-5 ${a}`});default:return e.jsx(Ve,{className:`w-5 h-5 ${a}`})}};function YKe(){const{user:t}=Dt(),[s,a]=m.useState([]),[r,n]=m.useState(!0),[i,l]=m.useState("all"),[o,d]=m.useState("active");m.useEffect(()=>{t?(async()=>{try{const j=await fetch(`${WKe}/tracking/portfolio?limit=100`,{credentials:"include"});if(j.ok){const y=await j.json(),b=HKe(y.shipments||[]);a(b)}}catch(j){console.error("Failed to fetch exceptions:",j)}finally{n(!1)}})():n(!1)},[t]);const c=s.filter(g=>{const j=i==="all"||g.severity===i,y=o==="all"||o==="active"&&!g.resolved||o==="resolved"&&g.resolved;return j&&y}),u=s.filter(g=>g.severity==="critical"&&!g.resolved).length,h=s.filter(g=>g.severity==="warning"&&!g.resolved).length,x=s.filter(g=>g.resolved).length;return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Exceptions"}),e.jsx("p",{className:"text-muted-foreground",children:"Shipment issues requiring attention"})]}),e.jsxs(M,{variant:"outline",disabled:r,children:[e.jsx(Lt,{className:`w-4 h-4 mr-2 ${r?"animate-spin":""}`}),"Refresh"]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-red-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-red-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:u}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Critical"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(ks,{className:"w-5 h-5 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:h}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Warnings"})]})]})})}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Oe,{className:"w-5 h-5 text-emerald-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold",children:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Resolved"})]})]})})})]}),e.jsx($,{children:e.jsx(U,{className:"p-4",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(Te,{value:i,onValueChange:l,children:[e.jsx(Pe,{className:"w-[150px]",children:e.jsx(Fe,{placeholder:"Severity"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Severity"}),e.jsx(K,{value:"critical",children:"Critical"}),e.jsx(K,{value:"warning",children:"Warning"}),e.jsx(K,{value:"info",children:"Info"})]})]}),e.jsxs(Te,{value:o,onValueChange:d,children:[e.jsx(Pe,{className:"w-[150px]",children:e.jsx(Fe,{placeholder:"Status"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"active",children:"Active"}),e.jsx(K,{value:"resolved",children:"Resolved"})]})]})]})})}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsx(ee,{children:"Active Exceptions"}),e.jsxs(ue,{children:[c.length," exception",c.length!==1?"s":""," found"]})]}),e.jsx(U,{children:r?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Lt,{className:"w-6 h-6 animate-spin mx-auto mb-2 text-muted-foreground"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading exceptions..."})]}):c.length===0?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Oe,{className:"w-8 h-8 mx-auto mb-2 text-emerald-500 opacity-50"}),e.jsx("p",{className:"text-muted-foreground",children:"No exceptions found"}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"All your shipments are on track"})]}):e.jsx("div",{className:"space-y-3",children:c.map(g=>e.jsx("div",{className:`p-4 rounded-lg border ${g.resolved?"bg-muted/30 opacity-60":"bg-card"}`,children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"mt-0.5",children:KKe(g.type,g.severity)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx(pe,{to:`/tracking/dashboard/${g.shipment_type}/${g.reference}`,className:"font-mono text-blue-500 hover:underline",children:g.reference}),GKe(g.severity),g.resolved&&e.jsx(Q,{variant:"outline",className:"text-emerald-500",children:"Resolved"})]}),e.jsx("p",{className:"font-medium",children:g.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:g.description}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:new Date(g.created_at).toLocaleString()})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",size:"sm",asChild:!0,children:e.jsx(pe,{to:`/tracking/dashboard/${g.shipment_type}/${g.reference}`,children:"View"})}),!g.resolved&&e.jsxs(M,{size:"sm",variant:"ghost",className:"text-emerald-500",children:[e.jsx(Oe,{className:"w-4 h-4 mr-1"}),"Resolve"]})]})]})},g.id))})})]})]})}const ZKe="https://trdrhub-api.onrender.com",JKe=[{carrier:"OOCL",logo:"ðŸš¢",onTimeRate:96,avgTransit:28,avgDelay:.3,shipments:42,trend:"up",rating:"A+"},{carrier:"MSC",logo:"ðŸš¢",onTimeRate:94,avgTransit:30,avgDelay:.5,shipments:128,trend:"up",rating:"A"},{carrier:"Maersk",logo:"ðŸš¢",onTimeRate:91,avgTransit:29,avgDelay:1.2,shipments:85,trend:"stable",rating:"A-"},{carrier:"CMA CGM",logo:"ðŸš¢",onTimeRate:89,avgTransit:31,avgDelay:1.5,shipments:56,trend:"down",rating:"B+"},{carrier:"Hapag-Lloyd",logo:"ðŸš¢",onTimeRate:88,avgTransit:32,avgDelay:1.8,shipments:34,trend:"stable",rating:"B+"},{carrier:"Evergreen",logo:"ðŸš¢",onTimeRate:87,avgTransit:30,avgDelay:2,shipments:28,trend:"up",rating:"B"}],QKe=t=>{switch(t){case"up":return e.jsx(Vt,{className:"w-4 h-4 text-emerald-500"});case"down":return e.jsx(lr,{className:"w-4 h-4 text-red-500"});default:return e.jsx(Nh,{className:"w-4 h-4 text-slate-500"})}},XKe=t=>t.startsWith("A")?"bg-emerald-500/20 text-emerald-400 border-emerald-500/30":t.startsWith("B")?"bg-blue-500/20 text-blue-400 border-blue-500/30":t.startsWith("C")?"bg-amber-500/20 text-amber-400 border-amber-500/30":"bg-slate-500/20 text-slate-400 border-slate-500/30";function eYe(){const{user:t}=Dt(),[s,a]=m.useState("90d"),[r,n]=m.useState(!0),[i,l]=m.useState({totalShipments:0,onTimeRate:92,avgTransitDays:30,avgDelayDays:1.2});return m.useEffect(()=>{t?(async()=>{try{const d=await fetch(`${ZKe}/tracking/portfolio`,{credentials:"include"});if(d.ok){const c=await d.json();c.stats&&l({totalShipments:c.shipments?.length||0,onTimeRate:c.stats.on_time_rate||92,avgTransitDays:30,avgDelayDays:1.2})}}catch(d){console.error("Failed to fetch stats:",d)}finally{n(!1)}})():n(!1)},[t,s]),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Performance"}),e.jsx("p",{className:"text-muted-foreground",children:"Carrier scorecards and delivery metrics"})]}),e.jsxs(Te,{value:s,onValueChange:a,children:[e.jsxs(Pe,{className:"w-[150px]",children:[e.jsx(ya,{className:"w-4 h-4 mr-2"}),e.jsx(Fe,{})]}),e.jsxs(De,{children:[e.jsx(K,{value:"30d",children:"Last 30 Days"}),e.jsx(K,{value:"90d",children:"Last 90 Days"}),e.jsx(K,{value:"180d",children:"Last 6 Months"}),e.jsx(K,{value:"365d",children:"Last Year"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"On-Time Delivery"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.onTimeRate,"%"]})]}),e.jsx("div",{className:"w-10 h-10 bg-emerald-500/10 rounded-lg flex items-center justify-center",children:e.jsx(aj,{className:"w-5 h-5 text-emerald-500"})})]}),e.jsx(es,{value:i.onTimeRate,className:"h-1.5 mt-2"})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Transit Time"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.avgTransitDays,"d"]})]}),e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center",children:e.jsx(mt,{className:"w-5 h-5 text-blue-500"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Industry avg: 32 days"})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Avg Delay"}),e.jsxs("p",{className:"text-2xl font-bold",children:[i.avgDelayDays,"d"]})]}),e.jsx("div",{className:"w-10 h-10 bg-amber-500/10 rounded-lg flex items-center justify-center",children:e.jsx(Ve,{className:"w-5 h-5 text-amber-500"})})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"When delayed"})]})}),e.jsx($,{children:e.jsxs(U,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Shipments"}),e.jsx("p",{className:"text-2xl font-bold",children:i.totalShipments||"â€”"})]}),e.jsx("div",{className:"w-10 h-10 bg-purple-500/10 rounded-lg flex items-center justify-center",children:e.jsx(li,{className:"w-5 h-5 text-purple-500"})})]}),e.jsxs("p",{className:"text-xs text-muted-foreground mt-2",children:["Last ",s.replace("d"," days")]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(ag,{className:"w-5 h-5"}),"Carrier Scorecards"]}),e.jsx(ue,{children:"Performance rankings based on your shipment history"})]}),e.jsx(U,{children:e.jsx("div",{className:"space-y-4",children:JKe.map((o,d)=>e.jsxs("div",{className:"p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-blue-500/10 rounded-lg flex items-center justify-center text-xl",children:o.logo}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:o.carrier}),e.jsx(Q,{className:XKe(o.rating),children:o.rating}),d===0&&e.jsxs(Q,{className:"bg-amber-500/20 text-amber-400 border-amber-500/30",children:[e.jsx(ag,{className:"w-3 h-3 mr-1"}),"Top Performer"]})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[o.shipments," shipments tracked"]})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[QKe(o.trend),e.jsx("span",{className:"text-sm text-muted-foreground",children:o.trend==="up"?"Improving":o.trend==="down"?"Declining":"Stable"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"On-Time Rate"}),e.jsxs("span",{className:"text-sm font-medium",children:[o.onTimeRate,"%"]})]}),e.jsx(es,{value:o.onTimeRate,className:"h-1.5"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Transit"}),e.jsxs("p",{className:"text-sm font-medium",children:[o.avgTransit," days"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Avg Delay"}),e.jsxs("p",{className:"text-sm font-medium",children:[o.avgDelay," days"]})]})]})]},o.carrier))})})]}),e.jsxs($,{children:[e.jsx(X,{children:e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Ws,{className:"w-5 h-5"}),"Insights & Recommendations"]})}),e.jsx(U,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 rounded-lg bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Vt,{className:"w-5 h-5 text-emerald-500"}),e.jsx("span",{className:"font-medium text-emerald-600 dark:text-emerald-400",children:"Best Performer"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"OOCL"})," has the highest on-time rate (96%) with minimal delays. Consider prioritizing them for time-sensitive shipments."]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-amber-500/10 border border-amber-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ve,{className:"w-5 h-5 text-amber-500"}),e.jsx("span",{className:"font-medium text-amber-600 dark:text-amber-400",children:"Watch List"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"CMA CGM"})," performance is declining. Monitor closely and consider alternatives for critical shipments."]})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-blue-500/10 border border-blue-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(mt,{className:"w-5 h-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-blue-600 dark:text-blue-400",children:"Transit Optimization"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Your average transit time (30 days) is 2 days below industry average. Good carrier selection is paying off."})]}),e.jsxs("div",{className:"p-4 rounded-lg bg-purple-500/10 border border-purple-500/20",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(aj,{className:"w-5 h-5 text-purple-500"}),e.jsx("span",{className:"font-medium text-purple-600 dark:text-purple-400",children:"Goal Progress"})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Your on-time rate of ",i.onTimeRate,"% is above the 85% target. Keep up the excellent carrier management."]})]})]})})]})]})}function tYe({...t}){const s=rn(),{user:a,logout:r}=Dt(),n=l=>l==="/doc-generator/dashboard"?s.pathname===l:s.pathname.startsWith(l),i=async l=>{l?.preventDefault(),l?.stopPropagation();try{await r()}catch(o){console.warn("Logout failed:",o),window.location.href="/login"}};return e.jsxs(Zo,{collapsible:"icon",...t,children:[e.jsxs(Jo,{children:[e.jsx("div",{className:"px-2 pt-2",children:e.jsxs(pe,{to:"/hub",className:"flex items-center gap-2 text-xs text-muted-foreground hover:text-foreground transition-colors mb-2",children:[e.jsx(ma,{className:"h-3 w-3"}),"Back to Hub"]})}),e.jsx(ls,{children:e.jsx(rt,{children:e.jsx(it,{size:"lg",asChild:!0,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-[#B2F273]/10 text-[#B2F273]",children:e.jsx(Be,{className:"size-4"})}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none",children:[e.jsx("span",{className:"font-semibold",children:"Doc Generator"}),e.jsx("span",{className:"text-xs text-muted-foreground",children:"Shipping Documents"})]})]})})})})]}),e.jsxs(Xo,{className:"px-2",children:[e.jsxs(Zs,{children:[e.jsx(Aa,{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Documents"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard")&&s.pathname==="/doc-generator/dashboard",asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273]",children:e.jsxs(pe,{to:"/doc-generator/dashboard",children:[e.jsx(aV,{}),e.jsx("span",{children:"All Documents"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/new"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273]",children:e.jsxs(pe,{to:"/doc-generator/dashboard/new",children:[e.jsx(Yt,{}),e.jsx("span",{children:"Create New"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Quick Entry"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/templates"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/templates",children:[e.jsx(lue,{}),e.jsx("span",{children:"Templates"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/products"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/products",children:[e.jsx(Ps,{}),e.jsx("span",{children:"Product Catalog"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/buyers"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/buyers",children:[e.jsx(xs,{}),e.jsx("span",{children:"Buyer Directory"})]})})})]})})]}),e.jsxs(Zs,{children:[e.jsx(Aa,{className:"text-[#B2F273] font-mono text-xs tracking-wider uppercase",children:"Advanced"}),e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/signatures"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/signatures",children:[e.jsx(oV,{}),e.jsx("span",{children:"Digital Signatures"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/bank-formats"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/bank-formats",children:[e.jsx(Bs,{}),e.jsx("span",{children:"Bank Formats"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/certificates"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/certificates",children:[e.jsx(ag,{}),e.jsx("span",{children:"GSP / EUR.1 Certs"})]})})})]})})]}),e.jsx(Zs,{className:"mt-auto",children:e.jsx(Js,{children:e.jsxs(ls,{children:[e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/branding"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/branding",children:[e.jsx(Wj,{}),e.jsx("span",{children:"Company Branding"})]})})}),e.jsx(rt,{children:e.jsx(it,{isActive:n("/doc-generator/dashboard/help"),asChild:!0,className:"text-[#EDF5F2]/80 hover:text-white hover:bg-[#00382E] data-[active=true]:bg-[#B2F273]/10 data-[active=true]:text-[#B2F273] font-display",children:e.jsxs(pe,{to:"/doc-generator/dashboard/help",children:[e.jsx(Pn,{}),e.jsx("span",{children:"Help"})]})})})]})})})]}),e.jsx(Qo,{children:a&&e.jsx(ls,{children:e.jsx(rt,{children:e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1.5 w-full",children:[e.jsx("div",{className:"flex aspect-square size-8 items-center justify-center rounded-lg bg-muted text-muted-foreground",children:a.name?.charAt(0).toUpperCase()||a.email?.charAt(0).toUpperCase()||"U"}),e.jsxs("div",{className:"flex flex-col gap-0.5 leading-none flex-1 min-w-0",children:[e.jsx("span",{className:"truncate font-medium text-sm",children:a.name||a.email}),e.jsx("span",{className:"text-xs text-muted-foreground capitalize",children:a.role||"User"})]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:i,className:"h-8 w-8 p-0",title:"Sign out",children:e.jsx(Yo,{className:"h-4 w-4"})})]})})})})]})}function sYe(){return e.jsx(Lc,{sidebar:e.jsx(tYe,{}),breadcrumbs:[{label:"Hub",href:"/hub"},{label:"Doc Generator"}],title:"Doc Generator",children:e.jsx(ip,{})})}const cz="https://trdrhub-api.onrender.com";function aYe({open:t,onOpenChange:s,onImportComplete:a}){const r=zt(),{toast:n}=et(),{user:i}=Dt(),[l,o]=m.useState([]),[d,c]=m.useState(null),[u,h]=m.useState(!0),[x,g]=m.useState(!1),[j,y]=m.useState(!1),[b,N]=m.useState("");m.useEffect(()=>{t&&C()},[t]);const C=async()=>{g(!0);try{const k=await fetch(`${cz}/lcopilot/sessions?limit=20`,{headers:{Authorization:`Bearer ${i?.access_token||""}`}});if(!k.ok)throw new Error("Failed to fetch sessions");const E=await k.json();o(E.sessions||[])}catch(k){console.error("Error fetching sessions:",k),o([{id:"demo-1",created_at:new Date().toISOString(),lc_number:"LC/2024/001234",beneficiary_name:"Demo Exporter Ltd",applicant_name:"Demo Importer Inc",lc_amount:5e4,currency:"USD",status:"completed"},{id:"demo-2",created_at:new Date(Date.now()-864e5).toISOString(),lc_number:"LC/2024/005678",beneficiary_name:"Global Trade Co",applicant_name:"International Buyers",lc_amount:125e3,currency:"USD",status:"completed"}])}finally{g(!1)}},_=async()=>{if(d){y(!0);try{const k=await fetch(`${cz}/doc-generator/import-from-lcopilot`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${i?.access_token||""}`},body:JSON.stringify({session_id:d,include_goods:u})});if(!k.ok)throw new Error("Failed to import LC data");const E=await k.json();n({title:"LC Data Imported!",description:`Document set created from LC ${E.lc_number||""}`}),s(!1),a?a(E.id):r(`/doc-generator/dashboard/${E.id}`)}catch(k){console.error("Error importing:",k),n({title:"Import Failed",description:"Could not import LC data. Please try again.",variant:"destructive"})}finally{y(!1)}}},A=l.filter(k=>k.lc_number?.toLowerCase().includes(b.toLowerCase())||k.beneficiary_name?.toLowerCase().includes(b.toLowerCase())||k.applicant_name?.toLowerCase().includes(b.toLowerCase()));return e.jsx(wt,{open:t,onOpenChange:s,children:e.jsxs(yt,{className:"max-w-2xl bg-[#00261C] border-[#EDF5F2]/10 text-[#EDF5F2]",children:[e.jsxs(jt,{children:[e.jsxs(bt,{className:"flex items-center gap-2 text-white font-display",children:[e.jsx(Gt,{className:"h-5 w-5 text-[#B2F273]"}),"Import from LCopilot"]}),e.jsx(_t,{className:"text-[#EDF5F2]/60",children:"Select a validated LC to pre-fill document data"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-[#EDF5F2]/40"}),e.jsx(oe,{placeholder:"Search by LC number, beneficiary, or applicant...",value:b,onChange:k=>N(k.target.value),className:"pl-10 bg-[#00382E]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40"})]}),e.jsx("div",{className:"border border-[#EDF5F2]/10 rounded-lg max-h-[300px] overflow-y-auto bg-[#00382E]/30",children:x?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-[#B2F273]"})}):A.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center p-8 text-center",children:[e.jsx(Be,{className:"h-12 w-12 text-[#EDF5F2]/20 mb-2"}),e.jsx("p",{className:"text-sm text-[#EDF5F2]/60",children:"No validated LCs found"}),e.jsx("p",{className:"text-xs text-[#EDF5F2]/40 mt-1",children:"Validate an LC in LCopilot first"})]}):e.jsx("div",{className:"divide-y divide-[#EDF5F2]/10",children:A.map(k=>e.jsxs("div",{className:`p-4 cursor-pointer hover:bg-[#00382E] transition-colors ${d===k.id?"bg-[#B2F273]/10 border-l-2 border-l-[#B2F273]":""}`,onClick:()=>c(k.id),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:k.lc_number}),e.jsx(Q,{variant:k.status==="completed"?"default":"secondary",className:"bg-[#B2F273]/10 text-[#B2F273] hover:bg-[#B2F273]/20 border border-[#B2F273]/20",children:k.status})]}),e.jsxs("p",{className:"text-sm text-[#EDF5F2]/60 mt-1",children:[k.beneficiary_name," â†’ ",k.applicant_name]}),e.jsxs("p",{className:"text-sm font-medium mt-1 text-[#EDF5F2]/80",children:[k.currency," ",k.lc_amount?.toLocaleString()]})]}),d===k.id&&e.jsx(Oe,{className:"h-5 w-5 text-[#B2F273]"})]}),e.jsx("p",{className:"text-xs text-[#EDF5F2]/40 mt-2",children:new Date(k.created_at).toLocaleDateString()})]},k.id))})}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(rr,{id:"include-goods",checked:u,onCheckedChange:k=>h(k===!0),className:"border-[#EDF5F2]/40 data-[state=checked]:bg-[#B2F273] data-[state=checked]:text-[#00261C]"}),e.jsx(Z,{htmlFor:"include-goods",className:"text-sm text-[#EDF5F2]/80",children:"Include goods description as line item"})]}),e.jsxs("div",{className:"flex items-start gap-2 p-3 bg-[#B2F273]/5 border border-[#B2F273]/20 rounded-lg",children:[e.jsx(ks,{className:"h-5 w-5 text-[#B2F273] flex-shrink-0 mt-0.5"}),e.jsxs("div",{className:"text-sm text-[#EDF5F2]/80",children:[e.jsx("p",{className:"font-medium text-[#EDF5F2]",children:"What gets imported:"}),e.jsxs("ul",{className:"list-disc list-inside mt-1 text-[#EDF5F2]/60",children:[e.jsx("li",{children:"LC number, date, amount, currency"}),e.jsx("li",{children:"Beneficiary and applicant details"}),e.jsx("li",{children:"Ports, incoterms, and shipping details"}),e.jsx("li",{children:"Goods description (as line item)"})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t border-[#EDF5F2]/10",children:[e.jsx(M,{variant:"outline",onClick:()=>s(!1),className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:"Cancel"}),e.jsx(M,{onClick:_,disabled:!d||j,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:j?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}),"Importing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"h-4 w-4 mr-2"}),"Import LC Data"]})})]})]})]})})}const XN="https://trdrhub-api.onrender.com",rYe={draft:"secondary",generated:"success",finalized:"default",archived:"warning"},nYe={draft:mt,generated:Oe,finalized:Be,archived:ks};function iYe(){const t=zt(),{toast:s}=et(),{user:a,session:r}=Dt(),[n,i]=zs(),[l,o]=m.useState([]),[d,c]=m.useState(!0),[u,h]=m.useState(""),[x,g]=m.useState(n.get("status")||"all"),[j,y]=m.useState(!1),[b,N]=m.useState(null);m.useEffect(()=>{C()},[x]);const C=async()=>{c(!0);try{const P=new URLSearchParams;x&&x!=="all"&&P.append("status",x);const T=r?.access_token||a?.access_token;if(!T){console.warn("No auth token available for document sets fetch"),o([]);return}const B=await fetch(`${XN}/doc-generator/document-sets?${P.toString()}`,{headers:{Authorization:`Bearer ${T}`}});if(!B.ok){const q=await B.text();throw console.error(`Document sets API error: ${B.status} - ${q}`),new Error(`API error: ${B.status}`)}const G=await B.json();o(G)}catch(P){console.error("Error fetching document sets:",P),s({title:"Error",description:"Failed to load document sets. Please try again.",variant:"destructive"}),o([])}finally{c(!1)}},_=async P=>{if(confirm("Are you sure you want to delete this document set?"))try{const T=r?.access_token||a?.id;if(!(await fetch(`${XN}/doc-generator/document-sets/${P}`,{method:"DELETE",headers:{Authorization:`Bearer ${T}`}})).ok)throw new Error("Failed to delete document set");s({title:"Deleted",description:"Document set has been deleted"}),C()}catch{s({title:"Error",description:"Failed to delete document set",variant:"destructive"})}},A=async P=>{try{const T=r?.access_token||a?.id,B=await fetch(`${XN}/doc-generator/document-sets/${P}/download`,{headers:{Authorization:`Bearer ${T}`}});if(!B.ok)throw new Error("Failed to download documents");const G=await B.blob(),q=window.URL.createObjectURL(G),z=document.createElement("a");z.href=q,z.download=`documents_${P}.zip`,document.body.appendChild(z),z.click(),window.URL.revokeObjectURL(q),document.body.removeChild(z),s({title:"Downloaded",description:"Documents have been downloaded"})}catch{s({title:"Error",description:"Failed to download documents",variant:"destructive"})}},k=async P=>{try{const T=r?.access_token||a?.id,B=await fetch(`${XN}/doc-generator/document-sets/${P}/duplicate`,{method:"POST",headers:{Authorization:`Bearer ${T}`}});if(!B.ok)throw new Error("Failed to duplicate document set");const G=await B.json();s({title:"Duplicated",description:"Document set has been duplicated"}),C(),t(`/doc-generator/dashboard/edit/${G.id}`)}catch{s({title:"Error",description:"Failed to duplicate document set",variant:"destructive"})}},E=l.filter(P=>{if(!u)return!0;const T=u.toLowerCase();return P.name?.toLowerCase().includes(T)||P.lc_number?.toLowerCase().includes(T)||P.beneficiary_name.toLowerCase().includes(T)||P.applicant_name.toLowerCase().includes(T)}),D=l.length,R=l.filter(P=>P.status==="generated").length,O=l.filter(P=>P.status==="draft").length;return e.jsxs("div",{className:"-mt-6 -mx-4 p-8 space-y-8 bg-[#00261C] min-h-[calc(100vh-3.5rem)] text-[#EDF5F2]",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx("h1",{className:"text-3xl font-bold font-display text-white",children:"Doc Generator"}),e.jsx("p",{className:"text-[#EDF5F2]/60",children:"Manage and generate your trade documents."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsx(X,{className:"pb-2",dense:!0,children:e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Total Document Sets"})}),e.jsx(U,{dense:!0,children:e.jsx("div",{className:"text-2xl font-bold text-white font-display",children:D})})]}),e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsx(X,{className:"pb-2",dense:!0,children:e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Generated"})}),e.jsx(U,{dense:!0,children:e.jsx("div",{className:"text-2xl font-bold text-[#B2F273] font-display",children:R})})]}),e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsx(X,{className:"pb-2",dense:!0,children:e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Drafts"})}),e.jsx(U,{dense:!0,children:e.jsx("div",{className:"text-2xl font-bold text-amber-400 font-display",children:O})})]}),e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsx(X,{className:"pb-2",dense:!0,children:e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"This Month"})}),e.jsx(U,{dense:!0,children:e.jsx("div",{className:"text-2xl font-bold text-blue-400 font-display",children:l.filter(P=>{const T=new Date(P.created_at),B=new Date;return T.getMonth()===B.getMonth()&&T.getFullYear()===B.getFullYear()}).length})})]})]}),e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsxs(X,{className:"flex flex-row items-center justify-between space-y-0 pb-4",dense:!0,children:[e.jsxs("div",{children:[e.jsx(ee,{className:"text-white font-display",dense:!0,children:"Document Sets"}),e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Manage your shipping document sets"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(M,{variant:"outline",className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",onClick:()=>y(!0),size:"sm",children:[e.jsx(PD,{className:"w-4 h-4 mr-2"}),"Import from LC"]}),e.jsx(M,{asChild:!0,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",size:"sm",children:e.jsxs(pe,{to:"/doc-generator/dashboard/new",children:[e.jsx(Yt,{className:"w-4 h-4 mr-1"}),"Create New"]})})]})]}),e.jsxs(U,{dense:!0,children:[e.jsxs(l9e,{className:"mb-4",children:[e.jsx(cU,{className:"flex-1",children:e.jsxs("div",{className:"relative w-full max-w-sm",children:[e.jsx(Bt,{className:"absolute left-2 top-1/2 -translate-y-1/2 w-4 h-4 text-[#EDF5F2]/40"}),e.jsx(oe,{placeholder:"Search by LC number, beneficiary, or applicant...",value:u,onChange:P=>h(P.target.value),className:"pl-8 bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40 h-9 text-sm",dense:!0})]})}),e.jsx(cU,{children:e.jsxs(Te,{value:x,onValueChange:g,children:[e.jsxs(Pe,{className:"w-[180px] bg-[#00261C]/50 border-[#EDF5F2]/10 text-white h-9 text-sm",children:[e.jsx(Nd,{className:"w-4 h-4 mr-2 text-[#EDF5F2]/40"}),e.jsx(Fe,{placeholder:"Status"})]}),e.jsxs(De,{className:"bg-[#00261C] border-[#EDF5F2]/10 text-white",children:[e.jsx(K,{value:"all",children:"All Status"}),e.jsx(K,{value:"draft",children:"Draft"}),e.jsx(K,{value:"generated",children:"Generated"}),e.jsx(K,{value:"finalized",children:"Finalized"}),e.jsx(K,{value:"archived",children:"Archived"})]})]})})]}),d?e.jsx("div",{className:"text-center py-12 text-[#EDF5F2]/40",children:"Loading..."}):E.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(zm,{className:"w-12 h-12 text-[#EDF5F2]/20 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2 font-display",children:"No document sets found"}),e.jsx("p",{className:"text-[#EDF5F2]/40 mb-4",children:u||x!=="all"?"Try adjusting your filters":"Create your first document set to get started"}),!u&&x==="all"&&e.jsx(M,{asChild:!0,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:e.jsxs(pe,{to:"/doc-generator/dashboard/new",children:[e.jsx(Yt,{className:"w-4 h-4 mr-1"}),"Create Document Set"]})})]}):e.jsxs(la,{dense:!0,sticky:!0,children:[e.jsx(xa,{sticky:!0,className:"bg-[#00261C] hover:bg-[#00261C]",children:e.jsxs(At,{className:"border-[#EDF5F2]/10 hover:bg-transparent",dense:!0,children:[e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs",dense:!0,children:"Name / LC"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs",dense:!0,children:"Beneficiary"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs",dense:!0,children:"Applicant"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs text-right",dense:!0,children:"Amount"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs",dense:!0,children:"Status"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs",dense:!0,children:"Created"}),e.jsx(je,{className:"text-[#EDF5F2]/40 font-mono uppercase text-xs text-right",dense:!0,children:"Actions"})]})}),e.jsx(oa,{children:E.map(P=>{const T=nYe[P.status]||mt;return e.jsxs(At,{className:"border-[#EDF5F2]/5 hover:bg-[#B2F273]/5 transition-colors",dense:!0,children:[e.jsx(fe,{className:"text-white font-medium",dense:!0,children:e.jsxs("div",{children:[P.name||"Untitled",P.lc_number&&e.jsxs("div",{className:"text-xs text-[#EDF5F2]/40 font-mono mt-0.5",children:["LC: ",P.lc_number]})]})}),e.jsx(fe,{className:"text-[#EDF5F2]/80",dense:!0,children:P.beneficiary_name}),e.jsx(fe,{className:"text-[#EDF5F2]/80",dense:!0,children:P.applicant_name}),e.jsxs(fe,{className:"text-[#EDF5F2]/80 text-right font-mono",dense:!0,children:["$",P.total_amount.toLocaleString(void 0,{minimumFractionDigits:2})]}),e.jsx(fe,{dense:!0,children:e.jsxs(Q,{variant:rYe[P.status]||"default",className:"gap-1 bg-[#00261C] border-[#EDF5F2]/10 text-[#EDF5F2]/80 hover:bg-[#00261C]",children:[e.jsx(T,{className:"w-3 h-3"}),P.status.charAt(0).toUpperCase()+P.status.slice(1)]})}),e.jsx(fe,{className:"text-[#EDF5F2]/40 text-xs font-mono",dense:!0,children:new Date(P.created_at).toLocaleDateString()}),e.jsx(fe,{className:"text-right",dense:!0,children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",className:"h-8 w-8 text-[#EDF5F2]/40 hover:text-white hover:bg-[#EDF5F2]/5",children:e.jsx(Vj,{className:"w-4 h-4"})})}),e.jsxs(Zn,{align:"end",className:"bg-[#00261C] border-[#EDF5F2]/10 text-white",children:[e.jsxs(is,{onClick:()=>t(`/doc-generator/dashboard/edit/${P.id}`),className:"hover:bg-[#EDF5F2]/5 hover:text-white focus:bg-[#EDF5F2]/5 focus:text-white",children:[e.jsx(Da,{className:"w-4 h-4 mr-2"}),"View / Edit"]}),e.jsxs(is,{onClick:()=>N(P.id),className:"hover:bg-[#EDF5F2]/5 hover:text-white focus:bg-[#EDF5F2]/5 focus:text-white",children:[e.jsx(Be,{className:"w-4 h-4 mr-2"}),"Preview PDF"]}),e.jsxs(is,{onClick:()=>A(P.id),className:"hover:bg-[#EDF5F2]/5 hover:text-white focus:bg-[#EDF5F2]/5 focus:text-white",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download All"]}),e.jsxs(is,{onClick:()=>k(P.id),className:"hover:bg-[#EDF5F2]/5 hover:text-white focus:bg-[#EDF5F2]/5 focus:text-white",children:[e.jsx(qa,{className:"w-4 h-4 mr-2"}),"Duplicate"]}),e.jsx(Dc,{className:"bg-[#EDF5F2]/10"}),e.jsxs(is,{onClick:()=>_(P.id),className:"text-red-400 focus:text-red-400 hover:bg-red-500/10 focus:bg-red-500/10",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},P.id)})})]})]})]}),e.jsx(aYe,{open:j,onOpenChange:y,onImportComplete:P=>{C(),t(`/doc-generator/dashboard/edit/${P}`)}}),b&&e.jsx(PDFPreview,{docSetId:b,open:!!b,onOpenChange:P=>!P&&N(null),mode:"modal"})]})}const EA="https://trdrhub-api.onrender.com",lYe={name:"",lc_number:"",lc_date:"",lc_currency:"USD",issuing_bank:"",beneficiary_name:"",beneficiary_address:"",beneficiary_country:"",applicant_name:"",applicant_address:"",applicant_country:"",notify_party_name:"",notify_party_address:"",vessel_name:"",voyage_number:"",bl_number:"",bl_date:"",container_number:"",seal_number:"",port_of_loading:"",port_of_discharge:"",incoterms:"FOB",incoterms_place:"",total_cartons:0,gross_weight_kg:0,net_weight_kg:0,cbm:0,shipping_marks:"",invoice_number:"",invoice_date:new Date().toISOString().split("T")[0],country_of_origin:"",draft_tenor:"AT SIGHT",drawee_name:"",line_items:[]},oYe={line_number:1,description:"",hs_code:"",quantity:0,unit:"PCS",unit_price:0,cartons:0,gross_weight_kg:0,net_weight_kg:0},dz=[{id:1,title:"LC Details",icon:Be},{id:2,title:"Shipment & Goods",icon:Us},{id:3,title:"Generate",icon:Ps}],cYe=["FOB","CIF","CFR","EXW","FCA","CPT","CIP","DAP","DPU","DDP"],dYe=["PCS","KG","MT","MTR","YDS","SET","DOZ","CTN","PKG","UNIT"],uYe=["USD","EUR","GBP","BDT","INR","PKR","CNY","JPY"];function uz(){const t=zt(),{toast:s}=et(),{user:a,session:r}=Dt(),[n,i]=m.useState(1),[l,o]=m.useState(lYe),[d,c]=m.useState(!1),[u,h]=m.useState(null),[x,g]=m.useState(["commercial_invoice","packing_list"]),j=(P,T)=>{o(B=>({...B,[P]:T}))},y=()=>{const P={...oYe,line_number:l.line_items.length+1};o(T=>({...T,line_items:[...T.line_items,P]}))},b=P=>{o(T=>({...T,line_items:T.line_items.filter((B,G)=>G!==P).map((B,G)=>({...B,line_number:G+1}))}))},N=(P,T,B)=>{o(G=>({...G,line_items:G.line_items.map((q,z)=>z===P?{...q,[T]:B}:q)}))},C=()=>{const P=l.line_items.reduce((z,H)=>z+(H.quantity||0),0),T=l.line_items.reduce((z,H)=>z+(H.quantity||0)*(H.unit_price||0),0),B=l.line_items.reduce((z,H)=>z+(H.cartons||0),0),G=l.line_items.reduce((z,H)=>z+(H.gross_weight_kg||0),0),q=l.line_items.reduce((z,H)=>z+(H.net_weight_kg||0),0);return{totalQty:P,totalAmount:T,totalCartons:B,totalGross:G,totalNet:q}},_=async()=>{if(l.line_items.length===0){s({title:"Error",description:"Please add at least one line item",variant:"destructive"});return}c(!0);try{const P=r?.access_token||a?.id,T=await fetch(`${EA}/doc-generator/document-sets`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({...l,lc_date:l.lc_date||null,bl_date:l.bl_date||null,invoice_date:l.invoice_date||null,lc_amount:C().totalAmount})});if(!T.ok)throw new Error("Failed to create document set");const B=await T.json();if(h(B.id),!(await fetch(`${EA}/doc-generator/document-sets/${B.id}/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${P}`},body:JSON.stringify({document_types:x})})).ok)throw new Error("Failed to generate documents");s({title:"Success!",description:"Documents have been generated"}),i(4)}catch(P){console.error("Error:",P),s({title:"Error",description:"Failed to create document set",variant:"destructive"})}finally{c(!1)}},A=async()=>{if(u)try{const P=r?.access_token||a?.id,T=await fetch(`${EA}/doc-generator/document-sets/${u}/download`,{headers:{Authorization:`Bearer ${P}`}});if(!T.ok)throw new Error("Download failed");const B=await T.blob(),G=window.URL.createObjectURL(B),q=document.createElement("a");q.href=G,q.download=`documents_${l.lc_number||"set"}.zip`,document.body.appendChild(q),q.click(),window.URL.revokeObjectURL(G),document.body.removeChild(q)}catch{s({title:"Error",description:"Failed to download documents",variant:"destructive"})}},{totalQty:k,totalAmount:E,totalCartons:D,totalGross:R,totalNet:O}=C();return e.jsxs("div",{className:"-mt-6 -mx-4 p-8 space-y-8 bg-[#00261C] min-h-[calc(100vh-3.5rem)] text-[#EDF5F2]",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex items-center justify-center gap-4",children:dz.map((P,T)=>{const B=n===P.id,G=n>P.id,q=P.icon;return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center ${G||B?"bg-[#B2F273] text-[#00261C]":"bg-[#00382E] text-[#EDF5F2]/40"}`,children:G?e.jsx(Oe,{className:"w-5 h-5"}):e.jsx(q,{className:"w-5 h-5"})}),e.jsx("span",{className:`text-sm font-medium ${B?"text-white":"text-[#EDF5F2]/40"}`,children:P.title})]}),T<dz.length-1&&e.jsx("div",{className:`w-16 h-0.5 ${G?"bg-[#B2F273]":"bg-[#00382E]"}`})]},P.id)})})}),n===1&&e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{className:"text-white font-display",dense:!0,children:"LC & Party Details"}),e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Enter the Letter of Credit and party information"})]}),e.jsxs(U,{className:"space-y-6",dense:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"LC Number"}),e.jsx(oe,{value:l.lc_number,onChange:P=>j("lc_number",P.target.value),placeholder:"e.g., EXP2024112900001",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"LC Date"}),e.jsx(oe,{type:"date",value:l.lc_date,onChange:P=>j("lc_date",P.target.value),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Currency"}),e.jsxs(Te,{value:l.lc_currency,onValueChange:P=>j("lc_currency",P),children:[e.jsx(Pe,{className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",children:e.jsx(Fe,{})}),e.jsx(De,{className:"bg-[#00261C] border-[#EDF5F2]/10 text-white",children:uYe.map(P=>e.jsx(K,{value:P,children:P},P))})]})]})]}),e.jsx(As,{className:"bg-[#EDF5F2]/10"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4 font-display",children:"Beneficiary (Seller)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Company Name *"}),e.jsx(oe,{value:l.beneficiary_name,onChange:P=>j("beneficiary_name",P.target.value),placeholder:"Your company name",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",required:!0,dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Country"}),e.jsx(oe,{value:l.beneficiary_country,onChange:P=>j("beneficiary_country",P.target.value),placeholder:"e.g., Bangladesh",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Address"}),e.jsx(Zt,{value:l.beneficiary_address,onChange:P=>j("beneficiary_address",P.target.value),placeholder:"Full address",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",rows:2})]})]})]}),e.jsx(As,{className:"bg-[#EDF5F2]/10"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-white mb-4 font-display",children:"Applicant (Buyer)"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Company Name *"}),e.jsx(oe,{value:l.applicant_name,onChange:P=>j("applicant_name",P.target.value),placeholder:"Buyer company name",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",required:!0,dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Country"}),e.jsx(oe,{value:l.applicant_country,onChange:P=>j("applicant_country",P.target.value),placeholder:"e.g., China",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Address"}),e.jsx(Zt,{value:l.applicant_address,onChange:P=>j("applicant_address",P.target.value),placeholder:"Full address",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",rows:2})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(M,{variant:"outline",onClick:()=>t("/doc-generator/dashboard"),className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Cancel"]}),e.jsxs(M,{onClick:()=>i(2),disabled:!l.beneficiary_name||!l.applicant_name,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:["Next: Shipment Details",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})]})]})]}),n===2&&e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{className:"text-white font-display",dense:!0,children:"Shipment & Goods"}),e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Enter shipping details and line items"})]}),e.jsxs(U,{className:"space-y-6",dense:!0,children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Vessel Name"}),e.jsx(oe,{value:l.vessel_name,onChange:P=>j("vessel_name",P.target.value),placeholder:"e.g., MAERSK INFINITY",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"B/L Number"}),e.jsx(oe,{value:l.bl_number,onChange:P=>j("bl_number",P.target.value),placeholder:"e.g., MSKU7788990123",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"B/L Date"}),e.jsx(oe,{type:"date",value:l.bl_date,onChange:P=>j("bl_date",P.target.value),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Port of Loading"}),e.jsx(oe,{value:l.port_of_loading,onChange:P=>j("port_of_loading",P.target.value),placeholder:"e.g., Chittagong, Bangladesh",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Port of Discharge"}),e.jsx(oe,{value:l.port_of_discharge,onChange:P=>j("port_of_discharge",P.target.value),placeholder:"e.g., Shanghai, China",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Incoterms"}),e.jsxs(Te,{value:l.incoterms,onValueChange:P=>j("incoterms",P),children:[e.jsx(Pe,{className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",children:e.jsx(Fe,{})}),e.jsx(De,{className:"bg-[#00261C] border-[#EDF5F2]/10 text-white",children:cYe.map(P=>e.jsx(K,{value:P,children:P},P))})]})]})]}),e.jsx(As,{className:"bg-[#EDF5F2]/10"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white font-display",children:"Line Items (Goods)"}),e.jsxs(M,{onClick:y,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",size:"sm",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),l.line_items.length===0?e.jsxs("div",{className:"text-center py-8 border border-dashed border-[#EDF5F2]/10 rounded-lg bg-[#00261C]/30",children:[e.jsx(Ps,{className:"w-12 h-12 text-[#EDF5F2]/20 mx-auto mb-4"}),e.jsx("p",{className:"text-[#EDF5F2]/40 mb-4",children:"No line items yet"}),e.jsxs(M,{onClick:y,variant:"outline",className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add First Item"]})]}):e.jsxs("div",{className:"space-y-4",children:[l.line_items.map((P,T)=>e.jsxs("div",{className:"p-4 border border-[#EDF5F2]/10 rounded-lg space-y-4 bg-[#00261C]/30",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Q,{variant:"secondary",className:"bg-[#EDF5F2]/10 text-[#EDF5F2]",children:["Line ",P.line_number]}),e.jsx(M,{variant:"ghost",size:"icon",onClick:()=>b(T),className:"text-red-400 hover:text-red-300 hover:bg-red-500/10",children:e.jsx(ia,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2 md:col-span-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Description *"}),e.jsx(oe,{value:P.description,onChange:B=>N(T,"description",B.target.value),placeholder:"e.g., 100% Cotton T-Shirts M/L/XL",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"HS Code"}),e.jsx(oe,{value:P.hs_code,onChange:B=>N(T,"hs_code",B.target.value),placeholder:"e.g., 6109.10",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Quantity *"}),e.jsx(oe,{type:"number",value:P.quantity||"",onChange:B=>N(T,"quantity",parseInt(B.target.value)||0),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Unit"}),e.jsxs(Te,{value:P.unit,onValueChange:B=>N(T,"unit",B),children:[e.jsx(Pe,{className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",children:e.jsx(Fe,{})}),e.jsx(De,{className:"bg-[#00261C] border-[#EDF5F2]/10 text-white",children:dYe.map(B=>e.jsx(K,{value:B,children:B},B))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Unit Price ($)"}),e.jsx(oe,{type:"number",step:"0.01",value:P.unit_price||"",onChange:B=>N(T,"unit_price",parseFloat(B.target.value)||0),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Cartons"}),e.jsx(oe,{type:"number",value:P.cartons||"",onChange:B=>N(T,"cartons",parseInt(B.target.value)||0),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"flex items-center text-[#EDF5F2] font-medium pt-6 font-mono",children:["= $",((P.quantity||0)*(P.unit_price||0)).toLocaleString(void 0,{minimumFractionDigits:2})]})]})]},T)),e.jsx("div",{className:"p-4 bg-[#00261C]/50 border border-[#EDF5F2]/10 rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Total Qty"}),e.jsx("p",{className:"text-white font-bold font-mono",children:k.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Total Amount"}),e.jsxs("p",{className:"text-white font-bold font-mono",children:["$",E.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Total Cartons"}),e.jsx("p",{className:"text-white font-bold font-mono",children:D.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Gross Wt (KG)"}),e.jsx("p",{className:"text-white font-bold font-mono",children:R.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Net Wt (KG)"}),e.jsx("p",{className:"text-white font-bold font-mono",children:O.toLocaleString()})]})]})})]})]}),e.jsx(As,{className:"bg-[#EDF5F2]/10"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Invoice Number"}),e.jsx(oe,{value:l.invoice_number,onChange:P=>j("invoice_number",P.target.value),placeholder:"e.g., INV-2024-001",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Invoice Date"}),e.jsx(oe,{type:"date",value:l.invoice_date,onChange:P=>j("invoice_date",P.target.value),className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white",dense:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Country of Origin"}),e.jsx(oe,{value:l.country_of_origin,onChange:P=>j("country_of_origin",P.target.value),placeholder:"e.g., Bangladesh",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",dense:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{className:"text-[#EDF5F2]/80",children:"Shipping Marks"}),e.jsx(Zt,{value:l.shipping_marks,onChange:P=>j("shipping_marks",P.target.value),placeholder:"e.g., SHANGHAI FASHION / MADE IN BANGLADESH / CARTON NO. 1-1850",className:"bg-[#00261C]/50 border-[#EDF5F2]/10 text-white placeholder:text-[#EDF5F2]/40",rows:3})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(M,{variant:"outline",onClick:()=>i(1),className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsxs(M,{onClick:()=>i(3),disabled:l.line_items.length===0,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:["Next: Generate Documents",e.jsx(Jt,{className:"w-4 h-4 ml-2"})]})]})]})]}),n===3&&e.jsxs($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:[e.jsxs(X,{dense:!0,children:[e.jsx(ee,{className:"text-white font-display",dense:!0,children:"Select & Generate Documents"}),e.jsx(ue,{className:"text-[#EDF5F2]/60",children:"Choose which documents to generate"})]}),e.jsxs(U,{className:"space-y-6",dense:!0,children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-3 p-4 border border-[#EDF5F2]/10 rounded-lg bg-[#00261C]/30",children:[e.jsx(rr,{checked:x.includes("commercial_invoice"),onCheckedChange:P=>{g(P?[...x,"commercial_invoice"]:x.filter(T=>T!=="commercial_invoice"))},className:"border-[#EDF5F2]/40 data-[state=checked]:bg-[#B2F273] data-[state=checked]:text-[#00261C]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Commercial Invoice"}),e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Primary trade document with goods, amounts, and parties"})]}),e.jsx(Q,{variant:"default",className:"bg-[#B2F273] text-[#00261C]",children:"Required"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 border border-[#EDF5F2]/10 rounded-lg bg-[#00261C]/30",children:[e.jsx(rr,{checked:x.includes("packing_list"),onCheckedChange:P=>{g(P?[...x,"packing_list"]:x.filter(T=>T!=="packing_list"))},className:"border-[#EDF5F2]/40 data-[state=checked]:bg-[#B2F273] data-[state=checked]:text-[#00261C]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Packing List"}),e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Detailed breakdown of cartons, weights, and packaging"})]}),e.jsx(Q,{variant:"secondary",className:"bg-[#EDF5F2]/10 text-[#EDF5F2]",children:"Recommended"})]}),e.jsxs("div",{className:"flex items-center space-x-3 p-4 border border-[#EDF5F2]/10 rounded-lg bg-[#00261C]/30",children:[e.jsx(rr,{checked:x.includes("beneficiary_certificate"),onCheckedChange:P=>{g(P?[...x,"beneficiary_certificate"]:x.filter(T=>T!=="beneficiary_certificate"))},className:"border-[#EDF5F2]/40 data-[state=checked]:bg-[#B2F273] data-[state=checked]:text-[#00261C]"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-white font-medium",children:"Beneficiary Certificate"}),e.jsx("p",{className:"text-[#EDF5F2]/40 text-sm",children:"Certification of LC compliance by beneficiary"})]}),e.jsx(Q,{variant:"secondary",className:"bg-[#EDF5F2]/10 text-[#EDF5F2]",children:"Optional"})]})]}),e.jsx(As,{className:"bg-[#EDF5F2]/10"}),e.jsxs("div",{className:"p-4 bg-[#00261C]/50 rounded-lg space-y-2 border border-[#EDF5F2]/10",children:[e.jsx("h4",{className:"text-white font-medium font-display",children:"Summary"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"LC Number:"})," ",e.jsx("span",{className:"text-white font-mono",children:l.lc_number||"-"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Total Amount:"})," ",e.jsxs("span",{className:"text-white font-mono",children:[l.lc_currency," ",E.toLocaleString(void 0,{minimumFractionDigits:2})]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Beneficiary:"})," ",e.jsx("span",{className:"text-white",children:l.beneficiary_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Applicant:"})," ",e.jsx("span",{className:"text-white",children:l.applicant_name})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Line Items:"})," ",e.jsx("span",{className:"text-white font-mono",children:l.line_items.length})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-[#EDF5F2]/40",children:"Documents:"})," ",e.jsxs("span",{className:"text-white font-mono",children:[x.length," selected"]})]})]})]}),e.jsxs("div",{className:"flex justify-between pt-4",children:[e.jsxs(M,{variant:"outline",onClick:()=>i(2),className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:[e.jsx(ma,{className:"w-4 h-4 mr-2"}),"Back"]}),e.jsx(M,{onClick:_,disabled:d||x.length===0,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:d?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{className:"w-4 h-4 mr-2"}),"Generate Documents"]})})]})]})]}),n===4&&e.jsx($,{className:"bg-[#00382E]/50 border-[#EDF5F2]/10 backdrop-blur-sm",dense:!0,children:e.jsxs(U,{className:"text-center py-12",dense:!0,children:[e.jsx("div",{className:"w-16 h-16 bg-green-600/20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx(Oe,{className:"w-8 h-8 text-green-400"})}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-2 font-display",children:"Documents Generated!"}),e.jsx("p",{className:"text-[#EDF5F2]/60 mb-8",children:"Your shipping documents have been created successfully."}),e.jsxs("div",{className:"flex justify-center gap-4",children:[e.jsxs(M,{onClick:A,className:"bg-[#B2F273] hover:bg-[#a3e662] text-[#00261C] font-bold",children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Download All (ZIP)"]}),e.jsx(M,{variant:"outline",onClick:()=>t("/doc-generator/dashboard"),className:"border-[#EDF5F2]/10 text-[#EDF5F2] hover:bg-[#EDF5F2]/5 bg-transparent",children:"View All Documents"})]})]})})]})}const mz="https://trdrhub-api.onrender.com";function mYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState(!0),[n,i]=m.useState(!1),[l,o]=m.useState({company_name:"",company_address:"",company_phone:"",company_email:"",company_website:"",tax_id:"",registration_number:"",export_license:"",bank_name:"",bank_account:"",bank_swift:"",bank_address:"",primary_color:"#1e40af",secondary_color:"#64748b",signatory_name:"",signatory_title:"",footer_text:"",logo_url:"",signature_url:"",stamp_url:""});m.useEffect(()=>{d()},[]);const d=async()=>{try{const h=await fetch(`${mz}/doc-generator/branding`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});if(h.ok){const x=await h.json();o(g=>({...g,...x}))}}catch(h){console.error("Error fetching branding:",h)}finally{r(!1)}},c=async()=>{i(!0);try{if(!(await fetch(`${mz}/doc-generator/branding`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify(l)})).ok)throw new Error("Failed to save");t({title:"Settings Saved",description:"Your company branding has been updated."})}catch{t({title:"Save Failed",description:"Could not save settings. Please try again.",variant:"destructive"})}finally{i(!1)}},u=(h,x)=>{o(g=>({...g,[h]:x}))};return a?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-muted-foreground"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Company Branding"}),e.jsx("p",{className:"text-muted-foreground",children:"Configure how your documents look"})]}),e.jsxs(M,{onClick:c,disabled:n,children:[n?e.jsx(ct,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(Bi,{className:"h-4 w-4 mr-2"}),"Save Changes"]})]}),e.jsxs("div",{className:"grid gap-6",children:[e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5"}),"Company Information"]}),e.jsx(ue,{children:"This appears on your generated documents"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Name"}),e.jsx(oe,{value:l.company_name,onChange:h=>u("company_name",h.target.value),placeholder:"Your Company Ltd."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Website"}),e.jsx(oe,{value:l.company_website,onChange:h=>u("company_website",h.target.value),placeholder:"www.yourcompany.com"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Address"}),e.jsx(Zt,{value:l.company_address,onChange:h=>u("company_address",h.target.value),placeholder:"123 Business Street, City, Country",rows:3})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Phone"}),e.jsx(oe,{value:l.company_phone,onChange:h=>u("company_phone",h.target.value),placeholder:"+1 234 567 8900"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Email"}),e.jsx(oe,{value:l.company_email,onChange:h=>u("company_email",h.target.value),placeholder:"export@yourcompany.com"})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-5 w-5"}),"Registration Details"]}),e.jsx(ue,{children:"Legal identifiers for your company"})]}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Tax ID / VAT Number"}),e.jsx(oe,{value:l.tax_id,onChange:h=>u("tax_id",h.target.value),placeholder:"VAT123456789"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Registration Number"}),e.jsx(oe,{value:l.registration_number,onChange:h=>u("registration_number",h.target.value),placeholder:"REG-2024-001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Export License (IEC/ERC)"}),e.jsx(oe,{value:l.export_license,onChange:h=>u("export_license",h.target.value),placeholder:"IEC0123456789"})]})]})})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(pn,{className:"h-5 w-5"}),"Bank Details"]}),e.jsx(ue,{children:"For commercial invoices and payment instructions"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Name"}),e.jsx(oe,{value:l.bank_name,onChange:h=>u("bank_name",h.target.value),placeholder:"International Bank Ltd."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SWIFT/BIC Code"}),e.jsx(oe,{value:l.bank_swift,onChange:h=>u("bank_swift",h.target.value),placeholder:"INTLBANK"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Account Number"}),e.jsx(oe,{value:l.bank_account,onChange:h=>u("bank_account",h.target.value),placeholder:"1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Address"}),e.jsx(Zt,{value:l.bank_address,onChange:h=>u("bank_address",h.target.value),placeholder:"Bank Street, Financial District, City",rows:2})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(dV,{className:"h-5 w-5"}),"Signature & Authorization"]}),e.jsx(ue,{children:"Details for authorized signatory"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Signatory Name"}),e.jsx(oe,{value:l.signatory_name,onChange:h=>u("signatory_name",h.target.value),placeholder:"John Smith"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Title / Designation"}),e.jsx(oe,{value:l.signatory_title,onChange:h=>u("signatory_title",h.target.value),placeholder:"Export Manager"})]})]}),e.jsx(As,{}),e.jsxs("div",{className:"grid md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Logo"}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center hover:bg-muted/50 cursor-pointer transition-colors",children:l.logo_url?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Za,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Logo uploaded"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload Logo"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG, JPG (max 500KB)"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Signature Image"}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center hover:bg-muted/50 cursor-pointer transition-colors",children:l.signature_url?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Za,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Signature uploaded"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload Signature"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG with transparency"})]})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Company Stamp"}),e.jsx("div",{className:"border-2 border-dashed rounded-lg p-4 text-center hover:bg-muted/50 cursor-pointer transition-colors",children:l.stamp_url?e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx(Za,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"text-sm",children:"Stamp uploaded"})]}):e.jsxs(e.Fragment,{children:[e.jsx(Hs,{className:"h-8 w-8 mx-auto text-muted-foreground mb-2"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload Stamp"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PNG with transparency"})]})})]})]})]})]}),e.jsxs($,{children:[e.jsxs(X,{children:[e.jsxs(ee,{className:"flex items-center gap-2",children:[e.jsx(Wj,{className:"h-5 w-5"}),"Document Styling"]}),e.jsx(ue,{children:"Colors and footer text for your documents"})]}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Primary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{type:"color",value:l.primary_color,onChange:h=>u("primary_color",h.target.value),className:"w-16 h-10 p-1 cursor-pointer"}),e.jsx(oe,{value:l.primary_color,onChange:h=>u("primary_color",h.target.value),placeholder:"#1e40af"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Secondary Color"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(oe,{type:"color",value:l.secondary_color,onChange:h=>u("secondary_color",h.target.value),className:"w-16 h-10 p-1 cursor-pointer"}),e.jsx(oe,{value:l.secondary_color,onChange:h=>u("secondary_color",h.target.value),placeholder:"#64748b"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Footer Text"}),e.jsx(Zt,{value:l.footer_text,onChange:h=>u("footer_text",h.target.value),placeholder:"This document is computer generated and valid without signature. For any queries, please contact...",rows:3})]})]})]})]})]})}const w0="https://trdrhub-api.onrender.com",AA={name:"",description:"",beneficiary_name:"",beneficiary_address:"",bank_name:"",bank_account:"",bank_swift:"",default_port_of_loading:"",default_incoterms:"",default_country_of_origin:"",default_shipping_marks:""};function hYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState(!1),[u,h]=m.useState(null),[x,g]=m.useState(AA),[j,y]=m.useState(!1);m.useEffect(()=>{b()},[]);const b=async()=>{try{const E=await fetch(`${w0}/doc-generator/catalog/templates`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});E.ok&&r(await E.json())}catch(E){console.error("Error fetching templates:",E)}finally{i(!1)}},N=async()=>{if(!x.name.trim()){t({title:"Error",description:"Template name is required",variant:"destructive"});return}y(!0);try{const E=u?"PUT":"POST",D=u?`${w0}/doc-generator/catalog/templates/${u}`:`${w0}/doc-generator/catalog/templates`;if(!(await fetch(D,{method:E,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify(x)})).ok)throw new Error("Failed to save");t({title:u?"Updated":"Created",description:"Template saved successfully"}),c(!1),h(null),g(AA),b()}catch{t({title:"Error",description:"Failed to save template",variant:"destructive"})}finally{y(!1)}},C=async E=>{if(confirm("Delete this template?"))try{await fetch(`${w0}/doc-generator/catalog/templates/${E}`,{method:"DELETE",headers:{Authorization:`Bearer ${s?.access_token||""}`}}),t({title:"Deleted",description:"Template removed"}),b()}catch{t({title:"Error",description:"Failed to delete",variant:"destructive"})}},_=async E=>{try{await fetch(`${w0}/api/doc-generator/templates/${E}/set-default`,{method:"POST",headers:{Authorization:`Bearer ${s?.access_token||""}`}}),t({title:"Default Set",description:"Template is now the default"}),b()}catch{t({title:"Error",description:"Failed to set default",variant:"destructive"})}},A=E=>{h(E.id),g({name:E.name,description:E.description||"",beneficiary_name:E.beneficiary_name||"",beneficiary_address:"",bank_name:E.bank_name||"",bank_account:"",bank_swift:"",default_port_of_loading:E.default_port_of_loading||"",default_incoterms:E.default_incoterms||"",default_country_of_origin:"",default_shipping_marks:""}),c(!0)},k=a.filter(E=>E.name.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Document Templates"}),e.jsx("p",{className:"text-slate-400",children:"Save and reuse common document settings"})]}),e.jsxs(M,{onClick:()=>{h(null),g(AA),c(!0)},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"New Template"]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search templates...",value:l,onChange:E=>o(E.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-0",children:n?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-slate-400"})}):k.length===0?e.jsxs("div",{className:"text-center p-12",children:[e.jsx(Be,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No templates yet"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Create a template to speed up document creation"}),e.jsxs(M,{onClick:()=>c(!0),children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Create Template"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{className:"border-slate-800",children:[e.jsx(je,{className:"text-slate-400",children:"Name"}),e.jsx(je,{className:"text-slate-400",children:"Beneficiary"}),e.jsx(je,{className:"text-slate-400",children:"Bank"}),e.jsx(je,{className:"text-slate-400",children:"Incoterms"}),e.jsx(je,{className:"text-slate-400",children:"Uses"}),e.jsx(je,{className:"text-slate-400 w-[100px]",children:"Actions"})]})}),e.jsx(oa,{children:k.map(E=>e.jsxs(At,{className:"border-slate-800 hover:bg-slate-800/50",children:[e.jsxs(fe,{className:"text-white font-medium",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[E.name,E.is_default&&e.jsx(Q,{variant:"outline",className:"text-yellow-500 border-yellow-500",children:"Default"})]}),E.description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:E.description})]}),e.jsx(fe,{className:"text-slate-300",children:E.beneficiary_name||"-"}),e.jsx(fe,{className:"text-slate-300",children:E.bank_name||"-"}),e.jsx(fe,{className:"text-slate-300",children:E.default_incoterms||"-"}),e.jsx(fe,{className:"text-slate-300",children:E.use_count}),e.jsx(fe,{children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(Vj,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>A(E),children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsx(is,{onClick:()=>_(E.id),children:E.is_default?e.jsxs(e.Fragment,{children:[e.jsx(B1,{className:"w-4 h-4 mr-2"}),"Remove Default"]}):e.jsxs(e.Fragment,{children:[e.jsx(nl,{className:"w-4 h-4 mr-2"}),"Set as Default"]})}),e.jsxs(is,{onClick:()=>C(E.id),className:"text-red-500",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Delete"]})]})]})})]},E.id))})]})})}),e.jsx(wt,{open:d,onOpenChange:c,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:u?"Edit Template":"Create Template"}),e.jsx(_t,{children:"Save common settings to speed up document creation"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Template Name *"}),e.jsx(oe,{value:x.name,onChange:E=>g({...x,name:E.target.value}),placeholder:"My Export Template"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Description"}),e.jsx(oe,{value:x.description,onChange:E=>g({...x,description:E.target.value}),placeholder:"For US buyers"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Beneficiary Name"}),e.jsx(oe,{value:x.beneficiary_name,onChange:E=>g({...x,beneficiary_name:E.target.value}),placeholder:"Your Company Ltd."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Beneficiary Address"}),e.jsx(Zt,{value:x.beneficiary_address,onChange:E=>g({...x,beneficiary_address:E.target.value}),placeholder:"123 Export Street, City, Country",rows:2})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Bank Name"}),e.jsx(oe,{value:x.bank_name,onChange:E=>g({...x,bank_name:E.target.value}),placeholder:"International Bank"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Account Number"}),e.jsx(oe,{value:x.bank_account,onChange:E=>g({...x,bank_account:E.target.value}),placeholder:"1234567890"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SWIFT Code"}),e.jsx(oe,{value:x.bank_swift,onChange:E=>g({...x,bank_swift:E.target.value}),placeholder:"INTLBANK"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Port of Loading"}),e.jsx(oe,{value:x.default_port_of_loading,onChange:E=>g({...x,default_port_of_loading:E.target.value}),placeholder:"Chittagong, Bangladesh"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Incoterms"}),e.jsx(oe,{value:x.default_incoterms,onChange:E=>g({...x,default_incoterms:E.target.value}),placeholder:"FOB"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country of Origin"}),e.jsx(oe,{value:x.default_country_of_origin,onChange:E=>g({...x,default_country_of_origin:E.target.value}),placeholder:"Bangladesh"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Shipping Marks"}),e.jsx(Zt,{value:x.default_shipping_marks,onChange:E=>g({...x,default_shipping_marks:E.target.value}),placeholder:"N/M or your standard marks",rows:2})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(M,{onClick:N,disabled:j,children:[j?e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):null,u?"Update":"Create"]})]})]})})]})}const ew="https://trdrhub-api.onrender.com",PA={sku:"",product_code:"",name:"",hs_code:"",description:"",short_description:"",default_unit_price:"",currency:"USD",default_unit:"PCS",units_per_carton:"",weight_per_unit_kg:"",carton_dimensions:"",carton_weight_kg:"",country_of_origin:""},xYe=["PCS","KG","MT","MTR","YDS","SET","DOZ","CTN","PKG","UNIT"];function pYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState(!1),[u,h]=m.useState(null),[x,g]=m.useState(PA),[j,y]=m.useState(!1);m.useEffect(()=>{b()},[]);const b=async()=>{try{const k=await fetch(`${ew}/doc-generator/catalog/products`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});k.ok&&r(await k.json())}catch(k){console.error("Error fetching products:",k)}finally{i(!1)}},N=async()=>{if(!x.name.trim()||!x.description.trim()){t({title:"Error",description:"Name and description are required",variant:"destructive"});return}y(!0);try{const k=u?"PUT":"POST",E=u?`${ew}/doc-generator/catalog/products/${u}`:`${ew}/doc-generator/catalog/products`,D={...x,default_unit_price:x.default_unit_price?parseFloat(x.default_unit_price):null,units_per_carton:x.units_per_carton?parseInt(x.units_per_carton):null,weight_per_unit_kg:x.weight_per_unit_kg?parseFloat(x.weight_per_unit_kg):null,carton_weight_kg:x.carton_weight_kg?parseFloat(x.carton_weight_kg):null};if(!(await fetch(E,{method:k,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify(D)})).ok)throw new Error("Failed to save");t({title:u?"Updated":"Created",description:"Product saved successfully"}),c(!1),h(null),g(PA),b()}catch{t({title:"Error",description:"Failed to save product",variant:"destructive"})}finally{y(!1)}},C=async k=>{if(confirm("Remove this product from catalog?"))try{await fetch(`${ew}/doc-generator/catalog/products/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${s?.access_token||""}`}}),t({title:"Removed",description:"Product removed from catalog"}),b()}catch{t({title:"Error",description:"Failed to remove",variant:"destructive"})}},_=k=>{h(k.id),g({sku:k.sku||"",product_code:k.product_code||"",name:k.name,hs_code:k.hs_code||"",description:k.description,short_description:k.short_description||"",default_unit_price:k.default_unit_price?.toString()||"",currency:k.currency,default_unit:k.default_unit,units_per_carton:k.units_per_carton?.toString()||"",weight_per_unit_kg:k.weight_per_unit_kg?.toString()||"",carton_dimensions:"",carton_weight_kg:"",country_of_origin:k.country_of_origin||""}),c(!0)},A=a.filter(k=>k.name.toLowerCase().includes(l.toLowerCase())||k.hs_code?.includes(l)||k.sku?.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Product Catalog"}),e.jsx("p",{className:"text-slate-400",children:"Save frequently shipped products for quick entry"})]}),e.jsxs(M,{onClick:()=>{h(null),g(PA),c(!0)},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add Product"]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search by name, SKU, or HS code...",value:l,onChange:k=>o(k.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-0",children:n?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-slate-400"})}):A.length===0?e.jsxs("div",{className:"text-center p-12",children:[e.jsx(Ps,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No products in catalog"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Add products to speed up line item entry"}),e.jsxs(M,{onClick:()=>c(!0),children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add First Product"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{className:"border-slate-800",children:[e.jsx(je,{className:"text-slate-400",children:"Product"}),e.jsx(je,{className:"text-slate-400",children:"HS Code"}),e.jsx(je,{className:"text-slate-400",children:"Unit"}),e.jsx(je,{className:"text-slate-400 text-right",children:"Price"}),e.jsx(je,{className:"text-slate-400",children:"Origin"}),e.jsx(je,{className:"text-slate-400",children:"Uses"}),e.jsx(je,{className:"text-slate-400 w-[100px]",children:"Actions"})]})}),e.jsx(oa,{children:A.map(k=>e.jsxs(At,{className:"border-slate-800 hover:bg-slate-800/50",children:[e.jsx(fe,{className:"text-white",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ps,{className:"w-4 h-4 text-slate-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.name}),k.sku&&e.jsxs("span",{className:"text-xs text-slate-400",children:["SKU: ",k.sku]}),k.short_description&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:k.short_description})]})]})}),e.jsx(fe,{children:k.hs_code?e.jsxs(Q,{variant:"outline",className:"font-mono",children:[e.jsx(Aue,{className:"w-3 h-3 mr-1"}),k.hs_code]}):e.jsx("span",{className:"text-slate-500",children:"-"})}),e.jsx(fe,{className:"text-slate-300",children:k.default_unit}),e.jsx(fe,{className:"text-slate-300 text-right",children:k.default_unit_price?`${k.currency} ${k.default_unit_price.toLocaleString(void 0,{minimumFractionDigits:2})}`:"-"}),e.jsx(fe,{className:"text-slate-300",children:k.country_of_origin||"-"}),e.jsx(fe,{className:"text-slate-300",children:k.use_count}),e.jsx(fe,{children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(Vj,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>_(k),children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(is,{onClick:()=>C(k.id),className:"text-red-500",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})})]},k.id))})]})})}),e.jsx(wt,{open:d,onOpenChange:c,children:e.jsxs(yt,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:u?"Edit Product":"Add Product"}),e.jsx(_t,{children:"Add product details for quick line item entry"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SKU"}),e.jsx(oe,{value:x.sku,onChange:k=>g({...x,sku:k.target.value}),placeholder:"PROD-001"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(Z,{children:"Product Name *"}),e.jsx(oe,{value:x.name,onChange:k=>g({...x,name:k.target.value}),placeholder:"Cotton T-Shirts"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"HS Code"}),e.jsx(oe,{value:x.hs_code,onChange:k=>g({...x,hs_code:k.target.value}),placeholder:"6109.10.00"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country of Origin"}),e.jsx(oe,{value:x.country_of_origin,onChange:k=>g({...x,country_of_origin:k.target.value}),placeholder:"Bangladesh"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Full Description (for documents) *"}),e.jsx(Zt,{value:x.description,onChange:k=>g({...x,description:k.target.value}),placeholder:"100% Cotton T-Shirts, Round Neck, Short Sleeve, Assorted Colors and Sizes...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Short Description (for dropdown)"}),e.jsx(oe,{value:x.short_description,onChange:k=>g({...x,short_description:k.target.value}),placeholder:"Cotton T-Shirts, Assorted"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Unit Price"}),e.jsx(oe,{type:"number",step:"0.01",value:x.default_unit_price,onChange:k=>g({...x,default_unit_price:k.target.value}),placeholder:"5.50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Currency"}),e.jsxs(Te,{value:x.currency,onValueChange:k=>g({...x,currency:k}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Unit"}),e.jsxs(Te,{value:x.default_unit,onValueChange:k=>g({...x,default_unit:k}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsx(De,{children:xYe.map(k=>e.jsx(K,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Units/Carton"}),e.jsx(oe,{type:"number",value:x.units_per_carton,onChange:k=>g({...x,units_per_carton:k.target.value}),placeholder:"50"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Weight per Unit (KG)"}),e.jsx(oe,{type:"number",step:"0.001",value:x.weight_per_unit_kg,onChange:k=>g({...x,weight_per_unit_kg:k.target.value}),placeholder:"0.150"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Carton Weight (KG)"}),e.jsx(oe,{type:"number",step:"0.01",value:x.carton_weight_kg,onChange:k=>g({...x,carton_weight_kg:k.target.value}),placeholder:"8.5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Carton Dimensions"}),e.jsx(oe,{value:x.carton_dimensions,onChange:k=>g({...x,carton_dimensions:k.target.value}),placeholder:"60x40x30 cm"})]})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(M,{onClick:N,disabled:j,children:[j?e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):null,u?"Update":"Add Product"]})]})]})})]})}const tw="https://trdrhub-api.onrender.com",DA={buyer_code:"",company_name:"",country:"",address_line1:"",address_line2:"",city:"",state:"",postal_code:"",contact_person:"",email:"",phone:"",notify_party_name:"",notify_party_address:"",preferred_incoterms:"",preferred_port_of_discharge:"",default_currency:"USD",buyer_bank_name:"",buyer_bank_swift:"",notes:""},fYe=["FOB","CIF","CFR","CIP","DAP","DDP","EXW","FCA"];function gYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState(!1),[u,h]=m.useState(null),[x,g]=m.useState(DA),[j,y]=m.useState(!1);m.useEffect(()=>{b()},[]);const b=async()=>{try{const k=await fetch(`${tw}/doc-generator/catalog/buyers`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});k.ok&&r(await k.json())}catch(k){console.error("Error fetching buyers:",k)}finally{i(!1)}},N=async()=>{if(!x.company_name.trim()){t({title:"Error",description:"Company name is required",variant:"destructive"});return}y(!0);try{const k=u?"PUT":"POST",E=u?`${tw}/doc-generator/catalog/buyers/${u}`:`${tw}/doc-generator/catalog/buyers`;if(!(await fetch(E,{method:k,headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify(x)})).ok)throw new Error("Failed to save");t({title:u?"Updated":"Created",description:"Buyer saved successfully"}),c(!1),h(null),g(DA),b()}catch{t({title:"Error",description:"Failed to save buyer",variant:"destructive"})}finally{y(!1)}},C=async k=>{if(confirm("Remove this buyer from directory?"))try{await fetch(`${tw}/doc-generator/catalog/buyers/${k}`,{method:"DELETE",headers:{Authorization:`Bearer ${s?.access_token||""}`}}),t({title:"Removed",description:"Buyer removed from directory"}),b()}catch{t({title:"Error",description:"Failed to remove",variant:"destructive"})}},_=k=>{h(k.id),g({buyer_code:k.buyer_code||"",company_name:k.company_name,country:k.country||"",address_line1:k.address_line1||"",address_line2:"",city:k.city||"",state:"",postal_code:"",contact_person:k.contact_person||"",email:k.email||"",phone:"",notify_party_name:"",notify_party_address:"",preferred_incoterms:k.preferred_incoterms||"",preferred_port_of_discharge:"",default_currency:k.default_currency,buyer_bank_name:"",buyer_bank_swift:"",notes:""}),c(!0)},A=a.filter(k=>k.company_name.toLowerCase().includes(l.toLowerCase())||k.buyer_code?.toLowerCase().includes(l.toLowerCase())||k.country?.toLowerCase().includes(l.toLowerCase()));return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Buyer Directory"}),e.jsx("p",{className:"text-slate-400",children:"Save frequent buyers for quick document creation"})]}),e.jsxs(M,{onClick:()=>{h(null),g(DA),c(!0)},children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add Buyer"]})]}),e.jsxs("div",{className:"relative max-w-md",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search by name, code, or country...",value:l,onChange:k=>o(k.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"p-0",children:n?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-slate-400"})}):A.length===0?e.jsxs("div",{className:"text-center p-12",children:[e.jsx(xs,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"No buyers in directory"}),e.jsx("p",{className:"text-slate-400 mb-4",children:"Add buyers to auto-fill applicant details"}),e.jsxs(M,{onClick:()=>c(!0),children:[e.jsx(Yt,{className:"w-4 h-4 mr-2"}),"Add First Buyer"]})]}):e.jsxs(la,{children:[e.jsx(xa,{children:e.jsxs(At,{className:"border-slate-800",children:[e.jsx(je,{className:"text-slate-400",children:"Company"}),e.jsx(je,{className:"text-slate-400",children:"Country"}),e.jsx(je,{className:"text-slate-400",children:"Contact"}),e.jsx(je,{className:"text-slate-400",children:"Incoterms"}),e.jsx(je,{className:"text-slate-400",children:"Currency"}),e.jsx(je,{className:"text-slate-400",children:"Uses"}),e.jsx(je,{className:"text-slate-400 w-[100px]",children:"Actions"})]})}),e.jsx(oa,{children:A.map(k=>e.jsxs(At,{className:"border-slate-800 hover:bg-slate-800/50",children:[e.jsx(fe,{className:"text-white",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Bs,{className:"w-4 h-4 text-slate-400 mt-1 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:k.company_name}),k.buyer_code&&e.jsxs("span",{className:"text-xs text-slate-400",children:["Code: ",k.buyer_code]}),k.city&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400 mt-1",children:[e.jsx(oi,{className:"w-3 h-3"}),k.city]})]})]})}),e.jsx(fe,{children:k.country?e.jsx(Q,{variant:"outline",children:k.country}):e.jsx("span",{className:"text-slate-500",children:"-"})}),e.jsx(fe,{className:"text-slate-300",children:e.jsxs("div",{className:"space-y-1",children:[k.contact_person&&e.jsx("div",{children:k.contact_person}),k.email&&e.jsxs("div",{className:"flex items-center gap-1 text-xs text-slate-400",children:[e.jsx(Va,{className:"w-3 h-3"}),k.email]})]})}),e.jsx(fe,{className:"text-slate-300",children:k.preferred_incoterms||"-"}),e.jsx(fe,{className:"text-slate-300",children:k.default_currency}),e.jsx(fe,{className:"text-slate-300",children:k.use_count}),e.jsx(fe,{children:e.jsxs(ci,{children:[e.jsx(di,{asChild:!0,children:e.jsx(M,{variant:"ghost",size:"icon",children:e.jsx(Vj,{className:"h-4 w-4"})})}),e.jsxs(Zn,{align:"end",children:[e.jsxs(is,{onClick:()=>_(k),children:[e.jsx(zn,{className:"w-4 h-4 mr-2"}),"Edit"]}),e.jsxs(is,{onClick:()=>C(k.id),className:"text-red-500",children:[e.jsx(ia,{className:"w-4 h-4 mr-2"}),"Remove"]})]})]})})]},k.id))})]})})}),e.jsx(wt,{open:d,onOpenChange:c,children:e.jsxs(yt,{className:"max-w-3xl max-h-[80vh] overflow-y-auto",children:[e.jsxs(jt,{children:[e.jsx(bt,{children:u?"Edit Buyer":"Add Buyer"}),e.jsx(_t,{children:"Save buyer details for quick applicant selection"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Buyer Code"}),e.jsx(oe,{value:x.buyer_code,onChange:k=>g({...x,buyer_code:k.target.value}),placeholder:"BUYER-001"})]}),e.jsxs("div",{className:"space-y-2 col-span-2",children:[e.jsx(Z,{children:"Company Name *"}),e.jsx(oe,{value:x.company_name,onChange:k=>g({...x,company_name:k.target.value}),placeholder:"Acme Imports Inc."})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Address Line 1"}),e.jsx(oe,{value:x.address_line1,onChange:k=>g({...x,address_line1:k.target.value}),placeholder:"123 Import Street"})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"City"}),e.jsx(oe,{value:x.city,onChange:k=>g({...x,city:k.target.value}),placeholder:"New York"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"State/Province"}),e.jsx(oe,{value:x.state,onChange:k=>g({...x,state:k.target.value}),placeholder:"NY"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Postal Code"}),e.jsx(oe,{value:x.postal_code,onChange:k=>g({...x,postal_code:k.target.value}),placeholder:"10001"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Country"}),e.jsx(oe,{value:x.country,onChange:k=>g({...x,country:k.target.value}),placeholder:"USA"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Contact Person"}),e.jsx(oe,{value:x.contact_person,onChange:k=>g({...x,contact_person:k.target.value}),placeholder:"John Smith"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Email"}),e.jsx(oe,{type:"email",value:x.email,onChange:k=>g({...x,email:k.target.value}),placeholder:"john@acme.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Phone"}),e.jsx(oe,{value:x.phone,onChange:k=>g({...x,phone:k.target.value}),placeholder:"+1 234 567 8900"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Notify Party Name"}),e.jsx(oe,{value:x.notify_party_name,onChange:k=>g({...x,notify_party_name:k.target.value}),placeholder:"Same as buyer or different"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Notify Party Address"}),e.jsx(oe,{value:x.notify_party_address,onChange:k=>g({...x,notify_party_address:k.target.value}),placeholder:"Address if different"})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Preferred Incoterms"}),e.jsxs(Te,{value:x.preferred_incoterms,onValueChange:k=>g({...x,preferred_incoterms:k}),children:[e.jsx(Pe,{children:e.jsx(Fe,{placeholder:"Select..."})}),e.jsx(De,{children:fYe.map(k=>e.jsx(K,{value:k,children:k},k))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Default Currency"}),e.jsxs(Te,{value:x.default_currency,onValueChange:k=>g({...x,default_currency:k}),children:[e.jsx(Pe,{children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"USD",children:"USD"}),e.jsx(K,{value:"EUR",children:"EUR"}),e.jsx(K,{value:"GBP",children:"GBP"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Port of Discharge"}),e.jsx(oe,{value:x.preferred_port_of_discharge,onChange:k=>g({...x,preferred_port_of_discharge:k.target.value}),placeholder:"New York, USA"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Buyer's Bank Name"}),e.jsx(oe,{value:x.buyer_bank_name,onChange:k=>g({...x,buyer_bank_name:k.target.value}),placeholder:"Bank of America"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"SWIFT Code"}),e.jsx(oe,{value:x.buyer_bank_swift,onChange:k=>g({...x,buyer_bank_swift:k.target.value}),placeholder:"BOFAUS3N"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Notes"}),e.jsx(Zt,{value:x.notes,onChange:k=>g({...x,notes:k.target.value}),placeholder:"Any special instructions or notes about this buyer...",rows:2})]})]}),e.jsxs(ms,{children:[e.jsx(M,{variant:"outline",onClick:()=>c(!1),children:"Cancel"}),e.jsxs(M,{onClick:N,disabled:j,children:[j?e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}):null,u?"Update":"Add Buyer"]})]})]})})]})}const vYe="https://trdrhub-api.onrender.com";function jYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState(["local"]),[n,i]=m.useState(!1),[l,o]=m.useState(!1),[d,c]=m.useState(!0),[u,h]=m.useState(null),[x,g]=m.useState(null),j=m.useRef(null),[y,b]=m.useState(!1);m.useEffect(()=>{N()},[]);const N=async()=>{try{const O=await fetch(`${vYe}/doc-generator/advanced/signatures/providers`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});if(O.ok){const P=await O.json();r(P.providers),i(P.docusign_configured),o(P.adobe_configured)}}catch(O){console.error("Error fetching providers:",O)}finally{c(!1)}},C=(O,P)=>{const T=O.target.files?.[0];if(!T)return;const B=new FileReader;B.onload=G=>{const q=G.target?.result;P==="signature"?h(q):g(q)},B.readAsDataURL(T)},_=O=>{b(!0);const P=j.current;if(!P)return;const T=P.getContext("2d");if(!T)return;const B=P.getBoundingClientRect();T.beginPath(),T.moveTo(O.clientX-B.left,O.clientY-B.top)},A=O=>{if(!y)return;const P=j.current;if(!P)return;const T=P.getContext("2d");if(!T)return;const B=P.getBoundingClientRect();T.lineTo(O.clientX-B.left,O.clientY-B.top),T.strokeStyle="#000",T.lineWidth=2,T.lineCap="round",T.stroke()},k=()=>{b(!1)},E=()=>{const O=j.current;if(!O)return;const P=O.getContext("2d");P&&P.clearRect(0,0,O.width,O.height)},D=()=>{const O=j.current;if(!O)return;const P=O.toDataURL("image/png");h(P),t({title:"Signature Saved",description:"Your drawn signature has been saved"})},R={local:{name:"Local Signature",configured:!0,description:"Upload or draw a signature image. Suitable for internal documents."},docusign:{name:"DocuSign",configured:n,description:"Industry-standard e-signature. Legally binding, with audit trail."},adobe_sign:{name:"Adobe Sign",configured:l,description:"Adobe's e-signature solution. Integrates with Adobe ecosystem."}};return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Digital Signatures"}),e.jsx("p",{className:"text-slate-400",children:"Configure signature methods for your documents"})]}),d?e.jsx("div",{className:"flex items-center justify-center p-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-slate-400"})}):e.jsx("div",{className:"grid gap-6 md:grid-cols-3",children:Object.entries(R).map(([O,P])=>e.jsxs($,{className:`bg-slate-900/50 border-slate-800 ${P.configured?"":"opacity-60"}`,children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Gde,{className:"h-5 w-5"}),P.name]}),e.jsx(Q,{variant:P.configured?"default":"outline",children:P.configured?"Available":"Not Configured"})]}),e.jsx(ue,{children:P.description})]}),e.jsxs(U,{children:[O==="local"&&e.jsx(M,{variant:"outline",size:"sm",className:"w-full",children:"Configure"}),O==="docusign"&&!P.configured&&e.jsx(M,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:"https://developers.docusign.com/",target:"_blank",rel:"noopener",children:["Setup DocuSign",e.jsx(ir,{className:"w-3 h-3 ml-2"})]})}),O==="adobe_sign"&&!P.configured&&e.jsx(M,{variant:"outline",size:"sm",className:"w-full",asChild:!0,children:e.jsxs("a",{href:"https://acrobat.adobe.com/us/en/sign.html",target:"_blank",rel:"noopener",children:["Setup Adobe Sign",e.jsx(ir,{className:"w-3 h-3 ml-2"})]})})]})]},O))}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Local Signature Settings"}),e.jsx(ue,{children:"Upload or draw your signature for embedding in documents"})]}),e.jsx(U,{children:e.jsxs(Os,{defaultValue:"draw",className:"space-y-4",children:[e.jsxs(Fs,{className:"bg-slate-800",children:[e.jsxs(He,{value:"draw",children:[e.jsx(oV,{className:"w-4 h-4 mr-2"}),"Draw"]}),e.jsxs(He,{value:"upload",children:[e.jsx(Hs,{className:"w-4 h-4 mr-2"}),"Upload"]}),e.jsxs(He,{value:"stamp",children:[e.jsx(dV,{className:"w-4 h-4 mr-2"}),"Company Stamp"]})]}),e.jsxs(Qe,{value:"draw",className:"space-y-4",children:[e.jsx("div",{className:"border-2 border-dashed border-slate-700 rounded-lg p-2",children:e.jsx("canvas",{ref:j,width:400,height:150,className:"bg-white rounded cursor-crosshair",onMouseDown:_,onMouseMove:A,onMouseUp:k,onMouseLeave:k})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"outline",onClick:E,children:"Clear"}),e.jsx(M,{onClick:D,children:"Save Signature"})]})]}),e.jsxs(Qe,{value:"upload",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Upload Signature Image"}),e.jsx(oe,{type:"file",accept:"image/png,image/jpeg",onChange:O=>C(O,"signature"),className:"bg-slate-800 border-slate-700"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Upload a PNG or JPEG with transparent background for best results"})]}),u&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{children:"Preview:"}),e.jsx("div",{className:"mt-2 p-4 bg-white rounded inline-block",children:e.jsx("img",{src:u,alt:"Signature preview",className:"max-h-20"})})]})]}),e.jsxs(Qe,{value:"stamp",className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Upload Company Stamp"}),e.jsx(oe,{type:"file",accept:"image/png,image/jpeg",onChange:O=>C(O,"stamp"),className:"bg-slate-800 border-slate-700"}),e.jsx("p",{className:"text-xs text-slate-400",children:"Upload your company seal/stamp image"})]}),x&&e.jsxs("div",{className:"mt-4",children:[e.jsx(Z,{children:"Preview:"}),e.jsx("div",{className:"mt-2 p-4 bg-white rounded inline-block",children:e.jsx("img",{src:x,alt:"Stamp preview",className:"max-h-24"})})]})]})]})})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"E-Signature Integration Status"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${n?"bg-green-500":"bg-slate-500"}`}),e.jsx("span",{className:"text-white",children:"DocuSign API"})]}),e.jsx(Q,{variant:n?"default":"secondary",children:n?"Connected":"Not Connected"})]}),e.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`w-3 h-3 rounded-full ${l?"bg-green-500":"bg-slate-500"}`}),e.jsx("span",{className:"text-white",children:"Adobe Sign API"})]}),e.jsx(Q,{variant:l?"default":"secondary",children:l?"Connected":"Not Connected"})]}),e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(ks,{className:"w-4 h-4 text-amber-500 mt-0.5"}),e.jsx("div",{children:e.jsx("p",{className:"text-sm text-amber-200",children:"E-signature integrations require API credentials. Contact support or configure in Settings."})})]})})]})]})]})}const hz="https://trdrhub-api.onrender.com";function bYe(){const{toast:t}=et(),{session:s}=Dt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState(null),[u,h]=m.useState(!1),[x,g]=m.useState("");m.useEffect(()=>{j()},[]);const j=async()=>{try{const C=await fetch(`${hz}/doc-generator/advanced/banks`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});if(C.ok){const _=await C.json();r(_.banks)}}catch(C){console.error("Error fetching banks:",C)}finally{i(!1)}},y=async C=>{h(!0);try{const _=await fetch(`${hz}/doc-generator/advanced/banks/${C}`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});_.ok&&c(await _.json())}catch{t({title:"Error",description:"Failed to load bank profile",variant:"destructive"})}finally{h(!1)}},b=[...new Set(a.map(C=>C.country))].sort(),N=a.filter(C=>{const _=C.name.toLowerCase().includes(l.toLowerCase())||C.code.toLowerCase().includes(l.toLowerCase())||C.swift.toLowerCase().includes(l.toLowerCase()),A=!x||C.country===x;return _&&A});return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Bank-Specific Formats"}),e.jsx("p",{className:"text-slate-400",children:"View document requirements for different banks"})]}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsx("div",{className:"lg:col-span-1 space-y-4",children:e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{className:"pb-3",children:e.jsx(ee,{className:"text-white text-lg",children:"Banks"})}),e.jsxs(U,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"relative",children:[e.jsx(Bt,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(oe,{placeholder:"Search banks...",value:l,onChange:C=>o(C.target.value),className:"pl-10 bg-slate-800 border-slate-700"})]}),e.jsxs(Te,{value:x||"all",onValueChange:C=>g(C==="all"?"":C),children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"All Countries"})}),e.jsxs(De,{children:[e.jsx(K,{value:"all",children:"All Countries"}),b.map(C=>e.jsx(K,{value:C,children:C},C))]})]})]}),n?e.jsx("div",{className:"flex items-center justify-center p-8",children:e.jsx(ct,{className:"h-6 w-6 animate-spin text-slate-400"})}):e.jsx("div",{className:"space-y-2 max-h-[400px] overflow-y-auto",children:N.map(C=>e.jsx("button",{onClick:()=>y(C.code),className:`w-full text-left p-3 rounded-lg transition-colors ${d?.code===C.code?"bg-blue-600/20 border border-blue-500":"bg-slate-800/50 hover:bg-slate-800 border border-transparent"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white",children:C.name}),e.jsxs("div",{className:"text-xs text-slate-400",children:[C.code," â€¢ ",C.country]})]}),C.swift&&e.jsx(Q,{variant:"outline",className:"text-xs",children:C.swift})]})},C.code))})]})]})}),e.jsx("div",{className:"lg:col-span-2",children:u?e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsx(U,{className:"flex items-center justify-center p-12",children:e.jsx(ct,{className:"h-8 w-8 animate-spin text-slate-400"})})}):d?e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(Bs,{className:"h-5 w-5"}),d.name]}),e.jsx(ue,{className:"mt-1",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(ha,{className:"h-3 w-3"}),d.country,d.swift&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-slate-600",children:"â€¢"}),e.jsx("span",{className:"font-mono",children:d.swift})]})]})})]}),e.jsx(Q,{children:d.code})]})}),e.jsxs(U,{className:"space-y-6",children:[d.general_requirements.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-medium text-white flex items-center gap-2",children:[e.jsx(Ve,{className:"h-4 w-4 text-amber-500"}),"General Requirements"]}),e.jsx("ul",{className:"space-y-2",children:d.general_requirements.map((C,_)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-300",children:[e.jsx(Oe,{className:"h-4 w-4 text-green-500 mt-0.5 flex-shrink-0"}),C]},_))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h3",{className:"font-medium text-white flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),"Document Format Requirements"]}),e.jsx(oo,{type:"single",collapsible:!0,className:"w-full",children:Object.entries(d.document_formats).map(([C,_])=>e.jsxs(Qr,{value:C,className:"border-slate-800",children:[e.jsx(Xr,{className:"text-white hover:no-underline",children:e.jsxs("span",{className:"flex items-center gap-2",children:[e.jsx(Be,{className:"h-4 w-4"}),C.replace(/_/g," ").replace(/\b\w/g,A=>A.toUpperCase()),e.jsxs(Q,{variant:"outline",className:"ml-2",children:[_.fields.length," fields"]})]})}),e.jsxs(en,{className:"space-y-4",children:[_.fields.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"text-sm font-medium text-slate-300",children:"Required Fields:"}),_.fields.map((A,k)=>e.jsxs("div",{className:"p-3 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-mono text-sm text-white",children:A.field_name}),e.jsx(Q,{variant:A.required?"destructive":"outline",children:A.required?"Required":"Optional"})]}),A.notes&&e.jsx("p",{className:"text-xs text-slate-400 mt-1",children:A.notes}),A.format&&e.jsxs("p",{className:"text-xs text-slate-500 mt-1 font-mono",children:["Format: ",A.format]})]},k))]}),_.certification_text&&e.jsxs("div",{className:"p-3 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-300 mb-1",children:"Required Certification Text:"}),e.jsxs("p",{className:"text-sm text-blue-200 italic",children:['"',_.certification_text,'"']})]}),_.special_instructions&&e.jsx("div",{className:"p-3 bg-amber-500/10 border border-amber-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Ja,{className:"h-4 w-4 text-amber-500 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-200",children:_.special_instructions})]})})]})]},C))})]})]})]}):e.jsx($,{className:"bg-slate-900/50 border-slate-800",children:e.jsxs(U,{className:"flex flex-col items-center justify-center p-12 text-center",children:[e.jsx(Bs,{className:"h-12 w-12 text-slate-600 mb-4"}),e.jsx("h3",{className:"text-lg font-medium text-white mb-2",children:"Select a Bank"}),e.jsx("p",{className:"text-slate-400",children:"Choose a bank from the list to view their specific document requirements"})]})})})]})]})}const xz="https://trdrhub-api.onrender.com",pz=[{id:"gsp_form_a",name:"GSP Form A",fullName:"Generalized System of Preferences - Certificate of Origin",description:"For exports to developed countries (US, EU, Japan, etc.) with preferential tariff treatment",color:"green",acceptedBy:["United States","European Union","Japan","Canada","Australia","Switzerland","Norway"]},{id:"eur1",name:"EUR.1",fullName:"Movement Certificate EUR.1",description:"For trade between EU and partner countries with free trade agreements",color:"blue",acceptedBy:["EU Member States","Turkey","Switzerland","EFTA Countries","Mediterranean Partners"]},{id:"rcep",name:"RCEP",fullName:"Regional Comprehensive Economic Partnership Certificate of Origin",description:"For trade among ASEAN+5 countries (China, Japan, Korea, Australia, NZ)",color:"purple",acceptedBy:["China","Japan","Korea","Australia","New Zealand","ASEAN Members (10 countries)"]}];function yYe(){const{toast:t}=et(),{user:s}=Dt(),[a,r]=m.useState([]),[n,i]=m.useState(!0),[l,o]=m.useState(""),[d,c]=m.useState(""),[u,h]=m.useState(!1),[x,g]=m.useState("P"),[j,y]=m.useState("");m.useEffect(()=>{b()},[]);const b=async()=>{try{const _=await fetch(`${xz}/doc-generator/document-sets`,{headers:{Authorization:`Bearer ${s?.access_token||""}`}});if(_.ok){const A=await _.json();r(A.document_sets||[])}}catch(_){console.error("Error fetching document sets:",_)}finally{i(!1)}},N=async()=>{if(!l||!d){t({title:"Selection Required",description:"Please select a document set and certificate type",variant:"destructive"});return}h(!0);try{const _=await fetch(`${xz}/doc-generator/advanced/certificates/generate`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s?.access_token||""}`},body:JSON.stringify({document_set_id:l,certificate_type:d,additional_data:{origin_criterion:x,place:j}})});if(!_.ok)throw new Error("Generation failed");const A=await _.blob(),k=window.URL.createObjectURL(A),E=document.createElement("a");E.href=k,E.download=`${d.toUpperCase()}_${l.slice(0,8)}.pdf`,document.body.appendChild(E),E.click(),E.remove(),window.URL.revokeObjectURL(k),t({title:"Certificate Generated",description:"Your certificate has been downloaded"})}catch{t({title:"Error",description:"Failed to generate certificate",variant:"destructive"})}finally{h(!1)}},C=pz.find(_=>_.id===d);return e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Origin Certificates"}),e.jsx("p",{className:"text-slate-400",children:"Generate GSP Form A, EUR.1, and other preferential origin certificates"})]}),e.jsx("div",{className:"grid gap-4 md:grid-cols-2",children:pz.map(_=>e.jsxs($,{className:`bg-slate-900/50 border-slate-800 cursor-pointer transition-all ${d===_.id?"ring-2 ring-blue-500 border-blue-500":"hover:border-slate-700"}`,onClick:()=>c(_.id),children:[e.jsxs(X,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(ee,{className:"text-white flex items-center gap-2",children:[e.jsx(ag,{className:`h-5 w-5 text-${_.color}-500`}),_.name]}),d===_.id&&e.jsx(Oe,{className:"h-5 w-5 text-blue-500"})]}),e.jsx(ue,{children:_.fullName})]}),e.jsxs(U,{children:[e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:_.description}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[_.acceptedBy.slice(0,4).map(A=>e.jsx(Q,{variant:"outline",className:"text-xs",children:A},A)),_.acceptedBy.length>4&&e.jsxs(Q,{variant:"outline",className:"text-xs",children:["+",_.acceptedBy.length-4," more"]})]})]})]},_.id))}),e.jsx(As,{className:"bg-slate-800"}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsxs(X,{children:[e.jsx(ee,{className:"text-white",children:"Generate Certificate"}),e.jsx(ue,{children:"Select a document set and configure certificate details"})]}),e.jsxs(U,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Document Set"}),n?e.jsxs("div",{className:"flex items-center gap-2 text-slate-400",children:[e.jsx(ct,{className:"h-4 w-4 animate-spin"}),"Loading document sets..."]}):e.jsxs(Te,{value:l,onValueChange:o,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{placeholder:"Select a document set"})}),e.jsx(De,{children:a.map(_=>e.jsxs(K,{value:_.id,children:[_.name||_.invoice_number||_.id.slice(0,8),_.beneficiary_name&&` - ${_.beneficiary_name}`]},_.id))})]})]}),C&&e.jsxs("div",{className:"p-4 bg-slate-800/50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(ag,{className:"h-5 w-5 text-blue-500"}),e.jsx("span",{className:"font-medium text-white",children:C.name})]}),e.jsx("p",{className:"text-sm text-slate-400",children:C.fullName})]}),d==="gsp_form_a"&&e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Origin Criterion"}),e.jsxs(Te,{value:x,onValueChange:g,children:[e.jsx(Pe,{className:"bg-slate-800 border-slate-700",children:e.jsx(Fe,{})}),e.jsxs(De,{children:[e.jsx(K,{value:"P",children:"P - Wholly obtained"}),e.jsx(K,{value:"W",children:"W - Substantially transformed"}),e.jsx(K,{value:"F",children:"F - From specified materials"})]})]}),e.jsx("p",{className:"text-xs text-slate-400",children:"P = Products wholly obtained in the country"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(Z,{children:"Place of Certification"}),e.jsx(oe,{value:j,onChange:_=>y(_.target.value),placeholder:"e.g., Dhaka, Bangladesh",className:"bg-slate-800 border-slate-700"})]})]}),e.jsx("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-blue-500 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-300 mb-1",children:"Important"}),e.jsx("p",{className:"text-sm text-blue-200",children:"The certificate will be generated using data from your selected document set. Ensure all information is accurate before generating. Official certificates may require authentication by the Chamber of Commerce."})]})]})}),e.jsx(M,{onClick:N,disabled:!l||!d||u,className:"w-full",children:u?e.jsxs(e.Fragment,{children:[e.jsx(ct,{className:"w-4 h-4 mr-2 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Gt,{className:"w-4 h-4 mr-2"}),"Generate ",C?.name||"Certificate"]})})]})]}),e.jsxs($,{className:"bg-slate-900/50 border-slate-800",children:[e.jsx(X,{children:e.jsx(ee,{className:"text-white",children:"Certificate Guide"})}),e.jsx(U,{className:"space-y-4",children:e.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-green-400",children:"GSP Form A"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[e.jsx("li",{children:"â€¢ Used for exports from developing to developed countries"}),e.jsx("li",{children:"â€¢ Provides reduced or zero tariff rates"}),e.jsx("li",{children:"â€¢ Must be authenticated by authorized body"}),e.jsx("li",{children:"â€¢ Valid for 12 months from date of issue"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("h4",{className:"font-medium text-blue-400",children:"EUR.1 Certificate"}),e.jsxs("ul",{className:"text-sm text-slate-400 space-y-1",children:[e.jsx("li",{children:"â€¢ For EU FTA partner country trade"}),e.jsx("li",{children:"â€¢ Proves preferential origin of goods"}),e.jsx("li",{children:"â€¢ Customs authority authentication required"}),e.jsx("li",{children:"â€¢ Validity period varies by agreement"})]})]})]})})]})]})}function NYe(){return e.jsxs(e.Fragment,{children:[e.jsxs(oie,{children:[e.jsx(Me,{path:"/",element:e.jsx(ape,{})}),e.jsx(Me,{path:"/debug",element:e.jsx("div",{style:{padding:"20px",fontSize:"24px"},children:"ðŸŽ‰ Debug Route Works! The server and routing are functioning correctly."})}),e.jsx(Me,{path:"/lc-demo",element:e.jsx(VL,{})}),e.jsx(Me,{path:"/trdr",element:e.jsx(xpe,{})}),e.jsx(Me,{path:"/tools",element:e.jsx(kpe,{})}),e.jsx(Me,{path:"/technology",element:e.jsx(_pe,{})}),e.jsx(Me,{path:"/docs",element:e.jsx(Ppe,{})}),e.jsx(Me,{path:"/api",element:e.jsx(Tpe,{})}),e.jsx(Me,{path:"/guides/ucp600",element:e.jsx(Rpe,{})}),e.jsx(Me,{path:"/blog",element:e.jsx(Ipe,{})}),e.jsx(Me,{path:"/pricing",element:e.jsx(Mpe,{})}),e.jsx(Me,{path:"/about",element:e.jsx(Upe,{})}),e.jsx(Me,{path:"/careers",element:e.jsx(tLe,{})}),e.jsx(Me,{path:"/contact",element:e.jsx(qpe,{})}),e.jsx(Me,{path:"/privacy",element:e.jsx(Vpe,{})}),e.jsx(Me,{path:"/terms",element:e.jsx(Wpe,{})}),e.jsx(Me,{path:"/security",element:e.jsx(Hpe,{})}),e.jsx(Me,{path:"/sanctions",element:e.jsx(Xpe,{})}),e.jsxs(Me,{path:"/sanctions/dashboard",element:e.jsx(rje,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(oje,{})}),e.jsx(Me,{path:"screen/party",element:e.jsx(Vje,{})}),e.jsx(Me,{path:"screen/vessel",element:e.jsx(Hje,{})}),e.jsx(Me,{path:"screen/goods",element:e.jsx(Kje,{})}),e.jsx(Me,{path:"batch",element:e.jsx(obe,{})}),e.jsx(Me,{path:"history",element:e.jsx(Yje,{})}),e.jsx(Me,{path:"certificates",element:e.jsx(Jje,{})}),e.jsx(Me,{path:"watchlist",element:e.jsx(abe,{})}),e.jsx(Me,{path:"api",element:e.jsx(dbe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(rbe,{})}),e.jsx(Me,{path:"help",element:e.jsx(lbe,{})})]}),e.jsx(Me,{path:"/hs-code",element:e.jsx(ife,{})}),e.jsxs(Me,{path:"/hs-code/dashboard",element:e.jsx(mbe,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(xbe,{})}),e.jsx(Me,{path:"classify",element:e.jsx(pbe,{})}),e.jsx(Me,{path:"search",element:e.jsx(bbe,{})}),e.jsx(Me,{path:"duty",element:e.jsx(Nbe,{})}),e.jsx(Me,{path:"fta",element:e.jsx(wbe,{})}),e.jsx(Me,{path:"roo",element:e.jsx(_be,{})}),e.jsx(Me,{path:"compliance",element:e.jsx(Cbe,{})}),e.jsx(Me,{path:"history",element:e.jsx(Sbe,{})}),e.jsx(Me,{path:"favorites",element:e.jsx(kbe,{})}),e.jsx(Me,{path:"bulk",element:e.jsx(Ebe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(Abe,{})}),e.jsx(Me,{path:"help",element:e.jsx(Gbe,{})}),e.jsx(Me,{path:"compare",element:e.jsx(Kbe,{})}),e.jsx(Me,{path:"rulings",element:e.jsx(Ybe,{})}),e.jsx(Me,{path:"alerts",element:e.jsx(Zbe,{})}),e.jsx(Me,{path:"usmca",element:e.jsx(Jbe,{})}),e.jsx(Me,{path:"teams",element:e.jsx(Qbe,{})}),e.jsx(Me,{path:"compliance-suite",element:e.jsx(eye,{})}),e.jsx(Me,{path:"export-controls",element:e.jsx(tye,{})}),e.jsx(Me,{path:"section-301",element:e.jsx(sye,{})}),e.jsx(Me,{path:"ad-cvd",element:e.jsx(aye,{})}),e.jsx(Me,{path:"quotas",element:e.jsx(rye,{})})]}),e.jsx(Me,{path:"/doc-generator",element:e.jsx(mye,{})}),e.jsxs(Me,{path:"/doc-generator/dashboard",element:e.jsx(sYe,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(iYe,{})}),e.jsx(Me,{path:"new",element:e.jsx(uz,{})}),e.jsx(Me,{path:"edit/:id",element:e.jsx(uz,{})}),e.jsx(Me,{path:"branding",element:e.jsx(mYe,{})}),e.jsx(Me,{path:"templates",element:e.jsx(hYe,{})}),e.jsx(Me,{path:"products",element:e.jsx(pYe,{})}),e.jsx(Me,{path:"buyers",element:e.jsx(gYe,{})}),e.jsx(Me,{path:"signatures",element:e.jsx(jYe,{})}),e.jsx(Me,{path:"bank-formats",element:e.jsx(bYe,{})}),e.jsx(Me,{path:"certificates",element:e.jsx(yYe,{})})]}),e.jsx(Me,{path:"/lc-builder",element:e.jsx(jye,{})}),e.jsxs(Me,{path:"/lc-builder/dashboard",element:e.jsx(Yye,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(Nye,{})}),e.jsx(Me,{path:"new",element:e.jsx(dN,{})}),e.jsx(Me,{path:"edit/:id",element:e.jsx(dN,{})}),e.jsx(Me,{path:"clauses",element:e.jsx(Jye,{})}),e.jsx(Me,{path:"templates",element:e.jsx(Qye,{})}),e.jsx(Me,{path:"applicants",element:e.jsx(Xye,{})}),e.jsx(Me,{path:"beneficiaries",element:e.jsx(eNe,{})}),e.jsx(Me,{path:"mt700-reference",element:e.jsx(sNe,{})}),e.jsx(Me,{path:"risk",element:e.jsx(aNe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(rNe,{})}),e.jsx(Me,{path:"help",element:e.jsx(lNe,{})}),e.jsx(Me,{path:"history",element:e.jsx(IM,{})}),e.jsx(Me,{path:"history/:applicationId",element:e.jsx(IM,{})}),e.jsx(Me,{path:"workflow/:id",element:e.jsx(LM,{})}),e.jsx(Me,{path:"approvals",element:e.jsx(LM,{})}),e.jsx(Me,{path:"shared",element:e.jsx(xNe,{})})]}),e.jsx(Me,{path:"/lc-builder/wizard",element:e.jsx(dN,{})}),e.jsx(Me,{path:"/lc-builder/wizard/:id",element:e.jsx(dN,{})}),e.jsx(Me,{path:"/tracking",element:e.jsx(yNe,{})}),e.jsxs(Me,{path:"/tracking/dashboard",element:e.jsx(RGe,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(LGe,{})}),e.jsx(Me,{path:"search",element:e.jsx(vKe,{})}),e.jsx(Me,{path:"vessel-search",element:e.jsx(yKe,{})}),e.jsx(Me,{path:"container/:containerId",element:e.jsx(mKe,{})}),e.jsx(Me,{path:"vessel/:vesselId",element:e.jsx(xKe,{})}),e.jsx(Me,{path:"active",element:e.jsx(wKe,{})}),e.jsx(Me,{path:"map",element:e.jsx(UKe,{})}),e.jsx(Me,{path:"ports",element:e.jsx(VKe,{})}),e.jsx(Me,{path:"alerts",element:e.jsx(CKe,{})}),e.jsx(Me,{path:"exceptions",element:e.jsx(YKe,{})}),e.jsx(Me,{path:"history",element:e.jsx(kKe,{})}),e.jsx(Me,{path:"analytics",element:e.jsx(TKe,{})}),e.jsx(Me,{path:"performance",element:e.jsx(eYe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(FKe,{})}),e.jsx(Me,{path:"help",element:e.jsx(IKe,{})})]}),e.jsx(Me,{path:"/analytics",element:e.jsx(ENe,{})}),e.jsx(Me,{path:"/price-verify",element:e.jsx(RNe,{})}),e.jsx(Me,{path:"/price-verify/tool",element:e.jsx(LNe,{})}),e.jsxs(Me,{path:"/price-verify/dashboard",element:e.jsx(UNe,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(WNe,{})}),e.jsx(Me,{path:"verify",element:e.jsx(GNe,{})}),e.jsx(Me,{path:"batch",element:e.jsx(YNe,{})}),e.jsx(Me,{path:"commodities",element:e.jsx(YOe,{})}),e.jsx(Me,{path:"prices",element:e.jsx(QOe,{})}),e.jsx(Me,{path:"history",element:e.jsx(eIe,{})}),e.jsx(Me,{path:"analytics",element:e.jsx(tIe,{})}),e.jsx(Me,{path:"reports",element:e.jsx(sIe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(aIe,{})}),e.jsx(Me,{path:"help",element:e.jsx(nIe,{})}),e.jsx(Me,{path:"admin",element:e.jsx(iIe,{})})]}),e.jsx(Me,{path:"/risk",element:e.jsx(hIe,{})}),e.jsx(Me,{path:"/dual-use",element:e.jsx(bIe,{})}),e.jsx(Me,{path:"/customs",element:e.jsx(kIe,{})}),e.jsx(Me,{path:"/duty-calc",element:e.jsx(TIe,{})}),e.jsx(Me,{path:"/routes",element:e.jsx(LIe,{})}),e.jsx(Me,{path:"/bank-fees",element:e.jsx(zIe,{})}),e.jsx(Me,{path:"/finance",element:e.jsx(GIe,{})}),e.jsx(Me,{path:"/insurance",element:e.jsx(QIe,{})}),e.jsx(Me,{path:"/lcopilot",element:e.jsx(VL,{})}),e.jsx(Me,{path:"/login",element:e.jsx(aLe,{})}),e.jsx(Me,{path:"/register",element:e.jsx(nLe,{})}),e.jsx(Me,{path:"/onboarding",element:e.jsx(jLe,{})}),e.jsxs(Me,{path:"/hub",element:e.jsx(_Ge,{}),children:[e.jsx(Me,{index:!0,element:e.jsx(JU,{})}),e.jsx(Me,{path:"home",element:e.jsx(JU,{})}),e.jsx(Me,{path:"usage",element:e.jsx(TGe,{})}),e.jsx(Me,{path:"billing",element:e.jsx(AGe,{})}),e.jsx(Me,{path:"team",element:e.jsx(PGe,{})}),e.jsx(Me,{path:"settings",element:e.jsx(DGe,{})})]}),e.jsx(Me,{path:"/dashboard",element:e.jsx(CLe,{})}),e.jsx(Me,{path:"/lcopilot/upload",element:e.jsx(ppe,{})}),e.jsx(Me,{path:"/lcopilot/review/:sessionId",element:e.jsx(bpe,{})}),e.jsx(Me,{path:"/lcopilot/report/:sessionId",element:e.jsx(ype,{})}),e.jsx(Me,{path:"/lcopilot/demo",element:e.jsx(cWe,{})}),e.jsx(Me,{path:"/lcopilot/dashboard",element:e.jsx(bLe,{})}),e.jsx(Me,{path:"/lcopilot/upload-lc",element:e.jsx(SMe,{})}),e.jsx(Me,{path:"/lcopilot/results",element:e.jsx(ww,{})}),e.jsx(Me,{path:"/lcopilot/results/:jobId",element:e.jsx(ww,{})}),e.jsx(Me,{path:"/lcopilot/results-v2/:sessionId",element:e.jsx(Hze,{})}),e.jsx(Me,{path:"/lcopilot/draft-corrections",element:e.jsx(kMe,{})}),e.jsx(Me,{path:"/lcopilot/draft-risk-results",element:e.jsx(EMe,{})}),e.jsx(Me,{path:"/export-lc-upload",element:e.jsx(Zee,{})}),e.jsx(Me,{path:"/lcopilot/import-upload",element:e.jsx(Jee,{})}),e.jsx(Me,{path:"/import/results/:jobId",element:e.jsx(zP,{})}),e.jsx(Me,{path:"/lcopilot/import-results/:jobId",element:e.jsx(zP,{})}),e.jsx(Me,{path:"/lcopilot/exporter-dashboard/login",element:e.jsx(pk,{to:"/login?returnUrl=/lcopilot/exporter-dashboard",replace:!0})}),e.jsx(Me,{path:"/lcopilot/exporter-dashboard",element:e.jsx(Kk,{children:e.jsx(Lze,{})})}),e.jsx(Me,{path:"/lcopilot/combined-dashboard",element:e.jsx(Kk,{children:e.jsx(fGe,{})})}),e.jsx(Me,{path:"/lcopilot/exporter-dashboard/legacy",element:e.jsx(pk,{to:"/lcopilot/exporter-dashboard",replace:!0})}),e.jsx(Me,{path:"/lcopilot/exporter-dashboard/v2",element:e.jsx(pk,{to:"/lcopilot/exporter-dashboard",replace:!0})}),e.jsx(Me,{path:"/lcopilot/importer-dashboard/login",element:e.jsx(rM,{children:e.jsx(QVe,{})})}),e.jsx(Me,{path:"/lcopilot/importer-dashboard",element:e.jsx(rM,{children:e.jsx(VVe,{})})}),e.jsx(Me,{path:"/lcopilot/enterprise-dashboard",element:e.jsx(Kk,{children:e.jsx(NGe,{})})}),e.jsx(Me,{path:"/lcopilot/exporter-results",element:e.jsx(ww,{})}),e.jsx(Me,{path:"/lcopilot/exporter-analytics",element:e.jsx(cte,{})}),e.jsx(Me,{path:"/lcopilot/importer-analytics",element:e.jsx(Zte,{})}),e.jsx(Me,{path:"/lcopilot/analytics",element:e.jsx(r9e,{})}),e.jsx(Me,{path:"/lcopilot/analytics/exporter",element:e.jsx(n9e,{})}),e.jsx(Me,{path:"/lcopilot/analytics/bank",element:e.jsx(i9e,{})}),e.jsx(Me,{path:"/lcopilot/bank-dashboard/login",element:e.jsx(Gk,{children:e.jsx(UVe,{})})}),e.jsx(Me,{path:"/lcopilot/bank-dashboard",element:e.jsx(Gk,{children:e.jsx(OVe,{})})}),e.jsx(Me,{path:"/lcopilot/bank-dashboard/legacy",element:e.jsx(X9e,{})}),e.jsx(Me,{path:"/lcopilot/bank-dashboard/client/:clientName",element:e.jsx(Gk,{children:e.jsx(XVe,{})})}),e.jsx(Me,{path:"/lcopilot/component-gallery",element:e.jsx(eWe,{})}),e.jsx(Me,{path:"/lcopilot/exporter-corrections",element:e.jsx(tWe,{})}),e.jsx(Me,{path:"/lcopilot/supplier-corrections",element:e.jsx(sWe,{})}),e.jsx(Me,{path:"/lcopilot/supplier-results",element:e.jsx(aWe,{})}),e.jsx(Me,{path:"/test-import",element:e.jsx(d$e,{})}),e.jsx(Me,{path:"/lcopilot/support",element:e.jsx(iWe,{})}),e.jsx(Me,{path:"/auth/callback",element:e.jsx(eGe,{})}),e.jsx(Me,{path:"/admin/login",element:e.jsx(dWe,{})}),e.jsx(Me,{path:"/admin",element:e.jsx(XHe,{})}),e.jsx(Me,{path:"*",element:e.jsx(lWe,{})})]}),e.jsx(oWe,{})]})}var wR="ToastProvider",[_R,wYe,_Ye]=Gg("Toast"),[cae,JJe]=Vr("Toast",[_Ye]),[CYe,UC]=cae(wR),dae=t=>{const{__scopeToast:s,label:a="Notification",duration:r=5e3,swipeDirection:n="right",swipeThreshold:i=50,children:l}=t,[o,d]=m.useState(null),[c,u]=m.useState(0),h=m.useRef(!1),x=m.useRef(!1);return a.trim()||console.error(`Invalid prop \`label\` supplied to \`${wR}\`. Expected non-empty \`string\`.`),e.jsx(_R.Provider,{scope:s,children:e.jsx(CYe,{scope:s,label:a,duration:r,swipeDirection:n,swipeThreshold:i,toastCount:c,viewport:o,onViewportChange:d,onToastAdd:m.useCallback(()=>u(g=>g+1),[]),onToastRemove:m.useCallback(()=>u(g=>g-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:x,children:l})})};dae.displayName=wR;var uae="ToastViewport",SYe=["F8"],XP="toast.viewportPause",eD="toast.viewportResume",mae=m.forwardRef((t,s)=>{const{__scopeToast:a,hotkey:r=SYe,label:n="Notifications ({hotkey})",...i}=t,l=UC(uae,a),o=wYe(a),d=m.useRef(null),c=m.useRef(null),u=m.useRef(null),h=m.useRef(null),x=vs(s,h,l.onViewportChange),g=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),j=l.toastCount>0;m.useEffect(()=>{const b=N=>{r.length!==0&&r.every(_=>N[_]||N.code===_)&&h.current?.focus()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[r]),m.useEffect(()=>{const b=d.current,N=h.current;if(j&&b&&N){const C=()=>{if(!l.isClosePausedRef.current){const E=new CustomEvent(XP);N.dispatchEvent(E),l.isClosePausedRef.current=!0}},_=()=>{if(l.isClosePausedRef.current){const E=new CustomEvent(eD);N.dispatchEvent(E),l.isClosePausedRef.current=!1}},A=E=>{!b.contains(E.relatedTarget)&&_()},k=()=>{b.contains(document.activeElement)||_()};return b.addEventListener("focusin",C),b.addEventListener("focusout",A),b.addEventListener("pointermove",C),b.addEventListener("pointerleave",k),window.addEventListener("blur",C),window.addEventListener("focus",_),()=>{b.removeEventListener("focusin",C),b.removeEventListener("focusout",A),b.removeEventListener("pointermove",C),b.removeEventListener("pointerleave",k),window.removeEventListener("blur",C),window.removeEventListener("focus",_)}}},[j,l.isClosePausedRef]);const y=m.useCallback(({tabbingDirection:b})=>{const C=o().map(_=>{const A=_.ref.current,k=[A,...BYe(A)];return b==="forwards"?k:k.reverse()});return(b==="forwards"?C.reverse():C).flat()},[o]);return m.useEffect(()=>{const b=h.current;if(b){const N=C=>{const _=C.altKey||C.ctrlKey||C.metaKey;if(C.key==="Tab"&&!_){const k=document.activeElement,E=C.shiftKey;if(C.target===b&&E){c.current?.focus();return}const O=y({tabbingDirection:E?"backwards":"forwards"}),P=O.findIndex(T=>T===k);TA(O.slice(P+1))?C.preventDefault():E?c.current?.focus():u.current?.focus()}};return b.addEventListener("keydown",N),()=>b.removeEventListener("keydown",N)}},[o,y]),e.jsxs(dme,{ref:d,role:"region","aria-label":n.replace("{hotkey}",g),tabIndex:-1,style:{pointerEvents:j?void 0:"none"},children:[j&&e.jsx(tD,{ref:c,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"forwards"});TA(b)}}),e.jsx(_R.Slot,{scope:a,children:e.jsx(Pt.ol,{tabIndex:-1,...i,ref:x})}),j&&e.jsx(tD,{ref:u,onFocusFromOutsideViewport:()=>{const b=y({tabbingDirection:"backwards"});TA(b)}})]})});mae.displayName=uae;var hae="ToastFocusProxy",tD=m.forwardRef((t,s)=>{const{__scopeToast:a,onFocusFromOutsideViewport:r,...n}=t,i=UC(hae,a);return e.jsx(e_,{tabIndex:0,...n,ref:s,style:{position:"fixed"},onFocus:l=>{const o=l.relatedTarget;!i.viewport?.contains(o)&&r()}})});tD.displayName=hae;var Lb="Toast",kYe="toast.swipeStart",EYe="toast.swipeMove",AYe="toast.swipeCancel",PYe="toast.swipeEnd",xae=m.forwardRef((t,s)=>{const{forceMount:a,open:r,defaultOpen:n,onOpenChange:i,...l}=t,[o,d]=Hn({prop:r,defaultProp:n??!0,onChange:i,caller:Lb});return e.jsx(jn,{present:a||o,children:e.jsx(FYe,{open:o,...l,ref:s,onClose:()=>d(!1),onPause:Zr(t.onPause),onResume:Zr(t.onResume),onSwipeStart:gt(t.onSwipeStart,c=>{c.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:gt(t.onSwipeMove,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","move"),c.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:gt(t.onSwipeCancel,c=>{c.currentTarget.setAttribute("data-swipe","cancel"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:gt(t.onSwipeEnd,c=>{const{x:u,y:h}=c.detail.delta;c.currentTarget.setAttribute("data-swipe","end"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),c.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),c.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${u}px`),c.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),d(!1)})})})});xae.displayName=Lb;var[DYe,TYe]=cae(Lb,{onClose(){}}),FYe=m.forwardRef((t,s)=>{const{__scopeToast:a,type:r="foreground",duration:n,open:i,onClose:l,onEscapeKeyDown:o,onPause:d,onResume:c,onSwipeStart:u,onSwipeMove:h,onSwipeCancel:x,onSwipeEnd:g,...j}=t,y=UC(Lb,a),[b,N]=m.useState(null),C=vs(s,q=>N(q)),_=m.useRef(null),A=m.useRef(null),k=n||y.duration,E=m.useRef(0),D=m.useRef(k),R=m.useRef(0),{onToastAdd:O,onToastRemove:P}=y,T=Zr(()=>{b?.contains(document.activeElement)&&y.viewport?.focus(),l()}),B=m.useCallback(q=>{!q||q===1/0||(window.clearTimeout(R.current),E.current=new Date().getTime(),R.current=window.setTimeout(T,q))},[T]);m.useEffect(()=>{const q=y.viewport;if(q){const z=()=>{B(D.current),c?.()},H=()=>{const le=new Date().getTime()-E.current;D.current=D.current-le,window.clearTimeout(R.current),d?.()};return q.addEventListener(XP,H),q.addEventListener(eD,z),()=>{q.removeEventListener(XP,H),q.removeEventListener(eD,z)}}},[y.viewport,k,d,c,B]),m.useEffect(()=>{i&&!y.isClosePausedRef.current&&B(k)},[i,k,y.isClosePausedRef,B]),m.useEffect(()=>(O(),()=>P()),[O,P]);const G=m.useMemo(()=>b?yae(b):null,[b]);return y.viewport?e.jsxs(e.Fragment,{children:[G&&e.jsx(RYe,{__scopeToast:a,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:G}),e.jsx(DYe,{scope:a,onClose:T,children:Du.createPortal(e.jsx(_R.ItemSlot,{scope:a,children:e.jsx(cme,{asChild:!0,onEscapeKeyDown:gt(o,()=>{y.isFocusedToastEscapeKeyDownRef.current||T(),y.isFocusedToastEscapeKeyDownRef.current=!1}),children:e.jsx(Pt.li,{tabIndex:0,"data-state":i?"open":"closed","data-swipe-direction":y.swipeDirection,...j,ref:C,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:gt(t.onKeyDown,q=>{q.key==="Escape"&&(o?.(q.nativeEvent),q.nativeEvent.defaultPrevented||(y.isFocusedToastEscapeKeyDownRef.current=!0,T()))}),onPointerDown:gt(t.onPointerDown,q=>{q.button===0&&(_.current={x:q.clientX,y:q.clientY})}),onPointerMove:gt(t.onPointerMove,q=>{if(!_.current)return;const z=q.clientX-_.current.x,H=q.clientY-_.current.y,le=!!A.current,Y=["left","right"].includes(y.swipeDirection),te=["left","up"].includes(y.swipeDirection)?Math.min:Math.max,ne=Y?te(0,z):0,ae=Y?0:te(0,H),re=q.pointerType==="touch"?10:2,xe={x:ne,y:ae},ye={originalEvent:q,delta:xe};le?(A.current=xe,sw(EYe,h,ye,{discrete:!1})):fz(xe,y.swipeDirection,re)?(A.current=xe,sw(kYe,u,ye,{discrete:!1}),q.target.setPointerCapture(q.pointerId)):(Math.abs(z)>re||Math.abs(H)>re)&&(_.current=null)}),onPointerUp:gt(t.onPointerUp,q=>{const z=A.current,H=q.target;if(H.hasPointerCapture(q.pointerId)&&H.releasePointerCapture(q.pointerId),A.current=null,_.current=null,z){const le=q.currentTarget,Y={originalEvent:q,delta:z};fz(z,y.swipeDirection,y.swipeThreshold)?sw(PYe,g,Y,{discrete:!0}):sw(AYe,x,Y,{discrete:!0}),le.addEventListener("click",te=>te.preventDefault(),{once:!0})}})})})}),y.viewport)})]}):null}),RYe=t=>{const{__scopeToast:s,children:a,...r}=t,n=UC(Lb,s),[i,l]=m.useState(!1),[o,d]=m.useState(!1);return LYe(()=>l(!0)),m.useEffect(()=>{const c=window.setTimeout(()=>d(!0),1e3);return()=>window.clearTimeout(c)},[]),o?null:e.jsx(hp,{asChild:!0,children:e.jsx(e_,{...r,children:i&&e.jsxs(e.Fragment,{children:[n.label," ",a]})})})},OYe="ToastTitle",pae=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx(Pt.div,{...r,ref:s})});pae.displayName=OYe;var IYe="ToastDescription",fae=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t;return e.jsx(Pt.div,{...r,ref:s})});fae.displayName=IYe;var gae="ToastAction",vae=m.forwardRef((t,s)=>{const{altText:a,...r}=t;return a.trim()?e.jsx(bae,{altText:a,asChild:!0,children:e.jsx(CR,{...r,ref:s})}):(console.error(`Invalid prop \`altText\` supplied to \`${gae}\`. Expected non-empty \`string\`.`),null)});vae.displayName=gae;var jae="ToastClose",CR=m.forwardRef((t,s)=>{const{__scopeToast:a,...r}=t,n=TYe(jae,a);return e.jsx(bae,{asChild:!0,children:e.jsx(Pt.button,{type:"button",...r,ref:s,onClick:gt(t.onClick,n.onClose)})})});CR.displayName=jae;var bae=m.forwardRef((t,s)=>{const{__scopeToast:a,altText:r,...n}=t;return e.jsx(Pt.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...n,ref:s})});function yae(t){const s=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&s.push(r.textContent),MYe(r)){const n=r.ariaHidden||r.hidden||r.style.display==="none",i=r.dataset.radixToastAnnounceExclude==="";if(!n)if(i){const l=r.dataset.radixToastAnnounceAlt;l&&s.push(l)}else s.push(...yae(r))}}),s}function sw(t,s,a,{discrete:r}){const n=a.originalEvent.currentTarget,i=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:a});s&&n.addEventListener(t,s,{once:!0}),r?MD(n,i):n.dispatchEvent(i)}var fz=(t,s,a=0)=>{const r=Math.abs(t.x),n=Math.abs(t.y),i=r>n;return s==="left"||s==="right"?i&&r>a:!i&&n>a};function LYe(t=()=>{}){const s=Zr(t);an(()=>{let a=0,r=0;return a=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(s)),()=>{window.cancelAnimationFrame(a),window.cancelAnimationFrame(r)}},[s])}function MYe(t){return t.nodeType===t.ELEMENT_NODE}function BYe(t){const s=[],a=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const n=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||n?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;a.nextNode();)s.push(a.currentNode);return s}function TA(t){const s=document.activeElement;return t.some(a=>a===s?!0:(a.focus(),document.activeElement!==s))}var $Ye=dae,Nae=mae,wae=xae,_ae=pae,Cae=fae,Sae=vae,kae=CR;function mv(...t){return t.filter(Boolean).map(s=>typeof s=="string"?s:typeof s=="object"&&s!==null?Object.entries(s).filter(([a,r])=>r).map(([a])=>a).join(" "):"").filter(Boolean).join(" ")}const UYe=$Ye,Eae=m.forwardRef(({className:t,...s},a)=>e.jsx(Nae,{ref:a,className:mv("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",t),...s}));Eae.displayName=Nae.displayName;const zYe=wh("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Aae=m.forwardRef(({className:t,variant:s,...a},r)=>e.jsx(wae,{ref:r,className:mv(zYe({variant:s}),t),...a}));Aae.displayName=wae.displayName;const qYe=m.forwardRef(({className:t,...s},a)=>e.jsx(Sae,{ref:a,className:mv("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",t),...s}));qYe.displayName=Sae.displayName;const Pae=m.forwardRef(({className:t,...s},a)=>e.jsx(kae,{ref:a,className:mv("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...s,children:e.jsx(fn,{className:"h-4 w-4"})}));Pae.displayName=kae.displayName;const Dae=m.forwardRef(({className:t,...s},a)=>e.jsx(_ae,{ref:a,className:mv("text-sm font-semibold",t),...s}));Dae.displayName=_ae.displayName;const Tae=m.forwardRef(({className:t,...s},a)=>e.jsx(Cae,{ref:a,className:mv("text-sm opacity-90",t),...s}));Tae.displayName=Cae.displayName;function VYe(){const{toasts:t}=et();return e.jsxs(UYe,{children:[t.map(function({id:s,title:a,description:r,action:n,...i}){return e.jsxs(Aae,{...i,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Dae,{children:a}),r&&e.jsx(Tae,{children:r})]}),n,e.jsx(Pae,{})]},s)}),e.jsx(Eae,{})]})}class WYe extends lt.Component{state={hasError:!1};static getDerivedStateFromError(s){return{hasError:!0,message:s.message??"Unexpected application error"}}componentDidCatch(s,a){console.error("Unhandled UI error",s,a),Vn.error("Something went wrong",{description:s.message??"Please try again shortly."})}handleRetry=()=>{this.setState({hasError:!1,message:void 0})};render(){return this.state.hasError?e.jsxs("div",{className:"flex min-h-screen flex-col items-center justify-center gap-4 bg-background px-6 text-center",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold",children:"Something went wrong"}),e.jsx("p",{className:"text-muted-foreground mt-2 max-w-md",children:this.state.message??"An unexpected error occurred. Please try again."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(M,{variant:"default",onClick:this.handleRetry,children:"Try again"}),e.jsx(M,{variant:"outline",onClick:()=>window.location.reload(),children:"Reload"})]})]}):this.props.children}}const qs=t=>typeof t=="string",_0=()=>{let t,s;const a=new Promise((r,n)=>{t=r,s=n});return a.resolve=t,a.reject=s,a},gz=t=>t==null?"":""+t,HYe=(t,s,a)=>{t.forEach(r=>{s[r]&&(a[r]=s[r])})},GYe=/###/g,vz=t=>t&&t.indexOf("###")>-1?t.replace(GYe,"."):t,jz=t=>!t||qs(t),Y0=(t,s,a)=>{const r=qs(s)?s.split("."):s;let n=0;for(;n<r.length-1;){if(jz(t))return{};const i=vz(r[n]);!t[i]&&a&&(t[i]=new a),Object.prototype.hasOwnProperty.call(t,i)?t=t[i]:t={},++n}return jz(t)?{}:{obj:t,k:vz(r[n])}},bz=(t,s,a)=>{const{obj:r,k:n}=Y0(t,s,Object);if(r!==void 0||s.length===1){r[n]=a;return}let i=s[s.length-1],l=s.slice(0,s.length-1),o=Y0(t,l,Object);for(;o.obj===void 0&&l.length;)i=`${l[l.length-1]}.${i}`,l=l.slice(0,l.length-1),o=Y0(t,l,Object),o&&o.obj&&typeof o.obj[`${o.k}.${i}`]<"u"&&(o.obj=void 0);o.obj[`${o.k}.${i}`]=a},KYe=(t,s,a,r)=>{const{obj:n,k:i}=Y0(t,s,Object);n[i]=n[i]||[],n[i].push(a)},h1=(t,s)=>{const{obj:a,k:r}=Y0(t,s);if(a)return a[r]},YYe=(t,s,a)=>{const r=h1(t,a);return r!==void 0?r:h1(s,a)},Fae=(t,s,a)=>{for(const r in s)r!=="__proto__"&&r!=="constructor"&&(r in t?qs(t[r])||t[r]instanceof String||qs(s[r])||s[r]instanceof String?a&&(t[r]=s[r]):Fae(t[r],s[r],a):t[r]=s[r]);return t},Nf=t=>t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var ZYe={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const JYe=t=>qs(t)?t.replace(/[&<>"'\/]/g,s=>ZYe[s]):t;class QYe{constructor(s){this.capacity=s,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(s){const a=this.regExpMap.get(s);if(a!==void 0)return a;const r=new RegExp(s);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(s,r),this.regExpQueue.push(s),r}}const XYe=[" ",",","?","!",";"],eZe=new QYe(20),tZe=(t,s,a)=>{s=s||"",a=a||"";const r=XYe.filter(l=>s.indexOf(l)<0&&a.indexOf(l)<0);if(r.length===0)return!0;const n=eZe.getRegExp(`(${r.map(l=>l==="?"?"\\?":l).join("|")})`);let i=!n.test(t);if(!i){const l=t.indexOf(a);l>0&&!n.test(t.substring(0,l))&&(i=!0)}return i},sD=function(t,s){let a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:".";if(!t)return;if(t[s])return t[s];const r=s.split(a);let n=t;for(let i=0;i<r.length;){if(!n||typeof n!="object")return;let l,o="";for(let d=i;d<r.length;++d)if(d!==i&&(o+=a),o+=r[d],l=n[o],l!==void 0){if(["string","number","boolean"].indexOf(typeof l)>-1&&d<r.length-1)continue;i+=d-i+1;break}n=l}return n},x1=t=>t&&t.replace("_","-"),sZe={type:"logger",log(t){this.output("log",t)},warn(t){this.output("warn",t)},error(t){this.output("error",t)},output(t,s){console&&console[t]&&console[t].apply(console,s)}};class p1{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.init(s,a)}init(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.prefix=a.prefix||"i18next:",this.logger=s||sZe,this.options=a,this.debug=a.debug}log(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return this.forward(a,"log","",!0)}warn(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return this.forward(a,"warn","",!0)}error(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return this.forward(a,"error","")}deprecate(){for(var s=arguments.length,a=new Array(s),r=0;r<s;r++)a[r]=arguments[r];return this.forward(a,"warn","WARNING DEPRECATED: ",!0)}forward(s,a,r,n){return n&&!this.debug?null:(qs(s[0])&&(s[0]=`${r}${this.prefix} ${s[0]}`),this.logger[a](s))}create(s){return new p1(this.logger,{prefix:`${this.prefix}:${s}:`,...this.options})}clone(s){return s=s||this.options,s.prefix=s.prefix||this.prefix,new p1(this.logger,s)}}var fd=new p1;class zC{constructor(){this.observers={}}on(s,a){return s.split(" ").forEach(r=>{this.observers[r]||(this.observers[r]=new Map);const n=this.observers[r].get(a)||0;this.observers[r].set(a,n+1)}),this}off(s,a){if(this.observers[s]){if(!a){delete this.observers[s];return}this.observers[s].delete(a)}}emit(s){for(var a=arguments.length,r=new Array(a>1?a-1:0),n=1;n<a;n++)r[n-1]=arguments[n];this.observers[s]&&Array.from(this.observers[s].entries()).forEach(l=>{let[o,d]=l;for(let c=0;c<d;c++)o(...r)}),this.observers["*"]&&Array.from(this.observers["*"].entries()).forEach(l=>{let[o,d]=l;for(let c=0;c<d;c++)o.apply(o,[s,...r])})}}class yz extends zC{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=s||{},this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.options.ignoreJSONStructure===void 0&&(this.options.ignoreJSONStructure=!0)}addNamespaces(s){this.options.ns.indexOf(s)<0&&this.options.ns.push(s)}removeNamespaces(s){const a=this.options.ns.indexOf(s);a>-1&&this.options.ns.splice(a,1)}getResource(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=n.keySeparator!==void 0?n.keySeparator:this.options.keySeparator,l=n.ignoreJSONStructure!==void 0?n.ignoreJSONStructure:this.options.ignoreJSONStructure;let o;s.indexOf(".")>-1?o=s.split("."):(o=[s,a],r&&(Array.isArray(r)?o.push(...r):qs(r)&&i?o.push(...r.split(i)):o.push(r)));const d=h1(this.data,o);return!d&&!a&&!r&&s.indexOf(".")>-1&&(s=o[0],a=o[1],r=o.slice(2).join(".")),d||!l||!qs(r)?d:sD(this.data&&this.data[s]&&this.data[s][a],r,i)}addResource(s,a,r,n){let i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{silent:!1};const l=i.keySeparator!==void 0?i.keySeparator:this.options.keySeparator;let o=[s,a];r&&(o=o.concat(l?r.split(l):r)),s.indexOf(".")>-1&&(o=s.split("."),n=a,a=o[1]),this.addNamespaces(a),bz(this.data,o,n),i.silent||this.emit("added",s,a,r,n)}addResources(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{silent:!1};for(const i in r)(qs(r[i])||Array.isArray(r[i]))&&this.addResource(s,a,i,r[i],{silent:!0});n.silent||this.emit("added",s,a,r)}addResourceBundle(s,a,r,n,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{silent:!1,skipCopy:!1},o=[s,a];s.indexOf(".")>-1&&(o=s.split("."),n=r,r=a,a=o[1]),this.addNamespaces(a);let d=h1(this.data,o)||{};l.skipCopy||(r=JSON.parse(JSON.stringify(r))),n?Fae(d,r,i):d={...d,...r},bz(this.data,o,d),l.silent||this.emit("added",s,a,r)}removeResourceBundle(s,a){this.hasResourceBundle(s,a)&&delete this.data[s][a],this.removeNamespaces(a),this.emit("removed",s,a)}hasResourceBundle(s,a){return this.getResource(s,a)!==void 0}getResourceBundle(s,a){return a||(a=this.options.defaultNS),this.options.compatibilityAPI==="v1"?{...this.getResource(s,a)}:this.getResource(s,a)}getDataByLanguage(s){return this.data[s]}hasLanguageSomeTranslations(s){const a=this.getDataByLanguage(s);return!!(a&&Object.keys(a)||[]).find(n=>a[n]&&Object.keys(a[n]).length>0)}toJSON(){return this.data}}var Rae={processors:{},addPostProcessor(t){this.processors[t.name]=t},handle(t,s,a,r,n){return t.forEach(i=>{this.processors[i]&&(s=this.processors[i].process(s,a,r,n))}),s}};const Nz={};class f1 extends zC{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};super(),HYe(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],s,this),this.options=a,this.options.keySeparator===void 0&&(this.options.keySeparator="."),this.logger=fd.create("translator")}changeLanguage(s){s&&(this.language=s)}exists(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};if(s==null)return!1;const r=this.resolve(s,a);return r&&r.res!==void 0}extractFromKey(s,a){let r=a.nsSeparator!==void 0?a.nsSeparator:this.options.nsSeparator;r===void 0&&(r=":");const n=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator;let i=a.ns||this.options.defaultNS||[];const l=r&&s.indexOf(r)>-1,o=!this.options.userDefinedKeySeparator&&!a.keySeparator&&!this.options.userDefinedNsSeparator&&!a.nsSeparator&&!tZe(s,r,n);if(l&&!o){const d=s.match(this.interpolator.nestingRegexp);if(d&&d.length>0)return{key:s,namespaces:qs(i)?[i]:i};const c=s.split(r);(r!==n||r===n&&this.options.ns.indexOf(c[0])>-1)&&(i=c.shift()),s=c.join(n)}return{key:s,namespaces:qs(i)?[i]:i}}translate(s,a,r){if(typeof a!="object"&&this.options.overloadTranslationOptionHandler&&(a=this.options.overloadTranslationOptionHandler(arguments)),typeof a=="object"&&(a={...a}),a||(a={}),s==null)return"";Array.isArray(s)||(s=[String(s)]);const n=a.returnDetails!==void 0?a.returnDetails:this.options.returnDetails,i=a.keySeparator!==void 0?a.keySeparator:this.options.keySeparator,{key:l,namespaces:o}=this.extractFromKey(s[s.length-1],a),d=o[o.length-1],c=a.lng||this.language,u=a.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(c&&c.toLowerCase()==="cimode"){if(u){const A=a.nsSeparator||this.options.nsSeparator;return n?{res:`${d}${A}${l}`,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:`${d}${A}${l}`}return n?{res:l,usedKey:l,exactUsedKey:l,usedLng:c,usedNS:d,usedParams:this.getUsedParamsDetails(a)}:l}const h=this.resolve(s,a);let x=h&&h.res;const g=h&&h.usedKey||l,j=h&&h.exactUsedKey||l,y=Object.prototype.toString.apply(x),b=["[object Number]","[object Function]","[object RegExp]"],N=a.joinArrays!==void 0?a.joinArrays:this.options.joinArrays,C=!this.i18nFormat||this.i18nFormat.handleAsObject,_=!qs(x)&&typeof x!="boolean"&&typeof x!="number";if(C&&x&&_&&b.indexOf(y)<0&&!(qs(N)&&Array.isArray(x))){if(!a.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const A=this.options.returnedObjectHandler?this.options.returnedObjectHandler(g,x,{...a,ns:o}):`key '${l} (${this.language})' returned an object instead of string.`;return n?(h.res=A,h.usedParams=this.getUsedParamsDetails(a),h):A}if(i){const A=Array.isArray(x),k=A?[]:{},E=A?j:g;for(const D in x)if(Object.prototype.hasOwnProperty.call(x,D)){const R=`${E}${i}${D}`;k[D]=this.translate(R,{...a,joinArrays:!1,ns:o}),k[D]===R&&(k[D]=x[D])}x=k}}else if(C&&qs(N)&&Array.isArray(x))x=x.join(N),x&&(x=this.extendTranslation(x,s,a,r));else{let A=!1,k=!1;const E=a.count!==void 0&&!qs(a.count),D=f1.hasDefaultValue(a),R=E?this.pluralResolver.getSuffix(c,a.count,a):"",O=a.ordinal&&E?this.pluralResolver.getSuffix(c,a.count,{ordinal:!1}):"",P=E&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),T=P&&a[`defaultValue${this.options.pluralSeparator}zero`]||a[`defaultValue${R}`]||a[`defaultValue${O}`]||a.defaultValue;!this.isValidLookup(x)&&D&&(A=!0,x=T),this.isValidLookup(x)||(k=!0,x=l);const G=(a.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&k?void 0:x,q=D&&T!==x&&this.options.updateMissing;if(k||A||q){if(this.logger.log(q?"updateKey":"missingKey",c,d,l,q?T:x),i){const Y=this.resolve(l,{...a,keySeparator:!1});Y&&Y.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let z=[];const H=this.languageUtils.getFallbackCodes(this.options.fallbackLng,a.lng||this.language);if(this.options.saveMissingTo==="fallback"&&H&&H[0])for(let Y=0;Y<H.length;Y++)z.push(H[Y]);else this.options.saveMissingTo==="all"?z=this.languageUtils.toResolveHierarchy(a.lng||this.language):z.push(a.lng||this.language);const le=(Y,te,ne)=>{const ae=D&&ne!==x?ne:G;this.options.missingKeyHandler?this.options.missingKeyHandler(Y,d,te,ae,q,a):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(Y,d,te,ae,q,a),this.emit("missingKey",Y,d,te,x)};this.options.saveMissing&&(this.options.saveMissingPlurals&&E?z.forEach(Y=>{const te=this.pluralResolver.getSuffixes(Y,a);P&&a[`defaultValue${this.options.pluralSeparator}zero`]&&te.indexOf(`${this.options.pluralSeparator}zero`)<0&&te.push(`${this.options.pluralSeparator}zero`),te.forEach(ne=>{le([Y],l+ne,a[`defaultValue${ne}`]||T)})}):le(z,l,T))}x=this.extendTranslation(x,s,a,h,r),k&&x===l&&this.options.appendNamespaceToMissingKey&&(x=`${d}:${l}`),(k||A)&&this.options.parseMissingKeyHandler&&(this.options.compatibilityAPI!=="v1"?x=this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?`${d}:${l}`:l,A?x:void 0):x=this.options.parseMissingKeyHandler(x))}return n?(h.res=x,h.usedParams=this.getUsedParamsDetails(a),h):x}extendTranslation(s,a,r,n,i){var l=this;if(this.i18nFormat&&this.i18nFormat.parse)s=this.i18nFormat.parse(s,{...this.options.interpolation.defaultVariables,...r},r.lng||this.language||n.usedLng,n.usedNS,n.usedKey,{resolved:n});else if(!r.skipInterpolation){r.interpolation&&this.interpolator.init({...r,interpolation:{...this.options.interpolation,...r.interpolation}});const c=qs(s)&&(r&&r.interpolation&&r.interpolation.skipOnVariables!==void 0?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let u;if(c){const x=s.match(this.interpolator.nestingRegexp);u=x&&x.length}let h=r.replace&&!qs(r.replace)?r.replace:r;if(this.options.interpolation.defaultVariables&&(h={...this.options.interpolation.defaultVariables,...h}),s=this.interpolator.interpolate(s,h,r.lng||this.language||n.usedLng,r),c){const x=s.match(this.interpolator.nestingRegexp),g=x&&x.length;u<g&&(r.nest=!1)}!r.lng&&this.options.compatibilityAPI!=="v1"&&n&&n.res&&(r.lng=this.language||n.usedLng),r.nest!==!1&&(s=this.interpolator.nest(s,function(){for(var x=arguments.length,g=new Array(x),j=0;j<x;j++)g[j]=arguments[j];return i&&i[0]===g[0]&&!r.context?(l.logger.warn(`It seems you are nesting recursively key: ${g[0]} in key: ${a[0]}`),null):l.translate(...g,a)},r)),r.interpolation&&this.interpolator.reset()}const o=r.postProcess||this.options.postProcess,d=qs(o)?[o]:o;return s!=null&&d&&d.length&&r.applyPostProcessor!==!1&&(s=Rae.handle(d,s,a,this.options&&this.options.postProcessPassResolved?{i18nResolved:{...n,usedParams:this.getUsedParamsDetails(r)},...r}:r,this)),s}resolve(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r,n,i,l,o;return qs(s)&&(s=[s]),s.forEach(d=>{if(this.isValidLookup(r))return;const c=this.extractFromKey(d,a),u=c.key;n=u;let h=c.namespaces;this.options.fallbackNS&&(h=h.concat(this.options.fallbackNS));const x=a.count!==void 0&&!qs(a.count),g=x&&!a.ordinal&&a.count===0&&this.pluralResolver.shouldUseIntlApi(),j=a.context!==void 0&&(qs(a.context)||typeof a.context=="number")&&a.context!=="",y=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);h.forEach(b=>{this.isValidLookup(r)||(o=b,!Nz[`${y[0]}-${b}`]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(o)&&(Nz[`${y[0]}-${b}`]=!0,this.logger.warn(`key "${n}" for languages "${y.join(", ")}" won't get resolved as namespace "${o}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),y.forEach(N=>{if(this.isValidLookup(r))return;l=N;const C=[u];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(C,u,N,b,a);else{let A;x&&(A=this.pluralResolver.getSuffix(N,a.count,a));const k=`${this.options.pluralSeparator}zero`,E=`${this.options.pluralSeparator}ordinal${this.options.pluralSeparator}`;if(x&&(C.push(u+A),a.ordinal&&A.indexOf(E)===0&&C.push(u+A.replace(E,this.options.pluralSeparator)),g&&C.push(u+k)),j){const D=`${u}${this.options.contextSeparator}${a.context}`;C.push(D),x&&(C.push(D+A),a.ordinal&&A.indexOf(E)===0&&C.push(D+A.replace(E,this.options.pluralSeparator)),g&&C.push(D+k))}}let _;for(;_=C.pop();)this.isValidLookup(r)||(i=_,r=this.getResource(N,b,_,a))}))})}),{res:r,usedKey:n,exactUsedKey:i,usedLng:l,usedNS:o}}isValidLookup(s){return s!==void 0&&!(!this.options.returnNull&&s===null)&&!(!this.options.returnEmptyString&&s==="")}getResource(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(s,a,r,n):this.resourceStore.getResource(s,a,r,n)}getUsedParamsDetails(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};const a=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],r=s.replace&&!qs(s.replace);let n=r?s.replace:s;if(r&&typeof s.count<"u"&&(n.count=s.count),this.options.interpolation.defaultVariables&&(n={...this.options.interpolation.defaultVariables,...n}),!r){n={...n};for(const i of a)delete n[i]}return n}static hasDefaultValue(s){const a="defaultValue";for(const r in s)if(Object.prototype.hasOwnProperty.call(s,r)&&a===r.substring(0,a.length)&&s[r]!==void 0)return!0;return!1}}const FA=t=>t.charAt(0).toUpperCase()+t.slice(1);class wz{constructor(s){this.options=s,this.supportedLngs=this.options.supportedLngs||!1,this.logger=fd.create("languageUtils")}getScriptPartFromCode(s){if(s=x1(s),!s||s.indexOf("-")<0)return null;const a=s.split("-");return a.length===2||(a.pop(),a[a.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(a.join("-"))}getLanguagePartFromCode(s){if(s=x1(s),!s||s.indexOf("-")<0)return s;const a=s.split("-");return this.formatLanguageCode(a[0])}formatLanguageCode(s){if(qs(s)&&s.indexOf("-")>-1){if(typeof Intl<"u"&&typeof Intl.getCanonicalLocales<"u")try{let n=Intl.getCanonicalLocales(s)[0];if(n&&this.options.lowerCaseLng&&(n=n.toLowerCase()),n)return n}catch{}const a=["hans","hant","latn","cyrl","cans","mong","arab"];let r=s.split("-");return this.options.lowerCaseLng?r=r.map(n=>n.toLowerCase()):r.length===2?(r[0]=r[0].toLowerCase(),r[1]=r[1].toUpperCase(),a.indexOf(r[1].toLowerCase())>-1&&(r[1]=FA(r[1].toLowerCase()))):r.length===3&&(r[0]=r[0].toLowerCase(),r[1].length===2&&(r[1]=r[1].toUpperCase()),r[0]!=="sgn"&&r[2].length===2&&(r[2]=r[2].toUpperCase()),a.indexOf(r[1].toLowerCase())>-1&&(r[1]=FA(r[1].toLowerCase())),a.indexOf(r[2].toLowerCase())>-1&&(r[2]=FA(r[2].toLowerCase()))),r.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?s.toLowerCase():s}isSupportedCode(s){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(s=this.getLanguagePartFromCode(s)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(s)>-1}getBestMatchFromCodes(s){if(!s)return null;let a;return s.forEach(r=>{if(a)return;const n=this.formatLanguageCode(r);(!this.options.supportedLngs||this.isSupportedCode(n))&&(a=n)}),!a&&this.options.supportedLngs&&s.forEach(r=>{if(a)return;const n=this.getLanguagePartFromCode(r);if(this.isSupportedCode(n))return a=n;a=this.options.supportedLngs.find(i=>{if(i===n)return i;if(!(i.indexOf("-")<0&&n.indexOf("-")<0)&&(i.indexOf("-")>0&&n.indexOf("-")<0&&i.substring(0,i.indexOf("-"))===n||i.indexOf(n)===0&&n.length>1))return i})}),a||(a=this.getFallbackCodes(this.options.fallbackLng)[0]),a}getFallbackCodes(s,a){if(!s)return[];if(typeof s=="function"&&(s=s(a)),qs(s)&&(s=[s]),Array.isArray(s))return s;if(!a)return s.default||[];let r=s[a];return r||(r=s[this.getScriptPartFromCode(a)]),r||(r=s[this.formatLanguageCode(a)]),r||(r=s[this.getLanguagePartFromCode(a)]),r||(r=s.default),r||[]}toResolveHierarchy(s,a){const r=this.getFallbackCodes(a||this.options.fallbackLng||[],s),n=[],i=l=>{l&&(this.isSupportedCode(l)?n.push(l):this.logger.warn(`rejecting language code not found in supportedLngs: ${l}`))};return qs(s)&&(s.indexOf("-")>-1||s.indexOf("_")>-1)?(this.options.load!=="languageOnly"&&i(this.formatLanguageCode(s)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&i(this.getScriptPartFromCode(s)),this.options.load!=="currentOnly"&&i(this.getLanguagePartFromCode(s))):qs(s)&&i(this.formatLanguageCode(s)),r.forEach(l=>{n.indexOf(l)<0&&i(this.formatLanguageCode(l))}),n}}let aZe=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],rZe={1:t=>+(t>1),2:t=>+(t!=1),3:t=>0,4:t=>t%10==1&&t%100!=11?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,5:t=>t==0?0:t==1?1:t==2?2:t%100>=3&&t%100<=10?3:t%100>=11?4:5,6:t=>t==1?0:t>=2&&t<=4?1:2,7:t=>t==1?0:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?1:2,8:t=>t==1?0:t==2?1:t!=8&&t!=11?2:3,9:t=>+(t>=2),10:t=>t==1?0:t==2?1:t<7?2:t<11?3:4,11:t=>t==1||t==11?0:t==2||t==12?1:t>2&&t<20?2:3,12:t=>+(t%10!=1||t%100==11),13:t=>+(t!==0),14:t=>t==1?0:t==2?1:t==3?2:3,15:t=>t%10==1&&t%100!=11?0:t%10>=2&&(t%100<10||t%100>=20)?1:2,16:t=>t%10==1&&t%100!=11?0:t!==0?1:2,17:t=>t==1||t%10==1&&t%100!=11?0:1,18:t=>t==0?0:t==1?1:2,19:t=>t==1?0:t==0||t%100>1&&t%100<11?1:t%100>10&&t%100<20?2:3,20:t=>t==1?0:t==0||t%100>0&&t%100<20?1:2,21:t=>t%100==1?1:t%100==2?2:t%100==3||t%100==4?3:0,22:t=>t==1?0:t==2?1:(t<0||t>10)&&t%10==0?2:3};const nZe=["v1","v2","v3"],iZe=["v4"],_z={zero:0,one:1,two:2,few:3,many:4,other:5},lZe=()=>{const t={};return aZe.forEach(s=>{s.lngs.forEach(a=>{t[a]={numbers:s.nr,plurals:rZe[s.fc]}})}),t};class oZe{constructor(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.languageUtils=s,this.options=a,this.logger=fd.create("pluralResolver"),(!this.options.compatibilityJSON||iZe.includes(this.options.compatibilityJSON))&&(typeof Intl>"u"||!Intl.PluralRules)&&(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=lZe(),this.pluralRulesCache={}}addRule(s,a){this.rules[s]=a}clearCache(){this.pluralRulesCache={}}getRule(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(this.shouldUseIntlApi()){const r=x1(s==="dev"?"en":s),n=a.ordinal?"ordinal":"cardinal",i=JSON.stringify({cleanedCode:r,type:n});if(i in this.pluralRulesCache)return this.pluralRulesCache[i];let l;try{l=new Intl.PluralRules(r,{type:n})}catch{if(!s.match(/-|_/))return;const d=this.languageUtils.getLanguagePartFromCode(s);l=this.getRule(d,a)}return this.pluralRulesCache[i]=l,l}return this.rules[s]||this.rules[this.languageUtils.getLanguagePartFromCode(s)]}needsPlural(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(s,a);return this.shouldUseIntlApi()?r&&r.resolvedOptions().pluralCategories.length>1:r&&r.numbers.length>1}getPluralFormsOfKey(s,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.getSuffixes(s,r).map(n=>`${a}${n}`)}getSuffixes(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const r=this.getRule(s,a);return r?this.shouldUseIntlApi()?r.resolvedOptions().pluralCategories.sort((n,i)=>_z[n]-_z[i]).map(n=>`${this.options.prepend}${a.ordinal?`ordinal${this.options.prepend}`:""}${n}`):r.numbers.map(n=>this.getSuffix(s,n,a)):[]}getSuffix(s,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const n=this.getRule(s,r);return n?this.shouldUseIntlApi()?`${this.options.prepend}${r.ordinal?`ordinal${this.options.prepend}`:""}${n.select(a)}`:this.getSuffixRetroCompatible(n,a):(this.logger.warn(`no plural rule found for: ${s}`),"")}getSuffixRetroCompatible(s,a){const r=s.noAbs?s.plurals(a):s.plurals(Math.abs(a));let n=s.numbers[r];this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1&&(n===2?n="plural":n===1&&(n=""));const i=()=>this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString();return this.options.compatibilityJSON==="v1"?n===1?"":typeof n=="number"?`_plural_${n.toString()}`:i():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&s.numbers.length===2&&s.numbers[0]===1?i():this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString()}shouldUseIntlApi(){return!nZe.includes(this.options.compatibilityJSON)}}const Cz=function(t,s,a){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:".",n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=YYe(t,s,a);return!i&&n&&qs(a)&&(i=sD(t,a,r),i===void 0&&(i=sD(s,a,r))),i},RA=t=>t.replace(/\$/g,"$$$$");class cZe{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fd.create("interpolator"),this.options=s,this.format=s.interpolation&&s.interpolation.format||(a=>a),this.init(s)}init(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};s.interpolation||(s.interpolation={escapeValue:!0});const{escape:a,escapeValue:r,useRawValueToEscape:n,prefix:i,prefixEscaped:l,suffix:o,suffixEscaped:d,formatSeparator:c,unescapeSuffix:u,unescapePrefix:h,nestingPrefix:x,nestingPrefixEscaped:g,nestingSuffix:j,nestingSuffixEscaped:y,nestingOptionsSeparator:b,maxReplaces:N,alwaysFormat:C}=s.interpolation;this.escape=a!==void 0?a:JYe,this.escapeValue=r!==void 0?r:!0,this.useRawValueToEscape=n!==void 0?n:!1,this.prefix=i?Nf(i):l||"{{",this.suffix=o?Nf(o):d||"}}",this.formatSeparator=c||",",this.unescapePrefix=u?"":h||"-",this.unescapeSuffix=this.unescapePrefix?"":u||"",this.nestingPrefix=x?Nf(x):g||Nf("$t("),this.nestingSuffix=j?Nf(j):y||Nf(")"),this.nestingOptionsSeparator=b||",",this.maxReplaces=N||1e3,this.alwaysFormat=C!==void 0?C:!1,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const s=(a,r)=>a&&a.source===r?(a.lastIndex=0,a):new RegExp(r,"g");this.regexp=s(this.regexp,`${this.prefix}(.+?)${this.suffix}`),this.regexpUnescape=s(this.regexpUnescape,`${this.prefix}${this.unescapePrefix}(.+?)${this.unescapeSuffix}${this.suffix}`),this.nestingRegexp=s(this.nestingRegexp,`${this.nestingPrefix}(.+?)${this.nestingSuffix}`)}interpolate(s,a,r,n){let i,l,o;const d=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},c=g=>{if(g.indexOf(this.formatSeparator)<0){const N=Cz(a,d,g,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(N,void 0,r,{...n,...a,interpolationkey:g}):N}const j=g.split(this.formatSeparator),y=j.shift().trim(),b=j.join(this.formatSeparator).trim();return this.format(Cz(a,d,y,this.options.keySeparator,this.options.ignoreJSONStructure),b,r,{...n,...a,interpolationkey:y})};this.resetRegExp();const u=n&&n.missingInterpolationHandler||this.options.missingInterpolationHandler,h=n&&n.interpolation&&n.interpolation.skipOnVariables!==void 0?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:g=>RA(g)},{regex:this.regexp,safeValue:g=>this.escapeValue?RA(this.escape(g)):RA(g)}].forEach(g=>{for(o=0;i=g.regex.exec(s);){const j=i[1].trim();if(l=c(j),l===void 0)if(typeof u=="function"){const b=u(s,i,n);l=qs(b)?b:""}else if(n&&Object.prototype.hasOwnProperty.call(n,j))l="";else if(h){l=i[0];continue}else this.logger.warn(`missed to pass in variable ${j} for interpolating ${s}`),l="";else!qs(l)&&!this.useRawValueToEscape&&(l=gz(l));const y=g.safeValue(l);if(s=s.replace(i[0],y),h?(g.regex.lastIndex+=l.length,g.regex.lastIndex-=i[0].length):g.regex.lastIndex=0,o++,o>=this.maxReplaces)break}}),s}nest(s,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n,i,l;const o=(d,c)=>{const u=this.nestingOptionsSeparator;if(d.indexOf(u)<0)return d;const h=d.split(new RegExp(`${u}[ ]*{`));let x=`{${h[1]}`;d=h[0],x=this.interpolate(x,l);const g=x.match(/'/g),j=x.match(/"/g);(g&&g.length%2===0&&!j||j.length%2!==0)&&(x=x.replace(/'/g,'"'));try{l=JSON.parse(x),c&&(l={...c,...l})}catch(y){return this.logger.warn(`failed parsing options string in nesting for key ${d}`,y),`${d}${u}${x}`}return l.defaultValue&&l.defaultValue.indexOf(this.prefix)>-1&&delete l.defaultValue,d};for(;n=this.nestingRegexp.exec(s);){let d=[];l={...r},l=l.replace&&!qs(l.replace)?l.replace:l,l.applyPostProcessor=!1,delete l.defaultValue;let c=!1;if(n[0].indexOf(this.formatSeparator)!==-1&&!/{.*}/.test(n[1])){const u=n[1].split(this.formatSeparator).map(h=>h.trim());n[1]=u.shift(),d=u,c=!0}if(i=a(o.call(this,n[1].trim(),l),l),i&&n[0]===s&&!qs(i))return i;qs(i)||(i=gz(i)),i||(this.logger.warn(`missed to resolve ${n[1]} for nesting ${s}`),i=""),c&&(i=d.reduce((u,h)=>this.format(u,h,r.lng,{...r,interpolationkey:n[1].trim()}),i.trim())),s=s.replace(n[0],i),this.regexp.lastIndex=0}return s}}const dZe=t=>{let s=t.toLowerCase().trim();const a={};if(t.indexOf("(")>-1){const r=t.split("(");s=r[0].toLowerCase().trim();const n=r[1].substring(0,r[1].length-1);s==="currency"&&n.indexOf(":")<0?a.currency||(a.currency=n.trim()):s==="relativetime"&&n.indexOf(":")<0?a.range||(a.range=n.trim()):n.split(";").forEach(l=>{if(l){const[o,...d]=l.split(":"),c=d.join(":").trim().replace(/^'+|'+$/g,""),u=o.trim();a[u]||(a[u]=c),c==="false"&&(a[u]=!1),c==="true"&&(a[u]=!0),isNaN(c)||(a[u]=parseInt(c,10))}})}return{formatName:s,formatOptions:a}},wf=t=>{const s={};return(a,r,n)=>{let i=n;n&&n.interpolationkey&&n.formatParams&&n.formatParams[n.interpolationkey]&&n[n.interpolationkey]&&(i={...i,[n.interpolationkey]:void 0});const l=r+JSON.stringify(i);let o=s[l];return o||(o=t(x1(r),n),s[l]=o),o(a)}};class uZe{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.logger=fd.create("formatter"),this.options=s,this.formats={number:wf((a,r)=>{const n=new Intl.NumberFormat(a,{...r});return i=>n.format(i)}),currency:wf((a,r)=>{const n=new Intl.NumberFormat(a,{...r,style:"currency"});return i=>n.format(i)}),datetime:wf((a,r)=>{const n=new Intl.DateTimeFormat(a,{...r});return i=>n.format(i)}),relativetime:wf((a,r)=>{const n=new Intl.RelativeTimeFormat(a,{...r});return i=>n.format(i,r.range||"day")}),list:wf((a,r)=>{const n=new Intl.ListFormat(a,{...r});return i=>n.format(i)})},this.init(s)}init(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{interpolation:{}};this.formatSeparator=a.interpolation.formatSeparator||","}add(s,a){this.formats[s.toLowerCase().trim()]=a}addCached(s,a){this.formats[s.toLowerCase().trim()]=wf(a)}format(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};const i=a.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(o=>o.indexOf(")")>-1)){const o=i.findIndex(d=>d.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,o)].join(this.formatSeparator)}return i.reduce((o,d)=>{const{formatName:c,formatOptions:u}=dZe(d);if(this.formats[c]){let h=o;try{const x=n&&n.formatParams&&n.formatParams[n.interpolationkey]||{},g=x.locale||x.lng||n.locale||n.lng||r;h=this.formats[c](o,g,{...u,...n,...x})}catch(x){this.logger.warn(x)}return h}else this.logger.warn(`there was no format function for ${c}`);return o},s)}}const mZe=(t,s)=>{t.pending[s]!==void 0&&(delete t.pending[s],t.pendingCount--)};class hZe extends zC{constructor(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{};super(),this.backend=s,this.store=a,this.services=r,this.languageUtils=r.languageUtils,this.options=n,this.logger=fd.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=n.maxParallelReads||10,this.readingCalls=0,this.maxRetries=n.maxRetries>=0?n.maxRetries:5,this.retryTimeout=n.retryTimeout>=1?n.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(r,n.backend,n)}queueLoad(s,a,r,n){const i={},l={},o={},d={};return s.forEach(c=>{let u=!0;a.forEach(h=>{const x=`${c}|${h}`;!r.reload&&this.store.hasResourceBundle(c,h)?this.state[x]=2:this.state[x]<0||(this.state[x]===1?l[x]===void 0&&(l[x]=!0):(this.state[x]=1,u=!1,l[x]===void 0&&(l[x]=!0),i[x]===void 0&&(i[x]=!0),d[h]===void 0&&(d[h]=!0)))}),u||(o[c]=!0)}),(Object.keys(i).length||Object.keys(l).length)&&this.queue.push({pending:l,pendingCount:Object.keys(l).length,loaded:{},errors:[],callback:n}),{toLoad:Object.keys(i),pending:Object.keys(l),toLoadLanguages:Object.keys(o),toLoadNamespaces:Object.keys(d)}}loaded(s,a,r){const n=s.split("|"),i=n[0],l=n[1];a&&this.emit("failedLoading",i,l,a),!a&&r&&this.store.addResourceBundle(i,l,r,void 0,void 0,{skipCopy:!0}),this.state[s]=a?-1:2,a&&r&&(this.state[s]=0);const o={};this.queue.forEach(d=>{KYe(d.loaded,[i],l),mZe(d,s),a&&d.errors.push(a),d.pendingCount===0&&!d.done&&(Object.keys(d.loaded).forEach(c=>{o[c]||(o[c]={});const u=d.loaded[c];u.length&&u.forEach(h=>{o[c][h]===void 0&&(o[c][h]=!0)})}),d.done=!0,d.errors.length?d.callback(d.errors):d.callback())}),this.emit("loaded",o),this.queue=this.queue.filter(d=>!d.done)}read(s,a,r){let n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:this.retryTimeout,l=arguments.length>5?arguments[5]:void 0;if(!s.length)return l(null,{});if(this.readingCalls>=this.maxParallelReads){this.waitingReads.push({lng:s,ns:a,fcName:r,tried:n,wait:i,callback:l});return}this.readingCalls++;const o=(c,u)=>{if(this.readingCalls--,this.waitingReads.length>0){const h=this.waitingReads.shift();this.read(h.lng,h.ns,h.fcName,h.tried,h.wait,h.callback)}if(c&&u&&n<this.maxRetries){setTimeout(()=>{this.read.call(this,s,a,r,n+1,i*2,l)},i);return}l(c,u)},d=this.backend[r].bind(this.backend);if(d.length===2){try{const c=d(s,a);c&&typeof c.then=="function"?c.then(u=>o(null,u)).catch(o):o(null,c)}catch(c){o(c)}return}return d(s,a,o)}prepareLoading(s,a){let r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},n=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),n&&n();qs(s)&&(s=this.languageUtils.toResolveHierarchy(s)),qs(a)&&(a=[a]);const i=this.queueLoad(s,a,r,n);if(!i.toLoad.length)return i.pending.length||n(),null;i.toLoad.forEach(l=>{this.loadOne(l)})}load(s,a,r){this.prepareLoading(s,a,{},r)}reload(s,a,r){this.prepareLoading(s,a,{reload:!0},r)}loadOne(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";const r=s.split("|"),n=r[0],i=r[1];this.read(n,i,"read",void 0,void 0,(l,o)=>{l&&this.logger.warn(`${a}loading namespace ${i} for language ${n} failed`,l),!l&&o&&this.logger.log(`${a}loaded namespace ${i} for language ${n}`,o),this.loaded(s,l,o)})}saveMissing(s,a,r,n,i){let l=arguments.length>5&&arguments[5]!==void 0?arguments[5]:{},o=arguments.length>6&&arguments[6]!==void 0?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(a)){this.logger.warn(`did not save key "${r}" as the namespace "${a}" was not yet loaded`,"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}if(!(r==null||r==="")){if(this.backend&&this.backend.create){const d={...l,isUpdate:i},c=this.backend.create.bind(this.backend);if(c.length<6)try{let u;c.length===5?u=c(s,a,r,n,d):u=c(s,a,r,n),u&&typeof u.then=="function"?u.then(h=>o(null,h)).catch(o):o(null,u)}catch(u){o(u)}else c(s,a,r,n,o,d)}!s||!s[0]||this.store.addResource(s[0],a,r,n)}}}const Sz=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:t=>{let s={};if(typeof t[1]=="object"&&(s=t[1]),qs(t[1])&&(s.defaultValue=t[1]),qs(t[2])&&(s.tDescription=t[2]),typeof t[2]=="object"||typeof t[3]=="object"){const a=t[3]||t[2];Object.keys(a).forEach(r=>{s[r]=a[r]})}return s},interpolation:{escapeValue:!0,format:t=>t,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),kz=t=>(qs(t.ns)&&(t.ns=[t.ns]),qs(t.fallbackLng)&&(t.fallbackLng=[t.fallbackLng]),qs(t.fallbackNS)&&(t.fallbackNS=[t.fallbackNS]),t.supportedLngs&&t.supportedLngs.indexOf("cimode")<0&&(t.supportedLngs=t.supportedLngs.concat(["cimode"])),t),aw=()=>{},xZe=t=>{Object.getOwnPropertyNames(Object.getPrototypeOf(t)).forEach(a=>{typeof t[a]=="function"&&(t[a]=t[a].bind(t))})};class Dj extends zC{constructor(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;if(super(),this.options=kz(s),this.services={},this.logger=fd,this.modules={external:[]},xZe(this),a&&!this.isInitialized&&!s.isClone){if(!this.options.initImmediate)return this.init(s,a),this;setTimeout(()=>{this.init(s,a)},0)}}init(){var s=this;let a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,typeof a=="function"&&(r=a,a={}),!a.defaultNS&&a.defaultNS!==!1&&a.ns&&(qs(a.ns)?a.defaultNS=a.ns:a.ns.indexOf("translation")<0&&(a.defaultNS=a.ns[0]));const n=Sz();this.options={...n,...this.options,...kz(a)},this.options.compatibilityAPI!=="v1"&&(this.options.interpolation={...n.interpolation,...this.options.interpolation}),a.keySeparator!==void 0&&(this.options.userDefinedKeySeparator=a.keySeparator),a.nsSeparator!==void 0&&(this.options.userDefinedNsSeparator=a.nsSeparator);const i=u=>u?typeof u=="function"?new u:u:null;if(!this.options.isClone){this.modules.logger?fd.init(i(this.modules.logger),this.options):fd.init(null,this.options);let u;this.modules.formatter?u=this.modules.formatter:typeof Intl<"u"&&(u=uZe);const h=new wz(this.options);this.store=new yz(this.options.resources,this.options);const x=this.services;x.logger=fd,x.resourceStore=this.store,x.languageUtils=h,x.pluralResolver=new oZe(h,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),u&&(!this.options.interpolation.format||this.options.interpolation.format===n.interpolation.format)&&(x.formatter=i(u),x.formatter.init(x,this.options),this.options.interpolation.format=x.formatter.format.bind(x.formatter)),x.interpolator=new cZe(this.options),x.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},x.backendConnector=new hZe(i(this.modules.backend),x.resourceStore,x,this.options),x.backendConnector.on("*",function(g){for(var j=arguments.length,y=new Array(j>1?j-1:0),b=1;b<j;b++)y[b-1]=arguments[b];s.emit(g,...y)}),this.modules.languageDetector&&(x.languageDetector=i(this.modules.languageDetector),x.languageDetector.init&&x.languageDetector.init(x,this.options.detection,this.options)),this.modules.i18nFormat&&(x.i18nFormat=i(this.modules.i18nFormat),x.i18nFormat.init&&x.i18nFormat.init(this)),this.translator=new f1(this.services,this.options),this.translator.on("*",function(g){for(var j=arguments.length,y=new Array(j>1?j-1:0),b=1;b<j;b++)y[b-1]=arguments[b];s.emit(g,...y)}),this.modules.external.forEach(g=>{g.init&&g.init(this)})}if(this.format=this.options.interpolation.format,r||(r=aw),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const u=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);u.length>0&&u[0]!=="dev"&&(this.options.lng=u[0])}!this.services.languageDetector&&!this.options.lng&&this.logger.warn("init: no languageDetector is used and no lng is defined"),["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(u=>{this[u]=function(){return s.store[u](...arguments)}}),["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(u=>{this[u]=function(){return s.store[u](...arguments),s}});const d=_0(),c=()=>{const u=(h,x)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),d.resolve(x),r(h,x)};if(this.languages&&this.options.compatibilityAPI!=="v1"&&!this.isInitialized)return u(null,this.t.bind(this));this.changeLanguage(this.options.lng,u)};return this.options.resources||!this.options.initImmediate?c():setTimeout(c,0),d}loadResources(s){let r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aw;const n=qs(s)?s:this.language;if(typeof s=="function"&&(r=s),!this.options.resources||this.options.partialBundledLanguages){if(n&&n.toLowerCase()==="cimode"&&(!this.options.preload||this.options.preload.length===0))return r();const i=[],l=o=>{if(!o||o==="cimode")return;this.services.languageUtils.toResolveHierarchy(o).forEach(c=>{c!=="cimode"&&i.indexOf(c)<0&&i.push(c)})};n?l(n):this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(d=>l(d)),this.options.preload&&this.options.preload.forEach(o=>l(o)),this.services.backendConnector.load(i,this.options.ns,o=>{!o&&!this.resolvedLanguage&&this.language&&this.setResolvedLanguage(this.language),r(o)})}else r(null)}reloadResources(s,a,r){const n=_0();return typeof s=="function"&&(r=s,s=void 0),typeof a=="function"&&(r=a,a=void 0),s||(s=this.languages),a||(a=this.options.ns),r||(r=aw),this.services.backendConnector.reload(s,a,i=>{n.resolve(),r(i)}),n}use(s){if(!s)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!s.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return s.type==="backend"&&(this.modules.backend=s),(s.type==="logger"||s.log&&s.warn&&s.error)&&(this.modules.logger=s),s.type==="languageDetector"&&(this.modules.languageDetector=s),s.type==="i18nFormat"&&(this.modules.i18nFormat=s),s.type==="postProcessor"&&Rae.addPostProcessor(s),s.type==="formatter"&&(this.modules.formatter=s),s.type==="3rdParty"&&this.modules.external.push(s),this}setResolvedLanguage(s){if(!(!s||!this.languages)&&!(["cimode","dev"].indexOf(s)>-1))for(let a=0;a<this.languages.length;a++){const r=this.languages[a];if(!(["cimode","dev"].indexOf(r)>-1)&&this.store.hasLanguageSomeTranslations(r)){this.resolvedLanguage=r;break}}}changeLanguage(s,a){var r=this;this.isLanguageChangingTo=s;const n=_0();this.emit("languageChanging",s);const i=d=>{this.language=d,this.languages=this.services.languageUtils.toResolveHierarchy(d),this.resolvedLanguage=void 0,this.setResolvedLanguage(d)},l=(d,c)=>{c?(i(c),this.translator.changeLanguage(c),this.isLanguageChangingTo=void 0,this.emit("languageChanged",c),this.logger.log("languageChanged",c)):this.isLanguageChangingTo=void 0,n.resolve(function(){return r.t(...arguments)}),a&&a(d,function(){return r.t(...arguments)})},o=d=>{!s&&!d&&this.services.languageDetector&&(d=[]);const c=qs(d)?d:this.services.languageUtils.getBestMatchFromCodes(d);c&&(this.language||i(c),this.translator.language||this.translator.changeLanguage(c),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(c)),this.loadResources(c,u=>{l(u,c)})};return!s&&this.services.languageDetector&&!this.services.languageDetector.async?o(this.services.languageDetector.detect()):!s&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect.length===0?this.services.languageDetector.detect().then(o):this.services.languageDetector.detect(o):o(s),n}getFixedT(s,a,r){var n=this;const i=function(l,o){let d;if(typeof o!="object"){for(var c=arguments.length,u=new Array(c>2?c-2:0),h=2;h<c;h++)u[h-2]=arguments[h];d=n.options.overloadTranslationOptionHandler([l,o].concat(u))}else d={...o};d.lng=d.lng||i.lng,d.lngs=d.lngs||i.lngs,d.ns=d.ns||i.ns,d.keyPrefix!==""&&(d.keyPrefix=d.keyPrefix||r||i.keyPrefix);const x=n.options.keySeparator||".";let g;return d.keyPrefix&&Array.isArray(l)?g=l.map(j=>`${d.keyPrefix}${x}${j}`):g=d.keyPrefix?`${d.keyPrefix}${x}${l}`:l,n.t(g,d)};return qs(s)?i.lng=s:i.lngs=s,i.ns=a,i.keyPrefix=r,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(s){this.options.defaultNS=s}hasLoadedNamespace(s){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const r=a.lng||this.resolvedLanguage||this.languages[0],n=this.options?this.options.fallbackLng:!1,i=this.languages[this.languages.length-1];if(r.toLowerCase()==="cimode")return!0;const l=(o,d)=>{const c=this.services.backendConnector.state[`${o}|${d}`];return c===-1||c===0||c===2};if(a.precheck){const o=a.precheck(this,l);if(o!==void 0)return o}return!!(this.hasResourceBundle(r,s)||!this.services.backendConnector.backend||this.options.resources&&!this.options.partialBundledLanguages||l(r,s)&&(!n||l(i,s)))}loadNamespaces(s,a){const r=_0();return this.options.ns?(qs(s)&&(s=[s]),s.forEach(n=>{this.options.ns.indexOf(n)<0&&this.options.ns.push(n)}),this.loadResources(n=>{r.resolve(),a&&a(n)}),r):(a&&a(),Promise.resolve())}loadLanguages(s,a){const r=_0();qs(s)&&(s=[s]);const n=this.options.preload||[],i=s.filter(l=>n.indexOf(l)<0&&this.services.languageUtils.isSupportedCode(l));return i.length?(this.options.preload=n.concat(i),this.loadResources(l=>{r.resolve(),a&&a(l)}),r):(a&&a(),Promise.resolve())}dir(s){if(s||(s=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!s)return"rtl";const a=["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"],r=this.services&&this.services.languageUtils||new wz(Sz());return a.indexOf(r.getLanguagePartFromCode(s))>-1||s.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1?arguments[1]:void 0;return new Dj(s,a)}cloneInstance(){let s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aw;const r=s.forkResourceStore;r&&delete s.forkResourceStore;const n={...this.options,...s,isClone:!0},i=new Dj(n);return(s.debug!==void 0||s.prefix!==void 0)&&(i.logger=i.logger.clone(s)),["store","services","language"].forEach(o=>{i[o]=this[o]}),i.services={...this.services},i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},r&&(i.store=new yz(this.store.data,n),i.services.resourceStore=i.store),i.translator=new f1(i.services,n),i.translator.on("*",function(o){for(var d=arguments.length,c=new Array(d>1?d-1:0),u=1;u<d;u++)c[u-1]=arguments[u];i.emit(o,...c)}),i.init(n,a),i.translator.options=n,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const Gi=Dj.createInstance();Gi.createInstance=Dj.createInstance;Gi.createInstance;Gi.dir;Gi.init;Gi.loadResources;Gi.reloadResources;Gi.use;Gi.changeLanguage;Gi.getFixedT;Gi.t;Gi.exists;Gi.setDefaultNamespace;Gi.hasLoadedNamespace;Gi.loadNamespaces;Gi.loadLanguages;function pZe(t,s){if(!(t instanceof s))throw new TypeError("Cannot call a class as a function")}function Tj(t){"@babel/helpers - typeof";return Tj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},Tj(t)}function fZe(t,s){if(Tj(t)!="object"||!t)return t;var a=t[Symbol.toPrimitive];if(a!==void 0){var r=a.call(t,s);if(Tj(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function gZe(t){var s=fZe(t,"string");return Tj(s)=="symbol"?s:s+""}function vZe(t,s){for(var a=0;a<s.length;a++){var r=s[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gZe(r.key),r)}}function jZe(t,s,a){return s&&vZe(t.prototype,s),Object.defineProperty(t,"prototype",{writable:!1}),t}var Oae=[],bZe=Oae.forEach,yZe=Oae.slice;function NZe(t){return bZe.call(yZe.call(arguments,1),function(s){if(s)for(var a in s)t[a]===void 0&&(t[a]=s[a])}),t}var Ez=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,wZe=function(s,a,r){var n=r||{};n.path=n.path||"/";var i=encodeURIComponent(a),l="".concat(s,"=").concat(i);if(n.maxAge>0){var o=n.maxAge-0;if(Number.isNaN(o))throw new Error("maxAge should be a Number");l+="; Max-Age=".concat(Math.floor(o))}if(n.domain){if(!Ez.test(n.domain))throw new TypeError("option domain is invalid");l+="; Domain=".concat(n.domain)}if(n.path){if(!Ez.test(n.path))throw new TypeError("option path is invalid");l+="; Path=".concat(n.path)}if(n.expires){if(typeof n.expires.toUTCString!="function")throw new TypeError("option expires is invalid");l+="; Expires=".concat(n.expires.toUTCString())}if(n.httpOnly&&(l+="; HttpOnly"),n.secure&&(l+="; Secure"),n.sameSite){var d=typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite;switch(d){case!0:l+="; SameSite=Strict";break;case"lax":l+="; SameSite=Lax";break;case"strict":l+="; SameSite=Strict";break;case"none":l+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return l},Az={create:function(s,a,r,n){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:{path:"/",sameSite:"strict"};r&&(i.expires=new Date,i.expires.setTime(i.expires.getTime()+r*60*1e3)),n&&(i.domain=n),document.cookie=wZe(s,encodeURIComponent(a),i)},read:function(s){for(var a="".concat(s,"="),r=document.cookie.split(";"),n=0;n<r.length;n++){for(var i=r[n];i.charAt(0)===" ";)i=i.substring(1,i.length);if(i.indexOf(a)===0)return i.substring(a.length,i.length)}return null},remove:function(s){this.create(s,"",-1)}},_Ze={name:"cookie",lookup:function(s){var a;if(s.lookupCookie&&typeof document<"u"){var r=Az.read(s.lookupCookie);r&&(a=r)}return a},cacheUserLanguage:function(s,a){a.lookupCookie&&typeof document<"u"&&Az.create(a.lookupCookie,s,a.cookieMinutes,a.cookieDomain,a.cookieOptions)}},CZe={name:"querystring",lookup:function(s){var a;if(typeof window<"u"){var r=window.location.search;!window.location.search&&window.location.hash&&window.location.hash.indexOf("?")>-1&&(r=window.location.hash.substring(window.location.hash.indexOf("?")));for(var n=r.substring(1),i=n.split("&"),l=0;l<i.length;l++){var o=i[l].indexOf("=");if(o>0){var d=i[l].substring(0,o);d===s.lookupQuerystring&&(a=i[l].substring(o+1))}}}return a}},C0=null,Pz=function(){if(C0!==null)return C0;try{C0=window!=="undefined"&&window.localStorage!==null;var s="i18next.translate.boo";window.localStorage.setItem(s,"foo"),window.localStorage.removeItem(s)}catch{C0=!1}return C0},SZe={name:"localStorage",lookup:function(s){var a;if(s.lookupLocalStorage&&Pz()){var r=window.localStorage.getItem(s.lookupLocalStorage);r&&(a=r)}return a},cacheUserLanguage:function(s,a){a.lookupLocalStorage&&Pz()&&window.localStorage.setItem(a.lookupLocalStorage,s)}},S0=null,Dz=function(){if(S0!==null)return S0;try{S0=window!=="undefined"&&window.sessionStorage!==null;var s="i18next.translate.boo";window.sessionStorage.setItem(s,"foo"),window.sessionStorage.removeItem(s)}catch{S0=!1}return S0},kZe={name:"sessionStorage",lookup:function(s){var a;if(s.lookupSessionStorage&&Dz()){var r=window.sessionStorage.getItem(s.lookupSessionStorage);r&&(a=r)}return a},cacheUserLanguage:function(s,a){a.lookupSessionStorage&&Dz()&&window.sessionStorage.setItem(a.lookupSessionStorage,s)}},EZe={name:"navigator",lookup:function(s){var a=[];if(typeof navigator<"u"){if(navigator.languages)for(var r=0;r<navigator.languages.length;r++)a.push(navigator.languages[r]);navigator.userLanguage&&a.push(navigator.userLanguage),navigator.language&&a.push(navigator.language)}return a.length>0?a:void 0}},AZe={name:"htmlTag",lookup:function(s){var a,r=s.htmlTag||(typeof document<"u"?document.documentElement:null);return r&&typeof r.getAttribute=="function"&&(a=r.getAttribute("lang")),a}},PZe={name:"path",lookup:function(s){var a;if(typeof window<"u"){var r=window.location.pathname.match(/\/([a-zA-Z-]*)/g);if(r instanceof Array)if(typeof s.lookupFromPathIndex=="number"){if(typeof r[s.lookupFromPathIndex]!="string")return;a=r[s.lookupFromPathIndex].replace("/","")}else a=r[0].replace("/","")}return a}},DZe={name:"subdomain",lookup:function(s){var a=typeof s.lookupFromSubdomainIndex=="number"?s.lookupFromSubdomainIndex+1:1,r=typeof window<"u"&&window.location&&window.location.hostname&&window.location.hostname.match(/^(\w{2,5})\.(([a-z0-9-]{1,63}\.[a-z]{2,6})|localhost)/i);if(r)return r[a]}},Iae=!1;try{document.cookie,Iae=!0}catch{}var Lae=["querystring","cookie","localStorage","sessionStorage","navigator","htmlTag"];Iae||Lae.splice(1,1);function TZe(){return{order:Lae,lookupQuerystring:"lng",lookupCookie:"i18next",lookupLocalStorage:"i18nextLng",lookupSessionStorage:"i18nextLng",caches:["localStorage"],excludeCacheFor:["cimode"],convertDetectedLanguage:function(s){return s}}}var Mae=(function(){function t(s){var a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};pZe(this,t),this.type="languageDetector",this.detectors={},this.init(s,a)}return jZe(t,[{key:"init",value:function(a){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};this.services=a||{languageUtils:{}},this.options=NZe(r,this.options||{},TZe()),typeof this.options.convertDetectedLanguage=="string"&&this.options.convertDetectedLanguage.indexOf("15897")>-1&&(this.options.convertDetectedLanguage=function(i){return i.replace("-","_")}),this.options.lookupFromUrlIndex&&(this.options.lookupFromPathIndex=this.options.lookupFromUrlIndex),this.i18nOptions=n,this.addDetector(_Ze),this.addDetector(CZe),this.addDetector(SZe),this.addDetector(kZe),this.addDetector(EZe),this.addDetector(AZe),this.addDetector(PZe),this.addDetector(DZe)}},{key:"addDetector",value:function(a){return this.detectors[a.name]=a,this}},{key:"detect",value:function(a){var r=this;a||(a=this.options.order);var n=[];return a.forEach(function(i){if(r.detectors[i]){var l=r.detectors[i].lookup(r.options);l&&typeof l=="string"&&(l=[l]),l&&(n=n.concat(l))}}),n=n.map(function(i){return r.options.convertDetectedLanguage(i)}),this.services.languageUtils.getBestMatchFromCodes?n:n.length>0?n[0]:null}},{key:"cacheUserLanguage",value:function(a,r){var n=this;r||(r=this.options.caches),r&&(this.options.excludeCacheFor&&this.options.excludeCacheFor.indexOf(a)>-1||r.forEach(function(i){n.detectors[i]&&n.detectors[i].cacheUserLanguage(a,n.options)}))}}])})();Mae.type="languageDetector";function aD(t){"@babel/helpers - typeof";return aD=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(s){return typeof s}:function(s){return s&&typeof Symbol=="function"&&s.constructor===Symbol&&s!==Symbol.prototype?"symbol":typeof s},aD(t)}function Bae(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest>"u"?"undefined":aD(XMLHttpRequest))==="object"}function FZe(t){return!!t&&typeof t.then=="function"}function RZe(t){return FZe(t)?t:Promise.resolve(t)}function OZe(t){throw new Error('Could not dynamically require "'+t+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rw={exports:{}},nw={exports:{}},Tz;function IZe(){return Tz||(Tz=1,(function(t,s){var a=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof z0<"u"&&z0,r=(function(){function i(){this.fetch=!1,this.DOMException=a.DOMException}return i.prototype=a,new i})();(function(i){(function(l){var o=typeof i<"u"&&i||typeof self<"u"&&self||typeof o<"u"&&o,d={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function c(z){return z&&DataView.prototype.isPrototypeOf(z)}if(d.arrayBuffer)var u=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],h=ArrayBuffer.isView||function(z){return z&&u.indexOf(Object.prototype.toString.call(z))>-1};function x(z){if(typeof z!="string"&&(z=String(z)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(z)||z==="")throw new TypeError('Invalid character in header field name: "'+z+'"');return z.toLowerCase()}function g(z){return typeof z!="string"&&(z=String(z)),z}function j(z){var H={next:function(){var le=z.shift();return{done:le===void 0,value:le}}};return d.iterable&&(H[Symbol.iterator]=function(){return H}),H}function y(z){this.map={},z instanceof y?z.forEach(function(H,le){this.append(le,H)},this):Array.isArray(z)?z.forEach(function(H){this.append(H[0],H[1])},this):z&&Object.getOwnPropertyNames(z).forEach(function(H){this.append(H,z[H])},this)}y.prototype.append=function(z,H){z=x(z),H=g(H);var le=this.map[z];this.map[z]=le?le+", "+H:H},y.prototype.delete=function(z){delete this.map[x(z)]},y.prototype.get=function(z){return z=x(z),this.has(z)?this.map[z]:null},y.prototype.has=function(z){return this.map.hasOwnProperty(x(z))},y.prototype.set=function(z,H){this.map[x(z)]=g(H)},y.prototype.forEach=function(z,H){for(var le in this.map)this.map.hasOwnProperty(le)&&z.call(H,this.map[le],le,this)},y.prototype.keys=function(){var z=[];return this.forEach(function(H,le){z.push(le)}),j(z)},y.prototype.values=function(){var z=[];return this.forEach(function(H){z.push(H)}),j(z)},y.prototype.entries=function(){var z=[];return this.forEach(function(H,le){z.push([le,H])}),j(z)},d.iterable&&(y.prototype[Symbol.iterator]=y.prototype.entries);function b(z){if(z.bodyUsed)return Promise.reject(new TypeError("Already read"));z.bodyUsed=!0}function N(z){return new Promise(function(H,le){z.onload=function(){H(z.result)},z.onerror=function(){le(z.error)}})}function C(z){var H=new FileReader,le=N(H);return H.readAsArrayBuffer(z),le}function _(z){var H=new FileReader,le=N(H);return H.readAsText(z),le}function A(z){for(var H=new Uint8Array(z),le=new Array(H.length),Y=0;Y<H.length;Y++)le[Y]=String.fromCharCode(H[Y]);return le.join("")}function k(z){if(z.slice)return z.slice(0);var H=new Uint8Array(z.byteLength);return H.set(new Uint8Array(z)),H.buffer}function E(){return this.bodyUsed=!1,this._initBody=function(z){this.bodyUsed=this.bodyUsed,this._bodyInit=z,z?typeof z=="string"?this._bodyText=z:d.blob&&Blob.prototype.isPrototypeOf(z)?this._bodyBlob=z:d.formData&&FormData.prototype.isPrototypeOf(z)?this._bodyFormData=z:d.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)?this._bodyText=z.toString():d.arrayBuffer&&d.blob&&c(z)?(this._bodyArrayBuffer=k(z.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):d.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(z)||h(z))?this._bodyArrayBuffer=k(z):this._bodyText=z=Object.prototype.toString.call(z):this._bodyText="",this.headers.get("content-type")||(typeof z=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):d.searchParams&&URLSearchParams.prototype.isPrototypeOf(z)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},d.blob&&(this.blob=function(){var z=b(this);if(z)return z;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){if(this._bodyArrayBuffer){var z=b(this);return z||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else return this.blob().then(C)}),this.text=function(){var z=b(this);if(z)return z;if(this._bodyBlob)return _(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(A(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},d.formData&&(this.formData=function(){return this.text().then(P)}),this.json=function(){return this.text().then(JSON.parse)},this}var D=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function R(z){var H=z.toUpperCase();return D.indexOf(H)>-1?H:z}function O(z,H){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');H=H||{};var le=H.body;if(z instanceof O){if(z.bodyUsed)throw new TypeError("Already read");this.url=z.url,this.credentials=z.credentials,H.headers||(this.headers=new y(z.headers)),this.method=z.method,this.mode=z.mode,this.signal=z.signal,!le&&z._bodyInit!=null&&(le=z._bodyInit,z.bodyUsed=!0)}else this.url=String(z);if(this.credentials=H.credentials||this.credentials||"same-origin",(H.headers||!this.headers)&&(this.headers=new y(H.headers)),this.method=R(H.method||this.method||"GET"),this.mode=H.mode||this.mode||null,this.signal=H.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&le)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(le),(this.method==="GET"||this.method==="HEAD")&&(H.cache==="no-store"||H.cache==="no-cache")){var Y=/([?&])_=[^&]*/;if(Y.test(this.url))this.url=this.url.replace(Y,"$1_="+new Date().getTime());else{var te=/\?/;this.url+=(te.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function P(z){var H=new FormData;return z.trim().split("&").forEach(function(le){if(le){var Y=le.split("="),te=Y.shift().replace(/\+/g," "),ne=Y.join("=").replace(/\+/g," ");H.append(decodeURIComponent(te),decodeURIComponent(ne))}}),H}function T(z){var H=new y,le=z.replace(/\r?\n[\t ]+/g," ");return le.split("\r").map(function(Y){return Y.indexOf(`
apps\web\src\api\auth.ts:46:  const response = await api.get<UserResponse>('/auth/me')
apps\web\src\api\bank-bulk-jobs.ts:67:  usage_count: number;
apps\web\src\api\bank.ts:712:export interface PolicyUsageStats {
apps\web\src\api\bank.ts:737:  policy_usage_rate: number;
apps\web\src\api\bank.ts:1193:export interface AIUsageQuota {
apps\web\src\api\bank.ts:1233:  usage_remaining?: number;
apps\web\src\api\bank.ts:1239:   * Get AI usage quota for a feature
apps\web\src\api\bank.ts:1241:  getQuota: async (feature: string): Promise<AIUsageQuota> => {
apps\web\src\api\bank.ts:1243:      const response = await api.get<AIUsageQuota>('/bank/ai/quota', {
apps\web\src\api\bank.ts:1491:  usage_count: number;
apps\web\src\api\billing.ts:9:  UsageStats,
apps\web\src\api\billing.ts:10:  UsageRecordList,
apps\web\src\api\billing.ts:11:  UsageRecordsFilters,
apps\web\src\api\billing.ts:20:  AdminUsageReport,
apps\web\src\api\billing.ts:44:const getMockUsageStats = (): UsageStats => ({
apps\web\src\api\billing.ts:49:  total_usage: 0,
apps\web\src\api\billing.ts:70:const getMockUsageRecords = (filters: UsageRecordsFilters = {}): UsageRecordList => {
apps\web\src\api\billing.ts:117:      usage_current_period: 450,
apps\web\src\api\billing.ts:118:      usage_cost_current_period: 22500,
apps\web\src\api\billing.ts:154:  // Get usage statistics
apps\web\src\api\billing.ts:155:  getUsageStats: async (): Promise<UsageStats> => {
apps\web\src\api\billing.ts:156:    const response = await api.get('/billing/usage');
apps\web\src\api\billing.ts:160:  // Get usage records with filtering
apps\web\src\api\billing.ts:161:  getUsageRecords: async (filters: UsageRecordsFilters = {}): Promise<UsageRecordList> => {
apps\web\src\api\billing.ts:162:    const response = await api.get('/billing/usage/records', { params: filters });
apps\web\src\api\billing.ts:275:  // Export usage data
apps\web\src\api\billing.ts:276:  exportUsageData: async (filters: UsageRecordsFilters = {}): Promise<Blob> => {
apps\web\src\api\billing.ts:277:    const response = await api.get('/billing/usage/export', {
apps\web\src\api\billing.ts:317:    const [companiesData, usageReport] = await Promise.all([
apps\web\src\api\billing.ts:319:      api.get('/billing/admin/usage-report', {
apps\web\src\api\billing.ts:328:    const report = usageReport.data;
apps\web\src\api\billing.ts:353:  // Get usage report
apps\web\src\api\billing.ts:354:  getUsageReport: async (startDate: string, endDate: string): Promise<AdminUsageReport> => {
apps\web\src\api\billing.ts:355:    const response = await api.get('/billing/admin/usage-report', {
apps\web\src\api\billing.ts:388:    // This would aggregate usage report data by date
apps\web\src\api\billing.ts:389:    const report = await api.get('/billing/admin/usage-report', {
apps\web\src\api\client.ts:32:      return 'https://trdrhub-api.onrender.com'
apps\web\src\api\client.ts:37:      return 'https://trdrhub-api.onrender.com'
apps\web\src\api\client.ts:42:  return 'https://trdrhub-api.onrender.com'
apps\web\src\api\client.ts:184:        '/auth/me',
apps\web\src\api\client.ts:185:        '/onboarding/status',
apps\web\src\api\onboarding.ts:40:  const response = await api.get<OnboardingStatus>('/onboarding/status')
apps\web\src\api\sme-templates.ts:17:  usage_count: number;
apps\web\src\App.tsx:150:import { HubLayout, HubHome, HubBilling, HubTeam, HubSettings, HubUsage } from './pages/hub'
apps\web\src\App.tsx:343:          <Route path="usage" element={<HubUsage />} />
apps\web\src\components\bank\AIAssistance.tsx:9:import { bankAiApi, type AIUsageQuota, type AIResponse } from "@/api/bank";
apps\web\src\components\bank\AIAssistance.tsx:84:  const [quotaData, setQuotaData] = React.useState<Record<string, AIUsageQuota>>({});
apps\web\src\components\bank\AIAssistance.tsx:142:      if (data.usage_remaining !== undefined) {
apps\web\src\components\bank\AIAssistance.tsx:164:      if (data.usage_remaining !== undefined) {
apps\web\src\components\bank\AIAssistance.tsx:185:      if (data.usage_remaining !== undefined) {
apps\web\src\components\bank\AIAssistance.tsx:206:      if (data.usage_remaining !== undefined) {
apps\web\src\components\bank\AIAssistance.tsx:353:                  AI Usage: {quota.used} / {quota.limit} ({quota.remaining} remaining)
apps\web\src\components\bank\BankQuickStats.tsx:6:import { useUsageStats, useInvoices } from "@/hooks/useBilling";
apps\web\src\components\bank\BankQuickStats.tsx:29:  const { data: usageStats } = useUsageStats();
apps\web\src\components\bank\BankQuickStats.tsx:36:  const quotaPercentage = usageStats && usageStats.quota_limit
apps\web\src\components\bank\BankQuickStats.tsx:37:    ? Math.min(100, (usageStats.quota_used / usageStats.quota_limit) * 100)
apps\web\src\components\bank\BankQuickStats.tsx:86:      {(usageStats || hasPendingInvoices) && (
apps\web\src\components\bank\BankQuickStats.tsx:88:          {usageStats && (
apps\web\src\components\bank\BankQuickStats.tsx:93:                    <p className="text-sm font-medium text-muted-foreground mb-2">Usage Quota</p>
apps\web\src\components\bank\BankQuickStats.tsx:96:                        {usageStats.quota_used.toLocaleString()} / {usageStats.quota_limit?.toLocaleString() ?? "âˆž"}
apps\web\src\components\bank\integrations\APITokensTab.tsx:367:            {token.usage_count > 0 && (
apps\web\src\components\bank\integrations\APITokensTab.tsx:370:                <span>{token.usage_count} uses</span>
apps\web\src\components\billing\admin\CompanyTable.tsx:295:                <TableHead>Usage</TableHead>
apps\web\src\components\billing\admin\CompanyTable.tsx:360:                      {company.total_usage} validations
apps\web\src\components\billing\admin\DelinquentPanel.tsx:398:                      <span>{company.total_usage} validations</span>
apps\web\src\components\billing\admin\RevenueChart.tsx:44:import { useAdminRevenueTrends, useAdminUsageReport } from '@/hooks/useBilling';
apps\web\src\components\billing\admin\RevenueChart.tsx:46:import type { AdminUsageReport } from '@/types/billing';
apps\web\src\components\billing\admin\RevenueChart.tsx:78:  const { data: usageReport, isLoading: reportLoading } = useAdminUsageReport(startDate, endDate);
apps\web\src\components\billing\admin\RevenueChart.tsx:195:              {formatCurrency(averageRevenue / (usageReport?.total_companies || 150))}
apps\web\src\components\billing\AlertBanner.tsx:41:import type { UsageStats, PlanType, InvoiceStatus } from '@/types/billing';
apps\web\src\components\billing\AlertBanner.tsx:44:  usage: UsageStats;
apps\web\src\components\billing\AlertBanner.tsx:69:  usage,
apps\web\src\components\billing\AlertBanner.tsx:81:  if (usage.quota_limit && usage.quota_used >= usage.quota_limit) {
apps\web\src\components\billing\AlertBanner.tsx:86:      description: `You've used all ${usage.quota_limit} validations in your ${getPlanDisplayName(plan)} plan. Upgrade to continue validation services.`,
apps\web\src\components\billing\AlertBanner.tsx:97:  else if (usage.quota_limit && getQuotaThreshold(usage.quota_used, usage.quota_limit) === 'critical') {
apps\web\src\components\billing\AlertBanner.tsx:98:    const remaining = usage.quota_remaining || 0;
apps\web\src\components\billing\AlertBanner.tsx:114:  else if (usage.quota_limit && getQuotaThreshold(usage.quota_used, usage.quota_limit) === 'warning') {
apps\web\src\components\billing\AlertBanner.tsx:115:    const remaining = usage.quota_remaining || 0;
apps\web\src\components\billing\AlertBanner.tsx:119:      title: 'Quota Usage High',
apps\web\src\components\billing\AlertBanner.tsx:120:      description: `${remaining} validations remaining in your ${getPlanDisplayName(plan)} plan. You're at ${Math.round((usage.quota_used / usage.quota_limit) * 100)}% of your monthly limit.`,
apps\web\src\components\billing\AlertBanner.tsx:178:  // Usage forecast alert (if trending to exceed quota)
apps\web\src\components\billing\AlertBanner.tsx:179:  if (usage.quota_limit && usage.quota_used < usage.quota_limit) {
apps\web\src\components\billing\AlertBanner.tsx:180:    const usageRate = usage.quota_used / new Date().getDate(); // Daily average
apps\web\src\components\billing\AlertBanner.tsx:182:    const projectedUsage = usageRate * daysInMonth;
apps\web\src\components\billing\AlertBanner.tsx:184:    if (projectedUsage > usage.quota_limit * 1.1) { // 110% of quota
apps\web\src\components\billing\AlertBanner.tsx:185:      const daysToExceed = Math.ceil((usage.quota_limit - usage.quota_used) / usageRate);
apps\web\src\components\billing\AlertBanner.tsx:188:        id: 'usage-forecast',
apps\web\src\components\billing\AlertBanner.tsx:190:        title: 'Usage Forecast Warning',
apps\web\src\components\billing\AlertBanner.tsx:302:  usage,
apps\web\src\components\billing\AlertBanner.tsx:308:  const hasQuotaIssue = usage.quota_limit &&
apps\web\src\components\billing\AlertBanner.tsx:309:    getQuotaThreshold(usage.quota_used, usage.quota_limit) !== 'normal';
apps\web\src\components\billing\AlertBanner.tsx:330:              {usage.quota_remaining} validations remaining
apps\web\src\components\billing\bank\BankComplianceView.tsx:130:    total_usage: 8650,
apps\web\src\components\billing\bank\BankComplianceView.tsx:133:    avg_monthly_usage: 2883,
apps\web\src\components\billing\bank\BankComplianceView.tsx:135:    usage_growth: 12.5, // percentage
apps\web\src\components\billing\bank\BankComplianceView.tsx:141:    const baseUsage = 2500 + (Math.random() * 1000);
apps\web\src\components\billing\bank\BankComplianceView.tsx:142:    const baseRevenue = baseUsage * 1200;
apps\web\src\components\billing\bank\BankComplianceView.tsx:146:      total_usage: Math.floor(baseUsage),
apps\web\src\components\billing\bank\BankComplianceView.tsx:164:    { metric: 'Usage Monitoring', score: 96, status: 'excellent', trend: 'up' },
apps\web\src\components\billing\bank\BankComplianceView.tsx:278:            <CardTitle className="text-sm font-medium">Total Usage</CardTitle>
apps\web\src\components\billing\bank\BankComplianceView.tsx:282:            <div className="text-2xl font-bold">{mockSMEMetrics.total_usage.toLocaleString()}</div>
apps\web\src\components\billing\bank\BankComplianceView.tsx:286:                +{mockSMEMetrics.usage_growth}% vs last period
apps\web\src\components\billing\bank\BankComplianceView.tsx:328:          {/* Usage Trends */}
apps\web\src\components\billing\bank\BankComplianceView.tsx:333:                SME Usage Trends
apps\web\src\components\billing\bank\BankComplianceView.tsx:349:                              <span className="text-blue-600">Usage: </span>
apps\web\src\components\billing\bank\BankComplianceView.tsx:364:                    dataKey="total_usage"
apps\web\src\components\billing\bank\BankComplianceView.tsx:562:                      {month.total_usage.toLocaleString()} validations
apps\web\src\components\billing\BillingNav.tsx:75:    if (pathname.includes('/usage')) return 'usage';
apps\web\src\components\billing\BillingNav.tsx:95:        case 'usage':
apps\web\src\components\billing\BillingNav.tsx:96:          navigate(`${basePath}/usage`);
apps\web\src\components\billing\BillingNav.tsx:144:          <TabsTrigger value="usage" className="gap-2">
apps\web\src\components\billing\BillingNav.tsx:146:            <span className="hidden sm:inline">Usage</span>
apps\web\src\components\billing\BillingNav.tsx:245:    if (pathname.includes('/usage')) return 'usage';
apps\web\src\components\billing\BillingNav.tsx:259:        case 'usage':
apps\web\src\components\billing\BillingNav.tsx:260:          navigate(`${basePath}/usage`);
apps\web\src\components\billing\BillingNav.tsx:280:          <TabsTrigger value="usage" className="flex flex-col gap-1 py-3">
apps\web\src\components\billing\BillingNav.tsx:282:            <span className="text-xs">Usage</span>
apps\web\src\components\billing\BillingNav.tsx:345:    if (pathname.includes('/usage')) {
apps\web\src\components\billing\BillingNav.tsx:346:      breadcrumbs.push({ label: 'Usage', active: true });
apps\web\src\components\billing\monitoring\MonitoringPanel.tsx:167:      usage_spike: Math.random() > 0.9 ? Math.floor(Math.random() * 500) + 100 : 0
apps\web\src\components\billing\monitoring\MonitoringPanel.tsx:179:      metadata: { company_id: 'abc-123', usage: 105, limit: 100 }
apps\web\src\components\billing\QuotaLimitModal.tsx:39:          <DialogTitle>Usage Limit Reached</DialogTitle>
apps\web\src\components\billing\QuotaMeter.tsx:2: * QuotaMeter component - displays quota usage with visual indicator
apps\web\src\components\billing\QuotaMeter.tsx:29:import type { UsageStats, PlanType } from '@/types/billing';
apps\web\src\components\billing\QuotaMeter.tsx:32:  usage: UsageStats;
apps\web\src\components\billing\QuotaMeter.tsx:38:export function QuotaMeter({ usage, plan, className, showCost = true }: QuotaMeterProps) {
apps\web\src\components\billing\QuotaMeter.tsx:39:  const { quota_used, quota_limit, quota_remaining, total_cost } = usage;
apps\web\src\components\billing\QuotaMeter.tsx:97:          <CardTitle className="text-sm font-medium">Quota Usage</CardTitle>
apps\web\src\components\billing\QuotaMeter.tsx:131:        <CardTitle className="text-sm font-medium">Quota Usage</CardTitle>
apps\web\src\components\billing\QuotaMeter.tsx:139:          {/* Usage numbers */}
apps\web\src\components\billing\QuotaMeter.tsx:218:export function QuotaMeterCompact({ usage, plan, className }: QuotaMeterProps) {
apps\web\src\components\billing\QuotaMeter.tsx:219:  const { quota_used, quota_limit } = usage;
apps\web\src\components\billing\UsageSummaryCard.tsx:2: * UsageSummaryCard component - displays usage summary metrics
apps\web\src\components\billing\UsageSummaryCard.tsx:37:import type { UsageStats, InvoiceStatus } from '@/types/billing';
apps\web\src\components\billing\UsageSummaryCard.tsx:39:interface UsageSummaryCardProps {
apps\web\src\components\billing\UsageSummaryCard.tsx:41:  usage?: UsageStats;
apps\web\src\components\billing\UsageSummaryCard.tsx:51:export function UsageSummaryCard({
apps\web\src\components\billing\UsageSummaryCard.tsx:53:  usage,
apps\web\src\components\billing\UsageSummaryCard.tsx:57:}: UsageSummaryCardProps) {
apps\web\src\components\billing\UsageSummaryCard.tsx:63:          value: usage?.current_month || 0,
apps\web\src\components\billing\UsageSummaryCard.tsx:67:          description: `${usage?.today || 0} today, ${usage?.current_week || 0} this week`,
apps\web\src\components\billing\UsageSummaryCard.tsx:74:          value: Math.floor((usage?.current_month || 0) * 0.15), // Approximate 15% re-check rate
apps\web\src\components\billing\UsageSummaryCard.tsx:85:          value: usage?.total_cost || 0,
apps\web\src\components\billing\UsageSummaryCard.tsx:245:interface UsageSummaryGridProps {
apps\web\src\components\billing\UsageSummaryCard.tsx:246:  usage: UsageStats;
apps\web\src\components\billing\UsageSummaryCard.tsx:255:export function UsageSummaryGrid({
apps\web\src\components\billing\UsageSummaryCard.tsx:256:  usage,
apps\web\src\components\billing\UsageSummaryCard.tsx:260:}: UsageSummaryGridProps) {
apps\web\src\components\billing\UsageSummaryCard.tsx:263:      <UsageSummaryCard
apps\web\src\components\billing\UsageSummaryCard.tsx:265:        usage={usage}
apps\web\src\components\billing\UsageSummaryCard.tsx:268:      <UsageSummaryCard
apps\web\src\components\billing\UsageSummaryCard.tsx:270:        usage={usage}
apps\web\src\components\billing\UsageSummaryCard.tsx:272:      <UsageSummaryCard
apps\web\src\components\billing\UsageSummaryCard.tsx:274:        usage={usage}
apps\web\src\components\billing\UsageSummaryCard.tsx:277:      <UsageSummaryCard
apps\web\src\components\billing\UsageSummaryCard.tsx:286:export function UsageSummaryCompact({
apps\web\src\components\billing\UsageSummaryCard.tsx:287:  usage,
apps\web\src\components\billing\UsageSummaryCard.tsx:290:}: UsageSummaryGridProps) {
apps\web\src\components\billing\UsageSummaryCard.tsx:299:            <div className="text-sm font-medium">{usage.current_month} validations</div>
apps\web\src\components\billing\UsageSummaryCard.tsx:311:            <div className="text-sm font-medium">{formatCurrency(usage.total_cost)}</div>
apps\web\src\components\billing\UsageTable.tsx:2: * UsageTable component - displays usage records with filtering and pagination
apps\web\src\components\billing\UsageTable.tsx:59:import { useUsageRecords, useExportUsageData } from '@/hooks/useBilling';
apps\web\src\components\billing\UsageTable.tsx:60:import type { UsageRecordsFilters, UsageRecord } from '@/types/billing';
apps\web\src\components\billing\UsageTable.tsx:62:interface UsageTableProps {
apps\web\src\components\billing\UsageTable.tsx:64:  initialFilters?: UsageRecordsFilters;
apps\web\src\components\billing\UsageTable.tsx:65:  onRowClick?: (record: UsageRecord) => void;
apps\web\src\components\billing\UsageTable.tsx:73:export function UsageTable({
apps\web\src\components\billing\UsageTable.tsx:82:}: UsageTableProps) {
apps\web\src\components\billing\UsageTable.tsx:83:  const [filters, setFilters] = useState<UsageRecordsFilters>({
apps\web\src\components\billing\UsageTable.tsx:94:  const { data: usageData, isLoading, error, refetch } = useUsageRecords(filters);
apps\web\src\components\billing\UsageTable.tsx:95:  const exportMutation = useExportUsageData();
apps\web\src\components\billing\UsageTable.tsx:142:  const handleFilterChange = (key: keyof UsageRecordsFilters, value: any) => {
apps\web\src\components\billing\UsageTable.tsx:172:  const totalPages = usageData ? Math.ceil(usageData.total / (filters.per_page || 25)) : 0;
apps\web\src\components\billing\UsageTable.tsx:180:            Error loading usage data. Please try again.
apps\web\src\components\billing\UsageTable.tsx:195:            Usage Records
apps\web\src\components\billing\UsageTable.tsx:196:            {usageData && (
apps\web\src\components\billing\UsageTable.tsx:198:                {usageData.total.toLocaleString()} total
apps\web\src\components\billing\UsageTable.tsx:391:        ) : usageData?.records.length === 0 ? (
apps\web\src\components\billing\UsageTable.tsx:394:              No usage records found for the selected filters.
apps\web\src\components\billing\UsageTable.tsx:411:                  {usageData?.records.map((record) => (
apps\web\src\components\billing\UsageTable.tsx:468:                  {Math.min(currentPage * (filters.per_page || 25), usageData?.total || 0)} of{' '}
apps\web\src\components\billing\UsageTable.tsx:469:                  {usageData?.total || 0} results
apps\web\src\components\billing\UsageTable.tsx:520:export function UsageTableCompact({
apps\web\src\components\billing\UsageTable.tsx:527:  const { data: usageData, isLoading } = useUsageRecords({
apps\web\src\components\billing\UsageTable.tsx:536:          <CardTitle className="text-base">Recent Usage</CardTitle>
apps\web\src\components\billing\UsageTable.tsx:556:  if (!usageData?.records.length) {
apps\web\src\components\billing\UsageTable.tsx:560:          <CardTitle className="text-base">Recent Usage</CardTitle>
apps\web\src\components\billing\UsageTable.tsx:564:            No usage records found
apps\web\src\components\billing\UsageTable.tsx:574:        <CardTitle className="text-base">Recent Usage</CardTitle>
apps\web\src\components\billing\UsageTable.tsx:578:          {usageData.records.slice(0, maxRows).map((record) => (
apps\web\src\components\dashboard\DashboardStatCards.tsx:130: * Usage quota card for billing
apps\web\src\components\dashboard\DashboardStatCards.tsx:132:interface UsageQuotaCardProps {
apps\web\src\components\dashboard\DashboardStatCards.tsx:137:export function UsageQuotaCard({ quotaUsed, quotaLimit }: UsageQuotaCardProps) {
apps\web\src\components\dashboard\DashboardStatCards.tsx:146:          <p className="text-sm font-medium text-muted-foreground mb-2">Usage Quota</p>
apps\web\src\components\dashboard\index.ts:27:  UsageQuotaCard,
apps\web\src\components\dashboard\useDashboardBase.ts:168:        usage: "billing-usage",
apps\web\src\components\dashboard\utils.ts:205:  | "billing-usage"
apps\web\src\components\dashboard\utils.ts:224:  "billing-usage",
apps\web\src\components\exporter\ExporterSidebar.tsx:29:  | "billing-usage"
apps\web\src\components\onboarding\steps\role-specific\AdminOnboardingSteps.tsx:56:                    View usage statistics and activity for all users
apps\web\src\components\onboarding\steps\role-specific\AdminOnboardingSteps.tsx:152:                    Monitor system performance and resource usage
apps\web\src\components\onboarding\steps\role-specific\AdminOnboardingSteps.tsx:168:                  <h4 className="font-semibold mb-1">Usage Analytics</h4>
apps\web\src\components\onboarding\steps\role-specific\AdminOnboardingSteps.tsx:170:                    Track system-wide usage and activity patterns
apps\web\src\components\onboarding\steps\role-specific\BankOnboardingSteps.tsx:65:                    System-wide performance and usage metrics
apps\web\src\components\README.md:28:## Usage
apps\web\src\components\README.md:156:### Basic Usage
apps\web\src\components\shared\SavedViewsManager.tsx:213:      usageCount: 0,
apps\web\src\components\sme\ContentLibrary.tsx:54:  usageCount: number;
apps\web\src\components\sme\ContentLibrary.tsx:74:    usageCount: 15,
apps\web\src\components\sme\ContentLibrary.tsx:84:    usageCount: 12,
apps\web\src\components\sme\ContentLibrary.tsx:94:    usageCount: 25,
apps\web\src\components\sme\ContentLibrary.tsx:104:    usageCount: 8,
apps\web\src\components\sme\ContentLibrary.tsx:161:    // Sort by favorite, then usage count
apps\web\src\components\sme\ContentLibrary.tsx:164:      return b.usageCount - a.usageCount;
apps\web\src\components\sme\ContentLibrary.tsx:183:      usageCount: 0,
apps\web\src\components\sme\ContentLibrary.tsx:222:    // Increment usage count
apps\web\src\components\sme\ContentLibrary.tsx:225:        ? { ...c, usageCount: c.usageCount + 1, lastUsed: new Date().toISOString().split('T')[0] }
apps\web\src\components\sme\ContentLibrary.tsx:335:                      <TableHead>Usage</TableHead>
apps\web\src\components\sme\ContentLibrary.tsx:360:                          <Badge variant="secondary">{item.usageCount} times</Badge>
apps\web\src\components\tools\ToolPricingSection.tsx:193:            const usageLimit = tier.checks || tier.lookups || tier.docs || tier.lcs || 
apps\web\src\components\tools\ToolPricingSection.tsx:227:                  {usageLimit && (
apps\web\src\components\tools\ToolPricingSection.tsx:228:                    <p className="text-sm text-muted-foreground mt-1">{usageLimit}</p>
apps\web\src\components\tracking\AISGapAnalysisCard.tsx:36:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\components\tracking\VesselSanctionsCard.tsx:35:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\hooks\use-auth.tsx:226:      authLogger.debug('Calling /auth/me')
apps\web\src\hooks\use-auth.tsx:230:        api.get('/auth/me', { headers }),
apps\web\src\hooks\use-auth.tsx:259:      // Resilience fallback: if backend /auth/me returns 401 but Supabase login succeeded,
apps\web\src\hooks\use-auth.tsx:460:      // Supabase users authenticate directly via /auth/me with their Supabase token
apps\web\src\hooks\use-currency.ts:24:const API_BASE = import.meta.env.VITE_API_URL || 'https://trdrhub-api.onrender.com';
apps\web\src\hooks\use-currency.ts:53:        const response = await fetch(`${API_BASE}/auth/me`, {
apps\web\src\hooks\use-user-role.ts:7: * Usage:
apps\web\src\hooks\use-user-role.ts:18:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\hooks\use-user-role.ts:29:  view_usage: boolean;
apps\web\src\hooks\use-user-role.ts:30:  view_org_usage: boolean;
apps\web\src\hooks\use-user-role.ts:56:  view_usage: false,
apps\web\src\hooks\use-user-role.ts:57:  view_org_usage: false,
apps\web\src\hooks\use-user-role.ts:96:  canViewUsage: boolean;
apps\web\src\hooks\use-user-role.ts:97:  canViewOrgUsage: boolean;
apps\web\src\hooks\use-user-role.ts:138:        view_usage: true,
apps\web\src\hooks\use-user-role.ts:139:        view_org_usage: true,
apps\web\src\hooks\use-user-role.ts:242:    canViewUsage: permissions.view_usage,
apps\web\src\hooks\use-user-role.ts:243:    canViewOrgUsage: permissions.view_org_usage,
apps\web\src\hooks\useBilling.ts:9:  UsageRecordsFilters,
apps\web\src\hooks\useBilling.ts:20:  usage: () => [...billingKeys.all, 'usage'] as const,
apps\web\src\hooks\useBilling.ts:21:  usageRecords: (filters: UsageRecordsFilters) => [...billingKeys.usage(), 'records', filters] as const,
apps\web\src\hooks\useBilling.ts:29:    usage: (startDate: string, endDate: string) => [...billingKeys.admin.all, 'usage', startDate, endDate] as const,
apps\web\src\hooks\useBilling.ts:51:// Usage statistics hook
apps\web\src\hooks\useBilling.ts:52:export const useUsageStats = () => {
apps\web\src\hooks\useBilling.ts:54:    queryKey: billingKeys.usage(),
apps\web\src\hooks\useBilling.ts:55:    queryFn: billingApi.getUsageStats,
apps\web\src\hooks\useBilling.ts:63:// Usage records hook with filters
apps\web\src\hooks\useBilling.ts:64:export const useUsageRecords = (filters: UsageRecordsFilters = {}) => {
apps\web\src\hooks\useBilling.ts:66:    queryKey: billingKeys.usageRecords(filters),
apps\web\src\hooks\useBilling.ts:67:    queryFn: () => billingApi.getUsageRecords(filters),
apps\web\src\hooks\useBilling.ts:202:// Export usage data mutation
apps\web\src\hooks\useBilling.ts:203:export const useExportUsageData = () => {
apps\web\src\hooks\useBilling.ts:205:    mutationFn: billingApi.exportUsageData,
apps\web\src\hooks\useBilling.ts:210:      a.download = `usage-export-${new Date().toISOString().split('T')[0]}.csv`;
apps\web\src\hooks\useBilling.ts:215:      toast.success('Usage data exported');
apps\web\src\hooks\useBilling.ts:218:      toast.error(`Failed to export usage data: ${error.message}`);
apps\web\src\hooks\useBilling.ts:251:export const useAdminUsageReport = (startDate: string, endDate: string) => {
apps\web\src\hooks\useBilling.ts:253:    queryKey: billingKeys.admin.usage(startDate, endDate),
apps\web\src\hooks\useBilling.ts:254:    queryFn: () => adminBillingApi.getUsageReport(startDate, endDate),
apps\web\src\hooks\useBilling.ts:352:      queryClient.invalidateQueries({ queryKey: billingKeys.usage() });
apps\web\src\lib\admin\auth.tsx:31:// Export context for direct useContext usage
apps\web\src\lib\admin\auth.tsx:52:const API_BASE_URL = import.meta.env.VITE_API_URL || 'https://trdrhub-api.onrender.com';
apps\web\src\lib\admin\auth.tsx:83:      const response = await api.get('/auth/me', {
apps\web\src\lib\admin\services\mock\mockAdminService.ts:525:      reason: index % 2 === 0 ? "Usage overage" : "Service credit",
apps\web\src\lib\bank\auth.tsx:32:// Export context for direct useContext usage
apps\web\src\lib\bank\auth.tsx:236:                const profileResponse = await fetch(`${API_BASE_URL}/auth/me`, {
apps\web\src\lib\bank\auth.tsx:257:                      const statusResponse = await fetch(`${API_BASE_URL}/onboarding/status`, {
apps\web\src\lib\exporter\auth.tsx:29:// Export context for direct useContext usage
apps\web\src\lib\exporter\exporterSections.ts:116:  | 'billing-usage'
apps\web\src\lib\exporter\exporterSections.ts:168:    case 'billing-usage':
apps\web\src\lib\importer\auth.tsx:28:// Export context for direct useContext usage
apps\web\src\lib\logger.ts:8: * Usage:
apps\web\src\lib\savedViews.ts:18:  usageCount: number;
apps\web\src\lib\savedViews.ts:48:export function saveView(view: Omit<SavedView, 'id' | 'createdAt' | 'updatedAt' | 'usageCount'>): SavedView {
apps\web\src\lib\savedViews.ts:54:    usageCount: 0,
apps\web\src\lib\savedViews.ts:100: * Load a view (increments usage count)
apps\web\src\lib\savedViews.ts:110:  // Increment usage count
apps\web\src\lib\savedViews.ts:111:  view.usageCount = (view.usageCount || 0) + 1;
apps\web\src\pages\admin\sections\banks\BankManagement.tsx:55:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\admin\sections\billing\Adjustments.tsx:44:    reason: "Usage overage",
apps\web\src\pages\admin\sections\billing\Plans.tsx:308:                    <p className="font-medium text-foreground">Usage limits</p>
apps\web\src\pages\admin\sections\llm\Budgets.tsx:85:          description="Set cost guardrails to avoid runaway usage."
apps\web\src\pages\auth\Callback.tsx:74:          const onboardingResponse = await fetch(`${API_BASE_URL}/onboarding/status`, {
apps\web\src\pages\bank\BulkJobs.tsx:349:                      <TableHead>Usage</TableHead>
apps\web\src\pages\bank\BulkJobs.tsx:363:                          Used {template.usage_count} time{template.usage_count !== 1 ? "s" : ""}
apps\web\src\pages\bank\PolicySurface.tsx:774:                Usage statistics and effectiveness metrics for policy overlays and exceptions
apps\web\src\pages\bank\PolicySurface.tsx:797:              Policy Usage Rate
apps\web\src\pages\bank\PolicySurface.tsx:801:            <div className="text-3xl font-bold">{analytics.impact_metrics.policy_usage_rate}%</div>
apps\web\src\pages\bank\PolicySurface.tsx:862:            <CardTitle>Overlay Usage Statistics</CardTitle>
apps\web\src\pages\bank\PolicySurface.tsx:963:            <CardTitle>Top Exceptions by Usage</CardTitle>
apps\web\src\pages\BankDashboardV2.tsx:24:import { BillingUsagePage } from "./BillingUsagePage";
apps\web\src\pages\BankDashboardV2.tsx:116:      usage: "billing-usage",
apps\web\src\pages\BankDashboardV2.tsx:233:        {activeTab === "billing-usage" && <BillingUsagePage onTabChange={handleBillingTabChange} mode="bank" />}
apps\web\src\pages\BillingAllocationsPage.tsx:107:      ['Client', 'Branch', 'Product', 'Budget Limit', 'Quota Limit', 'Usage', 'Cost', 'Remaining Budget'].join(','),
apps\web\src\pages\BillingAllocationsPage.tsx:114:        a.usage_current_period,
apps\web\src\pages\BillingAllocationsPage.tsx:115:        a.usage_cost_current_period,
apps\web\src\pages\BillingAllocationsPage.tsx:128:  const getUsagePercentage = (allocation: Allocation) => {
apps\web\src\pages\BillingAllocationsPage.tsx:130:    return (allocation.usage_cost_current_period / allocation.budget_limit) * 100;
apps\web\src\pages\BillingAllocationsPage.tsx:133:  const getUsageColor = (percentage: number, threshold: number) => {
apps\web\src\pages\BillingAllocationsPage.tsx:192:            <CardTitle className="text-sm font-medium">Total Usage</CardTitle>
apps\web\src\pages\BillingAllocationsPage.tsx:198:                (allocationsData?.allocations || []).reduce((sum, a) => sum + a.usage_cost_current_period, 0)
apps\web\src\pages\BillingAllocationsPage.tsx:244:                    <TableHead>Usage</TableHead>
apps\web\src\pages\BillingAllocationsPage.tsx:253:                    const usagePercent = getUsagePercentage(allocation);
apps\web\src\pages\BillingAllocationsPage.tsx:274:                              {allocation.usage_current_period.toLocaleString()}
apps\web\src\pages\BillingAllocationsPage.tsx:278:                                {usagePercent.toFixed(1)}% of budget
apps\web\src\pages\BillingAllocationsPage.tsx:286:                            className={getUsageColor(usagePercent, allocation.alert_threshold_percent)}
apps\web\src\pages\BillingAllocationsPage.tsx:288:                            {formatCurrency(allocation.usage_cost_current_period)}
apps\web\src\pages\BillingOverviewPage.tsx:17:import { UsageSummaryGrid } from '@/components/billing/UsageSummaryCard';
apps\web\src\pages\BillingOverviewPage.tsx:21:import { UsageTableCompact } from '@/components/billing/UsageTable';
apps\web\src\pages\BillingOverviewPage.tsx:27:  useUsageStats,
apps\web\src\pages\BillingOverviewPage.tsx:35:import { InvoiceStatus, PlanType, type CompanyBillingInfo, type UsageStats, type BankContract } from '@/types/billing';
apps\web\src\pages\BillingOverviewPage.tsx:49:  const { data: usageStats, isLoading: usageLoading } = useUsageStats();
apps\web\src\pages\BillingOverviewPage.tsx:113:  if (billingLoading || usageLoading) {
apps\web\src\pages\BillingOverviewPage.tsx:154:  const defaultUsageStats: UsageStats = {
apps\web\src\pages\BillingOverviewPage.tsx:159:    total_usage: 0,
apps\web\src\pages\BillingOverviewPage.tsx:169:  const effectiveUsageStats = usageStats || defaultUsageStats;
apps\web\src\pages\BillingOverviewPage.tsx:184:            Manage your subscription, usage, and billing for {effectiveBillingInfo.name}
apps\web\src\pages\BillingOverviewPage.tsx:207:        usage={effectiveUsageStats}
apps\web\src\pages\BillingOverviewPage.tsx:221:        {/* Left Column - Usage & Activity */}
apps\web\src\pages\BillingOverviewPage.tsx:223:          {/* Usage Summary Cards */}
apps\web\src\pages\BillingOverviewPage.tsx:224:          <UsageSummaryGrid
apps\web\src\pages\BillingOverviewPage.tsx:225:            usage={effectiveUsageStats}
apps\web\src\pages\BillingOverviewPage.tsx:241:          {/* Recent Usage */}
apps\web\src\pages\BillingOverviewPage.tsx:242:          <UsageTableCompact maxRows={8} />
apps\web\src\pages\BillingOverviewPage.tsx:254:            usage={effectiveUsageStats}
apps\web\src\pages\BillingOverviewPage.tsx:276:              Export Usage Data
apps\web\src\pages\BillingUsagePage.tsx:2: * Billing Usage Page - detailed usage analytics and records
apps\web\src\pages\BillingUsagePage.tsx:39:import { UsageTable } from '@/components/billing/UsageTable';
apps\web\src\pages\BillingUsagePage.tsx:45:  useUsageStats,
apps\web\src\pages\BillingUsagePage.tsx:46:  useUsageRecords,
apps\web\src\pages\BillingUsagePage.tsx:47:  useExportUsageData,
apps\web\src\pages\BillingUsagePage.tsx:53:import type { UsageRecordsFilters } from '@/types/billing';
apps\web\src\pages\BillingUsagePage.tsx:55:export function BillingUsagePage({ onTabChange, mode = 'sme' }: { onTabChange?: (tab: string) => void; mode?: 'sme' | 'bank' }) {
apps\web\src\pages\BillingUsagePage.tsx:56:  const [filters, setFilters] = useState<UsageRecordsFilters>({
apps\web\src\pages\BillingUsagePage.tsx:79:  const { data: usageStats, isLoading: statsLoading } = useUsageStats();
apps\web\src\pages\BillingUsagePage.tsx:80:  const { data: usageRecords } = useUsageRecords(filters);
apps\web\src\pages\BillingUsagePage.tsx:81:  const exportMutation = useExportUsageData();
apps\web\src\pages\BillingUsagePage.tsx:89:      usage: Math.floor(Math.random() * 15) + 1,
apps\web\src\pages\BillingUsagePage.tsx:106:      usage: Math.floor(Math.random() * 80) + 20,
apps\web\src\pages\BillingUsagePage.tsx:115:  const handleFilterChange = (newFilters: UsageRecordsFilters) => {
apps\web\src\pages\BillingUsagePage.tsx:119:  if (statsLoading || !usageStats) {
apps\web\src\pages\BillingUsagePage.tsx:145:          <h1 className="text-2xl font-bold">Usage Analytics</h1>
apps\web\src\pages\BillingUsagePage.tsx:147:            Detailed usage history and trends for your LC validation services
apps\web\src\pages\BillingUsagePage.tsx:166:        currentTab="usage" 
apps\web\src\pages\BillingUsagePage.tsx:181:            <div className="text-2xl font-bold">{usageStats.current_month}</div>
apps\web\src\pages\BillingUsagePage.tsx:194:            <div className="text-2xl font-bold">{usageStats.current_week}</div>
apps\web\src\pages\BillingUsagePage.tsx:208:              {formatCurrency(usageStats.total_cost)}
apps\web\src\pages\BillingUsagePage.tsx:223:              {Math.round(usageStats.current_month / new Date().getDate())}
apps\web\src\pages\BillingUsagePage.tsx:234:        {/* Usage Trends Chart */}
apps\web\src\pages\BillingUsagePage.tsx:240:                Usage Trends
apps\web\src\pages\BillingUsagePage.tsx:283:                              <span className="text-green-600">Usage: </span>
apps\web\src\pages\BillingUsagePage.tsx:294:                    dataKey="usage"
apps\web\src\pages\BillingUsagePage.tsx:342:              usage={usageStats}
apps\web\src\pages\BillingUsagePage.tsx:353:                Usage by Type
apps\web\src\pages\BillingUsagePage.tsx:422:      {/* Detailed Usage Table */}
apps\web\src\pages\BillingUsagePage.tsx:423:      <UsageTable
apps\web\src\pages\BillingUsagePage.tsx:430:          console.log('Usage record clicked:', record);
apps\web\src\pages\BillingUsagePage.tsx:438:export default BillingUsagePage;apps\web\src\pages\ComponentGallery.tsx:283:        {/* Usage Guidelines */}
apps\web\src\pages\ComponentGallery.tsx:286:            <CardTitle>Usage Guidelines</CardTitle>
apps\web\src\pages\ExporterDashboard.tsx:30:import { BillingUsagePage } from "./BillingUsagePage";
apps\web\src\pages\ExporterDashboard.tsx:105:      "notifications", "billing", "billing-usage", "ai-assistance",
apps\web\src\pages\ExporterDashboard.tsx:162:      "notifications", "billing", "billing-usage", "ai-assistance",
apps\web\src\pages\ExporterDashboard.tsx:229:    if (tab === "usage") {
apps\web\src\pages\ExporterDashboard.tsx:230:      handleSectionChange("billing-usage");
apps\web\src\pages\ExporterDashboard.tsx:412:        {/* Billing Usage Section */}
apps\web\src\pages\ExporterDashboard.tsx:413:        {activeSection === "billing-usage" && (
apps\web\src\pages\ExporterDashboard.tsx:414:          <BillingUsagePage onTabChange={handleBillingTabChange} />
apps\web\src\pages\ExporterResultsV2.tsx:129:const API_BASE_URL = import.meta.env.VITE_API_URL || 'https://trdrhub-api.onrender.com';
apps\web\src\pages\hub\HubBilling.tsx:4: * Manage subscription plans, view usage, and handle billing.
apps\web\src\pages\hub\HubBilling.tsx:68:interface UsageData {
apps\web\src\pages\hub\HubBilling.tsx:76:interface CurrentUsage {
apps\web\src\pages\hub\HubBilling.tsx:78:  usage: Record<string, number>;
apps\web\src\pages\hub\HubBilling.tsx:145:  const [usage, setUsage] = useState<CurrentUsage | null>(null);
apps\web\src\pages\hub\HubBilling.tsx:146:  const [limits, setLimits] = useState<UsageData | null>(null);
apps\web\src\pages\hub\HubBilling.tsx:160:      const plansRes = await fetch(`${API_BASE}/usage/plans`);
apps\web\src\pages\hub\HubBilling.tsx:167:      const subRes = await fetch(`${API_BASE}/usage/subscription`, {
apps\web\src\pages\hub\HubBilling.tsx:175:      // Fetch current usage
apps\web\src\pages\hub\HubBilling.tsx:176:      const usageRes = await fetch(`${API_BASE}/usage/current`, {
apps\web\src\pages\hub\HubBilling.tsx:179:      if (usageRes.ok) {
apps\web\src\pages\hub\HubBilling.tsx:180:        const usageData = await usageRes.json();
apps\web\src\pages\hub\HubBilling.tsx:181:        setUsage(usageData);
apps\web\src\pages\hub\HubBilling.tsx:185:      const limitsRes = await fetch(`${API_BASE}/usage/limits`, {
apps\web\src\pages\hub\HubBilling.tsx:251:  const getUsagePercent = (operation: string) => {
apps\web\src\pages\hub\HubBilling.tsx:263:        <p className="text-slate-400">Manage your subscription and usage</p>
apps\web\src\pages\hub\HubBilling.tsx:310:                  {usage?.period?.start && usage?.period?.end
apps\web\src\pages\hub\HubBilling.tsx:311:                    ? `${formatDate(usage.period.start)} - ${formatDate(usage.period.end)}`
apps\web\src\pages\hub\HubBilling.tsx:323:                  {formatCurrency(usage?.overage?.total_charges || 0)}
apps\web\src\pages\hub\HubBilling.tsx:341:        {/* Tabs: Usage / Plans / Invoices */}
apps\web\src\pages\hub\HubBilling.tsx:342:        <Tabs defaultValue="usage" className="space-y-6">
apps\web\src\pages\hub\HubBilling.tsx:344:            <TabsTrigger value="usage" className="data-[state=active]:bg-slate-700">
apps\web\src\pages\hub\HubBilling.tsx:345:              Usage
apps\web\src\pages\hub\HubBilling.tsx:355:          {/* Usage Tab */}
apps\web\src\pages\hub\HubBilling.tsx:356:          <TabsContent value="usage">
apps\web\src\pages\hub\HubBilling.tsx:359:                <CardTitle className="text-white">Usage This Month</CardTitle>
apps\web\src\pages\hub\HubBilling.tsx:361:                  Track your usage across all tools
apps\web\src\pages\hub\HubBilling.tsx:370:                      {usage?.usage?.lc_validations || 0} /{" "}
apps\web\src\pages\hub\HubBilling.tsx:377:                    value={getUsagePercent("lc_validations")}
apps\web\src\pages\hub\HubBilling.tsx:380:                  {usage?.overage?.lc_validations > 0 && (
apps\web\src\pages\hub\HubBilling.tsx:382:                      +{usage.overage.lc_validations} overage @ $5.00 each
apps\web\src\pages\hub\HubBilling.tsx:392:                      {usage?.usage?.price_checks || 0} /{" "}
apps\web\src\pages\hub\HubBilling.tsx:399:                    value={getUsagePercent("price_checks")}
apps\web\src\pages\hub\HubBilling.tsx:402:                  {usage?.overage?.price_checks > 0 && (
apps\web\src\pages\hub\HubBilling.tsx:404:                      +{usage.overage.price_checks} overage @ $0.50 each
apps\web\src\pages\hub\HubBilling.tsx:414:                      {usage?.usage?.hs_lookups || 0} /{" "}
apps\web\src\pages\hub\HubBilling.tsx:421:                    value={getUsagePercent("hs_lookups")}
apps\web\src\pages\hub\HubBilling.tsx:431:                      {usage?.usage?.sanctions_screens || 0} /{" "}
apps\web\src\pages\hub\HubBilling.tsx:438:                    value={getUsagePercent("sanctions_screens")}
apps\web\src\pages\hub\HubBilling.tsx:448:                      {usage?.usage?.container_tracks || 0} /{" "}
apps\web\src\pages\hub\HubBilling.tsx:455:                    value={getUsagePercent("container_tracks")}
apps\web\src\pages\hub\HubBilling.tsx:463:                {usage?.overage?.total_charges > 0 && (
apps\web\src\pages\hub\HubBilling.tsx:471:                        {formatCurrency(usage.overage.total_charges)}
apps\web\src\pages\hub\HubHome.tsx:4: * The central dashboard showing all user's tools, usage stats, and quick actions.
apps\web\src\pages\hub\HubHome.tsx:125:interface UsageData {
apps\web\src\pages\hub\HubHome.tsx:163:  const [usage, setUsage] = useState<UsageData | null>(null);
apps\web\src\pages\hub\HubHome.tsx:184:      // Fetch usage limits
apps\web\src\pages\hub\HubHome.tsx:185:      const limitsRes = await fetch(`${API_BASE}/usage/limits`, {
apps\web\src\pages\hub\HubHome.tsx:190:        setUsage(limitsData);
apps\web\src\pages\hub\HubHome.tsx:194:      const subRes = await fetch(`${API_BASE}/usage/subscription`, {
apps\web\src\pages\hub\HubHome.tsx:203:      const logsRes = await fetch(`${API_BASE}/usage/logs?limit=5`, {
apps\web\src\pages\hub\HubHome.tsx:218:  const getToolUsage = (operation: string) => {
apps\web\src\pages\hub\HubHome.tsx:219:    if (!usage?.limits) return { used: 0, limit: "â€”", remaining: "â€”", percent: 0 };
apps\web\src\pages\hub\HubHome.tsx:220:    const data = usage.limits[operation];
apps\web\src\pages\hub\HubHome.tsx:235:  const getTotalUsagePercent = () => {
apps\web\src\pages\hub\HubHome.tsx:236:    if (!usage?.limits) return 0;
apps\web\src\pages\hub\HubHome.tsx:240:    Object.values(usage.limits).forEach((data) => {
apps\web\src\pages\hub\HubHome.tsx:295:      {/* Usage Overview Card */}
apps\web\src\pages\hub\HubHome.tsx:302:                Usage This Month
apps\web\src\pages\hub\HubHome.tsx:305:                {usage?.period_start && usage?.period_end 
apps\web\src\pages\hub\HubHome.tsx:306:                  ? `${formatDate(usage.period_start)} - ${formatDate(usage.period_end)}`
apps\web\src\pages\hub\HubHome.tsx:312:              <Link to="/hub/usage">
apps\web\src\pages\hub\HubHome.tsx:323:                <span className="text-sm text-slate-400">Overall Usage</span>
apps\web\src\pages\hub\HubHome.tsx:324:                <span className="text-sm font-medium text-white">{Math.round(getTotalUsagePercent())}%</span>
apps\web\src\pages\hub\HubHome.tsx:326:              <Progress value={getTotalUsagePercent()} className="h-2 bg-slate-800" />
apps\web\src\pages\hub\HubHome.tsx:331:                const toolUsage = getToolUsage(tool.operation);
apps\web\src\pages\hub\HubHome.tsx:334:                    <div className="text-2xl font-bold text-white">{toolUsage.used}</div>
apps\web\src\pages\hub\HubHome.tsx:336:                      / {toolUsage.limit} {tool.name.split(" ")[0]}
apps\web\src\pages\hub\HubHome.tsx:360:            const toolUsage = getToolUsage(tool.operation);
apps\web\src\pages\hub\HubHome.tsx:403:                        <span className="text-white font-medium">{toolUsage.used}</span>
apps\web\src\pages\hub\HubHome.tsx:404:                        <span className="text-slate-500"> / {toolUsage.limit} used</span>
apps\web\src\pages\hub\HubLayout.tsx:61:      { id: "usage", label: "Usage", icon: BarChart3, href: "/hub/usage", requiresAdmin: true },
apps\web\src\pages\hub\HubSettings.tsx:79:  email_usage_alerts: boolean;
apps\web\src\pages\hub\HubSettings.tsx:103:    email_usage_alerts: true,
apps\web\src\pages\hub\HubSettings.tsx:416:                    <p className="font-medium text-white">Usage Alerts</p>
apps\web\src\pages\hub\HubSettings.tsx:418:                      Get notified when you're approaching usage limits
apps\web\src\pages\hub\HubSettings.tsx:422:                    checked={notifications.email_usage_alerts}
apps\web\src\pages\hub\HubSettings.tsx:424:                      setNotifications({ ...notifications, email_usage_alerts: v })
apps\web\src\pages\hub\HubTeam.tsx:146:      const subRes = await fetch(`${API_BASE}/usage/subscription`, {
apps\web\src\pages\hub\HubUsage.tsx:2: * Hub Usage - Detailed Usage Analytics
apps\web\src\pages\hub\HubUsage.tsx:4: * View detailed usage statistics, trends, and export data.
apps\web\src\pages\hub\HubUsage.tsx:65:interface UsageSummary {
apps\web\src\pages\hub\HubUsage.tsx:67:  usage: Record<string, number>;
apps\web\src\pages\hub\HubUsage.tsx:78:interface UsageLimits {
apps\web\src\pages\hub\HubUsage.tsx:84:interface UsageLog {
apps\web\src\pages\hub\HubUsage.tsx:95:interface UsageHistory {
apps\web\src\pages\hub\HubUsage.tsx:127:export default function HubUsage() {
apps\web\src\pages\hub\HubUsage.tsx:134:  const [usage, setUsage] = useState<UsageSummary | null>(null);
apps\web\src\pages\hub\HubUsage.tsx:135:  const [limits, setLimits] = useState<UsageLimits | null>(null);
apps\web\src\pages\hub\HubUsage.tsx:136:  const [logs, setLogs] = useState<UsageLog[]>([]);
apps\web\src\pages\hub\HubUsage.tsx:137:  const [history, setHistory] = useState<UsageHistory[]>([]);
apps\web\src\pages\hub\HubUsage.tsx:140:    fetchUsageData();
apps\web\src\pages\hub\HubUsage.tsx:143:  const fetchUsageData = async () => {
apps\web\src\pages\hub\HubUsage.tsx:146:      // Fetch current usage
apps\web\src\pages\hub\HubUsage.tsx:147:      const usageRes = await fetch(`${API_BASE}/usage/current`, {
apps\web\src\pages\hub\HubUsage.tsx:150:      if (usageRes.ok) {
apps\web\src\pages\hub\HubUsage.tsx:151:        const usageData = await usageRes.json();
apps\web\src\pages\hub\HubUsage.tsx:152:        setUsage(usageData);
apps\web\src\pages\hub\HubUsage.tsx:156:      const limitsRes = await fetch(`${API_BASE}/usage/limits`, {
apps\web\src\pages\hub\HubUsage.tsx:165:      const logsRes = await fetch(`${API_BASE}/usage/logs?limit=20`, {
apps\web\src\pages\hub\HubUsage.tsx:174:      const historyRes = await fetch(`${API_BASE}/usage/history`, {
apps\web\src\pages\hub\HubUsage.tsx:183:      console.error("Failed to fetch usage data:", error);
apps\web\src\pages\hub\HubUsage.tsx:191:    await fetchUsageData();
apps\web\src\pages\hub\HubUsage.tsx:195:      description: "Usage data has been updated.",
apps\web\src\pages\hub\HubUsage.tsx:216:    a.download = `usage-${new Date().toISOString().split("T")[0]}.csv`;
apps\web\src\pages\hub\HubUsage.tsx:222:      description: "Usage data downloaded as CSV.",
apps\web\src\pages\hub\HubUsage.tsx:250:  const pieData = usage?.usage
apps\web\src\pages\hub\HubUsage.tsx:251:    ? Object.entries(usage.usage)
apps\web\src\pages\hub\HubUsage.tsx:274:        { month: "Dec", "LC Validations": usage?.usage?.lc_validations || 2, "Price Checks": usage?.usage?.price_checks || 8, "HS Lookups": usage?.usage?.hs_lookups || 3 },
apps\web\src\pages\hub\HubUsage.tsx:277:  const totalUsage = usage?.usage
apps\web\src\pages\hub\HubUsage.tsx:278:    ? Object.values(usage.usage).reduce((a, b) => a + b, 0)
apps\web\src\pages\hub\HubUsage.tsx:281:  const getUsagePercent = (operation: string) => {
apps\web\src\pages\hub\HubUsage.tsx:293:          <h1 className="text-2xl font-bold text-white">Usage Analytics</h1>
apps\web\src\pages\hub\HubUsage.tsx:295:            {usage?.period?.start && usage?.period?.end
apps\web\src\pages\hub\HubUsage.tsx:296:              ? `${formatDate(usage.period.start)} - ${formatDate(usage.period.end)}`
apps\web\src\pages\hub\HubUsage.tsx:336:            <p className="text-3xl font-bold text-white">{totalUsage}</p>
apps\web\src\pages\hub\HubUsage.tsx:348:            <p className="text-3xl font-bold text-white">{usage?.usage?.lc_validations || 0}</p>
apps\web\src\pages\hub\HubUsage.tsx:350:            <Progress value={getUsagePercent("lc_validations")} className="h-1 mt-2 bg-slate-800" />
apps\web\src\pages\hub\HubUsage.tsx:361:            <p className="text-3xl font-bold text-white">{usage?.usage?.price_checks || 0}</p>
apps\web\src\pages\hub\HubUsage.tsx:363:            <Progress value={getUsagePercent("price_checks")} className="h-1 mt-2 bg-slate-800" />
apps\web\src\pages\hub\HubUsage.tsx:373:              {(usage?.overage?.total_charges || 0) > 0 && (
apps\web\src\pages\hub\HubUsage.tsx:380:              {formatCurrency(usage?.overage?.total_charges || 0)}
apps\web\src\pages\hub\HubUsage.tsx:389:        {/* Usage Trend Chart */}
apps\web\src\pages\hub\HubUsage.tsx:392:            <CardTitle className="text-white">Usage Trend</CardTitle>
apps\web\src\pages\hub\HubUsage.tsx:458:              Usage by tool this month
apps\web\src\pages\hub\HubUsage.tsx:495:                    <p className="text-slate-400">No usage data yet</p>
apps\web\src\pages\hub\HubUsage.tsx:504:      {/* Usage by Tool */}
apps\web\src\pages\hub\HubUsage.tsx:507:          <CardTitle className="text-white">Usage by Tool</CardTitle>
apps\web\src\pages\hub\index.ts:10:export { default as HubUsage } from "./HubUsage";
apps\web\src\pages\ImporterDashboardV2.tsx:30:import { BillingUsagePage } from "./BillingUsagePage";
apps\web\src\pages\ImporterDashboardV2.tsx:45:import { useUsageStats, useInvoices } from "@/hooks/useBilling";
apps\web\src\pages\ImporterDashboardV2.tsx:63:  | "billing-usage"
apps\web\src\pages\ImporterDashboardV2.tsx:70:const SECTION_OPTIONS: Section[] = ["dashboard", "workspace", "templates", "upload", "reviews", "analytics", "notifications", "billing", "billing-usage", "ai-assistance", "content-library", "shipment-timeline", "settings", "help"];
apps\web\src\pages\ImporterDashboardV2.tsx:243:      usage: "billing-usage",
apps\web\src\pages\ImporterDashboardV2.tsx:428:          {activeSection === "billing-usage" && <BillingUsagePage onTabChange={handleBillingTabChange} />}
apps\web\src\pages\ImporterDashboardV2.tsx:513:  const { data: usageStats } = useUsageStats();
apps\web\src\pages\ImporterDashboardV2.tsx:519:  const quotaPercentage = usageStats && usageStats.quota_limit
apps\web\src\pages\ImporterDashboardV2.tsx:520:    ? Math.min(100, (usageStats.quota_used / usageStats.quota_limit) * 100)
apps\web\src\pages\ImporterDashboardV2.tsx:526:      {(usageStats || hasPendingInvoices) ? (
apps\web\src\pages\ImporterDashboardV2.tsx:528:          {usageStats ? (
apps\web\src\pages\ImporterDashboardV2.tsx:532:                  <p className="text-sm font-medium text-muted-foreground mb-2">Usage Quota</p>
apps\web\src\pages\ImporterDashboardV2.tsx:535:                      {usageStats.quota_used.toLocaleString()} / {usageStats.quota_limit?.toLocaleString() ?? "âˆž"}
apps\web\src\pages\legal\PrivacyPage.tsx:37:        We may use anonymized and aggregated data to improve our machine learning models. You can opt-out of this data usage for model training by contacting our support team or adjusting your organization settings (Enterprise plans only).
apps\web\src\pages\sme\Templates.tsx:77:    usage_count: 45,
apps\web\src\pages\sme\Templates.tsx:95:    usage_count: 23,
apps\web\src\pages\sme\Templates.tsx:376:                      <TableHead>Usage</TableHead>
apps\web\src\pages\sme\Templates.tsx:397:                          Used {template.usage_count} time{template.usage_count !== 1 ? "s" : ""}
apps\web\src\pages\tools\doc-generator\BankFormatsPage.tsx:39:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\BrandingSettings.tsx:28:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\BuyerDirectoryPage.tsx:58:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\CertificatesPage.tsx:33:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\CreateDocumentWizard.tsx:51:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\DocGeneratorDashboard.tsx:56:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\ImportFromLCopilot.tsx:32:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\PDFPreview.tsx:35:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\ProductCatalogPage.tsx:56:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\SignaturesPage.tsx:34:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\doc-generator\TemplatesPage.tsx:50:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:67:  usage_count: number;
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:70:const emptyProfile: Omit<ApplicantProfile, "id" | "created_at" | "usage_count"> = {
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:84:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:147:        usage_count: 25,
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:163:        usage_count: 12,
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:186:    // Sort: favorites first, then by usage
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:189:      return b.usage_count - a.usage_count;
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:240:          usage_count: 0,
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:308:        usage_count: 0,
apps\web\src\pages\tools\lc-builder\ApplicantProfilesPage.tsx:507:                    Used {profile.usage_count} times
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:69:  usage_count: number;
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:72:const emptyProfile: Omit<BeneficiaryProfile, "id" | "created_at" | "usage_count"> = {
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:94:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:135:        usage_count: 45,
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:153:        usage_count: 18,
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:171:        usage_count: 12,
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:214:    // Sort: favorites first, then by usage
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:217:      return b.usage_count - a.usage_count;
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:270:          usage_count: 0,
apps\web\src\pages\tools\lc-builder\BeneficiaryDirectoryPage.tsx:503:                      Used {profile.usage_count} times
apps\web\src\pages\tools\lc-builder\ClauseLibraryPage.tsx:56:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:36:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:46:  usage_count: number;
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:67:    usage_count: 1250,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:77:    usage_count: 980,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:87:    usage_count: 850,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:97:    usage_count: 720,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:107:    usage_count: 650,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:117:    usage_count: 420,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:127:    usage_count: 380,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:137:    usage_count: 5200,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:174:            usage_count: t.usage_count || 0,
apps\web\src\pages\tools\lc-builder\LCTemplatesPage.tsx:320:                      {template.usage_count.toLocaleString()} uses
apps\web\src\pages\tools\lc-builder\VersionHistoryPage.tsx:43:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\sanctions\SanctionsAPIAccess.tsx:265:      {/* Usage Stats */}
apps\web\src\pages\tools\sanctions\SanctionsAPIAccess.tsx:270:            API Usage
apps\web\src\pages\tools\sanctions\SanctionsCertificates.tsx:19:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\sanctions\SanctionsHistory.tsx:24:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\sanctions\SanctionsWatchlist.tsx:33:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\ActiveShipmentsPage.tsx:68:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\AlertsPage.tsx:50:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\AnalyticsPage.tsx:33:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\ContainerSearchPage.tsx:27:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\ContainerTrackPage.tsx:18:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\ExceptionsPage.tsx:33:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\HistoryPage.tsx:34:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\PerformancePage.tsx:34:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\RouteMapPage.tsx:26:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\TrackingDashboard.tsx:42:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\TrackingOverview.tsx:37:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\VesselSearchPage.tsx:28:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\pages\tools\tracking\VesselTrackPage.tsx:42:const API_BASE = import.meta.env.VITE_API_URL || "https://trdrhub-api.onrender.com";
apps\web\src\types\analytics.ts:106:  usage_by_role: Record<string, number>;
apps\web\src\types\billing.ts:48:export interface UsageStats {
apps\web\src\types\billing.ts:53:  total_usage: number;
apps\web\src\types\billing.ts:60:export interface UsageRecord {
apps\web\src\types\billing.ts:72:export interface UsageRecordList {
apps\web\src\types\billing.ts:73:  records: UsageRecord[];
apps\web\src\types\billing.ts:163:    features: ['100 LC validations per month', 'Standard features', 'Priority email support', 'Usage analytics'],
apps\web\src\types\billing.ts:187:  total_usage: number;
apps\web\src\types\billing.ts:195:export interface AdminUsageReport {
apps\web\src\types\billing.ts:199:  total_usage: number;
apps\web\src\types\billing.ts:214:export interface UsageRecordsFilters {
apps\web\src\types\billing.ts:263:  total_usage: number;
apps\web\src\types\billing.ts:266:  usage_trends: BankUsageTrend[];
apps\web\src\types\billing.ts:271:export interface BankUsageTrend {
apps\web\src\types\billing.ts:273:  total_usage: number;
apps\web\src\types\billing.ts:298:  total_usage: number;
apps\web\src\types\billing.ts:301:  avg_monthly_usage: number;
apps\web\src\types\billing.ts:303:  usage_growth: number;
apps\web\src\types\billing.ts:317:export interface UsageTrendData {
apps\web\src\types\billing.ts:319:  usage: number;
apps\web\src\types\billing.ts:419:  usage_current_period: number;
apps\web\src\types\billing.ts:420:  usage_cost_current_period: number;
apps\web\src\types\monitoring.ts:25:  HIGH_USAGE = 'HIGH_USAGE',
apps\web\src\types\monitoring.ts:74:  usage_spike: number;
apps\web\src\types\monitoring.ts:83:  usage_spike_threshold: number;
apps\web\src\types\monitoring.ts:95:  cpu_usage: number;
apps\web\src\types\monitoring.ts:96:  memory_usage: number;
apps\web\src\types\monitoring.ts:97:  disk_usage: number;
apps\web\src\types\monitoring.ts:257:    case AlertType.HIGH_USAGE: return 'High Usage';
apps\web\tests\e2e\bank\bank-dashboard.spec.ts:20:    await page.route('**/auth/me', (route) => {
apps\web\tests\e2e\bank\bank-dashboard.spec.ts:110:    await page.route('**/auth/me', (route) => {
apps\web\tests\e2e\billing\bank-compliance.spec.ts:214:      await expect(page.locator('[data-testid="company-usage-chart"]')).toBeVisible();
apps\web\tests\e2e\billing\bank-compliance.spec.ts:317:      // Generate new usage data
apps\web\tests\e2e\billing\bank-compliance.spec.ts:318:      await testDataService.createTestUsageRecord('test-company-001');
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:36:      // Create company with high quota usage
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:256:  test.describe('Usage Analytics', () => {
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:257:    test('should display usage summary cards', async ({ page }) => {
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:261:      // Verify usage summary cards
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:262:      await expect(page.locator('[data-testid="usage-summary"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:263:      await expect(page.locator('[data-testid="current-month-usage"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:264:      await expect(page.locator('[data-testid="previous-month-usage"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:265:      await expect(page.locator('[data-testid="average-daily-usage"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:268:    test('should show usage trends chart', async ({ page }) => {
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:270:      await page.goto('/dashboard/billing/usage');
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:273:      await expect(page.locator('[data-testid="usage-trends-chart"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:284:    test('should export usage data', async ({ page }) => {
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:286:      await page.goto('/dashboard/billing/usage');
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:290:      await page.click('[data-testid="export-usage-csv"]');
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:293:      expect(download.suggestedFilename()).toMatch(/usage.*\.csv$/);
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:313:      await expect(page.locator('[data-testid="usage-summary"]')).toBeVisible();
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:329:      await page.route('**/api/billing/usage', route => route.abort());
apps\web\tests\e2e\billing\billing-dashboard.spec.ts:341:      await page.route('**/api/billing/usage', route =>
apps\web\tests\e2e\monitoring\admin-monitoring.spec.ts:204:      // Check resource usage charts
apps\web\tests\e2e\monitoring\admin-monitoring.spec.ts:205:      await expect(page.locator('[data-testid="cpu-usage-chart"]')).toBeVisible();
apps\web\tests\e2e\monitoring\admin-monitoring.spec.ts:206:      await expect(page.locator('[data-testid="memory-usage-chart"]')).toBeVisible();
apps\web\tests\e2e\notifications\notifications-system.spec.ts:369:Current Usage: {{quota_used}} / {{quota_limit}}
apps\web\tests\e2e\setup.ts:69:    // Verify test usage records exist
apps\web\tests\e2e\setup.ts:70:    const testUsageRecords = await testDataService.getTestUsageRecords('test-company-001');
apps\web\tests\e2e\setup.ts:71:    expect(testUsageRecords.length).toBeGreaterThan(0);
apps\web\tests\e2e\setup.ts:127:    const currentUsageRecords = await testDataService.getTestUsageRecords('test-company-001');
apps\web\tests\e2e\setup.ts:129:    if (currentUsageRecords.length < 100) {
apps\web\tests\e2e\setup.ts:144:      '/api/test/usage-records',
apps\web\tests\utils\auth-service.ts:40:    permissions: ['manage_company_users', 'view_billing', 'upgrade_plan', 'view_usage']
apps\web\tests\utils\test-data-service.ts:23:export interface TestUsageRecord {
apps\web\tests\utils\test-data-service.ts:48:      // Setup test usage records
apps\web\tests\utils\test-data-service.ts:49:      await this.setupTestUsageRecords();
apps\web\tests\utils\test-data-service.ts:135:  private async setupTestUsageRecords(): Promise<void> {
apps\web\tests\utils\test-data-service.ts:136:    const usageRecords: TestUsageRecord[] = [];
apps\web\tests\utils\test-data-service.ts:138:    // Generate usage records for the last 30 days
apps\web\tests\utils\test-data-service.ts:144:        usageRecords.push({
apps\web\tests\utils\test-data-service.ts:145:          id: `test-usage-${i}-${j}`,
apps\web\tests\utils\test-data-service.ts:154:    // Batch create usage records
apps\web\tests\utils\test-data-service.ts:155:    await this.makeTestRequest('/test/usage-records/batch', 'POST', { records: usageRecords });
apps\web\tests\utils\test-data-service.ts:221:  async createTestUsageRecord(companyId: string, overrides: Partial<TestUsageRecord> = {}): Promise<TestUsageRecord> {
apps\web\tests\utils\test-data-service.ts:222:    const usageRecord: TestUsageRecord = {
apps\web\tests\utils\test-data-service.ts:223:      id: `test-usage-${Date.now()}`,
apps\web\tests\utils\test-data-service.ts:231:    await this.makeTestRequest('/test/usage-records', 'POST', usageRecord);
apps\web\tests\utils\test-data-service.ts:232:    return usageRecord;
apps\web\tests\utils\test-data-service.ts:263:  async getTestUsageRecords(companyId: string): Promise<TestUsageRecord[]> {
apps\web\tests\utils\test-data-service.ts:264:    return await this.makeTestRequest(`/test/companies/${companyId}/usage-records`, 'GET');
apps\web\tests\utils\test-data-service.ts:307:      await this.makeTestRequest('/test/usage-records/batch', 'POST', { records });
apps\web\vercel.json:14:      "destination": "https://trdrhub-api.onrender.com/$1"
apps\web\vercel.json:26:    "VITE_API_URL": "https://trdrhub-api.onrender.com"
